function IYe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ao(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function RYe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var F7={exports:{}},zT={},L7={exports:{}},Tr={};var rfe;function DYe(){if(rfe)return Tr;rfe=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;function f(L){return L===null||typeof L!="object"?null:(L=d&&L[d]||L["@@iterator"],typeof L=="function"?L:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(L,z,V){this.props=L,this.context=z,this.refs=m,this.updater=V||h}g.prototype.isReactComponent={},g.prototype.setState=function(L,z){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,z,"setState")},g.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function y(){}y.prototype=g.prototype;function v(L,z,V){this.props=L,this.context=z,this.refs=m,this.updater=V||h}var b=v.prototype=new y;b.constructor=v,p(b,g.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function A(L,z,V){var Y,Q={},ne=null,ue=null;if(z!=null)for(Y in z.ref!==void 0&&(ue=z.ref),z.key!==void 0&&(ne=""+z.key),z)E.call(z,Y)&&!T.hasOwnProperty(Y)&&(Q[Y]=z[Y]);var se=arguments.length-2;if(se===1)Q.children=V;else if(1<se){for(var ae=Array(se),he=0;he<se;he++)ae[he]=arguments[he+2];Q.children=ae}if(L&&L.defaultProps)for(Y in se=L.defaultProps,se)Q[Y]===void 0&&(Q[Y]=se[Y]);return{$$typeof:e,type:L,key:ne,ref:ue,props:Q,_owner:S.current}}function R(L,z){return{$$typeof:e,type:L.type,key:z,ref:L.ref,props:L.props,_owner:L._owner}}function I(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function P(L){var z={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(V){return z[V]})}var N=/\/+/g;function M(L,z){return typeof L=="object"&&L!==null&&L.key!=null?P(""+L.key):z.toString(36)}function O(L,z,V,Y,Q){var ne=typeof L;(ne==="undefined"||ne==="boolean")&&(L=null);var ue=!1;if(L===null)ue=!0;else switch(ne){case"string":case"number":ue=!0;break;case"object":switch(L.$$typeof){case e:case t:ue=!0}}if(ue)return ue=L,Q=Q(ue),L=Y===""?"."+M(ue,0):Y,_(Q)?(V="",L!=null&&(V=L.replace(N,"$&/")+"/"),O(Q,z,V,"",function(he){return he})):Q!=null&&(I(Q)&&(Q=R(Q,V+(!Q.key||ue&&ue.key===Q.key?"":(""+Q.key).replace(N,"$&/")+"/")+L)),z.push(Q)),1;if(ue=0,Y=Y===""?".":Y+":",_(L))for(var se=0;se<L.length;se++){ne=L[se];var ae=Y+M(ne,se);ue+=O(ne,z,V,ae,Q)}else if(ae=f(L),typeof ae=="function")for(L=ae.call(L),se=0;!(ne=L.next()).done;)ne=ne.value,ae=Y+M(ne,se++),ue+=O(ne,z,V,ae,Q);else if(ne==="object")throw z=String(L),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ue}function j(L,z,V){if(L==null)return L;var Y=[],Q=0;return O(L,Y,"","",function(ne){return z.call(V,ne,Q++)}),Y}function B(L){if(L._status===-1){var z=L._result;z=z(),z.then(function(V){(L._status===0||L._status===-1)&&(L._status=1,L._result=V)},function(V){(L._status===0||L._status===-1)&&(L._status=2,L._result=V)}),L._status===-1&&(L._status=0,L._result=z)}if(L._status===1)return L._result.default;throw L._result}var H={current:null},q={transition:null},G={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:q,ReactCurrentOwner:S};function U(){throw Error("act(...) is not supported in production builds of React.")}return Tr.Children={map:j,forEach:function(L,z,V){j(L,function(){z.apply(this,arguments)},V)},count:function(L){var z=0;return j(L,function(){z++}),z},toArray:function(L){return j(L,function(z){return z})||[]},only:function(L){if(!I(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Tr.Component=g,Tr.Fragment=n,Tr.Profiler=i,Tr.PureComponent=v,Tr.StrictMode=r,Tr.Suspense=l,Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G,Tr.act=U,Tr.cloneElement=function(L,z,V){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Y=p({},L.props),Q=L.key,ne=L.ref,ue=L._owner;if(z!=null){if(z.ref!==void 0&&(ne=z.ref,ue=S.current),z.key!==void 0&&(Q=""+z.key),L.type&&L.type.defaultProps)var se=L.type.defaultProps;for(ae in z)E.call(z,ae)&&!T.hasOwnProperty(ae)&&(Y[ae]=z[ae]===void 0&&se!==void 0?se[ae]:z[ae])}var ae=arguments.length-2;if(ae===1)Y.children=V;else if(1<ae){se=Array(ae);for(var he=0;he<ae;he++)se[he]=arguments[he+2];Y.children=se}return{$$typeof:e,type:L.type,key:Q,ref:ne,props:Y,_owner:ue}},Tr.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},Tr.createElement=A,Tr.createFactory=function(L){var z=A.bind(null,L);return z.type=L,z},Tr.createRef=function(){return{current:null}},Tr.forwardRef=function(L){return{$$typeof:a,render:L}},Tr.isValidElement=I,Tr.lazy=function(L){return{$$typeof:c,_payload:{_status:-1,_result:L},_init:B}},Tr.memo=function(L,z){return{$$typeof:u,type:L,compare:z===void 0?null:z}},Tr.startTransition=function(L){var z=q.transition;q.transition={};try{L()}finally{q.transition=z}},Tr.unstable_act=U,Tr.useCallback=function(L,z){return H.current.useCallback(L,z)},Tr.useContext=function(L){return H.current.useContext(L)},Tr.useDebugValue=function(){},Tr.useDeferredValue=function(L){return H.current.useDeferredValue(L)},Tr.useEffect=function(L,z){return H.current.useEffect(L,z)},Tr.useId=function(){return H.current.useId()},Tr.useImperativeHandle=function(L,z,V){return H.current.useImperativeHandle(L,z,V)},Tr.useInsertionEffect=function(L,z){return H.current.useInsertionEffect(L,z)},Tr.useLayoutEffect=function(L,z){return H.current.useLayoutEffect(L,z)},Tr.useMemo=function(L,z){return H.current.useMemo(L,z)},Tr.useReducer=function(L,z,V){return H.current.useReducer(L,z,V)},Tr.useRef=function(L){return H.current.useRef(L)},Tr.useState=function(L){return H.current.useState(L)},Tr.useSyncExternalStore=function(L,z,V){return H.current.useSyncExternalStore(L,z,V)},Tr.useTransition=function(){return H.current.useTransition()},Tr.version="18.3.1",Tr}var ife;function fF(){return ife||(ife=1,L7.exports=DYe()),L7.exports}var sfe;function PYe(){if(sfe)return zT;sfe=1;var e=fF(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,d={},f=null,h=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(h=l.ref);for(c in l)r.call(l,c)&&!s.hasOwnProperty(c)&&(d[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)d[c]===void 0&&(d[c]=l[c]);return{$$typeof:t,type:a,key:f,ref:h,props:d,_owner:i.current}}return zT.Fragment=n,zT.jsx=o,zT.jsxs=o,zT}var ofe;function OYe(){return ofe||(ofe=1,F7.exports=PYe()),F7.exports}var w=OYe(),k=fF();const bn=Ao(k),NYe=IYe({__proto__:null,default:bn},[k]);var y3={},j7={exports:{}},Mu={},B7={exports:{}},z7={};var afe;function MYe(){return afe||(afe=1,(function(e){function t(q,G){var U=q.length;q.push(G);e:for(;0<U;){var L=U-1>>>1,z=q[L];if(0<i(z,G))q[L]=G,q[U]=z,U=L;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var G=q[0],U=q.pop();if(U!==G){q[0]=U;e:for(var L=0,z=q.length,V=z>>>1;L<V;){var Y=2*(L+1)-1,Q=q[Y],ne=Y+1,ue=q[ne];if(0>i(Q,U))ne<z&&0>i(ue,Q)?(q[L]=ue,q[ne]=U,L=ne):(q[L]=Q,q[Y]=U,L=Y);else if(ne<z&&0>i(ue,U))q[L]=ue,q[ne]=U,L=ne;else break e}}return G}function i(q,G){var U=q.sortIndex-G.sortIndex;return U!==0?U:q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(q){for(var G=n(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=q)r(u),G.sortIndex=G.expirationTime,t(l,G);else break;G=n(u)}}function _(q){if(m=!1,b(q),!p)if(n(l)!==null)p=!0,B(E);else{var G=n(u);G!==null&&H(_,G.startTime-q)}}function E(q,G){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var U=f;try{for(b(G),d=n(l);d!==null&&(!(d.expirationTime>G)||q&&!P());){var L=d.callback;if(typeof L=="function"){d.callback=null,f=d.priorityLevel;var z=L(d.expirationTime<=G);G=e.unstable_now(),typeof z=="function"?d.callback=z:d===n(l)&&r(l),b(G)}else r(l);d=n(l)}if(d!==null)var V=!0;else{var Y=n(u);Y!==null&&H(_,Y.startTime-G),V=!1}return V}finally{d=null,f=U,h=!1}}var S=!1,T=null,A=-1,R=5,I=-1;function P(){return!(e.unstable_now()-I<R)}function N(){if(T!==null){var q=e.unstable_now();I=q;var G=!0;try{G=T(!0,q)}finally{G?M():(S=!1,T=null)}}else S=!1}var M;if(typeof v=="function")M=function(){v(N)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,j=O.port2;O.port1.onmessage=N,M=function(){j.postMessage(null)}}else M=function(){g(N,0)};function B(q){T=q,S||(S=!0,M())}function H(q,G){A=g(function(){q(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,B(E))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(q){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var U=f;f=G;try{return q()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var U=f;f=q;try{return G()}finally{f=U}},e.unstable_scheduleCallback=function(q,G,U){var L=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?L+U:L):U=L,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=U+z,q={id:c++,callback:G,priorityLevel:q,startTime:U,expirationTime:z,sortIndex:-1},U>L?(q.sortIndex=U,t(u,q),n(l)===null&&q===n(u)&&(m?(y(A),A=-1):m=!0,H(_,U-L))):(q.sortIndex=z,t(l,q),p||h||(p=!0,B(E))),q},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(q){var G=f;return function(){var U=f;f=G;try{return q.apply(this,arguments)}finally{f=U}}}})(z7)),z7}var lfe;function $Ye(){return lfe||(lfe=1,B7.exports=MYe()),B7.exports}var ufe;function FYe(){if(ufe)return Mu;ufe=1;var e=fF(),t=$Ye();function n(x){for(var C="https://reactjs.org/docs/error-decoder.html?invariant="+x,D=1;D<arguments.length;D++)C+="&args[]="+encodeURIComponent(arguments[D]);return"Minified React error #"+x+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(x,C){o(x,C),o(x+"Capture",C)}function o(x,C){for(i[x]=C,x=0;x<C.length;x++)r.add(C[x])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},d={};function f(x){return l.call(d,x)?!0:l.call(c,x)?!1:u.test(x)?d[x]=!0:(c[x]=!0,!1)}function h(x,C,D,F){if(D!==null&&D.type===0)return!1;switch(typeof C){case"function":case"symbol":return!0;case"boolean":return F?!1:D!==null?!D.acceptsBooleans:(x=x.toLowerCase().slice(0,5),x!=="data-"&&x!=="aria-");default:return!1}}function p(x,C,D,F){if(C===null||typeof C>"u"||h(x,C,D,F))return!0;if(F)return!1;if(D!==null)switch(D.type){case 3:return!C;case 4:return C===!1;case 5:return isNaN(C);case 6:return isNaN(C)||1>C}return!1}function m(x,C,D,F,K,Z,ce){this.acceptsBooleans=C===2||C===3||C===4,this.attributeName=F,this.attributeNamespace=K,this.mustUseProperty=D,this.propertyName=x,this.type=C,this.sanitizeURL=Z,this.removeEmptyString=ce}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(x){g[x]=new m(x,0,!1,x,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(x){var C=x[0];g[C]=new m(C,1,!1,x[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(x){g[x]=new m(x,2,!1,x.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(x){g[x]=new m(x,2,!1,x,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(x){g[x]=new m(x,3,!1,x.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(x){g[x]=new m(x,3,!0,x,null,!1,!1)}),["capture","download"].forEach(function(x){g[x]=new m(x,4,!1,x,null,!1,!1)}),["cols","rows","size","span"].forEach(function(x){g[x]=new m(x,6,!1,x,null,!1,!1)}),["rowSpan","start"].forEach(function(x){g[x]=new m(x,5,!1,x.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(x){return x[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(x){var C=x.replace(y,v);g[C]=new m(C,1,!1,x,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(x){var C=x.replace(y,v);g[C]=new m(C,1,!1,x,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(x){var C=x.replace(y,v);g[C]=new m(C,1,!1,x,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(x){g[x]=new m(x,1,!1,x.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(x){g[x]=new m(x,1,!1,x.toLowerCase(),null,!0,!0)});function b(x,C,D,F){var K=g.hasOwnProperty(C)?g[C]:null;(K!==null?K.type!==0:F||!(2<C.length)||C[0]!=="o"&&C[0]!=="O"||C[1]!=="n"&&C[1]!=="N")&&(p(C,D,K,F)&&(D=null),F||K===null?f(C)&&(D===null?x.removeAttribute(C):x.setAttribute(C,""+D)):K.mustUseProperty?x[K.propertyName]=D===null?K.type===3?!1:"":D:(C=K.attributeName,F=K.attributeNamespace,D===null?x.removeAttribute(C):(K=K.type,D=K===3||K===4&&D===!0?"":""+D,F?x.setAttributeNS(F,C,D):x.setAttribute(C,D))))}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),P=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),q=Symbol.iterator;function G(x){return x===null||typeof x!="object"?null:(x=q&&x[q]||x["@@iterator"],typeof x=="function"?x:null)}var U=Object.assign,L;function z(x){if(L===void 0)try{throw Error()}catch(D){var C=D.stack.trim().match(/\n( *(at )?)/);L=C&&C[1]||""}return`
`+L+x}var V=!1;function Y(x,C){if(!x||V)return"";V=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(C)if(C=function(){throw Error()},Object.defineProperty(C.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(C,[])}catch(Qe){var F=Qe}Reflect.construct(x,[],C)}else{try{C.call()}catch(Qe){F=Qe}x.call(C.prototype)}else{try{throw Error()}catch(Qe){F=Qe}x()}}catch(Qe){if(Qe&&F&&typeof Qe.stack=="string"){for(var K=Qe.stack.split(`
`),Z=F.stack.split(`
`),ce=K.length-1,Re=Z.length-1;1<=ce&&0<=Re&&K[ce]!==Z[Re];)Re--;for(;1<=ce&&0<=Re;ce--,Re--)if(K[ce]!==Z[Re]){if(ce!==1||Re!==1)do if(ce--,Re--,0>Re||K[ce]!==Z[Re]){var Fe=`
`+K[ce].replace(" at new "," at ");return x.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",x.displayName)),Fe}while(1<=ce&&0<=Re);break}}}finally{V=!1,Error.prepareStackTrace=D}return(x=x?x.displayName||x.name:"")?z(x):""}function Q(x){switch(x.tag){case 5:return z(x.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return x=Y(x.type,!1),x;case 11:return x=Y(x.type.render,!1),x;case 1:return x=Y(x.type,!0),x;default:return""}}function ne(x){if(x==null)return null;if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x;switch(x){case T:return"Fragment";case S:return"Portal";case R:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case O:return"SuspenseList"}if(typeof x=="object")switch(x.$$typeof){case P:return(x.displayName||"Context")+".Consumer";case I:return(x._context.displayName||"Context")+".Provider";case N:var C=x.render;return x=x.displayName,x||(x=C.displayName||C.name||"",x=x!==""?"ForwardRef("+x+")":"ForwardRef"),x;case j:return C=x.displayName||null,C!==null?C:ne(x.type)||"Memo";case B:C=x._payload,x=x._init;try{return ne(x(C))}catch{}}return null}function ue(x){var C=x.type;switch(x.tag){case 24:return"Cache";case 9:return(C.displayName||"Context")+".Consumer";case 10:return(C._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return x=C.render,x=x.displayName||x.name||"",C.displayName||(x!==""?"ForwardRef("+x+")":"ForwardRef");case 7:return"Fragment";case 5:return C;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(C);case 8:return C===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof C=="function")return C.displayName||C.name||null;if(typeof C=="string")return C}return null}function se(x){switch(typeof x){case"boolean":case"number":case"string":case"undefined":return x;case"object":return x;default:return""}}function ae(x){var C=x.type;return(x=x.nodeName)&&x.toLowerCase()==="input"&&(C==="checkbox"||C==="radio")}function he(x){var C=ae(x)?"checked":"value",D=Object.getOwnPropertyDescriptor(x.constructor.prototype,C),F=""+x[C];if(!x.hasOwnProperty(C)&&typeof D<"u"&&typeof D.get=="function"&&typeof D.set=="function"){var K=D.get,Z=D.set;return Object.defineProperty(x,C,{configurable:!0,get:function(){return K.call(this)},set:function(ce){F=""+ce,Z.call(this,ce)}}),Object.defineProperty(x,C,{enumerable:D.enumerable}),{getValue:function(){return F},setValue:function(ce){F=""+ce},stopTracking:function(){x._valueTracker=null,delete x[C]}}}}function ie(x){x._valueTracker||(x._valueTracker=he(x))}function le(x){if(!x)return!1;var C=x._valueTracker;if(!C)return!0;var D=C.getValue(),F="";return x&&(F=ae(x)?x.checked?"true":"false":x.value),x=F,x!==D?(C.setValue(x),!0):!1}function Ce(x){if(x=x||(typeof document<"u"?document:void 0),typeof x>"u")return null;try{return x.activeElement||x.body}catch{return x.body}}function X(x,C){var D=C.checked;return U({},C,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:D??x._wrapperState.initialChecked})}function fe(x,C){var D=C.defaultValue==null?"":C.defaultValue,F=C.checked!=null?C.checked:C.defaultChecked;D=se(C.value!=null?C.value:D),x._wrapperState={initialChecked:F,initialValue:D,controlled:C.type==="checkbox"||C.type==="radio"?C.checked!=null:C.value!=null}}function de(x,C){C=C.checked,C!=null&&b(x,"checked",C,!1)}function te(x,C){de(x,C);var D=se(C.value),F=C.type;if(D!=null)F==="number"?(D===0&&x.value===""||x.value!=D)&&(x.value=""+D):x.value!==""+D&&(x.value=""+D);else if(F==="submit"||F==="reset"){x.removeAttribute("value");return}C.hasOwnProperty("value")?me(x,C.type,D):C.hasOwnProperty("defaultValue")&&me(x,C.type,se(C.defaultValue)),C.checked==null&&C.defaultChecked!=null&&(x.defaultChecked=!!C.defaultChecked)}function ee(x,C,D){if(C.hasOwnProperty("value")||C.hasOwnProperty("defaultValue")){var F=C.type;if(!(F!=="submit"&&F!=="reset"||C.value!==void 0&&C.value!==null))return;C=""+x._wrapperState.initialValue,D||C===x.value||(x.value=C),x.defaultValue=C}D=x.name,D!==""&&(x.name=""),x.defaultChecked=!!x._wrapperState.initialChecked,D!==""&&(x.name=D)}function me(x,C,D){(C!=="number"||Ce(x.ownerDocument)!==x)&&(D==null?x.defaultValue=""+x._wrapperState.initialValue:x.defaultValue!==""+D&&(x.defaultValue=""+D))}var Ie=Array.isArray;function Te(x,C,D,F){if(x=x.options,C){C={};for(var K=0;K<D.length;K++)C["$"+D[K]]=!0;for(D=0;D<x.length;D++)K=C.hasOwnProperty("$"+x[D].value),x[D].selected!==K&&(x[D].selected=K),K&&F&&(x[D].defaultSelected=!0)}else{for(D=""+se(D),C=null,K=0;K<x.length;K++){if(x[K].value===D){x[K].selected=!0,F&&(x[K].defaultSelected=!0);return}C!==null||x[K].disabled||(C=x[K])}C!==null&&(C.selected=!0)}}function we(x,C){if(C.dangerouslySetInnerHTML!=null)throw Error(n(91));return U({},C,{value:void 0,defaultValue:void 0,children:""+x._wrapperState.initialValue})}function Me(x,C){var D=C.value;if(D==null){if(D=C.children,C=C.defaultValue,D!=null){if(C!=null)throw Error(n(92));if(Ie(D)){if(1<D.length)throw Error(n(93));D=D[0]}C=D}C==null&&(C=""),D=C}x._wrapperState={initialValue:se(D)}}function ke(x,C){var D=se(C.value),F=se(C.defaultValue);D!=null&&(D=""+D,D!==x.value&&(x.value=D),C.defaultValue==null&&x.defaultValue!==D&&(x.defaultValue=D)),F!=null&&(x.defaultValue=""+F)}function Oe(x){var C=x.textContent;C===x._wrapperState.initialValue&&C!==""&&C!==null&&(x.value=C)}function xe(x){switch(x){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function je(x,C){return x==null||x==="http://www.w3.org/1999/xhtml"?xe(C):x==="http://www.w3.org/2000/svg"&&C==="foreignObject"?"http://www.w3.org/1999/xhtml":x}var Ve,nt=(function(x){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(C,D,F,K){MSApp.execUnsafeLocalFunction(function(){return x(C,D,F,K)})}:x})(function(x,C){if(x.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in x)x.innerHTML=C;else{for(Ve=Ve||document.createElement("div"),Ve.innerHTML="<svg>"+C.valueOf().toString()+"</svg>",C=Ve.firstChild;x.firstChild;)x.removeChild(x.firstChild);for(;C.firstChild;)x.appendChild(C.firstChild)}});function it(x,C){if(C){var D=x.firstChild;if(D&&D===x.lastChild&&D.nodeType===3){D.nodeValue=C;return}}x.textContent=C}var _t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rn=["Webkit","ms","Moz","O"];Object.keys(_t).forEach(function(x){rn.forEach(function(C){C=C+x.charAt(0).toUpperCase()+x.substring(1),_t[C]=_t[x]})});function en(x,C,D){return C==null||typeof C=="boolean"||C===""?"":D||typeof C!="number"||C===0||_t.hasOwnProperty(x)&&_t[x]?(""+C).trim():C+"px"}function zn(x,C){x=x.style;for(var D in C)if(C.hasOwnProperty(D)){var F=D.indexOf("--")===0,K=en(D,C[D],F);D==="float"&&(D="cssFloat"),F?x.setProperty(D,K):x[D]=K}}var zt=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wn(x,C){if(C){if(zt[x]&&(C.children!=null||C.dangerouslySetInnerHTML!=null))throw Error(n(137,x));if(C.dangerouslySetInnerHTML!=null){if(C.children!=null)throw Error(n(60));if(typeof C.dangerouslySetInnerHTML!="object"||!("__html"in C.dangerouslySetInnerHTML))throw Error(n(61))}if(C.style!=null&&typeof C.style!="object")throw Error(n(62))}}function nr(x,C){if(x.indexOf("-")===-1)return typeof C.is=="string";switch(x){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yn=null;function Ur(x){return x=x.target||x.srcElement||window,x.correspondingUseElement&&(x=x.correspondingUseElement),x.nodeType===3?x.parentNode:x}var or=null,Ir=null,On=null;function gn(x){if(x=TT(x)){if(typeof or!="function")throw Error(n(280));var C=x.stateNode;C&&(C=PP(C),or(x.stateNode,x.type,C))}}function cr(x){Ir?On?On.push(x):On=[x]:Ir=x}function xi(){if(Ir){var x=Ir,C=On;if(On=Ir=null,gn(x),C)for(x=0;x<C.length;x++)gn(C[x])}}function Rr(x,C){return x(C)}function Nn(){}var mt=!1;function Cr(x,C,D){if(mt)return x(C,D);mt=!0;try{return Rr(x,C,D)}finally{mt=!1,(Ir!==null||On!==null)&&(Nn(),xi())}}function Xt(x,C){var D=x.stateNode;if(D===null)return null;var F=PP(D);if(F===null)return null;D=F[C];e:switch(C){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(x=x.type,F=!(x==="button"||x==="input"||x==="select"||x==="textarea")),x=!F;break e;default:x=!1}if(x)return null;if(D&&typeof D!="function")throw Error(n(231,C,typeof D));return D}var dr=!1;if(a)try{var vn={};Object.defineProperty(vn,"passive",{get:function(){dr=!0}}),window.addEventListener("test",vn,vn),window.removeEventListener("test",vn,vn)}catch{dr=!1}function ar(x,C,D,F,K,Z,ce,Re,Fe){var Qe=Array.prototype.slice.call(arguments,3);try{C.apply(D,Qe)}catch(vt){this.onError(vt)}}var Or=!1,Hr=null,qr=!1,ko=null,Ja={onError:function(x){Or=!0,Hr=x}};function Tu(x,C,D,F,K,Z,ce,Re,Fe){Or=!1,Hr=null,ar.apply(Ja,arguments)}function yc(x,C,D,F,K,Z,ce,Re,Fe){if(Tu.apply(this,arguments),Or){if(Or){var Qe=Hr;Or=!1,Hr=null}else throw Error(n(198));qr||(qr=!0,ko=Qe)}}function Kn(x){var C=x,D=x;if(x.alternate)for(;C.return;)C=C.return;else{x=C;do C=x,(C.flags&4098)!==0&&(D=C.return),x=C.return;while(x)}return C.tag===3?D:null}function Ji(x){if(x.tag===13){var C=x.memoizedState;if(C===null&&(x=x.alternate,x!==null&&(C=x.memoizedState)),C!==null)return C.dehydrated}return null}function Io(x){if(Kn(x)!==x)throw Error(n(188))}function Xh(x){var C=x.alternate;if(!C){if(C=Kn(x),C===null)throw Error(n(188));return C!==x?null:x}for(var D=x,F=C;;){var K=D.return;if(K===null)break;var Z=K.alternate;if(Z===null){if(F=K.return,F!==null){D=F;continue}break}if(K.child===Z.child){for(Z=K.child;Z;){if(Z===D)return Io(K),x;if(Z===F)return Io(K),C;Z=Z.sibling}throw Error(n(188))}if(D.return!==F.return)D=K,F=Z;else{for(var ce=!1,Re=K.child;Re;){if(Re===D){ce=!0,D=K,F=Z;break}if(Re===F){ce=!0,F=K,D=Z;break}Re=Re.sibling}if(!ce){for(Re=Z.child;Re;){if(Re===D){ce=!0,D=Z,F=K;break}if(Re===F){ce=!0,F=Z,D=K;break}Re=Re.sibling}if(!ce)throw Error(n(189))}}if(D.alternate!==F)throw Error(n(190))}if(D.tag!==3)throw Error(n(188));return D.stateNode.current===D?x:C}function wf(x){return x=Xh(x),x!==null?sd(x):null}function sd(x){if(x.tag===5||x.tag===6)return x;for(x=x.child;x!==null;){var C=sd(x);if(C!==null)return C;x=x.sibling}return null}var od=t.unstable_scheduleCallback,Ro=t.unstable_cancelCallback,Qh=t.unstable_shouldYield,vc=t.unstable_requestPaint,Sr=t.unstable_now,xf=t.unstable_getCurrentPriorityLevel,qs=t.unstable_ImmediatePriority,ea=t.unstable_UserBlockingPriority,Ws=t.unstable_NormalPriority,bc=t.unstable_LowPriority,Sa=t.unstable_IdlePriority,Au=null,Gs=null;function Jh(x){if(Gs&&typeof Gs.onCommitFiberRoot=="function")try{Gs.onCommitFiberRoot(Au,x,void 0,(x.current.flags&128)===128)}catch{}}var Ys=Math.clz32?Math.clz32:_e,ge=Math.log,Ne=Math.LN2;function _e(x){return x>>>=0,x===0?32:31-(ge(x)/Ne|0)|0}var Be=64,Ue=4194304;function Le(x){switch(x&-x){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return x&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return x}}function rt(x,C){var D=x.pendingLanes;if(D===0)return 0;var F=0,K=x.suspendedLanes,Z=x.pingedLanes,ce=D&268435455;if(ce!==0){var Re=ce&~K;Re!==0?F=Le(Re):(Z&=ce,Z!==0&&(F=Le(Z)))}else ce=D&~K,ce!==0?F=Le(ce):Z!==0&&(F=Le(Z));if(F===0)return 0;if(C!==0&&C!==F&&(C&K)===0&&(K=F&-F,Z=C&-C,K>=Z||K===16&&(Z&4194240)!==0))return C;if((F&4)!==0&&(F|=D&16),C=x.entangledLanes,C!==0)for(x=x.entanglements,C&=F;0<C;)D=31-Ys(C),K=1<<D,F|=x[D],C&=~K;return F}function ft(x,C){switch(x){case 1:case 2:case 4:return C+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return C+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gt(x,C){for(var D=x.suspendedLanes,F=x.pingedLanes,K=x.expirationTimes,Z=x.pendingLanes;0<Z;){var ce=31-Ys(Z),Re=1<<ce,Fe=K[ce];Fe===-1?((Re&D)===0||(Re&F)!==0)&&(K[ce]=ft(Re,C)):Fe<=C&&(x.expiredLanes|=Re),Z&=~Re}}function ht(x){return x=x.pendingLanes&-1073741825,x!==0?x:x&1073741824?1073741824:0}function Tt(){var x=Be;return Be<<=1,(Be&4194240)===0&&(Be=64),x}function Gt(x){for(var C=[],D=0;31>D;D++)C.push(x);return C}function Vn(x,C,D){x.pendingLanes|=C,C!==536870912&&(x.suspendedLanes=0,x.pingedLanes=0),x=x.eventTimes,C=31-Ys(C),x[C]=D}function cn(x,C){var D=x.pendingLanes&~C;x.pendingLanes=C,x.suspendedLanes=0,x.pingedLanes=0,x.expiredLanes&=C,x.mutableReadLanes&=C,x.entangledLanes&=C,C=x.entanglements;var F=x.eventTimes;for(x=x.expirationTimes;0<D;){var K=31-Ys(D),Z=1<<K;C[K]=0,F[K]=-1,x[K]=-1,D&=~Z}}function lr(x,C){var D=x.entangledLanes|=C;for(x=x.entanglements;D;){var F=31-Ys(D),K=1<<F;K&C|x[F]&C&&(x[F]|=C),D&=~K}}var sn=0;function vr(x){return x&=-x,1<x?4<x?(x&268435455)!==0?16:536870912:4:1}var Ks,Za,Xs,Zh,ad,ep=!1,Do=[],Zi=null,Ui=null,ta=null,ld=new Map,mo=new Map,el=[],tp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ku(x,C){switch(x){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":ta=null;break;case"pointerover":case"pointerout":ld.delete(C.pointerId);break;case"gotpointercapture":case"lostpointercapture":mo.delete(C.pointerId)}}function ws(x,C,D,F,K,Z){return x===null||x.nativeEvent!==Z?(x={blockedOn:C,domEventName:D,eventSystemFlags:F,nativeEvent:Z,targetContainers:[K]},C!==null&&(C=TT(C),C!==null&&Za(C)),x):(x.eventSystemFlags|=F,C=x.targetContainers,K!==null&&C.indexOf(K)===-1&&C.push(K),x)}function L0(x,C,D,F,K){switch(C){case"focusin":return Zi=ws(Zi,x,C,D,F,K),!0;case"dragenter":return Ui=ws(Ui,x,C,D,F,K),!0;case"mouseover":return ta=ws(ta,x,C,D,F,K),!0;case"pointerover":var Z=K.pointerId;return ld.set(Z,ws(ld.get(Z)||null,x,C,D,F,K)),!0;case"gotpointercapture":return Z=K.pointerId,mo.set(Z,ws(mo.get(Z)||null,x,C,D,F,K)),!0}return!1}function np(x){var C=O1(x.target);if(C!==null){var D=Kn(C);if(D!==null){if(C=D.tag,C===13){if(C=Ji(D),C!==null){x.blockedOn=C,ad(x.priority,function(){Xs(D)});return}}else if(C===3&&D.stateNode.current.memoizedState.isDehydrated){x.blockedOn=D.tag===3?D.stateNode.containerInfo:null;return}}}x.blockedOn=null}function Ta(x){if(x.blockedOn!==null)return!1;for(var C=x.targetContainers;0<C.length;){var D=xn(x.domEventName,x.eventSystemFlags,C[0],x.nativeEvent);if(D===null){D=x.nativeEvent;var F=new D.constructor(D.type,D);Yn=F,D.target.dispatchEvent(F),Yn=null}else return C=TT(D),C!==null&&Za(C),x.blockedOn=D,!1;C.shift()}return!0}function wc(x,C,D){Ta(x)&&D.delete(C)}function j0(){ep=!1,Zi!==null&&Ta(Zi)&&(Zi=null),Ui!==null&&Ta(Ui)&&(Ui=null),ta!==null&&Ta(ta)&&(ta=null),ld.forEach(wc),mo.forEach(wc)}function jl(x,C){x.blockedOn===C&&(x.blockedOn=null,ep||(ep=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,j0)))}function tl(x){function C(K){return jl(K,x)}if(0<Do.length){jl(Do[0],x);for(var D=1;D<Do.length;D++){var F=Do[D];F.blockedOn===x&&(F.blockedOn=null)}}for(Zi!==null&&jl(Zi,x),Ui!==null&&jl(Ui,x),ta!==null&&jl(ta,x),ld.forEach(C),mo.forEach(C),D=0;D<el.length;D++)F=el[D],F.blockedOn===x&&(F.blockedOn=null);for(;0<el.length&&(D=el[0],D.blockedOn===null);)np(D),D.blockedOn===null&&el.shift()}var Se=_.ReactCurrentBatchConfig,oe=!0;function ve(x,C,D,F){var K=sn,Z=Se.transition;Se.transition=null;try{sn=1,It(x,C,D,F)}finally{sn=K,Se.transition=Z}}function $e(x,C,D,F){var K=sn,Z=Se.transition;Se.transition=null;try{sn=4,It(x,C,D,F)}finally{sn=K,Se.transition=Z}}function It(x,C,D,F){if(oe){var K=xn(x,C,D,F);if(K===null)A9(x,C,F,Ft,D),ku(x,F);else if(L0(K,x,C,D,F))F.stopPropagation();else if(ku(x,F),C&4&&-1<tp.indexOf(x)){for(;K!==null;){var Z=TT(K);if(Z!==null&&Ks(Z),Z=xn(x,C,D,F),Z===null&&A9(x,C,F,Ft,D),Z===K)break;K=Z}K!==null&&F.stopPropagation()}else A9(x,C,F,null,D)}}var Ft=null;function xn(x,C,D,F){if(Ft=null,x=Ur(F),x=O1(x),x!==null)if(C=Kn(x),C===null)x=null;else if(D=C.tag,D===13){if(x=Ji(C),x!==null)return x;x=null}else if(D===3){if(C.stateNode.current.memoizedState.isDehydrated)return C.tag===3?C.stateNode.containerInfo:null;x=null}else C!==x&&(x=null);return Ft=x,null}function Hn(x){switch(x){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xf()){case qs:return 1;case ea:return 4;case Ws:case bc:return 16;case Sa:return 536870912;default:return 16}default:return 16}}var ln=null,Tn=null,yr=null;function hi(){if(yr)return yr;var x,C=Tn,D=C.length,F,K="value"in ln?ln.value:ln.textContent,Z=K.length;for(x=0;x<D&&C[x]===K[x];x++);var ce=D-x;for(F=1;F<=ce&&C[D-F]===K[Z-F];F++);return yr=K.slice(x,1<F?1-F:void 0)}function _i(x){var C=x.keyCode;return"charCode"in x?(x=x.charCode,x===0&&C===13&&(x=13)):x=C,x===10&&(x=13),32<=x||x===13?x:0}function Mi(){return!0}function Rs(){return!1}function Ei(x){function C(D,F,K,Z,ce){this._reactName=D,this._targetInst=K,this.type=F,this.nativeEvent=Z,this.target=ce,this.currentTarget=null;for(var Re in x)x.hasOwnProperty(Re)&&(D=x[Re],this[Re]=D?D(Z):Z[Re]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?Mi:Rs,this.isPropagationStopped=Rs,this}return U(C.prototype,{preventDefault:function(){this.defaultPrevented=!0;var D=this.nativeEvent;D&&(D.preventDefault?D.preventDefault():typeof D.returnValue!="unknown"&&(D.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var D=this.nativeEvent;D&&(D.stopPropagation?D.stopPropagation():typeof D.cancelBubble!="unknown"&&(D.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),C}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(x){return x.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iu=Ei(Qs),xc=U({},Qs,{view:0,detail:0}),B0=Ei(xc),_f,Lm,z0,D1=U({},xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rp,button:0,buttons:0,relatedTarget:function(x){return x.relatedTarget===void 0?x.fromElement===x.srcElement?x.toElement:x.fromElement:x.relatedTarget},movementX:function(x){return"movementX"in x?x.movementX:(x!==z0&&(z0&&x.type==="mousemove"?(_f=x.screenX-z0.screenX,Lm=x.screenY-z0.screenY):Lm=_f=0,z0=x),_f)},movementY:function(x){return"movementY"in x?x.movementY:Lm}}),Dx=Ei(D1),gT=U({},D1,{dataTransfer:0}),vP=Ei(gT),Px=U({},xc,{relatedTarget:0}),Ox=Ei(Px),bP=U({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),jm=Ei(bP),wP=U({},Qs,{clipboardData:function(x){return"clipboardData"in x?x.clipboardData:window.clipboardData}}),xP=Ei(wP),_P=U({},Qs,{data:0}),yT=Ei(_P),Nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function CP(x){var C=this.nativeEvent;return C.getModifierState?C.getModifierState(x):(x=EP[x])?!!C[x]:!1}function rp(){return CP}var $=U({},xc,{key:function(x){if(x.key){var C=Nx[x.key]||x.key;if(C!=="Unidentified")return C}return x.type==="keypress"?(x=_i(x),x===13?"Enter":String.fromCharCode(x)):x.type==="keydown"||x.type==="keyup"?Bl[x.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rp,charCode:function(x){return x.type==="keypress"?_i(x):0},keyCode:function(x){return x.type==="keydown"||x.type==="keyup"?x.keyCode:0},which:function(x){return x.type==="keypress"?_i(x):x.type==="keydown"||x.type==="keyup"?x.keyCode:0}}),J=Ei($),re=U({},D1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),be=Ei(re),We=U({},xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rp}),Ze=Ei(We),Lt=U({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ci=Ei(Lt),Po=U({},D1,{deltaX:function(x){return"deltaX"in x?x.deltaX:"wheelDeltaX"in x?-x.wheelDeltaX:0},deltaY:function(x){return"deltaY"in x?x.deltaY:"wheelDeltaY"in x?-x.wheelDeltaY:"wheelDelta"in x?-x.wheelDelta:0},deltaZ:0,deltaMode:0}),Wr=Ei(Po),na=[9,13,27,32],go=a&&"CompositionEvent"in window,ud=null;a&&"documentMode"in document&&(ud=document.documentMode);var _c=a&&"TextEvent"in window&&!ud,P1=a&&(!go||ud&&8<ud&&11>=ud),Mx=" ",Que=!1;function Jue(x,C){switch(x){case"keyup":return na.indexOf(C.keyCode)!==-1;case"keydown":return C.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zue(x){return x=x.detail,typeof x=="object"&&"data"in x?x.data:null}var $x=!1;function TGe(x,C){switch(x){case"compositionend":return Zue(C);case"keypress":return C.which!==32?null:(Que=!0,Mx);case"textInput":return x=C.data,x===Mx&&Que?null:x;default:return null}}function AGe(x,C){if($x)return x==="compositionend"||!go&&Jue(x,C)?(x=hi(),yr=Tn=ln=null,$x=!1,x):null;switch(x){case"paste":return null;case"keypress":if(!(C.ctrlKey||C.altKey||C.metaKey)||C.ctrlKey&&C.altKey){if(C.char&&1<C.char.length)return C.char;if(C.which)return String.fromCharCode(C.which)}return null;case"compositionend":return P1&&C.locale!=="ko"?null:C.data;default:return null}}var kGe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ece(x){var C=x&&x.nodeName&&x.nodeName.toLowerCase();return C==="input"?!!kGe[x.type]:C==="textarea"}function tce(x,C,D,F){cr(F),C=IP(C,"onChange"),0<C.length&&(D=new Iu("onChange","change",null,D,F),x.push({event:D,listeners:C}))}var vT=null,bT=null;function IGe(x){bce(x,0)}function SP(x){var C=zx(x);if(le(C))return x}function RGe(x,C){if(x==="change")return C}var nce=!1;if(a){var v9;if(a){var b9="oninput"in document;if(!b9){var rce=document.createElement("div");rce.setAttribute("oninput","return;"),b9=typeof rce.oninput=="function"}v9=b9}else v9=!1;nce=v9&&(!document.documentMode||9<document.documentMode)}function ice(){vT&&(vT.detachEvent("onpropertychange",sce),bT=vT=null)}function sce(x){if(x.propertyName==="value"&&SP(bT)){var C=[];tce(C,bT,x,Ur(x)),Cr(IGe,C)}}function DGe(x,C,D){x==="focusin"?(ice(),vT=C,bT=D,vT.attachEvent("onpropertychange",sce)):x==="focusout"&&ice()}function PGe(x){if(x==="selectionchange"||x==="keyup"||x==="keydown")return SP(bT)}function OGe(x,C){if(x==="click")return SP(C)}function NGe(x,C){if(x==="input"||x==="change")return SP(C)}function MGe(x,C){return x===C&&(x!==0||1/x===1/C)||x!==x&&C!==C}var Ef=typeof Object.is=="function"?Object.is:MGe;function wT(x,C){if(Ef(x,C))return!0;if(typeof x!="object"||x===null||typeof C!="object"||C===null)return!1;var D=Object.keys(x),F=Object.keys(C);if(D.length!==F.length)return!1;for(F=0;F<D.length;F++){var K=D[F];if(!l.call(C,K)||!Ef(x[K],C[K]))return!1}return!0}function oce(x){for(;x&&x.firstChild;)x=x.firstChild;return x}function ace(x,C){var D=oce(x);x=0;for(var F;D;){if(D.nodeType===3){if(F=x+D.textContent.length,x<=C&&F>=C)return{node:D,offset:C-x};x=F}e:{for(;D;){if(D.nextSibling){D=D.nextSibling;break e}D=D.parentNode}D=void 0}D=oce(D)}}function lce(x,C){return x&&C?x===C?!0:x&&x.nodeType===3?!1:C&&C.nodeType===3?lce(x,C.parentNode):"contains"in x?x.contains(C):x.compareDocumentPosition?!!(x.compareDocumentPosition(C)&16):!1:!1}function uce(){for(var x=window,C=Ce();C instanceof x.HTMLIFrameElement;){try{var D=typeof C.contentWindow.location.href=="string"}catch{D=!1}if(D)x=C.contentWindow;else break;C=Ce(x.document)}return C}function w9(x){var C=x&&x.nodeName&&x.nodeName.toLowerCase();return C&&(C==="input"&&(x.type==="text"||x.type==="search"||x.type==="tel"||x.type==="url"||x.type==="password")||C==="textarea"||x.contentEditable==="true")}function $Ge(x){var C=uce(),D=x.focusedElem,F=x.selectionRange;if(C!==D&&D&&D.ownerDocument&&lce(D.ownerDocument.documentElement,D)){if(F!==null&&w9(D)){if(C=F.start,x=F.end,x===void 0&&(x=C),"selectionStart"in D)D.selectionStart=C,D.selectionEnd=Math.min(x,D.value.length);else if(x=(C=D.ownerDocument||document)&&C.defaultView||window,x.getSelection){x=x.getSelection();var K=D.textContent.length,Z=Math.min(F.start,K);F=F.end===void 0?Z:Math.min(F.end,K),!x.extend&&Z>F&&(K=F,F=Z,Z=K),K=ace(D,Z);var ce=ace(D,F);K&&ce&&(x.rangeCount!==1||x.anchorNode!==K.node||x.anchorOffset!==K.offset||x.focusNode!==ce.node||x.focusOffset!==ce.offset)&&(C=C.createRange(),C.setStart(K.node,K.offset),x.removeAllRanges(),Z>F?(x.addRange(C),x.extend(ce.node,ce.offset)):(C.setEnd(ce.node,ce.offset),x.addRange(C)))}}for(C=[],x=D;x=x.parentNode;)x.nodeType===1&&C.push({element:x,left:x.scrollLeft,top:x.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<C.length;D++)x=C[D],x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}var FGe=a&&"documentMode"in document&&11>=document.documentMode,Fx=null,x9=null,xT=null,_9=!1;function cce(x,C,D){var F=D.window===D?D.document:D.nodeType===9?D:D.ownerDocument;_9||Fx==null||Fx!==Ce(F)||(F=Fx,"selectionStart"in F&&w9(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),xT&&wT(xT,F)||(xT=F,F=IP(x9,"onSelect"),0<F.length&&(C=new Iu("onSelect","select",null,C,D),x.push({event:C,listeners:F}),C.target=Fx)))}function TP(x,C){var D={};return D[x.toLowerCase()]=C.toLowerCase(),D["Webkit"+x]="webkit"+C,D["Moz"+x]="moz"+C,D}var Lx={animationend:TP("Animation","AnimationEnd"),animationiteration:TP("Animation","AnimationIteration"),animationstart:TP("Animation","AnimationStart"),transitionend:TP("Transition","TransitionEnd")},E9={},dce={};a&&(dce=document.createElement("div").style,"AnimationEvent"in window||(delete Lx.animationend.animation,delete Lx.animationiteration.animation,delete Lx.animationstart.animation),"TransitionEvent"in window||delete Lx.transitionend.transition);function AP(x){if(E9[x])return E9[x];if(!Lx[x])return x;var C=Lx[x],D;for(D in C)if(C.hasOwnProperty(D)&&D in dce)return E9[x]=C[D];return x}var fce=AP("animationend"),hce=AP("animationiteration"),pce=AP("animationstart"),mce=AP("transitionend"),gce=new Map,yce="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function V0(x,C){gce.set(x,C),s(C,[x])}for(var C9=0;C9<yce.length;C9++){var S9=yce[C9],LGe=S9.toLowerCase(),jGe=S9[0].toUpperCase()+S9.slice(1);V0(LGe,"on"+jGe)}V0(fce,"onAnimationEnd"),V0(hce,"onAnimationIteration"),V0(pce,"onAnimationStart"),V0("dblclick","onDoubleClick"),V0("focusin","onFocus"),V0("focusout","onBlur"),V0(mce,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _T="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BGe=new Set("cancel close invalid load scroll toggle".split(" ").concat(_T));function vce(x,C,D){var F=x.type||"unknown-event";x.currentTarget=D,yc(F,C,void 0,x),x.currentTarget=null}function bce(x,C){C=(C&4)!==0;for(var D=0;D<x.length;D++){var F=x[D],K=F.event;F=F.listeners;e:{var Z=void 0;if(C)for(var ce=F.length-1;0<=ce;ce--){var Re=F[ce],Fe=Re.instance,Qe=Re.currentTarget;if(Re=Re.listener,Fe!==Z&&K.isPropagationStopped())break e;vce(K,Re,Qe),Z=Fe}else for(ce=0;ce<F.length;ce++){if(Re=F[ce],Fe=Re.instance,Qe=Re.currentTarget,Re=Re.listener,Fe!==Z&&K.isPropagationStopped())break e;vce(K,Re,Qe),Z=Fe}}}if(qr)throw x=ko,qr=!1,ko=null,x}function es(x,C){var D=C[O9];D===void 0&&(D=C[O9]=new Set);var F=x+"__bubble";D.has(F)||(wce(C,x,2,!1),D.add(F))}function T9(x,C,D){var F=0;C&&(F|=4),wce(D,x,F,C)}var kP="_reactListening"+Math.random().toString(36).slice(2);function ET(x){if(!x[kP]){x[kP]=!0,r.forEach(function(D){D!=="selectionchange"&&(BGe.has(D)||T9(D,!1,x),T9(D,!0,x))});var C=x.nodeType===9?x:x.ownerDocument;C===null||C[kP]||(C[kP]=!0,T9("selectionchange",!1,C))}}function wce(x,C,D,F){switch(Hn(C)){case 1:var K=ve;break;case 4:K=$e;break;default:K=It}D=K.bind(null,C,D,x),K=void 0,!dr||C!=="touchstart"&&C!=="touchmove"&&C!=="wheel"||(K=!0),F?K!==void 0?x.addEventListener(C,D,{capture:!0,passive:K}):x.addEventListener(C,D,!0):K!==void 0?x.addEventListener(C,D,{passive:K}):x.addEventListener(C,D,!1)}function A9(x,C,D,F,K){var Z=F;if((C&1)===0&&(C&2)===0&&F!==null)e:for(;;){if(F===null)return;var ce=F.tag;if(ce===3||ce===4){var Re=F.stateNode.containerInfo;if(Re===K||Re.nodeType===8&&Re.parentNode===K)break;if(ce===4)for(ce=F.return;ce!==null;){var Fe=ce.tag;if((Fe===3||Fe===4)&&(Fe=ce.stateNode.containerInfo,Fe===K||Fe.nodeType===8&&Fe.parentNode===K))return;ce=ce.return}for(;Re!==null;){if(ce=O1(Re),ce===null)return;if(Fe=ce.tag,Fe===5||Fe===6){F=Z=ce;continue e}Re=Re.parentNode}}F=F.return}Cr(function(){var Qe=Z,vt=Ur(D),Et=[];e:{var yt=gce.get(x);if(yt!==void 0){var Jt=Iu,on=x;switch(x){case"keypress":if(_i(D)===0)break e;case"keydown":case"keyup":Jt=J;break;case"focusin":on="focus",Jt=Ox;break;case"focusout":on="blur",Jt=Ox;break;case"beforeblur":case"afterblur":Jt=Ox;break;case"click":if(D.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Jt=Dx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Jt=vP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Jt=Ze;break;case fce:case hce:case pce:Jt=jm;break;case mce:Jt=Ci;break;case"scroll":Jt=B0;break;case"wheel":Jt=Wr;break;case"copy":case"cut":case"paste":Jt=xP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Jt=be}var dn=(C&4)!==0,Js=!dn&&x==="scroll",Ge=dn?yt!==null?yt+"Capture":null:yt;dn=[];for(var ze=Qe,Xe;ze!==null;){Xe=ze;var Nt=Xe.stateNode;if(Xe.tag===5&&Nt!==null&&(Xe=Nt,Ge!==null&&(Nt=Xt(ze,Ge),Nt!=null&&dn.push(CT(ze,Nt,Xe)))),Js)break;ze=ze.return}0<dn.length&&(yt=new Jt(yt,on,null,D,vt),Et.push({event:yt,listeners:dn}))}}if((C&7)===0){e:{if(yt=x==="mouseover"||x==="pointerover",Jt=x==="mouseout"||x==="pointerout",yt&&D!==Yn&&(on=D.relatedTarget||D.fromElement)&&(O1(on)||on[Bm]))break e;if((Jt||yt)&&(yt=vt.window===vt?vt:(yt=vt.ownerDocument)?yt.defaultView||yt.parentWindow:window,Jt?(on=D.relatedTarget||D.toElement,Jt=Qe,on=on?O1(on):null,on!==null&&(Js=Kn(on),on!==Js||on.tag!==5&&on.tag!==6)&&(on=null)):(Jt=null,on=Qe),Jt!==on)){if(dn=Dx,Nt="onMouseLeave",Ge="onMouseEnter",ze="mouse",(x==="pointerout"||x==="pointerover")&&(dn=be,Nt="onPointerLeave",Ge="onPointerEnter",ze="pointer"),Js=Jt==null?yt:zx(Jt),Xe=on==null?yt:zx(on),yt=new dn(Nt,ze+"leave",Jt,D,vt),yt.target=Js,yt.relatedTarget=Xe,Nt=null,O1(vt)===Qe&&(dn=new dn(Ge,ze+"enter",on,D,vt),dn.target=Xe,dn.relatedTarget=Js,Nt=dn),Js=Nt,Jt&&on)t:{for(dn=Jt,Ge=on,ze=0,Xe=dn;Xe;Xe=jx(Xe))ze++;for(Xe=0,Nt=Ge;Nt;Nt=jx(Nt))Xe++;for(;0<ze-Xe;)dn=jx(dn),ze--;for(;0<Xe-ze;)Ge=jx(Ge),Xe--;for(;ze--;){if(dn===Ge||Ge!==null&&dn===Ge.alternate)break t;dn=jx(dn),Ge=jx(Ge)}dn=null}else dn=null;Jt!==null&&xce(Et,yt,Jt,dn,!1),on!==null&&Js!==null&&xce(Et,Js,on,dn,!0)}}e:{if(yt=Qe?zx(Qe):window,Jt=yt.nodeName&&yt.nodeName.toLowerCase(),Jt==="select"||Jt==="input"&&yt.type==="file")var yn=RGe;else if(ece(yt))if(nce)yn=NGe;else{yn=PGe;var Fn=DGe}else(Jt=yt.nodeName)&&Jt.toLowerCase()==="input"&&(yt.type==="checkbox"||yt.type==="radio")&&(yn=OGe);if(yn&&(yn=yn(x,Qe))){tce(Et,yn,D,vt);break e}Fn&&Fn(x,yt,Qe),x==="focusout"&&(Fn=yt._wrapperState)&&Fn.controlled&&yt.type==="number"&&me(yt,"number",yt.value)}switch(Fn=Qe?zx(Qe):window,x){case"focusin":(ece(Fn)||Fn.contentEditable==="true")&&(Fx=Fn,x9=Qe,xT=null);break;case"focusout":xT=x9=Fx=null;break;case"mousedown":_9=!0;break;case"contextmenu":case"mouseup":case"dragend":_9=!1,cce(Et,D,vt);break;case"selectionchange":if(FGe)break;case"keydown":case"keyup":cce(Et,D,vt)}var Ln;if(go)e:{switch(x){case"compositionstart":var Qn="onCompositionStart";break e;case"compositionend":Qn="onCompositionEnd";break e;case"compositionupdate":Qn="onCompositionUpdate";break e}Qn=void 0}else $x?Jue(x,D)&&(Qn="onCompositionEnd"):x==="keydown"&&D.keyCode===229&&(Qn="onCompositionStart");Qn&&(P1&&D.locale!=="ko"&&($x||Qn!=="onCompositionStart"?Qn==="onCompositionEnd"&&$x&&(Ln=hi()):(ln=vt,Tn="value"in ln?ln.value:ln.textContent,$x=!0)),Fn=IP(Qe,Qn),0<Fn.length&&(Qn=new yT(Qn,x,null,D,vt),Et.push({event:Qn,listeners:Fn}),Ln?Qn.data=Ln:(Ln=Zue(D),Ln!==null&&(Qn.data=Ln)))),(Ln=_c?TGe(x,D):AGe(x,D))&&(Qe=IP(Qe,"onBeforeInput"),0<Qe.length&&(vt=new yT("onBeforeInput","beforeinput",null,D,vt),Et.push({event:vt,listeners:Qe}),vt.data=Ln))}bce(Et,C)})}function CT(x,C,D){return{instance:x,listener:C,currentTarget:D}}function IP(x,C){for(var D=C+"Capture",F=[];x!==null;){var K=x,Z=K.stateNode;K.tag===5&&Z!==null&&(K=Z,Z=Xt(x,D),Z!=null&&F.unshift(CT(x,Z,K)),Z=Xt(x,C),Z!=null&&F.push(CT(x,Z,K))),x=x.return}return F}function jx(x){if(x===null)return null;do x=x.return;while(x&&x.tag!==5);return x||null}function xce(x,C,D,F,K){for(var Z=C._reactName,ce=[];D!==null&&D!==F;){var Re=D,Fe=Re.alternate,Qe=Re.stateNode;if(Fe!==null&&Fe===F)break;Re.tag===5&&Qe!==null&&(Re=Qe,K?(Fe=Xt(D,Z),Fe!=null&&ce.unshift(CT(D,Fe,Re))):K||(Fe=Xt(D,Z),Fe!=null&&ce.push(CT(D,Fe,Re)))),D=D.return}ce.length!==0&&x.push({event:C,listeners:ce})}var zGe=/\r\n?/g,VGe=/\u0000|\uFFFD/g;function _ce(x){return(typeof x=="string"?x:""+x).replace(zGe,`
`).replace(VGe,"")}function RP(x,C,D){if(C=_ce(C),_ce(x)!==C&&D)throw Error(n(425))}function DP(){}var k9=null,I9=null;function R9(x,C){return x==="textarea"||x==="noscript"||typeof C.children=="string"||typeof C.children=="number"||typeof C.dangerouslySetInnerHTML=="object"&&C.dangerouslySetInnerHTML!==null&&C.dangerouslySetInnerHTML.__html!=null}var D9=typeof setTimeout=="function"?setTimeout:void 0,UGe=typeof clearTimeout=="function"?clearTimeout:void 0,Ece=typeof Promise=="function"?Promise:void 0,HGe=typeof queueMicrotask=="function"?queueMicrotask:typeof Ece<"u"?function(x){return Ece.resolve(null).then(x).catch(qGe)}:D9;function qGe(x){setTimeout(function(){throw x})}function P9(x,C){var D=C,F=0;do{var K=D.nextSibling;if(x.removeChild(D),K&&K.nodeType===8)if(D=K.data,D==="/$"){if(F===0){x.removeChild(K),tl(C);return}F--}else D!=="$"&&D!=="$?"&&D!=="$!"||F++;D=K}while(D);tl(C)}function U0(x){for(;x!=null;x=x.nextSibling){var C=x.nodeType;if(C===1||C===3)break;if(C===8){if(C=x.data,C==="$"||C==="$!"||C==="$?")break;if(C==="/$")return null}}return x}function Cce(x){x=x.previousSibling;for(var C=0;x;){if(x.nodeType===8){var D=x.data;if(D==="$"||D==="$!"||D==="$?"){if(C===0)return x;C--}else D==="/$"&&C++}x=x.previousSibling}return null}var Bx=Math.random().toString(36).slice(2),ip="__reactFiber$"+Bx,ST="__reactProps$"+Bx,Bm="__reactContainer$"+Bx,O9="__reactEvents$"+Bx,WGe="__reactListeners$"+Bx,GGe="__reactHandles$"+Bx;function O1(x){var C=x[ip];if(C)return C;for(var D=x.parentNode;D;){if(C=D[Bm]||D[ip]){if(D=C.alternate,C.child!==null||D!==null&&D.child!==null)for(x=Cce(x);x!==null;){if(D=x[ip])return D;x=Cce(x)}return C}x=D,D=x.parentNode}return null}function TT(x){return x=x[ip]||x[Bm],!x||x.tag!==5&&x.tag!==6&&x.tag!==13&&x.tag!==3?null:x}function zx(x){if(x.tag===5||x.tag===6)return x.stateNode;throw Error(n(33))}function PP(x){return x[ST]||null}var N9=[],Vx=-1;function H0(x){return{current:x}}function ts(x){0>Vx||(x.current=N9[Vx],N9[Vx]=null,Vx--)}function Hi(x,C){Vx++,N9[Vx]=x.current,x.current=C}var q0={},nl=H0(q0),Ru=H0(!1),N1=q0;function Ux(x,C){var D=x.type.contextTypes;if(!D)return q0;var F=x.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===C)return F.__reactInternalMemoizedMaskedChildContext;var K={},Z;for(Z in D)K[Z]=C[Z];return F&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=C,x.__reactInternalMemoizedMaskedChildContext=K),K}function Du(x){return x=x.childContextTypes,x!=null}function OP(){ts(Ru),ts(nl)}function Sce(x,C,D){if(nl.current!==q0)throw Error(n(168));Hi(nl,C),Hi(Ru,D)}function Tce(x,C,D){var F=x.stateNode;if(C=C.childContextTypes,typeof F.getChildContext!="function")return D;F=F.getChildContext();for(var K in F)if(!(K in C))throw Error(n(108,ue(x)||"Unknown",K));return U({},D,F)}function NP(x){return x=(x=x.stateNode)&&x.__reactInternalMemoizedMergedChildContext||q0,N1=nl.current,Hi(nl,x),Hi(Ru,Ru.current),!0}function Ace(x,C,D){var F=x.stateNode;if(!F)throw Error(n(169));D?(x=Tce(x,C,N1),F.__reactInternalMemoizedMergedChildContext=x,ts(Ru),ts(nl),Hi(nl,x)):ts(Ru),Hi(Ru,D)}var zm=null,MP=!1,M9=!1;function kce(x){zm===null?zm=[x]:zm.push(x)}function YGe(x){MP=!0,kce(x)}function W0(){if(!M9&&zm!==null){M9=!0;var x=0,C=sn;try{var D=zm;for(sn=1;x<D.length;x++){var F=D[x];do F=F(!0);while(F!==null)}zm=null,MP=!1}catch(K){throw zm!==null&&(zm=zm.slice(x+1)),od(qs,W0),K}finally{sn=C,M9=!1}}return null}var Hx=[],qx=0,$P=null,FP=0,cd=[],dd=0,M1=null,Vm=1,Um="";function $1(x,C){Hx[qx++]=FP,Hx[qx++]=$P,$P=x,FP=C}function Ice(x,C,D){cd[dd++]=Vm,cd[dd++]=Um,cd[dd++]=M1,M1=x;var F=Vm;x=Um;var K=32-Ys(F)-1;F&=~(1<<K),D+=1;var Z=32-Ys(C)+K;if(30<Z){var ce=K-K%5;Z=(F&(1<<ce)-1).toString(32),F>>=ce,K-=ce,Vm=1<<32-Ys(C)+K|D<<K|F,Um=Z+x}else Vm=1<<Z|D<<K|F,Um=x}function $9(x){x.return!==null&&($1(x,1),Ice(x,1,0))}function F9(x){for(;x===$P;)$P=Hx[--qx],Hx[qx]=null,FP=Hx[--qx],Hx[qx]=null;for(;x===M1;)M1=cd[--dd],cd[dd]=null,Um=cd[--dd],cd[dd]=null,Vm=cd[--dd],cd[dd]=null}var Ec=null,Cc=null,us=!1,Cf=null;function Rce(x,C){var D=md(5,null,null,0);D.elementType="DELETED",D.stateNode=C,D.return=x,C=x.deletions,C===null?(x.deletions=[D],x.flags|=16):C.push(D)}function Dce(x,C){switch(x.tag){case 5:var D=x.type;return C=C.nodeType!==1||D.toLowerCase()!==C.nodeName.toLowerCase()?null:C,C!==null?(x.stateNode=C,Ec=x,Cc=U0(C.firstChild),!0):!1;case 6:return C=x.pendingProps===""||C.nodeType!==3?null:C,C!==null?(x.stateNode=C,Ec=x,Cc=null,!0):!1;case 13:return C=C.nodeType!==8?null:C,C!==null?(D=M1!==null?{id:Vm,overflow:Um}:null,x.memoizedState={dehydrated:C,treeContext:D,retryLane:1073741824},D=md(18,null,null,0),D.stateNode=C,D.return=x,x.child=D,Ec=x,Cc=null,!0):!1;default:return!1}}function L9(x){return(x.mode&1)!==0&&(x.flags&128)===0}function j9(x){if(us){var C=Cc;if(C){var D=C;if(!Dce(x,C)){if(L9(x))throw Error(n(418));C=U0(D.nextSibling);var F=Ec;C&&Dce(x,C)?Rce(F,D):(x.flags=x.flags&-4097|2,us=!1,Ec=x)}}else{if(L9(x))throw Error(n(418));x.flags=x.flags&-4097|2,us=!1,Ec=x}}}function Pce(x){for(x=x.return;x!==null&&x.tag!==5&&x.tag!==3&&x.tag!==13;)x=x.return;Ec=x}function LP(x){if(x!==Ec)return!1;if(!us)return Pce(x),us=!0,!1;var C;if((C=x.tag!==3)&&!(C=x.tag!==5)&&(C=x.type,C=C!=="head"&&C!=="body"&&!R9(x.type,x.memoizedProps)),C&&(C=Cc)){if(L9(x))throw Oce(),Error(n(418));for(;C;)Rce(x,C),C=U0(C.nextSibling)}if(Pce(x),x.tag===13){if(x=x.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));e:{for(x=x.nextSibling,C=0;x;){if(x.nodeType===8){var D=x.data;if(D==="/$"){if(C===0){Cc=U0(x.nextSibling);break e}C--}else D!=="$"&&D!=="$!"&&D!=="$?"||C++}x=x.nextSibling}Cc=null}}else Cc=Ec?U0(x.stateNode.nextSibling):null;return!0}function Oce(){for(var x=Cc;x;)x=U0(x.nextSibling)}function Wx(){Cc=Ec=null,us=!1}function B9(x){Cf===null?Cf=[x]:Cf.push(x)}var KGe=_.ReactCurrentBatchConfig;function AT(x,C,D){if(x=D.ref,x!==null&&typeof x!="function"&&typeof x!="object"){if(D._owner){if(D=D._owner,D){if(D.tag!==1)throw Error(n(309));var F=D.stateNode}if(!F)throw Error(n(147,x));var K=F,Z=""+x;return C!==null&&C.ref!==null&&typeof C.ref=="function"&&C.ref._stringRef===Z?C.ref:(C=function(ce){var Re=K.refs;ce===null?delete Re[Z]:Re[Z]=ce},C._stringRef=Z,C)}if(typeof x!="string")throw Error(n(284));if(!D._owner)throw Error(n(290,x))}return x}function jP(x,C){throw x=Object.prototype.toString.call(C),Error(n(31,x==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":x))}function Nce(x){var C=x._init;return C(x._payload)}function Mce(x){function C(Ge,ze){if(x){var Xe=Ge.deletions;Xe===null?(Ge.deletions=[ze],Ge.flags|=16):Xe.push(ze)}}function D(Ge,ze){if(!x)return null;for(;ze!==null;)C(Ge,ze),ze=ze.sibling;return null}function F(Ge,ze){for(Ge=new Map;ze!==null;)ze.key!==null?Ge.set(ze.key,ze):Ge.set(ze.index,ze),ze=ze.sibling;return Ge}function K(Ge,ze){return Ge=ey(Ge,ze),Ge.index=0,Ge.sibling=null,Ge}function Z(Ge,ze,Xe){return Ge.index=Xe,x?(Xe=Ge.alternate,Xe!==null?(Xe=Xe.index,Xe<ze?(Ge.flags|=2,ze):Xe):(Ge.flags|=2,ze)):(Ge.flags|=1048576,ze)}function ce(Ge){return x&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Re(Ge,ze,Xe,Nt){return ze===null||ze.tag!==6?(ze=D7(Xe,Ge.mode,Nt),ze.return=Ge,ze):(ze=K(ze,Xe),ze.return=Ge,ze)}function Fe(Ge,ze,Xe,Nt){var yn=Xe.type;return yn===T?vt(Ge,ze,Xe.props.children,Nt,Xe.key):ze!==null&&(ze.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===B&&Nce(yn)===ze.type)?(Nt=K(ze,Xe.props),Nt.ref=AT(Ge,ze,Xe),Nt.return=Ge,Nt):(Nt=u3(Xe.type,Xe.key,Xe.props,null,Ge.mode,Nt),Nt.ref=AT(Ge,ze,Xe),Nt.return=Ge,Nt)}function Qe(Ge,ze,Xe,Nt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Xe.containerInfo||ze.stateNode.implementation!==Xe.implementation?(ze=P7(Xe,Ge.mode,Nt),ze.return=Ge,ze):(ze=K(ze,Xe.children||[]),ze.return=Ge,ze)}function vt(Ge,ze,Xe,Nt,yn){return ze===null||ze.tag!==7?(ze=H1(Xe,Ge.mode,Nt,yn),ze.return=Ge,ze):(ze=K(ze,Xe),ze.return=Ge,ze)}function Et(Ge,ze,Xe){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=D7(""+ze,Ge.mode,Xe),ze.return=Ge,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case E:return Xe=u3(ze.type,ze.key,ze.props,null,Ge.mode,Xe),Xe.ref=AT(Ge,null,ze),Xe.return=Ge,Xe;case S:return ze=P7(ze,Ge.mode,Xe),ze.return=Ge,ze;case B:var Nt=ze._init;return Et(Ge,Nt(ze._payload),Xe)}if(Ie(ze)||G(ze))return ze=H1(ze,Ge.mode,Xe,null),ze.return=Ge,ze;jP(Ge,ze)}return null}function yt(Ge,ze,Xe,Nt){var yn=ze!==null?ze.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return yn!==null?null:Re(Ge,ze,""+Xe,Nt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case E:return Xe.key===yn?Fe(Ge,ze,Xe,Nt):null;case S:return Xe.key===yn?Qe(Ge,ze,Xe,Nt):null;case B:return yn=Xe._init,yt(Ge,ze,yn(Xe._payload),Nt)}if(Ie(Xe)||G(Xe))return yn!==null?null:vt(Ge,ze,Xe,Nt,null);jP(Ge,Xe)}return null}function Jt(Ge,ze,Xe,Nt,yn){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Ge=Ge.get(Xe)||null,Re(ze,Ge,""+Nt,yn);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case E:return Ge=Ge.get(Nt.key===null?Xe:Nt.key)||null,Fe(ze,Ge,Nt,yn);case S:return Ge=Ge.get(Nt.key===null?Xe:Nt.key)||null,Qe(ze,Ge,Nt,yn);case B:var Fn=Nt._init;return Jt(Ge,ze,Xe,Fn(Nt._payload),yn)}if(Ie(Nt)||G(Nt))return Ge=Ge.get(Xe)||null,vt(ze,Ge,Nt,yn,null);jP(ze,Nt)}return null}function on(Ge,ze,Xe,Nt){for(var yn=null,Fn=null,Ln=ze,Qn=ze=0,sa=null;Ln!==null&&Qn<Xe.length;Qn++){Ln.index>Qn?(sa=Ln,Ln=null):sa=Ln.sibling;var ii=yt(Ge,Ln,Xe[Qn],Nt);if(ii===null){Ln===null&&(Ln=sa);break}x&&Ln&&ii.alternate===null&&C(Ge,Ln),ze=Z(ii,ze,Qn),Fn===null?yn=ii:Fn.sibling=ii,Fn=ii,Ln=sa}if(Qn===Xe.length)return D(Ge,Ln),us&&$1(Ge,Qn),yn;if(Ln===null){for(;Qn<Xe.length;Qn++)Ln=Et(Ge,Xe[Qn],Nt),Ln!==null&&(ze=Z(Ln,ze,Qn),Fn===null?yn=Ln:Fn.sibling=Ln,Fn=Ln);return us&&$1(Ge,Qn),yn}for(Ln=F(Ge,Ln);Qn<Xe.length;Qn++)sa=Jt(Ln,Ge,Qn,Xe[Qn],Nt),sa!==null&&(x&&sa.alternate!==null&&Ln.delete(sa.key===null?Qn:sa.key),ze=Z(sa,ze,Qn),Fn===null?yn=sa:Fn.sibling=sa,Fn=sa);return x&&Ln.forEach(function(ty){return C(Ge,ty)}),us&&$1(Ge,Qn),yn}function dn(Ge,ze,Xe,Nt){var yn=G(Xe);if(typeof yn!="function")throw Error(n(150));if(Xe=yn.call(Xe),Xe==null)throw Error(n(151));for(var Fn=yn=null,Ln=ze,Qn=ze=0,sa=null,ii=Xe.next();Ln!==null&&!ii.done;Qn++,ii=Xe.next()){Ln.index>Qn?(sa=Ln,Ln=null):sa=Ln.sibling;var ty=yt(Ge,Ln,ii.value,Nt);if(ty===null){Ln===null&&(Ln=sa);break}x&&Ln&&ty.alternate===null&&C(Ge,Ln),ze=Z(ty,ze,Qn),Fn===null?yn=ty:Fn.sibling=ty,Fn=ty,Ln=sa}if(ii.done)return D(Ge,Ln),us&&$1(Ge,Qn),yn;if(Ln===null){for(;!ii.done;Qn++,ii=Xe.next())ii=Et(Ge,ii.value,Nt),ii!==null&&(ze=Z(ii,ze,Qn),Fn===null?yn=ii:Fn.sibling=ii,Fn=ii);return us&&$1(Ge,Qn),yn}for(Ln=F(Ge,Ln);!ii.done;Qn++,ii=Xe.next())ii=Jt(Ln,Ge,Qn,ii.value,Nt),ii!==null&&(x&&ii.alternate!==null&&Ln.delete(ii.key===null?Qn:ii.key),ze=Z(ii,ze,Qn),Fn===null?yn=ii:Fn.sibling=ii,Fn=ii);return x&&Ln.forEach(function(kYe){return C(Ge,kYe)}),us&&$1(Ge,Qn),yn}function Js(Ge,ze,Xe,Nt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===T&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case E:e:{for(var yn=Xe.key,Fn=ze;Fn!==null;){if(Fn.key===yn){if(yn=Xe.type,yn===T){if(Fn.tag===7){D(Ge,Fn.sibling),ze=K(Fn,Xe.props.children),ze.return=Ge,Ge=ze;break e}}else if(Fn.elementType===yn||typeof yn=="object"&&yn!==null&&yn.$$typeof===B&&Nce(yn)===Fn.type){D(Ge,Fn.sibling),ze=K(Fn,Xe.props),ze.ref=AT(Ge,Fn,Xe),ze.return=Ge,Ge=ze;break e}D(Ge,Fn);break}else C(Ge,Fn);Fn=Fn.sibling}Xe.type===T?(ze=H1(Xe.props.children,Ge.mode,Nt,Xe.key),ze.return=Ge,Ge=ze):(Nt=u3(Xe.type,Xe.key,Xe.props,null,Ge.mode,Nt),Nt.ref=AT(Ge,ze,Xe),Nt.return=Ge,Ge=Nt)}return ce(Ge);case S:e:{for(Fn=Xe.key;ze!==null;){if(ze.key===Fn)if(ze.tag===4&&ze.stateNode.containerInfo===Xe.containerInfo&&ze.stateNode.implementation===Xe.implementation){D(Ge,ze.sibling),ze=K(ze,Xe.children||[]),ze.return=Ge,Ge=ze;break e}else{D(Ge,ze);break}else C(Ge,ze);ze=ze.sibling}ze=P7(Xe,Ge.mode,Nt),ze.return=Ge,Ge=ze}return ce(Ge);case B:return Fn=Xe._init,Js(Ge,ze,Fn(Xe._payload),Nt)}if(Ie(Xe))return on(Ge,ze,Xe,Nt);if(G(Xe))return dn(Ge,ze,Xe,Nt);jP(Ge,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,ze!==null&&ze.tag===6?(D(Ge,ze.sibling),ze=K(ze,Xe),ze.return=Ge,Ge=ze):(D(Ge,ze),ze=D7(Xe,Ge.mode,Nt),ze.return=Ge,Ge=ze),ce(Ge)):D(Ge,ze)}return Js}var Gx=Mce(!0),$ce=Mce(!1),BP=H0(null),zP=null,Yx=null,z9=null;function V9(){z9=Yx=zP=null}function U9(x){var C=BP.current;ts(BP),x._currentValue=C}function H9(x,C,D){for(;x!==null;){var F=x.alternate;if((x.childLanes&C)!==C?(x.childLanes|=C,F!==null&&(F.childLanes|=C)):F!==null&&(F.childLanes&C)!==C&&(F.childLanes|=C),x===D)break;x=x.return}}function Kx(x,C){zP=x,z9=Yx=null,x=x.dependencies,x!==null&&x.firstContext!==null&&((x.lanes&C)!==0&&(Pu=!0),x.firstContext=null)}function fd(x){var C=x._currentValue;if(z9!==x)if(x={context:x,memoizedValue:C,next:null},Yx===null){if(zP===null)throw Error(n(308));Yx=x,zP.dependencies={lanes:0,firstContext:x}}else Yx=Yx.next=x;return C}var F1=null;function q9(x){F1===null?F1=[x]:F1.push(x)}function Fce(x,C,D,F){var K=C.interleaved;return K===null?(D.next=D,q9(C)):(D.next=K.next,K.next=D),C.interleaved=D,Hm(x,F)}function Hm(x,C){x.lanes|=C;var D=x.alternate;for(D!==null&&(D.lanes|=C),D=x,x=x.return;x!==null;)x.childLanes|=C,D=x.alternate,D!==null&&(D.childLanes|=C),D=x,x=x.return;return D.tag===3?D.stateNode:null}var G0=!1;function W9(x){x.updateQueue={baseState:x.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lce(x,C){x=x.updateQueue,C.updateQueue===x&&(C.updateQueue={baseState:x.baseState,firstBaseUpdate:x.firstBaseUpdate,lastBaseUpdate:x.lastBaseUpdate,shared:x.shared,effects:x.effects})}function qm(x,C){return{eventTime:x,lane:C,tag:0,payload:null,callback:null,next:null}}function Y0(x,C,D){var F=x.updateQueue;if(F===null)return null;if(F=F.shared,(Zr&2)!==0){var K=F.pending;return K===null?C.next=C:(C.next=K.next,K.next=C),F.pending=C,Hm(x,D)}return K=F.interleaved,K===null?(C.next=C,q9(F)):(C.next=K.next,K.next=C),F.interleaved=C,Hm(x,D)}function VP(x,C,D){if(C=C.updateQueue,C!==null&&(C=C.shared,(D&4194240)!==0)){var F=C.lanes;F&=x.pendingLanes,D|=F,C.lanes=D,lr(x,D)}}function jce(x,C){var D=x.updateQueue,F=x.alternate;if(F!==null&&(F=F.updateQueue,D===F)){var K=null,Z=null;if(D=D.firstBaseUpdate,D!==null){do{var ce={eventTime:D.eventTime,lane:D.lane,tag:D.tag,payload:D.payload,callback:D.callback,next:null};Z===null?K=Z=ce:Z=Z.next=ce,D=D.next}while(D!==null);Z===null?K=Z=C:Z=Z.next=C}else K=Z=C;D={baseState:F.baseState,firstBaseUpdate:K,lastBaseUpdate:Z,shared:F.shared,effects:F.effects},x.updateQueue=D;return}x=D.lastBaseUpdate,x===null?D.firstBaseUpdate=C:x.next=C,D.lastBaseUpdate=C}function UP(x,C,D,F){var K=x.updateQueue;G0=!1;var Z=K.firstBaseUpdate,ce=K.lastBaseUpdate,Re=K.shared.pending;if(Re!==null){K.shared.pending=null;var Fe=Re,Qe=Fe.next;Fe.next=null,ce===null?Z=Qe:ce.next=Qe,ce=Fe;var vt=x.alternate;vt!==null&&(vt=vt.updateQueue,Re=vt.lastBaseUpdate,Re!==ce&&(Re===null?vt.firstBaseUpdate=Qe:Re.next=Qe,vt.lastBaseUpdate=Fe))}if(Z!==null){var Et=K.baseState;ce=0,vt=Qe=Fe=null,Re=Z;do{var yt=Re.lane,Jt=Re.eventTime;if((F&yt)===yt){vt!==null&&(vt=vt.next={eventTime:Jt,lane:0,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null});e:{var on=x,dn=Re;switch(yt=C,Jt=D,dn.tag){case 1:if(on=dn.payload,typeof on=="function"){Et=on.call(Jt,Et,yt);break e}Et=on;break e;case 3:on.flags=on.flags&-65537|128;case 0:if(on=dn.payload,yt=typeof on=="function"?on.call(Jt,Et,yt):on,yt==null)break e;Et=U({},Et,yt);break e;case 2:G0=!0}}Re.callback!==null&&Re.lane!==0&&(x.flags|=64,yt=K.effects,yt===null?K.effects=[Re]:yt.push(Re))}else Jt={eventTime:Jt,lane:yt,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},vt===null?(Qe=vt=Jt,Fe=Et):vt=vt.next=Jt,ce|=yt;if(Re=Re.next,Re===null){if(Re=K.shared.pending,Re===null)break;yt=Re,Re=yt.next,yt.next=null,K.lastBaseUpdate=yt,K.shared.pending=null}}while(!0);if(vt===null&&(Fe=Et),K.baseState=Fe,K.firstBaseUpdate=Qe,K.lastBaseUpdate=vt,C=K.shared.interleaved,C!==null){K=C;do ce|=K.lane,K=K.next;while(K!==C)}else Z===null&&(K.shared.lanes=0);B1|=ce,x.lanes=ce,x.memoizedState=Et}}function Bce(x,C,D){if(x=C.effects,C.effects=null,x!==null)for(C=0;C<x.length;C++){var F=x[C],K=F.callback;if(K!==null){if(F.callback=null,F=D,typeof K!="function")throw Error(n(191,K));K.call(F)}}}var kT={},sp=H0(kT),IT=H0(kT),RT=H0(kT);function L1(x){if(x===kT)throw Error(n(174));return x}function G9(x,C){switch(Hi(RT,C),Hi(IT,x),Hi(sp,kT),x=C.nodeType,x){case 9:case 11:C=(C=C.documentElement)?C.namespaceURI:je(null,"");break;default:x=x===8?C.parentNode:C,C=x.namespaceURI||null,x=x.tagName,C=je(C,x)}ts(sp),Hi(sp,C)}function Xx(){ts(sp),ts(IT),ts(RT)}function zce(x){L1(RT.current);var C=L1(sp.current),D=je(C,x.type);C!==D&&(Hi(IT,x),Hi(sp,D))}function Y9(x){IT.current===x&&(ts(sp),ts(IT))}var xs=H0(0);function HP(x){for(var C=x;C!==null;){if(C.tag===13){var D=C.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||D.data==="$?"||D.data==="$!"))return C}else if(C.tag===19&&C.memoizedProps.revealOrder!==void 0){if((C.flags&128)!==0)return C}else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===x)break;for(;C.sibling===null;){if(C.return===null||C.return===x)return null;C=C.return}C.sibling.return=C.return,C=C.sibling}return null}var K9=[];function X9(){for(var x=0;x<K9.length;x++)K9[x]._workInProgressVersionPrimary=null;K9.length=0}var qP=_.ReactCurrentDispatcher,Q9=_.ReactCurrentBatchConfig,j1=0,_s=null,Oo=null,ra=null,WP=!1,DT=!1,PT=0,XGe=0;function rl(){throw Error(n(321))}function J9(x,C){if(C===null)return!1;for(var D=0;D<C.length&&D<x.length;D++)if(!Ef(x[D],C[D]))return!1;return!0}function Z9(x,C,D,F,K,Z){if(j1=Z,_s=C,C.memoizedState=null,C.updateQueue=null,C.lanes=0,qP.current=x===null||x.memoizedState===null?eYe:tYe,x=D(F,K),DT){Z=0;do{if(DT=!1,PT=0,25<=Z)throw Error(n(301));Z+=1,ra=Oo=null,C.updateQueue=null,qP.current=nYe,x=D(F,K)}while(DT)}if(qP.current=KP,C=Oo!==null&&Oo.next!==null,j1=0,ra=Oo=_s=null,WP=!1,C)throw Error(n(300));return x}function e7(){var x=PT!==0;return PT=0,x}function op(){var x={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?_s.memoizedState=ra=x:ra=ra.next=x,ra}function hd(){if(Oo===null){var x=_s.alternate;x=x!==null?x.memoizedState:null}else x=Oo.next;var C=ra===null?_s.memoizedState:ra.next;if(C!==null)ra=C,Oo=x;else{if(x===null)throw Error(n(310));Oo=x,x={memoizedState:Oo.memoizedState,baseState:Oo.baseState,baseQueue:Oo.baseQueue,queue:Oo.queue,next:null},ra===null?_s.memoizedState=ra=x:ra=ra.next=x}return ra}function OT(x,C){return typeof C=="function"?C(x):C}function t7(x){var C=hd(),D=C.queue;if(D===null)throw Error(n(311));D.lastRenderedReducer=x;var F=Oo,K=F.baseQueue,Z=D.pending;if(Z!==null){if(K!==null){var ce=K.next;K.next=Z.next,Z.next=ce}F.baseQueue=K=Z,D.pending=null}if(K!==null){Z=K.next,F=F.baseState;var Re=ce=null,Fe=null,Qe=Z;do{var vt=Qe.lane;if((j1&vt)===vt)Fe!==null&&(Fe=Fe.next={lane:0,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),F=Qe.hasEagerState?Qe.eagerState:x(F,Qe.action);else{var Et={lane:vt,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null};Fe===null?(Re=Fe=Et,ce=F):Fe=Fe.next=Et,_s.lanes|=vt,B1|=vt}Qe=Qe.next}while(Qe!==null&&Qe!==Z);Fe===null?ce=F:Fe.next=Re,Ef(F,C.memoizedState)||(Pu=!0),C.memoizedState=F,C.baseState=ce,C.baseQueue=Fe,D.lastRenderedState=F}if(x=D.interleaved,x!==null){K=x;do Z=K.lane,_s.lanes|=Z,B1|=Z,K=K.next;while(K!==x)}else K===null&&(D.lanes=0);return[C.memoizedState,D.dispatch]}function n7(x){var C=hd(),D=C.queue;if(D===null)throw Error(n(311));D.lastRenderedReducer=x;var F=D.dispatch,K=D.pending,Z=C.memoizedState;if(K!==null){D.pending=null;var ce=K=K.next;do Z=x(Z,ce.action),ce=ce.next;while(ce!==K);Ef(Z,C.memoizedState)||(Pu=!0),C.memoizedState=Z,C.baseQueue===null&&(C.baseState=Z),D.lastRenderedState=Z}return[Z,F]}function Vce(){}function Uce(x,C){var D=_s,F=hd(),K=C(),Z=!Ef(F.memoizedState,K);if(Z&&(F.memoizedState=K,Pu=!0),F=F.queue,r7(Wce.bind(null,D,F,x),[x]),F.getSnapshot!==C||Z||ra!==null&&ra.memoizedState.tag&1){if(D.flags|=2048,NT(9,qce.bind(null,D,F,K,C),void 0,null),ia===null)throw Error(n(349));(j1&30)!==0||Hce(D,C,K)}return K}function Hce(x,C,D){x.flags|=16384,x={getSnapshot:C,value:D},C=_s.updateQueue,C===null?(C={lastEffect:null,stores:null},_s.updateQueue=C,C.stores=[x]):(D=C.stores,D===null?C.stores=[x]:D.push(x))}function qce(x,C,D,F){C.value=D,C.getSnapshot=F,Gce(C)&&Yce(x)}function Wce(x,C,D){return D(function(){Gce(C)&&Yce(x)})}function Gce(x){var C=x.getSnapshot;x=x.value;try{var D=C();return!Ef(x,D)}catch{return!0}}function Yce(x){var C=Hm(x,1);C!==null&&kf(C,x,1,-1)}function Kce(x){var C=op();return typeof x=="function"&&(x=x()),C.memoizedState=C.baseState=x,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:OT,lastRenderedState:x},C.queue=x,x=x.dispatch=ZGe.bind(null,_s,x),[C.memoizedState,x]}function NT(x,C,D,F){return x={tag:x,create:C,destroy:D,deps:F,next:null},C=_s.updateQueue,C===null?(C={lastEffect:null,stores:null},_s.updateQueue=C,C.lastEffect=x.next=x):(D=C.lastEffect,D===null?C.lastEffect=x.next=x:(F=D.next,D.next=x,x.next=F,C.lastEffect=x)),x}function Xce(){return hd().memoizedState}function GP(x,C,D,F){var K=op();_s.flags|=x,K.memoizedState=NT(1|C,D,void 0,F===void 0?null:F)}function YP(x,C,D,F){var K=hd();F=F===void 0?null:F;var Z=void 0;if(Oo!==null){var ce=Oo.memoizedState;if(Z=ce.destroy,F!==null&&J9(F,ce.deps)){K.memoizedState=NT(C,D,Z,F);return}}_s.flags|=x,K.memoizedState=NT(1|C,D,Z,F)}function Qce(x,C){return GP(8390656,8,x,C)}function r7(x,C){return YP(2048,8,x,C)}function Jce(x,C){return YP(4,2,x,C)}function Zce(x,C){return YP(4,4,x,C)}function ede(x,C){if(typeof C=="function")return x=x(),C(x),function(){C(null)};if(C!=null)return x=x(),C.current=x,function(){C.current=null}}function tde(x,C,D){return D=D!=null?D.concat([x]):null,YP(4,4,ede.bind(null,C,x),D)}function i7(){}function nde(x,C){var D=hd();C=C===void 0?null:C;var F=D.memoizedState;return F!==null&&C!==null&&J9(C,F[1])?F[0]:(D.memoizedState=[x,C],x)}function rde(x,C){var D=hd();C=C===void 0?null:C;var F=D.memoizedState;return F!==null&&C!==null&&J9(C,F[1])?F[0]:(x=x(),D.memoizedState=[x,C],x)}function ide(x,C,D){return(j1&21)===0?(x.baseState&&(x.baseState=!1,Pu=!0),x.memoizedState=D):(Ef(D,C)||(D=Tt(),_s.lanes|=D,B1|=D,x.baseState=!0),C)}function QGe(x,C){var D=sn;sn=D!==0&&4>D?D:4,x(!0);var F=Q9.transition;Q9.transition={};try{x(!1),C()}finally{sn=D,Q9.transition=F}}function sde(){return hd().memoizedState}function JGe(x,C,D){var F=J0(x);if(D={lane:F,action:D,hasEagerState:!1,eagerState:null,next:null},ode(x))ade(C,D);else if(D=Fce(x,C,D,F),D!==null){var K=Vl();kf(D,x,F,K),lde(D,C,F)}}function ZGe(x,C,D){var F=J0(x),K={lane:F,action:D,hasEagerState:!1,eagerState:null,next:null};if(ode(x))ade(C,K);else{var Z=x.alternate;if(x.lanes===0&&(Z===null||Z.lanes===0)&&(Z=C.lastRenderedReducer,Z!==null))try{var ce=C.lastRenderedState,Re=Z(ce,D);if(K.hasEagerState=!0,K.eagerState=Re,Ef(Re,ce)){var Fe=C.interleaved;Fe===null?(K.next=K,q9(C)):(K.next=Fe.next,Fe.next=K),C.interleaved=K;return}}catch{}finally{}D=Fce(x,C,K,F),D!==null&&(K=Vl(),kf(D,x,F,K),lde(D,C,F))}}function ode(x){var C=x.alternate;return x===_s||C!==null&&C===_s}function ade(x,C){DT=WP=!0;var D=x.pending;D===null?C.next=C:(C.next=D.next,D.next=C),x.pending=C}function lde(x,C,D){if((D&4194240)!==0){var F=C.lanes;F&=x.pendingLanes,D|=F,C.lanes=D,lr(x,D)}}var KP={readContext:fd,useCallback:rl,useContext:rl,useEffect:rl,useImperativeHandle:rl,useInsertionEffect:rl,useLayoutEffect:rl,useMemo:rl,useReducer:rl,useRef:rl,useState:rl,useDebugValue:rl,useDeferredValue:rl,useTransition:rl,useMutableSource:rl,useSyncExternalStore:rl,useId:rl,unstable_isNewReconciler:!1},eYe={readContext:fd,useCallback:function(x,C){return op().memoizedState=[x,C===void 0?null:C],x},useContext:fd,useEffect:Qce,useImperativeHandle:function(x,C,D){return D=D!=null?D.concat([x]):null,GP(4194308,4,ede.bind(null,C,x),D)},useLayoutEffect:function(x,C){return GP(4194308,4,x,C)},useInsertionEffect:function(x,C){return GP(4,2,x,C)},useMemo:function(x,C){var D=op();return C=C===void 0?null:C,x=x(),D.memoizedState=[x,C],x},useReducer:function(x,C,D){var F=op();return C=D!==void 0?D(C):C,F.memoizedState=F.baseState=C,x={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:x,lastRenderedState:C},F.queue=x,x=x.dispatch=JGe.bind(null,_s,x),[F.memoizedState,x]},useRef:function(x){var C=op();return x={current:x},C.memoizedState=x},useState:Kce,useDebugValue:i7,useDeferredValue:function(x){return op().memoizedState=x},useTransition:function(){var x=Kce(!1),C=x[0];return x=QGe.bind(null,x[1]),op().memoizedState=x,[C,x]},useMutableSource:function(){},useSyncExternalStore:function(x,C,D){var F=_s,K=op();if(us){if(D===void 0)throw Error(n(407));D=D()}else{if(D=C(),ia===null)throw Error(n(349));(j1&30)!==0||Hce(F,C,D)}K.memoizedState=D;var Z={value:D,getSnapshot:C};return K.queue=Z,Qce(Wce.bind(null,F,Z,x),[x]),F.flags|=2048,NT(9,qce.bind(null,F,Z,D,C),void 0,null),D},useId:function(){var x=op(),C=ia.identifierPrefix;if(us){var D=Um,F=Vm;D=(F&~(1<<32-Ys(F)-1)).toString(32)+D,C=":"+C+"R"+D,D=PT++,0<D&&(C+="H"+D.toString(32)),C+=":"}else D=XGe++,C=":"+C+"r"+D.toString(32)+":";return x.memoizedState=C},unstable_isNewReconciler:!1},tYe={readContext:fd,useCallback:nde,useContext:fd,useEffect:r7,useImperativeHandle:tde,useInsertionEffect:Jce,useLayoutEffect:Zce,useMemo:rde,useReducer:t7,useRef:Xce,useState:function(){return t7(OT)},useDebugValue:i7,useDeferredValue:function(x){var C=hd();return ide(C,Oo.memoizedState,x)},useTransition:function(){var x=t7(OT)[0],C=hd().memoizedState;return[x,C]},useMutableSource:Vce,useSyncExternalStore:Uce,useId:sde,unstable_isNewReconciler:!1},nYe={readContext:fd,useCallback:nde,useContext:fd,useEffect:r7,useImperativeHandle:tde,useInsertionEffect:Jce,useLayoutEffect:Zce,useMemo:rde,useReducer:n7,useRef:Xce,useState:function(){return n7(OT)},useDebugValue:i7,useDeferredValue:function(x){var C=hd();return Oo===null?C.memoizedState=x:ide(C,Oo.memoizedState,x)},useTransition:function(){var x=n7(OT)[0],C=hd().memoizedState;return[x,C]},useMutableSource:Vce,useSyncExternalStore:Uce,useId:sde,unstable_isNewReconciler:!1};function Sf(x,C){if(x&&x.defaultProps){C=U({},C),x=x.defaultProps;for(var D in x)C[D]===void 0&&(C[D]=x[D]);return C}return C}function s7(x,C,D,F){C=x.memoizedState,D=D(F,C),D=D==null?C:U({},C,D),x.memoizedState=D,x.lanes===0&&(x.updateQueue.baseState=D)}var XP={isMounted:function(x){return(x=x._reactInternals)?Kn(x)===x:!1},enqueueSetState:function(x,C,D){x=x._reactInternals;var F=Vl(),K=J0(x),Z=qm(F,K);Z.payload=C,D!=null&&(Z.callback=D),C=Y0(x,Z,K),C!==null&&(kf(C,x,K,F),VP(C,x,K))},enqueueReplaceState:function(x,C,D){x=x._reactInternals;var F=Vl(),K=J0(x),Z=qm(F,K);Z.tag=1,Z.payload=C,D!=null&&(Z.callback=D),C=Y0(x,Z,K),C!==null&&(kf(C,x,K,F),VP(C,x,K))},enqueueForceUpdate:function(x,C){x=x._reactInternals;var D=Vl(),F=J0(x),K=qm(D,F);K.tag=2,C!=null&&(K.callback=C),C=Y0(x,K,F),C!==null&&(kf(C,x,F,D),VP(C,x,F))}};function ude(x,C,D,F,K,Z,ce){return x=x.stateNode,typeof x.shouldComponentUpdate=="function"?x.shouldComponentUpdate(F,Z,ce):C.prototype&&C.prototype.isPureReactComponent?!wT(D,F)||!wT(K,Z):!0}function cde(x,C,D){var F=!1,K=q0,Z=C.contextType;return typeof Z=="object"&&Z!==null?Z=fd(Z):(K=Du(C)?N1:nl.current,F=C.contextTypes,Z=(F=F!=null)?Ux(x,K):q0),C=new C(D,Z),x.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=XP,x.stateNode=C,C._reactInternals=x,F&&(x=x.stateNode,x.__reactInternalMemoizedUnmaskedChildContext=K,x.__reactInternalMemoizedMaskedChildContext=Z),C}function dde(x,C,D,F){x=C.state,typeof C.componentWillReceiveProps=="function"&&C.componentWillReceiveProps(D,F),typeof C.UNSAFE_componentWillReceiveProps=="function"&&C.UNSAFE_componentWillReceiveProps(D,F),C.state!==x&&XP.enqueueReplaceState(C,C.state,null)}function o7(x,C,D,F){var K=x.stateNode;K.props=D,K.state=x.memoizedState,K.refs={},W9(x);var Z=C.contextType;typeof Z=="object"&&Z!==null?K.context=fd(Z):(Z=Du(C)?N1:nl.current,K.context=Ux(x,Z)),K.state=x.memoizedState,Z=C.getDerivedStateFromProps,typeof Z=="function"&&(s7(x,C,Z,D),K.state=x.memoizedState),typeof C.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(C=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),C!==K.state&&XP.enqueueReplaceState(K,K.state,null),UP(x,D,K,F),K.state=x.memoizedState),typeof K.componentDidMount=="function"&&(x.flags|=4194308)}function Qx(x,C){try{var D="",F=C;do D+=Q(F),F=F.return;while(F);var K=D}catch(Z){K=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:x,source:C,stack:K,digest:null}}function a7(x,C,D){return{value:x,source:null,stack:D??null,digest:C??null}}function l7(x,C){try{console.error(C.value)}catch(D){setTimeout(function(){throw D})}}var rYe=typeof WeakMap=="function"?WeakMap:Map;function fde(x,C,D){D=qm(-1,D),D.tag=3,D.payload={element:null};var F=C.value;return D.callback=function(){r3||(r3=!0,E7=F),l7(x,C)},D}function hde(x,C,D){D=qm(-1,D),D.tag=3;var F=x.type.getDerivedStateFromError;if(typeof F=="function"){var K=C.value;D.payload=function(){return F(K)},D.callback=function(){l7(x,C)}}var Z=x.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(D.callback=function(){l7(x,C),typeof F!="function"&&(X0===null?X0=new Set([this]):X0.add(this));var ce=C.stack;this.componentDidCatch(C.value,{componentStack:ce!==null?ce:""})}),D}function pde(x,C,D){var F=x.pingCache;if(F===null){F=x.pingCache=new rYe;var K=new Set;F.set(C,K)}else K=F.get(C),K===void 0&&(K=new Set,F.set(C,K));K.has(D)||(K.add(D),x=yYe.bind(null,x,C,D),C.then(x,x))}function mde(x){do{var C;if((C=x.tag===13)&&(C=x.memoizedState,C=C!==null?C.dehydrated!==null:!0),C)return x;x=x.return}while(x!==null);return null}function gde(x,C,D,F,K){return(x.mode&1)===0?(x===C?x.flags|=65536:(x.flags|=128,D.flags|=131072,D.flags&=-52805,D.tag===1&&(D.alternate===null?D.tag=17:(C=qm(-1,1),C.tag=2,Y0(D,C,1))),D.lanes|=1),x):(x.flags|=65536,x.lanes=K,x)}var iYe=_.ReactCurrentOwner,Pu=!1;function zl(x,C,D,F){C.child=x===null?$ce(C,null,D,F):Gx(C,x.child,D,F)}function yde(x,C,D,F,K){D=D.render;var Z=C.ref;return Kx(C,K),F=Z9(x,C,D,F,Z,K),D=e7(),x!==null&&!Pu?(C.updateQueue=x.updateQueue,C.flags&=-2053,x.lanes&=~K,Wm(x,C,K)):(us&&D&&$9(C),C.flags|=1,zl(x,C,F,K),C.child)}function vde(x,C,D,F,K){if(x===null){var Z=D.type;return typeof Z=="function"&&!R7(Z)&&Z.defaultProps===void 0&&D.compare===null&&D.defaultProps===void 0?(C.tag=15,C.type=Z,bde(x,C,Z,F,K)):(x=u3(D.type,null,F,C,C.mode,K),x.ref=C.ref,x.return=C,C.child=x)}if(Z=x.child,(x.lanes&K)===0){var ce=Z.memoizedProps;if(D=D.compare,D=D!==null?D:wT,D(ce,F)&&x.ref===C.ref)return Wm(x,C,K)}return C.flags|=1,x=ey(Z,F),x.ref=C.ref,x.return=C,C.child=x}function bde(x,C,D,F,K){if(x!==null){var Z=x.memoizedProps;if(wT(Z,F)&&x.ref===C.ref)if(Pu=!1,C.pendingProps=F=Z,(x.lanes&K)!==0)(x.flags&131072)!==0&&(Pu=!0);else return C.lanes=x.lanes,Wm(x,C,K)}return u7(x,C,D,F,K)}function wde(x,C,D){var F=C.pendingProps,K=F.children,Z=x!==null?x.memoizedState:null;if(F.mode==="hidden")if((C.mode&1)===0)C.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hi(Zx,Sc),Sc|=D;else{if((D&1073741824)===0)return x=Z!==null?Z.baseLanes|D:D,C.lanes=C.childLanes=1073741824,C.memoizedState={baseLanes:x,cachePool:null,transitions:null},C.updateQueue=null,Hi(Zx,Sc),Sc|=x,null;C.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=Z!==null?Z.baseLanes:D,Hi(Zx,Sc),Sc|=F}else Z!==null?(F=Z.baseLanes|D,C.memoizedState=null):F=D,Hi(Zx,Sc),Sc|=F;return zl(x,C,K,D),C.child}function xde(x,C){var D=C.ref;(x===null&&D!==null||x!==null&&x.ref!==D)&&(C.flags|=512,C.flags|=2097152)}function u7(x,C,D,F,K){var Z=Du(D)?N1:nl.current;return Z=Ux(C,Z),Kx(C,K),D=Z9(x,C,D,F,Z,K),F=e7(),x!==null&&!Pu?(C.updateQueue=x.updateQueue,C.flags&=-2053,x.lanes&=~K,Wm(x,C,K)):(us&&F&&$9(C),C.flags|=1,zl(x,C,D,K),C.child)}function _de(x,C,D,F,K){if(Du(D)){var Z=!0;NP(C)}else Z=!1;if(Kx(C,K),C.stateNode===null)JP(x,C),cde(C,D,F),o7(C,D,F,K),F=!0;else if(x===null){var ce=C.stateNode,Re=C.memoizedProps;ce.props=Re;var Fe=ce.context,Qe=D.contextType;typeof Qe=="object"&&Qe!==null?Qe=fd(Qe):(Qe=Du(D)?N1:nl.current,Qe=Ux(C,Qe));var vt=D.getDerivedStateFromProps,Et=typeof vt=="function"||typeof ce.getSnapshotBeforeUpdate=="function";Et||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Re!==F||Fe!==Qe)&&dde(C,ce,F,Qe),G0=!1;var yt=C.memoizedState;ce.state=yt,UP(C,F,ce,K),Fe=C.memoizedState,Re!==F||yt!==Fe||Ru.current||G0?(typeof vt=="function"&&(s7(C,D,vt,F),Fe=C.memoizedState),(Re=G0||ude(C,D,Re,F,yt,Fe,Qe))?(Et||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(C.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(C.flags|=4194308),C.memoizedProps=F,C.memoizedState=Fe),ce.props=F,ce.state=Fe,ce.context=Qe,F=Re):(typeof ce.componentDidMount=="function"&&(C.flags|=4194308),F=!1)}else{ce=C.stateNode,Lce(x,C),Re=C.memoizedProps,Qe=C.type===C.elementType?Re:Sf(C.type,Re),ce.props=Qe,Et=C.pendingProps,yt=ce.context,Fe=D.contextType,typeof Fe=="object"&&Fe!==null?Fe=fd(Fe):(Fe=Du(D)?N1:nl.current,Fe=Ux(C,Fe));var Jt=D.getDerivedStateFromProps;(vt=typeof Jt=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(Re!==Et||yt!==Fe)&&dde(C,ce,F,Fe),G0=!1,yt=C.memoizedState,ce.state=yt,UP(C,F,ce,K);var on=C.memoizedState;Re!==Et||yt!==on||Ru.current||G0?(typeof Jt=="function"&&(s7(C,D,Jt,F),on=C.memoizedState),(Qe=G0||ude(C,D,Qe,F,yt,on,Fe)||!1)?(vt||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(F,on,Fe),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(F,on,Fe)),typeof ce.componentDidUpdate=="function"&&(C.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(C.flags|=1024)):(typeof ce.componentDidUpdate!="function"||Re===x.memoizedProps&&yt===x.memoizedState||(C.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Re===x.memoizedProps&&yt===x.memoizedState||(C.flags|=1024),C.memoizedProps=F,C.memoizedState=on),ce.props=F,ce.state=on,ce.context=Fe,F=Qe):(typeof ce.componentDidUpdate!="function"||Re===x.memoizedProps&&yt===x.memoizedState||(C.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||Re===x.memoizedProps&&yt===x.memoizedState||(C.flags|=1024),F=!1)}return c7(x,C,D,F,Z,K)}function c7(x,C,D,F,K,Z){xde(x,C);var ce=(C.flags&128)!==0;if(!F&&!ce)return K&&Ace(C,D,!1),Wm(x,C,Z);F=C.stateNode,iYe.current=C;var Re=ce&&typeof D.getDerivedStateFromError!="function"?null:F.render();return C.flags|=1,x!==null&&ce?(C.child=Gx(C,x.child,null,Z),C.child=Gx(C,null,Re,Z)):zl(x,C,Re,Z),C.memoizedState=F.state,K&&Ace(C,D,!0),C.child}function Ede(x){var C=x.stateNode;C.pendingContext?Sce(x,C.pendingContext,C.pendingContext!==C.context):C.context&&Sce(x,C.context,!1),G9(x,C.containerInfo)}function Cde(x,C,D,F,K){return Wx(),B9(K),C.flags|=256,zl(x,C,D,F),C.child}var d7={dehydrated:null,treeContext:null,retryLane:0};function f7(x){return{baseLanes:x,cachePool:null,transitions:null}}function Sde(x,C,D){var F=C.pendingProps,K=xs.current,Z=!1,ce=(C.flags&128)!==0,Re;if((Re=ce)||(Re=x!==null&&x.memoizedState===null?!1:(K&2)!==0),Re?(Z=!0,C.flags&=-129):(x===null||x.memoizedState!==null)&&(K|=1),Hi(xs,K&1),x===null)return j9(C),x=C.memoizedState,x!==null&&(x=x.dehydrated,x!==null)?((C.mode&1)===0?C.lanes=1:x.data==="$!"?C.lanes=8:C.lanes=1073741824,null):(ce=F.children,x=F.fallback,Z?(F=C.mode,Z=C.child,ce={mode:"hidden",children:ce},(F&1)===0&&Z!==null?(Z.childLanes=0,Z.pendingProps=ce):Z=c3(ce,F,0,null),x=H1(x,F,D,null),Z.return=C,x.return=C,Z.sibling=x,C.child=Z,C.child.memoizedState=f7(D),C.memoizedState=d7,x):h7(C,ce));if(K=x.memoizedState,K!==null&&(Re=K.dehydrated,Re!==null))return sYe(x,C,ce,F,Re,K,D);if(Z){Z=F.fallback,ce=C.mode,K=x.child,Re=K.sibling;var Fe={mode:"hidden",children:F.children};return(ce&1)===0&&C.child!==K?(F=C.child,F.childLanes=0,F.pendingProps=Fe,C.deletions=null):(F=ey(K,Fe),F.subtreeFlags=K.subtreeFlags&14680064),Re!==null?Z=ey(Re,Z):(Z=H1(Z,ce,D,null),Z.flags|=2),Z.return=C,F.return=C,F.sibling=Z,C.child=F,F=Z,Z=C.child,ce=x.child.memoizedState,ce=ce===null?f7(D):{baseLanes:ce.baseLanes|D,cachePool:null,transitions:ce.transitions},Z.memoizedState=ce,Z.childLanes=x.childLanes&~D,C.memoizedState=d7,F}return Z=x.child,x=Z.sibling,F=ey(Z,{mode:"visible",children:F.children}),(C.mode&1)===0&&(F.lanes=D),F.return=C,F.sibling=null,x!==null&&(D=C.deletions,D===null?(C.deletions=[x],C.flags|=16):D.push(x)),C.child=F,C.memoizedState=null,F}function h7(x,C){return C=c3({mode:"visible",children:C},x.mode,0,null),C.return=x,x.child=C}function QP(x,C,D,F){return F!==null&&B9(F),Gx(C,x.child,null,D),x=h7(C,C.pendingProps.children),x.flags|=2,C.memoizedState=null,x}function sYe(x,C,D,F,K,Z,ce){if(D)return C.flags&256?(C.flags&=-257,F=a7(Error(n(422))),QP(x,C,ce,F)):C.memoizedState!==null?(C.child=x.child,C.flags|=128,null):(Z=F.fallback,K=C.mode,F=c3({mode:"visible",children:F.children},K,0,null),Z=H1(Z,K,ce,null),Z.flags|=2,F.return=C,Z.return=C,F.sibling=Z,C.child=F,(C.mode&1)!==0&&Gx(C,x.child,null,ce),C.child.memoizedState=f7(ce),C.memoizedState=d7,Z);if((C.mode&1)===0)return QP(x,C,ce,null);if(K.data==="$!"){if(F=K.nextSibling&&K.nextSibling.dataset,F)var Re=F.dgst;return F=Re,Z=Error(n(419)),F=a7(Z,F,void 0),QP(x,C,ce,F)}if(Re=(ce&x.childLanes)!==0,Pu||Re){if(F=ia,F!==null){switch(ce&-ce){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}K=(K&(F.suspendedLanes|ce))!==0?0:K,K!==0&&K!==Z.retryLane&&(Z.retryLane=K,Hm(x,K),kf(F,x,K,-1))}return I7(),F=a7(Error(n(421))),QP(x,C,ce,F)}return K.data==="$?"?(C.flags|=128,C.child=x.child,C=vYe.bind(null,x),K._reactRetry=C,null):(x=Z.treeContext,Cc=U0(K.nextSibling),Ec=C,us=!0,Cf=null,x!==null&&(cd[dd++]=Vm,cd[dd++]=Um,cd[dd++]=M1,Vm=x.id,Um=x.overflow,M1=C),C=h7(C,F.children),C.flags|=4096,C)}function Tde(x,C,D){x.lanes|=C;var F=x.alternate;F!==null&&(F.lanes|=C),H9(x.return,C,D)}function p7(x,C,D,F,K){var Z=x.memoizedState;Z===null?x.memoizedState={isBackwards:C,rendering:null,renderingStartTime:0,last:F,tail:D,tailMode:K}:(Z.isBackwards=C,Z.rendering=null,Z.renderingStartTime=0,Z.last=F,Z.tail=D,Z.tailMode=K)}function Ade(x,C,D){var F=C.pendingProps,K=F.revealOrder,Z=F.tail;if(zl(x,C,F.children,D),F=xs.current,(F&2)!==0)F=F&1|2,C.flags|=128;else{if(x!==null&&(x.flags&128)!==0)e:for(x=C.child;x!==null;){if(x.tag===13)x.memoizedState!==null&&Tde(x,D,C);else if(x.tag===19)Tde(x,D,C);else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===C)break e;for(;x.sibling===null;){if(x.return===null||x.return===C)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}F&=1}if(Hi(xs,F),(C.mode&1)===0)C.memoizedState=null;else switch(K){case"forwards":for(D=C.child,K=null;D!==null;)x=D.alternate,x!==null&&HP(x)===null&&(K=D),D=D.sibling;D=K,D===null?(K=C.child,C.child=null):(K=D.sibling,D.sibling=null),p7(C,!1,K,D,Z);break;case"backwards":for(D=null,K=C.child,C.child=null;K!==null;){if(x=K.alternate,x!==null&&HP(x)===null){C.child=K;break}x=K.sibling,K.sibling=D,D=K,K=x}p7(C,!0,D,null,Z);break;case"together":p7(C,!1,null,null,void 0);break;default:C.memoizedState=null}return C.child}function JP(x,C){(C.mode&1)===0&&x!==null&&(x.alternate=null,C.alternate=null,C.flags|=2)}function Wm(x,C,D){if(x!==null&&(C.dependencies=x.dependencies),B1|=C.lanes,(D&C.childLanes)===0)return null;if(x!==null&&C.child!==x.child)throw Error(n(153));if(C.child!==null){for(x=C.child,D=ey(x,x.pendingProps),C.child=D,D.return=C;x.sibling!==null;)x=x.sibling,D=D.sibling=ey(x,x.pendingProps),D.return=C;D.sibling=null}return C.child}function oYe(x,C,D){switch(C.tag){case 3:Ede(C),Wx();break;case 5:zce(C);break;case 1:Du(C.type)&&NP(C);break;case 4:G9(C,C.stateNode.containerInfo);break;case 10:var F=C.type._context,K=C.memoizedProps.value;Hi(BP,F._currentValue),F._currentValue=K;break;case 13:if(F=C.memoizedState,F!==null)return F.dehydrated!==null?(Hi(xs,xs.current&1),C.flags|=128,null):(D&C.child.childLanes)!==0?Sde(x,C,D):(Hi(xs,xs.current&1),x=Wm(x,C,D),x!==null?x.sibling:null);Hi(xs,xs.current&1);break;case 19:if(F=(D&C.childLanes)!==0,(x.flags&128)!==0){if(F)return Ade(x,C,D);C.flags|=128}if(K=C.memoizedState,K!==null&&(K.rendering=null,K.tail=null,K.lastEffect=null),Hi(xs,xs.current),F)break;return null;case 22:case 23:return C.lanes=0,wde(x,C,D)}return Wm(x,C,D)}var kde,m7,Ide,Rde;kde=function(x,C){for(var D=C.child;D!==null;){if(D.tag===5||D.tag===6)x.appendChild(D.stateNode);else if(D.tag!==4&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===C)break;for(;D.sibling===null;){if(D.return===null||D.return===C)return;D=D.return}D.sibling.return=D.return,D=D.sibling}},m7=function(){},Ide=function(x,C,D,F){var K=x.memoizedProps;if(K!==F){x=C.stateNode,L1(sp.current);var Z=null;switch(D){case"input":K=X(x,K),F=X(x,F),Z=[];break;case"select":K=U({},K,{value:void 0}),F=U({},F,{value:void 0}),Z=[];break;case"textarea":K=we(x,K),F=we(x,F),Z=[];break;default:typeof K.onClick!="function"&&typeof F.onClick=="function"&&(x.onclick=DP)}wn(D,F);var ce;D=null;for(Qe in K)if(!F.hasOwnProperty(Qe)&&K.hasOwnProperty(Qe)&&K[Qe]!=null)if(Qe==="style"){var Re=K[Qe];for(ce in Re)Re.hasOwnProperty(ce)&&(D||(D={}),D[ce]="")}else Qe!=="dangerouslySetInnerHTML"&&Qe!=="children"&&Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&Qe!=="autoFocus"&&(i.hasOwnProperty(Qe)?Z||(Z=[]):(Z=Z||[]).push(Qe,null));for(Qe in F){var Fe=F[Qe];if(Re=K?.[Qe],F.hasOwnProperty(Qe)&&Fe!==Re&&(Fe!=null||Re!=null))if(Qe==="style")if(Re){for(ce in Re)!Re.hasOwnProperty(ce)||Fe&&Fe.hasOwnProperty(ce)||(D||(D={}),D[ce]="");for(ce in Fe)Fe.hasOwnProperty(ce)&&Re[ce]!==Fe[ce]&&(D||(D={}),D[ce]=Fe[ce])}else D||(Z||(Z=[]),Z.push(Qe,D)),D=Fe;else Qe==="dangerouslySetInnerHTML"?(Fe=Fe?Fe.__html:void 0,Re=Re?Re.__html:void 0,Fe!=null&&Re!==Fe&&(Z=Z||[]).push(Qe,Fe)):Qe==="children"?typeof Fe!="string"&&typeof Fe!="number"||(Z=Z||[]).push(Qe,""+Fe):Qe!=="suppressContentEditableWarning"&&Qe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Qe)?(Fe!=null&&Qe==="onScroll"&&es("scroll",x),Z||Re===Fe||(Z=[])):(Z=Z||[]).push(Qe,Fe))}D&&(Z=Z||[]).push("style",D);var Qe=Z;(C.updateQueue=Qe)&&(C.flags|=4)}},Rde=function(x,C,D,F){D!==F&&(C.flags|=4)};function MT(x,C){if(!us)switch(x.tailMode){case"hidden":C=x.tail;for(var D=null;C!==null;)C.alternate!==null&&(D=C),C=C.sibling;D===null?x.tail=null:D.sibling=null;break;case"collapsed":D=x.tail;for(var F=null;D!==null;)D.alternate!==null&&(F=D),D=D.sibling;F===null?C||x.tail===null?x.tail=null:x.tail.sibling=null:F.sibling=null}}function il(x){var C=x.alternate!==null&&x.alternate.child===x.child,D=0,F=0;if(C)for(var K=x.child;K!==null;)D|=K.lanes|K.childLanes,F|=K.subtreeFlags&14680064,F|=K.flags&14680064,K.return=x,K=K.sibling;else for(K=x.child;K!==null;)D|=K.lanes|K.childLanes,F|=K.subtreeFlags,F|=K.flags,K.return=x,K=K.sibling;return x.subtreeFlags|=F,x.childLanes=D,C}function aYe(x,C,D){var F=C.pendingProps;switch(F9(C),C.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return il(C),null;case 1:return Du(C.type)&&OP(),il(C),null;case 3:return F=C.stateNode,Xx(),ts(Ru),ts(nl),X9(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(x===null||x.child===null)&&(LP(C)?C.flags|=4:x===null||x.memoizedState.isDehydrated&&(C.flags&256)===0||(C.flags|=1024,Cf!==null&&(T7(Cf),Cf=null))),m7(x,C),il(C),null;case 5:Y9(C);var K=L1(RT.current);if(D=C.type,x!==null&&C.stateNode!=null)Ide(x,C,D,F,K),x.ref!==C.ref&&(C.flags|=512,C.flags|=2097152);else{if(!F){if(C.stateNode===null)throw Error(n(166));return il(C),null}if(x=L1(sp.current),LP(C)){F=C.stateNode,D=C.type;var Z=C.memoizedProps;switch(F[ip]=C,F[ST]=Z,x=(C.mode&1)!==0,D){case"dialog":es("cancel",F),es("close",F);break;case"iframe":case"object":case"embed":es("load",F);break;case"video":case"audio":for(K=0;K<_T.length;K++)es(_T[K],F);break;case"source":es("error",F);break;case"img":case"image":case"link":es("error",F),es("load",F);break;case"details":es("toggle",F);break;case"input":fe(F,Z),es("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!Z.multiple},es("invalid",F);break;case"textarea":Me(F,Z),es("invalid",F)}wn(D,Z),K=null;for(var ce in Z)if(Z.hasOwnProperty(ce)){var Re=Z[ce];ce==="children"?typeof Re=="string"?F.textContent!==Re&&(Z.suppressHydrationWarning!==!0&&RP(F.textContent,Re,x),K=["children",Re]):typeof Re=="number"&&F.textContent!==""+Re&&(Z.suppressHydrationWarning!==!0&&RP(F.textContent,Re,x),K=["children",""+Re]):i.hasOwnProperty(ce)&&Re!=null&&ce==="onScroll"&&es("scroll",F)}switch(D){case"input":ie(F),ee(F,Z,!0);break;case"textarea":ie(F),Oe(F);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(F.onclick=DP)}F=K,C.updateQueue=F,F!==null&&(C.flags|=4)}else{ce=K.nodeType===9?K:K.ownerDocument,x==="http://www.w3.org/1999/xhtml"&&(x=xe(D)),x==="http://www.w3.org/1999/xhtml"?D==="script"?(x=ce.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild)):typeof F.is=="string"?x=ce.createElement(D,{is:F.is}):(x=ce.createElement(D),D==="select"&&(ce=x,F.multiple?ce.multiple=!0:F.size&&(ce.size=F.size))):x=ce.createElementNS(x,D),x[ip]=C,x[ST]=F,kde(x,C,!1,!1),C.stateNode=x;e:{switch(ce=nr(D,F),D){case"dialog":es("cancel",x),es("close",x),K=F;break;case"iframe":case"object":case"embed":es("load",x),K=F;break;case"video":case"audio":for(K=0;K<_T.length;K++)es(_T[K],x);K=F;break;case"source":es("error",x),K=F;break;case"img":case"image":case"link":es("error",x),es("load",x),K=F;break;case"details":es("toggle",x),K=F;break;case"input":fe(x,F),K=X(x,F),es("invalid",x);break;case"option":K=F;break;case"select":x._wrapperState={wasMultiple:!!F.multiple},K=U({},F,{value:void 0}),es("invalid",x);break;case"textarea":Me(x,F),K=we(x,F),es("invalid",x);break;default:K=F}wn(D,K),Re=K;for(Z in Re)if(Re.hasOwnProperty(Z)){var Fe=Re[Z];Z==="style"?zn(x,Fe):Z==="dangerouslySetInnerHTML"?(Fe=Fe?Fe.__html:void 0,Fe!=null&&nt(x,Fe)):Z==="children"?typeof Fe=="string"?(D!=="textarea"||Fe!=="")&&it(x,Fe):typeof Fe=="number"&&it(x,""+Fe):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(i.hasOwnProperty(Z)?Fe!=null&&Z==="onScroll"&&es("scroll",x):Fe!=null&&b(x,Z,Fe,ce))}switch(D){case"input":ie(x),ee(x,F,!1);break;case"textarea":ie(x),Oe(x);break;case"option":F.value!=null&&x.setAttribute("value",""+se(F.value));break;case"select":x.multiple=!!F.multiple,Z=F.value,Z!=null?Te(x,!!F.multiple,Z,!1):F.defaultValue!=null&&Te(x,!!F.multiple,F.defaultValue,!0);break;default:typeof K.onClick=="function"&&(x.onclick=DP)}switch(D){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(C.flags|=4)}C.ref!==null&&(C.flags|=512,C.flags|=2097152)}return il(C),null;case 6:if(x&&C.stateNode!=null)Rde(x,C,x.memoizedProps,F);else{if(typeof F!="string"&&C.stateNode===null)throw Error(n(166));if(D=L1(RT.current),L1(sp.current),LP(C)){if(F=C.stateNode,D=C.memoizedProps,F[ip]=C,(Z=F.nodeValue!==D)&&(x=Ec,x!==null))switch(x.tag){case 3:RP(F.nodeValue,D,(x.mode&1)!==0);break;case 5:x.memoizedProps.suppressHydrationWarning!==!0&&RP(F.nodeValue,D,(x.mode&1)!==0)}Z&&(C.flags|=4)}else F=(D.nodeType===9?D:D.ownerDocument).createTextNode(F),F[ip]=C,C.stateNode=F}return il(C),null;case 13:if(ts(xs),F=C.memoizedState,x===null||x.memoizedState!==null&&x.memoizedState.dehydrated!==null){if(us&&Cc!==null&&(C.mode&1)!==0&&(C.flags&128)===0)Oce(),Wx(),C.flags|=98560,Z=!1;else if(Z=LP(C),F!==null&&F.dehydrated!==null){if(x===null){if(!Z)throw Error(n(318));if(Z=C.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(n(317));Z[ip]=C}else Wx(),(C.flags&128)===0&&(C.memoizedState=null),C.flags|=4;il(C),Z=!1}else Cf!==null&&(T7(Cf),Cf=null),Z=!0;if(!Z)return C.flags&65536?C:null}return(C.flags&128)!==0?(C.lanes=D,C):(F=F!==null,F!==(x!==null&&x.memoizedState!==null)&&F&&(C.child.flags|=8192,(C.mode&1)!==0&&(x===null||(xs.current&1)!==0?No===0&&(No=3):I7())),C.updateQueue!==null&&(C.flags|=4),il(C),null);case 4:return Xx(),m7(x,C),x===null&&ET(C.stateNode.containerInfo),il(C),null;case 10:return U9(C.type._context),il(C),null;case 17:return Du(C.type)&&OP(),il(C),null;case 19:if(ts(xs),Z=C.memoizedState,Z===null)return il(C),null;if(F=(C.flags&128)!==0,ce=Z.rendering,ce===null)if(F)MT(Z,!1);else{if(No!==0||x!==null&&(x.flags&128)!==0)for(x=C.child;x!==null;){if(ce=HP(x),ce!==null){for(C.flags|=128,MT(Z,!1),F=ce.updateQueue,F!==null&&(C.updateQueue=F,C.flags|=4),C.subtreeFlags=0,F=D,D=C.child;D!==null;)Z=D,x=F,Z.flags&=14680066,ce=Z.alternate,ce===null?(Z.childLanes=0,Z.lanes=x,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=ce.childLanes,Z.lanes=ce.lanes,Z.child=ce.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=ce.memoizedProps,Z.memoizedState=ce.memoizedState,Z.updateQueue=ce.updateQueue,Z.type=ce.type,x=ce.dependencies,Z.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),D=D.sibling;return Hi(xs,xs.current&1|2),C.child}x=x.sibling}Z.tail!==null&&Sr()>e_&&(C.flags|=128,F=!0,MT(Z,!1),C.lanes=4194304)}else{if(!F)if(x=HP(ce),x!==null){if(C.flags|=128,F=!0,D=x.updateQueue,D!==null&&(C.updateQueue=D,C.flags|=4),MT(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!ce.alternate&&!us)return il(C),null}else 2*Sr()-Z.renderingStartTime>e_&&D!==1073741824&&(C.flags|=128,F=!0,MT(Z,!1),C.lanes=4194304);Z.isBackwards?(ce.sibling=C.child,C.child=ce):(D=Z.last,D!==null?D.sibling=ce:C.child=ce,Z.last=ce)}return Z.tail!==null?(C=Z.tail,Z.rendering=C,Z.tail=C.sibling,Z.renderingStartTime=Sr(),C.sibling=null,D=xs.current,Hi(xs,F?D&1|2:D&1),C):(il(C),null);case 22:case 23:return k7(),F=C.memoizedState!==null,x!==null&&x.memoizedState!==null!==F&&(C.flags|=8192),F&&(C.mode&1)!==0?(Sc&1073741824)!==0&&(il(C),C.subtreeFlags&6&&(C.flags|=8192)):il(C),null;case 24:return null;case 25:return null}throw Error(n(156,C.tag))}function lYe(x,C){switch(F9(C),C.tag){case 1:return Du(C.type)&&OP(),x=C.flags,x&65536?(C.flags=x&-65537|128,C):null;case 3:return Xx(),ts(Ru),ts(nl),X9(),x=C.flags,(x&65536)!==0&&(x&128)===0?(C.flags=x&-65537|128,C):null;case 5:return Y9(C),null;case 13:if(ts(xs),x=C.memoizedState,x!==null&&x.dehydrated!==null){if(C.alternate===null)throw Error(n(340));Wx()}return x=C.flags,x&65536?(C.flags=x&-65537|128,C):null;case 19:return ts(xs),null;case 4:return Xx(),null;case 10:return U9(C.type._context),null;case 22:case 23:return k7(),null;case 24:return null;default:return null}}var ZP=!1,sl=!1,uYe=typeof WeakSet=="function"?WeakSet:Set,tn=null;function Jx(x,C){var D=x.ref;if(D!==null)if(typeof D=="function")try{D(null)}catch(F){Ds(x,C,F)}else D.current=null}function g7(x,C,D){try{D()}catch(F){Ds(x,C,F)}}var Dde=!1;function cYe(x,C){if(k9=oe,x=uce(),w9(x)){if("selectionStart"in x)var D={start:x.selectionStart,end:x.selectionEnd};else e:{D=(D=x.ownerDocument)&&D.defaultView||window;var F=D.getSelection&&D.getSelection();if(F&&F.rangeCount!==0){D=F.anchorNode;var K=F.anchorOffset,Z=F.focusNode;F=F.focusOffset;try{D.nodeType,Z.nodeType}catch{D=null;break e}var ce=0,Re=-1,Fe=-1,Qe=0,vt=0,Et=x,yt=null;t:for(;;){for(var Jt;Et!==D||K!==0&&Et.nodeType!==3||(Re=ce+K),Et!==Z||F!==0&&Et.nodeType!==3||(Fe=ce+F),Et.nodeType===3&&(ce+=Et.nodeValue.length),(Jt=Et.firstChild)!==null;)yt=Et,Et=Jt;for(;;){if(Et===x)break t;if(yt===D&&++Qe===K&&(Re=ce),yt===Z&&++vt===F&&(Fe=ce),(Jt=Et.nextSibling)!==null)break;Et=yt,yt=Et.parentNode}Et=Jt}D=Re===-1||Fe===-1?null:{start:Re,end:Fe}}else D=null}D=D||{start:0,end:0}}else D=null;for(I9={focusedElem:x,selectionRange:D},oe=!1,tn=C;tn!==null;)if(C=tn,x=C.child,(C.subtreeFlags&1028)!==0&&x!==null)x.return=C,tn=x;else for(;tn!==null;){C=tn;try{var on=C.alternate;if((C.flags&1024)!==0)switch(C.tag){case 0:case 11:case 15:break;case 1:if(on!==null){var dn=on.memoizedProps,Js=on.memoizedState,Ge=C.stateNode,ze=Ge.getSnapshotBeforeUpdate(C.elementType===C.type?dn:Sf(C.type,dn),Js);Ge.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:var Xe=C.stateNode.containerInfo;Xe.nodeType===1?Xe.textContent="":Xe.nodeType===9&&Xe.documentElement&&Xe.removeChild(Xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Nt){Ds(C,C.return,Nt)}if(x=C.sibling,x!==null){x.return=C.return,tn=x;break}tn=C.return}return on=Dde,Dde=!1,on}function $T(x,C,D){var F=C.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var K=F=F.next;do{if((K.tag&x)===x){var Z=K.destroy;K.destroy=void 0,Z!==void 0&&g7(C,D,Z)}K=K.next}while(K!==F)}}function e3(x,C){if(C=C.updateQueue,C=C!==null?C.lastEffect:null,C!==null){var D=C=C.next;do{if((D.tag&x)===x){var F=D.create;D.destroy=F()}D=D.next}while(D!==C)}}function y7(x){var C=x.ref;if(C!==null){var D=x.stateNode;switch(x.tag){case 5:x=D;break;default:x=D}typeof C=="function"?C(x):C.current=x}}function Pde(x){var C=x.alternate;C!==null&&(x.alternate=null,Pde(C)),x.child=null,x.deletions=null,x.sibling=null,x.tag===5&&(C=x.stateNode,C!==null&&(delete C[ip],delete C[ST],delete C[O9],delete C[WGe],delete C[GGe])),x.stateNode=null,x.return=null,x.dependencies=null,x.memoizedProps=null,x.memoizedState=null,x.pendingProps=null,x.stateNode=null,x.updateQueue=null}function Ode(x){return x.tag===5||x.tag===3||x.tag===4}function Nde(x){e:for(;;){for(;x.sibling===null;){if(x.return===null||Ode(x.return))return null;x=x.return}for(x.sibling.return=x.return,x=x.sibling;x.tag!==5&&x.tag!==6&&x.tag!==18;){if(x.flags&2||x.child===null||x.tag===4)continue e;x.child.return=x,x=x.child}if(!(x.flags&2))return x.stateNode}}function v7(x,C,D){var F=x.tag;if(F===5||F===6)x=x.stateNode,C?D.nodeType===8?D.parentNode.insertBefore(x,C):D.insertBefore(x,C):(D.nodeType===8?(C=D.parentNode,C.insertBefore(x,D)):(C=D,C.appendChild(x)),D=D._reactRootContainer,D!=null||C.onclick!==null||(C.onclick=DP));else if(F!==4&&(x=x.child,x!==null))for(v7(x,C,D),x=x.sibling;x!==null;)v7(x,C,D),x=x.sibling}function b7(x,C,D){var F=x.tag;if(F===5||F===6)x=x.stateNode,C?D.insertBefore(x,C):D.appendChild(x);else if(F!==4&&(x=x.child,x!==null))for(b7(x,C,D),x=x.sibling;x!==null;)b7(x,C,D),x=x.sibling}var Aa=null,Tf=!1;function K0(x,C,D){for(D=D.child;D!==null;)Mde(x,C,D),D=D.sibling}function Mde(x,C,D){if(Gs&&typeof Gs.onCommitFiberUnmount=="function")try{Gs.onCommitFiberUnmount(Au,D)}catch{}switch(D.tag){case 5:sl||Jx(D,C);case 6:var F=Aa,K=Tf;Aa=null,K0(x,C,D),Aa=F,Tf=K,Aa!==null&&(Tf?(x=Aa,D=D.stateNode,x.nodeType===8?x.parentNode.removeChild(D):x.removeChild(D)):Aa.removeChild(D.stateNode));break;case 18:Aa!==null&&(Tf?(x=Aa,D=D.stateNode,x.nodeType===8?P9(x.parentNode,D):x.nodeType===1&&P9(x,D),tl(x)):P9(Aa,D.stateNode));break;case 4:F=Aa,K=Tf,Aa=D.stateNode.containerInfo,Tf=!0,K0(x,C,D),Aa=F,Tf=K;break;case 0:case 11:case 14:case 15:if(!sl&&(F=D.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){K=F=F.next;do{var Z=K,ce=Z.destroy;Z=Z.tag,ce!==void 0&&((Z&2)!==0||(Z&4)!==0)&&g7(D,C,ce),K=K.next}while(K!==F)}K0(x,C,D);break;case 1:if(!sl&&(Jx(D,C),F=D.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=D.memoizedProps,F.state=D.memoizedState,F.componentWillUnmount()}catch(Re){Ds(D,C,Re)}K0(x,C,D);break;case 21:K0(x,C,D);break;case 22:D.mode&1?(sl=(F=sl)||D.memoizedState!==null,K0(x,C,D),sl=F):K0(x,C,D);break;default:K0(x,C,D)}}function $de(x){var C=x.updateQueue;if(C!==null){x.updateQueue=null;var D=x.stateNode;D===null&&(D=x.stateNode=new uYe),C.forEach(function(F){var K=bYe.bind(null,x,F);D.has(F)||(D.add(F),F.then(K,K))})}}function Af(x,C){var D=C.deletions;if(D!==null)for(var F=0;F<D.length;F++){var K=D[F];try{var Z=x,ce=C,Re=ce;e:for(;Re!==null;){switch(Re.tag){case 5:Aa=Re.stateNode,Tf=!1;break e;case 3:Aa=Re.stateNode.containerInfo,Tf=!0;break e;case 4:Aa=Re.stateNode.containerInfo,Tf=!0;break e}Re=Re.return}if(Aa===null)throw Error(n(160));Mde(Z,ce,K),Aa=null,Tf=!1;var Fe=K.alternate;Fe!==null&&(Fe.return=null),K.return=null}catch(Qe){Ds(K,C,Qe)}}if(C.subtreeFlags&12854)for(C=C.child;C!==null;)Fde(C,x),C=C.sibling}function Fde(x,C){var D=x.alternate,F=x.flags;switch(x.tag){case 0:case 11:case 14:case 15:if(Af(C,x),ap(x),F&4){try{$T(3,x,x.return),e3(3,x)}catch(dn){Ds(x,x.return,dn)}try{$T(5,x,x.return)}catch(dn){Ds(x,x.return,dn)}}break;case 1:Af(C,x),ap(x),F&512&&D!==null&&Jx(D,D.return);break;case 5:if(Af(C,x),ap(x),F&512&&D!==null&&Jx(D,D.return),x.flags&32){var K=x.stateNode;try{it(K,"")}catch(dn){Ds(x,x.return,dn)}}if(F&4&&(K=x.stateNode,K!=null)){var Z=x.memoizedProps,ce=D!==null?D.memoizedProps:Z,Re=x.type,Fe=x.updateQueue;if(x.updateQueue=null,Fe!==null)try{Re==="input"&&Z.type==="radio"&&Z.name!=null&&de(K,Z),nr(Re,ce);var Qe=nr(Re,Z);for(ce=0;ce<Fe.length;ce+=2){var vt=Fe[ce],Et=Fe[ce+1];vt==="style"?zn(K,Et):vt==="dangerouslySetInnerHTML"?nt(K,Et):vt==="children"?it(K,Et):b(K,vt,Et,Qe)}switch(Re){case"input":te(K,Z);break;case"textarea":ke(K,Z);break;case"select":var yt=K._wrapperState.wasMultiple;K._wrapperState.wasMultiple=!!Z.multiple;var Jt=Z.value;Jt!=null?Te(K,!!Z.multiple,Jt,!1):yt!==!!Z.multiple&&(Z.defaultValue!=null?Te(K,!!Z.multiple,Z.defaultValue,!0):Te(K,!!Z.multiple,Z.multiple?[]:"",!1))}K[ST]=Z}catch(dn){Ds(x,x.return,dn)}}break;case 6:if(Af(C,x),ap(x),F&4){if(x.stateNode===null)throw Error(n(162));K=x.stateNode,Z=x.memoizedProps;try{K.nodeValue=Z}catch(dn){Ds(x,x.return,dn)}}break;case 3:if(Af(C,x),ap(x),F&4&&D!==null&&D.memoizedState.isDehydrated)try{tl(C.containerInfo)}catch(dn){Ds(x,x.return,dn)}break;case 4:Af(C,x),ap(x);break;case 13:Af(C,x),ap(x),K=x.child,K.flags&8192&&(Z=K.memoizedState!==null,K.stateNode.isHidden=Z,!Z||K.alternate!==null&&K.alternate.memoizedState!==null||(_7=Sr())),F&4&&$de(x);break;case 22:if(vt=D!==null&&D.memoizedState!==null,x.mode&1?(sl=(Qe=sl)||vt,Af(C,x),sl=Qe):Af(C,x),ap(x),F&8192){if(Qe=x.memoizedState!==null,(x.stateNode.isHidden=Qe)&&!vt&&(x.mode&1)!==0)for(tn=x,vt=x.child;vt!==null;){for(Et=tn=vt;tn!==null;){switch(yt=tn,Jt=yt.child,yt.tag){case 0:case 11:case 14:case 15:$T(4,yt,yt.return);break;case 1:Jx(yt,yt.return);var on=yt.stateNode;if(typeof on.componentWillUnmount=="function"){F=yt,D=yt.return;try{C=F,on.props=C.memoizedProps,on.state=C.memoizedState,on.componentWillUnmount()}catch(dn){Ds(F,D,dn)}}break;case 5:Jx(yt,yt.return);break;case 22:if(yt.memoizedState!==null){Bde(Et);continue}}Jt!==null?(Jt.return=yt,tn=Jt):Bde(Et)}vt=vt.sibling}e:for(vt=null,Et=x;;){if(Et.tag===5){if(vt===null){vt=Et;try{K=Et.stateNode,Qe?(Z=K.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Re=Et.stateNode,Fe=Et.memoizedProps.style,ce=Fe!=null&&Fe.hasOwnProperty("display")?Fe.display:null,Re.style.display=en("display",ce))}catch(dn){Ds(x,x.return,dn)}}}else if(Et.tag===6){if(vt===null)try{Et.stateNode.nodeValue=Qe?"":Et.memoizedProps}catch(dn){Ds(x,x.return,dn)}}else if((Et.tag!==22&&Et.tag!==23||Et.memoizedState===null||Et===x)&&Et.child!==null){Et.child.return=Et,Et=Et.child;continue}if(Et===x)break e;for(;Et.sibling===null;){if(Et.return===null||Et.return===x)break e;vt===Et&&(vt=null),Et=Et.return}vt===Et&&(vt=null),Et.sibling.return=Et.return,Et=Et.sibling}}break;case 19:Af(C,x),ap(x),F&4&&$de(x);break;case 21:break;default:Af(C,x),ap(x)}}function ap(x){var C=x.flags;if(C&2){try{e:{for(var D=x.return;D!==null;){if(Ode(D)){var F=D;break e}D=D.return}throw Error(n(160))}switch(F.tag){case 5:var K=F.stateNode;F.flags&32&&(it(K,""),F.flags&=-33);var Z=Nde(x);b7(x,Z,K);break;case 3:case 4:var ce=F.stateNode.containerInfo,Re=Nde(x);v7(x,Re,ce);break;default:throw Error(n(161))}}catch(Fe){Ds(x,x.return,Fe)}x.flags&=-3}C&4096&&(x.flags&=-4097)}function dYe(x,C,D){tn=x,Lde(x)}function Lde(x,C,D){for(var F=(x.mode&1)!==0;tn!==null;){var K=tn,Z=K.child;if(K.tag===22&&F){var ce=K.memoizedState!==null||ZP;if(!ce){var Re=K.alternate,Fe=Re!==null&&Re.memoizedState!==null||sl;Re=ZP;var Qe=sl;if(ZP=ce,(sl=Fe)&&!Qe)for(tn=K;tn!==null;)ce=tn,Fe=ce.child,ce.tag===22&&ce.memoizedState!==null?zde(K):Fe!==null?(Fe.return=ce,tn=Fe):zde(K);for(;Z!==null;)tn=Z,Lde(Z),Z=Z.sibling;tn=K,ZP=Re,sl=Qe}jde(x)}else(K.subtreeFlags&8772)!==0&&Z!==null?(Z.return=K,tn=Z):jde(x)}}function jde(x){for(;tn!==null;){var C=tn;if((C.flags&8772)!==0){var D=C.alternate;try{if((C.flags&8772)!==0)switch(C.tag){case 0:case 11:case 15:sl||e3(5,C);break;case 1:var F=C.stateNode;if(C.flags&4&&!sl)if(D===null)F.componentDidMount();else{var K=C.elementType===C.type?D.memoizedProps:Sf(C.type,D.memoizedProps);F.componentDidUpdate(K,D.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var Z=C.updateQueue;Z!==null&&Bce(C,Z,F);break;case 3:var ce=C.updateQueue;if(ce!==null){if(D=null,C.child!==null)switch(C.child.tag){case 5:D=C.child.stateNode;break;case 1:D=C.child.stateNode}Bce(C,ce,D)}break;case 5:var Re=C.stateNode;if(D===null&&C.flags&4){D=Re;var Fe=C.memoizedProps;switch(C.type){case"button":case"input":case"select":case"textarea":Fe.autoFocus&&D.focus();break;case"img":Fe.src&&(D.src=Fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(C.memoizedState===null){var Qe=C.alternate;if(Qe!==null){var vt=Qe.memoizedState;if(vt!==null){var Et=vt.dehydrated;Et!==null&&tl(Et)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}sl||C.flags&512&&y7(C)}catch(yt){Ds(C,C.return,yt)}}if(C===x){tn=null;break}if(D=C.sibling,D!==null){D.return=C.return,tn=D;break}tn=C.return}}function Bde(x){for(;tn!==null;){var C=tn;if(C===x){tn=null;break}var D=C.sibling;if(D!==null){D.return=C.return,tn=D;break}tn=C.return}}function zde(x){for(;tn!==null;){var C=tn;try{switch(C.tag){case 0:case 11:case 15:var D=C.return;try{e3(4,C)}catch(Fe){Ds(C,D,Fe)}break;case 1:var F=C.stateNode;if(typeof F.componentDidMount=="function"){var K=C.return;try{F.componentDidMount()}catch(Fe){Ds(C,K,Fe)}}var Z=C.return;try{y7(C)}catch(Fe){Ds(C,Z,Fe)}break;case 5:var ce=C.return;try{y7(C)}catch(Fe){Ds(C,ce,Fe)}}}catch(Fe){Ds(C,C.return,Fe)}if(C===x){tn=null;break}var Re=C.sibling;if(Re!==null){Re.return=C.return,tn=Re;break}tn=C.return}}var fYe=Math.ceil,t3=_.ReactCurrentDispatcher,w7=_.ReactCurrentOwner,pd=_.ReactCurrentBatchConfig,Zr=0,ia=null,yo=null,ka=0,Sc=0,Zx=H0(0),No=0,FT=null,B1=0,n3=0,x7=0,LT=null,Ou=null,_7=0,e_=1/0,Gm=null,r3=!1,E7=null,X0=null,i3=!1,Q0=null,s3=0,jT=0,C7=null,o3=-1,a3=0;function Vl(){return(Zr&6)!==0?Sr():o3!==-1?o3:o3=Sr()}function J0(x){return(x.mode&1)===0?1:(Zr&2)!==0&&ka!==0?ka&-ka:KGe.transition!==null?(a3===0&&(a3=Tt()),a3):(x=sn,x!==0||(x=window.event,x=x===void 0?16:Hn(x.type)),x)}function kf(x,C,D,F){if(50<jT)throw jT=0,C7=null,Error(n(185));Vn(x,D,F),((Zr&2)===0||x!==ia)&&(x===ia&&((Zr&2)===0&&(n3|=D),No===4&&Z0(x,ka)),Nu(x,F),D===1&&Zr===0&&(C.mode&1)===0&&(e_=Sr()+500,MP&&W0()))}function Nu(x,C){var D=x.callbackNode;gt(x,C);var F=rt(x,x===ia?ka:0);if(F===0)D!==null&&Ro(D),x.callbackNode=null,x.callbackPriority=0;else if(C=F&-F,x.callbackPriority!==C){if(D!=null&&Ro(D),C===1)x.tag===0?YGe(Ude.bind(null,x)):kce(Ude.bind(null,x)),HGe(function(){(Zr&6)===0&&W0()}),D=null;else{switch(vr(F)){case 1:D=qs;break;case 4:D=ea;break;case 16:D=Ws;break;case 536870912:D=Sa;break;default:D=Ws}D=Qde(D,Vde.bind(null,x))}x.callbackPriority=C,x.callbackNode=D}}function Vde(x,C){if(o3=-1,a3=0,(Zr&6)!==0)throw Error(n(327));var D=x.callbackNode;if(t_()&&x.callbackNode!==D)return null;var F=rt(x,x===ia?ka:0);if(F===0)return null;if((F&30)!==0||(F&x.expiredLanes)!==0||C)C=l3(x,F);else{C=F;var K=Zr;Zr|=2;var Z=qde();(ia!==x||ka!==C)&&(Gm=null,e_=Sr()+500,V1(x,C));do try{mYe();break}catch(Re){Hde(x,Re)}while(!0);V9(),t3.current=Z,Zr=K,yo!==null?C=0:(ia=null,ka=0,C=No)}if(C!==0){if(C===2&&(K=ht(x),K!==0&&(F=K,C=S7(x,K))),C===1)throw D=FT,V1(x,0),Z0(x,F),Nu(x,Sr()),D;if(C===6)Z0(x,F);else{if(K=x.current.alternate,(F&30)===0&&!hYe(K)&&(C=l3(x,F),C===2&&(Z=ht(x),Z!==0&&(F=Z,C=S7(x,Z))),C===1))throw D=FT,V1(x,0),Z0(x,F),Nu(x,Sr()),D;switch(x.finishedWork=K,x.finishedLanes=F,C){case 0:case 1:throw Error(n(345));case 2:U1(x,Ou,Gm);break;case 3:if(Z0(x,F),(F&130023424)===F&&(C=_7+500-Sr(),10<C)){if(rt(x,0)!==0)break;if(K=x.suspendedLanes,(K&F)!==F){Vl(),x.pingedLanes|=x.suspendedLanes&K;break}x.timeoutHandle=D9(U1.bind(null,x,Ou,Gm),C);break}U1(x,Ou,Gm);break;case 4:if(Z0(x,F),(F&4194240)===F)break;for(C=x.eventTimes,K=-1;0<F;){var ce=31-Ys(F);Z=1<<ce,ce=C[ce],ce>K&&(K=ce),F&=~Z}if(F=K,F=Sr()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*fYe(F/1960))-F,10<F){x.timeoutHandle=D9(U1.bind(null,x,Ou,Gm),F);break}U1(x,Ou,Gm);break;case 5:U1(x,Ou,Gm);break;default:throw Error(n(329))}}}return Nu(x,Sr()),x.callbackNode===D?Vde.bind(null,x):null}function S7(x,C){var D=LT;return x.current.memoizedState.isDehydrated&&(V1(x,C).flags|=256),x=l3(x,C),x!==2&&(C=Ou,Ou=D,C!==null&&T7(C)),x}function T7(x){Ou===null?Ou=x:Ou.push.apply(Ou,x)}function hYe(x){for(var C=x;;){if(C.flags&16384){var D=C.updateQueue;if(D!==null&&(D=D.stores,D!==null))for(var F=0;F<D.length;F++){var K=D[F],Z=K.getSnapshot;K=K.value;try{if(!Ef(Z(),K))return!1}catch{return!1}}}if(D=C.child,C.subtreeFlags&16384&&D!==null)D.return=C,C=D;else{if(C===x)break;for(;C.sibling===null;){if(C.return===null||C.return===x)return!0;C=C.return}C.sibling.return=C.return,C=C.sibling}}return!0}function Z0(x,C){for(C&=~x7,C&=~n3,x.suspendedLanes|=C,x.pingedLanes&=~C,x=x.expirationTimes;0<C;){var D=31-Ys(C),F=1<<D;x[D]=-1,C&=~F}}function Ude(x){if((Zr&6)!==0)throw Error(n(327));t_();var C=rt(x,0);if((C&1)===0)return Nu(x,Sr()),null;var D=l3(x,C);if(x.tag!==0&&D===2){var F=ht(x);F!==0&&(C=F,D=S7(x,F))}if(D===1)throw D=FT,V1(x,0),Z0(x,C),Nu(x,Sr()),D;if(D===6)throw Error(n(345));return x.finishedWork=x.current.alternate,x.finishedLanes=C,U1(x,Ou,Gm),Nu(x,Sr()),null}function A7(x,C){var D=Zr;Zr|=1;try{return x(C)}finally{Zr=D,Zr===0&&(e_=Sr()+500,MP&&W0())}}function z1(x){Q0!==null&&Q0.tag===0&&(Zr&6)===0&&t_();var C=Zr;Zr|=1;var D=pd.transition,F=sn;try{if(pd.transition=null,sn=1,x)return x()}finally{sn=F,pd.transition=D,Zr=C,(Zr&6)===0&&W0()}}function k7(){Sc=Zx.current,ts(Zx)}function V1(x,C){x.finishedWork=null,x.finishedLanes=0;var D=x.timeoutHandle;if(D!==-1&&(x.timeoutHandle=-1,UGe(D)),yo!==null)for(D=yo.return;D!==null;){var F=D;switch(F9(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&OP();break;case 3:Xx(),ts(Ru),ts(nl),X9();break;case 5:Y9(F);break;case 4:Xx();break;case 13:ts(xs);break;case 19:ts(xs);break;case 10:U9(F.type._context);break;case 22:case 23:k7()}D=D.return}if(ia=x,yo=x=ey(x.current,null),ka=Sc=C,No=0,FT=null,x7=n3=B1=0,Ou=LT=null,F1!==null){for(C=0;C<F1.length;C++)if(D=F1[C],F=D.interleaved,F!==null){D.interleaved=null;var K=F.next,Z=D.pending;if(Z!==null){var ce=Z.next;Z.next=K,F.next=ce}D.pending=F}F1=null}return x}function Hde(x,C){do{var D=yo;try{if(V9(),qP.current=KP,WP){for(var F=_s.memoizedState;F!==null;){var K=F.queue;K!==null&&(K.pending=null),F=F.next}WP=!1}if(j1=0,ra=Oo=_s=null,DT=!1,PT=0,w7.current=null,D===null||D.return===null){No=1,FT=C,yo=null;break}e:{var Z=x,ce=D.return,Re=D,Fe=C;if(C=ka,Re.flags|=32768,Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var Qe=Fe,vt=Re,Et=vt.tag;if((vt.mode&1)===0&&(Et===0||Et===11||Et===15)){var yt=vt.alternate;yt?(vt.updateQueue=yt.updateQueue,vt.memoizedState=yt.memoizedState,vt.lanes=yt.lanes):(vt.updateQueue=null,vt.memoizedState=null)}var Jt=mde(ce);if(Jt!==null){Jt.flags&=-257,gde(Jt,ce,Re,Z,C),Jt.mode&1&&pde(Z,Qe,C),C=Jt,Fe=Qe;var on=C.updateQueue;if(on===null){var dn=new Set;dn.add(Fe),C.updateQueue=dn}else on.add(Fe);break e}else{if((C&1)===0){pde(Z,Qe,C),I7();break e}Fe=Error(n(426))}}else if(us&&Re.mode&1){var Js=mde(ce);if(Js!==null){(Js.flags&65536)===0&&(Js.flags|=256),gde(Js,ce,Re,Z,C),B9(Qx(Fe,Re));break e}}Z=Fe=Qx(Fe,Re),No!==4&&(No=2),LT===null?LT=[Z]:LT.push(Z),Z=ce;do{switch(Z.tag){case 3:Z.flags|=65536,C&=-C,Z.lanes|=C;var Ge=fde(Z,Fe,C);jce(Z,Ge);break e;case 1:Re=Fe;var ze=Z.type,Xe=Z.stateNode;if((Z.flags&128)===0&&(typeof ze.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(X0===null||!X0.has(Xe)))){Z.flags|=65536,C&=-C,Z.lanes|=C;var Nt=hde(Z,Re,C);jce(Z,Nt);break e}}Z=Z.return}while(Z!==null)}Gde(D)}catch(yn){C=yn,yo===D&&D!==null&&(yo=D=D.return);continue}break}while(!0)}function qde(){var x=t3.current;return t3.current=KP,x===null?KP:x}function I7(){(No===0||No===3||No===2)&&(No=4),ia===null||(B1&268435455)===0&&(n3&268435455)===0||Z0(ia,ka)}function l3(x,C){var D=Zr;Zr|=2;var F=qde();(ia!==x||ka!==C)&&(Gm=null,V1(x,C));do try{pYe();break}catch(K){Hde(x,K)}while(!0);if(V9(),Zr=D,t3.current=F,yo!==null)throw Error(n(261));return ia=null,ka=0,No}function pYe(){for(;yo!==null;)Wde(yo)}function mYe(){for(;yo!==null&&!Qh();)Wde(yo)}function Wde(x){var C=Xde(x.alternate,x,Sc);x.memoizedProps=x.pendingProps,C===null?Gde(x):yo=C,w7.current=null}function Gde(x){var C=x;do{var D=C.alternate;if(x=C.return,(C.flags&32768)===0){if(D=aYe(D,C,Sc),D!==null){yo=D;return}}else{if(D=lYe(D,C),D!==null){D.flags&=32767,yo=D;return}if(x!==null)x.flags|=32768,x.subtreeFlags=0,x.deletions=null;else{No=6,yo=null;return}}if(C=C.sibling,C!==null){yo=C;return}yo=C=x}while(C!==null);No===0&&(No=5)}function U1(x,C,D){var F=sn,K=pd.transition;try{pd.transition=null,sn=1,gYe(x,C,D,F)}finally{pd.transition=K,sn=F}return null}function gYe(x,C,D,F){do t_();while(Q0!==null);if((Zr&6)!==0)throw Error(n(327));D=x.finishedWork;var K=x.finishedLanes;if(D===null)return null;if(x.finishedWork=null,x.finishedLanes=0,D===x.current)throw Error(n(177));x.callbackNode=null,x.callbackPriority=0;var Z=D.lanes|D.childLanes;if(cn(x,Z),x===ia&&(yo=ia=null,ka=0),(D.subtreeFlags&2064)===0&&(D.flags&2064)===0||i3||(i3=!0,Qde(Ws,function(){return t_(),null})),Z=(D.flags&15990)!==0,(D.subtreeFlags&15990)!==0||Z){Z=pd.transition,pd.transition=null;var ce=sn;sn=1;var Re=Zr;Zr|=4,w7.current=null,cYe(x,D),Fde(D,x),$Ge(I9),oe=!!k9,I9=k9=null,x.current=D,dYe(D),vc(),Zr=Re,sn=ce,pd.transition=Z}else x.current=D;if(i3&&(i3=!1,Q0=x,s3=K),Z=x.pendingLanes,Z===0&&(X0=null),Jh(D.stateNode),Nu(x,Sr()),C!==null)for(F=x.onRecoverableError,D=0;D<C.length;D++)K=C[D],F(K.value,{componentStack:K.stack,digest:K.digest});if(r3)throw r3=!1,x=E7,E7=null,x;return(s3&1)!==0&&x.tag!==0&&t_(),Z=x.pendingLanes,(Z&1)!==0?x===C7?jT++:(jT=0,C7=x):jT=0,W0(),null}function t_(){if(Q0!==null){var x=vr(s3),C=pd.transition,D=sn;try{if(pd.transition=null,sn=16>x?16:x,Q0===null)var F=!1;else{if(x=Q0,Q0=null,s3=0,(Zr&6)!==0)throw Error(n(331));var K=Zr;for(Zr|=4,tn=x.current;tn!==null;){var Z=tn,ce=Z.child;if((tn.flags&16)!==0){var Re=Z.deletions;if(Re!==null){for(var Fe=0;Fe<Re.length;Fe++){var Qe=Re[Fe];for(tn=Qe;tn!==null;){var vt=tn;switch(vt.tag){case 0:case 11:case 15:$T(8,vt,Z)}var Et=vt.child;if(Et!==null)Et.return=vt,tn=Et;else for(;tn!==null;){vt=tn;var yt=vt.sibling,Jt=vt.return;if(Pde(vt),vt===Qe){tn=null;break}if(yt!==null){yt.return=Jt,tn=yt;break}tn=Jt}}}var on=Z.alternate;if(on!==null){var dn=on.child;if(dn!==null){on.child=null;do{var Js=dn.sibling;dn.sibling=null,dn=Js}while(dn!==null)}}tn=Z}}if((Z.subtreeFlags&2064)!==0&&ce!==null)ce.return=Z,tn=ce;else e:for(;tn!==null;){if(Z=tn,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:$T(9,Z,Z.return)}var Ge=Z.sibling;if(Ge!==null){Ge.return=Z.return,tn=Ge;break e}tn=Z.return}}var ze=x.current;for(tn=ze;tn!==null;){ce=tn;var Xe=ce.child;if((ce.subtreeFlags&2064)!==0&&Xe!==null)Xe.return=ce,tn=Xe;else e:for(ce=ze;tn!==null;){if(Re=tn,(Re.flags&2048)!==0)try{switch(Re.tag){case 0:case 11:case 15:e3(9,Re)}}catch(yn){Ds(Re,Re.return,yn)}if(Re===ce){tn=null;break e}var Nt=Re.sibling;if(Nt!==null){Nt.return=Re.return,tn=Nt;break e}tn=Re.return}}if(Zr=K,W0(),Gs&&typeof Gs.onPostCommitFiberRoot=="function")try{Gs.onPostCommitFiberRoot(Au,x)}catch{}F=!0}return F}finally{sn=D,pd.transition=C}}return!1}function Yde(x,C,D){C=Qx(D,C),C=fde(x,C,1),x=Y0(x,C,1),C=Vl(),x!==null&&(Vn(x,1,C),Nu(x,C))}function Ds(x,C,D){if(x.tag===3)Yde(x,x,D);else for(;C!==null;){if(C.tag===3){Yde(C,x,D);break}else if(C.tag===1){var F=C.stateNode;if(typeof C.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(X0===null||!X0.has(F))){x=Qx(D,x),x=hde(C,x,1),C=Y0(C,x,1),x=Vl(),C!==null&&(Vn(C,1,x),Nu(C,x));break}}C=C.return}}function yYe(x,C,D){var F=x.pingCache;F!==null&&F.delete(C),C=Vl(),x.pingedLanes|=x.suspendedLanes&D,ia===x&&(ka&D)===D&&(No===4||No===3&&(ka&130023424)===ka&&500>Sr()-_7?V1(x,0):x7|=D),Nu(x,C)}function Kde(x,C){C===0&&((x.mode&1)===0?C=1:(C=Ue,Ue<<=1,(Ue&130023424)===0&&(Ue=4194304)));var D=Vl();x=Hm(x,C),x!==null&&(Vn(x,C,D),Nu(x,D))}function vYe(x){var C=x.memoizedState,D=0;C!==null&&(D=C.retryLane),Kde(x,D)}function bYe(x,C){var D=0;switch(x.tag){case 13:var F=x.stateNode,K=x.memoizedState;K!==null&&(D=K.retryLane);break;case 19:F=x.stateNode;break;default:throw Error(n(314))}F!==null&&F.delete(C),Kde(x,D)}var Xde;Xde=function(x,C,D){if(x!==null)if(x.memoizedProps!==C.pendingProps||Ru.current)Pu=!0;else{if((x.lanes&D)===0&&(C.flags&128)===0)return Pu=!1,oYe(x,C,D);Pu=(x.flags&131072)!==0}else Pu=!1,us&&(C.flags&1048576)!==0&&Ice(C,FP,C.index);switch(C.lanes=0,C.tag){case 2:var F=C.type;JP(x,C),x=C.pendingProps;var K=Ux(C,nl.current);Kx(C,D),K=Z9(null,C,F,x,K,D);var Z=e7();return C.flags|=1,typeof K=="object"&&K!==null&&typeof K.render=="function"&&K.$$typeof===void 0?(C.tag=1,C.memoizedState=null,C.updateQueue=null,Du(F)?(Z=!0,NP(C)):Z=!1,C.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,W9(C),K.updater=XP,C.stateNode=K,K._reactInternals=C,o7(C,F,x,D),C=c7(null,C,F,!0,Z,D)):(C.tag=0,us&&Z&&$9(C),zl(null,C,K,D),C=C.child),C;case 16:F=C.elementType;e:{switch(JP(x,C),x=C.pendingProps,K=F._init,F=K(F._payload),C.type=F,K=C.tag=xYe(F),x=Sf(F,x),K){case 0:C=u7(null,C,F,x,D);break e;case 1:C=_de(null,C,F,x,D);break e;case 11:C=yde(null,C,F,x,D);break e;case 14:C=vde(null,C,F,Sf(F.type,x),D);break e}throw Error(n(306,F,""))}return C;case 0:return F=C.type,K=C.pendingProps,K=C.elementType===F?K:Sf(F,K),u7(x,C,F,K,D);case 1:return F=C.type,K=C.pendingProps,K=C.elementType===F?K:Sf(F,K),_de(x,C,F,K,D);case 3:e:{if(Ede(C),x===null)throw Error(n(387));F=C.pendingProps,Z=C.memoizedState,K=Z.element,Lce(x,C),UP(C,F,null,D);var ce=C.memoizedState;if(F=ce.element,Z.isDehydrated)if(Z={element:F,isDehydrated:!1,cache:ce.cache,pendingSuspenseBoundaries:ce.pendingSuspenseBoundaries,transitions:ce.transitions},C.updateQueue.baseState=Z,C.memoizedState=Z,C.flags&256){K=Qx(Error(n(423)),C),C=Cde(x,C,F,D,K);break e}else if(F!==K){K=Qx(Error(n(424)),C),C=Cde(x,C,F,D,K);break e}else for(Cc=U0(C.stateNode.containerInfo.firstChild),Ec=C,us=!0,Cf=null,D=$ce(C,null,F,D),C.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling;else{if(Wx(),F===K){C=Wm(x,C,D);break e}zl(x,C,F,D)}C=C.child}return C;case 5:return zce(C),x===null&&j9(C),F=C.type,K=C.pendingProps,Z=x!==null?x.memoizedProps:null,ce=K.children,R9(F,K)?ce=null:Z!==null&&R9(F,Z)&&(C.flags|=32),xde(x,C),zl(x,C,ce,D),C.child;case 6:return x===null&&j9(C),null;case 13:return Sde(x,C,D);case 4:return G9(C,C.stateNode.containerInfo),F=C.pendingProps,x===null?C.child=Gx(C,null,F,D):zl(x,C,F,D),C.child;case 11:return F=C.type,K=C.pendingProps,K=C.elementType===F?K:Sf(F,K),yde(x,C,F,K,D);case 7:return zl(x,C,C.pendingProps,D),C.child;case 8:return zl(x,C,C.pendingProps.children,D),C.child;case 12:return zl(x,C,C.pendingProps.children,D),C.child;case 10:e:{if(F=C.type._context,K=C.pendingProps,Z=C.memoizedProps,ce=K.value,Hi(BP,F._currentValue),F._currentValue=ce,Z!==null)if(Ef(Z.value,ce)){if(Z.children===K.children&&!Ru.current){C=Wm(x,C,D);break e}}else for(Z=C.child,Z!==null&&(Z.return=C);Z!==null;){var Re=Z.dependencies;if(Re!==null){ce=Z.child;for(var Fe=Re.firstContext;Fe!==null;){if(Fe.context===F){if(Z.tag===1){Fe=qm(-1,D&-D),Fe.tag=2;var Qe=Z.updateQueue;if(Qe!==null){Qe=Qe.shared;var vt=Qe.pending;vt===null?Fe.next=Fe:(Fe.next=vt.next,vt.next=Fe),Qe.pending=Fe}}Z.lanes|=D,Fe=Z.alternate,Fe!==null&&(Fe.lanes|=D),H9(Z.return,D,C),Re.lanes|=D;break}Fe=Fe.next}}else if(Z.tag===10)ce=Z.type===C.type?null:Z.child;else if(Z.tag===18){if(ce=Z.return,ce===null)throw Error(n(341));ce.lanes|=D,Re=ce.alternate,Re!==null&&(Re.lanes|=D),H9(ce,D,C),ce=Z.sibling}else ce=Z.child;if(ce!==null)ce.return=Z;else for(ce=Z;ce!==null;){if(ce===C){ce=null;break}if(Z=ce.sibling,Z!==null){Z.return=ce.return,ce=Z;break}ce=ce.return}Z=ce}zl(x,C,K.children,D),C=C.child}return C;case 9:return K=C.type,F=C.pendingProps.children,Kx(C,D),K=fd(K),F=F(K),C.flags|=1,zl(x,C,F,D),C.child;case 14:return F=C.type,K=Sf(F,C.pendingProps),K=Sf(F.type,K),vde(x,C,F,K,D);case 15:return bde(x,C,C.type,C.pendingProps,D);case 17:return F=C.type,K=C.pendingProps,K=C.elementType===F?K:Sf(F,K),JP(x,C),C.tag=1,Du(F)?(x=!0,NP(C)):x=!1,Kx(C,D),cde(C,F,K),o7(C,F,K,D),c7(null,C,F,!0,x,D);case 19:return Ade(x,C,D);case 22:return wde(x,C,D)}throw Error(n(156,C.tag))};function Qde(x,C){return od(x,C)}function wYe(x,C,D,F){this.tag=x,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=C,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function md(x,C,D,F){return new wYe(x,C,D,F)}function R7(x){return x=x.prototype,!(!x||!x.isReactComponent)}function xYe(x){if(typeof x=="function")return R7(x)?1:0;if(x!=null){if(x=x.$$typeof,x===N)return 11;if(x===j)return 14}return 2}function ey(x,C){var D=x.alternate;return D===null?(D=md(x.tag,C,x.key,x.mode),D.elementType=x.elementType,D.type=x.type,D.stateNode=x.stateNode,D.alternate=x,x.alternate=D):(D.pendingProps=C,D.type=x.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=x.flags&14680064,D.childLanes=x.childLanes,D.lanes=x.lanes,D.child=x.child,D.memoizedProps=x.memoizedProps,D.memoizedState=x.memoizedState,D.updateQueue=x.updateQueue,C=x.dependencies,D.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext},D.sibling=x.sibling,D.index=x.index,D.ref=x.ref,D}function u3(x,C,D,F,K,Z){var ce=2;if(F=x,typeof x=="function")R7(x)&&(ce=1);else if(typeof x=="string")ce=5;else e:switch(x){case T:return H1(D.children,K,Z,C);case A:ce=8,K|=8;break;case R:return x=md(12,D,C,K|2),x.elementType=R,x.lanes=Z,x;case M:return x=md(13,D,C,K),x.elementType=M,x.lanes=Z,x;case O:return x=md(19,D,C,K),x.elementType=O,x.lanes=Z,x;case H:return c3(D,K,Z,C);default:if(typeof x=="object"&&x!==null)switch(x.$$typeof){case I:ce=10;break e;case P:ce=9;break e;case N:ce=11;break e;case j:ce=14;break e;case B:ce=16,F=null;break e}throw Error(n(130,x==null?x:typeof x,""))}return C=md(ce,D,C,K),C.elementType=x,C.type=F,C.lanes=Z,C}function H1(x,C,D,F){return x=md(7,x,F,C),x.lanes=D,x}function c3(x,C,D,F){return x=md(22,x,F,C),x.elementType=H,x.lanes=D,x.stateNode={isHidden:!1},x}function D7(x,C,D){return x=md(6,x,null,C),x.lanes=D,x}function P7(x,C,D){return C=md(4,x.children!==null?x.children:[],x.key,C),C.lanes=D,C.stateNode={containerInfo:x.containerInfo,pendingChildren:null,implementation:x.implementation},C}function _Ye(x,C,D,F,K){this.tag=C,this.containerInfo=x,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gt(0),this.expirationTimes=Gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gt(0),this.identifierPrefix=F,this.onRecoverableError=K,this.mutableSourceEagerHydrationData=null}function O7(x,C,D,F,K,Z,ce,Re,Fe){return x=new _Ye(x,C,D,Re,Fe),C===1?(C=1,Z===!0&&(C|=8)):C=0,Z=md(3,null,null,C),x.current=Z,Z.stateNode=x,Z.memoizedState={element:F,isDehydrated:D,cache:null,transitions:null,pendingSuspenseBoundaries:null},W9(Z),x}function EYe(x,C,D){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:S,key:F==null?null:""+F,children:x,containerInfo:C,implementation:D}}function Jde(x){if(!x)return q0;x=x._reactInternals;e:{if(Kn(x)!==x||x.tag!==1)throw Error(n(170));var C=x;do{switch(C.tag){case 3:C=C.stateNode.context;break e;case 1:if(Du(C.type)){C=C.stateNode.__reactInternalMemoizedMergedChildContext;break e}}C=C.return}while(C!==null);throw Error(n(171))}if(x.tag===1){var D=x.type;if(Du(D))return Tce(x,D,C)}return C}function Zde(x,C,D,F,K,Z,ce,Re,Fe){return x=O7(D,F,!0,x,K,Z,ce,Re,Fe),x.context=Jde(null),D=x.current,F=Vl(),K=J0(D),Z=qm(F,K),Z.callback=C??null,Y0(D,Z,K),x.current.lanes=K,Vn(x,K,F),Nu(x,F),x}function d3(x,C,D,F){var K=C.current,Z=Vl(),ce=J0(K);return D=Jde(D),C.context===null?C.context=D:C.pendingContext=D,C=qm(Z,ce),C.payload={element:x},F=F===void 0?null:F,F!==null&&(C.callback=F),x=Y0(K,C,ce),x!==null&&(kf(x,K,ce,Z),VP(x,K,ce)),ce}function f3(x){if(x=x.current,!x.child)return null;switch(x.child.tag){case 5:return x.child.stateNode;default:return x.child.stateNode}}function efe(x,C){if(x=x.memoizedState,x!==null&&x.dehydrated!==null){var D=x.retryLane;x.retryLane=D!==0&&D<C?D:C}}function N7(x,C){efe(x,C),(x=x.alternate)&&efe(x,C)}function CYe(){return null}var tfe=typeof reportError=="function"?reportError:function(x){console.error(x)};function M7(x){this._internalRoot=x}h3.prototype.render=M7.prototype.render=function(x){var C=this._internalRoot;if(C===null)throw Error(n(409));d3(x,C,null,null)},h3.prototype.unmount=M7.prototype.unmount=function(){var x=this._internalRoot;if(x!==null){this._internalRoot=null;var C=x.containerInfo;z1(function(){d3(null,x,null,null)}),C[Bm]=null}};function h3(x){this._internalRoot=x}h3.prototype.unstable_scheduleHydration=function(x){if(x){var C=Zh();x={blockedOn:null,target:x,priority:C};for(var D=0;D<el.length&&C!==0&&C<el[D].priority;D++);el.splice(D,0,x),D===0&&np(x)}};function $7(x){return!(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)}function p3(x){return!(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11&&(x.nodeType!==8||x.nodeValue!==" react-mount-point-unstable "))}function nfe(){}function SYe(x,C,D,F,K){if(K){if(typeof F=="function"){var Z=F;F=function(){var Qe=f3(ce);Z.call(Qe)}}var ce=Zde(C,F,x,0,null,!1,!1,"",nfe);return x._reactRootContainer=ce,x[Bm]=ce.current,ET(x.nodeType===8?x.parentNode:x),z1(),ce}for(;K=x.lastChild;)x.removeChild(K);if(typeof F=="function"){var Re=F;F=function(){var Qe=f3(Fe);Re.call(Qe)}}var Fe=O7(x,0,!1,null,null,!1,!1,"",nfe);return x._reactRootContainer=Fe,x[Bm]=Fe.current,ET(x.nodeType===8?x.parentNode:x),z1(function(){d3(C,Fe,D,F)}),Fe}function m3(x,C,D,F,K){var Z=D._reactRootContainer;if(Z){var ce=Z;if(typeof K=="function"){var Re=K;K=function(){var Fe=f3(ce);Re.call(Fe)}}d3(C,ce,x,K)}else ce=SYe(D,C,x,K,F);return f3(ce)}Ks=function(x){switch(x.tag){case 3:var C=x.stateNode;if(C.current.memoizedState.isDehydrated){var D=Le(C.pendingLanes);D!==0&&(lr(C,D|1),Nu(C,Sr()),(Zr&6)===0&&(e_=Sr()+500,W0()))}break;case 13:z1(function(){var F=Hm(x,1);if(F!==null){var K=Vl();kf(F,x,1,K)}}),N7(x,1)}},Za=function(x){if(x.tag===13){var C=Hm(x,134217728);if(C!==null){var D=Vl();kf(C,x,134217728,D)}N7(x,134217728)}},Xs=function(x){if(x.tag===13){var C=J0(x),D=Hm(x,C);if(D!==null){var F=Vl();kf(D,x,C,F)}N7(x,C)}},Zh=function(){return sn},ad=function(x,C){var D=sn;try{return sn=x,C()}finally{sn=D}},or=function(x,C,D){switch(C){case"input":if(te(x,D),C=D.name,D.type==="radio"&&C!=null){for(D=x;D.parentNode;)D=D.parentNode;for(D=D.querySelectorAll("input[name="+JSON.stringify(""+C)+'][type="radio"]'),C=0;C<D.length;C++){var F=D[C];if(F!==x&&F.form===x.form){var K=PP(F);if(!K)throw Error(n(90));le(F),te(F,K)}}}break;case"textarea":ke(x,D);break;case"select":C=D.value,C!=null&&Te(x,!!D.multiple,C,!1)}},Rr=A7,Nn=z1;var TYe={usingClientEntryPoint:!1,Events:[TT,zx,PP,cr,xi,A7]},BT={findFiberByHostInstance:O1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AYe={bundleType:BT.bundleType,version:BT.version,rendererPackageName:BT.rendererPackageName,rendererConfig:BT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(x){return x=wf(x),x===null?null:x.stateNode},findFiberByHostInstance:BT.findFiberByHostInstance||CYe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var g3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!g3.isDisabled&&g3.supportsFiber)try{Au=g3.inject(AYe),Gs=g3}catch{}}return Mu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TYe,Mu.createPortal=function(x,C){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$7(C))throw Error(n(200));return EYe(x,C,null,D)},Mu.createRoot=function(x,C){if(!$7(x))throw Error(n(299));var D=!1,F="",K=tfe;return C!=null&&(C.unstable_strictMode===!0&&(D=!0),C.identifierPrefix!==void 0&&(F=C.identifierPrefix),C.onRecoverableError!==void 0&&(K=C.onRecoverableError)),C=O7(x,1,!1,null,null,D,!1,F,K),x[Bm]=C.current,ET(x.nodeType===8?x.parentNode:x),new M7(C)},Mu.findDOMNode=function(x){if(x==null)return null;if(x.nodeType===1)return x;var C=x._reactInternals;if(C===void 0)throw typeof x.render=="function"?Error(n(188)):(x=Object.keys(x).join(","),Error(n(268,x)));return x=wf(C),x=x===null?null:x.stateNode,x},Mu.flushSync=function(x){return z1(x)},Mu.hydrate=function(x,C,D){if(!p3(C))throw Error(n(200));return m3(null,x,C,!0,D)},Mu.hydrateRoot=function(x,C,D){if(!$7(x))throw Error(n(405));var F=D!=null&&D.hydratedSources||null,K=!1,Z="",ce=tfe;if(D!=null&&(D.unstable_strictMode===!0&&(K=!0),D.identifierPrefix!==void 0&&(Z=D.identifierPrefix),D.onRecoverableError!==void 0&&(ce=D.onRecoverableError)),C=Zde(C,null,x,1,D??null,K,!1,Z,ce),x[Bm]=C.current,ET(x),F)for(x=0;x<F.length;x++)D=F[x],K=D._getVersion,K=K(D._source),C.mutableSourceEagerHydrationData==null?C.mutableSourceEagerHydrationData=[D,K]:C.mutableSourceEagerHydrationData.push(D,K);return new h3(C)},Mu.render=function(x,C,D){if(!p3(C))throw Error(n(200));return m3(null,x,C,!1,D)},Mu.unmountComponentAtNode=function(x){if(!p3(x))throw Error(n(40));return x._reactRootContainer?(z1(function(){m3(null,null,x,!1,function(){x._reactRootContainer=null,x[Bm]=null})}),!0):!1},Mu.unstable_batchedUpdates=A7,Mu.unstable_renderSubtreeIntoContainer=function(x,C,D,F){if(!p3(D))throw Error(n(200));if(x==null||x._reactInternals===void 0)throw Error(n(38));return m3(x,C,D,!1,F)},Mu.version="18.3.1-next-f1338f8080-20240426",Mu}var cfe;function OTe(){if(cfe)return j7.exports;cfe=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),j7.exports=FYe(),j7.exports}var dfe;function LYe(){if(dfe)return y3;dfe=1;var e=OTe();return y3.createRoot=e.createRoot,y3.hydrateRoot=e.hydrateRoot,y3}var jYe=LYe();const BYe=Ao(jYe);var Ep=function(){return Ep=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ep.apply(this,arguments)};function aR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function XM(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}function zYe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}var JN="right-scroll-bar-position",ZN="width-before-scroll-bar",VYe="with-scroll-bars-hidden",UYe="--removed-body-scroll-bar-size";function V7(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function HYe(e,t){var n=k.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var qYe=typeof window<"u"?k.useLayoutEffect:k.useEffect,ffe=new WeakMap;function WYe(e,t){var n=HYe(null,function(r){return e.forEach(function(i){return V7(i,r)})});return qYe(function(){var r=ffe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||V7(a,null)}),s.forEach(function(a){i.has(a)||V7(a,o)})}ffe.set(n,e)},[e]),n}function GYe(e){return e}function YYe(e,t){t===void 0&&(t=GYe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function KYe(e){e===void 0&&(e={});var t=YYe(null);return t.options=Ep({async:!0,ssr:!1},e),t}var NTe=function(e){var t=e.sideCar,n=aR(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,Ep({},n))};NTe.isSideCarExport=!0;function XYe(e,t){return e.useMedium(t),NTe}var MTe=KYe(),U7=function(){},hF=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:U7,onWheelCapture:U7,onTouchMoveCapture:U7}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noRelative,p=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,b=e.gapMode,_=aR(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=f,S=WYe([n,t]),T=Ep(Ep({},_),i);return k.createElement(k.Fragment,null,c&&k.createElement(E,{sideCar:MTe,removeScrollBar:u,shards:d,noRelative:h,noIsolation:p,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?k.cloneElement(k.Children.only(a),Ep(Ep({},T),{ref:S})):k.createElement(v,Ep({},T,{className:l,ref:S}),a))});hF.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hF.classNames={fullWidth:ZN,zeroRight:JN};var QYe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function JYe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=QYe();return t&&e.setAttribute("nonce",t),e}function ZYe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function eKe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var tKe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=JYe())&&(ZYe(t,n),eKe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nKe=function(){var e=tKe();return function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},$Te=function(){var e=nKe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},rKe={left:0,top:0,right:0,gap:0},H7=function(e){return parseInt(e||"",10)||0},iKe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[H7(n),H7(r),H7(i)]},sKe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rKe;var t=iKe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},oKe=$Te(),fE="data-scroll-locked",aKe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(VYe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(fE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(JN,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ZN,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(JN," .").concat(JN,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ZN," .").concat(ZN,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(fE,`] {
    `).concat(UYe,": ").concat(a,`px;
  }
`)},hfe=function(){var e=parseInt(document.body.getAttribute(fE)||"0",10);return isFinite(e)?e:0},lKe=function(){k.useEffect(function(){return document.body.setAttribute(fE,(hfe()+1).toString()),function(){var e=hfe()-1;e<=0?document.body.removeAttribute(fE):document.body.setAttribute(fE,e.toString())}},[])},uKe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;lKe();var s=k.useMemo(function(){return sKe(i)},[i]);return k.createElement(oKe,{styles:aKe(s,!t,i,n?"":"!important")})},AW=!1;if(typeof window<"u")try{var v3=Object.defineProperty({},"passive",{get:function(){return AW=!0,!0}});window.addEventListener("test",v3,v3),window.removeEventListener("test",v3,v3)}catch{AW=!1}var n_=AW?{passive:!1}:!1,cKe=function(e){return e.tagName==="TEXTAREA"},FTe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!cKe(e)&&n[t]==="visible")},dKe=function(e){return FTe(e,"overflowY")},fKe=function(e){return FTe(e,"overflowX")},pfe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=LTe(e,r);if(i){var s=jTe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hKe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},pKe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},LTe=function(e,t){return e==="v"?dKe(t):fKe(t)},jTe=function(e,t){return e==="v"?hKe(t):pKe(t)},mKe=function(e,t){return e==="h"&&t==="rtl"?-1:1},gKe=function(e,t,n,r,i){var s=mKe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),u=!1,c=o>0,d=0,f=0;do{if(!a)break;var h=jTe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&LTe(e,a)&&(d+=y,f+=p);var v=a.parentNode;a=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&Math.abs(d)<1||!c&&Math.abs(f)<1)&&(u=!0),u},b3=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mfe=function(e){return[e.deltaX,e.deltaY]},gfe=function(e){return e&&"current"in e?e.current:e},yKe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vKe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bKe=0,r_=[];function wKe(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState(bKe++)[0],s=k.useState($Te)[0],o=k.useRef(e);k.useEffect(function(){o.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=zYe([e.lockRef.current],(e.shards||[]).map(gfe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=k.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var y=b3(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],_="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(b)>Math.abs(_)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var A=pfe(T,S);if(!A)return!0;if(A?E=T:(E=T==="v"?"h":"v",A=pfe(T,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||_)&&(r.current=E),!E)return!0;var R=r.current||E;return gKe(R,g,m,R==="h"?b:_)},[]),l=k.useCallback(function(m){var g=m;if(!(!r_.length||r_[r_.length-1]!==s)){var y="deltaY"in g?mfe(g):b3(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&yKe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(gfe).filter(Boolean).filter(function(E){return E.contains(g.target)}),_=b.length>0?a(g,b[0]):!o.current.noIsolation;_&&g.cancelable&&g.preventDefault()}}},[]),u=k.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:xKe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(_){return _!==b})},1)},[]),c=k.useCallback(function(m){n.current=b3(m),r.current=void 0},[]),d=k.useCallback(function(m){u(m.type,mfe(m),m.target,a(m,e.lockRef.current))},[]),f=k.useCallback(function(m){u(m.type,b3(m),m.target,a(m,e.lockRef.current))},[]);k.useEffect(function(){return r_.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,n_),document.addEventListener("touchmove",l,n_),document.addEventListener("touchstart",c,n_),function(){r_=r_.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,n_),document.removeEventListener("touchmove",l,n_),document.removeEventListener("touchstart",c,n_)}},[]);var h=e.removeScrollBar,p=e.inert;return k.createElement(k.Fragment,null,p?k.createElement(s,{styles:vKe(i)}):null,h?k.createElement(uKe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function xKe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const _Ke=XYe(MTe,wKe);var zE=k.forwardRef(function(e,t){return k.createElement(hF,Ep({},e,{ref:t,sideCar:_Ke}))});zE.classNames=hF.classNames;function ji(e){return Object.keys(e)}function q7(e){return e&&typeof e=="object"&&!Array.isArray(e)}function KQ(e,t){const n={...e},r=t;return q7(e)&&q7(t)&&Object.keys(t).forEach(i=>{q7(r[i])&&i in e?n[i]=KQ(n[i],r[i]):n[i]=r[i]}),n}function EKe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function CKe(e){return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:e.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function Tk(e){const t=CKe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function W7(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function BTe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?W7(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?W7(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?W7(s):s}}return r}return n}const Ye=BTe("rem",{shouldScale:!0}),QM=BTe("em");function Yv(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function zTe(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function g0(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==k.Fragment:!1}function Qo(e){const t=k.createContext(null);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>{const i=k.useContext(t);if(i===null)throw new Error(e);return i}]}function y0(e=null){const t=k.createContext(e);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>k.useContext(t)]}function JM(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function ZM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function SKe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function TKe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function AKe(e,t,n){return ZM(e,n)===ZM(t,n)}function XQ({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{n?.(a);const l=Array.from(ZM(a.currentTarget,e)?.querySelectorAll(t)||[]).filter(p=>AKe(a.currentTarget,p,e)),u=l.findIndex(p=>a.currentTarget===p),c=TKe(u,l,r),d=SKe(u,l,r),f=s==="rtl"?d:c,h=s==="rtl"?c:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[c].focus(),i&&l[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const p=l.length-1;!l[p].disabled&&l[p].focus();break}}}}const kKe={app:100,modal:200,popover:300,overlay:400,max:9999};function dc(e){return kKe[e]}const e6=()=>{};function IKe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||e6:n=>{n.key==="Escape"&&(e(n),t.onTrigger?.())}}function _n(e,t="size",n=!0){if(e!==void 0)return zTe(e)?n?Ye(e):e:`var(--${t}-${e})`}function Yi(e){return _n(e,"mantine-spacing")}function Jr(e){return e===void 0?"var(--mantine-radius-default)":_n(e,"mantine-radius")}function As(e){return _n(e,"mantine-font-size")}function VTe(e){return _n(e,"mantine-line-height",!1)}function QQ(e){if(e)return _n(e,"mantine-shadow",!1)}function ha(e,t){return n=>{e?.(n),t?.(n)}}function JQ(e,t){return e in t?Tk(t[e]):Tk(e)}function Ak(e,t){const n=e.map(r=>({value:r,px:JQ(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Wf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function RKe(e,t,n){return n?Array.from(ZM(n,t)?.querySelectorAll(e)||[]).findIndex(r=>r===n):null}function DKe(){const[e,t]=k.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function jd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Ky(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function PKe(e,t){if(e===t||Number.isNaN(e)&&Number.isNaN(t))return!0;if(!(e instanceof Object)||!(t instanceof Object))return!1;const n=Object.keys(e),{length:r}=n;if(r!==Object.keys(t).length)return!1;for(let i=0;i<r;i+=1){const s=n[i];if(!(s in t)||e[s]!==t[s]&&!(Number.isNaN(e[s])&&Number.isNaN(t[s])))return!1}return!0}function Cy(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...n)=>t.current?.(...n),[])}function pF(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Cy(e),s=k.useRef(0),o=k.useRef(()=>{}),a=Object.assign(k.useCallback((...l)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...l))};o.current=u,a.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:o.current});return k.useEffect(()=>()=>{window.clearTimeout(s.current),r&&a.flush()},[a,r]),a}const yfe=["mousedown","touchstart"];function UTe(e,t,n){const r=k.useRef(null);return k.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=o?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!s.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||yfe).forEach(s=>document.addEventListener(s,i)),()=>{(t||yfe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function OKe({timeout:e=2e3}={}){const[t,n]=k.useState(null),[r,i]=k.useState(!1),[s,o]=k.useState(null),a=c=>{window.clearTimeout(s),o(window.setTimeout(()=>i(!1),e)),i(c)};return{copy:c=>{"clipboard"in navigator?navigator.clipboard.writeText(c).then(()=>a(!0)).catch(d=>n(d)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{i(!1),n(null),window.clearTimeout(s)},error:t,copied:r}}function NKe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function MKe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function kk(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=k.useState(n?t:MKe(e)),s=k.useRef(null);return k.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),NKe(s.current,o=>i(o.matches))},[e]),r}function $Ke(e,t){return kk("(prefers-color-scheme: dark)",e==="dark",t)?"dark":"light"}function HTe(e,t,n={leading:!1}){const[r,i]=k.useState(e),s=k.useRef(!1),o=k.useRef(null),a=k.useRef(!1),l=()=>window.clearTimeout(o.current);return k.useEffect(()=>{s.current&&(!a.current&&n.leading?(a.current=!0,i(e)):(l(),o.current=window.setTimeout(()=>{a.current=!1,i(e)},t)))},[e,n.leading,t]),k.useEffect(()=>(s.current=!0,l),[]),[r,l]}const Kv=typeof document<"u"?k.useLayoutEffect:k.useEffect;function fu(e,t){const n=k.useRef(!1);k.useEffect(()=>()=>{n.current=!1},[]),k.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function qTe({opened:e,shouldReturnFocus:t=!0}){const n=k.useRef(null),r=()=>{n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&n.current?.focus({preventScroll:!0})};return fu(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const FKe=/input|select|textarea|button|object/,WTe="a, input, select, textarea, button, object, [tabindex]";function LKe(e){return e.style.display==="none"}function jKe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(LKe(n))return!1;n=n.parentNode}return!0}function GTe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function kW(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(GTe(e));return(FKe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&jKe(e)}function YTe(e){const t=GTe(e);return(Number.isNaN(t)||t>=0)&&kW(e)}function BKe(e){return Array.from(e.querySelectorAll(WTe)).filter(YTe)}function zKe(e,t){const n=BKe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}function VKe(e=!0){const t=k.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(WTe));s=o.find(YTe)||o.find(kW)||null,!s&&kW(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=k.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return k.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&zKe(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const UKe=e=>(e+1)%1e6;function HKe(){const[,e]=k.useReducer(UKe,0);return e}const qKe=bn.useId||(()=>{});function WKe(){const e=qKe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Xa(e){const t=WKe(),[n,r]=k.useState(t);return Kv(()=>{r(Ky())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function KTe(e,t,n){k.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function t6(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function XTe(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=t6(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():t6(r,null)}),t.clear()}}}function Is(...e){return k.useCallback(XTe(...e),e)}function QTe(e){return{x:jd(e.x,0,1),y:jd(e.y,0,1)}}function lR(e,t,n="ltr"){const r=k.useRef(null),i=k.useRef(!1),s=k.useRef(!1),o=k.useRef(0),[a,l]=k.useState(!1);return k.useEffect(()=>{i.current=!0},[]),k.useEffect(()=>{const u=r.current,c=({x:b,y:_})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&u){u.style.userSelect="none";const E=u.getBoundingClientRect();if(E.width&&E.height){const S=jd((b-E.left)/E.width,0,1);e({x:n==="ltr"?S:1-S,y:jd((_-E.top)/E.height,0,1)})}}})},d=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",p),document.addEventListener("touchmove",v),document.addEventListener("touchend",p)},f=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",p),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",p)},h=()=>{!s.current&&i.current&&(s.current=!0,typeof t?.onScrubStart=="function"&&t.onScrubStart(),l(!0),d())},p=()=>{s.current&&i.current&&(s.current=!1,l(!1),f(),setTimeout(()=>{typeof t?.onScrubEnd=="function"&&t.onScrubEnd()},0))},m=b=>{h(),b.preventDefault(),g(b)},g=b=>c({x:b.clientX,y:b.clientY}),y=b=>{b.cancelable&&b.preventDefault(),h(),v(b)},v=b=>{b.cancelable&&b.preventDefault(),c({x:b.changedTouches[0].clientX,y:b.changedTouches[0].clientY})};return u?.addEventListener("mousedown",m),u?.addEventListener("touchstart",y,{passive:!1}),()=>{u&&(u.removeEventListener("mousedown",m),u.removeEventListener("touchstart",y))}},[n,e]),{ref:r,active:a}}function Ki({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=k.useState(t!==void 0?t:n),o=(a,...l)=>{s(a),r?.(a,...l)};return e!==void 0?[e,r,!0]:[i,o,!1]}function ny(e,t){const n=t-e+1;return Array.from({length:n},(r,i)=>i+e)}const w3="dots";function GKe({total:e,siblings:t=1,boundaries:n=1,page:r,initialPage:i=1,onChange:s}){const o=Math.max(Math.trunc(e),0),[a,l]=Ki({value:r,onChange:s,defaultValue:i,finalValue:i}),u=m=>{m<=0?l(1):m>o?l(o):l(m)},c=()=>u(a+1),d=()=>u(a-1),f=()=>u(1),h=()=>u(o);return{range:k.useMemo(()=>{if(t*2+3+n*2>=o)return ny(1,o);const g=Math.max(a-t,n),y=Math.min(a+t,o-n),v=g>n+2,b=y<o-(n+1);if(!v&&b){const _=t*2+n+2;return[...ny(1,_),w3,...ny(o-(n-1),o)]}if(v&&!b){const _=n+1+2*t;return[...ny(1,n),w3,...ny(o-_,o)]}return[...ny(1,n),w3,...ny(g,y),w3,...ny(o-n+1,o)]},[o,t,a]),active:a,setPage:u,next:c,previous:d,first:f,last:h}}function mF(e,t){return kk("(prefers-reduced-motion: reduce)",e,t)}const YKe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function nh(e){const t=k.useRef(0),n=k.useRef(null),[r,i]=k.useState(YKe),s=k.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{if(n.current){const l=a.borderBoxSize?.[0]||a.contentBoxSize?.[0];if(l){const u=l.inlineSize,c=l.blockSize;i({width:u,height:c,x:a.contentRect.x,y:a.contentRect.y,top:a.contentRect.top,left:a.contentRect.left,bottom:a.contentRect.bottom,right:a.contentRect.right})}else i(a.contentRect)}}))}):null,[]);return k.useEffect(()=>(n.current&&s?.observe(n.current,e),()=>{s?.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function KKe(e){const[t,{width:n,height:r}]=nh(e);return{ref:t,width:n,height:r}}function XKe(e,t){if(!e||!t)return!1;if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n+=1)if(!PKe(e[n],t[n]))return!1;return!0}function QKe(e){const t=k.useRef([]),n=k.useRef(0);return XKe(t.current,e)||(t.current=e,n.current+=1),[n.current]}function JKe(e,t){k.useEffect(e,QKe(t))}function ZKe(){const[e,t]=k.useState(!1),n=k.useRef(null),r=k.useCallback(()=>t(!0),[]),i=k.useCallback(()=>t(!1),[]);return k.useEffect(()=>{const s=n.current;if(s)return s.addEventListener("mouseenter",r),s.addEventListener("mouseleave",i),()=>{s?.removeEventListener("mouseenter",r),s?.removeEventListener("mouseleave",i)}},[n.current]),{ref:n,hovered:e}}function ZQ(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,s]=k.useState(e),o=k.useCallback(()=>{s(u=>u||(n?.(),!0))},[n]),a=k.useCallback(()=>{s(u=>u&&(r?.(),!1))},[r]),l=k.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:l}]}function eXe(e,t,n={autoInvoke:!1}){const r=k.useRef(null),i=k.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=k.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return k.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function tXe(e){const t=k.useRef(void 0);return k.useEffect(()=>{t.current=e},[e]),t.current}function nXe(){return navigator.userAgent.includes("OPR")}function rXe(){const[e,t]=k.useState(!1);Kv(()=>{t(typeof window<"u"&&!nXe()&&"EyeDropper"in window)},[]);const n=k.useCallback((r={})=>e?new window.EyeDropper().open(r):Promise.resolve(void 0),[e]);return{supported:e,open:n}}function iXe(e,t,n){const r=k.useRef(null),i=k.useRef(null);return k.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{r.current?.disconnect()}},[e,t]),i}function sXe(){const[e,t]=k.useState(!1);return k.useEffect(()=>t(!0),[]),e}function oXe(e,t){const n=Cy(e),r=k.useRef(null),i=k.useRef(null),s=k.useRef(!0),o=k.useRef(t),a=k.useRef(-1),l=()=>window.clearTimeout(a.current),u=k.useCallback((...f)=>{n(...f),r.current=f,i.current=f,s.current=!1},[n]),c=k.useCallback(()=>{r.current&&r.current!==i.current?(u(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[u]),d=k.useCallback((...f)=>{s.current?(u(...f),a.current=window.setTimeout(c,o.current)):r.current=f},[u,c]);return k.useEffect(()=>{o.current=t},[t]),[d,l]}function aXe(e,t){return oXe(e,t)[0]}function lXe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function uXe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Kv(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>lXe(`${e}:${String(r)}`,i[0])}return[t,n]}var cXe={};function JTe(){return typeof process<"u"&&cXe?"production":"development"}function IW(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function gF(e){const t=bn.version;return typeof bn.version!="string"||t.startsWith("18.")?e?.ref:e?.props?.ref}function ZTe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=ZTe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Bt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=ZTe(e))&&(r&&(r+=" "),r+=t);return r}const dXe={};function fXe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Bt(t[r],i):t[r]=i})}),t}function yF({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||dXe);return fXe(s)}function n6({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const eJ=k.createContext(null);function v0(){const e=k.useContext(eJ);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function hXe(){return v0().cssVariablesResolver}function pXe(){return v0().classNamesPrefix}function vF(){return v0().getStyleNonce}function mXe(){return v0().withStaticClasses}function gXe(){return v0().headless}function yXe(){return v0().stylesTransform?.sx}function vXe(){return v0().stylesTransform?.styles}function e2e(){return v0().env||"default"}function bXe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function wXe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function xXe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i===void 0?1:i}}function _Xe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=r/60,u=a*(1-Math.abs(l%2-1)),c=s-a/2;let d,f,h;return l>=0&&l<1?(d=a,f=u,h=0):l>=1&&l<2?(d=u,f=a,h=0):l>=2&&l<3?(d=0,f=a,h=u):l>=3&&l<4?(d=0,f=u,h=a):l>=4&&l<5?(d=u,f=0,h=a):(d=a,f=0,h=u),{r:Math.round((d+c)*255),g:Math.round((f+c)*255),b:Math.round((h+c)*255),a:o||1}}function bF(e){return bXe(e)?wXe(e):e.startsWith("rgb")?xXe(e):e.startsWith("hsl")?_Xe(e):{r:0,g:0,b:0,a:1}}function V2(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=bF(e),o=1-t,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function Ik(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function G7(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function EXe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function CXe(e){if(e.startsWith("oklch("))return(EXe(e)||0)/100;const{r:t,g:n,b:r}=bF(e),i=t/255,s=n/255,o=r/255,a=G7(i),l=G7(s),u=G7(o);return .2126*a+.7152*l+.0722*u}function VT(e,t=.179){return e.startsWith("var(")?!1:CXe(e)>t}function Sh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:VT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:VT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:VT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][Ik(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:VT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:VT(e,t.luminanceThreshold),shade:s,variable:void 0}}function li(e,t){const n=Sh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function RW(e,t){const n={from:e?.from||t.defaultGradient.from,to:e?.to||t.defaultGradient.to,deg:e?.deg??t.defaultGradient.deg??0},r=li(n.from,t),i=li(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function hp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=bF(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const i_=hp,SXe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Sh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ye(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ye(1)} solid transparent`}:{background:e,hover:V2(e,.1),color:a,border:`${Ye(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ye(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:hp(a,.1),hover:hp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ye(1)} solid transparent`}}return{background:hp(e,.1),hover:hp(e,.12),color:e,border:`${Ye(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ye(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:hp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ye(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:hp(e,.05),color:e,border:`${Ye(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ye(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:hp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ye(1)} solid transparent`}}return{background:"transparent",hover:hp(e,.12),color:e,border:`${Ye(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ye(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ye(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ye(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:V2(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ye(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:V2(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ye(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:V2(t.white,.01),color:e,border:`${Ye(1)} solid transparent`}:n==="gradient"?{background:RW(r,t),hover:RW(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ye(1)} solid var(--mantine-color-default-border)`}:{}},TXe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},vfe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",tJ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:TXe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:SXe,autoContrast:!1,luminanceThreshold:.3,fontFamily:vfe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:vfe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ye(34),lineHeight:"1.3"},h2:{fontSize:Ye(26),lineHeight:"1.35"},h3:{fontSize:Ye(22),lineHeight:"1.4"},h4:{fontSize:Ye(18),lineHeight:"1.45"},h5:{fontSize:Ye(16),lineHeight:"1.5"},h6:{fontSize:Ye(14),lineHeight:"1.5"}}},fontSizes:{xs:Ye(12),sm:Ye(14),md:Ye(16),lg:Ye(18),xl:Ye(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ye(2),sm:Ye(4),md:Ye(8),lg:Ye(16),xl:Ye(32)},spacing:{xs:Ye(10),sm:Ye(12),md:Ye(16),lg:Ye(20),xl:Ye(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ye(1)} ${Ye(3)} rgba(0, 0, 0, 0.05), 0 ${Ye(1)} ${Ye(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ye(1)} ${Ye(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ye(10)} ${Ye(15)} ${Ye(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ye(7)} ${Ye(7)} ${Ye(-5)}`,md:`0 ${Ye(1)} ${Ye(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ye(20)} ${Ye(25)} ${Ye(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ye(10)} ${Ye(10)} ${Ye(-5)}`,lg:`0 ${Ye(1)} ${Ye(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ye(28)} ${Ye(23)} ${Ye(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ye(12)} ${Ye(12)} ${Ye(-7)}`,xl:`0 ${Ye(1)} ${Ye(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ye(36)} ${Ye(28)} ${Ye(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ye(17)} ${Ye(17)} ${Ye(-7)}`},other:{},components:{}};function bfe(e){return e==="auto"||e==="dark"||e==="light"}function AXe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return bfe(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&bfe(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const kXe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",wfe="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Y7(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function xfe(e){if(!(e.primaryColor in e.colors))throw new Error(kXe);if(typeof e.primaryShade=="object"&&(!Y7(e.primaryShade.dark)||!Y7(e.primaryShade.light)))throw new Error(wfe);if(typeof e.primaryShade=="number"&&!Y7(e.primaryShade))throw new Error(wfe)}function IXe(e,t){if(!t)return xfe(e),e;const n=KQ(e,t);return t.fontFamily&&!t.headings?.fontFamily&&(n.headings.fontFamily=t.fontFamily),xfe(n),n}const nJ=k.createContext(null),RXe=()=>k.useContext(nJ)||tJ;function bs(){const e=k.useContext(nJ);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function t2e({theme:e,children:t,inherit:n=!0}){const r=RXe(),i=k.useMemo(()=>IXe(n?r:tJ,e),[e,r,n]);return w.jsx(nJ.Provider,{value:i,children:t})}t2e.displayName="@mantine/core/MantineThemeProvider";function DXe(){const e=bs(),t=vF(),n=ji(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=Tk(e.breakpoints[i]),a=s?`${o-.1}px`:QM(o-.1),l=s?`${o}px`:QM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:t?.(),dangerouslySetInnerHTML:{__html:n}})}function K7(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function UT(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function PXe(e,t){const n=K7(e.variables),r=n?UT(t,n):"",i=K7(e.dark),s=K7(e.light),o=i?UT(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?UT(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function ym({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Sh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function _fe(e,t){return ym({color:e.colors[e.primaryColor][Ik(e,t)],theme:e,autoContrast:null})}function x3({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=Ik(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:i_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:i_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:i_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const s=Ik(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:i_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:i_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:i_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function OXe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function s_(e,t,n){ji(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const n2e=e=>{const t=Ik(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ye(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":_fe(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":_fe(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};s_(r.variables,e.breakpoints,"breakpoint"),s_(r.variables,e.spacing,"spacing"),s_(r.variables,e.fontSizes,"font-size"),s_(r.variables,e.lineHeights,"line-height"),s_(r.variables,e.shadows,"shadow"),s_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),ji(e.colors).forEach(s=>{const o=e.colors[s];if(OXe(o)){Object.assign(r.light,x3({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,x3({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,x3({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,x3({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return ji(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function NXe({theme:e,generator:t}){const n=n2e(e),r=t?.(e);return r?KQ(n,r):n}const X7=n2e(tJ);function MXe(e){const t={variables:{},light:{},dark:{}};return ji(e.variables).forEach(n=>{X7.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),ji(e.light).forEach(n=>{X7.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),ji(e.dark).forEach(n=>{X7.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function $Xe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function r2e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=bs(),r=vF(),i=hXe(),s=NXe({theme:n,generator:i}),o=e===":root"&&t,a=o?MXe(s):s,l=PXe(a,e);return l?w.jsx("style",{"data-mantine-styles":!0,nonce:r?.(),dangerouslySetInnerHTML:{__html:`${l}${o?"":$Xe(e)}`}}):null}r2e.displayName="@mantine/CssVariables";function FXe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function o_(e,t){const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,r=e!=="auto"?e:n?"dark":"light";t()?.setAttribute("data-mantine-color-scheme",r)}function LXe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=k.useRef(null),[s,o]=k.useState(()=>e.get(t)),a=r||s,l=k.useCallback(c=>{r||(o_(c,n),o(c),e.set(c))},[e.set,a,r]),u=k.useCallback(()=>{o(t),o_(t,n),e.clear()},[e.clear,t]);return k.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),Kv(()=>{o_(e.get(t),n)},[]),k.useEffect(()=>{if(r)return o_(r,n),()=>{};r===void 0&&o_(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&o_(d.matches?"dark":"light",n)};return i.current?.addEventListener("change",c),()=>i.current?.removeEventListener("change",c)},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:u}}function jXe({respectReducedMotion:e,getRootElement:t}){Kv(()=>{e&&t()?.setAttribute("data-respect-reduced-motion","true")},[e])}FXe();function i2e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:u=AXe(),defaultColorScheme:c="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:h,stylesTransform:p,env:m}){const{colorScheme:g,setColorScheme:y,clearColorScheme:v}=LXe({defaultColorScheme:c,forceColorScheme:h,manager:u,getRootElement:d});return jXe({respectReducedMotion:e?.respectReducedMotion||!1,getRootElement:d}),w.jsx(eJ.Provider,{value:{colorScheme:g,setColorScheme:y,clearColorScheme:v,getRootElement:d,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p,env:m},children:w.jsxs(t2e,{theme:e,children:[o&&w.jsx(r2e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&w.jsx(DXe,{}),t]})})}i2e.displayName="@mantine/core/MantineProvider";function Th({classNames:e,styles:t,props:n,stylesCtx:r}){const i=bs();return{resolvedClassNames:yF({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:n6({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const BXe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function zXe({theme:e,options:t,unstyled:n}){return Bt(t?.focusable&&!n&&(e.focusClassName||BXe[e.focusRing]),t?.active&&!n&&e.activeClassName)}function VXe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return yF({theme:i,classNames:n?.classNames,props:n?.props||r,stylesCtx:t})[e]}function Efe({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return yF({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function UXe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function HXe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function qXe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function WXe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>yF({theme:t,classNames:t.components[s]?.classNames,props:r,stylesCtx:i})?.[n])}function GXe({options:e,classes:t,selector:n,unstyled:r}){return e?.variant&&!r?t[`${n}--${e.variant}`]:void 0}function YXe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:u,props:c,stylesCtx:d,withStaticClasses:f,headless:h,transformedStyles:p}){return Bt(zXe({theme:e,options:t,unstyled:a||h}),WXe({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),GXe({options:t,classes:o,selector:r,unstyled:a}),Efe({selector:r,stylesCtx:d,theme:e,classNames:s,props:c}),Efe({selector:r,stylesCtx:d,theme:e,classNames:p,props:c}),VXe({selector:r,stylesCtx:d,options:t,props:c,theme:e}),UXe({rootSelector:u,selector:r,className:l}),HXe({selector:r,classes:o,unstyled:a||h}),f&&!h&&qXe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t?.withStaticClass}),t?.className)}function KXe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>n6({theme:e,styles:e.components[s]?.styles,props:n,stylesCtx:r})[i]).reduce((s,o)=>({...s,...o}),{})}function DW({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...DW({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function XXe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Yv(n[r])}}),t),{})}function QXe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){return XXe([a?{}:t?.(n,r,i),...o.map(l=>n.components?.[l]?.vars?.(n,r,i)),e?.(n,r,i)])?.[s]}function JXe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:u,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&KXe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!f&&n6({theme:e,styles:a,props:i,stylesCtx:s})[n],...!f&&n6({theme:e,styles:r?.styles,props:r?.props||i,stylesCtx:s})[n],...QXe({theme:e,props:i,stylesCtx:s,vars:u,varsResolver:c,selector:n,themeName:t,headless:d}),...o===n?DW({style:l,theme:e}):null,...DW({style:r?.style,theme:e})}}function ZXe({props:e,stylesCtx:t,themeName:n}){const r=bs(),i=vXe()?.();return{getTransformedStyles:o=>i?[...o.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>i(r.components[l]?.styles,{props:e,theme:r,ctx:t}))].filter(Boolean):[],withStylesTransform:!!i}}function Mt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:u,vars:c,varsResolver:d}){const f=bs(),h=pXe(),p=mXe(),m=gXe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=ZXe({props:n,stylesCtx:r,themeName:g});return(b,_)=>({className:YXe({theme:f,options:_,themeName:g,selector:b,classNamesPrefix:h,classNames:l,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([_?.styles,u])}),style:JXe({theme:f,themeName:g,selector:b,options:_,props:n,stylesCtx:r,rootSelector:o,styles:u,style:s,vars:c,varsResolver:d,headless:m,withStylesTransform:y})})}function eQe(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, white ${t*100}%)`;const{r:n,g:r,b:i,a:s}=bF(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function Xv(e,t){return typeof e=="boolean"?e:t.autoContrast}function Cfe(e){const t=document.createElement("style");return t.setAttribute("data-mantine-styles","inline"),t.innerHTML="*, *::before, *::after {transition: none !important;}",t.setAttribute("data-mantine-disable-transition","true"),e&&t.setAttribute("nonce",e),document.head.appendChild(t),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function tQe({keepTransitions:e}={}){const t=k.useRef(e6),n=k.useRef(-1),r=k.useContext(eJ),i=vF(),s=k.useRef(i?.());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const o=d=>{r.setColorScheme(d),t.current=e?()=>{}:Cfe(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{t.current?.()},10)},a=()=>{r.clearColorScheme(),t.current=e?()=>{}:Cfe(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{t.current?.()},10)},l=$Ke("light",{getInitialValueInEffect:!1}),u=r.colorScheme==="auto"?l:r.colorScheme,c=k.useCallback(()=>o(u==="light"?"dark":"light"),[o,u]);return k.useEffect(()=>()=>{t.current?.(),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:o,clearColorScheme:a,toggleColorScheme:c}}function qe(e,t,n){const r=bs(),i=r.components[e]?.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Yv(n)}}function Q7(e){return ji(e).reduce((t,n)=>e[n]!==void 0?`${t}${EKe(n)}:${e[n]};`:t,"").trim()}function nQe({selector:e,styles:t,media:n,container:r}){const i=t?Q7(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Q7(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Q7(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Hw(e){const t=vF();return w.jsx("style",{"data-mantine-styles":"inline",nonce:t?.(),dangerouslySetInnerHTML:{__html:nQe(e)}})}function qw(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:E,opacity:S,ff:T,fz:A,fw:R,lts:I,ta:P,lh:N,fs:M,tt:O,td:j,w:B,miw:H,maw:q,h:G,mih:U,mah:L,bgsz:z,bgp:V,bgr:Y,bga:Q,pos:ne,top:ue,left:se,bottom:ae,right:he,inset:ie,display:le,flex:Ce,hiddenFrom:X,visibleFrom:fe,lightHidden:de,darkHidden:te,sx:ee,...me}=e;return{styleProps:Yv({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:_,c:E,opacity:S,ff:T,fz:A,fw:R,lts:I,ta:P,lh:N,fs:M,tt:O,td:j,w:B,miw:H,maw:q,h:G,mih:U,mah:L,bgsz:z,bgp:V,bgr:Y,bga:Q,pos:ne,top:ue,left:se,bottom:ae,right:he,inset:ie,display:le,flex:Ce,hiddenFrom:X,visibleFrom:fe,lightHidden:de,darkHidden:te,sx:ee}),rest:me}}const rQe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function rJ(e,t){const n=Sh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function iQe(e,t){const n=Sh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:rJ(e,t)}function sQe(e,t){if(typeof e=="number")return Ye(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ye(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${rJ(i.join(" "),t)}`),s.trim()}return e}const Sfe={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function oQe(e){return typeof e=="string"&&e in Sfe?Sfe[e]:e}const aQe=["h1","h2","h3","h4","h5","h6"];function lQe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&aQe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ye(e):e}function uQe(e){return e}const cQe=["h1","h2","h3","h4","h5","h6"];function dQe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&cQe.includes(e)?`var(--mantine-${e}-line-height)`:e}function fQe(e){return typeof e=="number"?Ye(e):e}function hQe(e,t){if(typeof e=="number")return Ye(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ye(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const J7={color:rJ,textColor:iQe,fontSize:lQe,spacing:hQe,identity:uQe,size:fQe,lineHeight:dQe,fontFamily:oQe,border:sQe};function Tfe(e){return e.replace("(min-width: ","").replace("em)","")}function pQe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Tfe(i))-Number(Tfe(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function mQe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function gQe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function yQe(e){return typeof e=="object"&&e!==null?ji(e).filter(t=>t!=="base"):[]}function vQe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function s2e({styleProps:e,data:t,theme:n}){return pQe(ji(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=gQe(e[i]);if(!mQe(e[i]))return o.forEach(u=>{r.inlineStyles[u]=J7[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=yQe(e[i]);return o.forEach(u=>{a&&(r.styles[u]=J7[s.type](a,n)),l.forEach(c=>{const d=`(min-width: ${n.breakpoints[c]})`;r.media[d]={...r.media[d],[u]:J7[s.type](vQe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function uR(){return`__m__-${k.useId().replace(/:/g,"")}`}function iJ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...iJ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function o2e(e){return e.startsWith("data-")?e:`data-${e}`}function bQe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[o2e(n)]=e[n]),t},{})}function a2e(e){return e?typeof e=="string"?{[o2e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...a2e(n)}),{}):bQe(e):null}function PW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...PW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function wQe({theme:e,style:t,vars:n,styleProps:r}){const i=PW(t,e),s=PW(n,e);return{...i,...s,...r}}const l2e=k.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:d,__size:f,...h},p)=>{const m=bs(),g=e||"div",{styleProps:y,rest:v}=qw(h),_=yXe()?.()?.(y.sx),E=uR(),S=s2e({styleProps:y,theme:m,data:rQe}),T={ref:p,style:wQe({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Bt(r,_,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":zTe(o)?void 0:o||void 0,size:f,...a2e(s),...v};return w.jsxs(w.Fragment,{children:[S.hasResponsiveStyles&&w.jsx(Hw,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof d=="function"?d(T):w.jsx(g,{...T})]})});l2e.displayName="@mantine/core/Box";const De=l2e;function u2e(e){return e}function c2e(e){const t=e;return n=>{const r=k.forwardRef((i,s)=>w.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function tt(e){const t=k.forwardRef(e);return t.extend=u2e,t.withProps=n=>{const r=k.forwardRef((i,s)=>w.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function co(e){const t=k.forwardRef(e);return t.withProps=n=>{const r=k.forwardRef((i,s)=>w.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=u2e,t}const xQe=k.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function fc(){return k.useContext(xQe)}var Ip=OTe();const U2=Ao(Ip);function _Qe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Z7(e){return e?.current?e.current.scrollHeight:"auto"}const HT=typeof window<"u"&&window.requestAnimationFrame;function EQe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=k.useRef(null),s=0,o={height:0,overflow:"hidden"},[a,l]=k.useState(r?{}:o),u=p=>{Ip.flushSync(()=>l(p))},c=p=>{u(m=>({...m,...p}))};function d(p){const m=e||_Qe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}fu(()=>{typeof HT=="function"&&HT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),HT(()=>{const p=Z7(i);c({...d(p),height:p})})}:()=>{const p=Z7(i);c({...d(p),willChange:"height",height:p}),HT(()=>c({height:s,overflow:"hidden"}))})},[r]);const f=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=Z7(i);m===a.height?u({}):c({height:m}),n()}else a.height===s&&(u(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m],v={"aria-hidden":!r,...g,[m]:XTe(i,y),onTransitionEnd:f,style:{boxSizing:"border-box",...p,...a}};return bn.version.startsWith("18")?r||(v.inert=""):v.inert=!r,v}return h}const CQe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},vm=tt((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:l,...u}=qe("Collapse",CQe,e),c=bs(),d=mF(),h=(c.respectReducedMotion?d:!1)?0:i,p=EQe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?w.jsx(De,{...u,children:n}):null:w.jsx(De,{...p({style:{opacity:r||!l?1:0,transition:l?`opacity ${h}ms ${s}`:"none",...iJ(o,c)},ref:t,...u}),children:n})});vm.displayName="@mantine/core/Collapse";function wF(){return typeof window<"u"}function WC(e){return d2e(e)?(e.nodeName||"").toLowerCase():"#document"}function Zu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bm(e){var t;return(t=(d2e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function d2e(e){return wF()?e instanceof Node||e instanceof Zu(e).Node:!1}function ns(e){return wF()?e instanceof Element||e instanceof Zu(e).Element:!1}function Hc(e){return wF()?e instanceof HTMLElement||e instanceof Zu(e).HTMLElement:!1}function OW(e){return!wF()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zu(e).ShadowRoot}const SQe=new Set(["inline","contents"]);function cR(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Wd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!SQe.has(i)}const TQe=new Set(["table","td","th"]);function AQe(e){return TQe.has(WC(e))}const kQe=[":popover-open",":modal"];function xF(e){return kQe.some(t=>{try{return e.matches(t)}catch{return!1}})}const IQe=["transform","translate","scale","rotate","perspective"],RQe=["transform","translate","scale","rotate","perspective","filter"],DQe=["paint","layout","strict","content"];function sJ(e){const t=_F(),n=ns(e)?Wd(e):e;return IQe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||RQe.some(r=>(n.willChange||"").includes(r))||DQe.some(r=>(n.contain||"").includes(r))}function PQe(e){let t=Bg(e);for(;Hc(t)&&!pv(t);){if(sJ(t))return t;if(xF(t))return null;t=Bg(t)}return null}function _F(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OQe=new Set(["html","body","#document"]);function pv(e){return OQe.has(WC(e))}function Wd(e){return Zu(e).getComputedStyle(e)}function EF(e){return ns(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Bg(e){if(WC(e)==="html")return e;const t=e.assignedSlot||e.parentNode||OW(e)&&e.host||bm(e);return OW(t)?t.host:t}function f2e(e){const t=Bg(e);return pv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hc(t)&&cR(t)?t:f2e(t)}function Tg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=f2e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Zu(i);if(s){const a=NW(o);return t.concat(o,o.visualViewport||[],cR(i)?i:[],a&&n?Tg(a):[])}return t.concat(i,Tg(i,[],n))}function NW(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Afe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Rk(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&OW(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function h2e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function p2e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function NQe(e){return FQe()?!1:!kfe()&&e.width===0&&e.height===0||kfe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function MQe(){return/apple/i.test(navigator.vendor)}function kfe(){const e=/android/i;return e.test(h2e())||e.test(p2e())}function $Qe(){return h2e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function FQe(){return p2e().includes("jsdom/")}function MW(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function LQe(e){return"nativeEvent"in e}function jQe(e){return e.matches("html,body")}function Ab(e){return e?.ownerDocument||document}function ez(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function F_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const BQe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function zQe(e){return Hc(e)&&e.matches(BQe)}const hh=Math.min,yl=Math.max,r6=Math.round,_3=Math.floor,Np=e=>({x:e,y:e}),VQe={left:"right",right:"left",bottom:"top",top:"bottom"},UQe={start:"end",end:"start"};function $W(e,t,n){return yl(e,hh(t,n))}function zg(e,t){return typeof e=="function"?e(t):e}function ph(e){return e.split("-")[0]}function GC(e){return e.split("-")[1]}function oJ(e){return e==="x"?"y":"x"}function aJ(e){return e==="y"?"height":"width"}const HQe=new Set(["top","bottom"]);function Gf(e){return HQe.has(ph(e))?"y":"x"}function lJ(e){return oJ(Gf(e))}function qQe(e,t,n){n===void 0&&(n=!1);const r=GC(e),i=lJ(e),s=aJ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=i6(o)),[o,i6(o)]}function WQe(e){const t=i6(e);return[FW(e),t,FW(t)]}function FW(e){return e.replace(/start|end/g,t=>UQe[t])}const Ife=["left","right"],Rfe=["right","left"],GQe=["top","bottom"],YQe=["bottom","top"];function KQe(e,t,n){switch(e){case"top":case"bottom":return n?t?Rfe:Ife:t?Ife:Rfe;case"left":case"right":return t?GQe:YQe;default:return[]}}function XQe(e,t,n,r){const i=GC(e);let s=KQe(ph(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(FW)))),s}function i6(e){return e.replace(/left|right|bottom|top/g,t=>VQe[t])}function QQe(e){return{top:0,right:0,bottom:0,left:0,...e}}function uJ(e){return typeof e!="number"?QQe(e):{top:e,right:e,bottom:e,left:e}}function VE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Dfe(e,t,n){let{reference:r,floating:i}=e;const s=Gf(t),o=lJ(t),a=aJ(o),l=ph(t),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(GC(t)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const JQe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Dfe(u,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:_,reset:E}=await y({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});c=v??c,d=b??d,h={...h,[g]:{...h[g],..._}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:d}=Dfe(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function cJ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=zg(t,e),p=uJ(h),g=a[f?d==="floating"?"reference":"floating":d],y=VE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),v=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=VE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:l}):v);return{top:(y.top-E.top+p.top)/_.y,bottom:(E.bottom-y.bottom+p.bottom)/_.y,left:(y.left-E.left+p.left)/_.x,right:(E.right-y.right+p.right)/_.x}}const ZQe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=zg(e,t)||{};if(u==null)return{};const d=uJ(c),f={x:n,y:r},h=lJ(i),p=aJ(h),m=await o.getDimensions(u),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[h]-f[h]-s.floating[p],E=f[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const A=_/2-E/2,R=T/2-m[p]/2-1,I=hh(d[y],R),P=hh(d[v],R),N=I,M=T-m[p]-P,O=T/2-m[p]/2+A,j=$W(N,O,M),B=!l.arrow&&GC(i)!=null&&O!==j&&s.reference[p]/2-(O<N?I:P)-m[p]/2<0,H=B?O<N?O-N:O-M:0;return{[h]:f[h]+H,data:{[h]:j,centerOffset:O-j-H,...B&&{alignmentOffset:H}},reset:B}}}),eJe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=zg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ph(i),v=Gf(a),b=ph(a)===a,_=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=f||(b||!m?[i6(a)]:WQe(a)),S=p!=="none";!f&&S&&E.push(...XQe(a,m,p,_));const T=[a,...E],A=await cJ(t,g),R=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&R.push(A[y]),d){const O=qQe(i,o,_);R.push(A[O[0]],A[O[1]])}if(I=[...I,{placement:i,overflows:R}],!R.every(O=>O<=0)){var P,N;const O=(((P=s.flip)==null?void 0:P.index)||0)+1,j=T[O];if(j&&(!(d==="alignment"?v!==Gf(j):!1)||I.every(q=>Gf(q.placement)===v?q.overflows[0]>0:!0)))return{data:{index:O,overflows:I},reset:{placement:j}};let B=(N=I.filter(H=>H.overflows[0]<=0).sort((H,q)=>H.overflows[1]-q.overflows[1])[0])==null?void 0:N.placement;if(!B)switch(h){case"bestFit":{var M;const H=(M=I.filter(q=>{if(S){const G=Gf(q.placement);return G===v||G==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(G=>G>0).reduce((G,U)=>G+U,0)]).sort((q,G)=>q[1]-G[1])[0])==null?void 0:M[0];H&&(B=H);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function m2e(e){const t=hh(...e.map(s=>s.left)),n=hh(...e.map(s=>s.top)),r=yl(...e.map(s=>s.right)),i=yl(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function tJe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>VE(m2e(i)))}const nJe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:u}=zg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),d=tJe(c),f=VE(m2e(c)),h=uJ(a);function p(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&u!=null)return d.find(g=>l>g.left-h.left&&l<g.right+h.right&&u>g.top-h.top&&u<g.bottom+h.bottom)||f;if(d.length>=2){if(Gf(n)==="y"){const I=d[0],P=d[d.length-1],N=ph(n)==="top",M=I.top,O=P.bottom,j=N?I.left:P.left,B=N?I.right:P.right,H=B-j,q=O-M;return{top:M,bottom:O,left:j,right:B,width:H,height:q,x:j,y:M}}const g=ph(n)==="left",y=yl(...d.map(I=>I.right)),v=hh(...d.map(I=>I.left)),b=d.filter(I=>g?I.left===v:I.right===y),_=b[0].top,E=b[b.length-1].bottom,S=v,T=y,A=T-S,R=E-_;return{top:_,bottom:E,left:S,right:T,width:A,height:R,x:S,y:_}}return f}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}},g2e=new Set(["left","top"]);async function rJe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ph(n),a=GC(n),l=Gf(n)==="y",u=g2e.has(o)?-1:1,c=s&&l?-1:1,d=zg(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const iJe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await rJe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},sJe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...l}=zg(e,t),u={x:n,y:r},c=await cJ(t,l),d=Gf(ph(i)),f=oJ(d);let h=u[f],p=u[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=$W(v,h,b)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=$W(v,p,b)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[d]:o}}}}}},oJe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=zg(e,t),c={x:n,y:r},d=Gf(i),f=oJ(d);let h=c[f],p=c[d];const m=zg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const b=f==="y"?"height":"width",_=s.reference[f]-s.floating[b]+g.mainAxis,E=s.reference[f]+s.reference[b]-g.mainAxis;h<_?h=_:h>E&&(h=E)}if(u){var y,v;const b=f==="y"?"width":"height",_=g2e.has(ph(i)),E=s.reference[d]-s.floating[b]+(_&&((y=o.offset)==null?void 0:y[d])||0)+(_?0:g.crossAxis),S=s.reference[d]+s.reference[b]+(_?0:((v=o.offset)==null?void 0:v[d])||0)-(_?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[f]:h,[d]:p}}}},aJe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...u}=zg(e,t),c=await cJ(t,u),d=ph(i),f=GC(i),h=Gf(i)==="y",{width:p,height:m}=s.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,g=f==="end"?"top":"bottom");const v=m-c.top-c.bottom,b=p-c.left-c.right,_=hh(m-c[g],v),E=hh(p-c[y],b),S=!t.middlewareData.shift;let T=_,A=E;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(A=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(T=v),S&&!f){const I=yl(c.left,0),P=yl(c.right,0),N=yl(c.top,0),M=yl(c.bottom,0);h?A=p-2*(I!==0||P!==0?I+P:yl(c.left,c.right)):T=m-2*(N!==0||M!==0?N+M:yl(c.top,c.bottom))}await l({...t,availableWidth:A,availableHeight:T});const R=await o.getDimensions(a.floating);return p!==R.width||m!==R.height?{reset:{rects:!0}}:{}}}};function y2e(e){const t=Wd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Hc(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=r6(n)!==s||r6(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function dJ(e){return ns(e)?e:e.contextElement}function hE(e){const t=dJ(e);if(!Hc(t))return Np(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=y2e(t);let o=(s?r6(n.width):n.width)/r,a=(s?r6(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const lJe=Np(0);function v2e(e){const t=Zu(e);return!_F()||!t.visualViewport?lJe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function uJe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Zu(e)?!1:t}function iw(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=dJ(e);let o=Np(1);t&&(r?ns(r)&&(o=hE(r)):o=hE(e));const a=uJe(s,n,r)?v2e(s):Np(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=Zu(s),h=r&&ns(r)?Zu(r):r;let p=f,m=NW(p);for(;m&&r&&h!==p;){const g=hE(m),y=m.getBoundingClientRect(),v=Wd(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,_=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=b,u+=_,p=Zu(m),m=NW(p)}}return VE({width:c,height:d,x:l,y:u})}function CF(e,t){const n=EF(e).scrollLeft;return t?t.left+n:iw(bm(e)).left+n}function b2e(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-CF(e,n),i=n.top+t.scrollTop;return{x:r,y:i}}function cJe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=bm(r),a=t?xF(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=Np(1);const c=Np(0),d=Hc(r);if((d||!d&&!s)&&((WC(r)!=="body"||cR(o))&&(l=EF(r)),Hc(r))){const h=iw(r);u=hE(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}const f=o&&!d&&!s?b2e(o,l):Np(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}}function dJe(e){return Array.from(e.getClientRects())}function fJe(e){const t=bm(e),n=EF(e),r=e.ownerDocument.body,i=yl(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=yl(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+CF(e);const a=-n.scrollTop;return Wd(r).direction==="rtl"&&(o+=yl(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const Pfe=25;function hJe(e,t){const n=Zu(e),r=bm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=_F();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const u=CF(r);if(u<=0){const c=r.ownerDocument,d=c.body,f=getComputedStyle(d),h=c.compatMode==="CSS1Compat"&&parseFloat(f.marginLeft)+parseFloat(f.marginRight)||0,p=Math.abs(r.clientWidth-d.clientWidth-h);p<=Pfe&&(s-=p)}else u<=Pfe&&(s+=u);return{width:s,height:o,x:a,y:l}}const pJe=new Set(["absolute","fixed"]);function mJe(e,t){const n=iw(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Hc(e)?hE(e):Np(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function Ofe(e,t,n){let r;if(t==="viewport")r=hJe(e,n);else if(t==="document")r=fJe(bm(e));else if(ns(t))r=mJe(t,n);else{const i=v2e(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return VE(r)}function w2e(e,t){const n=Bg(e);return n===t||!ns(n)||pv(n)?!1:Wd(n).position==="fixed"||w2e(n,t)}function gJe(e,t){const n=t.get(e);if(n)return n;let r=Tg(e,[],!1).filter(a=>ns(a)&&WC(a)!=="body"),i=null;const s=Wd(e).position==="fixed";let o=s?Bg(e):e;for(;ns(o)&&!pv(o);){const a=Wd(o),l=sJ(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&pJe.has(i.position)||cR(o)&&!l&&w2e(e,o))?r=r.filter(c=>c!==o):i=a,o=Bg(o)}return t.set(e,r),r}function yJe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?xF(t)?[]:gJe(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=Ofe(t,c,i);return u.top=yl(d.top,u.top),u.right=hh(d.right,u.right),u.bottom=hh(d.bottom,u.bottom),u.left=yl(d.left,u.left),u},Ofe(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function vJe(e){const{width:t,height:n}=y2e(e);return{width:t,height:n}}function bJe(e,t,n){const r=Hc(t),i=bm(t),s=n==="fixed",o=iw(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Np(0);function u(){l.x=CF(i)}if(r||!r&&!s)if((WC(t)!=="body"||cR(i))&&(a=EF(t)),r){const h=iw(t,!0,s,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&u();s&&!r&&i&&u();const c=i&&!r&&!s?b2e(i,a):Np(0),d=o.left+a.scrollLeft-l.x-c.x,f=o.top+a.scrollTop-l.y-c.y;return{x:d,y:f,width:o.width,height:o.height}}function tz(e){return Wd(e).position==="static"}function Nfe(e,t){if(!Hc(e)||Wd(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return bm(e)===n&&(n=n.ownerDocument.body),n}function x2e(e,t){const n=Zu(e);if(xF(e))return n;if(!Hc(e)){let i=Bg(e);for(;i&&!pv(i);){if(ns(i)&&!tz(i))return i;i=Bg(i)}return n}let r=Nfe(e,t);for(;r&&AQe(r)&&tz(r);)r=Nfe(r,t);return r&&pv(r)&&tz(r)&&!sJ(r)?n:r||PQe(e)||n}const wJe=async function(e){const t=this.getOffsetParent||x2e,n=this.getDimensions,r=await n(e.floating);return{reference:bJe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function xJe(e){return Wd(e).direction==="rtl"}const _Je={convertOffsetParentRelativeRectToViewportRelativeRect:cJe,getDocumentElement:bm,getClippingRect:yJe,getOffsetParent:x2e,getElementRects:wJe,getClientRects:dJe,getDimensions:vJe,getScale:hE,isElement:ns,isRTL:xJe};function _2e(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function EJe(e,t){let n=null,r;const i=bm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const u=e.getBoundingClientRect(),{left:c,top:d,width:f,height:h}=u;if(a||t(),!f||!h)return;const p=_3(d),m=_3(i.clientWidth-(c+f)),g=_3(i.clientHeight-(d+h)),y=_3(c),b={rootMargin:-p+"px "+-m+"px "+-g+"px "+-y+"px",threshold:yl(0,hh(1,l))||1};let _=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!_)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!_2e(u,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function CJe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=dJ(e),c=i||s?[...u?Tg(u):[],...Tg(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&a?EJe(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?iw(e):null;l&&g();function g(){const y=iw(e);m&&!_2e(m,y)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d?.(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const SJe=iJe,TJe=sJe,AJe=eJe,kJe=aJe,Mfe=ZQe,IJe=nJe,RJe=oJe,DJe=(e,t,n)=>{const r=new Map,i={platform:_Je,...n},s={...i.platform,_c:r};return JQe(e,t,{...i,platform:s})};var PJe=typeof document<"u",OJe=function(){},e4=PJe?k.useLayoutEffect:OJe;function s6(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!s6(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!s6(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function E2e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $fe(e,t){const n=E2e(e);return Math.round(t*n)/n}function nz(e){const t=k.useRef(e);return e4(()=>{t.current=e}),t}function NJe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=k.useState(r);s6(f,r)||h(r);const[p,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(q=>{q!==S.current&&(S.current=q,m(q))},[]),b=k.useCallback(q=>{q!==T.current&&(T.current=q,y(q))},[]),_=s||p,E=o||g,S=k.useRef(null),T=k.useRef(null),A=k.useRef(c),R=l!=null,I=nz(l),P=nz(i),N=nz(u),M=k.useCallback(()=>{if(!S.current||!T.current)return;const q={placement:t,strategy:n,middleware:f};P.current&&(q.platform=P.current),DJe(S.current,T.current,q).then(G=>{const U={...G,isPositioned:N.current!==!1};O.current&&!s6(A.current,U)&&(A.current=U,Ip.flushSync(()=>{d(U)}))})},[f,t,n,P,N]);e4(()=>{u===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,d(q=>({...q,isPositioned:!1})))},[u]);const O=k.useRef(!1);e4(()=>(O.current=!0,()=>{O.current=!1}),[]),e4(()=>{if(_&&(S.current=_),E&&(T.current=E),_&&E){if(I.current)return I.current(_,E,M);M()}},[_,E,M,I,R]);const j=k.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),B=k.useMemo(()=>({reference:_,floating:E}),[_,E]),H=k.useMemo(()=>{const q={position:n,left:0,top:0};if(!B.floating)return q;const G=$fe(B.floating,c.x),U=$fe(B.floating,c.y);return a?{...q,transform:"translate("+G+"px, "+U+"px)",...E2e(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:G,top:U}},[n,a,B.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:M,refs:j,elements:B,floatingStyles:H}),[c,M,j,B,H])}const MJe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Mfe({element:r.current,padding:i}).fn(n):{}:r?Mfe({element:r,padding:i}).fn(n):{}}}},C2e=(e,t)=>({...SJe(e),options:[e,t]}),fJ=(e,t)=>({...TJe(e),options:[e,t]}),Ffe=(e,t)=>({...RJe(e),options:[e,t]}),o6=(e,t)=>({...AJe(e),options:[e,t]}),$Je=(e,t)=>({...kJe(e),options:[e,t]}),MA=(e,t)=>({...IJe(e),options:[e,t]}),S2e=(e,t)=>({...MJe(e),options:[e,t]});function FJe(e){return k.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const T2e={...NYe},LJe=T2e.useInsertionEffect,jJe=LJe||(e=>e());function ug(e){const t=k.useRef(()=>{});return jJe(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Mp=typeof document<"u"?k.useLayoutEffect:k.useEffect;let Lfe=!1,BJe=0;const jfe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+BJe++;function zJe(){const[e,t]=k.useState(()=>Lfe?jfe():void 0);return Mp(()=>{e==null&&t(jfe())},[]),k.useEffect(()=>{Lfe=!0},[]),e}const VJe=T2e.useId,A2e=VJe||zJe;function UJe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const HJe=k.createContext(null),qJe=k.createContext(null),hJ=()=>{var e;return((e=k.useContext(HJe))==null?void 0:e.id)||null},pJ=()=>k.useContext(qJe);function mJ(e){return"data-floating-ui-"+e}function rz(e){const t=k.useRef(e);return Mp(()=>{t.current=e}),t}const Bfe=mJ("safe-polygon");function t4(e,t,n){return n&&!MW(n)?0:typeof e=="number"?e:e?.[t]}function WJe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:d=0,move:f=!0}=t,h=pJ(),p=hJ(),m=rz(u),g=rz(l),y=rz(n),v=k.useRef(),b=k.useRef(-1),_=k.useRef(),E=k.useRef(-1),S=k.useRef(!0),T=k.useRef(!1),A=k.useRef(()=>{}),R=k.useRef(!1),I=k.useCallback(()=>{var H;const q=(H=i.current.openEvent)==null?void 0:H.type;return q?.includes("mouse")&&q!=="mousedown"},[i]);k.useEffect(()=>{if(!a)return;function H(q){let{open:G}=q;G||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0,R.current=!1)}return s.on("openchange",H),()=>{s.off("openchange",H)}},[a,s]),k.useEffect(()=>{if(!a||!m.current||!n)return;function H(G){I()&&r(!1,G,"hover")}const q=Ab(o.floating).documentElement;return q.addEventListener("mouseleave",H),()=>{q.removeEventListener("mouseleave",H)}},[o.floating,n,r,a,m,I]);const P=k.useCallback(function(H,q,G){q===void 0&&(q=!0),G===void 0&&(G="hover");const U=t4(g.current,"close",v.current);U&&!_.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,H,G),U)):q&&(clearTimeout(b.current),r(!1,H,G))},[g,r]),N=ug(()=>{A.current(),_.current=void 0}),M=ug(()=>{if(T.current){const H=Ab(o.floating).body;H.style.pointerEvents="",H.removeAttribute(Bfe),T.current=!1}}),O=ug(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);k.useEffect(()=>{if(!a)return;function H(L){if(clearTimeout(b.current),S.current=!1,c&&!MW(v.current)||d>0&&!t4(g.current,"open"))return;const z=t4(g.current,"open",v.current);z?b.current=window.setTimeout(()=>{y.current||r(!0,L,"hover")},z):n||r(!0,L,"hover")}function q(L){if(O())return;A.current();const z=Ab(o.floating);if(clearTimeout(E.current),R.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(b.current),_.current=m.current({...i.current.floatingContext,tree:h,x:L.clientX,y:L.clientY,onClose(){M(),N(),O()||P(L,!0,"safe-polygon")}});const Y=_.current;z.addEventListener("mousemove",Y),A.current=()=>{z.removeEventListener("mousemove",Y)};return}(v.current==="touch"?!Rk(o.floating,L.relatedTarget):!0)&&P(L)}function G(L){O()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:L.clientX,y:L.clientY,onClose(){M(),N(),O()||P(L)}})(L))}if(ns(o.domReference)){var U;const L=o.domReference;return n&&L.addEventListener("mouseleave",G),(U=o.floating)==null||U.addEventListener("mouseleave",G),f&&L.addEventListener("mousemove",H,{once:!0}),L.addEventListener("mouseenter",H),L.addEventListener("mouseleave",q),()=>{var z;n&&L.removeEventListener("mouseleave",G),(z=o.floating)==null||z.removeEventListener("mouseleave",G),f&&L.removeEventListener("mousemove",H),L.removeEventListener("mouseenter",H),L.removeEventListener("mouseleave",q)}}},[o,a,e,c,d,f,P,N,M,r,n,y,h,g,m,i,O]),Mp(()=>{var H;if(a&&n&&(H=m.current)!=null&&H.__options.blockPointerEvents&&I()){T.current=!0;const G=o.floating;if(ns(o.domReference)&&G){var q;const U=Ab(o.floating).body;U.setAttribute(Bfe,"");const L=o.domReference,z=h==null||(q=h.nodesRef.current.find(V=>V.id===p))==null||(q=q.context)==null?void 0:q.elements.floating;return z&&(z.style.pointerEvents=""),U.style.pointerEvents="none",L.style.pointerEvents="auto",G.style.pointerEvents="auto",()=>{U.style.pointerEvents="",L.style.pointerEvents="",G.style.pointerEvents=""}}}},[a,n,p,o,h,m,I]),Mp(()=>{n||(v.current=void 0,R.current=!1,N(),M())},[n,N,M]),k.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),M()},[a,o.domReference,N,M]);const j=k.useMemo(()=>{function H(q){v.current=q.pointerType}return{onPointerDown:H,onPointerEnter:H,onMouseMove(q){const{nativeEvent:G}=q;function U(){!S.current&&!y.current&&r(!0,G,"hover")}c&&!MW(v.current)||n||d===0||R.current&&q.movementX**2+q.movementY**2<2||(clearTimeout(E.current),v.current==="touch"?U():(R.current=!0,E.current=window.setTimeout(U,d)))}}},[c,r,n,y,d]),B=k.useMemo(()=>({onMouseEnter(){clearTimeout(b.current)},onMouseLeave(H){O()||P(H.nativeEvent,!1)}}),[P,O]);return k.useMemo(()=>a?{reference:j,floating:B}:{},[a,j,B])}const LW=()=>{},k2e=k.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:LW,setState:LW,isInstantPhase:!1}),GJe=()=>k.useContext(k2e);function YJe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=k.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=k.useRef(null),a=k.useCallback(l=>{s({currentId:l})},[]);return Mp(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),k.createElement(k2e.Provider,{value:k.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function KJe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,l=GJe(),{currentId:u,setCurrentId:c,initialDelay:d,setState:f,timeoutMs:h}=l;return Mp(()=>{o&&u&&(f({delay:{open:1,close:t4(d,"close")}}),u!==a&&r(!1))},[o,a,r,f,u,d]),Mp(()=>{function p(){r(!1),f({delay:d,currentId:null})}if(o&&u&&!n&&u===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,f,u,a,r,d,h]),Mp(()=>{o&&(c===LW||!n||c(a))},[o,n,c,a]),l}function iz(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const XJe="data-floating-ui-focusable",QJe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},JJe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},zfe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e?.outsidePress)!=null?n:!0}};function ZJe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,m=pJ(),g=ug(typeof l=="function"?l:()=>!1),y=typeof l=="function"?g:l,v=k.useRef(!1),b=k.useRef(!1),{escapeKey:_,outsidePress:E}=zfe(h),{escapeKey:S,outsidePress:T}=zfe(p),A=k.useRef(!1),R=ug(j=>{var B;if(!n||!o||!a||j.key!=="Escape"||A.current)return;const H=(B=s.current.floatingContext)==null?void 0:B.nodeId,q=m?iz(m.nodesRef.current,H):[];if(!_&&(j.stopPropagation(),q.length>0)){let G=!0;if(q.forEach(U=>{var L;if((L=U.context)!=null&&L.open&&!U.context.dataRef.current.__escapeKeyBubbles){G=!1;return}}),!G)return}r(!1,LQe(j)?j.nativeEvent:j,"escape-key")}),I=ug(j=>{var B;const H=()=>{var q;R(j),(q=F_(j))==null||q.removeEventListener("keydown",H)};(B=F_(j))==null||B.addEventListener("keydown",H)}),P=ug(j=>{var B;const H=v.current;v.current=!1;const q=b.current;if(b.current=!1,u==="click"&&q||H||typeof y=="function"&&!y(j))return;const G=F_(j),U="["+mJ("inert")+"]",L=Ab(i.floating).querySelectorAll(U);let z=ns(G)?G:null;for(;z&&!pv(z);){const ne=Bg(z);if(pv(ne)||!ns(ne))break;z=ne}if(L.length&&ns(G)&&!jQe(G)&&!Rk(G,i.floating)&&Array.from(L).every(ne=>!Rk(z,ne)))return;if(Hc(G)&&O){const ne=G.clientWidth>0&&G.scrollWidth>G.clientWidth,ue=G.clientHeight>0&&G.scrollHeight>G.clientHeight;let se=ue&&j.offsetX>G.clientWidth;if(ue&&Wd(G).direction==="rtl"&&(se=j.offsetX<=G.offsetWidth-G.clientWidth),se||ne&&j.offsetY>G.clientHeight)return}const V=(B=s.current.floatingContext)==null?void 0:B.nodeId,Y=m&&iz(m.nodesRef.current,V).some(ne=>{var ue;return ez(j,(ue=ne.context)==null?void 0:ue.elements.floating)});if(ez(j,i.floating)||ez(j,i.domReference)||Y)return;const Q=m?iz(m.nodesRef.current,V):[];if(Q.length>0){let ne=!0;if(Q.forEach(ue=>{var se;if((se=ue.context)!=null&&se.open&&!ue.context.dataRef.current.__outsidePressBubbles){ne=!1;return}}),!ne)return}r(!1,j,"outside-press")}),N=ug(j=>{var B;const H=()=>{var q;P(j),(q=F_(j))==null||q.removeEventListener(u,H)};(B=F_(j))==null||B.addEventListener(u,H)});k.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=_,s.current.__outsidePressBubbles=E;let j=-1;function B(L){r(!1,L,"ancestor-scroll")}function H(){window.clearTimeout(j),A.current=!0}function q(){j=window.setTimeout(()=>{A.current=!1},_F()?5:0)}const G=Ab(i.floating);a&&(G.addEventListener("keydown",S?I:R,S),G.addEventListener("compositionstart",H),G.addEventListener("compositionend",q)),y&&G.addEventListener(u,T?N:P,T);let U=[];return f&&(ns(i.domReference)&&(U=Tg(i.domReference)),ns(i.floating)&&(U=U.concat(Tg(i.floating))),!ns(i.reference)&&i.reference&&i.reference.contextElement&&(U=U.concat(Tg(i.reference.contextElement)))),U=U.filter(L=>{var z;return L!==((z=G.defaultView)==null?void 0:z.visualViewport)}),U.forEach(L=>{L.addEventListener("scroll",B,{passive:!0})}),()=>{a&&(G.removeEventListener("keydown",S?I:R,S),G.removeEventListener("compositionstart",H),G.removeEventListener("compositionend",q)),y&&G.removeEventListener(u,T?N:P,T),U.forEach(L=>{L.removeEventListener("scroll",B)}),window.clearTimeout(j)}},[s,i,a,y,u,n,r,f,o,_,E,R,S,I,P,T,N]),k.useEffect(()=>{v.current=!1},[y,u]);const M=k.useMemo(()=>({onKeyDown:R,[QJe[d]]:j=>{c&&r(!1,j.nativeEvent,"reference-press")}}),[R,r,c,d]),O=k.useMemo(()=>({onKeyDown:R,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[JJe[u]]:()=>{v.current=!0}}),[R,u]);return k.useMemo(()=>o?{reference:M,floating:O}:{},[o,M,O])}function eZe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=A2e(),s=k.useRef({}),[o]=k.useState(()=>UJe()),a=hJ()!=null,[l,u]=k.useState(r.reference),c=ug((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n?.(h,p,m)}),d=k.useMemo(()=>({setPositionReference:u}),[]),f=k.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return k.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:f,events:o,floatingId:i,refs:d}),[t,c,f,o,i,d])}function gJ(e){e===void 0&&(e={});const{nodeId:t}=e,n=eZe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=k.useState(null),[a,l]=k.useState(null),c=i?.domReference||s,d=k.useRef(null),f=pJ();Mp(()=>{c&&(d.current=c)},[c]);const h=NJe({...e,elements:{...i,...a&&{reference:a}}}),p=k.useCallback(b=>{const _=ns(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;l(_),h.refs.setReference(_)},[h.refs]),m=k.useCallback(b=>{(ns(b)||b===null)&&(d.current=b,o(b)),(ns(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!ns(b))&&h.refs.setReference(b)},[h.refs]),g=k.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),y=k.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=k.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Mp(()=>{r.dataRef.current.floatingContext=v;const b=f?.nodesRef.current.find(_=>_.id===t);b&&(b.context=v)}),k.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function tZe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:l=!0}=t,u=k.useRef(!1),c=k.useRef(),d=k.useRef(!0);k.useEffect(()=>{if(!a)return;const h=Zu(o.domReference);function p(){!n&&Hc(o.domReference)&&o.domReference===Afe(Ab(o.domReference))&&(u.current=!0)}function m(){d.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),k.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(u.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),k.useEffect(()=>()=>{clearTimeout(c.current)},[]);const f=k.useMemo(()=>({onPointerDown(h){NQe(h.nativeEvent)||(d.current=!1)},onMouseLeave(){u.current=!1},onFocus(h){if(u.current)return;const p=F_(h.nativeEvent);if(l&&ns(p))try{if(MQe()&&$Qe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!d.current&&!zQe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){u.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=ns(p)&&p.hasAttribute(mJ("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var y;const v=Afe(o.domReference?o.domReference.ownerDocument:document);!p&&v===o.domReference||Rk((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,v)||Rk(o.domReference,v)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,l]);return k.useMemo(()=>a?{reference:f}:{},[a,f])}const Vfe="active",Ufe="selected";function sz(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Vfe]:o,[Ufe]:a,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1,[XJe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[Vfe,Ufe].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),o[u]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(u))==null?void 0:f.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[u]=c}),o),{})}}function nZe(e){e===void 0&&(e=[]);const t=e.map(a=>a?.reference),n=e.map(a=>a?.floating),r=e.map(a=>a?.item),i=k.useCallback(a=>sz(a,e,"reference"),t),s=k.useCallback(a=>sz(a,e,"floating"),n),o=k.useCallback(a=>sz(a,e,"item"),r);return k.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const rZe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function iZe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=rZe.get(o))!=null?n:o,l=A2e(),c=hJ()!=null,d=k.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,l,o]),f=k.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,i,l,o]),h=k.useCallback(p=>{let{active:m,selected:g}=p;const y={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...y,"aria-selected":m&&g};case"combobox":return{...y,...m&&{"aria-selected":!0}}}return{}},[i,o]);return k.useMemo(()=>s?{reference:d,floating:f,item:h}:{},[s,d,f,h])}const[sZe,af]=Qo("ScrollArea.Root component was not found in tree");function UE(e,t){const n=Cy(t);Kv(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const oZe=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=af(),[s,o]=k.useState(0),[a,l]=k.useState(0),u=!!(s&&a);return UE(i.scrollbarX,()=>{const c=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(c),l(c)}),UE(i.scrollbarY,()=>{const c=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(c),o(c)}),u?w.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),aZe=k.forwardRef((e,t)=>{const n=af(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?w.jsx(oZe,{...e,ref:t}):null}),lZe={scrollHideDelay:1e3,type:"hover"},I2e=k.forwardRef((e,t)=>{const n=qe("ScrollAreaRoot",lZe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,l]=k.useState(null),[u,c]=k.useState(null),[d,f]=k.useState(null),[h,p]=k.useState(null),[m,g]=k.useState(null),[y,v]=k.useState(0),[b,_]=k.useState(0),[E,S]=k.useState(!1),[T,A]=k.useState(!1),R=Is(t,I=>l(I));return w.jsx(sZe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:c,content:d,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:_},children:w.jsx(De,{...o,ref:R,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});I2e.displayName="@mantine/core/ScrollAreaRoot";function R2e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function SF(e){const t=R2e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function D2e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function uZe(e,[t,n]){return Math.min(n,Math.max(t,e))}function Hfe(e,t,n="ltr"){const r=SF(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],u=uZe(e,l);return D2e([0,o],[0,a])(u)}function cZe(e,t,n,r="ltr"){const i=SF(n),s=i/2,o=t||s,a=i-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return D2e([l,u],d)(e)}function P2e(e,t){return e>0&&e<t}function Ny(e){return e?parseInt(e,10):0}function Vb(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e?.(r),(n===!1||!r.defaultPrevented)&&t?.(r)}}const[dZe,O2e]=Qo("ScrollAreaScrollbar was not found in tree"),N2e=k.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:u,onResize:c,...d}=e,f=af(),[h,p]=k.useState(null),m=Is(t,A=>p(A)),g=k.useRef(null),y=k.useRef(""),{viewport:v}=f,b=n.content-n.viewport,_=Cy(u),E=Cy(a),S=pF(c,10),T=A=>{if(g.current){const R=A.clientX-g.current.left,I=A.clientY-g.current.top;l({x:R,y:I})}};return k.useEffect(()=>{const A=R=>{const I=R.target;h?.contains(I)&&_(R,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,_]),k.useEffect(E,[n,E]),UE(h,S),UE(f.content,S),w.jsx(dZe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Cy(i),onThumbPointerUp:Cy(s),onThumbPositionChange:E,onThumbPointerDown:Cy(o)},children:w.jsx("div",{...d,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...d.style},onPointerDown:Vb(e.onPointerDown,A=>{A.preventDefault(),A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:Vb(e.onPointerMove,T),onPointerUp:Vb(e.onPointerUp,A=>{const R=A.target;R.hasPointerCapture(A.pointerId)&&(A.preventDefault(),R.releasePointerCapture(A.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=y.current,g.current=null}})})}),M2e=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=af(),[a,l]=k.useState(),u=k.useRef(null),c=Is(t,u,o.onScrollbarXChange);return k.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),w.jsx(N2e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${SF(n)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),P2e(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Ny(a.paddingLeft),paddingEnd:Ny(a.paddingRight)}})}})});M2e.displayName="@mantine/core/ScrollAreaScrollbarX";const $2e=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=af(),[a,l]=k.useState(),u=k.useRef(null),c=Is(t,u,o.onScrollbarYChange);return k.useEffect(()=>{u.current&&l(window.getComputedStyle(u.current))},[]),w.jsx(N2e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${SF(n)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),P2e(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Ny(a.paddingTop),paddingEnd:Ny(a.paddingBottom)}})}})});$2e.displayName="@mantine/core/ScrollAreaScrollbarY";const TF=k.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=fc(),s=af(),o=k.useRef(null),a=k.useRef(0),[l,u]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=R2e(l.viewport,l.content),d={...r,sizes:l,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},f=(h,p)=>cZe(h,a.current,l,p);return n==="horizontal"?w.jsx(M2e,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Hfe(h,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,i))}}):n==="vertical"?w.jsx($2e,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Hfe(h,l);l.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null});TF.displayName="@mantine/core/ScrollAreaScrollbarVisible";const yJ=k.forwardRef((e,t)=>{const n=af(),{forceMount:r,...i}=e,[s,o]=k.useState(!1),a=e.orientation==="horizontal",l=pF(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:c)}},10);return UE(n.viewport,l),UE(n.content,l),r||s?w.jsx(TF,{"data-state":s?"visible":"hidden",...i,ref:t}):null});yJ.displayName="@mantine/core/ScrollAreaScrollbarAuto";const F2e=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=af(),[s,o]=k.useState(!1);return k.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const u=()=>{window.clearTimeout(l),o(!0)},c=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?w.jsx(yJ,{"data-state":s?"visible":"hidden",...r,ref:t}):null});F2e.displayName="@mantine/core/ScrollAreaScrollbarHover";const fZe=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=af(),s=e.orientation==="horizontal",[o,a]=k.useState("hidden"),l=pF(()=>a("idle"),100);return k.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay]),k.useEffect(()=>{const{viewport:u}=i,c=s?"scrollLeft":"scrollTop";if(u){let d=u[c];const f=()=>{const h=u[c];d!==h&&(a("scrolling"),l()),d=h};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,s,l]),n||o!=="hidden"?w.jsx(TF,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Vb(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Vb(e.onPointerLeave,()=>a("idle"))}):null}),jW=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=af(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return k.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?w.jsx(F2e,{...r,ref:t,forceMount:n}):i.type==="scroll"?w.jsx(fZe,{...r,ref:t,forceMount:n}):i.type==="auto"?w.jsx(yJ,{...r,ref:t,forceMount:n}):i.type==="always"?w.jsx(TF,{...r,ref:t}):null});jW.displayName="@mantine/core/ScrollAreaScrollbar";function hZe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return(function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(r)}const L2e=k.forwardRef((e,t)=>{const{style:n,...r}=e,i=af(),s=O2e(),{onThumbPositionChange:o}=s,a=Is(t,c=>s.onThumbChange(c)),l=k.useRef(void 0),u=pF(()=>{l.current&&(l.current(),l.current=void 0)},100);return k.useEffect(()=>{const{viewport:c}=i;if(c){const d=()=>{if(u(),!l.current){const f=hZe(c,o);l.current=f,o()}};return o(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,u,o]),w.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Vb(e.onPointerDownCapture,c=>{const f=c.target.getBoundingClientRect(),h=c.clientX-f.left,p=c.clientY-f.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Vb(e.onPointerUp,s.onThumbPointerUp)})});L2e.displayName="@mantine/core/ScrollAreaThumb";const BW=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=O2e();return n||i.hasThumb?w.jsx(L2e,{ref:t,...r}):null});BW.displayName="@mantine/core/ScrollAreaThumb";const j2e=k.forwardRef(({children:e,style:t,...n},r)=>{const i=af(),s=Is(r,i.onViewportChange);return w.jsx(De,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:w.jsx("div",{style:{minWidth:"100%"},ref:i.onContentChange,children:e})})});j2e.displayName="@mantine/core/ScrollAreaViewport";var vJ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const B2e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},pZe=(e,{scrollbarSize:t,overscrollBehavior:n})=>({root:{"--scrollarea-scrollbar-size":Ye(t),"--scrollarea-over-scroll-behavior":n}}),Qp=tt((e,t)=>{const n=qe("ScrollArea",B2e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:u,type:c,scrollHideDelay:d,viewportProps:f,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,onBottomReached:v,onTopReached:b,overscrollBehavior:_,...E}=n,[S,T]=k.useState(!1),[A,R]=k.useState(!1),[I,P]=k.useState(!1),N=Mt({name:"ScrollArea",props:n,classes:vJ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pZe}),M=k.useRef(null),O=FJe([h,M]);return k.useEffect(()=>{if(!M.current||g!=="present")return;const j=M.current,B=new ResizeObserver(()=>{const{scrollHeight:H,clientHeight:q,scrollWidth:G,clientWidth:U}=j;R(H>q),P(G>U)});return B.observe(j),()=>B.disconnect()},[M,g]),w.jsxs(I2e,{type:c==="never"?"always":c,scrollHideDelay:d,ref:t,scrollbars:y,...N("root"),...E,children:[w.jsx(j2e,{...f,...N("viewport",{style:f?.style}),ref:O,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,"data-horizontal-hidden":g==="present"&&!I?"true":void 0,"data-vertical-hidden":g==="present"&&!A?"true":void 0,onScroll:j=>{f?.onScroll?.(j),p?.({x:j.currentTarget.scrollLeft,y:j.currentTarget.scrollTop});const{scrollTop:B,scrollHeight:H,clientHeight:q}=j.currentTarget;B-(H-q)>=-.6&&v?.(),B===0&&b?.()},children:m}),(y==="xy"||y==="x")&&w.jsx(jW,{...N("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||g==="present"&&!I?!0:void 0,forceMount:!0,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:w.jsx(BW,{...N("thumb")})}),(y==="xy"||y==="y")&&w.jsx(jW,{...N("scrollbar"),orientation:"vertical","data-hidden":c==="never"||g==="present"&&!A?!0:void 0,forceMount:!0,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),children:w.jsx(BW,{...N("thumb")})}),w.jsx(aZe,{...N("corner"),"data-hovered":S||void 0,"data-hidden":c==="never"||void 0})]})});Qp.displayName="@mantine/core/ScrollArea";const bJ=tt((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,onBottomReached:v,onTopReached:b,..._}=qe("ScrollAreaAutosize",B2e,e);return w.jsx(De,{..._,ref:t,style:[{display:"flex",overflow:"auto"},g],children:w.jsx(De,{style:{display:"flex",flexDirection:"column",flex:1},children:w.jsx(Qp,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,vars:y,scrollbars:m,onBottomReached:v,onTopReached:b,children:n})})})});Qp.classes=vJ;bJ.displayName="@mantine/core/ScrollAreaAutosize";bJ.classes=vJ;Qp.Autosize=bJ;var z2e={root:"m_87cf2631"};const mZe={__staticSelector:"UnstyledButton"},Co=co((e,t)=>{const n=qe("UnstyledButton",mZe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:u,...c}=n,d=Mt({name:s,props:n,classes:z2e,className:r,style:u,classNames:a,styles:l,unstyled:o});return w.jsx(De,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Co.classes=z2e;Co.displayName="@mantine/core/UnstyledButton";var V2e={root:"m_515a97f8"};const gZe={},wJ=tt((e,t)=>{const n=qe("VisuallyHidden",gZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,...u}=n,c=Mt({name:"VisuallyHidden",classes:V2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return w.jsx(De,{component:"span",ref:t,...c("root"),...u})});wJ.classes=V2e;wJ.displayName="@mantine/core/VisuallyHidden";var U2e={root:"m_1b7284a3"};const yZe={},vZe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Jr(t),"--paper-shadow":QQ(n)}}),lf=co((e,t)=>{const n=qe("Paper",yZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:u,radius:c,shadow:d,variant:f,mod:h,...p}=n,m=Mt({name:"Paper",props:n,classes:U2e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vZe});return w.jsx(De,{ref:t,mod:[{"data-with-border":l},h],...m("root"),variant:f,...p})});lf.classes=U2e;lf.displayName="@mantine/core/Paper";function H2e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function qfe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Wfe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const bZe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function wZe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,u="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[bZe[l]]:r},d=-t/2;return l==="left"?{...c,...qfe(u,o,n,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:l==="right"?{...c,...qfe(u,o,n,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:l==="top"?{...c,...Wfe(u,s,n,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:l==="bottom"?{...c,...Wfe(u,s,n,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const xJ=k.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...u},c)=>{const{dir:d}=fc();return s?w.jsx("div",{...u,ref:c,style:{...l,...wZe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});xJ.displayName="@mantine/core/FloatingArrow";var q2e={root:"m_9814e45f"};const xZe={zIndex:dc("modal")},_Ze=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&hp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ye(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Jr(s),"--overlay-z-index":o?.toString()}}),HE=co((e,t)=>{const n=qe("Overlay",xZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:u,center:c,children:d,radius:f,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,_=Mt({name:"Overlay",props:n,classes:q2e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_Ze});return w.jsx(De,{ref:t,..._("root"),mod:[{center:c,fixed:u},v],...b,children:d})});HE.classes=q2e;HE.displayName="@mantine/core/Overlay";function oz(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}function EZe({target:e,reuseTargetNode:t,...n}){if(e)return typeof e=="string"?document.querySelector(e)||oz(n):e;if(t){const r=document.querySelector("[data-mantine-shared-portal-node]");if(r)return r;const i=oz(n);return i.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(i),i}return oz(n)}const CZe={},W2e=tt((e,t)=>{const{children:n,target:r,reuseTargetNode:i,...s}=qe("Portal",CZe,e),[o,a]=k.useState(!1),l=k.useRef(null);return Kv(()=>(a(!0),l.current=EZe({target:r,reuseTargetNode:i,...s}),t6(t,l.current),!r&&!i&&l.current&&document.body.appendChild(l.current),()=>{!r&&!i&&l.current&&document.body.removeChild(l.current)}),[r]),!o||!l.current?null:Ip.createPortal(w.jsx(w.Fragment,{children:n}),l.current)});W2e.displayName="@mantine/core/Portal";const Qv=tt(({withinPortal:e=!0,children:t,...n},r)=>e2e()==="test"||!e?w.jsx(w.Fragment,{children:t}):w.jsx(W2e,{ref:r,...n,children:t}));Qv.displayName="@mantine/core/OptionalPortal";const qT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),E3={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...qT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...qT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...qT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...qT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...qT("top"),common:{transformOrigin:"top right"}}},Gfe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function SZe({transition:e,state:t,duration:n,timingFunction:r}){const i={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in E3?{transitionProperty:E3[e].transitionProperty,...i,...E3[e].common,...E3[e][Gfe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Gfe[t]]}}function TZe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:l,exitDelay:u}){const c=bs(),d=mF(),f=c.respectReducedMotion?d:!1,[h,p]=k.useState(f?0:e),[m,g]=k.useState(r?"entered":"exited"),y=k.useRef(-1),v=k.useRef(-1),b=k.useRef(-1);function _(){window.clearTimeout(y.current),window.clearTimeout(v.current),cancelAnimationFrame(b.current)}const E=T=>{_();const A=T?i:s,R=T?o:a,I=f?0:T?e:t;p(I),I===0?(typeof A=="function"&&A(),typeof R=="function"&&R(),g(T?"entered":"exited")):b.current=requestAnimationFrame(()=>{U2.flushSync(()=>{g(T?"pre-entering":"pre-exiting")}),b.current=requestAnimationFrame(()=>{typeof A=="function"&&A(),g(T?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof R=="function"&&R(),g(T?"entered":"exited")},I)})})},S=T=>{if(_(),typeof(T?l:u)!="number"){E(T);return}v.current=window.setTimeout(()=>{E(T)},T?l:u)};return fu(()=>{S(r)},[r]),k.useEffect(()=>()=>{_()},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function uf({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f}){const h=e2e(),{transitionDuration:p,transitionStatus:m,transitionTimingFunction:g}=TZe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f});return p===0||h==="test"?i?w.jsx(w.Fragment,{children:s({})}):e?s({display:"none"}):null:m==="exited"?e?s({display:"none"}):null:w.jsx(w.Fragment,{children:s(SZe({transition:t,duration:p,state:m,timingFunction:g}))})}uf.displayName="@mantine/core/Transition";const[AZe,G2e]=Qo("Popover component was not found in the tree");function dR({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=VKe(t),s=Is(i,r);return g0(e)?k.cloneElement(e,{[n]:s}):e}function Y2e(e){return w.jsx(wJ,{tabIndex:-1,"data-autofocus":!0,...e})}dR.displayName="@mantine/core/FocusTrap";Y2e.displayName="@mantine/core/FocusTrapInitialFocus";dR.InitialFocus=Y2e;var K2e={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const kZe={},_J=tt((e,t)=>{const n=qe("PopoverDropdown",kZe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:u,styles:c,...d}=n,f=G2e(),h=qTe({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Is(t,f.floating);return f.disabled?null:w.jsx(Qv,{...f.portalProps,withinPortal:f.withinPortal,children:w.jsx(uf,{mounted:f.opened,...f.transitionProps,transition:f.transitionProps?.transition||"fade",duration:f.transitionProps?.duration??150,keepMounted:f.keepMounted,exitDuration:typeof f.transitionProps?.exitDuration=="number"?f.transitionProps.exitDuration:f.transitionProps?.duration,children:g=>w.jsx(dR,{active:f.trapFocus&&f.opened,innerRef:m,children:w.jsxs(De,{...p,...d,variant:l,onKeyDownCapture:IKe(()=>{f.onClose?.(),f.onDismiss?.()},{active:f.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:u,styles:c,style:[{...g,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:Ye(f.width)},f.resolvedStyles.dropdown,c?.dropdown,i]}),children:[o,w.jsx(xJ,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:u,styles:c})})]})})})})});_J.classes=K2e;_J.displayName="@mantine/core/PopoverDropdown";const IZe={refProp:"ref",popupType:"dialog"},X2e=tt((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=qe("PopoverTarget",IZe,e);if(!g0(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=G2e(),l=Is(a.reference,gF(n),t),u=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return k.cloneElement(n,{...o,...u,...a.targetProps,className:Bt(a.targetProps.className,o.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});X2e.displayName="@mantine/core/PopoverTarget";function Q2e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=k.useState(0);k.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return CJe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),fu(()=>{t.update()},r),fu(()=>{s(o=>o+1)},[e])}function RZe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function DZe(e,t){const n=RZe(e.middlewares),r=[C2e(e.offset)];return n.shift&&r.push(fJ(typeof n.shift=="boolean"?{limiter:Ffe(),padding:5}:{limiter:Ffe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?o6():o6(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?MA():MA(n.inline)),r.push(S2e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push($Je({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){const u=t().refs.floating.current?.style??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function PZe(e){const[t,n]=Ki({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=k.useRef(t),i=()=>{t&&!e.disabled&&n(!1)},s=()=>!e.disabled&&n(!t),o=gJ({strategy:e.strategy,placement:e.position,middleware:DZe(e,()=>o)});return Q2e({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),fu(()=>{e.onPositionChange?.(o.placement)},[o.placement]),fu(()=>{t!==r.current&&(t?e.onOpen?.():e.onClose?.()),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const OZe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:dc("popover"),__staticSelector:"Popover",width:"max-content"},NZe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Jr(t),"--popover-shadow":QQ(n)}});function jr(e){const t=qe("Popover",OZe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,onExitTransitionEnd:u,onEnterTransitionEnd:c,width:d,middlewares:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:y,unstyled:v,classNames:b,styles:_,closeOnClickOutside:E,withinPortal:S,portalProps:T,closeOnEscape:A,clickOutsideEvents:R,trapFocus:I,onClose:P,onDismiss:N,onOpen:M,onChange:O,zIndex:j,radius:B,shadow:H,id:q,defaultOpened:G,__staticSelector:U,withRoles:L,disabled:z,returnFocus:V,variant:Y,keepMounted:Q,vars:ne,floatingStrategy:ue,withOverlay:se,overlayProps:ae,...he}=t,ie=Mt({name:U,props:t,classes:K2e,classNames:b,styles:_,unstyled:v,rootSelector:"dropdown",vars:ne,varsResolver:NZe}),{resolvedStyles:le}=Th({classNames:b,styles:_,props:t}),Ce=k.useRef(null),[X,fe]=k.useState(null),[de,te]=k.useState(null),{dir:ee}=fc(),me=Xa(q),Ie=PZe({middlewares:f,width:d,position:H2e(ee,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:Ce,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:G,onChange:O,onOpen:M,onClose:P,onDismiss:N,strategy:ue,disabled:z});UTe(()=>{E&&(Ie.onClose(),N?.())},R,[X,de]);const Te=k.useCallback(Oe=>{fe(Oe),Ie.floating.refs.setReference(Oe)},[Ie.floating.refs.setReference]),we=k.useCallback(Oe=>{te(Oe),Ie.floating.refs.setFloating(Oe)},[Ie.floating.refs.setFloating]),Me=k.useCallback(()=>{l?.onExited?.(),u?.()},[l?.onExited,u]),ke=k.useCallback(()=>{l?.onEntered?.(),c?.()},[l?.onEntered,c]);return w.jsxs(AZe,{value:{returnFocus:V,disabled:z,controlled:Ie.controlled,reference:Te,floating:we,x:Ie.floating.x,y:Ie.floating.y,arrowX:Ie.floating?.middlewareData?.arrow?.x,arrowY:Ie.floating?.middlewareData?.arrow?.y,opened:Ie.opened,arrowRef:Ce,transitionProps:{...l,onExited:Me,onEntered:ke},width:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:y,placement:Ie.floating.placement,trapFocus:I,withinPortal:S,portalProps:T,zIndex:j,radius:B,shadow:H,closeOnEscape:A,onDismiss:N,onClose:Ie.onClose,onToggle:Ie.onToggle,getTargetId:()=>`${me}-target`,getDropdownId:()=>`${me}-dropdown`,withRoles:L,targetProps:he,__staticSelector:U,classNames:b,styles:_,unstyled:v,variant:Y,keepMounted:Q,getStyles:ie,resolvedStyles:le,floatingStrategy:ue},children:[n,se&&w.jsx(uf,{transition:"fade",mounted:Ie.opened,duration:l?.duration||250,exitDuration:l?.exitDuration||250,children:Oe=>w.jsx(Qv,{withinPortal:S,children:w.jsx(HE,{...ae,...ie("overlay",{className:ae?.className,style:[Oe,ae?.style]})})})})]})}jr.Target=X2e;jr.Dropdown=_J;jr.displayName="@mantine/core/Popover";jr.extend=e=>e;var Yf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const J2e=k.forwardRef(({className:e,...t},n)=>w.jsxs(De,{component:"span",className:Bt(Yf.barsLoader,e),...t,ref:n,children:[w.jsx("span",{className:Yf.bar}),w.jsx("span",{className:Yf.bar}),w.jsx("span",{className:Yf.bar})]}));J2e.displayName="@mantine/core/Bars";const Z2e=k.forwardRef(({className:e,...t},n)=>w.jsxs(De,{component:"span",className:Bt(Yf.dotsLoader,e),...t,ref:n,children:[w.jsx("span",{className:Yf.dot}),w.jsx("span",{className:Yf.dot}),w.jsx("span",{className:Yf.dot})]}));Z2e.displayName="@mantine/core/Dots";const eAe=k.forwardRef(({className:e,...t},n)=>w.jsx(De,{component:"span",className:Bt(Yf.ovalLoader,e),...t,ref:n}));eAe.displayName="@mantine/core/Oval";const tAe={bars:J2e,oval:eAe,dots:Z2e},MZe={loaders:tAe,type:"oval"},$Ze=(e,{size:t,color:n})=>({root:{"--loader-size":_n(t,"loader-size"),"--loader-color":n?li(n,e):void 0}}),td=tt((e,t)=>{const n=qe("Loader",MZe,e),{size:r,color:i,type:s,vars:o,className:a,style:l,classNames:u,styles:c,unstyled:d,loaders:f,variant:h,children:p,...m}=n,g=Mt({name:"Loader",props:n,classes:Yf,className:a,style:l,classNames:u,styles:c,unstyled:d,vars:o,varsResolver:$Ze});return p?w.jsx(De,{...g("root"),ref:t,...m,children:p}):w.jsx(De,{...g("root"),ref:t,component:f[s],variant:h,size:r,...m})});td.defaultLoaders=tAe;td.classes=Yf;td.displayName="@mantine/core/Loader";var YC={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const Yfe={orientation:"horizontal"},FZe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ye(t)}}),EJ=tt((e,t)=>{const n=qe("ActionIconGroup",Yfe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=qe("ActionIconGroup",Yfe,e),p=Mt({name:"ActionIconGroup",props:n,classes:YC,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:FZe,rootSelector:"group"});return w.jsx(De,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});EJ.classes=YC;EJ.displayName="@mantine/core/ActionIconGroup";const Kfe={},LZe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_n(o,"section-height"),"--section-padding-x":_n(o,"section-padding-x"),"--section-fz":As(o),"--section-radius":t===void 0?void 0:Jr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},CJ=tt((e,t)=>{const n=qe("ActionIconGroupSection",Kfe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,variant:u,gradient:c,radius:d,autoContrast:f,...h}=qe("ActionIconGroupSection",Kfe,e),p=Mt({name:"ActionIconGroupSection",props:n,classes:YC,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:LZe,rootSelector:"groupSection"});return w.jsx(De,{...p("groupSection"),ref:t,variant:u,...h})});CJ.classes=YC;CJ.displayName="@mantine/core/ActionIconGroupSection";const jZe={},BZe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":_n(t,"ai-size"),"--ai-radius":n===void 0?void 0:Jr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Rn=co((e,t)=>{const n=qe("ActionIcon",jZe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:u,loaderProps:c,size:d,color:f,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:_,mod:E,...S}=n,T=Mt({name:["ActionIcon",p],props:n,className:r,style:l,classes:YC,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:BZe});return w.jsxs(Co,{...T("root",{active:!v&&!u&&!b}),...S,unstyled:i,variant:s,size:d,disabled:v||u,ref:t,mod:[{loading:u,disabled:v||b},E],children:[w.jsx(uf,{mounted:!!u,transition:"slide-down",duration:150,children:A=>w.jsx(De,{component:"span",...T("loader",{style:A}),"aria-hidden":!0,children:w.jsx(td,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),w.jsx(De,{component:"span",mod:{loading:u},...T("icon"),children:y})]})});Rn.classes=YC;Rn.displayName="@mantine/core/ActionIcon";Rn.Group=EJ;Rn.GroupSection=CJ;const nAe=k.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));nAe.displayName="@mantine/core/CloseIcon";var rAe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const zZe={variant:"subtle"},VZe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":_n(t,"cb-size"),"--cb-radius":n===void 0?void 0:Jr(n),"--cb-icon-size":Ye(r)}}),Jp=co((e,t)=>{const n=qe("CloseButton",zZe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:l,style:u,styles:c,unstyled:d,"data-disabled":f,disabled:h,variant:p,icon:m,mod:g,__staticSelector:y,...v}=n,b=Mt({name:y||"CloseButton",props:n,className:a,style:u,classes:rAe,classNames:l,styles:c,unstyled:d,vars:s,varsResolver:VZe});return w.jsxs(Co,{ref:t,...v,unstyled:d,variant:p,disabled:h,mod:[{disabled:h||f},g],...b("root",{variant:p,active:!h&&!f}),children:[m||w.jsx(nAe,{}),i]})});Jp.classes=rAe;Jp.displayName="@mantine/core/CloseButton";function UZe(e){return k.Children.toArray(e).filter(Boolean)}var iAe={root:"m_4081bf90"};const HZe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},qZe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Yi(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Pn=tt((e,t)=>{const n=qe("Group",HZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:l,gap:u,align:c,justify:d,wrap:f,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,_=UZe(l),E=_.length,S=Yi(u??"md"),A={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},R=Mt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:iAe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:qZe});return w.jsx(De,{...R("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:_})});Pn.classes=iAe;Pn.displayName="@mantine/core/Group";const[WZe,b0]=Qo("ModalBase component was not found in tree");function GZe({opened:e,transitionDuration:t}){const[n,r]=k.useState(e),i=k.useRef(-1),o=mF()?0:t;return k.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function YZe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Xa(e),[l,u]=k.useState(!1),[c,d]=k.useState(!1),f=typeof t?.duration=="number"?t?.duration:200,h=GZe({opened:n,transitionDuration:f});return KTe("keydown",p=>{p.key==="Escape"&&i&&!p.isComposing&&n&&p.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&s()},{capture:!0}),qTe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:l,bodyMounted:c,shouldLockScroll:h,setTitleMounted:u,setBodyMounted:d}}const sAe=k.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:l,returnFocus:u,closeOnClickOutside:c,withinPortal:d,portalProps:f,lockScroll:h,children:p,zIndex:m,shadow:g,padding:y,__vars:v,unstyled:b,removeScrollProps:_,...E},S)=>{const{_id:T,titleMounted:A,bodyMounted:R,shouldLockScroll:I,setTitleMounted:P,setBodyMounted:N}=YZe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:l,onClose:n,returnFocus:u}),{key:M,...O}=_||{};return w.jsx(Qv,{...f,withinPortal:d,children:w.jsx(WZe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${T}-title`,getBodyId:()=>`${T}-body`,titleMounted:A,bodyMounted:R,setTitleMounted:P,setBodyMounted:N,trapFocus:a,closeOnEscape:l,zIndex:m,unstyled:b},children:w.jsx(zE,{enabled:I&&h,...O,children:w.jsx(De,{ref:S,...E,__vars:{...v,"--mb-z-index":(m||dc("modal")).toString(),"--mb-shadow":QQ(g),"--mb-padding":Yi(y)},children:p})},M)})})});sAe.displayName="@mantine/core/ModalBase";function KZe(){const e=b0();return k.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var qE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const oAe=k.forwardRef(({className:e,...t},n)=>{const r=KZe(),i=b0();return w.jsx(De,{ref:n,...t,id:r,className:Bt({[qE.body]:!i.unstyled},e)})});oAe.displayName="@mantine/core/ModalBaseBody";const aAe=k.forwardRef(({className:e,onClick:t,...n},r)=>{const i=b0();return w.jsx(Jp,{ref:r,...n,onClick:s=>{i.onClose(),t?.(s)},className:Bt({[qE.close]:!i.unstyled},e),unstyled:i.unstyled})});aAe.displayName="@mantine/core/ModalBaseCloseButton";const lAe=k.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=b0();return w.jsx(uf,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{a.onExitTransitionEnd?.(),a.transitionProps?.onExited?.()},onEntered:()=>{a.onEnterTransitionEnd?.(),a.transitionProps?.onEntered?.()},...e,children:l=>w.jsx("div",{...n,className:Bt({[qE.inner]:!a.unstyled},n.className),children:w.jsx(dR,{active:a.opened&&a.trapFocus,innerRef:o,children:w.jsx(lf,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,l],className:Bt({[qE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});lAe.displayName="@mantine/core/ModalBaseContent";const uAe=k.forwardRef(({className:e,...t},n)=>{const r=b0();return w.jsx(De,{component:"header",ref:n,className:Bt({[qE.header]:!r.unstyled},e),...t})});uAe.displayName="@mantine/core/ModalBaseHeader";const XZe={duration:200,timingFunction:"ease",transition:"fade"};function QZe(e){const t=b0();return{...XZe,...t.transitionProps,...e}}const cAe=k.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=b0(),a=QZe(t);return w.jsx(uf,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:l=>w.jsx(HE,{ref:s,fixed:!0,style:[n,l],zIndex:o.zIndex,unstyled:o.unstyled,onClick:u=>{e?.(u),o.closeOnClickOutside&&o.onClose()},...i})})});cAe.displayName="@mantine/core/ModalBaseOverlay";function JZe(){const e=b0();return k.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const dAe=k.forwardRef(({className:e,...t},n)=>{const r=JZe(),i=b0();return w.jsx(De,{component:"h2",ref:n,className:Bt({[qE.title]:!i.unstyled},e),...t,id:r})});dAe.displayName="@mantine/core/ModalBaseTitle";function ZZe({children:e}){return w.jsx(w.Fragment,{children:e})}const[eet,tet]=y0({size:"sm"}),net={},fAe=tt((e,t)=>{const n=qe("InputClearButton",net,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...l}=n,u=tet(),{resolvedClassNames:c,resolvedStyles:d}=Th({classNames:o,styles:a,props:n});return w.jsx(Jp,{variant:i||"transparent",ref:t,size:r||u?.size||"sm",classNames:c,styles:d,__staticSelector:"InputClearButton",...l})});fAe.displayName="@mantine/core/InputClearButton";const[ret,KC]=y0({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var cf={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Xfe={},iet=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${As(t)} - ${Ye(2)})`}}),AF=tt((e,t)=>{const n=qe("InputDescription",Xfe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=qe("InputDescription",Xfe,n),p=KC(),m=Mt({name:["InputWrapper",c],props:n,classes:cf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:iet}),g=d&&p?.getStyles||m;return w.jsx(De,{component:"p",ref:t,variant:f,size:u,...g("description",p?.getStyles?{className:i,style:s}:void 0),...h})});AF.classes=cf;AF.displayName="@mantine/core/InputDescription";const set={},oet=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${As(t)} - ${Ye(2)})`}}),kF=tt((e,t)=>{const n=qe("InputError",set,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=n,p=Mt({name:["InputWrapper",c],props:n,classes:cf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:oet}),m=KC(),g=d&&m?.getStyles||p;return w.jsx(De,{component:"p",ref:t,variant:f,size:u,...g("error",m?.getStyles?{className:i,style:s}:void 0),...h})});kF.classes=cf;kF.displayName="@mantine/core/InputError";const Qfe={labelElement:"label"},aet=(e,{size:t})=>({label:{"--input-label-size":As(t),"--input-asterisk-color":void 0}}),IF=tt((e,t)=>{const n=qe("InputLabel",Qfe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:u,size:c,required:d,htmlFor:f,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=qe("InputLabel",Qfe,n),b=Mt({name:["InputWrapper",m],props:n,classes:cf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:aet}),_=KC(),E=_?.getStyles||b;return w.jsxs(De,{...E("label",_?.getStyles?{className:i,style:s}:void 0),component:u,variant:g,size:c,ref:t,htmlFor:u==="label"?f:void 0,mod:[{required:d},y],onMouseDown:S=>{h?.(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,d&&w.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});IF.classes=cf;IF.displayName="@mantine/core/InputLabel";const Jfe={},SJ=tt((e,t)=>{const n=qe("InputPlaceholder",Jfe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,variant:c,error:d,mod:f,...h}=qe("InputPlaceholder",Jfe,n),p=Mt({name:["InputPlaceholder",u],props:n,classes:cf,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return w.jsx(De,{...p("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...h})});SJ.classes=cf;SJ.displayName="@mantine/core/InputPlaceholder";function uet(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const cet={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},det=(e,{size:t})=>({label:{"--input-label-size":As(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${As(t)} - ${Ye(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${As(t)} - ${Ye(2)})`}}),TJ=tt((e,t)=>{const n=qe("InputWrapper",cet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,variant:c,__staticSelector:d,inputContainer:f,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:_,children:E,withAsterisk:S,id:T,required:A,__stylesApiProps:R,mod:I,...P}=n,N=Mt({name:["InputWrapper",d],props:R||n,classes:cf,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:det}),M={size:u,variant:c,__staticSelector:d},O=Xa(T),j=typeof S=="boolean"?S:A,B=b?.id||`${O}-error`,H=v?.id||`${O}-description`,q=O,G=!!m&&typeof m!="boolean",U=!!g,L=`${G?B:""} ${U?H:""}`,z=L.trim().length>0?L.trim():void 0,V=y?.id||`${O}-label`,Y=p&&w.jsx(IF,{labelElement:_,id:V,htmlFor:q,required:j,...M,...y,children:p},"label"),Q=U&&w.jsx(AF,{...v,...M,size:v?.size||M.size,id:v?.id||H,children:g},"description"),ne=w.jsx(k.Fragment,{children:f(E)},"input"),ue=G&&k.createElement(kF,{...b,...M,size:b?.size||M.size,key:"error",id:b?.id||B},m),se=h.map(ae=>{switch(ae){case"label":return Y;case"input":return ne;case"description":return Q;case"error":return ue;default:return null}});return w.jsx(ret,{value:{getStyles:N,describedBy:z,inputId:q,labelId:V,...uet(h,{hasDescription:U,hasError:G})},children:w.jsx(De,{ref:t,variant:c,size:u,mod:[{error:!!m},I],...N("root"),...P,children:se})})});TJ.classes=cf;TJ.displayName="@mantine/core/InputWrapper";const fet={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},het=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":_n(t.size,"input-height"),"--input-fz":As(t.size),"--input-radius":t.radius===void 0?void 0:Jr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ye(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ye(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?_n(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Qr=co((e,t)=>{const n=qe("Input",fet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:u,__stylesApiProps:c,size:d,wrapperProps:f,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:_,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:A,pointer:R,multiline:I,radius:P,id:N,withAria:M,withErrorStyles:O,mod:j,inputSize:B,__clearSection:H,__clearable:q,__defaultRightSection:G,...U}=n,{styleProps:L,rest:z}=qw(U),V=KC(),Y={offsetBottom:V?.offsetBottom,offsetTop:V?.offsetTop},Q=Mt({name:["Input",u],props:c||n,classes:cf,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:Y,rootSelector:"wrapper",vars:A,varsResolver:het}),ne=M?{required:l,disabled:p,"aria-invalid":!!h,"aria-describedby":V?.describedBy,id:V?.inputId||N}:{},ue=v||q&&H||G;return w.jsx(eet,{value:{size:d||"sm"},children:w.jsxs(De,{...Q("wrapper"),...L,...f,mod:[{error:!!h&&O,pointer:R,disabled:p,multiline:I,"data-with-right-section":!!ue,"data-with-left-section":!!m},j],variant:T,size:d,children:[m&&w.jsx("div",{...g,"data-position":"left",...Q("section",{className:g?.className,style:g?.style}),children:m}),w.jsx(De,{component:"input",...z,...ne,ref:t,required:l,mod:{disabled:p,error:!!h&&O},variant:T,__size:B,...Q("input")}),ue&&w.jsx("div",{...b,"data-position":"right",...Q("section",{className:b?.className,style:b?.style}),children:ue})]})})});Qr.classes=cf;Qr.Wrapper=TJ;Qr.Label=IF;Qr.Error=kF;Qr.Description=AF;Qr.Placeholder=SJ;Qr.ClearButton=fAe;Qr.displayName="@mantine/core/Input";function AJ(e,t,n){const r=qe(e,t,n),{label:i,description:s,error:o,required:a,classNames:l,styles:u,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:_,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,vars:R,mod:I,...P}=r,{styleProps:N,rest:M}=qw(P),O={label:i,description:s,error:o,required:a,classNames:l,className:c,__staticSelector:f,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:d,styles:u,size:b,style:_,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,id:v,mod:I,...y};return{...M,classNames:l,styles:u,unstyled:d,wrapperProps:{...O,...N},inputProps:{required:a,classNames:l,styles:u,unstyled:d,size:b,__staticSelector:f,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const pet={__staticSelector:"InputBase",withAria:!0},bu=co((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=AJ("InputBase",pet,e);return w.jsx(Qr.Wrapper,{...r,children:w.jsx(Qr,{...n,...i,ref:t})})});bu.classes={...Qr.classes,...Qr.Wrapper.classes};bu.displayName="@mantine/core/InputBase";const met={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var hAe={root:"m_8bffd616"};const get={},Rt=co((e,t)=>{const n=qe("Flex",get,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m,...g}=n,y=Mt({name:"Flex",classes:hAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),v=bs(),b=uR(),_=s2e({styleProps:{gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m},theme:v,data:met});return w.jsxs(w.Fragment,{children:[_.hasResponsiveStyles&&w.jsx(Hw,{selector:`.${b}`,styles:_.styles,media:_.media}),w.jsx(De,{ref:t,...y("root",{className:b,style:Yv(_.inlineStyles)}),...g})]})});Rt.classes=hAe;Rt.displayName="@mantine/core/Flex";function yet(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function vet({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=k.useRef(-1),[s,o]=k.useState(!1),[a,l]=k.useState(typeof r=="boolean"?r:!1),u=()=>{if(!e||!t||!n.current)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m=window.getComputedStyle(e),g=window.getComputedStyle(t),y=Ny(m.borderTopWidth)+Ny(g.borderTopWidth),v=Ny(m.borderLeftWidth)+Ny(g.borderLeftWidth),b={top:h.top-p.top-y,left:h.left-p.left-v,width:h.width,height:h.height};n.current.style.transform=`translateY(${b.top}px) translateX(${b.left}px)`,n.current.style.width=`${b.width}px`,n.current.style.height=`${b.height}px`},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),u(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},d=k.useRef(null),f=k.useRef(null);return k.useEffect(()=>{if(u(),e)return d.current=new ResizeObserver(c),d.current.observe(e),t&&(f.current=new ResizeObserver(c),f.current.observe(t)),()=>{d.current?.disconnect(),f.current?.disconnect()}},[t,e]),k.useEffect(()=>{if(t){const h=p=>{yet(p.target,t)&&(c(),l(!1))};return t.addEventListener("transitionend",h),()=>{t.removeEventListener("transitionend",h)}}},[t]),eXe(()=>{JTe()!=="test"&&o(!0)},20,{autoInvoke:!0}),iXe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var pAe={root:"m_96b553a6"};const bet={},wet=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),kJ=tt((e,t)=>{const n=qe("FloatingIndicator",bet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,target:u,parent:c,transitionDuration:d,mod:f,displayAfterTransitionEnd:h,...p}=n,m=Mt({name:"FloatingIndicator",classes:pAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:wet}),g=k.useRef(null),{initialized:y,hidden:v}=vet({target:u,parent:c,ref:g,displayAfterTransitionEnd:h}),b=Is(t,g);return!u||!c?null:w.jsx(De,{ref:b,mod:[{initialized:y,hidden:v},f],...m("root"),...p})});kJ.displayName="@mantine/core/FloatingIndicator";kJ.classes=pAe;const[xet,IJ]=Qo("Accordion component was not found in the tree");function WE({style:e,size:t=16,...n}){return w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ye(t),height:Ye(t),display:"block"},...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}WE.displayName="@mantine/core/AccordionChevron";const[_et,mAe]=Qo("Accordion.Item component was not found in the tree");var fR={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const Eet={},RJ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:l,onClick:u,onKeyDown:c,children:d,disabled:f,mod:h,...p}=qe("AccordionControl",Eet,e),{value:m}=mAe(),g=IJ(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,_=w.jsxs(Co,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:f},h],ref:t,onClick:E=>{u?.(E),g.onChange(m)},type:"button",disabled:f,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:XQ({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[w.jsx(De,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),w.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:d}),l&&w.jsx(De,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:l})]});return v?w.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:_}):_});RJ.displayName="@mantine/core/AccordionControl";RJ.classes=fR;const Cet={},DJ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:l,...u}=qe("AccordionItem",Cet,e),c=IJ();return w.jsx(_et,{value:{value:a},children:w.jsx(De,{ref:t,mod:[{active:c.isItemActive(a)},l],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...u})})});DJ.displayName="@mantine/core/AccordionItem";DJ.classes=fR;const Tet={},PJ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...l}=qe("AccordionPanel",Tet,e),{value:u}=mAe(),c=IJ();return w.jsx(vm,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...l,in:c.isItemActive(u),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(u),"aria-labelledby":c.getControlId(u),children:w.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});PJ.displayName="@mantine/core/AccordionPanel";PJ.classes=fR;const Aet={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:w.jsx(WE,{})},ket=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ye(n),"--accordion-radius":r===void 0?void 0:Jr(r)}});function Fo(e){const t=qe("Accordion",Aet,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:l,multiple:u,value:c,defaultValue:d,onChange:f,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:_,variant:E,radius:S,...T}=t,A=Xa(h),[R,I]=Ki({value:c,defaultValue:d,finalValue:u?[]:null,onChange:f}),P=O=>Array.isArray(R)?R.includes(O):O===R,N=O=>{const j=Array.isArray(R)?R.includes(O)?R.filter(B=>B!==O):[...R,O]:O===R?null:O;I(j)},M=Mt({name:"Accordion",classes:fR,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:ket});return w.jsx(xet,{value:{isItemActive:P,onChange:N,getControlId:JM(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:JM(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:_,loop:p,getStyles:M,variant:E,unstyled:o},children:w.jsx(De,{...M("root"),id:A,...T,variant:E,"data-accordion":!0,children:l})})}const Iet=e=>e;Fo.extend=Iet;Fo.withProps=c2e(Fo);Fo.classes=fR;Fo.displayName="@mantine/core/Accordion";Fo.Item=DJ;Fo.Panel=PJ;Fo.Control=RJ;Fo.Chevron=WE;var gAe={root:"m_7f854edf"};const Ret={position:{bottom:0,right:0},zIndex:dc("modal"),withinPortal:!0},Det=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t?.toString(),"--affix-top":Yi(n?.top),"--affix-left":Yi(n?.left),"--affix-bottom":Yi(n?.bottom),"--affix-right":Yi(n?.right)}}),OJ=tt((e,t)=>{const n=qe("Affix",Ret,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,portalProps:u,zIndex:c,withinPortal:d,position:f,...h}=n,p=Mt({name:"Affix",classes:gAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Det});return w.jsx(Qv,{...u,withinPortal:d,children:w.jsx(De,{ref:t,...p("root"),...h})})});OJ.classes=gAe;OJ.displayName="@mantine/core/Affix";var yAe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const Pet={},Oet=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Jr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Bd=tt((e,t)=>{const n=qe("Alert",Pet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,title:d,children:f,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,..._}=n,E=Mt({name:"Alert",classes:yAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Oet}),S=Xa(h),T=d&&`${S}-title`||void 0,A=`${S}-body`;return w.jsx(De,{id:S,...E("root",{variant:v}),variant:v,ref:t,..._,role:"alert","aria-describedby":A,"aria-labelledby":T,children:w.jsxs("div",{...E("wrapper"),children:[p&&w.jsx("div",{...E("icon"),children:p}),w.jsxs("div",{...E("body"),children:[d&&w.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:w.jsx("span",{id:T,...E("label"),children:d})}),f&&w.jsx("div",{id:A,...E("message"),"data-variant":v,children:f})]}),m&&w.jsx(Jp,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Bd.classes=yAe;Bd.displayName="@mantine/core/Alert";var vAe={root:"m_b6d8b162"};function Net(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const Met={inherit:!1},$et=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":As(i),"--text-lh":VTe(i),"--text-gradient":t==="gradient"?RW(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?li(s,e):void 0}}),He=co((e,t)=>{const n=qe("Text",Met,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:u,vars:c,className:d,style:f,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,_=Mt({name:["Text",u],props:n,classes:vAe,className:d,style:f,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:$et});return w.jsx(De,{..._("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:g,mod:[{"data-truncate":Net(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});He.classes=vAe;He.displayName="@mantine/core/Text";var bAe={root:"m_849cf0da"};const Fet={underline:"hover"},Ww=co((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=qe("Anchor",Fet,e);return w.jsx(He,{component:"a",ref:t,className:Bt({[bAe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Ww.classes=bAe;Ww.displayName="@mantine/core/Anchor";const[Let,XC]=Qo("AppShell was not found in tree");var Jv={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const jet={},NJ=tt((e,t)=>{const n=qe("AppShellAside",jet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=XC();return h.disabled?null:w.jsx(De,{component:"aside",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});NJ.classes=Jv;NJ.displayName="@mantine/core/AppShellAside";const Bet={},MJ=tt((e,t)=>{const n=qe("AppShellFooter",Bet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=XC();return h.disabled?null:w.jsx(De,{component:"footer",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("footer",{className:Bt({[zE.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-footer-z-index":(c??h.zIndex)?.toString()}})});MJ.classes=Jv;MJ.displayName="@mantine/core/AppShellFooter";const zet={},$J=tt((e,t)=>{const n=qe("AppShellHeader",zet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=XC();return h.disabled?null:w.jsx(De,{component:"header",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("header",{className:Bt({[zE.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-header-z-index":(c??h.zIndex)?.toString()}})});$J.classes=Jv;$J.displayName="@mantine/core/AppShellHeader";const Vet={},FJ=tt((e,t)=>{const n=qe("AppShellMain",Vet,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=XC();return w.jsx(De,{component:"main",ref:t,...u.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...l})});FJ.classes=Jv;FJ.displayName="@mantine/core/AppShellMain";function hR(e){return typeof e=="object"?e.base:e}function pR(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function mR(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function Uet({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){const s=r?.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r?.breakpoint&&!r?.collapsed?.mobile&&(n[r?.breakpoint]=n[r?.breakpoint]||{},n[r?.breakpoint]["--app-shell-aside-width"]="100%",n[r?.breakpoint]["--app-shell-aside-offset"]="0px"),pR(s)){const l=Ye(hR(s));e["--app-shell-aside-width"]=l,e["--app-shell-aside-offset"]=l}if(mR(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ye(s.base),e["--app-shell-aside-offset"]=Ye(s.base)),ji(s).forEach(l=>{l!=="base"&&(t[l]=t[l]||{},t[l]["--app-shell-aside-width"]=Ye(s[l]),t[l]["--app-shell-aside-offset"]=Ye(s[l]))})),r?.collapsed?.desktop){const l=r.breakpoint;t[l]=t[l]||{},t[l]["--app-shell-aside-transform"]=o,t[l]["--app-shell-aside-transform-rtl"]=a,t[l]["--app-shell-aside-offset"]="0px !important"}if(r?.collapsed?.mobile){const l=JQ(r.breakpoint,i.breakpoints)-.1;n[l]=n[l]||{},n[l]["--app-shell-aside-width"]="100%",n[l]["--app-shell-aside-offset"]="0px",n[l]["--app-shell-aside-transform"]=o,n[l]["--app-shell-aside-transform-rtl"]=a}}function Het({baseStyles:e,minMediaStyles:t,footer:n}){const r=n?.height,i="translateY(var(--app-shell-footer-height))",s=n?.offset??!0;if(pR(r)){const o=Ye(hR(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}mR(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ye(r.base),s&&(e["--app-shell-footer-offset"]=Ye(r.base))),ji(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ye(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ye(r[o])))})),n?.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function qet({baseStyles:e,minMediaStyles:t,header:n}){const r=n?.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=n?.offset??!0;if(pR(r)){const o=Ye(hR(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}mR(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ye(r.base),s&&(e["--app-shell-header-offset"]=Ye(r.base))),ji(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ye(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ye(r[o])))})),n?.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function Wet({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){const s=r?.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r?.breakpoint&&!r?.collapsed?.mobile&&(n[r?.breakpoint]=n[r?.breakpoint]||{},n[r?.breakpoint]["--app-shell-navbar-width"]="100%",n[r?.breakpoint]["--app-shell-navbar-offset"]="0px"),pR(s)){const l=Ye(hR(s));e["--app-shell-navbar-width"]=l,e["--app-shell-navbar-offset"]=l}if(mR(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ye(s.base),e["--app-shell-navbar-offset"]=Ye(s.base)),ji(s).forEach(l=>{l!=="base"&&(t[l]=t[l]||{},t[l]["--app-shell-navbar-width"]=Ye(s[l]),t[l]["--app-shell-navbar-offset"]=Ye(s[l]))})),r?.collapsed?.desktop){const l=r.breakpoint;t[l]=t[l]||{},t[l]["--app-shell-navbar-transform"]=o,t[l]["--app-shell-navbar-transform-rtl"]=a,t[l]["--app-shell-navbar-offset"]="0px !important"}if(r?.collapsed?.mobile){const l=JQ(r.breakpoint,i.breakpoints)-.1;n[l]=n[l]||{},n[l]["--app-shell-navbar-width"]="100%",n[l]["--app-shell-navbar-offset"]="0px",n[l]["--app-shell-navbar-transform"]=o,n[l]["--app-shell-navbar-transform-rtl"]=a}}function az(e){return Number(e)===0?"0px":Yi(e)}function Get({padding:e,baseStyles:t,minMediaStyles:n}){pR(e)&&(t["--app-shell-padding"]=az(hR(e))),mR(e)&&(e.base&&(t["--app-shell-padding"]=az(e.base)),ji(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=az(e[r]))}))}function Yet({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},l={};Wet({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),Uet({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),qet({baseStyles:l,minMediaStyles:o,header:t}),Het({baseStyles:l,minMediaStyles:o,footer:n}),Get({baseStyles:l,minMediaStyles:o,padding:i});const u=Ak(ji(o),s.breakpoints).map(f=>({query:`(min-width: ${QM(f.px)})`,styles:o[f.value]})),c=Ak(ji(a),s.breakpoints).map(f=>({query:`(max-width: ${QM(f.px)})`,styles:a[f.value]})),d=[...u,...c];return{baseStyles:l,media:d}}function Ket({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=bs(),o=v0(),{media:a,baseStyles:l}=Yet({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return w.jsx(Hw,{media:a,styles:l,selector:o.cssVariablesSelector})}const Xet={},LJ=tt((e,t)=>{const n=qe("AppShellNavbar",Xet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=XC();return h.disabled?null:w.jsx(De,{component:"nav",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});LJ.classes=Jv;LJ.displayName="@mantine/core/AppShellNavbar";const Qet={},jJ=co((e,t)=>{const n=qe("AppShellSection",Qet,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:l,mod:u,...c}=n,d=XC();return w.jsx(De,{ref:t,mod:[{grow:l},u],...d.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});jJ.classes=Jv;jJ.displayName="@mantine/core/AppShellSection";function Jet({transitionDuration:e,disabled:t}){const[n,r]=k.useState(!0),i=k.useRef(-1),s=k.useRef(-1);return KTe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>k.startTransition(()=>{r(!1)}),200)}),Kv(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>k.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const Zet={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:dc("app")},ett=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),ps=tt((e,t)=>{const n=qe("AppShell",Zet,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,navbar:u,withBorder:c,padding:d,transitionDuration:f,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:_=g!=="alt",mod:E,...S}=n,T=Mt({name:"AppShell",classes:Jv,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ett}),A=Jet({disabled:y,transitionDuration:f});return w.jsxs(Let,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:_},children:[w.jsx(Ket,{navbar:u,header:p,aside:v,footer:b,padding:d}),w.jsx(De,{ref:t,...T("root"),mod:[{resizing:A,layout:g,disabled:y},E],...S})]})});ps.classes=Jv;ps.displayName="@mantine/core/AppShell";ps.Navbar=LJ;ps.Header=$J;ps.Main=FJ;ps.Aside=NJ;ps.Footer=MJ;ps.Section=jJ;function wAe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>wAe(t))}:e}function BJ(e){return e?e.map(t=>wAe(t)):[]}function RF(e){return e.reduce((t,n)=>"group"in n?{...t,...RF(n.items)}:(t[n.value]=n,t),{})}var nc={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const ttt={error:null},ntt=(e,{size:t,color:n})=>({chevron:{"--combobox-chevron-size":_n(t,"combobox-chevron-size"),"--combobox-chevron-color":n?li(n,e):void 0}}),zJ=tt((e,t)=>{const n=qe("ComboboxChevron",ttt,e),{size:r,error:i,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,mod:d,...f}=n,h=Mt({name:"ComboboxChevron",classes:nc,props:n,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,varsResolver:ntt,rootSelector:"chevron"});return w.jsx(De,{component:"svg",...f,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t,children:w.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});zJ.classes=nc;zJ.displayName="@mantine/core/ComboboxChevron";const[rtt,df]=Qo("Combobox component was not found in tree"),xAe=k.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>w.jsx(Qr.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t?.(o)},onClick:o=>{r(),n?.(o)}}));xAe.displayName="@mantine/core/ComboboxClearButton";const itt={},VJ=tt((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=qe("ComboboxDropdown",itt,e),l=df();return w.jsx(jr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});VJ.classes=nc;VJ.displayName="@mantine/core/ComboboxDropdown";const stt={refProp:"ref"},_Ae=tt((e,t)=>{const{children:n,refProp:r}=qe("ComboboxDropdownTarget",stt,e);if(df(),!g0(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return w.jsx(jr.Target,{ref:t,refProp:r,children:n})});_Ae.displayName="@mantine/core/ComboboxDropdownTarget";const ott={},UJ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ComboboxEmpty",ott,e),l=df();return w.jsx(De,{ref:t,...l.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});UJ.classes=nc;UJ.displayName="@mantine/core/ComboboxEmpty";function HJ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=df(),[a,l]=k.useState(null),u=d=>{if(e?.(d),!o.readOnly&&t){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const f=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&f!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.key==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const att={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},EAe=tt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=qe("ComboboxEventsTarget",att,e);if(!g0(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=df(),d=HJ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l});return k.cloneElement(n,{...d,...u,[r]:Is(t,c.store.targetRef,gF(n))})});EAe.displayName="@mantine/core/ComboboxEventsTarget";const ltt={},qJ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ComboboxFooter",ltt,e),l=df();return w.jsx(De,{ref:t,...l.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});qJ.classes=nc;qJ.displayName="@mantine/core/ComboboxFooter";const utt={},WJ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:l,...u}=qe("ComboboxGroup",utt,e),c=df();return w.jsxs(De,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...u,children:[l&&w.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:l}),a]})});WJ.classes=nc;WJ.displayName="@mantine/core/ComboboxGroup";const ctt={},GJ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ComboboxHeader",ctt,e),l=df();return w.jsx(De,{ref:t,...l.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});GJ.classes=nc;GJ.displayName="@mantine/core/ComboboxHeader";function CAe({value:e,valuesDivider:t=",",...n}){return w.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}CAe.displayName="@mantine/core/ComboboxHiddenInput";const dtt={},YJ=tt((e,t)=>{const n=qe("ComboboxOption",dtt,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:l,id:u,active:c,onMouseDown:d,onMouseOver:f,disabled:h,selected:p,mod:m,...g}=n,y=df(),v=k.useId(),b=u||v;return w.jsx(De,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:_=>{h?_.preventDefault():(y.onOptionSubmit?.(n.value,n),l?.(_))},onMouseDown:_=>{_.preventDefault(),d?.(_)},onMouseOver:_=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),f?.(_)}})});YJ.classes=nc;YJ.displayName="@mantine/core/ComboboxOption";const ftt={},KJ=tt((e,t)=>{const n=qe("ComboboxOptions",ftt,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:u,...c}=n,d=df(),f=Xa(a);return k.useEffect(()=>{d.store.setListId(f)},[f]),w.jsx(De,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:f,role:"listbox","aria-labelledby":u,onMouseDown:h=>{h.preventDefault(),l?.(h)}})});KJ.classes=nc;KJ.displayName="@mantine/core/ComboboxOptions";const htt={withAriaAttributes:!0,withKeyboardNavigation:!0},XJ=tt((e,t)=>{const n=qe("ComboboxSearch",htt,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:u,size:c,...d}=n,f=df(),h=f.getStyles("search"),p=HJ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return w.jsx(Qr,{ref:Is(t,f.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||f.size,...p,...d,__staticSelector:"Combobox"})});XJ.classes=nc;XJ.displayName="@mantine/core/ComboboxSearch";const ptt={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},SAe=tt((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=qe("ComboboxTarget",ptt,e);if(!g0(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=df(),d=HJ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l}),f=k.cloneElement(n,{...d,...u});return w.jsx(jr.Target,{ref:Is(t,c.store.targetRef),children:f})});SAe.displayName="@mantine/core/ComboboxTarget";function mtt(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function gtt(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function ytt(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function gR({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=Ki({value:t,defaultValue:e,finalValue:!1,onChange:n}),u=k.useRef(null),c=k.useRef(-1),d=k.useRef(null),f=k.useRef(null),h=k.useRef(-1),p=k.useRef(-1),m=k.useRef(-1),g=k.useCallback((B="unknown")=>{a||(l(!0),i?.(B))},[l,i,a]),y=k.useCallback((B="unknown")=>{a&&(l(!1),r?.(B))},[l,r,a]),v=k.useCallback((B="unknown")=>{a?y(B):g(B)},[y,g,a]),b=k.useCallback(()=>{const B=document.querySelector(`#${u.current} [data-combobox-selected]`);B?.removeAttribute("data-combobox-selected"),B?.removeAttribute("aria-selected")},[]),_=k.useCallback(B=>{const q=document.getElementById(u.current)?.querySelectorAll("[data-combobox-option]");if(!q)return null;const G=B>=q.length?0:B<0?q.length-1:B;return c.current=G,q?.[G]&&!q[G].hasAttribute("data-combobox-disabled")?(b(),q[G].setAttribute("data-combobox-selected","true"),q[G].setAttribute("aria-selected","true"),q[G].scrollIntoView({block:"nearest",behavior:o}),q[G].id):null},[o,b]),E=k.useCallback(()=>{const B=document.querySelector(`#${u.current} [data-combobox-active]`);if(B){const H=document.querySelectorAll(`#${u.current} [data-combobox-option]`),q=Array.from(H).findIndex(G=>G===B);return _(q)}return _(0)},[_]),S=k.useCallback(()=>_(gtt(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[_,s]),T=k.useCallback(()=>_(mtt(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[_,s]),A=k.useCallback(()=>_(ytt(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[_]),R=k.useCallback((B="selected",H)=>{m.current=window.setTimeout(()=>{const q=document.querySelectorAll(`#${u.current} [data-combobox-option]`),G=Array.from(q).findIndex(U=>U.hasAttribute(`data-combobox-${B}`));c.current=G,H?.scrollIntoView&&q[G]?.scrollIntoView({block:"nearest",behavior:o})},0)},[]),I=k.useCallback(()=>{c.current=-1,b()},[b]),P=k.useCallback(()=>{document.querySelectorAll(`#${u.current} [data-combobox-option]`)?.[c.current]?.click()},[]),N=k.useCallback(B=>{u.current=B},[]),M=k.useCallback(()=>{h.current=window.setTimeout(()=>d.current.focus(),0)},[]),O=k.useCallback(()=>{p.current=window.setTimeout(()=>f.current.focus(),0)},[]),j=k.useCallback(()=>c.current,[]);return k.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:j,selectOption:_,selectFirstOption:A,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:R,listId:u.current,setListId:N,clickSelectedOption:P,searchRef:d,focusSearchInput:M,targetRef:f,focusTarget:O}}const vtt={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},btt=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":As(t),"--combobox-option-padding":_n(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ye(n),"--combobox-option-fz":As(t),"--combobox-option-padding":_n(t,"combobox-option-padding")}});function Jn(e){const t=qe("Combobox",vtt,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:u,size:c,dropdownPadding:d,resetSelectionOnOptionHover:f,__staticSelector:h,readOnly:p,...m}=t,g=gR(),y=o||g,v=Mt({name:h||"Combobox",classes:nc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:btt}),b=()=>{u?.(),y.closeDropdown()};return w.jsx(rtt,{value:{getStyles:v,store:y,onOptionSubmit:l,size:c,resetSelectionOnOptionHover:f,readOnly:p},children:w.jsx(jr,{opened:y.dropdownOpened,...m,onChange:_=>!_&&b(),withRoles:!1,unstyled:i,children:s})})}const wtt=e=>e;Jn.extend=wtt;Jn.classes=nc;Jn.displayName="@mantine/core/Combobox";Jn.Target=SAe;Jn.Dropdown=VJ;Jn.Options=KJ;Jn.Option=YJ;Jn.Search=XJ;Jn.Empty=UJ;Jn.Chevron=zJ;Jn.Footer=qJ;Jn.Header=GJ;Jn.EventsTarget=EAe;Jn.DropdownTarget=_Ae;Jn.Group=WJ;Jn.ClearButton=xAe;Jn.HiddenInput=CAe;var TAe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const AAe=TAe,DF=k.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:l,id:u,disabled:c,error:d,size:f,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,..._},E)=>{const S=Mt({name:e,props:t,className:n,style:y,classes:TAe,classNames:r,styles:i,unstyled:s});return w.jsx(De,{...S("root"),ref:E,__vars:{"--label-fz":As(f),"--label-lh":_n(f,"label-lh")},mod:[{"label-position":h},b],variant:g,size:f,..._,children:w.jsxs(De,{component:p,htmlFor:p==="label"?u:void 0,...S("body"),children:[o,w.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&w.jsx(De,{component:m,htmlFor:m==="label"?u:void 0,...S("label"),"data-disabled":c||void 0,children:a}),l&&w.jsx(Qr.Description,{size:f,__inheritStyles:!1,...S("description"),children:l}),d&&typeof d!="boolean"&&w.jsx(Qr.Error,{size:f,__inheritStyles:!1,...S("error"),children:d})]})]})})});DF.displayName="@mantine/core/InlineInput";const kAe=k.createContext(null),xtt=kAe.Provider,IAe=()=>k.useContext(kAe),[_tt,Ett]=y0();var RAe={card:"m_26775b0a"};const Ctt={withBorder:!0},Stt=(e,{radius:t})=>({card:{"--card-radius":Jr(t)}}),QJ=tt((e,t)=>{const n=qe("CheckboxCard",Ctt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,defaultChecked:p,onChange:m,...g}=n,y=Mt({name:"CheckboxCard",classes:RAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Stt,rootSelector:"card"}),v=IAe(),b=typeof u=="boolean"?u:v?v.value.includes(f||""):void 0,[_,E]=Ki({value:b,defaultValue:p,finalValue:!1,onChange:m});return w.jsx(_tt,{value:{checked:_},children:w.jsx(Co,{ref:t,mod:[{"with-border":d,checked:_},c],...y("card"),...g,role:"checkbox","aria-checked":_,onClick:S=>{h?.(S),v?.onChange(f||""),E(!_)}})})});QJ.displayName="@mantine/core/CheckboxCard";QJ.classes=RAe;function JJ({children:e,role:t}){const n=KC();return n?w.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):w.jsx(w.Fragment,{children:e})}const Ttt={},ZJ=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=qe("CheckboxGroup",Ttt,e),[c,d]=Ki({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return w.jsx(xtt,{value:{value:c,onChange:f,size:s},children:w.jsx(Qr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"CheckboxGroup",children:w.jsx(JJ,{role:"group",children:a})})})});ZJ.classes=Qr.Wrapper.classes;ZJ.displayName="@mantine/core/CheckboxGroup";function eZ({size:e,style:t,...n}){const r=e!==void 0?{width:Ye(e),height:Ye(e),...t}:t;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function DAe({indeterminate:e,...t}){return e?w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:w.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):w.jsx(eZ,{...t})}var PAe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Att={icon:DAe},ktt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Sh({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":_n(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Jr(t),"--checkbox-color":s==="outline"?l:li(n,e),"--checkbox-icon-color":i?li(i,e):Xv(o,e)?ym({color:n,theme:e,autoContrast:o}):void 0}}},tZ=tt((e,t)=>{const n=qe("CheckboxIndicator",Att,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,indeterminate:c,radius:d,color:f,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,_=u,E=Mt({name:"CheckboxIndicator",classes:PAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ktt,rootSelector:"indicator"}),S=Ett(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:S?.checked||!1;return w.jsx(De,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:w.jsx(_,{indeterminate:c,...E("icon")})})});tZ.displayName="@mantine/core/CheckboxIndicator";tZ.classes=PAe;var OAe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Itt={labelPosition:"right",icon:DAe},Rtt=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Sh({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":_n(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Jr(t),"--checkbox-color":s==="outline"?l:li(n,e),"--checkbox-icon-color":i?li(i,e):Xv(o,e)?ym({color:n,theme:e,autoContrast:o}):void 0}}},_l=tt((e,t)=>{const n=qe("Checkbox",Itt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,id:d,size:f,radius:h,wrapperProps:p,checked:m,labelPosition:g,description:y,error:v,disabled:b,variant:_,indeterminate:E,icon:S,rootRef:T,iconColor:A,onChange:R,autoContrast:I,mod:P,...N}=n,M=IAe(),O=f||M?.size,j=S,B=Mt({name:"Checkbox",props:n,classes:OAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Rtt}),{styleProps:H,rest:q}=qw(N),G=Xa(d),U=M?{checked:M.value.includes(q.value),onChange:V=>{M.onChange(V),R?.(V)}}:{},L=k.useRef(null),z=t||L;return k.useEffect(()=>{z&&"current"in z&&z.current&&(z.current.indeterminate=E||!1)},[E,z]),w.jsx(DF,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:G,size:O,labelPosition:g,label:c,description:y,error:v,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||m||void 0,variant:_,ref:T,mod:P,...H,...p,children:w.jsxs(De,{...B("inner"),mod:{"data-label-position":g},children:[w.jsx(De,{component:"input",id:G,ref:z,checked:m,disabled:b,mod:{error:!!v,indeterminate:E},...B("input",{focusable:!0,variant:_}),onChange:R,...q,...U,type:"checkbox"}),w.jsx(j,{indeterminate:E,...B("icon")})]})})});_l.classes={...OAe,...AAe};_l.displayName="@mantine/core/Checkbox";_l.Group=ZJ;_l.Indicator=tZ;_l.Card=QJ;function GE(e){return"group"in e}function NAe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;GE(o)&&i.push({group:o.group,items:NAe({options:o.items,search:t,limit:n-i.length})}),GE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Dtt(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function MAe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(GE(n))MAe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Ptt(e,t){return Array.isArray(e)?e.includes(t):e===t}function $Ae({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!GE(e)){const a=Ptt(n,e.value),l=t&&a&&w.jsx(eZ,{className:nc.optionsDropdownCheckIcon}),u=w.jsxs(w.Fragment,{children:[r==="left"&&l,w.jsx("span",{children:e.label}),r==="right"&&l]});return w.jsx(Jn.Option,{value:e.value,disabled:e.disabled,className:Bt({[nc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):u})}const o=e.items.map(a=>w.jsx($Ae,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return w.jsx(Jn.Group,{label:e.group,children:o})}function nZ({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:u=!1,value:c,checkIconPosition:d,nothingFoundMessage:f,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){MAe(e);const b=typeof i=="string"?(r||NAe)({options:e,search:l?i:"",limit:s??1/0}):e,_=Dtt(b),E=b.map(S=>w.jsx($Ae,{data:S,withCheckIcon:u,value:c,checkIconPosition:d,unstyled:h,renderOption:m},GE(S)?S.group:S.value));return w.jsx(Jn.Dropdown,{hidden:t||n&&_,"data-composed":!0,children:w.jsxs(Jn.Options,{labelledBy:p,"aria-label":y,children:[a?w.jsx(Qp.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,_&&f&&w.jsx(Jn.Empty,{children:f})]})})}const Ott={},rZ=tt((e,t)=>{const n=qe("Autocomplete",Ott,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:_,readOnly:E,disabled:S,filter:T,limit:A,withScrollArea:R,maxDropdownHeight:I,size:P,id:N,renderOption:M,autoComplete:O,scrollAreaProps:j,onClear:B,clearButtonProps:H,error:q,clearable:G,rightSection:U,...L}=n,z=Xa(N),V=BJ(m),Y=RF(V),[Q,ne]=Ki({value:g,defaultValue:y,finalValue:"",onChange:p}),ue=gR({opened:a,defaultOpened:l,onDropdownOpen:c,onDropdownClose:()=>{u?.(),ue.resetSelectedOption()}}),se=le=>{ne(le),ue.resetSelectedOption()},{resolvedClassNames:ae,resolvedStyles:he}=Th({props:n,styles:i,classNames:r});k.useEffect(()=>{v&&ue.selectFirstOption()},[v,Q]);const ie=w.jsx(Jn.ClearButton,{...H,onClear:()=>{se(""),B?.()}});return w.jsxs(Jn,{store:ue,__staticSelector:"Autocomplete",classNames:ae,styles:he,unstyled:s,readOnly:E,onOptionSubmit:le=>{b?.(le),se(Y[le].label),ue.closeDropdown()},size:P,..._,children:[w.jsx(Jn.Target,{autoComplete:O,children:w.jsx(bu,{ref:t,...L,size:P,__staticSelector:"Autocomplete",__clearSection:ie,__clearable:G&&!!Q&&!S&&!E,rightSection:U,disabled:S,readOnly:E,value:Q,error:q,onChange:le=>{se(le.currentTarget.value),ue.openDropdown(),v&&ue.selectFirstOption()},onFocus:le=>{ue.openDropdown(),d?.(le)},onBlur:le=>{ue.closeDropdown(),f?.(le)},onClick:le=>{ue.openDropdown(),h?.(le)},classNames:ae,styles:he,unstyled:s,id:z})}),w.jsx(nZ,{data:V,hidden:E||S,filter:T,search:Q,limit:A,hiddenWhenEmpty:!0,withScrollArea:R,maxDropdownHeight:I,unstyled:s,labelId:L.label?`${z}-label`:void 0,"aria-label":L.label?void 0:L["aria-label"],renderOption:M,scrollAreaProps:j})]})});rZ.classes={...bu.classes,...Jn.classes};rZ.displayName="@mantine/core/Autocomplete";var FAe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Ntt={},Mtt=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":_n(s,"badge-height"),"--badge-padding-x":_n(s,"badge-padding-x"),"--badge-fz":_n(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Jr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?li(n,e):void 0}}},_o=co((e,t)=>{const n=qe("Badge",Ntt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,gradient:d,leftSection:f,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,..._}=n,E=Mt({name:"Badge",props:n,classes:FAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Mtt});return w.jsxs(De,{variant:m,mod:[{block:g,circle:v,"with-right-section":!!h,"with-left-section":!!f},b],...E("root",{variant:m}),ref:t,..._,children:[f&&w.jsx("span",{...E("section"),"data-position":"left",children:f}),w.jsx("span",{...E("label"),children:p}),h&&w.jsx("span",{...E("section"),"data-position":"right",children:h})]})});_o.classes=FAe;_o.displayName="@mantine/core/Badge";var QC={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const Zfe={orientation:"horizontal"},$tt=(e,{borderWidth:t})=>({group:{"--button-border-width":Ye(t)}}),iZ=tt((e,t)=>{const n=qe("ButtonGroup",Zfe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=qe("ButtonGroup",Zfe,e),p=Mt({name:"ButtonGroup",props:n,classes:QC,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:$tt,rootSelector:"group"});return w.jsx(De,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});iZ.classes=QC;iZ.displayName="@mantine/core/ButtonGroup";const ehe={},Ftt=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":_n(o,"section-height"),"--section-padding-x":_n(o,"section-padding-x"),"--section-fz":o?.includes("compact")?As(o.replace("compact-","")):As(o),"--section-radius":t===void 0?void 0:Jr(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},sZ=tt((e,t)=>{const n=qe("ButtonGroupSection",ehe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,variant:u,gradient:c,radius:d,autoContrast:f,...h}=qe("ButtonGroupSection",ehe,e),p=Mt({name:"ButtonGroupSection",props:n,classes:QC,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Ftt,rootSelector:"groupSection"});return w.jsx(De,{...p("groupSection"),ref:t,variant:u,...h})});sZ.classes=QC;sZ.displayName="@mantine/core/ButtonGroupSection";const Ltt={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ye(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},jtt={},Btt=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":_n(s,"button-height"),"--button-padding-x":_n(s,"button-padding-x"),"--button-fz":s?.includes("compact")?As(s.replace("compact-","")):As(s),"--button-radius":t===void 0?void 0:Jr(t),"--button-bg":n||i?l.background:void 0,"--button-hover":n||i?l.hover:void 0,"--button-color":l.color,"--button-bd":n||i?l.border:void 0,"--button-hover-color":n||i?l.hoverColor:void 0}}},Yt=co((e,t)=>{const n=qe("Button",jtt,e),{style:r,vars:i,className:s,color:o,disabled:a,children:l,leftSection:u,rightSection:c,fullWidth:d,variant:f,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":_,autoContrast:E,mod:S,...T}=n,A=Mt({name:"Button",props:n,classes:QC,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:Btt}),R=!!u,I=!!c;return w.jsxs(Co,{ref:t,...A("root",{active:!a&&!p&&!_}),unstyled:b,variant:f,disabled:a||p,mod:[{disabled:a||_,loading:p,block:d,"with-left-section":R,"with-right-section":I},S],...T,children:[w.jsx(uf,{mounted:!!p,transition:Ltt,duration:150,children:P=>w.jsx(De,{component:"span",...A("loader",{style:P}),"aria-hidden":!0,children:w.jsx(td,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),w.jsxs("span",{...A("inner"),children:[u&&w.jsx(De,{component:"span",...A("section"),mod:{position:"left"},children:u}),w.jsx(De,{component:"span",mod:{loading:p},...A("label"),children:l}),c&&w.jsx(De,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});Yt.classes=QC;Yt.displayName="@mantine/core/Button";Yt.Group=iZ;Yt.GroupSection=sZ;const[ztt,Vtt]=Qo("Card component was not found in tree");var oZ={root:"m_e615b15f",section:"m_599a2148"};const Utt={},PF=co((e,t)=>{const n=qe("CardSection",Utt,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:l,inheritPadding:u,mod:c,...d}=n,f=Vtt();return w.jsx(De,{ref:t,mod:[{"with-border":l,"inherit-padding":u},c],...f.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...d})});PF.classes=oZ;PF.displayName="@mantine/core/CardSection";const Htt={},qtt=(e,{padding:t})=>({root:{"--card-padding":Yi(t)}}),Zv=co((e,t)=>{const n=qe("Card",Htt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,padding:c,...d}=n,f=Mt({name:"Card",props:n,classes:oZ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:qtt}),h=k.Children.toArray(u),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===PF?k.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return w.jsx(ztt,{value:{getStyles:f},children:w.jsx(lf,{ref:t,unstyled:a,...f("root"),...d,children:p})})});Zv.classes=oZ;Zv.displayName="@mantine/core/Card";Zv.Section=PF;var LAe={root:"m_4451eb3a"};const Wtt={},Ko=co((e,t)=>{const n=qe("Center",Wtt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,inline:u,mod:c,...d}=n,f=Mt({name:"Center",props:n,classes:LAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l});return w.jsx(De,{ref:t,mod:[{inline:u},c],...f("root"),...d})});Ko.classes=LAe;Ko.displayName="@mantine/core/Center";var jAe={root:"m_b183c0a2"};const Gtt={},Ytt=(e,{color:t})=>({root:{"--code-bg":t?li(t,e):void 0}}),Cp=tt((e,t)=>{const n=qe("Code",Gtt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,block:c,variant:d,mod:f,...h}=n,p=Mt({name:"Code",props:n,classes:jAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ytt});return w.jsx(De,{component:c?"pre":"code",variant:d,ref:t,mod:[{block:c},f],...p("root"),...h,dir:"ltr"})});Cp.classes=jAe;Cp.displayName="@mantine/core/Code";var BAe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const the={withShadow:!0},Ktt=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Jr(t),"--cs-size":Ye(n)}}),Vg=co((e,t)=>{const n=qe("ColorSwatch",the,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,size:c,radius:d,withShadow:f,children:h,variant:p,...m}=qe("ColorSwatch",the,n),g=Mt({name:"ColorSwatch",props:n,classes:BAe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ktt});return w.jsxs(De,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[w.jsx("span",{...g("alphaOverlay")}),f&&w.jsx("span",{...g("shadowOverlay")}),w.jsx("span",{...g("colorOverlay",{style:{backgroundColor:u}})}),w.jsx("span",{...g("childrenOverlay"),children:h})]})});Vg.classes=BAe;Vg.displayName="@mantine/core/ColorSwatch";const[Xtt,aZ]=y0(null),lZ=k.forwardRef(({position:e,...t},n)=>w.jsx(De,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));lZ.displayName="@mantine/core/ColorPickerThumb";var uZ={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const Qtt={},cZ=tt((e,t)=>{const n=qe("ColorSlider",Qtt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onChange:u,onChangeEnd:c,maxValue:d,round:f,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:v,onScrubEnd:b,__staticSelector:_="ColorPicker",...E}=n,S=Mt({name:_,classes:uZ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),A=aZ()?.getStyles||S,R=bs(),[I,P]=k.useState({y:0,x:m/d}),N=k.useRef(I),M=q=>f?Math.round(q*d):q*d,{ref:O}=lR(({x:q,y:G})=>{N.current={x:q,y:G},u?.(M(q))},{onScrubEnd:()=>{const{x:q}=N.current;c?.(M(q)),b?.()},onScrubStart:v});fu(()=>{P({y:0,x:m/d})},[m]);const j=(q,G)=>{q.preventDefault();const U=QTe(G);u?.(M(U.x)),c?.(M(U.x))},B=q=>{switch(q.key){case"ArrowRight":{j(q,{x:I.x+.05,y:I.y});break}case"ArrowLeft":{j(q,{x:I.x-.05,y:I.y});break}}},H=g.map((q,G)=>k.createElement("div",{...A("sliderOverlay"),style:q,key:G}));return w.jsxs(De,{...E,ref:Is(O,t),...A("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":d,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:B,"data-focus-ring":R.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[H,w.jsx(lZ,{position:I,...A("thumb",{style:{top:Ye(1),background:y}})})]})});cZ.displayName="@mantine/core/ColorSlider";function Nd(e,t=0,n=10**t){return Math.round(n*e)/n}function Jtt({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const Ztt={grad:360/400,turn:360,rad:360/(Math.PI*2)};function ent(e,t="deg"){return Number(e)*(Ztt[t]||1)}const tnt=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function nhe(e){const t=tnt.exec(e);return t?Jtt({h:ent(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function zW({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:Nd(60*(o<0?o+6:o),3),s:Nd(i?s/i*100:0,3),v:Nd(i/255*100,3),a:r}}function VW(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?zW({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):zW({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function nnt(e){const t=e[0]==="#"?e.slice(1):e,n=o=>Nd(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...VW(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...VW(r),a:i}}const rnt=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function rhe(e){const t=rnt.exec(e);return t?zW({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const zAe={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},int={hex:VW,hexa:nnt,rgb:rhe,rgba:rhe,hsl:nhe,hsla:nhe};function H2(e){for(const[,t]of Object.entries(zAe))if(t.test(e))return!0;return!1}function kb(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(zAe))if(r.test(t))return int[n](t);return{h:0,s:0,v:0,a:1}}const snt={},VAe=k.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=qe("AlphaSlider",snt,e);return w.jsx(cZ,{...o,ref:t,value:n,onChange:a=>r?.(Nd(a,2)),onChangeEnd:a=>i?.(Nd(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${Ye(8)} ${Ye(8)}`,backgroundPosition:`0 0, 0 ${Ye(4)}, ${Ye(4)} ${Ye(-4)}, ${Ye(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ye(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ye(4)} inset`}]})});VAe.displayName="@mantine/core/AlphaSlider";function UAe({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),l=o*(1-s),u=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),d=a%6;return{r:Nd([o,u,l,l,c,o][d]*255),g:Nd([c,o,o,u,l,l][d]*255),b:Nd([l,l,c,o,o,u][d]*255),a:Nd(r,2)}}function ihe(e,t){const{r:n,g:r,b:i,a:s}=UAe(e);return t?`rgba(${n}, ${r}, ${i}, ${Nd(s,2)})`:`rgb(${n}, ${r}, ${i})`}function she({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${Nd(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function n4(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function HAe(e){const{r:t,g:n,b:r}=UAe(e);return`#${n4(t)}${n4(n)}${n4(r)}`}function ont(e){const t=Math.round(e.a*255);return`${HAe(e)}${n4(t)}`}const lz={hex:HAe,hexa:e=>ont(e),rgb:e=>ihe(e,!1),rgba:e=>ihe(e,!0),hsl:e=>she(e,!1),hsla:e=>she(e,!0)};function $f(e,t){return t?e in lz?lz[e](t):lz.hex(t):"#000000"}const qAe=k.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=qe("HueSlider",{},e);return w.jsx(cZ,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Ye(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Ye(4)} inset`}]})});qAe.displayName="@mantine/core/HueSlider";function WAe({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:l,onScrubEnd:u,...c}){const{getStyles:d}=aZ(),[f,h]=k.useState({x:r.s/100,y:1-r.v/100}),p=k.useRef(f),{ref:m}=lR(({x:v,y:b})=>{p.current={x:v,y:b},t({s:Math.round(v*100),v:Math.round((1-b)*100)})},{onScrubEnd:()=>{const{x:v,y:b}=p.current;n({s:Math.round(v*100),v:Math.round((1-b)*100)}),u?.()},onScrubStart:l});k.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(v,b)=>{v.preventDefault();const _=QTe(b);t({s:Math.round(_.x*100),v:Math.round((1-_.y)*100)}),n({s:Math.round(_.x*100),v:Math.round((1-_.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:f.y-.05,x:f.x});break}case"ArrowDown":{g(v,{y:f.y+.05,x:f.x});break}case"ArrowRight":{g(v,{x:f.x+.05,y:f.y});break}case"ArrowLeft":{g(v,{x:f.x-.05,y:f.y});break}}};return w.jsxs(De,{...d("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":f.x,"aria-valuetext":$f("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[w.jsx("div",{...d("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),w.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),w.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),w.jsx(lZ,{position:f,...d("thumb",{style:{backgroundColor:a}})})]})}WAe.displayName="@mantine/core/Saturation";const GAe=k.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...l},u)=>{const c=aZ(),d=o.map((f,h)=>k.createElement(Vg,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:f,key:h,radius:"sm",onClick:()=>{n(f),r?.(f)},"aria-label":f,tabIndex:s?0:-1,"data-swatch":!0}));return w.jsx(De,{...c.getStyles("swatches"),ref:u,...l,children:d})});GAe.displayName="@mantine/core/Swatches";const ant={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},lnt=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":_n(t,"cp-preview-size"),"--cp-width":_n(t,"cp-width"),"--cp-body-spacing":Yi(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":_n(t,"cp-thumb-size"),"--cp-saturation-height":_n(t,"cp-saturation-height")}}),OF=tt((e,t)=>{const n=qe("ColorPicker",ant,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,format:u,value:c,defaultValue:d,onChange:f,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:v,focusable:b,swatches:_,swatchesPerRow:E,fullWidth:S,onColorSwatchClick:T,__staticSelector:A,mod:R,...I}=n,P=Mt({name:A,props:n,classes:uZ,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:l,varsResolver:lnt}),N=k.useRef(u),M=k.useRef(""),O=k.useRef(-1),j=k.useRef(!1),B=u==="hexa"||u==="rgba"||u==="hsla",[H,q,G]=Ki({value:c,defaultValue:d,finalValue:"#FFFFFF",onChange:f}),[U,L]=k.useState(kb(H)),z=()=>{window.clearTimeout(O.current),j.current=!0},V=()=>{window.clearTimeout(O.current),O.current=window.setTimeout(()=>{j.current=!1},200)},Y=Q=>{L(ne=>{const ue={...ne,...Q};return M.current=$f(N.current,ue),ue}),q(M.current)};return fu(()=>{H2(c)&&!j.current&&L(kb(c))},[c]),fu(()=>{N.current=u,q($f(u,U))},[u]),w.jsx(Xtt,{value:{getStyles:P,unstyled:a},children:w.jsxs(De,{ref:t,...P("wrapper"),size:m,mod:[{"full-width":S},R],...I,children:[p&&w.jsxs(w.Fragment,{children:[w.jsx(WAe,{value:U,onChange:Y,onChangeEnd:({s:Q,v:ne})=>h?.($f(N.current,{...U,s:Q,v:ne})),color:H,size:m,focusable:b,saturationLabel:g,onScrubStart:z,onScrubEnd:V}),w.jsxs("div",{...P("body"),children:[w.jsxs("div",{...P("sliders"),children:[w.jsx(qAe,{value:U.h,onChange:Q=>Y({h:Q}),onChangeEnd:Q=>h?.($f(N.current,{...U,h:Q})),size:m,focusable:b,"aria-label":y,onScrubStart:z,onScrubEnd:V}),B&&w.jsx(VAe,{value:U.a,onChange:Q=>Y({a:Q}),onChangeEnd:Q=>{h?.($f(N.current,{...U,a:Q}))},size:m,color:$f("hex",U),focusable:b,"aria-label":v,onScrubStart:z,onScrubEnd:V})]}),B&&w.jsx(Vg,{color:H,radius:"sm",size:"var(--cp-preview-size)",...P("preview")})]})]}),Array.isArray(_)&&w.jsx(GAe,{data:_,swatchesPerRow:E,focusable:b,setValue:q,onChangeEnd:Q=>{const ne=$f(u,kb(Q));T?.(ne),h?.(ne),G||L(kb(Q))}})]})})});OF.classes=uZ;OF.displayName="@mantine/core/ColorPicker";function unt({style:e,...t}){return w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...e},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[w.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),w.jsx("path",{d:"M11 7l6 6"}),w.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}var ohe={eyeDropperIcon:"m_b077c2bc",colorPreview:"m_c5ccdcab",dropdown:"m_5ece2cd7"};const ahe={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},cnt=(e,{size:t})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":_n(t,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":_n(t,"ci-preview-size")}}),a6=tt((e,t)=>{const n=qe("ColorInput",ahe,e),{classNames:r,styles:i,unstyled:s,disallowInput:o,fixOnBlur:a,popoverProps:l,withPreview:u,withEyeDropper:c,eyeDropperIcon:d,closeOnColorSwatchClick:f,eyeDropperButtonProps:h,value:p,defaultValue:m,onChange:g,onChangeEnd:y,onClick:v,onFocus:b,onBlur:_,inputProps:E,format:S,wrapperProps:T,readOnly:A,withPicker:R,swatches:I,disabled:P,leftSection:N,rightSection:M,swatchesPerRow:O,...j}=AJ("ColorInput",ahe,e),B=Mt({name:"ColorInput",props:n,classes:ohe,classNames:r,styles:i,unstyled:s,rootSelector:"wrapper",vars:n.vars,varsResolver:cnt}),{resolvedClassNames:H,resolvedStyles:q}=Th({classNames:r,styles:i,props:n}),[G,U]=k.useState(!1),[L,z]=k.useState(""),[V,Y]=Ki({value:p,defaultValue:m,finalValue:"",onChange:g}),{supported:Q,open:ne}=rXe(),ue=w.jsx(Rn,{...h,...B("eyeDropperButton",{className:h?.className,style:h?.style}),variant:"subtle",color:"gray",size:E.size,unstyled:s,onClick:()=>ne().then(ie=>{if(ie?.sRGBHex){const le=$f(S,kb(ie.sRGBHex));Y(le),y?.(le)}}).catch(()=>{}),children:d||w.jsx(unt,{...B("eyeDropperIcon")})}),se=ie=>{b?.(ie),U(!0)},ae=ie=>{a&&Y(L),_?.(ie),U(!1)},he=ie=>{v?.(ie),U(!0)};return k.useEffect(()=>{(H2(V)||V.trim()==="")&&z(V)},[V]),fu(()=>{H2(V)&&Y($f(S,kb(V)))},[S]),w.jsx(Qr.Wrapper,{...T,classNames:H,styles:q,__staticSelector:"ColorInput",children:w.jsxs(jr,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,opened:G,...l,classNames:H,styles:q,unstyled:s,withRoles:!1,disabled:A||R===!1&&(!Array.isArray(I)||I.length===0),children:[w.jsx(jr.Target,{children:w.jsx(Qr,{autoComplete:"off",...j,...E,classNames:H,styles:q,disabled:P,ref:t,__staticSelector:"ColorInput",onFocus:se,onBlur:ae,onClick:he,spellCheck:!1,value:V,onChange:ie=>{const le=ie.currentTarget.value;Y(le),H2(le)&&y?.($f(S,kb(le)))},leftSection:N||(u?w.jsx(Vg,{color:H2(V)?V:"#fff",size:"var(--ci-preview-size)",...B("colorPreview")}):null),readOnly:o||A,pointer:o,unstyled:s,rightSection:M||(c&&!P&&!A&&Q?ue:null)})}),w.jsx(jr.Dropdown,{onMouseDown:ie=>ie.preventDefault(),className:ohe.dropdown,children:w.jsx(OF,{__staticSelector:"ColorInput",value:V,onChange:Y,onChangeEnd:y,format:S,swatches:I,swatchesPerRow:O,withPicker:R,size:E.size,focusable:!1,unstyled:s,styles:q,classNames:H,onColorSwatchClick:()=>f&&U(!1)})})]})})});a6.classes=bu.classes;a6.displayName="@mantine/core/ColorInput";var YAe={root:"m_7485cace"};const dnt={},fnt=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:_n(t,"container-size")}}),w0=tt((e,t)=>{const n=qe("Container",dnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fluid:u,mod:c,...d}=n,f=Mt({name:"Container",classes:YAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:fnt});return w.jsx(De,{ref:t,mod:[{fluid:u},c],...f("root"),...d})});w0.classes=YAe;w0.displayName="@mantine/core/Container";const hnt={timeout:1e3};function KAe(e){const{children:t,timeout:n,value:r,...i}=qe("CopyButton",hnt,e),s=OKe({timeout:n}),o=()=>s.copy(r);return w.jsx(w.Fragment,{children:t({copy:o,copied:s.copied,...i})})}KAe.displayName="@mantine/core/CopyButton";var XAe={root:"m_3eebeb36",label:"m_9e365f20"};const pnt={orientation:"horizontal"},mnt=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?li(t,e):void 0,"--divider-border-style":n,"--divider-size":_n(r,"divider-size")}}),JC=tt((e,t)=>{const n=qe("Divider",pnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,orientation:c,label:d,labelPosition:f,mod:h,...p}=n,m=Mt({name:"Divider",classes:XAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:mnt});return w.jsx(De,{ref:t,mod:[{orientation:c,"with-label":!!d},h],...m("root"),...p,role:"separator",children:d&&w.jsx(De,{component:"span",mod:{position:f},...m("label"),children:d})})});JC.classes=XAe;JC.displayName="@mantine/core/Divider";function QAe({open:e,close:t,openDelay:n,closeDelay:r}){const i=k.useRef(-1),s=k.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},l=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return k.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:l}}const[lhe,JAe]=Qo("Grid component was not found in tree"),UW=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,uhe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":UW(e,t),che=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},dhe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function gnt({span:e,order:t,offset:n,selector:r}){const i=bs(),s=JAe(),o=s.breakpoints||i.breakpoints,l=Wf(e)===void 0?12:Wf(e),u=Yv({"--col-order":Wf(t)?.toString(),"--col-flex-grow":che(l,s.grow),"--col-flex-basis":UW(l,s.columns),"--col-width":l==="content"?"auto":void 0,"--col-max-width":uhe(l,s.columns,s.grow),"--col-offset":dhe(Wf(n),s.columns)}),c=ji(o).reduce((h,p)=>(h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=t[p]?.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=che(e[p],s.grow),h[p]["--col-flex-basis"]=UW(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=uhe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=dhe(n[p],s.columns)),h),{}),f=Ak(ji(c),o).filter(h=>ji(c[h.value]).length>0).map(h=>({query:s.type==="container"?`mantine-grid (min-width: ${o[h.value]})`:`(min-width: ${o[h.value]})`,styles:c[h.value]}));return w.jsx(Hw,{styles:u,media:s.type==="container"?void 0:f,container:s.type==="container"?f:void 0,selector:r})}var dZ={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const ynt={span:12},fZ=tt((e,t)=>{const n=qe("GridCol",ynt,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:l,order:u,offset:c,...d}=n,f=JAe(),h=uR();return w.jsxs(w.Fragment,{children:[w.jsx(gnt,{selector:`.${h}`,span:l,order:u,offset:c}),w.jsx(De,{ref:t,...f.getStyles("col",{className:Bt(i,h),style:s,classNames:r,styles:o}),...d})]})});fZ.classes=dZ;fZ.displayName="@mantine/core/GridCol";function fhe({gutter:e,selector:t,breakpoints:n,type:r}){const i=bs(),s=n||i.breakpoints,o=Yv({"--grid-gutter":Yi(Wf(e))}),a=ji(s).reduce((c,d)=>(c[d]||(c[d]={}),typeof e=="object"&&e[d]!==void 0&&(c[d]["--grid-gutter"]=Yi(e[d])),c),{}),u=Ak(ji(a),s).filter(c=>ji(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return w.jsx(Hw,{styles:o,media:r==="container"?void 0:u,container:r==="container"?u:void 0,selector:t})}const vnt={gutter:"md",grow:!1,columns:12},bnt=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ss=tt((e,t)=>{const n=qe("Grid",vnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,grow:u,gutter:c,columns:d,align:f,justify:h,children:p,breakpoints:m,type:g,...y}=n,v=Mt({name:"Grid",classes:dZ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:bnt}),b=uR();return g==="container"&&m?w.jsxs(lhe,{value:{getStyles:v,grow:u,columns:d||12,breakpoints:m,type:g},children:[w.jsx(fhe,{selector:`.${b}`,...n}),w.jsx("div",{...v("container"),children:w.jsx(De,{ref:t,...v("root",{className:b}),...y,children:w.jsx("div",{...v("inner"),children:p})})})]}):w.jsxs(lhe,{value:{getStyles:v,grow:u,columns:d||12,breakpoints:m,type:g},children:[w.jsx(fhe,{selector:`.${b}`,...n}),w.jsx(De,{ref:t,...v("root",{className:b}),...y,children:w.jsx("div",{...v("inner"),children:p})})]})});Ss.classes=dZ;Ss.displayName="@mantine/core/Grid";Ss.Col=fZ;function hhe({color:e,theme:t,defaultShade:n}){const r=Sh({color:e,theme:t});return r.isThemeColor?r.shade===void 0?`var(--mantine-color-${r.color}-${n})`:`var(${r.variable})`:e}var ZAe={root:"m_bcb3f3c2"};const wnt={color:"yellow"},xnt=(e,{color:t})=>({root:{"--mark-bg-dark":hhe({color:t,theme:e,defaultShade:5}),"--mark-bg-light":hhe({color:t,theme:e,defaultShade:2})}}),hZ=tt((e,t)=>{const n=qe("Mark",wnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,variant:c,...d}=n,f=Mt({name:"Mark",props:n,className:i,style:s,classes:ZAe,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xnt});return w.jsx(De,{component:"mark",ref:t,variant:c,...f("root"),...d})});hZ.classes=ZAe;hZ.displayName="@mantine/core/Mark";function phe(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}function _nt(e,t){if(t==null)return[{chunk:e,highlighted:!1}];const n=Array.isArray(t)?t.map(phe):phe(t);if(!(Array.isArray(n)?n.filter(a=>a.trim().length>0).length>0:n.trim()!==""))return[{chunk:e,highlighted:!1}];const i=typeof n=="string"?n.trim():n.filter(a=>a.trim().length!==0).map(a=>a.trim()).sort((a,l)=>l.length-a.length).join("|"),s=new RegExp(`(${i})`,"gi");return e.split(s).map(a=>({chunk:a,highlighted:s.test(a)})).filter(({chunk:a})=>a)}const Ent={},pZ=co((e,t)=>{const{unstyled:n,children:r,highlight:i,highlightStyles:s,color:o,...a}=qe("Highlight",Ent,e),l=_nt(r,i);return w.jsx(He,{unstyled:n,ref:t,...a,__staticSelector:"Highlight",children:l.map(({chunk:u,highlighted:c},d)=>c?w.jsx(hZ,{unstyled:n,color:o,style:s,"data-highlight":u,children:u},d):w.jsx("span",{children:u},d))})});pZ.classes=He.classes;pZ.displayName="@mantine/core/Highlight";const[Cnt,eke]=Qo("HoverCard component was not found in the tree"),Snt={};function tke(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...i}=qe("HoverCardDropdown",Snt,e),s=eke(),o=ha(n,s.openDropdown),a=ha(r,s.closeDropdown);return w.jsx(jr.Dropdown,{onMouseEnter:o,onMouseLeave:a,...i,children:t})}tke.displayName="@mantine/core/HoverCardDropdown";const Tnt={refProp:"ref"},nke=k.forwardRef((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...s}=qe("HoverCardTarget",Tnt,e);if(!g0(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=eke(),a=ha(n.props.onMouseEnter,o.openDropdown),l=ha(n.props.onMouseLeave,o.closeDropdown),u={onMouseEnter:a,onMouseLeave:l};return w.jsx(jr.Target,{refProp:r,ref:t,...s,children:k.cloneElement(n,i?{[i]:u}:u)})});nke.displayName="@mantine/core/HoverCardTarget";const Ant={openDelay:0,closeDelay:150,initiallyOpened:!1};function Ub(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:s,initiallyOpened:o,...a}=qe("HoverCard",Ant,e),[l,{open:u,close:c}]=ZQ(o,{onClose:r,onOpen:n}),{openDropdown:d,closeDropdown:f}=QAe({open:u,close:c,openDelay:i,closeDelay:s});return w.jsx(Cnt,{value:{openDropdown:d,closeDropdown:f},children:w.jsx(jr,{...a,opened:l,__staticSelector:"HoverCard",children:t})})}Ub.displayName="@mantine/core/HoverCard";Ub.Target=nke;Ub.Dropdown=tke;Ub.extend=e=>e;var rke={root:"m_9e117634"};const knt={},Int=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Jr(t),"--image-object-fit":n}}),x0=co((e,t)=>{const n=qe("Image",knt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onError:u,src:c,radius:d,fit:f,fallbackSrc:h,mod:p,...m}=n,[g,y]=k.useState(!c);k.useEffect(()=>y(!c),[c]);const v=Mt({name:"Image",classes:rke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Int});return g&&h?w.jsx(De,{component:"img",ref:t,src:h,...v("root"),onError:u,mod:["fallback",p],...m}):w.jsx(De,{component:"img",ref:t,...v("root"),src:c,onError:b=>{u?.(b),y(!0)},mod:p,...m})});x0.classes=rke;x0.displayName="@mantine/core/Image";function Rnt(e="top-end",t=0){const n={"--indicator-top":void 0,"--indicator-bottom":void 0,"--indicator-left":void 0,"--indicator-right":void 0,"--indicator-translate-x":void 0,"--indicator-translate-y":void 0},r=Ye(t),[i,s]=e.split("-");return i==="top"&&(n["--indicator-top"]=r,n["--indicator-translate-y"]="-50%"),i==="middle"&&(n["--indicator-top"]="50%",n["--indicator-translate-y"]="-50%"),i==="bottom"&&(n["--indicator-bottom"]=r,n["--indicator-translate-y"]="50%"),s==="start"&&(n["--indicator-left"]=r,n["--indicator-translate-x"]="-50%"),s==="center"&&(n["--indicator-left"]="50%",n["--indicator-translate-x"]="-50%"),s==="end"&&(n["--indicator-right"]=r,n["--indicator-translate-x"]="50%"),n}var ike={root:"m_e5262200",indicator:"m_760d1fb1",processing:"m_885901b1"};const Dnt={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1},Pnt=(e,{color:t,position:n,offset:r,size:i,radius:s,zIndex:o,autoContrast:a})=>({root:{"--indicator-color":t?li(t,e):void 0,"--indicator-text-color":Xv(a,e)?ym({color:t,theme:e,autoContrast:a}):void 0,"--indicator-size":Ye(i),"--indicator-radius":s===void 0?void 0:Jr(s),"--indicator-z-index":o?.toString(),...Rnt(n,r)}}),NF=tt((e,t)=>{const n=qe("Indicator",Dnt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,position:c,offset:d,inline:f,label:h,radius:p,color:m,withBorder:g,disabled:y,processing:v,zIndex:b,autoContrast:_,mod:E,...S}=n,T=Mt({name:"Indicator",classes:ike,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Pnt});return w.jsxs(De,{ref:t,...T("root"),mod:[{inline:f},E],...S,children:[!y&&w.jsx(De,{mod:{"with-label":!!h,"with-border":g,processing:v},...T("indicator"),children:h}),u]})});NF.classes=ike;NF.displayName="@mantine/core/Indicator";function l6(){return l6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l6.apply(null,arguments)}function mZ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var Ont=k.useLayoutEffect,Nnt=function(t){var n=bn.useRef(t);return Ont(function(){n.current=t}),n},mhe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Mnt=function(t,n){var r=bn.useRef();return bn.useCallback(function(i){t.current=i,r.current&&mhe(r.current,null),r.current=n,n&&mhe(n,i)},[n])},ghe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},$nt=function(t){Object.keys(ghe).forEach(function(n){t.style.setProperty(n,ghe[n],"important")})},yhe=$nt,Ul=null,vhe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Fnt(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ul||(Ul=document.createElement("textarea"),Ul.setAttribute("tabindex","-1"),Ul.setAttribute("aria-hidden","true"),yhe(Ul)),Ul.parentNode===null&&document.body.appendChild(Ul);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(f){var h=f;Ul.style[h]=o[h]}),yhe(Ul),Ul.value=t;var l=vhe(Ul,e);Ul.value=t,l=vhe(Ul,e),Ul.value="x";var u=Ul.scrollHeight-i,c=u*n;a==="border-box"&&(c=c+i+s),l=Math.max(c,l);var d=u*r;return a==="border-box"&&(d=d+i+s),l=Math.min(d,l),[l,u]}var bhe=function(){},Lnt=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},jnt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Bnt=!!document.documentElement.currentStyle,znt=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Lnt(jnt,n),i=r.boxSizing;if(i==="")return null;Bnt&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Vnt=znt;function gZ(e,t,n){var r=Nnt(n);k.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Unt=function(t,n){gZ(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},Hnt=function(t){gZ(window,"resize",t)},qnt=function(t){gZ(document.fonts,"loadingdone",t)},Wnt=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Gnt=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?bhe:o,l=t.onHeightChange,u=l===void 0?bhe:l,c=mZ(t,Wnt),d=c.value!==void 0,f=k.useRef(null),h=Mnt(f,n),p=k.useRef(0),m=k.useRef(),g=function(){var b=f.current,_=r&&m.current?m.current:Vnt(b);if(_){m.current=_;var E=Fnt(_,b.value||b.placeholder||"x",s,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),u(S,{rowHeight:T}))}},y=function(b){d||g(),a(b)};return k.useLayoutEffect(g),Unt(f,function(){if(!d){var v=f.current.value;requestAnimationFrame(function(){var b=f.current;b&&v!==b.value&&g()})}}),Hnt(g),qnt(g),k.createElement("textarea",l6({},c,{onChange:y,ref:h}))},Ynt=k.forwardRef(Gnt);const Knt={},Dk=tt((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=qe("Textarea",Knt,e),l=n&&JTe()!=="test",u=l?{maxRows:r,minRows:i}:{};return w.jsx(bu,{component:l?Ynt:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...u})});Dk.classes=bu.classes;Dk.displayName="@mantine/core/Textarea";const[Xnt,Qnt]=Qo("List component was not found in tree");var yZ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Jnt={},vZ=tt((e,t)=>{const n=qe("ListItem",Jnt,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,children:u,mod:c,...d}=n,f=Qnt(),h=l||f.icon,p={classNames:r,styles:o};return w.jsx(De,{...f.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:f.center},c],ref:t,...d,children:w.jsxs("div",{...f.getStyles("itemWrapper",p),children:[h&&w.jsx("span",{...f.getStyles("itemIcon",p),children:h}),w.jsx("span",{...f.getStyles("itemLabel",p),children:u})]})})});vZ.classes=yZ;vZ.displayName="@mantine/core/ListItem";const Znt={type:"unordered"},ert=(e,{size:t,spacing:n})=>({root:{"--list-fz":As(t),"--list-lh":VTe(t),"--list-spacing":Yi(n)}}),wl=tt((e,t)=>{const n=qe("List",Znt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,type:c,withPadding:d,icon:f,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=Mt({name:"List",classes:yZ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ert});return w.jsx(Xnt,{value:{center:p,icon:f,getStyles:v},children:w.jsx(De,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":d},g],ref:t,...y,children:u})})});wl.classes=yZ;wl.displayName="@mantine/core/List";wl.Item=vZ;var ske={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const whe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:dc("overlay")},trt=(e,{zIndex:t})=>({root:{"--lo-z-index":t?.toString()}}),hu=tt((e,t)=>{const n=qe("LoadingOverlay",whe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,transitionProps:u,loaderProps:c,overlayProps:d,visible:f,zIndex:h,...p}=n,m=bs(),g=Mt({name:"LoadingOverlay",classes:ske,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:trt}),y={...whe.overlayProps,...d};return w.jsx(uf,{transition:"fade",...u,mounted:!!f,children:v=>w.jsxs(De,{...g("root",{style:v}),ref:t,...p,children:[w.jsx(td,{...g("loader"),unstyled:a,...c}),w.jsx(HE,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:d?.color||m.white}),w.jsx(HE,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:d?.color||m.colors.dark[5]})]})})});hu.classes=ske;hu.displayName="@mantine/core/LoadingOverlay";const[nrt,yR]=Qo("Menu component was not found in the tree");var ZC={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const rrt={},bZ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("MenuDivider",rrt,e),l=yR();return w.jsx(De,{ref:t,...l.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});bZ.classes=ZC;bZ.displayName="@mantine/core/MenuDivider";const irt={},wZ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:l,onKeyDown:u,children:c,...d}=qe("MenuDropdown",irt,e),f=k.useRef(null),h=yR(),p=ha(u,y=>{(y.key==="ArrowUp"||y.key==="ArrowDown")&&(y.preventDefault(),f.current?.querySelectorAll("[data-menu-item]:not(:disabled)")[0]?.focus())}),m=ha(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=ha(l,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return w.jsxs(jr.Dropdown,{...d,onMouseEnter:m,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:Is(t,f),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[h.withInitialFocusPlaceholder&&w.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});wZ.classes=ZC;wZ.displayName="@mantine/core/MenuDropdown";const srt={},xZ=co((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:l,leftSection:u,rightSection:c,children:d,disabled:f,"data-disabled":h,...p}=qe("MenuItem",srt,e),m=yR(),g=bs(),{dir:y}=fc(),v=k.useRef(null),b=m.getItemIndex(v.current),_=p,E=ha(_.onMouseLeave,()=>m.setHovered(-1)),S=ha(_.onMouseEnter,()=>m.setHovered(m.getItemIndex(v.current))),T=ha(_.onClick,()=>{h||(typeof l=="boolean"?l&&m.closeDropdownImmediately():m.closeOnItemClick&&m.closeDropdownImmediately())}),A=ha(_.onFocus,()=>m.setHovered(m.getItemIndex(v.current))),R=a?g.variantColorResolver({color:a,theme:g,variant:"light"}):void 0,I=a?Sh({color:a,theme:g}):null;return w.jsxs(Co,{...p,unstyled:m.unstyled,tabIndex:m.menuItemTabIndex,onFocus:A,...m.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Is(v,t),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||h||void 0,"data-hovered":m.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:S,onMouseLeave:E,onClick:T,onKeyDown:XQ({siblingSelector:"[data-menu-item]:not([data-disabled])",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:m.loop,dir:y,orientation:"vertical",onKeyDown:_.onKeyDown}),__vars:{"--menu-item-color":I?.isThemeColor&&I?.shade===void 0?`var(--mantine-color-${I.color}-6)`:R?.color,"--menu-item-hover":R?.hover},children:[u&&w.jsx("div",{...m.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:u}),d&&w.jsx("div",{...m.getStyles("itemLabel",{styles:s,classNames:n}),children:d}),c&&w.jsx("div",{...m.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});xZ.classes=ZC;xZ.displayName="@mantine/core/MenuItem";const ort={},_Z=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("MenuLabel",ort,e),l=yR();return w.jsx(De,{ref:t,...l.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});_Z.classes=ZC;_Z.displayName="@mantine/core/MenuLabel";const art={refProp:"ref"},oke=k.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=qe("MenuTarget",art,e);if(!g0(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=yR(),o=n.props,a=ha(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),l=ha(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=ha(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return w.jsx(jr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:k.cloneElement(n,{onClick:a,onMouseEnter:l,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});oke.displayName="@mantine/core/MenuTarget";const lrt={trapFocus:!0,closeOnItemClick:!0,withInitialFocusPlaceholder:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function jn(e){const t=qe("Menu",lrt,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:l,closeOnItemClick:u,loop:c,closeOnEscape:d,trigger:f,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:_,keepMounted:E,withInitialFocusPlaceholder:S,...T}=t,A=Mt({name:"Menu",classes:ZC,props:t,classNames:m,styles:g,unstyled:y}),[R,{setHovered:I,resetHovered:P}]=DKe(),[N,M]=Ki({value:s,defaultValue:o,finalValue:!1,onChange:l}),[O,j]=k.useState(!1),B=()=>{M(!1),j(!1),N&&i?.()},H=()=>{M(!0),!N&&r?.()},q=()=>{N?B():H()},{openDropdown:G,closeDropdown:U}=QAe({open:H,close:B,closeDelay:p,openDelay:h}),L=Y=>RKe("[data-menu-item]","[data-menu-dropdown]",Y),{resolvedClassNames:z,resolvedStyles:V}=Th({classNames:m,styles:g,props:t});return fu(()=>{P()},[N]),w.jsx(nrt,{value:{getStyles:A,opened:N,toggleDropdown:q,getItemIndex:L,hovered:R,setHovered:I,openedViaClick:O,setOpenedViaClick:j,closeOnItemClick:u,closeDropdown:f==="click"?B:U,openDropdown:f==="click"?H:G,closeDropdownImmediately:B,loop:c,trigger:f,unstyled:y,menuItemTabIndex:_,withInitialFocusPlaceholder:S},children:w.jsx(jr,{...T,opened:N,onChange:q,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:d,__staticSelector:"Menu",classNames:z,styles:V,unstyled:y,variant:v,keepMounted:E,children:n})})}jn.extend=e=>e;jn.withProps=c2e(jn);jn.classes=ZC;jn.displayName="@mantine/core/Menu";jn.Item=xZ;jn.Label=_Z;jn.Dropdown=wZ;jn.Target=oke;jn.Divider=bZ;const[urt,eS]=Qo("Modal component was not found in tree");var _0={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const crt={},MF=tt((e,t)=>{const n=qe("ModalBody",crt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=eS();return w.jsx(oAe,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});MF.classes=_0;MF.displayName="@mantine/core/ModalBody";const drt={},$F=tt((e,t)=>{const n=qe("ModalCloseButton",drt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=eS();return w.jsx(aAe,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});$F.classes=_0;$F.displayName="@mantine/core/ModalCloseButton";const frt={},FF=tt((e,t)=>{const n=qe("ModalContent",frt,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,__hidden:u,...c}=n,d=eS(),f=d.scrollAreaComponent||ZZe;return w.jsx(lAe,{...d.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:d.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":d.fullScreen||void 0,"data-modal-content":!0,"data-hidden":u||void 0,ref:t,...c,children:w.jsx(f,{style:{maxHeight:d.fullScreen?"100dvh":`calc(100dvh - (${Ye(d.yOffset)} * 2))`},children:l})})});FF.classes=_0;FF.displayName="@mantine/core/ModalContent";const hrt={},LF=tt((e,t)=>{const n=qe("ModalHeader",hrt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=eS();return w.jsx(uAe,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});LF.classes=_0;LF.displayName="@mantine/core/ModalHeader";const prt={},jF=tt((e,t)=>{const n=qe("ModalOverlay",prt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=eS();return w.jsx(cAe,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});jF.classes=_0;jF.displayName="@mantine/core/ModalOverlay";const mrt={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:dc("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},grt=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Jr(t),"--modal-size":_n(n,"modal-size"),"--modal-y-offset":Ye(r),"--modal-x-offset":Ye(i)}}),BF=tt((e,t)=>{const n=qe("ModalRoot",mrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:u,scrollAreaComponent:c,radius:d,fullScreen:f,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Mt({name:m,classes:_0,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:grt});return w.jsx(urt,{value:{yOffset:u,scrollAreaComponent:c,getStyles:y,fullScreen:f},children:w.jsx(sAe,{ref:t,...y("root"),"data-full-screen":f||void 0,"data-centered":h||void 0,"data-offset-scrollbars":c===Qp.Autosize||void 0,unstyled:a,...g})})});BF.classes=_0;BF.displayName="@mantine/core/ModalRoot";const[yrt,vrt]=y0();function ake({children:e}){const[t,n]=k.useState([]),[r,i]=k.useState(dc("modal"));return w.jsx(yrt,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}ake.displayName="@mantine/core/ModalStack";const brt={},zF=tt((e,t)=>{const n=qe("ModalTitle",brt,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=eS();return w.jsx(dAe,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});zF.classes=_0;zF.displayName="@mantine/core/ModalTitle";const wrt={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:dc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Fi=tt((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,opened:u,stackId:c,zIndex:d,...f}=qe("Modal",wrt,e),h=vrt(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:u;return k.useEffect(()=>{h&&c&&(u?h.addModal(c,d||dc("modal")):h.removeModal(c))},[u,c,d]),w.jsxs(BF,{ref:t,radius:l,opened:u,zIndex:h&&c?h.getZIndex(c):d,...f,...m,children:[r&&w.jsx(jF,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),w.jsxs(FF,{radius:l,__hidden:h&&c&&u?c!==h.currentId:!1,children:[p&&w.jsxs(LF,{children:[n&&w.jsx(zF,{children:n}),s&&w.jsx($F,{...o})]}),w.jsx(MF,{children:a})]})]})});Fi.classes=_0;Fi.displayName="@mantine/core/Modal";Fi.Root=BF;Fi.Overlay=jF;Fi.Content=FF;Fi.Body=MF;Fi.Header=LF;Fi.Title=zF;Fi.CloseButton=$F;Fi.Stack=ake;const[xrt,EZ]=y0(),[_rt,Ert]=y0();var VF={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Crt={},Srt=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?_n(t):_n(n,"pg-gap")}}),CZ=tt((e,t)=>{const n=qe("PillGroup",Crt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,disabled:c,...d}=n,h=EZ()?.size||u||void 0,p=Mt({name:"PillGroup",classes:VF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Srt,stylesCtx:{size:h},rootSelector:"group"});return w.jsx(_rt,{value:{size:h,disabled:c},children:w.jsx(De,{ref:t,size:h,...p("group"),...d})})});CZ.classes=VF;CZ.displayName="@mantine/core/PillGroup";const Trt={variant:"default"},Art=(e,{radius:t},{size:n})=>({root:{"--pill-fz":_n(n,"pill-fz"),"--pill-height":_n(n,"pill-height"),"--pill-radius":t===void 0?void 0:Jr(t)}}),sw=tt((e,t)=>{const n=qe("Pill",Trt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,variant:u,children:c,withRemoveButton:d,onRemove:f,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=Ert(),_=EZ(),E=m||b?.size||void 0,S=_?.variant==="filled"?"contrast":u||"default",T=Mt({name:"Pill",classes:VF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Art,stylesCtx:{size:E}});return w.jsxs(De,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":d&&!g,disabled:g||b?.disabled},y],...v,children:[w.jsx("span",{...T("label"),children:c}),d&&w.jsx(Jp,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h?.className,style:h?.style}),onMouseDown:A=>{A.preventDefault(),A.stopPropagation(),h?.onMouseDown?.(A)},onClick:A=>{A.stopPropagation(),f?.(),h?.onClick?.(A)}})]})});sw.classes=VF;sw.displayName="@mantine/core/Pill";sw.Group=CZ;var lke={field:"m_45c4369d"};const krt={type:"visible"},SZ=tt((e,t)=>{const n=qe("PillsInputField",krt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,type:u,disabled:c,id:d,pointer:f,mod:h,...p}=n,m=EZ(),g=KC(),y=Mt({name:"PillsInputField",classes:lke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||m?.disabled;return w.jsx(De,{component:"input",ref:Is(t,m?.fieldRef),"data-type":u,disabled:v,mod:[{disabled:v,pointer:f},h],...y("field"),...p,id:g?.inputId||d,"aria-invalid":m?.hasError,"aria-describedby":g?.describedBy,type:"text",onMouseDown:b=>!f&&b.stopPropagation()})});SZ.classes=lke;SZ.displayName="@mantine/core/PillsInputField";const Irt={},YE=tt((e,t)=>{const n=qe("PillsInput",Irt,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:l,error:u,variant:c,...d}=n,f=k.useRef(null);return w.jsx(xrt,{value:{fieldRef:f,size:o,disabled:a,hasError:!!u,variant:c},children:w.jsx(bu,{size:o,error:u,variant:c,component:"div",ref:t,onMouseDown:h=>{h.preventDefault(),i?.(h),f.current?.focus()},onClick:h=>{h.preventDefault(),h.currentTarget.closest("fieldset")?.disabled||(f.current?.focus(),s?.(h))},...d,multiline:!0,disabled:a,__staticSelector:l||"PillsInput",withAria:!1,children:r})})});YE.displayName="@mantine/core/PillsInput";YE.Field=SZ;function Rrt({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(GE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Drt={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},tS=tt((e,t)=>{const n=qe("MultiSelect",Drt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,value:c,defaultValue:d,onChange:f,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:_,onOptionSubmit:E,comboboxProps:S,filter:T,limit:A,withScrollArea:R,maxDropdownHeight:I,searchValue:P,defaultSearchValue:N,onSearchChange:M,readOnly:O,disabled:j,onFocus:B,onBlur:H,radius:q,rightSection:G,rightSectionWidth:U,rightSectionPointerEvents:L,rightSectionProps:z,leftSection:V,leftSectionWidth:Y,leftSectionPointerEvents:Q,leftSectionProps:ne,inputContainer:ue,inputWrapperOrder:se,withAsterisk:ae,labelProps:he,descriptionProps:ie,errorProps:le,wrapperProps:Ce,description:X,label:fe,error:de,maxValues:te,searchable:ee,nothingFoundMessage:me,withCheckIcon:Ie,checkIconPosition:Te,hidePickedOptions:we,withErrorStyles:Me,name:ke,form:Oe,id:xe,clearable:je,clearButtonProps:Ve,hiddenInputProps:nt,placeholder:it,hiddenInputValuesDivider:_t,required:rn,mod:en,renderOption:zn,onRemove:zt,onClear:wn,scrollAreaProps:nr,chevronColor:Yn,...Ur}=n,or=Xa(xe),Ir=BJ(m),On=RF(Ir),gn=gR({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b?.(),gn.resetSelectedOption()}}),{styleProps:cr,rest:{type:xi,autoComplete:Rr,...Nn}}=qw(Ur),[mt,Cr]=Ki({value:c,defaultValue:d,finalValue:[],onChange:f}),[Xt,dr]=Ki({value:P,defaultValue:N,finalValue:"",onChange:M}),vn=Kn=>{dr(Kn),gn.resetSelectedOption()},ar=Mt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Or,resolvedStyles:Hr}=Th({props:n,styles:o,classNames:r}),qr=Kn=>{h?.(Kn),Kn.key===" "&&!ee&&(Kn.preventDefault(),gn.toggleDropdown()),Kn.key==="Backspace"&&Xt.length===0&&mt.length>0&&(zt?.(mt[mt.length-1]),Cr(mt.slice(0,mt.length-1)))},ko=mt.map((Kn,Ji)=>w.jsx(sw,{withRemoveButton:!O&&!On[Kn]?.disabled,onRemove:()=>{Cr(mt.filter(Io=>Kn!==Io)),zt?.(Kn)},unstyled:a,disabled:j,...ar("pill"),children:On[Kn]?.label||Kn},`${Kn}-${Ji}`));k.useEffect(()=>{_&&gn.selectFirstOption()},[_,Xt]);const Ja=w.jsx(Jn.ClearButton,{...Ve,onClear:()=>{wn?.(),Cr([]),vn("")}}),Tu=Rrt({data:Ir,value:mt}),yc=je&&mt.length>0&&!j&&!O;return w.jsxs(w.Fragment,{children:[w.jsxs(Jn,{store:gn,classNames:Or,styles:Hr,unstyled:a,size:u,readOnly:O,__staticSelector:"MultiSelect",onOptionSubmit:Kn=>{E?.(Kn),vn(""),gn.updateSelectedOptionIndex("selected"),mt.includes(On[Kn].value)?(Cr(mt.filter(Ji=>Ji!==On[Kn].value)),zt?.(On[Kn].value)):mt.length<te&&Cr([...mt,On[Kn].value])},...S,children:[w.jsx(Jn.DropdownTarget,{children:w.jsx(YE,{...cr,__staticSelector:"MultiSelect",classNames:Or,styles:Hr,unstyled:a,size:u,className:i,style:s,variant:p,disabled:j,radius:q,__defaultRightSection:w.jsx(Jn.Chevron,{size:u,error:de,unstyled:a,color:Yn}),__clearSection:Ja,__clearable:yc,rightSection:G,rightSectionPointerEvents:L||(Ja?"all":"none"),rightSectionWidth:U,rightSectionProps:z,leftSection:V,leftSectionWidth:Y,leftSectionPointerEvents:Q,leftSectionProps:ne,inputContainer:ue,inputWrapperOrder:se,withAsterisk:ae,labelProps:he,descriptionProps:ie,errorProps:le,wrapperProps:Ce,description:X,label:fe,error:de,withErrorStyles:Me,__stylesApiProps:{...n,rightSectionPointerEvents:L||(yc?"all":"none"),multiline:!0},pointer:!ee,onClick:()=>ee?gn.openDropdown():gn.toggleDropdown(),"data-expanded":gn.dropdownOpened||void 0,id:or,required:rn,mod:en,children:w.jsxs(sw.Group,{disabled:j,unstyled:a,...ar("pillsList"),children:[ko,w.jsx(Jn.EventsTarget,{autoComplete:Rr,children:w.jsx(YE.Field,{...Nn,ref:t,id:or,placeholder:it,type:!ee&&!it?"hidden":"visible",...ar("inputField"),unstyled:a,onFocus:Kn=>{B?.(Kn),ee&&gn.openDropdown()},onBlur:Kn=>{H?.(Kn),gn.closeDropdown(),vn("")},onKeyDown:qr,value:Xt,onChange:Kn=>{vn(Kn.currentTarget.value),ee&&gn.openDropdown(),_&&gn.selectFirstOption()},disabled:j,readOnly:O||!ee,pointer:!ee})})]})})}),w.jsx(nZ,{data:we?Tu:Ir,hidden:O||j,filter:T,search:Xt,limit:A,hiddenWhenEmpty:!me,withScrollArea:R,maxDropdownHeight:I,filterOptions:ee,value:mt,checkIconPosition:Te,withCheckIcon:Ie,nothingFoundMessage:me,unstyled:a,labelId:fe?`${or}-label`:void 0,"aria-label":fe?void 0:Ur["aria-label"],renderOption:zn,scrollAreaProps:nr})]}),w.jsx(Jn.HiddenInput,{name:ke,valuesDivider:_t,value:mt,form:Oe,disabled:j,...nt})]})});tS.classes={...bu.classes,...Jn.classes};tS.displayName="@mantine/core/MultiSelect";var uke={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const Prt={},Ort=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Yi(r)}}},UF=co((e,t)=>{const n=qe("NavLink",Prt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:u,defaultOpened:c,onChange:d,children:f,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:_,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:A,mod:R,...I}=n,P=Mt({name:"NavLink",props:n,classes:uke,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ort}),[N,M]=Ki({value:u,defaultValue:c,finalValue:!1,onChange:d}),O=!!f,j=B=>{h?.(B),O&&(B.preventDefault(),M(!N))};return w.jsxs(w.Fragment,{children:[w.jsxs(Co,{...P("root"),component:"a",ref:t,onClick:j,onKeyDown:B=>{T?.(B),B.nativeEvent.code==="Space"&&O&&(B.preventDefault(),M(!N))},unstyled:a,mod:[{disabled:m,active:p,expanded:N},R],...I,children:[g&&w.jsx(De,{component:"span",...P("section"),mod:{position:"left"},children:g}),w.jsxs(De,{...P("body"),mod:{"no-wrap":E},children:[w.jsx(De,{component:"span",...P("label"),children:v}),w.jsx(De,{component:"span",mod:{active:p},...P("description"),children:b})]}),(O||y!==void 0)&&w.jsx(De,{...P("section"),component:"span",mod:{rotate:N&&!_,position:"right"},children:O?y!==void 0?y:w.jsx(WE,{...P("chevron")}):y})]}),O&&w.jsx(vm,{in:N,...P("collapse"),children:w.jsx("div",{...P("children"),children:f})})]})});UF.classes=uke;UF.displayName="@mantine/core/NavLink";var cke={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Nrt={withCloseButton:!0},Mrt=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Jr(t),"--notification-color":n?li(n,e):void 0}}),TZ=tt((e,t)=>{const n=qe("Notification",Nrt,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:l,title:u,icon:c,children:d,onClose:f,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:_,loaderProps:E,role:S,...T}=n,A=Mt({name:"Notification",classes:cke,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:Mrt});return w.jsxs(De,{...A("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":l},_],ref:t,variant:v,role:S||"alert",...T,children:[c&&!o&&w.jsx("div",{...A("icon"),children:c}),o&&w.jsx(td,{size:28,color:i,...E,...A("loader")}),w.jsxs("div",{...A("body"),children:[u&&w.jsx("div",{...A("title"),children:u}),w.jsx(De,{...A("description"),mod:{"data-with-title":!!u},children:d})]}),a&&w.jsx(Jp,{iconSize:16,color:"gray",...h,unstyled:y,onClick:f,...A("closeButton")})]})});TZ.classes=cke;TZ.displayName="@mantine/core/Notification";function dke(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Pk;(function(e){e.event="event",e.props="prop"})(Pk||(Pk={}));function Sy(){}function $rt(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function Ok(e){return!!(e||"").match(/\d/)}function pE(e){return e==null}function Frt(e){return typeof e=="number"&&isNaN(e)}function fke(e){return pE(e)||Frt(e)||typeof e=="number"&&!isFinite(e)}function hke(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Lrt(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function jrt(e,t,n){var r=Lrt(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Brt(e){var t=k.useRef(e);t.current=e;var n=k.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function AZ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function zrt(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function pke(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function xhe(e,t){return Array(t+1).join(e)}function mke(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+xhe("0",Math.abs(o))+i:o>=a?i=i+xhe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function _he(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=AZ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,l=parseFloat("0."+(o||"0")),u=o.length<=t?"0."+o:l.toFixed(t),c=u.split("."),d=s;s&&Number(c[0])&&(d=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var f=pke(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+d+p+f}function bb(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var gke=$rt(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),Vrt=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Urt(e,t,n){return Math.min(Math.max(e,t),n)}function uz(e){return Math.max(e.selectionStart,e.selectionEnd)}function Hrt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function qrt(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Wrt(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function Grt(e,t,n,r,i,s,o){o===void 0&&(o=Wrt);var a=i.findIndex(function(_){return _}),l=e.slice(0,a);!t&&!n.startsWith(l)&&(t=l,n=l+n,r=r+l.length);for(var u=n.length,c=e.length,d={},f=new Array(u),h=0;h<u;h++){f[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&d[p]!==!0){f[h]=p,d[p]=!0;break}}}for(var y=r;y<u&&(f[y]===-1||!s(n[y]));)y++;var v=y===u||f[y]===-1?c:f[y];for(y=r-1;y>0&&f[y]===-1;)y--;var b=y===-1||f[y]===-1?0:f[y]+1;return b>v?v:r-b<v-r?b:v}function Ehe(e,t,n,r){var i=e.length;if(t=Urt(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function Yrt(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(Ok(e[n])||Ok(e[n-1]));return t}function yke(e,t,n,r,i,s){s===void 0&&(s=Sy);var o=Brt(function(p,m){var g,y;return fke(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?mke(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=k.useState(function(){return o(pE(e)?t:e,n)}),l=a[0],u=a[1],c=function(p,m){p.formattedValue!==l.formattedValue&&u({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},d=e,f=n;pE(e)&&(d=l.numAsString,f=!0);var h=o(d,f);return k.useMemo(function(){u(h)},[h.formattedValue]),[l,c]}function Krt(e){return e.replace(/[^0-9]/g,"")}function Xrt(e){return e}function Qrt(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=Xrt);var a=e.removeFormatting;a===void 0&&(a=Krt);var l=e.defaultValue,u=e.valueIsNumericString,c=e.onValueChange,d=e.isAllowed,f=e.onChange;f===void 0&&(f=Sy);var h=e.onKeyDown;h===void 0&&(h=Sy);var p=e.onMouseUp;p===void 0&&(p=Sy);var m=e.onFocus;m===void 0&&(m=Sy);var g=e.onBlur;g===void 0&&(g=Sy);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=Yrt);var b=e.isValidInputCharacter;b===void 0&&(b=Ok);var _=e.isCharacterSame,E=dke(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=yke(y,l,!!u,o,a,c),T=S[0],A=T.formattedValue,R=T.numAsString,I=S[1],P=k.useRef(),N=k.useRef({formattedValue:A,numAsString:R}),M=function(te,ee){N.current={formattedValue:te.formattedValue,numAsString:te.value},I(te,ee)},O=k.useState(!1),j=O[0],B=O[1],H=k.useRef(null),q=k.useRef({setCaretTimeout:null,focusTimeout:null});k.useEffect(function(){return B(!0),function(){clearTimeout(q.current.setCaretTimeout),clearTimeout(q.current.focusTimeout)}},[]);var G=o,U=function(te,ee){var me=parseFloat(ee);return{formattedValue:te,value:ee,floatValue:isNaN(me)?void 0:me}},L=function(te,ee,me){te.selectionStart===0&&te.selectionEnd===te.value.length||(bb(te,ee),q.current.setCaretTimeout=setTimeout(function(){te.value===me&&te.selectionStart!==ee&&bb(te,ee)},0))},z=function(te,ee,me){return Ehe(te,ee,v(te),me)},V=function(te,ee,me){var Ie=v(ee),Te=Grt(ee,A,te,me,Ie,b,_);return Te=Ehe(ee,Te,Ie),Te},Y=function(te){var ee=te.formattedValue;ee===void 0&&(ee="");var me=te.input,Ie=te.source,Te=te.event,we=te.numAsString,Me;if(me){var ke=te.inputValue||me.value,Oe=uz(me);me.value=ee,Me=V(ke,ee,Oe),Me!==void 0&&L(me,Me,ee)}ee!==A&&M(U(ee,we),{event:Te,source:Ie})};k.useEffect(function(){var te=N.current,ee=te.formattedValue,me=te.numAsString;(A!==ee||R!==me)&&M(U(A,R),{event:void 0,source:Pk.props})},[A,R]);var Q=H.current?uz(H.current):void 0,ne=typeof window<"u"?k.useLayoutEffect:k.useEffect;ne(function(){var te=H.current;if(A!==N.current.formattedValue&&te){var ee=V(N.current.formattedValue,A,Q);te.value=A,L(te,ee,A)}},[A]);var ue=function(te,ee,me){var Ie=ee.target,Te=P.current?Vrt(P.current,Ie.selectionEnd):gke(A,te),we=Object.assign(Object.assign({},Te),{lastValue:A}),Me=a(te,we),ke=G(Me);if(Me=a(ke,void 0),d&&!d(U(ke,Me))){var Oe=ee.target,xe=uz(Oe),je=V(te,A,xe);return Oe.value=A,L(Oe,je,A),!1}return Y({formattedValue:ke,numAsString:Me,inputValue:te,event:ee,source:me,input:ee.target}),!0},se=function(te,ee){ee===void 0&&(ee=0);var me=te.selectionStart,Ie=te.selectionEnd;P.current={selectionStart:me,selectionEnd:Ie+ee}},ae=function(te){var ee=te.target,me=ee.value,Ie=ue(me,te,Pk.event);Ie&&f(te),P.current=void 0},he=function(te){var ee=te.target,me=te.key,Ie=ee.selectionStart,Te=ee.selectionEnd,we=ee.value;we===void 0&&(we="");var Me;me==="ArrowLeft"||me==="Backspace"?Me=Math.max(Ie-1,0):me==="ArrowRight"?Me=Math.min(Ie+1,we.length):me==="Delete"&&(Me=Ie);var ke=0;me==="Delete"&&Ie===Te&&(ke=1);var Oe=me==="ArrowLeft"||me==="ArrowRight";if(Me===void 0||Ie!==Te&&!Oe){h(te),se(ee,ke);return}var xe=Me;if(Oe){var je=me==="ArrowLeft"?"left":"right";xe=z(we,Me,je),xe!==Me&&te.preventDefault()}else me==="Delete"&&!b(we[Me])?xe=z(we,Me,"right"):me==="Backspace"&&!b(we[Me])&&(xe=z(we,Me,"left"));xe!==Me&&L(ee,xe,we),h(te),se(ee,ke)},ie=function(te){var ee=te.target,me=function(){var Ie=ee.selectionStart,Te=ee.selectionEnd,we=ee.value;if(we===void 0&&(we=""),Ie===Te){var Me=z(we,Ie);Me!==Ie&&L(ee,Me,we)}};me(),requestAnimationFrame(function(){me()}),p(te),se(ee)},le=function(te){te.persist&&te.persist();var ee=te.target,me=te.currentTarget;H.current=ee,q.current.focusTimeout=setTimeout(function(){var Ie=ee.selectionStart,Te=ee.selectionEnd,we=ee.value;we===void 0&&(we="");var Me=z(we,Ie);Me!==Ie&&!(Ie===0&&Te===we.length)&&L(ee,Me,we),m(Object.assign(Object.assign({},te),{currentTarget:me}))},0)},Ce=function(te){H.current=null,clearTimeout(q.current.focusTimeout),clearTimeout(q.current.setCaretTimeout),g(te)},X=j&&Hrt()?"numeric":void 0,fe=Object.assign({inputMode:X},E,{type:t,value:A,onChange:ae,onKeyDown:he,onMouseUp:ie,onFocus:le,onBlur:Ce});if(n==="text")return i?bn.createElement(bn.Fragment,null,i(A,E)||null):bn.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var de=r;return bn.createElement(de,Object.assign({},fe,{ref:s}))}return bn.createElement("input",Object.assign({},fe,{ref:s}))}function Che(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var l=HF(t),u=l.thousandSeparator,c=l.decimalSeparator,d=n!==0&&e.indexOf(".")!==-1||n&&r,f=AZ(e,o),h=f.beforeDecimal,p=f.afterDecimal,m=f.addNegation;return n!==void 0&&(p=pke(p,n,!!r)),u&&(h=jrt(h,u,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(d&&c||"")+p,e}function HF(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function Jrt(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function Zrt(e,t){return new RegExp("(^-)|[0-9]|"+hke(e),"g")}function eit(e,t,n){return e===""?!0:!t?.match(/\d/)&&!n?.match(/\d/)&&typeof e=="string"&&!isNaN(Number(e))}function tit(e,t,n){var r;t===void 0&&(t=qrt(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,l=t.from,u=t.to,c=u.start,d=u.end,f=HF(n),h=f.allowedDecimalSeparators,p=f.decimalSeparator,m=e[d]===p;if(Ok(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(d-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(H,q,G){var U=!1,L=!1;s.startsWith("-")?U=!1:H.startsWith("--")?(U=!1,L=!0):o.startsWith("-")&&H.length===o.length?U=!1:H[0]==="-"&&(U=!0);var z=U?1:0;return L&&(z=2),z&&(H=H.substring(z),q-=z,G-=z),{value:H,start:q,end:G,hasNegation:U}},v=y(e,c,d),b=v.hasNegation;r=v,e=r.value,c=r.start,d=r.end;var _=y(t.lastValue,l.start,l.end),E=_.start,S=_.end,T=_.value,A=e.substring(c,d);e.length&&T.length&&(E>T.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=T);var R=0;e.startsWith(s)?R+=s.length:c<s.length&&(R=c),e=e.substring(R),d-=R;var I=e.length,P=e.length-o.length;e.endsWith(o)?I=P:(d>P||d>e.length-o.length)&&(I=d),e=e.substring(0,I),e=Jrt(b?"-"+e:e,i),e=(e.match(Zrt(p))||[]).join("");var N=e.indexOf(p);e=e.replace(new RegExp(hke(p),"g"),function(H,q){return q===N?".":""});var M=AZ(e,i),O=M.beforeDecimal,j=M.afterDecimal,B=M.addNegation;return u.end-u.start<l.end-l.start&&O===""&&m&&!parseFloat(j)&&(e=B?"-":""),e}function nit(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function rit(e){var t=HF(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function iit(e){e=rit(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Sy);var s=e.onBlur;s===void 0&&(s=Sy);var o=e.thousandSeparator,a=e.decimalScale,l=e.fixedDecimalScale,u=e.prefix;u===void 0&&(u="");var c=e.defaultValue,d=e.value,f=e.valueIsNumericString,h=e.onValueChange,p=dke(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=HF(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(B){return Che(B,e)},b=function(B,H){return tit(B,H,e)},_=pE(d)?c:d,E=f??eit(_,u,t);pE(d)?pE(c)||(E=E||typeof c=="number"):E=E||typeof d=="number";var S=function(B){return fke(B)?B:(typeof B=="number"&&(B=mke(B)),E&&typeof a=="number"?_he(B,a,!!l):B)},T=yke(S(d),S(c),!!E,v,b,h),A=T[0],R=A.numAsString,I=A.formattedValue,P=T[1],N=function(B){var H=B.target,q=B.key,G=H.selectionStart,U=H.selectionEnd,L=H.value;if(L===void 0&&(L=""),(q==="Backspace"||q==="Delete")&&U<u.length){B.preventDefault();return}if(G!==U){i(B);return}q==="Backspace"&&L[0]==="-"&&G===u.length+1&&n&&bb(H,1),a&&l&&(q==="Backspace"&&L[G-1]===g?(bb(H,G-1),B.preventDefault()):q==="Delete"&&L[G]===g&&B.preventDefault()),y?.includes(q)&&L[G]===g&&bb(H,G+1);var z=o===!0?",":o;q==="Backspace"&&L[G-1]===z&&bb(H,G-1),q==="Delete"&&L[G]===z&&bb(H,G+1),i(B)},M=function(B){var H=R;if(H.match(/\d/g)||(H=""),r||(H=zrt(H)),l&&a&&(H=_he(H,a,l)),H!==R){var q=Che(H,e);P({formattedValue:q,value:H,floatValue:parseFloat(H)},{event:B,source:Pk.event})}s(B)},O=function(B){return B===g?!0:Ok(B)},j=function(B){var H=B.currentValue,q=B.lastValue,G=B.formattedValue,U=B.currentValueIndex,L=B.formattedValueIndex,z=H[U],V=G[L],Y=gke(q,H),Q=Y.to,ne=function(ue){return b(ue).indexOf(".")+u.length};return d===0&&l&&a&&H[Q.start]===g&&ne(H)<U&&ne(G)>L?!1:U>=Q.start&&U<Q.end&&y&&y.includes(z)&&V===g?!0:z===V};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:O,isCharacterSame:j,onValueChange:P,format:v,removeFormatting:b,getCaretBoundary:function(B){return nit(B,e)},onKeyDown:N,onBlur:M})}function sit(e){var t=iit(e);return bn.createElement(Qrt,Object.assign({},t))}function She({direction:e,style:t,...n}){return w.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var HW={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const oit=/^(0\.0*|-0(\.0*)?)$/,ait=/^-?0\d+(\.\d+)?\.?$/;function qW(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function cz(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||qW(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function lit(e){return e.toString().replace(".","").length}function uit(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&lit(t)<14&&t!==""}function The(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const cit={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},dit=(e,{size:t})=>({controls:{"--ni-chevron-size":_n(t,"ni-chevron-size")}});function fit(e,t,n){const r=e.toString().replace(/^0+/,""),i=parseFloat(r);return Number.isNaN(i)?r:i>Number.MAX_SAFE_INTEGER?t!==void 0?String(t):r:jd(i,n,t)}const kZ=tt((e,t)=>{const n=qe("NumberInput",cit,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:l,onValueChange:u,value:c,defaultValue:d,max:f,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:_,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:A,startValue:R,disabled:I,rightSectionPointerEvents:P,allowNegative:N,readOnly:M,size:O,rightSectionWidth:j,stepHoldInterval:B,stepHoldDelay:H,allowLeadingZeros:q,withKeyboardEvents:G,trimLeadingZeroesOnBlur:U,...L}=n,z=Mt({name:"NumberInput",classes:HW,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:dit}),{resolvedClassNames:V,resolvedStyles:Y}=Th({classNames:i,styles:s,props:n}),[Q,ne]=Ki({value:c,defaultValue:d,finalValue:"",onChange:l}),ue=H!==void 0&&B!==void 0,se=k.useRef(null),ae=k.useRef(null),he=k.useRef(0),ie=(ke,Oe)=>{Oe.source==="event"&&ne(uit(ke.floatValue,ke.value)&&!oit.test(ke.value)&&!(q&&ait.test(ke.value))?ke.floatValue:ke.value),u?.(ke,Oe)},le=ke=>{const Oe=String(ke).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Oe?Math.max(0,(Oe[1]?Oe[1].length:0)-(Oe[2]?+Oe[2]:0)):0},Ce=ke=>{se.current&&typeof ke<"u"&&se.current.setSelectionRange(ke,ke)},X=k.useRef(e6);X.current=()=>{if(!cz(Q))return;let ke;const Oe=le(Q),xe=le(p),je=Math.max(Oe,xe),Ve=10**je;if(!qW(Q)&&(typeof Q!="number"||Number.isNaN(Q)))ke=jd(R,h,f);else if(f!==void 0){const it=(Math.round(Number(Q)*Ve)+Math.round(p*Ve))/Ve;ke=it<=f?it:f}else ke=(Math.round(Number(Q)*Ve)+Math.round(p*Ve))/Ve;const nt=ke.toFixed(je);ne(parseFloat(nt)),u?.({floatValue:parseFloat(nt),formattedValue:nt,value:nt},{source:"increment"}),setTimeout(()=>Ce(se.current?.value.length),0)};const fe=k.useRef(e6);fe.current=()=>{if(!cz(Q))return;let ke;const Oe=h!==void 0?h:N?Number.MIN_SAFE_INTEGER:0,xe=le(Q),je=le(p),Ve=Math.max(xe,je),nt=10**Ve;if(!qW(Q)&&typeof Q!="number"||Number.isNaN(Q))ke=jd(R,Oe,f);else{const _t=(Math.round(Number(Q)*nt)-Math.round(p*nt))/nt;ke=Oe!==void 0&&_t<Oe?Oe:_t}const it=ke.toFixed(Ve);ne(parseFloat(it)),u?.({floatValue:parseFloat(it),formattedValue:it,value:it},{source:"decrement"}),setTimeout(()=>Ce(se.current?.value.length),0)};const de=ke=>{S?.(ke),!(M||!G)&&(ke.key==="ArrowUp"&&(ke.preventDefault(),X.current()),ke.key==="ArrowDown"&&(ke.preventDefault(),fe.current()))},te=ke=>{if(T?.(ke),ke.key==="Backspace"){const Oe=se.current;Oe.selectionStart===0&&Oe.selectionStart===Oe.selectionEnd&&(ke.preventDefault(),window.setTimeout(()=>Ce(0),0))}},ee=ke=>{let Oe=Q;v==="blur"&&typeof Oe=="number"&&(Oe=jd(Oe,h,f)),U&&typeof Oe=="string"&&le(Oe)<15&&(Oe=fit(Oe,f,h)),Q!==Oe&&ne(Oe),b?.(ke)};t6(A,{increment:X.current,decrement:fe.current});const me=ke=>{ke?X.current():fe.current(),he.current+=1},Ie=ke=>{if(me(ke),ue){const Oe=typeof B=="number"?B:B(he.current);ae.current=window.setTimeout(()=>Ie(ke),Oe)}},Te=(ke,Oe)=>{ke.preventDefault(),se.current?.focus(),me(Oe),ue&&(ae.current=window.setTimeout(()=>Ie(Oe),H))},we=()=>{ae.current&&window.clearTimeout(ae.current),ae.current=null,he.current=0},Me=w.jsxs("div",{...z("controls"),children:[w.jsx(Co,{...z("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof Q=="number"&&f!==void 0&&Q>=f,mod:{direction:"up"},onMouseDown:ke=>ke.preventDefault(),onPointerDown:ke=>{Te(ke,!0)},onPointerUp:we,onPointerLeave:we,children:w.jsx(She,{direction:"up"})}),w.jsx(Co,{...z("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof Q=="number"&&h!==void 0&&Q<=h,mod:{direction:"down"},onMouseDown:ke=>ke.preventDefault(),onPointerDown:ke=>{Te(ke,!1)},onPointerUp:we,onPointerLeave:we,children:w.jsx(She,{direction:"down"})})]});return w.jsx(bu,{component:sit,allowNegative:N,className:Bt(HW.root,r),size:O,...L,readOnly:M,disabled:I,value:Q,getInputRef:Is(t,se),onValueChange:ie,rightSection:m||M||!cz(Q)?g:g||Me,classNames:V,styles:Y,unstyled:o,__staticSelector:"NumberInput",decimalScale:_?E:0,onKeyDown:de,onKeyDownCapture:te,rightSectionPointerEvents:P??(I?"none":void 0),rightSectionWidth:j??`var(--ni-right-section-width-${O||"sm"})`,allowLeadingZeros:q,onBlur:ee,isAllowed:ke=>v==="strict"?y?y(ke)&&The(ke.floatValue,h,f):The(ke.floatValue,h,f):y?y(ke):!0})});kZ.classes={...bu.classes,...HW};kZ.displayName="@mantine/core/NumberInput";const[hit,qF]=Qo("Pagination.Root component was not found in tree");var vR={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const pit={withPadding:!0},bR=tt((e,t)=>{const n=qe("PaginationControl",pit,e),{classNames:r,className:i,style:s,styles:o,vars:a,active:l,disabled:u,withPadding:c,mod:d,...f}=n,h=qF(),p=u||h.disabled;return w.jsx(Co,{ref:t,disabled:p,mod:[{active:l,disabled:p,"with-padding":c},d],...h.getStyles("control",{className:i,style:s,classNames:r,styles:o,active:!p}),...f})});bR.classes=vR;bR.displayName="@mantine/core/PaginationControl";function wR({style:e,children:t,path:n,...r}){return w.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...e},...r,children:w.jsx("path",{d:n,fill:"currentColor"})})}const mit=e=>w.jsx(wR,{...e,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),git=e=>w.jsx(wR,{...e,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),yit=e=>w.jsx(wR,{...e,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),vit=e=>w.jsx(wR,{...e,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),bit=e=>w.jsx(wR,{...e,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),wit={icon:bit},WF=tt((e,t)=>{const n=qe("PaginationDots",wit,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,...u}=n,c=qF(),d=l;return w.jsx(De,{ref:t,...c.getStyles("dots",{className:i,style:s,styles:o,classNames:r}),...u,children:w.jsx(d,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});WF.classes=vR;WF.displayName="@mantine/core/PaginationDots";function GF({icon:e,name:t,action:n,type:r}){const i={icon:e},s=k.forwardRef((o,a)=>{const{icon:l,...u}=qe(t,i,o),c=l,d=qF(),f=r==="next"?d.active===d.total:d.active===1;return w.jsx(bR,{disabled:d.disabled||f,ref:a,onClick:d[n],withPadding:!1,...u,children:w.jsx(c,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return s.displayName=`@mantine/core/${t}`,s}const vke=GF({icon:mit,name:"PaginationNext",action:"onNext",type:"next"}),bke=GF({icon:git,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),wke=GF({icon:yit,name:"PaginationFirst",action:"onFirst",type:"previous"}),xke=GF({icon:vit,name:"PaginationLast",action:"onLast",type:"next"});function IZ({dotsIcon:e}){const t=qF(),n=t.range.map((r,i)=>r==="dots"?w.jsx(WF,{icon:e},i):w.jsx(bR,{active:r===t.active,"aria-current":r===t.active?"page":void 0,onClick:()=>t.onChange(r),disabled:t.disabled,...t.getItemProps?.(r),children:t.getItemProps?.(r)?.children??r},i));return w.jsx(w.Fragment,{children:n})}IZ.displayName="@mantine/core/PaginationItems";const xit={siblings:1,boundaries:1},_it=(e,{size:t,radius:n,color:r,autoContrast:i})=>({root:{"--pagination-control-radius":n===void 0?void 0:Jr(n),"--pagination-control-size":_n(t,"pagination-control-size"),"--pagination-control-fz":As(t),"--pagination-active-bg":r?li(r,e):void 0,"--pagination-active-color":Xv(i,e)?ym({color:r,theme:e,autoContrast:i}):void 0}}),YF=tt((e,t)=>{const n=qe("PaginationRoot",xit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,total:u,value:c,defaultValue:d,onChange:f,disabled:h,siblings:p,boundaries:m,color:g,radius:y,onNextPage:v,onPreviousPage:b,onFirstPage:_,onLastPage:E,getItemProps:S,autoContrast:T,...A}=n,R=Mt({name:"Pagination",classes:vR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_it}),{range:I,setPage:P,next:N,previous:M,active:O,first:j,last:B}=GKe({page:c,initialPage:d,onChange:f,total:u,siblings:p,boundaries:m}),H=ha(v,N),q=ha(b,M),G=ha(_,j),U=ha(E,B);return w.jsx(hit,{value:{total:u,range:I,active:O,disabled:h,getItemProps:S,onChange:P,onNext:H,onPrevious:q,onFirst:G,onLast:U,getStyles:R},children:w.jsx(De,{ref:t,...R("root"),...A})})});YF.classes=vR;YF.displayName="@mantine/core/PaginationRoot";const Eit={withControls:!0,withPages:!0,siblings:1,boundaries:1,gap:8},Ah=tt((e,t)=>{const n=qe("Pagination",Eit,e),{withEdges:r,withControls:i,getControlProps:s,nextIcon:o,previousIcon:a,lastIcon:l,firstIcon:u,dotsIcon:c,total:d,gap:f,hideWithOnePage:h,withPages:p,...m}=n;return d<=0||h&&d===1?null:w.jsx(YF,{ref:t,total:d,...m,children:w.jsxs(Pn,{gap:f,children:[r&&w.jsx(wke,{icon:u,...s?.("first")}),i&&w.jsx(bke,{icon:a,...s?.("previous")}),p&&w.jsx(IZ,{dotsIcon:c}),i&&w.jsx(vke,{icon:o,...s?.("next")}),r&&w.jsx(xke,{icon:l,...s?.("last")})]})})});Ah.classes=vR;Ah.displayName="@mantine/core/Pagination";Ah.Root=YF;Ah.Control=bR;Ah.Dots=WF;Ah.First=wke;Ah.Last=xke;Ah.Next=vke;Ah.Previous=bke;Ah.Items=IZ;const[Cit,_ke]=Qo("Progress.Root component was not found in tree");var xR={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const Sit={},RZ=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ProgressLabel",Sit,e),l=_ke();return w.jsx(De,{ref:t,...l.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});RZ.classes=xR;RZ.displayName="@mantine/core/ProgressLabel";const Tit={},Ait=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":_n(t,"progress-size"),"--progress-radius":n===void 0?void 0:Jr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),KF=tt((e,t)=>{const n=qe("ProgressRoot",Tit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,autoContrast:u,transitionDuration:c,...d}=n,f=Mt({name:"Progress",classes:xR,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ait});return w.jsx(Cit,{value:{getStyles:f,autoContrast:u},children:w.jsx(De,{ref:t,...f("root"),...d})})});KF.classes=xR;KF.displayName="@mantine/core/ProgressRoot";const kit={withAria:!0},XF=tt((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:l,color:u,striped:c,animated:d,mod:f,...h}=qe("ProgressSection",kit,e),p=_ke(),m=bs(),g=l?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return w.jsx(De,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||d,animated:d},f],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":li(u,m),"--progress-label-color":Xv(p.autoContrast,m)?ym({color:u,theme:m,autoContrast:p.autoContrast}):void 0}})});XF.classes=xR;XF.displayName="@mantine/core/ProgressSection";const Iit={},Gw=tt((e,t)=>{const n=qe("Progress",Iit,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:l,animated:u,"aria-label":c,...d}=n,{resolvedClassNames:f,resolvedStyles:h}=Th({classNames:i,styles:s,props:n});return w.jsx(KF,{ref:t,classNames:f,styles:h,vars:o,...d,children:w.jsx(XF,{value:r,color:a,striped:l,animated:u,"aria-label":c})})});Gw.classes=xR;Gw.displayName="@mantine/core/Progress";Gw.Section=XF;Gw.Root=KF;Gw.Label=RZ;const[Rit,Eke]=y0(),[Dit,Pit]=y0();var Cke={card:"m_9dc8ae12"};const Oit={withBorder:!0},Nit=(e,{radius:t})=>({card:{"--card-radius":Jr(t)}}),DZ=tt((e,t)=>{const n=qe("RadioCard",Oit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,name:p,onKeyDown:m,...g}=n,y=Mt({name:"RadioCard",classes:Cke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Nit,rootSelector:"card"}),{dir:v}=fc(),b=Eke(),_=typeof u=="boolean"?u:b?.value===f||!1,E=p||b?.name,S=T=>{if(m?.(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),R=A.findIndex(N=>N===T.target),I=R+1>=A.length?0:R+1,P=R-1<0?A.length-1:R-1;T.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),T.nativeEvent.code==="ArrowUp"&&(A[P].focus(),A[P].click()),T.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?P:I].focus(),A[v==="ltr"?P:I].click()),T.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:P].focus(),A[v==="ltr"?I:P].click())}};return w.jsx(Dit,{value:{checked:_},children:w.jsx(Co,{ref:t,mod:[{"with-border":d,checked:_},c],...y("card"),...g,role:"radio","aria-checked":_,name:E,onClick:T=>{h?.(T),b?.onChange(f||"")},onKeyDown:S})})});DZ.displayName="@mantine/core/RadioCard";DZ.classes=Cke;const Mit={},PZ=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:l,readOnly:u,...c}=qe("RadioGroup",Mit,e),d=Xa(l),[f,h]=Ki({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!u&&h(typeof m=="string"?m:m.currentTarget.value);return w.jsx(Rit,{value:{value:f,onChange:p,size:s,name:d},children:w.jsx(Qr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:w.jsx(JJ,{role:"radiogroup",children:a})})})});PZ.classes=Qr.Wrapper.classes;PZ.displayName="@mantine/core/RadioGroup";function Ske({size:e,style:t,...n}){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ye(e),height:Ye(e),...t},"aria-hidden":!0,...n,children:w.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Tke={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const $it={icon:Ske},Fit=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Sh({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":_n(r,"radio-size"),"--radio-radius":t===void 0?void 0:Jr(t),"--radio-color":s==="outline"?l:li(n,e),"--radio-icon-size":_n(r,"radio-icon-size"),"--radio-icon-color":i?li(i,e):Xv(o,e)?ym({color:n,theme:e,autoContrast:o}):void 0}}},OZ=tt((e,t)=>{const n=qe("RadioIndicator",$it,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,radius:c,color:d,iconColor:f,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=u,_=Mt({name:"RadioIndicator",classes:Tke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Fit,rootSelector:"indicator"}),E=Pit(),S=typeof p=="boolean"?p:E?.checked||!1;return w.jsx(De,{ref:t,..._("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:w.jsx(b,{..._("icon")})})});OZ.displayName="@mantine/core/RadioIndicator";OZ.classes=Tke;var Ake={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Lit={labelPosition:"right"},jit=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Sh({color:r||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":_n(t,"radio-size"),"--radio-radius":n===void 0?void 0:Jr(n),"--radio-color":s==="outline"?l:li(r,e),"--radio-icon-color":i?li(i,e):Xv(o,e)?ym({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":_n(t,"radio-icon-size")}}},Tl=tt((e,t)=>{const n=qe("Radio",Lit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,id:u,size:c,label:d,labelPosition:f,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:_=Ske,rootRef:E,iconColor:S,onChange:T,mod:A,...R}=n,I=Mt({name:"Radio",classes:Ake,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:jit}),P=Eke(),N=P?.size??c,M=n.size?c:N,{styleProps:O,rest:j}=qw(R),B=Xa(u),H=P?{checked:P.value===j.value,name:j.name??P.name,onChange:q=>{P.onChange(q),T?.(q)}}:{};return w.jsx(DF,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:B,size:M,labelPosition:f,label:d,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":H.checked||void 0,variant:y,ref:E,mod:A,...O,...b,children:w.jsxs(De,{...I("inner"),mod:{"label-position":f},children:[w.jsx(De,{...I("radio",{focusable:!0,variant:y}),onChange:T,...j,...H,component:"input",mod:{error:!!p},ref:t,id:B,disabled:v,type:"radio"}),w.jsx(_,{...I("icon"),"aria-hidden":!0})]})})});Tl.classes=Ake;Tl.displayName="@mantine/core/Radio";Tl.Group=PZ;Tl.Card=DZ;Tl.Indicator=OZ;const Bit={duration:100,transition:"fade"};function zit(e,t){return{...Bit,...t,...e}}function Vit({offset:e,position:t,defaultOpened:n}){const[r,i]=k.useState(n),s=k.useRef(null),{x:o,y:a,elements:l,refs:u,update:c,placement:d}=gJ({placement:t,middleware:[fJ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,p=k.useCallback(({clientX:m,clientY:g})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+f,top:g+h,right:m,bottom:g}}})},[l.reference]);return k.useEffect(()=>{if(u.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=Tg(u.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[l.reference,u.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:u.setFloating}}var QF={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Uit={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:dc("popover")},Hit=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Jr(t),"--tooltip-bg":n?li(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),NZ=tt((e,t)=>{const n=qe("TooltipFloating",Uit,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:l,styles:u,unstyled:c,radius:d,color:f,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,defaultOpened:b,variant:_,vars:E,portalProps:S,...T}=n,A=bs(),R=Mt({name:"TooltipFloating",props:n,classes:QF,className:a,style:o,classNames:l,styles:u,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:Hit}),{handleMouseMove:I,x:P,y:N,opened:M,boundaryRef:O,floating:j,setOpened:B}=Vit({offset:p,position:m,defaultOpened:b});if(!g0(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const H=Is(O,gF(r),t),q=r.props,G=L=>{q.onMouseEnter?.(L),I(L),B(!0)},U=L=>{q.onMouseLeave?.(L),B(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(Qv,{...S,withinPortal:s,children:w.jsx(De,{...T,...R("tooltip",{style:{...iJ(o,A),zIndex:y,display:!v&&M?"block":"none",top:(N&&Math.round(N))??"",left:(P&&Math.round(P))??""}}),variant:_,ref:j,mod:{multiline:g},children:h})}),k.cloneElement(r,{...q,[i]:H,onMouseEnter:G,onMouseLeave:U})]})});NZ.classes=QF;NZ.displayName="@mantine/core/TooltipFloating";const kke=k.createContext(!1),qit=kke.Provider,Wit=()=>k.useContext(kke),Git={openDelay:0,closeDelay:0};function MZ(e){const{openDelay:t,closeDelay:n,children:r}=qe("TooltipGroup",Git,e);return w.jsx(qit,{value:!0,children:w.jsx(YJe,{delay:{open:t,close:n},children:r})})}MZ.displayName="@mantine/core/TooltipGroup";MZ.extend=e=>e;function Yit(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Kit(e){const t=Yit(e.middlewares),n=[C2e(e.offset)];return t.shift&&n.push(fJ(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?o6():o6(t.flip)),n.push(S2e({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?MA():MA(t.inline)):e.inline&&n.push(MA()),n}function Xit(e){const[t,n]=k.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=Wit(),o=Xa(),a=k.useCallback(S=>{n(S),S&&v(o)},[o]),{x:l,y:u,context:c,refs:d,update:f,placement:h,middlewareData:{arrow:{x:p,y:m}={}}}=gJ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:a,middleware:Kit(e)}),{delay:g,currentId:y,setCurrentId:v}=KJe(c,{id:o}),{getReferenceProps:b,getFloatingProps:_}=nZe([WJe(c,{enabled:e.events?.hover,delay:s?g:{open:e.openDelay,close:e.closeDelay},mouseOnly:!e.events?.touch}),tZe(c,{enabled:e.events?.focus,visibleOnly:!0}),iZe(c,{role:"tooltip"}),ZJe(c,{enabled:typeof e.opened>"u"})]);Q2e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:d,update:f}}),fu(()=>{e.onPositionChange?.(h)},[h]);const E=i&&y&&y!==o;return{x:l,y:u,arrowX:p,arrowY:m,reference:d.setReference,floating:d.setFloating,getFloatingProps:_,getReferenceProps:b,isGroupPhase:E,opened:i,placement:h}}const Ahe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:dc("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},Qit=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Jr(t),"--tooltip-bg":n?li(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),bt=tt((e,t)=>{const n=qe("Tooltip",Ahe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:l,onPositionChange:u,opened:c,defaultOpened:d,withinPortal:f,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:b,withArrow:_,arrowSize:E,arrowOffset:S,arrowRadius:T,arrowPosition:A,offset:R,transitionProps:I,multiline:P,events:N,zIndex:M,disabled:O,positionDependencies:j,onClick:B,onMouseEnter:H,onMouseLeave:q,inline:G,variant:U,keepMounted:L,vars:z,portalProps:V,mod:Y,floatingStrategy:Q,middlewares:ne,...ue}=qe("Tooltip",Ahe,n),{dir:se}=fc(),ae=k.useRef(null),he=Xit({position:H2e(se,i),closeDelay:l,openDelay:a,onPositionChange:u,opened:c,defaultOpened:d,events:N,arrowRef:ae,arrowOffset:S,offset:typeof R=="number"?R+(_?E/2:0):R,positionDependencies:[...j,r],inline:G,strategy:Q,middlewares:ne}),ie=Mt({name:"Tooltip",props:n,classes:QF,className:b,style:v,classNames:m,styles:g,unstyled:y,rootSelector:"tooltip",vars:z,varsResolver:Qit});if(!g0(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const le=Is(he.reference,gF(r),t),Ce=zit(I,{duration:100,transition:"fade"}),X=r.props;return w.jsxs(w.Fragment,{children:[w.jsx(Qv,{...V,withinPortal:f,children:w.jsx(uf,{...Ce,keepMounted:L,mounted:!O&&!!he.opened,duration:he.isGroupPhase?10:Ce.duration,children:fe=>w.jsxs(De,{...ue,"data-fixed":Q==="fixed"||void 0,variant:U,mod:[{multiline:P},Y],...he.getFloatingProps({ref:he.floating,className:ie("tooltip").className,style:{...ie("tooltip").style,...fe,zIndex:M,top:he.y??0,left:he.x??0}}),children:[o,w.jsx(xJ,{ref:ae,arrowX:he.arrowX,arrowY:he.arrowY,visible:_,position:he.placement,arrowSize:E,arrowOffset:S,arrowRadius:T,arrowPosition:A,...ie("arrow")})]})})}),k.cloneElement(r,he.getReferenceProps({onClick:B,onMouseEnter:H,onMouseLeave:q,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,className:Bt(b,X.className),...X,[s]:le}))]})});bt.classes=QF;bt.displayName="@mantine/core/Tooltip";bt.Floating=NZ;bt.Group=MZ;function Jit({size:e,thickness:t,sum:n,value:r,root:i,offset:s}){const o=(e*.9-t*2)/2,a=Math.PI*o*2/100,l=i||r===void 0?`${(100-n)*a}, ${n*a}`:`${r*a}, ${(100-r)*a}`;return{strokeWidth:Number.isNaN(t)?12:t,cx:e/2||0,cy:e/2||0,r:o||0,transform:i?`scale(1, -1) translate(0, -${e})`:void 0,strokeDasharray:l,strokeDashoffset:i?0:s||0}}function Ike({size:e,value:t,offset:n,sum:r,thickness:i,root:s,color:o,lineRoundCaps:a,tooltip:l,getStyles:u,display:c,...d}){const f=bs();return w.jsx(bt.Floating,{disabled:!l,label:l,children:w.jsx(De,{component:"circle",...d,...u("curve"),__vars:{"--curve-color":o?li(o,f):void 0},fill:"none",strokeLinecap:a?"round":"butt",...Jit({sum:r,size:e,thickness:i,value:t,offset:n,root:s})})})}Ike.displayName="@mantine/core/Curve";function Zit({size:e,thickness:t,sections:n,renderRoundedLineCaps:r,rootColor:i}){const s=n.reduce((c,d)=>c+d.value,0),o=Math.PI*((e*.9-t*2)/2)*2;let a=o;const l=[],u=[];for(let c=0;c<n.length;c+=1)l.push({sum:s,offset:a,data:n[c],root:!1}),a-=n[c].value/100*o;if(l.push({sum:s,offset:a,data:{color:i},root:!0}),u.push({...l[l.length-1],lineRoundCaps:!1}),l.length>2){u.push({...l[0],lineRoundCaps:r}),u.push({...l[l.length-2],lineRoundCaps:r});for(let c=1;c<=l.length-3;c+=1)u.push({...l[c],lineRoundCaps:!1})}else u.push({...l[0],lineRoundCaps:r});return u}var Rke={root:"m_b32e4812",svg:"m_d43b5134",curve:"m_b1ca1fbf",label:"m_b23f9dc4"};function est(e,t){return Math.min(e||12,(t||120)/4)}const tst={size:120,thickness:12},nst=(e,{size:t,thickness:n,transitionDuration:r})=>({root:{"--rp-size":Ye(t),"--rp-label-offset":Ye(n*2),"--rp-transition-duration":r?`${r}ms`:void 0}}),JF=tt((e,t)=>{const n=qe("RingProgress",tst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,label:u,sections:c,size:d,thickness:f,roundCaps:h,rootColor:p,transitionDuration:m,...g}=n,y=Mt({name:"RingProgress",classes:Rke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:nst}),v=est(f,d),b=Zit({size:d,thickness:v,sections:c,renderRoundedLineCaps:h,rootColor:p}).map(({data:_,sum:E,root:S,lineRoundCaps:T,offset:A},R)=>k.createElement(Ike,{..._,key:R,size:d,thickness:v,sum:E,offset:A,color:_?.color,root:S,lineRoundCaps:T,getStyles:y}));return w.jsxs(De,{...y("root"),size:d,ref:t,...g,children:[w.jsx("svg",{...y("svg"),children:b}),u&&w.jsx("div",{...y("label"),children:u})]})});JF.classes=Rke;JF.displayName="@mantine/core/RingProgress";var Dke={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const rst={withItemsBorders:!0},ist=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Jr(t),"--sc-color":n?li(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":_n(i,"sc-padding"),"--sc-font-size":As(i)}}),ZF=tt((e,t)=>{const n=qe("SegmentedControl",rst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,data:u,value:c,defaultValue:d,onChange:f,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:_,transitionDuration:E,transitionTimingFunction:S,variant:T,autoContrast:A,withItemsBorders:R,mod:I,...P}=n,N=Mt({name:"SegmentedControl",props:n,classes:Dke,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ist}),M=bs(),O=u.map(se=>typeof se=="string"?{label:se,value:se}:se),j=sXe(),[B,H]=k.useState(Ky()),[q,G]=k.useState(null),[U,L]=k.useState({}),z=(se,ae)=>{U[ae]=se,L(U)},[V,Y]=Ki({value:c,defaultValue:d,finalValue:Array.isArray(u)?O.find(se=>!se.disabled)?.value??u[0]?.value??null:null,onChange:f}),Q=Xa(p),ne=O.map(se=>k.createElement(De,{...N("control"),mod:{active:V===se.value,orientation:v},key:se.value},k.createElement("input",{...N("input"),disabled:m||se.disabled,type:"radio",name:Q,value:se.value,id:`${Q}-${se.value}`,checked:V===se.value,onChange:()=>!g&&Y(se.value),"data-focus-ring":M.focusRing,key:`${se.value}-input`}),k.createElement(De,{component:"label",...N("label"),mod:{active:V===se.value&&!(m||se.disabled),disabled:m||se.disabled,"read-only":g},htmlFor:`${Q}-${se.value}`,ref:ae=>z(ae,se.value),__vars:{"--sc-label-color":_!==void 0?ym({color:_,theme:M,autoContrast:A}):void 0},key:`${se.value}-label`},w.jsx("span",{...N("innerLabel"),children:se.label})))),ue=Is(t,se=>G(se));return JKe(()=>{H(Ky())},[u.length]),u.length===0?null:w.jsxs(De,{...N("root"),variant:T,size:h,ref:ue,mod:[{"full-width":y,orientation:v,initialized:j,"with-items-borders":R},I],...P,role:"radiogroup","data-disabled":m,children:[typeof V=="string"&&w.jsx(kJ,{target:U[V],parent:q,component:"span",transitionDuration:"var(--sc-transition-duration)",...N("indicator")},B),ne]})});ZF.classes=Dke;ZF.displayName="@mantine/core/SegmentedControl";const sst={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Ug=tt((e,t)=>{const n=qe("Select",sst,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:_,readOnly:E,disabled:S,filter:T,limit:A,withScrollArea:R,maxDropdownHeight:I,size:P,searchable:N,rightSection:M,checkIconPosition:O,withCheckIcon:j,nothingFoundMessage:B,name:H,form:q,searchValue:G,defaultSearchValue:U,onSearchChange:L,allowDeselect:z,error:V,rightSectionPointerEvents:Y,id:Q,clearable:ne,clearButtonProps:ue,hiddenInputProps:se,renderOption:ae,onClear:he,autoComplete:ie,scrollAreaProps:le,__defaultRightSection:Ce,__clearSection:X,__clearable:fe,chevronColor:de,...te}=n,ee=k.useMemo(()=>BJ(m),[m]),me=k.useMemo(()=>RF(ee),[ee]),Ie=Xa(Q),[Te,we,Me]=Ki({value:g,defaultValue:y,finalValue:null,onChange:p}),ke=typeof Te=="string"?me[Te]:void 0,Oe=tXe(ke),[xe,je,Ve]=Ki({value:G,defaultValue:U,finalValue:ke?ke.label:"",onChange:L}),nt=gR({opened:a,defaultOpened:l,onDropdownOpen:()=>{c?.(),nt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u?.(),nt.resetSelectedOption()}}),it=zt=>{je(zt),nt.resetSelectedOption()},{resolvedClassNames:_t,resolvedStyles:rn}=Th({props:n,styles:i,classNames:r});k.useEffect(()=>{v&&nt.selectFirstOption()},[v,xe]),k.useEffect(()=>{g===null&&it(""),typeof g=="string"&&ke&&(Oe?.value!==ke.value||Oe?.label!==ke.label)&&it(ke.label)},[g,ke]),k.useEffect(()=>{!Me&&!Ve&&it(typeof Te=="string"&&me[Te]?.label||"")},[m,Te]);const en=w.jsx(Jn.ClearButton,{...ue,onClear:()=>{we(null,null),it(""),he?.()}}),zn=ne&&!!Te&&!S&&!E;return w.jsxs(w.Fragment,{children:[w.jsxs(Jn,{store:nt,__staticSelector:"Select",classNames:_t,styles:rn,unstyled:s,readOnly:E,onOptionSubmit:zt=>{b?.(zt);const wn=z&&me[zt].value===Te?null:me[zt],nr=wn?wn.value:null;nr!==Te&&we(nr,wn),!Me&&it(typeof nr=="string"&&wn?.label||""),nt.closeDropdown()},size:P,..._,children:[w.jsx(Jn.Target,{targetType:N?"input":"button",autoComplete:ie,children:w.jsx(bu,{id:Ie,ref:t,__defaultRightSection:w.jsx(Jn.Chevron,{size:P,error:V,unstyled:s,color:de}),__clearSection:en,__clearable:zn,rightSection:M,rightSectionPointerEvents:Y||(zn?"all":"none"),...te,size:P,__staticSelector:"Select",disabled:S,readOnly:E||!N,value:xe,onChange:zt=>{it(zt.currentTarget.value),nt.openDropdown(),v&&nt.selectFirstOption()},onFocus:zt=>{N&&nt.openDropdown(),d?.(zt)},onBlur:zt=>{N&&nt.closeDropdown(),it(Te!=null&&me[Te]?.label||""),f?.(zt)},onClick:zt=>{N?nt.openDropdown():nt.toggleDropdown(),h?.(zt)},classNames:_t,styles:rn,unstyled:s,pointer:!N,error:V})}),w.jsx(nZ,{data:ee,hidden:E||S,filter:T,search:xe,limit:A,hiddenWhenEmpty:!B,withScrollArea:R,maxDropdownHeight:I,filterOptions:N&&ke?.label!==xe,value:Te,checkIconPosition:O,withCheckIcon:j,nothingFoundMessage:B,unstyled:s,labelId:te.label?`${Ie}-label`:void 0,"aria-label":te.label?void 0:te["aria-label"],renderOption:ae,scrollAreaProps:le})]}),w.jsx(Jn.HiddenInput,{value:Te,name:H,form:q,disabled:S,...se})]})});Ug.classes={...bu.classes,...Jn.classes};Ug.displayName="@mantine/core/Select";function ost({spacing:e,verticalSpacing:t,cols:n,selector:r}){const i=bs(),s=t===void 0?e:t,o=Yv({"--sg-spacing-x":Yi(Wf(e)),"--sg-spacing-y":Yi(Wf(s)),"--sg-cols":Wf(n)?.toString()}),a=ji(i.breakpoints).reduce((c,d)=>(c[d]||(c[d]={}),typeof e=="object"&&e[d]!==void 0&&(c[d]["--sg-spacing-x"]=Yi(e[d])),typeof s=="object"&&s[d]!==void 0&&(c[d]["--sg-spacing-y"]=Yi(s[d])),typeof n=="object"&&n[d]!==void 0&&(c[d]["--sg-cols"]=n[d]),c),{}),u=Ak(ji(a),i.breakpoints).filter(c=>ji(a[c.value]).length>0).map(c=>({query:`(min-width: ${i.breakpoints[c.value]})`,styles:a[c.value]}));return w.jsx(Hw,{styles:o,media:u,selector:r})}function dz(e){return typeof e=="object"&&e!==null?ji(e):[]}function ast(e){return e.sort((t,n)=>Tk(t)-Tk(n))}function lst({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...dz(e),...dz(t),...dz(n)]));return ast(r)}function ust({spacing:e,verticalSpacing:t,cols:n,selector:r}){const i=t===void 0?e:t,s=Yv({"--sg-spacing-x":Yi(Wf(e)),"--sg-spacing-y":Yi(Wf(i)),"--sg-cols":Wf(n)?.toString()}),o=lst({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((u,c)=>(u[c]||(u[c]={}),typeof e=="object"&&e[c]!==void 0&&(u[c]["--sg-spacing-x"]=Yi(e[c])),typeof i=="object"&&i[c]!==void 0&&(u[c]["--sg-spacing-y"]=Yi(i[c])),typeof n=="object"&&n[c]!==void 0&&(u[c]["--sg-cols"]=n[c]),u),{}),l=o.map(u=>({query:`simple-grid (min-width: ${u})`,styles:a[u]}));return w.jsx(Hw,{styles:s,container:l,selector:r})}var Pke={container:"m_925c2d2c",root:"m_2415a157"};const cst={cols:1,spacing:"md",type:"media"},$Z=tt((e,t)=>{const n=qe("SimpleGrid",cst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,cols:u,verticalSpacing:c,spacing:d,type:f,...h}=n,p=Mt({name:"SimpleGrid",classes:Pke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),m=uR();return f==="container"?w.jsxs(w.Fragment,{children:[w.jsx(ust,{...n,selector:`.${m}`}),w.jsx("div",{...p("container"),children:w.jsx(De,{ref:t,...p("root",{className:m}),...h})})]}):w.jsxs(w.Fragment,{children:[w.jsx(ost,{...n,selector:`.${m}`}),w.jsx(De,{ref:t,...p("root",{className:m}),...h})]})});$Z.classes=Pke;$Z.displayName="@mantine/core/SimpleGrid";var Oke={root:"m_18320242","skeleton-fade":"m_299c329c"};const dst={visible:!0,animate:!0},fst=(e,{width:t,height:n,radius:r,circle:i})=>({root:{"--skeleton-height":Ye(n),"--skeleton-width":Ye(i?n:t),"--skeleton-radius":i?"1000px":r===void 0?void 0:Jr(r)}}),FZ=tt((e,t)=>{const n=qe("Skeleton",dst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,width:u,height:c,circle:d,visible:f,radius:h,animate:p,mod:m,...g}=n,y=Mt({name:"Skeleton",classes:Oke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:fst});return w.jsx(De,{ref:t,...y("root"),mod:[{visible:f,animate:p},m],...g})});FZ.classes=Oke;FZ.displayName="@mantine/core/Skeleton";const[Nke,eL]=Qo("SliderProvider was not found in tree"),LZ=k.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=eL();return w.jsx(De,{tabIndex:-1,variant:n,size:e,ref:a,...l("root"),...o})});LZ.displayName="@mantine/core/SliderRoot";const u6=k.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:u,thumbLabel:c,onFocus:d,onBlur:f,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=eL(),[b,_]=k.useState(!1),E=u||s||b||h&&p;return w.jsxs(De,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:S=>{_(!0),typeof d=="function"&&d(S)},onBlur:S=>{_(!1),typeof f=="function"&&f(S)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,w.jsx(uf,{mounted:i!=null&&!!E,transition:"fade",duration:0,...l,children:S=>w.jsx("div",{...v("label",{style:S}),children:i})})]})});u6.displayName="@mantine/core/SliderThumb";function c6({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function hst({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function Mke({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=eL();if(!e)return null;const l=e.map((u,c)=>k.createElement(De,{...a("markWrapper"),__vars:{"--mark-offset":`${c6({value:u.value,min:t,max:n})}%`},key:c},w.jsx(De,{...a("mark"),mod:{filled:hst({mark:u,value:i,offset:s,inverted:o}),disabled:r}}),u.label&&w.jsx("div",{...a("markLabel"),children:u.label})));return w.jsx("div",{children:l})}Mke.displayName="@mantine/core/SliderMarks";function jZ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=eL();return w.jsx(De,{...l("trackContainer"),mod:{disabled:r},...o,children:w.jsxs(De,{...l("track"),mod:{inverted:s,disabled:r},children:[w.jsx(De,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),t,w.jsx(Mke,{...a,offset:i,disabled:r,inverted:s})]})})}jZ.displayName="@mantine/core/SliderTrack";function WW({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),l=(a!==0?Math.round(a/i)*i:0)+n,u=Math.max(l,n);return s!==void 0?Number(u.toFixed(s)):u}function Ed(e,t){return parseFloat(e.toFixed(t))}function $ke(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function Ib(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function Rb(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function GW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function YW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var tL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const pst={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},mst=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":_n(t,"slider-size"),"--slider-color":n?li(n,e):void 0,"--slider-radius":i===void 0?void 0:Jr(i),"--slider-thumb-size":r!==void 0?Ye(r):"calc(var(--slider-size) * 2)"}}),nL=tt((e,t)=>{const n=qe("Slider",pst,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,step:d,precision:f,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,thumbChildren:E,disabled:S,unstyled:T,scale:A,inverted:R,className:I,style:P,vars:N,hiddenInputProps:M,restrictToMarks:O,thumbProps:j,...B}=n,H=Mt({name:"Slider",props:n,classes:tL,classNames:r,className:I,styles:i,style:P,vars:N,varsResolver:mst,unstyled:T}),{dir:q}=fc(),[G,U]=k.useState(!1),[L,z]=Ki({value:typeof s=="number"?jd(s,u,c):s,defaultValue:typeof h=="number"?jd(h,u,c):h,finalValue:jd(0,u,c),onChange:o}),V=k.useRef(L),Y=k.useRef(a);k.useEffect(()=>{Y.current=a},[a]);const Q=k.useRef(null),ne=k.useRef(null),ue=c6({value:L,min:u,max:c}),se=A(L),ae=typeof g=="function"?g(se):g,he=f??$ke(d),ie=k.useCallback(({x:te})=>{if(!S){const ee=WW({value:te,min:u,max:c,step:d,precision:he});z(O&&m?.length?IW(ee,m.map(me=>me.value)):ee),V.current=ee}},[S,u,c,d,he,z,m,O]),le=k.useCallback(()=>{if(!S&&Y.current){const te=O&&m?.length?IW(V.current,m.map(ee=>ee.value)):V.current;Y.current(te)}},[S,m,O]),{ref:Ce,active:X}=lR(ie,{onScrubEnd:le},q),fe=k.useCallback(te=>{!S&&Y.current&&Y.current(te)},[S]),de=te=>{if(!S)switch(te.key){case"ArrowUp":{if(te.preventDefault(),ne.current?.focus(),O&&m){const me=Ib(L,m);z(me),fe(me);break}const ee=Ed(Math.min(Math.max(L+d,u),c),he);z(ee),fe(ee);break}case"ArrowRight":{if(te.preventDefault(),ne.current?.focus(),O&&m){const me=q==="rtl"?Rb(L,m):Ib(L,m);z(me),fe(me);break}const ee=Ed(Math.min(Math.max(q==="rtl"?L-d:L+d,u),c),he);z(ee),fe(ee);break}case"ArrowDown":{if(te.preventDefault(),ne.current?.focus(),O&&m){const me=Rb(L,m);z(me),fe(me);break}const ee=Ed(Math.min(Math.max(L-d,u),c),he);z(ee),fe(ee);break}case"ArrowLeft":{if(te.preventDefault(),ne.current?.focus(),O&&m){const me=q==="rtl"?Ib(L,m):Rb(L,m);z(me),fe(me);break}const ee=Ed(Math.min(Math.max(q==="rtl"?L+d:L-d,u),c),he);z(ee),fe(ee);break}case"Home":{if(te.preventDefault(),ne.current?.focus(),O&&m){z(GW(m)),fe(GW(m));break}z(u),fe(u);break}case"End":{if(te.preventDefault(),ne.current?.focus(),O&&m){z(YW(m)),fe(YW(m));break}z(c),fe(c);break}}};return w.jsx(Nke,{value:{getStyles:H},children:w.jsxs(LZ,{...B,ref:Is(t,Q),onKeyDownCapture:de,onMouseDownCapture:()=>Q.current?.focus(),size:l,disabled:S,children:[w.jsx(jZ,{inverted:R,offset:0,filled:ue,marks:m,min:u,max:c,value:se,disabled:S,containerProps:{ref:Ce,onMouseEnter:_?()=>U(!0):void 0,onMouseLeave:_?()=>U(!1):void 0},children:w.jsx(u6,{max:c,min:u,value:se,position:ue,dragging:X,label:ae,ref:ne,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:_,isHovered:G,disabled:S,...j,children:E})}),w.jsx("input",{type:"hidden",name:p,value:se,...M})]})})});nL.classes=tL;nL.displayName="@mantine/core/Slider";function gst(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const yst=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":_n(t,"slider-size"),"--slider-color":n?li(n,e):void 0,"--slider-radius":i===void 0?void 0:Jr(i),"--slider-thumb-size":r!==void 0?Ye(r):"calc(var(--slider-size) * 2)"}}),vst={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},Nk=tt((e,t)=>{const n=qe("RangeSlider",vst,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,minRange:d,maxRange:f,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:_,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:A,disabled:R,unstyled:I,scale:P,inverted:N,className:M,style:O,vars:j,hiddenInputProps:B,restrictToMarks:H,thumbProps:q,...G}=n,U=Mt({name:"Slider",props:n,classes:tL,classNames:r,className:M,styles:i,style:O,vars:j,varsResolver:yst,unstyled:I}),{dir:L}=fc(),[z,V]=k.useState(-1),[Y,Q]=k.useState(!1),[ne,ue]=Ki({value:s,defaultValue:m,finalValue:[u,c],onChange:o}),se=k.useRef(ne),ae=k.useRef([]),he=k.useRef(null),ie=k.useRef(void 0),le=[c6({value:ne[0],min:u,max:c}),c6({value:ne[1],min:u,max:c})],Ce=p??$ke(h),X=Oe=>{ue(Oe),se.current=Oe};k.useEffect(()=>{Array.isArray(s)&&(se.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const fe=(Oe,xe,je)=>{if(xe===-1)return;const Ve=[...se.current];if(H&&y){const nt=IW(Oe,y.map(zn=>zn.value)),it=Ve[xe];Ve[xe]=nt;const _t=xe===0?1:0,rn=YW(y),en=GW(y);nt===rn&&Ve[_t]===rn||nt===en&&Ve[_t]===en?Ve[xe]=it:nt===Ve[_t]&&(it>Ve[_t]?Ve[_t]=Rb(nt,y):Ve[_t]=Ib(nt,y))}else Ve[xe]=Oe,xe===0&&(Oe>Ve[1]-(d-1e-9)&&(Ve[1]=Math.min(Oe+d,c)),Oe>(c-(d-1e-9)||u)&&(Ve[xe]=se.current[xe]),Ve[1]-Oe>f&&(Ve[1]=Oe+f)),xe===1&&(Oe<Ve[0]+d&&(Ve[0]=Math.max(Oe-d,u)),Oe<Ve[0]+d&&(Ve[xe]=se.current[xe]),Oe-Ve[0]>f&&(Ve[0]=Oe-f));if(Ve[0]=Ed(Ve[0],Ce),Ve[1]=Ed(Ve[1],Ce),Ve[0]>Ve[1]){const nt=Ve[0];Ve[0]=Ve[1],Ve[1]=nt}X(Ve),je&&a?.(se.current)},de=Oe=>{if(!R){const xe=WW({value:Oe,min:u,max:c,step:h,precision:Ce});fe(xe,ie.current,!1)}},{ref:te,active:ee}=lR(({x:Oe})=>de(Oe),{onScrubEnd:()=>!R&&a?.(se.current)},L);function me(Oe){ie.current=Oe}const Ie=Oe=>{te.current.focus();const xe=te.current.getBoundingClientRect(),je=gst(Oe.nativeEvent),Ve=WW({value:je-xe.left,max:c,min:u,step:h,containerWidth:xe.width}),nt=Math.abs(ne[0]-Ve)>Math.abs(ne[1]-Ve)?1:0,it=L==="ltr"?nt:nt===1?0:1;ie.current=it},Te=()=>z!==1&&z!==0?(V(0),0):z,we=Oe=>{if(!R)switch(Oe.key){case"ArrowUp":{Oe.preventDefault();const xe=Te();ae.current[xe].focus();const je=H&&y?Ib(se.current[xe],y):Math.min(Math.max(se.current[xe]+h,u),c);fe(Ed(je,Ce),xe,!0);break}case"ArrowRight":{Oe.preventDefault();const xe=Te();ae.current[xe].focus();const je=H&&y?(L==="rtl"?Rb:Ib)(se.current[xe],y):Math.min(Math.max(L==="rtl"?se.current[xe]-h:se.current[xe]+h,u),c);fe(Ed(je,Ce),xe,!0);break}case"ArrowDown":{Oe.preventDefault();const xe=Te();ae.current[xe].focus();const je=H&&y?Rb(se.current[xe],y):Math.min(Math.max(se.current[xe]-h,u),c);fe(Ed(je,Ce),xe,!0);break}case"ArrowLeft":{Oe.preventDefault();const xe=Te();ae.current[xe].focus();const je=H&&y?(L==="rtl"?Ib:Rb)(se.current[xe],y):Math.min(Math.max(L==="rtl"?se.current[xe]+h:se.current[xe]-h,u),c);fe(Ed(je,Ce),xe,!0);break}}},Me={max:c,min:u,size:l,labelTransitionProps:b,labelAlwaysOn:_,onBlur:()=>V(-1)},ke=Array.isArray(A);return w.jsx(Nke,{value:{getStyles:U},children:w.jsxs(LZ,{...G,size:l,ref:Is(t,he),disabled:R,onMouseDownCapture:()=>he.current?.focus(),onKeyDownCapture:()=>{ae.current[0]?.parentElement?.contains(document.activeElement)||ae.current[0]?.focus()},children:[w.jsxs(jZ,{offset:le[0],marksOffset:ne[0],filled:le[1]-le[0],marks:y,inverted:N,min:u,max:c,value:ne[1],disabled:R,containerProps:{ref:te,onMouseEnter:T?()=>Q(!0):void 0,onMouseLeave:T?()=>Q(!1):void 0,onTouchStartCapture:Ie,onTouchEndCapture:()=>{ie.current=-1},onMouseDownCapture:Ie,onMouseUpCapture:()=>{ie.current=-1},onKeyDownCapture:we},children:[w.jsx(u6,{...Me,value:P(ne[0]),position:le[0],dragging:ee,label:typeof v=="function"?v(Ed(P(ne[0]),Ce)):v,ref:Oe=>{ae.current[0]=Oe},thumbLabel:E,onMouseDown:()=>me(0),onFocus:()=>V(0),showLabelOnHover:T,isHovered:Y,disabled:R,...q?.(0),children:ke?A[0]:A}),w.jsx(u6,{...Me,thumbLabel:S,value:P(ne[1]),position:le[1],dragging:ee,label:typeof v=="function"?v(Ed(P(ne[1]),Ce)):v,ref:Oe=>{ae.current[1]=Oe},onMouseDown:()=>me(1),onFocus:()=>V(1),showLabelOnHover:T,isHovered:Y,disabled:R,...q?.(1),children:ke?A[1]:A})]}),w.jsx("input",{type:"hidden",name:`${g}_from`,value:ne[0],...B}),w.jsx("input",{type:"hidden",name:`${g}_to`,value:ne[1],...B})]})})});Nk.classes=tL;Nk.displayName="@mantine/core/RangeSlider";const bst={},zd=tt((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=qe("Space",bst,e);return w.jsx(De,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});zd.displayName="@mantine/core/Space";var Fke={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const wst={maxHeight:100,initialState:!1},xst=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),BZ=tt((e,t)=>{const n=qe("Spoiler",wst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,initialState:u,maxHeight:c,hideLabel:d,showLabel:f,children:h,controlRef:p,transitionDuration:m,id:g,expanded:y,onExpandedChange:v,...b}=n,_=Mt({name:"Spoiler",classes:Fke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xst}),E=Xa(g),S=`${E}-region`,[T,A]=Ki({value:y,defaultValue:u,finalValue:!1,onChange:v}),{ref:R,height:I}=KKe(),P=T?d:f,N=P!==null&&c<I;return w.jsxs(De,{..._("root"),id:E,ref:t,"data-has-spoiler":N||void 0,...b,children:[N&&w.jsx(Ww,{component:"button",type:"button",ref:p,onClick:()=>A(!T),"aria-expanded":T,"aria-controls":S,..._("control"),children:P}),w.jsx("div",{..._("content",{style:{maxHeight:T?I?Ye(I):void 0:Ye(c)}}),"data-reduce-motion":!0,role:"region",id:S,children:w.jsx("div",{ref:R,children:h})})]})});BZ.classes=Fke;BZ.displayName="@mantine/core/Spoiler";var Lke={root:"m_6d731127"};const _st={gap:"md",align:"stretch",justify:"flex-start"},Est=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Yi(t),"--stack-align":n,"--stack-justify":r}}),Gn=tt((e,t)=>{const n=qe("Stack",_st,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,align:u,justify:c,gap:d,variant:f,...h}=n,p=Mt({name:"Stack",props:n,classes:Lke,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Est});return w.jsx(De,{ref:t,...p("root"),variant:f,...h})});Gn.classes=Lke;Gn.displayName="@mantine/core/Stack";const jke=k.createContext(null),Cst=jke.Provider,Sst=()=>k.useContext(jke),Tst={},zZ=tt((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=qe("SwitchGroup",Tst,e),[c,d]=Ki({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return w.jsx(Cst,{value:{value:c,onChange:f,size:s},children:w.jsx(Qr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:w.jsx(JJ,{role:"group",children:a})})})});zZ.classes=Qr.Wrapper.classes;zZ.displayName="@mantine/core/SwitchGroup";var Bke={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const Ast={labelPosition:"right"},kst=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Jr(t),"--switch-height":_n(r,"switch-height"),"--switch-width":_n(r,"switch-width"),"--switch-thumb-size":_n(r,"switch-thumb-size"),"--switch-label-font-size":_n(r,"switch-label-font-size"),"--switch-track-label-padding":_n(r,"switch-track-label-padding"),"--switch-color":n?li(n,e):void 0}}),Xy=tt((e,t)=>{const n=qe("Switch",Ast,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,offLabel:d,onLabel:f,id:h,size:p,radius:m,wrapperProps:g,thumbIcon:y,checked:v,defaultChecked:b,onChange:_,labelPosition:E,description:S,error:T,disabled:A,variant:R,rootRef:I,mod:P,...N}=n,M=Sst(),O=p||M?.size,j=Mt({name:"Switch",props:n,classes:Bke,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:kst}),{styleProps:B,rest:H}=qw(N),q=Xa(h),G=M?{checked:M.value.includes(H.value),onChange:M.onChange}:{},[U,L]=Ki({value:G.checked??v,defaultValue:b,finalValue:!1});return w.jsxs(DF,{...j("root"),__staticSelector:"Switch",__stylesApiProps:n,id:q,size:O,labelPosition:E,label:c,description:S,error:T,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":G.checked||v||void 0,variant:R,ref:I,mod:P,...B,...g,children:[w.jsx("input",{...H,disabled:A,checked:U,"data-checked":G.checked||v||void 0,onChange:z=>{M?G.onChange?.(z):_?.(z),L(z.currentTarget.checked)},id:q,ref:t,type:"checkbox",role:"switch",...j("input")}),w.jsxs(De,{"aria-hidden":"true",component:"span",mod:{error:T,"label-position":E,"without-labels":!f&&!d},...j("track"),children:[w.jsx(De,{component:"span",mod:"reduce-motion",...j("thumb"),children:y}),w.jsx("span",{...j("trackLabel"),children:U?f:d})]})]})});Xy.classes={...Bke,...AAe};Xy.displayName="@mantine/core/Switch";Xy.Group=zZ;const[Ist,Rst]=Qo("Table component was not found in the tree");var _R={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function Dst(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Yw(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=tt((i,s)=>{const o=qe(n,{},i),{classNames:a,className:l,style:u,styles:c,...d}=o,f=Rst();return w.jsx(De,{component:e,ref:s,...Dst(f,t),...f.getStyles(e,{className:l,classNames:a,style:u,styles:c,props:o}),...d})});return r.displayName=`@mantine/core/${n}`,r.classes=_R,r}const KE=Yw("th",{columnBorder:!0}),ER=Yw("td",{columnBorder:!0}),Ag=Yw("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),VZ=Yw("thead",{stickyHeader:!0}),$A=Yw("tbody"),UZ=Yw("tfoot"),zke=Yw("caption",{captionSide:!0});function HZ({data:e}){return w.jsxs(w.Fragment,{children:[e.caption&&w.jsx(zke,{children:e.caption}),e.head&&w.jsx(VZ,{children:w.jsx(Ag,{children:e.head.map((t,n)=>w.jsx(KE,{children:t},n))})}),e.body&&w.jsx($A,{children:e.body.map((t,n)=>w.jsx(Ag,{children:t.map((r,i)=>w.jsx(ER,{children:r},i))},n))}),e.foot&&w.jsx(UZ,{children:w.jsx(Ag,{children:e.foot.map((t,n)=>w.jsx(KE,{children:t},n))})})]})}HZ.displayName="@mantine/core/TableDataRenderer";const Pst={type:"scrollarea"},Ost=(e,{minWidth:t,maxHeight:n,type:r})=>({scrollContainer:{"--table-min-width":Ye(t),"--table-max-height":Ye(n),"--table-overflow":r==="native"?"auto":void 0}}),qZ=tt((e,t)=>{const n=qe("TableScrollContainer",Pst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,minWidth:c,maxHeight:d,type:f,scrollAreaProps:h,...p}=n,m=Mt({name:"TableScrollContainer",classes:_R,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ost,rootSelector:"scrollContainer"});return w.jsx(De,{component:f==="scrollarea"?Qp:"div",...f==="scrollarea"?d?{offsetScrollbars:"xy",...h}:{offsetScrollbars:"x",...h}:{},ref:t,...m("scrollContainer"),...p,children:w.jsx("div",{...m("scrollContainerInner"),children:u})})});qZ.classes=_R;qZ.displayName="@mantine/core/TableScrollContainer";const Nst={withRowBorders:!0,verticalSpacing:7},Mst=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:u,stickyHeaderOffset:c,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Yi(r),"--table-vertical-spacing":Yi(i),"--table-border-color":s?li(s,e):void 0,"--table-striped-color":l&&o?li(o,e):void 0,"--table-highlight-on-hover-color":u&&a?li(a,e):void 0,"--table-sticky-header-offset":d?Ye(c):void 0}}),In=tt((e,t)=>{const n=qe("Table",Nst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:u,verticalSpacing:c,captionSide:d,stripedColor:f,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:_,variant:E,data:S,children:T,stickyHeader:A,stickyHeaderOffset:R,mod:I,tabularNums:P,...N}=n,M=Mt({name:"Table",props:n,className:i,style:s,classes:_R,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:Mst});return w.jsx(Ist,{value:{getStyles:M,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:d||"bottom"},children:w.jsx(De,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v,"data-tabular-nums":P},I],...M("table"),...N,children:T||!!S&&w.jsx(HZ,{data:S})})})});In.classes=_R;In.displayName="@mantine/core/Table";In.Td=ER;In.Th=KE;In.Tr=Ag;In.Thead=VZ;In.Tbody=$A;In.Tfoot=UZ;In.Caption=zke;In.ScrollContainer=qZ;In.DataRenderer=HZ;const[$st,WZ]=Qo("Tabs component was not found in the tree");var CR={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const Fst={},GZ=tt((e,t)=>{const n=qe("TabsList",Fst,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:l,style:u,mod:c,...d}=n,f=WZ();return w.jsx(De,{...d,...f.getStyles("list",{className:i,style:u,classNames:a,styles:l,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:s,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});GZ.classes=CR;GZ.displayName="@mantine/core/TabsList";const Lst={},YZ=tt((e,t)=>{const n=qe("TabsPanel",Lst,e),{children:r,className:i,value:s,classNames:o,styles:a,style:l,mod:u,keepMounted:c,...d}=n,f=WZ(),h=f.value===s,p=f.keepMounted||c||h?r:null;return w.jsx(De,{...d,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[l,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},u],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:p})});YZ.classes=CR;YZ.displayName="@mantine/core/TabsPanel";const jst={},KZ=tt((e,t)=>{const n=qe("TabsTab",jst,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:l,onKeyDown:u,disabled:c,color:d,style:f,classNames:h,styles:p,vars:m,mod:g,tabIndex:y,...v}=n,b=bs(),{dir:_}=fc(),E=WZ(),S=a===E.value,T=R=>{E.onChange(E.allowTabDeactivation&&a===E.value?null:a),l?.(R)},A={classNames:h,styles:p,props:n};return w.jsxs(Co,{...v,...E.getStyles("tab",{className:r,style:f,variant:E.variant,...A}),disabled:c,unstyled:E.unstyled,variant:E.variant,mod:[{active:S,disabled:c,orientation:E.orientation,inverted:E.inverted,placement:E.orientation==="vertical"&&E.placement},g],ref:t,role:"tab",id:E.getTabId(a),"aria-selected":S,tabIndex:y!==void 0?y:S||E.value===null?0:-1,"aria-controls":E.getPanelId(a),onClick:T,__vars:{"--tabs-color":d?li(d,b):void 0},onKeyDown:XQ({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:E.activateTabWithKeyboard,loop:E.loop,orientation:E.orientation||"horizontal",dir:_,onKeyDown:u}),children:[o&&w.jsx("span",{...E.getStyles("tabSection",A),"data-position":"left",children:o}),i&&w.jsx("span",{...E.getStyles("tabLabel",A),children:i}),s&&w.jsx("span",{...E.getStyles("tabSection",A),"data-position":"right",children:s})]})});KZ.classes=CR;KZ.displayName="@mantine/core/TabsTab";const khe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",Bst={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},zst=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Jr(t),"--tabs-color":li(n,e),"--tabs-text-color":Xv(r,e)?ym({color:n,theme:e,autoContrast:r}):void 0}}),wr=tt((e,t)=>{const n=qe("Tabs",Bst,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:l,id:u,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:_,className:E,style:S,vars:T,autoContrast:A,mod:R,...I}=n,P=Xa(u),[N,M]=Ki({value:i,defaultValue:r,finalValue:null,onChange:s}),O=Mt({name:"Tabs",props:n,classes:CR,className:E,style:S,classNames:v,styles:b,unstyled:_,vars:T,varsResolver:zst});return w.jsx($st,{value:{placement:g,value:N,orientation:o,id:P,loop:l,activateTabWithKeyboard:c,getTabId:JM(`${P}-tab`,khe),getPanelId:JM(`${P}-panel`,khe),onChange:M,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,keepMounted:y,unstyled:_,getStyles:O},children:w.jsx(De,{ref:t,id:P,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},R],...O("root"),...I,children:a})})});wr.classes=CR;wr.displayName="@mantine/core/Tabs";wr.Tab=KZ;wr.Panel=YZ;wr.List=GZ;const Vst={},iu=tt((e,t)=>{const n=qe("TextInput",Vst,e);return w.jsx(bu,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});iu.classes=bu.classes;iu.displayName="@mantine/core/TextInput";const Ust=["h1","h2","h3","h4","h5","h6"],Hst=["xs","sm","md","lg","xl"];function qst(e,t){const n=t!==void 0?t:`h${e}`;return Ust.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:Hst.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:Ye(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Vke={root:"m_8a5d1357"};const Wst={order:1},Gst=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=qst(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ri=tt((e,t)=>{const n=qe("Title",Wst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:l,vars:u,size:c,variant:d,lineClamp:f,textWrap:h,mod:p,...m}=n,g=Mt({name:"Title",props:n,classes:Vke,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Gst});return[1,2,3,4,5,6].includes(l)?w.jsx(De,{...g("root"),component:`h${l}`,variant:d,ref:t,mod:[{order:l,"data-line-clamp":typeof f=="number"},p],size:c,...m}):null});ri.classes=Vke;ri.displayName="@mantine/core/Title";function Yst(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Kst(e){return k.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Xst(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const Qst=()=>Yst({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Kw=Qst(),Jst=(e=Kw)=>Kst(e);function nS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Xst(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Zst(e,t=Kw){const n=e.id||Ky();return nS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function Uke(e,t=Kw){return nS(t,n=>n.filter(r=>r.id===e?(r.onClose?.(r),!1):!0)),e}function eot(e,t=Kw){return nS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function tot(e=Kw){nS(e,()=>[])}function not(e=Kw){nS(e,t=>t.slice(0,e.getState().limit))}const Xw={show:Zst,hide:Uke,update:eot,clean:tot,cleanQueue:not,updateState:nS};function KW(e,t){return KW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},KW(e,t)}function Hke(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,KW(e,t)}var fz={exports:{}},hz,Ihe;function rot(){if(Ihe)return hz;Ihe=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return hz=e,hz}var pz,Rhe;function iot(){if(Rhe)return pz;Rhe=1;var e=rot();function t(){}function n(){}return n.resetWarningCache=t,pz=function(){function r(o,a,l,u,c,d){if(d!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},pz}var Dhe;function sot(){return Dhe||(Dhe=1,fz.exports=iot()()),fz.exports}var oot=sot();const d6=Ao(oot),Phe={disabled:!1},f6=bn.createContext(null);var aot=function(t){return t.scrollTop},q2="unmounted",ab="exited",lb="entering",L_="entered",XW="exiting",E0=(function(e){Hke(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=ab,s.appearStatus=lb):l=L_:r.unmountOnExit||r.mountOnEnter?l=q2:l=ab,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===q2?{status:ab}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==lb&&o!==L_&&(s=lb):(o===lb||o===L_)&&(s=XW)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===lb){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:U2.findDOMNode(this);o&&aot(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ab&&this.setState({status:q2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[U2.findDOMNode(this),a],u=l[0],c=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!o||Phe.disabled){this.safeSetState({status:L_},function(){s.props.onEntered(u)});return}this.props.onEnter(u,c),this.safeSetState({status:lb},function(){s.props.onEntering(u,c),s.onTransitionEnd(f,function(){s.safeSetState({status:L_},function(){s.props.onEntered(u,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:U2.findDOMNode(this);if(!s||Phe.disabled){this.safeSetState({status:ab},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:XW},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ab},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:U2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],u=l[0],c=l[1];this.props.addEndListener(u,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===q2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=mZ(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return bn.createElement(f6.Provider,{value:null},typeof o=="function"?o(i,a):bn.cloneElement(bn.Children.only(o),a))},t})(bn.Component);E0.contextType=f6;E0.propTypes={};function a_(){}E0.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:a_,onEntering:a_,onEntered:a_,onExit:a_,onExiting:a_,onExited:a_};E0.UNMOUNTED=q2;E0.EXITED=ab;E0.ENTERING=lb;E0.ENTERED=L_;E0.EXITING=XW;function lot(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XZ(e,t){var n=function(s){return t&&k.isValidElement(s)?t(s):s},r=Object.create(null);return e&&k.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function uot(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in t){if(r[l])for(o=0;o<r[l].length;o++){var u=r[l][o];a[r[l][o]]=n(u)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Db(e,t,n){return n[t]!=null?n[t]:e.props[t]}function cot(e,t){return XZ(e.children,function(n){return k.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Db(n,"appear",e),enter:Db(n,"enter",e),exit:Db(n,"exit",e)})})}function dot(e,t,n){var r=XZ(e.children),i=uot(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(k.isValidElement(o)){var a=s in t,l=s in r,u=t[s],c=k.isValidElement(u)&&!u.props.in;l&&(!a||c)?i[s]=k.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Db(o,"exit",e),enter:Db(o,"enter",e)}):!l&&a&&!c?i[s]=k.cloneElement(o,{in:!1}):l&&a&&k.isValidElement(u)&&(i[s]=k.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:Db(o,"exit",e),enter:Db(o,"enter",e)}))}}),i}var fot=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},hot={component:"div",childFactory:function(t){return t}},my=(function(e){Hke(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(lot(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?cot(i,a):dot(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=XZ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=l6({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=mZ(i,["component","childFactory"]),l=this.state.contextValue,u=fot(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?bn.createElement(f6.Provider,{value:l},u):bn.createElement(f6.Provider,{value:l},bn.createElement(s,a,u))},t})(bn.Component);my.propTypes={};my.defaultProps=hot;const qke=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function pot(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),qke.reduce((n,r)=>(n[r]=[],n),{}))}const Ohe={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},mot={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function got({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Ohe[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},l={opacity:1,transform:mot[o]},u={opacity:0,maxHeight:0,transform:Ohe[o]};return{...a,...{entering:l,entered:l,exiting:u,exited:u}[e]}}function yot(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const Wke=k.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,l=yot(n,e.autoClose),u=k.useRef(-1),c=()=>window.clearTimeout(u.current),d=()=>{t(e.id),c()},f=()=>{typeof l=="number"&&(u.current=window.setTimeout(d,l))};return k.useEffect(()=>{e.onOpen?.(e)},[]),k.useEffect(()=>(f(),c),[l]),w.jsx(TZ,{...r,...a,onClose:d,ref:i,onMouseEnter:c,onMouseLeave:f,children:o})});Wke.displayName="@mantine/notifications/NotificationContainer";var Gke={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const vot=E0,bot={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:dc("overlay"),store:Kw,withinPortal:!0},wot=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t?.toString(),"--notifications-container-width":Ye(n)}}),C0=tt((e,t)=>{const n=qe("Notifications",bot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,position:u,autoClose:c,transitionDuration:d,containerWidth:f,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,_=bs(),E=Jst(g),S=HKe(),T=mF(),A=k.useRef({}),R=k.useRef(0),P=(_.respectReducedMotion?T:!1)?1:d,N=Mt({name:"Notifications",classes:Gke,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:wot});k.useEffect(()=>{g?.updateState(j=>({...j,limit:p||5,defaultPosition:u}))},[p,u]),fu(()=>{E.notifications.length>R.current&&setTimeout(()=>S(),0),R.current=E.notifications.length},[E.notifications]);const M=pot(E.notifications,u),O=qke.reduce((j,B)=>(j[B]=M[B].map(({style:H,...q})=>w.jsx(vot,{timeout:P,onEnter:()=>A.current[q.id].offsetHeight,nodeRef:{current:A.current[q.id]},children:G=>w.jsx(Wke,{ref:U=>{A.current[q.id]=U},data:q,onHide:U=>Uke(U,g),autoClose:c,...N("notification",{style:{...got({state:G,position:B,transitionDuration:P,maxHeight:h}),...H}})})},q.id)),j),{});return w.jsxs(Qv,{withinPortal:v,...y,children:[w.jsx(De,{...N("root"),"data-position":"top-center",ref:t,...b,children:w.jsx(my,{children:O["top-center"]})}),w.jsx(De,{...N("root"),"data-position":"top-left",...b,children:w.jsx(my,{children:O["top-left"]})}),w.jsx(De,{...N("root",{className:zE.classNames.fullWidth}),"data-position":"top-right",...b,children:w.jsx(my,{children:O["top-right"]})}),w.jsx(De,{...N("root",{className:zE.classNames.fullWidth}),"data-position":"bottom-right",...b,children:w.jsx(my,{children:O["bottom-right"]})}),w.jsx(De,{...N("root"),"data-position":"bottom-left",...b,children:w.jsx(my,{children:O["bottom-left"]})}),w.jsx(De,{...N("root"),"data-position":"bottom-center",...b,children:w.jsx(my,{children:O["bottom-center"]})})]})});C0.classes=Gke;C0.displayName="@mantine/notifications/Notifications";C0.show=Xw.show;C0.hide=Xw.hide;C0.update=Xw.update;C0.clean=Xw.clean;C0.cleanQueue=Xw.cleanQueue;C0.updateState=Xw.updateState;const Yke=k.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Vi=()=>k.useContext(Yke);function xot({children:e}){const[t,n]=k.useState(void 0),r=k.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return w.jsx(Yke.Provider,{value:r,children:e})}var Nhe="popstate";function _ot(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return QW("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Mk(i)}return Cot(t,n,null,e)}function ys(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Eot(){return Math.random().toString(36).substring(2,10)}function Mhe(e,t){return{usr:e.state,key:e.key,idx:t}}function QW(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?rS(t):t,state:n,key:t&&t.key||r||Eot()}}function Mk({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function rS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Cot(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a="PUSH";let v=QW(m.location,g,y);u=c()+1;let b=Mhe(v,u),_=m.createHref(v);try{o.pushState(b,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(_)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a="REPLACE";let v=QW(m.location,g,y);u=c();let b=Mhe(v,u),_=m.createHref(v);o.replaceState(b,"",_),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){return Sot(g)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Nhe,d),l=g,()=>{i.removeEventListener(Nhe,d),l=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}function Sot(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ys(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Mk(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Kke(e,t,n="/"){return Tot(e,t,n,!1)}function Tot(e,t,n,r){let i=typeof t=="string"?rS(t):t,s=Hg(i.pathname||"/",n);if(s==null)return null;let o=Xke(e);Aot(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Lot(s);a=$ot(o[l],u,r)}return a}function Xke(e,t=[],n=[],r="",i=!1){let s=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(r)&&l)return;ys(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length)}let d=kg([r,c.relativePath]),f=n.concat(c);o.children&&o.children.length>0&&(ys(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Xke(o.children,t,f,d,l)),!(o.path==null&&!o.index)&&t.push({path:d,score:Not(d,o.index),routesMeta:f})};return e.forEach((o,a)=>{if(o.path===""||!o.path?.includes("?"))s(o,a);else for(let l of Qke(o.path))s(o,a,!0,l)}),t}function Qke(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Qke(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Aot(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Mot(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var kot=/^:[\w-]+$/,Iot=3,Rot=2,Dot=1,Pot=10,Oot=-2,$he=e=>e==="*";function Not(e,t){let n=e.split("/"),r=n.length;return n.some($he)&&(r+=Oot),t&&(r+=Rot),n.filter(i=>!$he(i)).reduce((i,s)=>i+(kot.test(s)?Iot:s===""?Dot:Pot),r)}function Mot(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function $ot(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=h6({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=h6({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:kg([s,d.pathname]),pathnameBase:Vot(kg([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=kg([s,d.pathnameBase]))}return o}function h6(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Fot(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let p=a[f]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[f];return d&&!h?u[c]=void 0:u[c]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function Fot(e,t=!1,n=!0){Gd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Lot(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Gd(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Hg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function jot(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?rS(e):e;return{pathname:n?n.startsWith("/")?n:Bot(n,t):t,search:Uot(r),hash:Hot(i)}}function Bot(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function mz(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zot(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function QZ(e){let t=zot(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function JZ(e,t,n,r=!1){let i;typeof e=="string"?i=rS(e):(i={...e},ys(!i.pathname||!i.pathname.includes("?"),mz("?","pathname","search",i)),ys(!i.pathname||!i.pathname.includes("#"),mz("#","pathname","hash",i)),ys(!i.search||!i.search.includes("#"),mz("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=jot(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var kg=e=>e.join("/").replace(/\/\/+/g,"/"),Vot=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Uot=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Hot=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qot(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Jke=["POST","PUT","PATCH","DELETE"];new Set(Jke);var Wot=["GET",...Jke];new Set(Wot);var iS=k.createContext(null);iS.displayName="DataRouter";var rL=k.createContext(null);rL.displayName="DataRouterState";k.createContext(!1);var Zke=k.createContext({isTransitioning:!1});Zke.displayName="ViewTransition";var Got=k.createContext(new Map);Got.displayName="Fetchers";var Yot=k.createContext(null);Yot.displayName="Await";var kh=k.createContext(null);kh.displayName="Navigation";var SR=k.createContext(null);SR.displayName="Location";var ff=k.createContext({outlet:null,matches:[],isDataRoute:!1});ff.displayName="Route";var ZZ=k.createContext(null);ZZ.displayName="RouteError";function p6(e,{relative:t}={}){ys(sS(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(kh),{hash:i,pathname:s,search:o}=TR(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:kg([n,s])),r.createHref({pathname:a,search:o,hash:i})}function sS(){return k.useContext(SR)!=null}function hf(){return ys(sS(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(SR).location}var eIe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tIe(e){k.useContext(kh).static||k.useLayoutEffect(e)}function $l(){let{isDataRoute:e}=k.useContext(ff);return e?lat():Kot()}function Kot(){ys(sS(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(iS),{basename:t,navigator:n}=k.useContext(kh),{matches:r}=k.useContext(ff),{pathname:i}=hf(),s=JSON.stringify(QZ(r)),o=k.useRef(!1);return tIe(()=>{o.current=!0}),k.useCallback((l,u={})=>{if(Gd(o.current,eIe),!o.current)return;if(typeof l=="number"){n.go(l);return}let c=JZ(l,JSON.parse(s),i,u.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:kg([t,c.pathname])),(u.replace?n.replace:n.push)(c,u.state,u)},[t,n,s,i,e])}var Xot=k.createContext(null);function Qot(e){let t=k.useContext(ff).outlet;return k.useMemo(()=>t&&k.createElement(Xot.Provider,{value:e},t),[t,e])}function So(){let{matches:e}=k.useContext(ff),t=e[e.length-1];return t?t.params:{}}function TR(e,{relative:t}={}){let{matches:n}=k.useContext(ff),{pathname:r}=hf(),i=JSON.stringify(QZ(n));return k.useMemo(()=>JZ(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function nIe(e,t){return rIe(e,t)}function rIe(e,t,n,r,i){ys(sS(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(kh),{matches:o}=k.useContext(ff),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let v=d&&d.path||"";iIe(u,!d||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let f=hf(),h;if(t){let v=typeof t=="string"?rS(t):t;ys(c==="/"||v.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${v.pathname}" was given in the \`location\` prop.`),h=v}else h=f;let p=h.pathname||"/",m=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=Kke(e,{pathname:m});Gd(d||g!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Gd(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=nat(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:kg([c,s.encodeLocation?s.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:kg([c,s.encodeLocation?s.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,n,r,i);return t&&y?k.createElement(SR.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},y):y}function Jot(){let e=aat(),t=qot(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:s},"ErrorBoundary")," or"," ",k.createElement("code",{style:s},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,o)}var Zot=k.createElement(Jot,null),eat=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?k.createElement(ff.Provider,{value:this.props.routeContext},k.createElement(ZZ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function tat({routeContext:e,match:t,children:n}){let r=k.useContext(iS);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(ff.Provider,{value:e},n)}function nat(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,o=n?.errors;if(o!=null){let u=s.findIndex(c=>c.route.id&&o?.[c.route.id]!==void 0);ys(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:d,errors:f}=n,h=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||h){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,d)=>{let f,h=!1,p=null,m=null;n&&(f=o&&c.route.id?o[c.route.id]:void 0,p=c.route.errorElement||Zot,a&&(l<0&&d===0?(iIe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,m=null):l===d&&(h=!0,m=c.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,d+1)),y=()=>{let v;return f?v=p:h?v=m:c.route.Component?v=k.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=u,k.createElement(tat,{match:c,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?k.createElement(eat,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:y(),routeContext:{outlet:null,matches:g,isDataRoute:!0},unstable_onError:r}):y()},null)}function eee(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rat(e){let t=k.useContext(iS);return ys(t,eee(e)),t}function iat(e){let t=k.useContext(rL);return ys(t,eee(e)),t}function sat(e){let t=k.useContext(ff);return ys(t,eee(e)),t}function tee(e){let t=sat(e),n=t.matches[t.matches.length-1];return ys(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function oat(){return tee("useRouteId")}function aat(){let e=k.useContext(ZZ),t=iat("useRouteError"),n=tee("useRouteError");return e!==void 0?e:t.errors?.[n]}function lat(){let{router:e}=rat("useNavigate"),t=tee("useNavigate"),n=k.useRef(!1);return tIe(()=>{n.current=!0}),k.useCallback(async(i,s={})=>{Gd(n.current,eIe),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Fhe={};function iIe(e,t,n){!t&&!Fhe[e]&&(Fhe[e]=!0,Gd(!1,n))}k.memo(uat);function uat({routes:e,future:t,state:n,unstable_onError:r}){return rIe(e,void 0,n,r,t)}function nee({to:e,replace:t,state:n,relative:r}){ys(sS(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(kh);Gd(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=k.useContext(ff),{pathname:o}=hf(),a=$l(),l=JZ(e,QZ(s),o,r==="path"),u=JSON.stringify(l);return k.useEffect(()=>{a(JSON.parse(u),{replace:t,state:n,relative:r})},[a,u,r,t,n]),null}function cat(e){return Qot(e.context)}function ub(e){ys(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dat({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){ys(!sS(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=k.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=rS(n));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:f="default"}=n,h=k.useMemo(()=>{let p=Hg(l,o);return p==null?null:{location:{pathname:p,search:u,hash:c,state:d,key:f},navigationType:r}},[o,l,u,c,d,f,r]);return Gd(h!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:k.createElement(kh.Provider,{value:a},k.createElement(SR.Provider,{children:t,value:h}))}function fat({children:e,location:t}){return nIe(JW(e),t)}function JW(e,t=[]){let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let s=[...t,i];if(r.type===k.Fragment){n.push.apply(n,JW(r.props.children,s));return}ys(r.type===ub,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ys(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=JW(r.props.children,s)),n.push(o)}),n}var r4="get",i4="application/x-www-form-urlencoded";function iL(e){return e!=null&&typeof e.tagName=="string"}function hat(e){return iL(e)&&e.tagName.toLowerCase()==="button"}function pat(e){return iL(e)&&e.tagName.toLowerCase()==="form"}function mat(e){return iL(e)&&e.tagName.toLowerCase()==="input"}function gat(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function yat(e,t){return e.button===0&&(!t||t==="_self")&&!gat(e)}function ZW(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function vat(e,t){let n=ZW(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var C3=null;function bat(){if(C3===null)try{new FormData(document.createElement("form"),0),C3=!1}catch{C3=!0}return C3}var wat=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gz(e){return e!=null&&!wat.has(e)?(Gd(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${i4}"`),null):e}function xat(e,t){let n,r,i,s,o;if(pat(e)){let a=e.getAttribute("action");r=a?Hg(a,t):null,n=e.getAttribute("method")||r4,i=gz(e.getAttribute("enctype"))||i4,s=new FormData(e)}else if(hat(e)||mat(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(r=l?Hg(l,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||r4,i=gz(e.getAttribute("formenctype"))||gz(a.getAttribute("enctype"))||i4,s=new FormData(a,e),!bat()){let{name:u,type:c,value:d}=e;if(c==="image"){let f=u?`${u}.`:"";s.append(`${f}x`,"0"),s.append(`${f}y`,"0")}else u&&s.append(u,d)}}else{if(iL(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=r4,r=null,i=i4,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ree(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _at(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Hg(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Eat(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cat(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Sat(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await Eat(s,n);return o.links?o.links():[]}return[]}));return Iat(r.flat(1).filter(Cat).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Lhe(e,t,n,r,i,s){let o=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,a=(l,u)=>n[u].pathname!==l.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==l.params["*"];return s==="assets"?t.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?t.filter((l,u)=>{let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function Tat(e,t,{includeHydrateFallback:n}={}){return Aat(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Aat(e){return[...new Set(e)]}function kat(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Iat(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(kat(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function sIe(){let e=k.useContext(iS);return ree(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Rat(){let e=k.useContext(rL);return ree(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var iee=k.createContext(void 0);iee.displayName="FrameworkContext";function oIe(){let e=k.useContext(iee);return ree(e,"You must render this element inside a <HydratedRouter> element"),e}function Dat(e,t){let n=k.useContext(iee),[r,i]=k.useState(!1),[s,o]=k.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=t,f=k.useRef(null);k.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=y=>{y.forEach(v=>{o(v.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return f.current&&g.observe(f.current),()=>{g.disconnect()}}},[e]),k.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,f,{}]:[s,f,{onFocus:WT(a,h),onBlur:WT(l,p),onMouseEnter:WT(u,h),onMouseLeave:WT(c,p),onTouchStart:WT(d,h)}]:[!1,f,{}]}function WT(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Pat({page:e,...t}){let{router:n}=sIe(),r=k.useMemo(()=>Kke(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?k.createElement(Nat,{page:e,matches:r,...t}):null}function Oat(e){let{manifest:t,routeModules:n}=oIe(),[r,i]=k.useState([]);return k.useEffect(()=>{let s=!1;return Sat(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function Nat({page:e,matches:t,...n}){let r=hf(),{manifest:i,routeModules:s}=oIe(),{basename:o}=sIe(),{loaderData:a,matches:l}=Rat(),u=k.useMemo(()=>Lhe(e,t,l,i,r,"data"),[e,t,l,i,r]),c=k.useMemo(()=>Lhe(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=k.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let p=new Set,m=!1;if(t.forEach(y=>{let v=i.routes[y.route.id];!v||!v.hasLoader||(!u.some(b=>b.route.id===y.route.id)&&y.route.id in a&&s[y.route.id]?.shouldRevalidate||v.hasClientLoader?m=!0:p.add(y.route.id))}),p.size===0)return[];let g=_at(e,o,"data");return m&&p.size>0&&g.searchParams.set("_routes",t.filter(y=>p.has(y.route.id)).map(y=>y.route.id).join(",")),[g.pathname+g.search]},[o,a,r,i,u,t,e,s]),f=k.useMemo(()=>Tat(c,i),[c,i]),h=Oat(c);return k.createElement(k.Fragment,null,d.map(p=>k.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...n})),f.map(p=>k.createElement("link",{key:p,rel:"modulepreload",href:p,...n})),h.map(({key:p,link:m})=>k.createElement("link",{key:p,nonce:n.nonce,...m})))}function Mat(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var aIe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aIe&&(window.__reactRouterVersion="7.9.5")}catch{}function $at({basename:e,children:t,window:n}){let r=k.useRef();r.current==null&&(r.current=_ot({window:n,v5Compat:!0}));let i=r.current,[s,o]=k.useState({action:i.action,location:i.location}),a=k.useCallback(l=>{k.startTransition(()=>o(l))},[o]);return k.useLayoutEffect(()=>i.listen(a),[i,a]),k.createElement(dat,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var lIe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uIe=k.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},h){let{basename:p}=k.useContext(kh),m=typeof u=="string"&&lIe.test(u),g,y=!1;if(typeof u=="string"&&m&&(g=u,aIe))try{let R=new URL(window.location.href),I=u.startsWith("//")?new URL(R.protocol+u):new URL(u),P=Hg(I.pathname,p);I.origin===R.origin&&P!=null?u=P+I.search+I.hash:y=!0}catch{Gd(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=p6(u,{relative:i}),[b,_,E]=Dat(r,f),S=Bat(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function T(R){t&&t(R),R.defaultPrevented||S(R)}let A=k.createElement("a",{...f,...E,href:g||v,onClick:y||s?t:T,ref:Mat(h,_),target:l,"data-discover":!m&&n==="render"?"true":void 0});return b&&!m?k.createElement(k.Fragment,null,A,k.createElement(Pat,{page:v})):A});uIe.displayName="Link";var Fat=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},c){let d=TR(o,{relative:u.relative}),f=hf(),h=k.useContext(rL),{navigator:p,basename:m}=k.useContext(kh),g=h!=null&&qat(d)&&a===!0,y=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,v=f.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(v=v.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&m&&(b=Hg(b,m)||b);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let E=v===y||!i&&v.startsWith(y)&&v.charAt(_)==="/",S=b!=null&&(b===y||!i&&b.startsWith(y)&&b.charAt(y.length)==="/"),T={isActive:E,isPending:S,isTransitioning:g},A=E?t:void 0,R;typeof r=="function"?R=r(T):R=[r,E?"active":null,S?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let I=typeof s=="function"?s(T):s;return k.createElement(uIe,{...u,"aria-current":A,className:R,ref:c,style:I,to:o,viewTransition:a},typeof l=="function"?l(T):l)});Fat.displayName="NavLink";var Lat=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=r4,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},h)=>{let p=Uat(),m=Hat(a,{relative:u}),g=o.toLowerCase()==="get"?"get":"post",y=typeof a=="string"&&lIe.test(a),v=b=>{if(l&&l(b),b.defaultPrevented)return;b.preventDefault();let _=b.nativeEvent.submitter,E=_?.getAttribute("formmethod")||o;p(_||b.currentTarget,{fetcherKey:t,method:E,navigate:n,replace:i,state:s,relative:u,preventScrollReset:c,viewTransition:d})};return k.createElement("form",{ref:h,method:g,action:m,onSubmit:r?l:v,...f,"data-discover":!y&&e==="render"?"true":void 0})});Lat.displayName="Form";function jat(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cIe(e){let t=k.useContext(iS);return ys(t,jat(e)),t}function Bat(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=$l(),l=hf(),u=TR(e,{relative:s});return k.useCallback(c=>{if(yat(c,t)){c.preventDefault();let d=n!==void 0?n:Mk(l)===Mk(u);a(e,{replace:d,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,n,r,t,e,i,s,o])}function nd(e){Gd(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=k.useRef(ZW(e)),n=k.useRef(!1),r=hf(),i=k.useMemo(()=>vat(r.search,n.current?null:t.current),[r.search]),s=$l(),o=k.useCallback((a,l)=>{const u=ZW(typeof a=="function"?a(new URLSearchParams(i)):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var zat=0,Vat=()=>`__${String(++zat)}__`;function Uat(){let{router:e}=cIe("useSubmit"),{basename:t}=k.useContext(kh),n=oat();return k.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=xat(r,t);if(i.navigate===!1){let c=i.fetcherKey||Vat();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function Hat(e,{relative:t}={}){let{basename:n}=k.useContext(kh),r=k.useContext(ff);ys(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...TR(e||".",{relative:t})},o=hf();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:kg([n,s.pathname])),Mk(s)}function qat(e,{relative:t}={}){let n=k.useContext(Zke);ys(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=cIe("useViewTransitionState"),i=TR(e,{relative:t});if(!n.isTransitioning)return!1;let s=Hg(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Hg(n.nextLocation.pathname,r)||n.nextLocation.pathname;return h6(i.pathname,o)!=null||h6(i.pathname,s)!=null}const see=k.createContext(null);see.displayName="@mantine/modals/ModalsContext";function Wat(){const e=k.useContext(see);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Gat({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:l,children:u}){const{cancel:c,confirm:d}=r,f=Wat(),h=m=>{typeof t?.onClick=="function"&&t?.onClick(m),typeof a=="function"&&a(),s&&f.closeModal(e)},p=m=>{typeof n?.onClick=="function"&&n?.onClick(m),typeof l=="function"&&l(),i&&f.closeModal(e)};return w.jsxs(w.Fragment,{children:[u&&w.jsx(De,{mb:"md",children:u}),w.jsxs(Pn,{mt:u?0:"md",justify:"flex-end",...o,children:[w.jsx(Yt,{variant:"default",...t,onClick:h,children:t?.children||c}),w.jsx(Yt,{...n,onClick:p,children:n?.children||d})]})]})}const[Yat,oee]=uXe("mantine-modals"),jhe=e=>{const t=e.modalId||Ky();return oee("openConfirmModal")({...e,modalId:t}),t};oee("closeModal");oee("closeAllModals");function Bhe(e,t){t&&e.type==="confirm"&&e.props.onCancel?.(),e.props.onClose?.()}function Kat(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Bhe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Bhe(n,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:n,newProps:r}=t,i=e.modals.map(o=>o.id!==n?o:o.type==="content"||o.type==="confirm"?{...o,props:{...o.props,...r}}:o.type==="context"?{...o,props:{...o.props,...r,innerProps:{...o.props.innerProps,...r.innerProps}}}:o),s=e.current?.id===n&&i.find(o=>o.id===n)||e.current;return{...e,modals:i,current:s}}default:return e}}function Xat(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c,...d}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c},modalProps:{id:t,...d}}}function Qat({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=k.useReducer(Kat,{modals:[],current:null}),o=k.useRef(i);o.current=i;const a=k.useCallback(v=>{s({type:"CLOSE_ALL",canceled:v})},[o,s]),l=k.useCallback(({modalId:v,...b})=>{const _=v||Ky();return s({type:"OPEN",modal:{id:_,type:"content",props:b}}),_},[s]),u=k.useCallback(({modalId:v,...b})=>{const _=v||Ky();return s({type:"OPEN",modal:{id:_,type:"confirm",props:b}}),_},[s]),c=k.useCallback((v,{modalId:b,..._})=>{const E=b||Ky();return s({type:"OPEN",modal:{id:E,type:"context",props:_,ctx:v}}),E},[s]),d=k.useCallback((v,b)=>{s({type:"CLOSE",modalId:v,canceled:b})},[o,s]),f=k.useCallback(({modalId:v,...b})=>{s({type:"UPDATE",modalId:v,newProps:b})},[s]),h=k.useCallback(({modalId:v,...b})=>{s({type:"UPDATE",modalId:v,newProps:b})},[s]);Yat({openModal:l,openConfirmModal:u,openContextModal:({modal:v,...b})=>c(v,b),closeModal:d,closeContextModal:d,closeAllModals:a,updateModal:f,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:l,openConfirmModal:u,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:a,updateModal:f,updateContextModal:h},m=()=>{const v=o.current.current;switch(v?.type){case"context":{const{innerProps:b,..._}=v.props,E=r[v.ctx];return{modalProps:_,content:w.jsx(E,{innerProps:b,context:p,id:v.id})}}case"confirm":{const{modalProps:b,confirmProps:_}=Xat(v.props);return{modalProps:b,content:w.jsx(Gat,{..._,id:v.id,labels:v.props.labels||n})}}case"content":{const{children:b,..._}=v.props;return{modalProps:_,content:b}}default:return{modalProps:{},content:null}}},{modalProps:g,content:y}=m();return w.jsxs(see.Provider,{value:p,children:[w.jsx(Fi,{zIndex:dc("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>d(i.current?.id),children:y}),e]})}var Jat={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const At=(e,t,n,r)=>{const i=k.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:l,className:u,children:c,...d},f)=>k.createElement("svg",{ref:f,...Jat[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...d},[l&&k.createElement("title",{key:"svg-title"},l),...r.map(([h,p])=>k.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};const Zat=[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]],elt=At("outline","adjustments-horizontal","AdjustmentsHorizontal",Zat);const tlt=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],nlt=At("outline","alert-circle","AlertCircle",tlt);const rlt=[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],Vd=At("outline","alert-triangle","AlertTriangle",rlt);const ilt=[["path",{d:"M6 4l-3 3l3 3",key:"svg-0"}],["path",{d:"M18 4l3 3l-3 3",key:"svg-1"}],["path",{d:"M4 14m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-2"}],["path",{d:"M10 7h-7",key:"svg-3"}],["path",{d:"M21 7h-7",key:"svg-4"}]],slt=At("outline","arrow-autofit-content","ArrowAutofitContent",ilt);const olt=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]],eG=At("outline","arrow-left","ArrowLeft",olt);const alt=[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]],zhe=At("outline","arrow-right","ArrowRight",alt);const llt=[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]],ult=At("outline","arrows-shuffle","ArrowsShuffle",llt);const clt=[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]],dlt=At("outline","arrows-sort","ArrowsSort",clt);const flt=[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]],hlt=At("outline","at","At",flt);const plt=[["path",{d:"M4 4h16",key:"svg-0"}],["path",{d:"M4 20h16",key:"svg-1"}]],mlt=At("outline","baseline-density-large","BaselineDensityLarge",plt);const glt=[["path",{d:"M4 20h16",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M4 4h16",key:"svg-2"}]],ylt=At("outline","baseline-density-medium","BaselineDensityMedium",glt);const vlt=[["path",{d:"M4 3h16",key:"svg-0"}],["path",{d:"M4 9h16",key:"svg-1"}],["path",{d:"M4 15h16",key:"svg-2"}],["path",{d:"M4 21h16",key:"svg-3"}]],blt=At("outline","baseline-density-small","BaselineDensitySmall",vlt);const wlt=[["path",{d:"M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-1"}]],xlt=At("outline","box-multiple","BoxMultiple",wlt);const _lt=[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]],Elt=At("outline","brain","Brain",_lt);const Clt=[["path",{d:"M4.53 17.05l6.15 -11.72h-.02c.38 -.74 1.28 -1.02 2.01 -.63c.26 .14 .48 .36 .62 .62l1.06 2.01",key:"svg-0"}],["path",{d:"M15.47 6.45c.58 -.59 1.53 -.59 2.11 -.01c.22 .22 .36 .5 .41 .81l1.5 9.11c.1 .62 -.2 1.24 -.76 1.54l-6.07 2.9c-.46 .25 -1.01 .26 -1.46 0l-6.02 -2.92c-.55 -.31 -.85 -.92 -.75 -1.54l1.96 -12.04c.12 -.82 .89 -1.38 1.7 -1.25c.46 .07 .87 .36 1.09 .77l1.24 1.76",key:"svg-1"}],["path",{d:"M4.57 17.18l10.93 -10.68",key:"svg-2"}]],dIe=At("outline","brand-firebase","BrandFirebase",Clt);const Slt=[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]],Tlt=At("outline","brand-python","BrandPython",Slt);const Alt=[["path",{d:"M4 14h8v7l8 -11h-8v-7z",key:"svg-0"}]],aee=At("outline","brand-supabase","BrandSupabase",Alt);const klt=[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]],Ilt=At("outline","bubble-text","BubbleText",klt);const Rlt=[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]],Dlt=At("outline","chart-donut-2","ChartDonut2",Rlt);const Plt=[["path",{d:"M18 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M6 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M6 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M8 18h8",key:"svg-4"}],["path",{d:"M18 20v1",key:"svg-5"}],["path",{d:"M18 3v1",key:"svg-6"}],["path",{d:"M6 20v1",key:"svg-7"}],["path",{d:"M6 10v-7",key:"svg-8"}],["path",{d:"M12 3v18",key:"svg-9"}],["path",{d:"M18 8v8",key:"svg-10"}],["path",{d:"M8 12h13",key:"svg-11"}],["path",{d:"M21 6h-1",key:"svg-12"}],["path",{d:"M16 6h-13",key:"svg-13"}],["path",{d:"M3 12h1",key:"svg-14"}],["path",{d:"M20 18h1",key:"svg-15"}],["path",{d:"M3 18h1",key:"svg-16"}],["path",{d:"M6 14v2",key:"svg-17"}]],Olt=At("outline","chart-grid-dots","ChartGridDots",Plt);const Nlt=[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]],fIe=At("outline","chart-histogram","ChartHistogram",Nlt);const Mlt=[["path",{d:"M10 3.2a9 9 0 1 0 10.8 10.8a1 1 0 0 0 -1 -1h-6.8a2 2 0 0 1 -2 -2v-7a.9 .9 0 0 0 -1 -.8",key:"svg-0"}],["path",{d:"M15 3.5a9 9 0 0 1 5.5 5.5h-4.5a1 1 0 0 1 -1 -1v-4.5",key:"svg-1"}]],$lt=At("outline","chart-pie","ChartPie",Mlt);const Flt=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],mv=At("outline","check","Check",Flt);const Llt=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],lee=At("outline","chevron-down","ChevronDown",Llt);const jlt=[["path",{d:"M7 6v12",key:"svg-0"}],["path",{d:"M18 6l-6 6l6 6",key:"svg-1"}]],Blt=At("outline","chevron-left-pipe","ChevronLeftPipe",jlt);const zlt=[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]],Vlt=At("outline","chevron-left","ChevronLeft",zlt);const Ult=[["path",{d:"M6 6l6 6l-6 6",key:"svg-0"}],["path",{d:"M17 5v13",key:"svg-1"}]],Hlt=At("outline","chevron-right-pipe","ChevronRightPipe",Ult);const qlt=[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]],hIe=At("outline","chevron-right","ChevronRight",qlt);const Wlt=[["path",{d:"M7 7l5 5l5 -5",key:"svg-0"}],["path",{d:"M7 13l5 5l5 -5",key:"svg-1"}]],Glt=At("outline","chevrons-down","ChevronsDown",Wlt);const Ylt=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]],Klt=At("outline","circle-x","CircleX",Ylt);const Xlt=[["path",{d:"M8 6h12",key:"svg-0"}],["path",{d:"M6 12h12",key:"svg-1"}],["path",{d:"M4 18h12",key:"svg-2"}]],Qlt=At("outline","clear-all","ClearAll",Xlt);const Jlt=[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]],Zlt=At("outline","code-plus","CodePlus",Jlt);const eut=[["path",{d:"M4 6l5.5 0",key:"svg-0"}],["path",{d:"M4 10l5.5 0",key:"svg-1"}],["path",{d:"M4 14l5.5 0",key:"svg-2"}],["path",{d:"M4 18l5.5 0",key:"svg-3"}],["path",{d:"M14.5 6l5.5 0",key:"svg-4"}],["path",{d:"M14.5 10l5.5 0",key:"svg-5"}],["path",{d:"M14.5 14l5.5 0",key:"svg-6"}],["path",{d:"M14.5 18l5.5 0",key:"svg-7"}]],tut=At("outline","columns","Columns",eut);const nut=[["path",{d:"M7 9.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-1"}],["path",{d:"M4.012 16.737a2 2 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-2"}],["path",{d:"M11 14l2 2l4 -4",key:"svg-3"}]],rut=At("outline","copy-check","CopyCheck",nut);const iut=[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]],sut=At("outline","dashboard","Dashboard",iut);const out=[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]],aut=At("outline","database-export","DatabaseExport",out);const lut=[["path",{d:"M12 6m-8 0a8 3 0 1 0 16 0a8 3 0 1 0 -16 0",key:"svg-0"}],["path",{d:"M4 6v6a8 3 0 0 0 16 0v-6",key:"svg-1"}],["path",{d:"M4 12v6a8 3 0 0 0 16 0v-6",key:"svg-2"}]],m6=At("outline","database","Database",lut);const uut=[["path",{d:"M13.5 16h-9.5a1 1 0 0 1 -1 -1v-10a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v7.5",key:"svg-0"}],["path",{d:"M7 20h5",key:"svg-1"}],["path",{d:"M9 16v4",key:"svg-2"}],["path",{d:"M19 16v6",key:"svg-3"}],["path",{d:"M22 19l-3 3l-3 -3",key:"svg-4"}]],pIe=At("outline","device-desktop-down","DeviceDesktopDown",uut);const cut=[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]],dut=At("outline","device-floppy","DeviceFloppy",cut);const fut=[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["circle",{cx:"8.5",cy:"8.5",r:".5",fill:"currentColor",key:"svg-1"}],["circle",{cx:"15.5",cy:"15.5",r:".5",fill:"currentColor",key:"svg-2"}],["circle",{cx:"12",cy:"12",r:".5",fill:"currentColor",key:"svg-3"}]],hut=At("outline","dice-3","Dice3",fut);const put=[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["circle",{cx:"8.5",cy:"8.5",r:".5",fill:"currentColor",key:"svg-1"}],["circle",{cx:"15.5",cy:"8.5",r:".5",fill:"currentColor",key:"svg-2"}],["circle",{cx:"15.5",cy:"15.5",r:".5",fill:"currentColor",key:"svg-3"}],["circle",{cx:"8.5",cy:"15.5",r:".5",fill:"currentColor",key:"svg-4"}],["circle",{cx:"12",cy:"12",r:".5",fill:"currentColor",key:"svg-5"}]],mut=At("outline","dice-5","Dice5",put);const gut=[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]],mIe=At("outline","dots-vertical","DotsVertical",gut);const yut=[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]],gIe=At("outline","dots","Dots",yut);const vut=[["path",{d:"M19 11v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M13 13l9 3l-4 2l-2 4l-3 -9",key:"svg-1"}],["path",{d:"M3 3l0 .01",key:"svg-2"}],["path",{d:"M7 3l0 .01",key:"svg-3"}],["path",{d:"M11 3l0 .01",key:"svg-4"}],["path",{d:"M15 3l0 .01",key:"svg-5"}],["path",{d:"M3 7l0 .01",key:"svg-6"}],["path",{d:"M3 11l0 .01",key:"svg-7"}],["path",{d:"M3 15l0 .01",key:"svg-8"}]],but=At("outline","drag-drop","DragDrop",vut);const wut=[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]],g6=At("outline","edit","Edit",wut);const xut=[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]],_ut=At("outline","external-link","ExternalLink",xut);const Eut=[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]],Cut=At("outline","eye-off","EyeOff",Eut);const Sut=[["path",{d:"M12 20l-3 1v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v1.5",key:"svg-0"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M19.001 15.5v1.5",key:"svg-2"}],["path",{d:"M19.001 21v1.5",key:"svg-3"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-4"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-5"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-6"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-7"}]],Tut=At("outline","filter-cog","FilterCog",Sut);const Aut=[["path",{d:"M8 4h12v2.172a2 2 0 0 1 -.586 1.414l-3.914 3.914m-.5 3.5v4l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]],kut=At("outline","filter-off","FilterOff",Aut);const Iut=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],Rut=At("outline","filter","Filter",Iut);const Dut=[["path",{d:"M8 4h10a2 2 0 0 1 2 2v10m-.586 3.414a2 2 0 0 1 -1.414 .586h-12a2 2 0 0 1 -2 -2v-12c0 -.547 .22 -1.043 .576 -1.405",key:"svg-0"}],["path",{d:"M7 14l3 -3l2 2l.5 -.5m2 -2l.5 -.5l2 2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]],yIe=At("outline","graph-off","GraphOff",Dut);const Put=[["path",{d:"M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M7 14l3 -3l2 2l3 -3l2 2",key:"svg-1"}]],vIe=At("outline","graph","Graph",Put);const Out=[["path",{d:"M5 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}],["path",{d:"M5 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-6"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-7"}],["path",{d:"M19 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-8"}]],Nut=At("outline","grid-dots","GridDots",Out);const Mut=[["path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]],$ut=At("outline","grip-horizontal","GripHorizontal",Mut);const Fut=[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]],Lut=At("outline","hourglass-empty","HourglassEmpty",Fut);const jut=[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]],But=At("outline","html","Html",jut);const zut=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],qg=At("outline","info-circle","InfoCircle",zut);const Vut=[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]],Uut=At("outline","layout-columns","LayoutColumns",Vut);const Hut=[["path",{d:"M17.5 15.5m-3.5 0a3.5 3.5 0 1 0 7 0a3.5 3.5 0 1 0 -7 0",key:"svg-0"}],["path",{d:"M3 19v-10.5a3.5 3.5 0 0 1 7 0v10.5",key:"svg-1"}],["path",{d:"M3 13h7",key:"svg-2"}],["path",{d:"M21 12v7",key:"svg-3"}]],qut=At("outline","letter-case","LetterCase",Hut);const Wut=[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]],bIe=At("outline","list-check","ListCheck",Wut);const Gut=[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]],Yut=At("outline","mail","Mail",Gut);const Kut=[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]],Xut=At("outline","maximize","Maximize",Kut);const Qut=[["path",{d:"M15 19v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M15 5v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M5 15h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M5 9h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]],Jut=At("outline","minimize","Minimize",Qut);const Zut=[["path",{d:"M3 17a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-0"}],["path",{d:"M9 17v-13h10v8",key:"svg-1"}],["path",{d:"M9 8h10",key:"svg-2"}],["path",{d:"M19 16v6",key:"svg-3"}],["path",{d:"M22 19l-3 3l-3 -3",key:"svg-4"}]],wIe=At("outline","music-down","MusicDown",Zut);const ect=[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]],tct=At("outline","number-123","Number123",ect);const nct=[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]],rct=At("outline","package-import","PackageImport",nct);const ict=[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]],sct=At("outline","pencil","Pencil",ict);const oct=[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M15 4.5l-3.249 3.249m-2.57 1.433l-2.181 .818l-1.5 1.5l7 7l1.5 -1.5l.82 -2.186m1.43 -2.563l3.25 -3.251",key:"svg-1"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-2"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-3"}]],act=At("outline","pinned-off","PinnedOff",oct);const lct=[["path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6",key:"svg-0"}],["path",{d:"M12 16l0 5",key:"svg-1"}],["path",{d:"M8 4l8 0",key:"svg-2"}]],uct=At("outline","pinned","Pinned",lct);const cct=[["path",{d:"M20 16l-4 4",key:"svg-0"}],["path",{d:"M7 12l5 5l-1.5 1.5a3.536 3.536 0 1 1 -5 -5l1.5 -1.5z",key:"svg-1"}],["path",{d:"M17 12l-5 -5l1.5 -1.5a3.536 3.536 0 1 1 5 5l-1.5 1.5z",key:"svg-2"}],["path",{d:"M3 21l2.5 -2.5",key:"svg-3"}],["path",{d:"M18.5 5.5l2.5 -2.5",key:"svg-4"}],["path",{d:"M10 11l-2 2",key:"svg-5"}],["path",{d:"M13 14l-2 2",key:"svg-6"}],["path",{d:"M16 16l4 4",key:"svg-7"}]],dct=At("outline","plug-connected-x","PlugConnectedX",cct);const fct=[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]],xIe=At("outline","progress","Progress",fct);const hct=[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]],pct=At("outline","radio","Radio",hct);const mct=[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]],_Ie=At("outline","refresh","Refresh",mct);const gct=[["path",{d:"M6 2h4v4m-4 0h-1v-1",key:"svg-0"}],["path",{d:"M15 11v-1h5v4h-2",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h2",key:"svg-4"}],["path",{d:"M7.5 7.5v2.5",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}],["path",{d:"M3 3l18 18",key:"svg-7"}]],yct=At("outline","schema-off","SchemaOff",gct);const vct=[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]],EIe=At("outline","schema","Schema",vct);const bct=[["path",{d:"M5.039 5.062a7 7 0 0 0 9.91 9.89m1.584 -2.434a7 7 0 0 0 -9.038 -9.057",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]],wct=At("outline","search-off","SearchOff",bct);const xct=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]],CIe=At("outline","search","Search",xct);const _ct=[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]],Ect=At("outline","select","Select",_ct);const Cct=[["path",{d:"M12.004 21c-.732 .002 -1.466 -.437 -1.679 -1.317a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.306 .317 1.64 1.78 1.004 2.684",key:"svg-0"}],["path",{d:"M12 15a3 3 0 1 0 0 -6a3 3 0 0 0 0 6z",key:"svg-1"}],["path",{d:"M16 22l5 -5",key:"svg-2"}],["path",{d:"M21 21.5v-4.5h-4.5",key:"svg-3"}]],Sct=At("outline","settings-share","SettingsShare",Cct);const Tct=[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]],SIe=At("outline","settings","Settings",Tct);const Act=[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]],kct=At("outline","sort-ascending","SortAscending",Act);const Ict=[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]],Rct=At("outline","sort-descending","SortDescending",Ict);const Dct=[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]],Pct=At("outline","squares","Squares",Dct);const Oct=[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]],TIe=At("outline","table-export","TableExport",Oct);const Nct=[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]],Mct=At("outline","table","Table",Nct);const $ct=[["path",{d:"M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592 -3.592a2.41 2.41 0 0 0 0 -3.408l-5.71 -5.71a2 2 0 0 0 -1.414 -.586h-4.172a2 2 0 0 0 -2 2z",key:"svg-0"}],["path",{d:"M18 19l1.592 -1.592a4.82 4.82 0 0 0 0 -6.816l-4.592 -4.592",key:"svg-1"}],["path",{d:"M7 10h-.01",key:"svg-2"}]],Fct=At("outline","tags","Tags",$ct);const Lct=[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]],AIe=At("outline","trash-x","TrashX",Lct);const jct=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]],uee=At("outline","user-plus","UserPlus",jct);const Bct=[["path",{d:"M12 18l.01 0",key:"svg-0"}],["path",{d:"M9.172 15.172a4 4 0 0 1 5.656 0",key:"svg-1"}],["path",{d:"M6.343 12.343a7.963 7.963 0 0 1 3.864 -2.14m4.163 .155a7.965 7.965 0 0 1 3.287 2",key:"svg-2"}],["path",{d:"M3.515 9.515a12 12 0 0 1 3.544 -2.455m3.101 -.92a12 12 0 0 1 10.325 3.374",key:"svg-3"}],["path",{d:"M3 3l18 18",key:"svg-4"}]],zct=At("outline","wifi-off","WifiOff",Bct);const Vct=[["path",{d:"M12 18l.01 0",key:"svg-0"}],["path",{d:"M9.172 15.172a4 4 0 0 1 5.656 0",key:"svg-1"}],["path",{d:"M6.343 12.343a8 8 0 0 1 11.314 0",key:"svg-2"}],["path",{d:"M3.515 9.515c4.686 -4.687 12.284 -4.687 17 0",key:"svg-3"}]],Uct=At("outline","wifi","Wifi",Vct);const Hct=[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]],Wg=At("outline","x","X",Hct);const qct=[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]],Wct=At("filled","brand-google-filled","BrandGoogleFilled",qct);const Gct=[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]],Yct=At("filled","player-pause-filled","PlayerPauseFilled",Gct);const Kct=[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]],Xct=At("filled","player-play-filled","PlayerPlayFilled",Kct);function kIe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const as="/template/";function Vhe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function IIe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Qct=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Jct=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Zct={};function Uhe(e,t){return(Zct.jsx?Jct:Qct).test(e)}const edt=/[ \t\n\f\r]/g;function tdt(e){return typeof e=="object"?e.type==="text"?Hhe(e.value):!1:Hhe(e)}function Hhe(e){return e.replace(edt,"")===""}let AR=class{constructor(t,n,r){this.normal=n,this.property=t,r&&(this.space=r)}};AR.prototype.normal={};AR.prototype.property={};AR.prototype.space=void 0;function RIe(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new AR(n,r,t)}function tG(e){return e.toLowerCase()}let hc=class{constructor(t,n){this.attribute=n,this.property=t}};hc.prototype.attribute="";hc.prototype.booleanish=!1;hc.prototype.boolean=!1;hc.prototype.commaOrSpaceSeparated=!1;hc.prototype.commaSeparated=!1;hc.prototype.defined=!1;hc.prototype.mustUseProperty=!1;hc.prototype.number=!1;hc.prototype.overloadedBoolean=!1;hc.prototype.property="";hc.prototype.spaceSeparated=!1;hc.prototype.space=void 0;let ndt=0;const mr=Qw(),wo=Qw(),nG=Qw(),Dt=Qw(),Wi=Qw(),mE=Qw(),Ac=Qw();function Qw(){return 2**++ndt}const rG=Object.freeze(Object.defineProperty({__proto__:null,boolean:mr,booleanish:wo,commaOrSpaceSeparated:Ac,commaSeparated:mE,number:Dt,overloadedBoolean:nG,spaceSeparated:Wi},Symbol.toStringTag,{value:"Module"})),yz=Object.keys(rG);let cee=class extends hc{constructor(t,n,r,i){let s=-1;if(super(t,n),qhe(this,"space",i),typeof r=="number")for(;++s<yz.length;){const o=yz[s];qhe(this,yz[s],(r&rG[o])===rG[o])}}};cee.prototype.defined=!0;function qhe(e,t,n){n&&(e[t]=n)}function oS(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const s=new cee(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[tG(r)]=r,n[tG(s.attribute)]=r}return new AR(t,n,e.space)}const DIe=oS({properties:{ariaActiveDescendant:null,ariaAtomic:wo,ariaAutoComplete:null,ariaBusy:wo,ariaChecked:wo,ariaColCount:Dt,ariaColIndex:Dt,ariaColSpan:Dt,ariaControls:Wi,ariaCurrent:null,ariaDescribedBy:Wi,ariaDetails:null,ariaDisabled:wo,ariaDropEffect:Wi,ariaErrorMessage:null,ariaExpanded:wo,ariaFlowTo:Wi,ariaGrabbed:wo,ariaHasPopup:null,ariaHidden:wo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Wi,ariaLevel:Dt,ariaLive:null,ariaModal:wo,ariaMultiLine:wo,ariaMultiSelectable:wo,ariaOrientation:null,ariaOwns:Wi,ariaPlaceholder:null,ariaPosInSet:Dt,ariaPressed:wo,ariaReadOnly:wo,ariaRelevant:null,ariaRequired:wo,ariaRoleDescription:Wi,ariaRowCount:Dt,ariaRowIndex:Dt,ariaRowSpan:Dt,ariaSelected:wo,ariaSetSize:Dt,ariaSort:null,ariaValueMax:Dt,ariaValueMin:Dt,ariaValueNow:Dt,ariaValueText:null,role:null},transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function PIe(e,t){return t in e?e[t]:t}function OIe(e,t){return PIe(e,t.toLowerCase())}const rdt=oS({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:mE,acceptCharset:Wi,accessKey:Wi,action:null,allow:null,allowFullScreen:mr,allowPaymentRequest:mr,allowUserMedia:mr,alt:null,as:null,async:mr,autoCapitalize:null,autoComplete:Wi,autoFocus:mr,autoPlay:mr,blocking:Wi,capture:null,charSet:null,checked:mr,cite:null,className:Wi,cols:Dt,colSpan:null,content:null,contentEditable:wo,controls:mr,controlsList:Wi,coords:Dt|mE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mr,defer:mr,dir:null,dirName:null,disabled:mr,download:nG,draggable:wo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mr,formTarget:null,headers:Wi,height:Dt,hidden:nG,high:Dt,href:null,hrefLang:null,htmlFor:Wi,httpEquiv:Wi,id:null,imageSizes:null,imageSrcSet:null,inert:mr,inputMode:null,integrity:null,is:null,isMap:mr,itemId:null,itemProp:Wi,itemRef:Wi,itemScope:mr,itemType:Wi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mr,low:Dt,manifest:null,max:null,maxLength:Dt,media:null,method:null,min:null,minLength:Dt,multiple:mr,muted:mr,name:null,nonce:null,noModule:mr,noValidate:mr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mr,optimum:Dt,pattern:null,ping:Wi,placeholder:null,playsInline:mr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mr,referrerPolicy:null,rel:Wi,required:mr,reversed:mr,rows:Dt,rowSpan:Dt,sandbox:Wi,scope:null,scoped:mr,seamless:mr,selected:mr,shadowRootClonable:mr,shadowRootDelegatesFocus:mr,shadowRootMode:null,shape:null,size:Dt,sizes:null,slot:null,span:Dt,spellCheck:wo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Dt,step:null,style:null,tabIndex:Dt,target:null,title:null,translate:null,type:null,typeMustMatch:mr,useMap:null,value:wo,width:Dt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Wi,axis:null,background:null,bgColor:null,border:Dt,borderColor:null,bottomMargin:Dt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mr,declare:mr,event:null,face:null,frame:null,frameBorder:null,hSpace:Dt,leftMargin:Dt,link:null,longDesc:null,lowSrc:null,marginHeight:Dt,marginWidth:Dt,noResize:mr,noHref:mr,noShade:mr,noWrap:mr,object:null,profile:null,prompt:null,rev:null,rightMargin:Dt,rules:null,scheme:null,scrolling:wo,standby:null,summary:null,text:null,topMargin:Dt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Dt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mr,disableRemotePlayback:mr,prefix:null,property:null,results:Dt,security:null,unselectable:null},space:"html",transform:OIe}),idt=oS({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Ac,accentHeight:Dt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Dt,amplitude:Dt,arabicForm:null,ascent:Dt,attributeName:null,attributeType:null,azimuth:Dt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Dt,by:null,calcMode:null,capHeight:Dt,className:Wi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Dt,diffuseConstant:Dt,direction:null,display:null,dur:null,divisor:Dt,dominantBaseline:null,download:mr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Dt,enableBackground:null,end:null,event:null,exponent:Dt,externalResourcesRequired:null,fill:null,fillOpacity:Dt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:mE,g2:mE,glyphName:mE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Dt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Dt,horizOriginX:Dt,horizOriginY:Dt,id:null,ideographic:Dt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Dt,k:Dt,k1:Dt,k2:Dt,k3:Dt,k4:Dt,kernelMatrix:Ac,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Dt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Dt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Dt,overlineThickness:Dt,paintOrder:null,panose1:null,path:null,pathLength:Dt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Wi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Dt,pointsAtY:Dt,pointsAtZ:Dt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ac,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ac,rev:Ac,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ac,requiredFeatures:Ac,requiredFonts:Ac,requiredFormats:Ac,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Dt,specularExponent:Dt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Dt,strikethroughThickness:Dt,string:null,stroke:null,strokeDashArray:Ac,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Dt,strokeOpacity:Dt,strokeWidth:null,style:null,surfaceScale:Dt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ac,tabIndex:Dt,tableValues:null,target:null,targetX:Dt,targetY:Dt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ac,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Dt,underlineThickness:Dt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Dt,values:null,vAlphabetic:Dt,vMathematical:Dt,vectorEffect:null,vHanging:Dt,vIdeographic:Dt,version:null,vertAdvY:Dt,vertOriginX:Dt,vertOriginY:Dt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Dt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:PIe}),NIe=oS({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()}}),MIe=oS({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:OIe}),$Ie=oS({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()}}),sdt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},odt=/[A-Z]/g,Whe=/-[a-z]/g,adt=/^data[-\w.:]+$/i;function ldt(e,t){const n=tG(t);let r=t,i=hc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&adt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Whe,cdt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Whe.test(s)){let o=s.replace(odt,udt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=cee}return new i(r,t)}function udt(e){return"-"+e.toLowerCase()}function cdt(e){return e.charAt(1).toUpperCase()}const ddt=RIe([DIe,rdt,NIe,MIe,$Ie],"html"),dee=RIe([DIe,idt,NIe,MIe,$Ie],"svg");function Ghe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function FIe(e){return e.join(" ").trim()}var l_={},vz,Yhe;function fdt(){if(Yhe)return vz;Yhe=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,l=`
`,u="/",c="*",d="",f="comment",h="declaration";vz=function(m,g){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];g=g||{};var y=1,v=1;function b(M){var O=M.match(t);O&&(y+=O.length);var j=M.lastIndexOf(l);v=~j?M.length-j:v+M.length}function _(){var M={line:y,column:v};return function(O){return O.position=new E(M),A(),O}}function E(M){this.start=M,this.end={line:y,column:v},this.source=g.source}E.prototype.content=m;function S(M){var O=new Error(g.source+":"+y+":"+v+": "+M);if(O.reason=M,O.filename=g.source,O.line=y,O.column=v,O.source=m,!g.silent)throw O}function T(M){var O=M.exec(m);if(O){var j=O[0];return b(j),m=m.slice(j.length),O}}function A(){T(n)}function R(M){var O;for(M=M||[];O=I();)O!==!1&&M.push(O);return M}function I(){var M=_();if(!(u!=m.charAt(0)||c!=m.charAt(1))){for(var O=2;d!=m.charAt(O)&&(c!=m.charAt(O)||u!=m.charAt(O+1));)++O;if(O+=2,d===m.charAt(O-1))return S("End of comment missing");var j=m.slice(2,O-2);return v+=2,b(j),m=m.slice(O),v+=2,M({type:f,comment:j})}}function P(){var M=_(),O=T(r);if(O){if(I(),!T(i))return S("property missing ':'");var j=T(s),B=M({type:h,property:p(O[0].replace(e,d)),value:j?p(j[0].replace(e,d)):d});return T(o),B}}function N(){var M=[];R(M);for(var O;O=P();)O!==!1&&(M.push(O),R(M));return M}return A(),N()};function p(m){return m?m.replace(a,d):d}return vz}var Khe;function hdt(){if(Khe)return l_;Khe=1;var e=l_&&l_.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l_,"__esModule",{value:!0}),l_.default=n;var t=e(fdt());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(l){if(l.type==="declaration"){var u=l.property,c=l.value;a?i(u,c,l):c&&(s=s||{},s[u]=c)}}),s}return l_}var GT={},Xhe;function pdt(){if(Xhe)return GT;Xhe=1,Object.defineProperty(GT,"__esModule",{value:!0}),GT.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,s=function(u){return!u||n.test(u)||e.test(u)},o=function(u,c){return c.toUpperCase()},a=function(u,c){return"".concat(c,"-")},l=function(u,c){return c===void 0&&(c={}),s(u)?u:(u=u.toLowerCase(),c.reactCompat?u=u.replace(i,a):u=u.replace(r,a),u.replace(t,o))};return GT.camelCase=l,GT}var YT,Qhe;function mdt(){if(Qhe)return YT;Qhe=1;var e=YT&&YT.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},t=e(hdt()),n=pdt();function r(i,s){var o={};return!i||typeof i!="string"||(0,t.default)(i,function(a,l){a&&l&&(o[(0,n.camelCase)(a,s)]=l)}),o}return r.default=r,YT=r,YT}var gdt=mdt();const ydt=Ao(gdt),sL=LIe("end"),wm=LIe("start");function LIe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function vdt(e){const t=wm(e),n=sL(e);if(t&&n)return{start:t,end:n}}function FA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Jhe(e.position):"start"in e||"end"in e?Jhe(e):"line"in e||"column"in e?iG(e):""}function iG(e){return Zhe(e&&e.line)+":"+Zhe(e&&e.column)}function Jhe(e){return iG(e&&e.start)+"-"+iG(e&&e.end)}function Zhe(e){return e&&typeof e=="number"?e:1}class Fl extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=FA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Fl.prototype.file="";Fl.prototype.name="";Fl.prototype.reason="";Fl.prototype.message="";Fl.prototype.stack="";Fl.prototype.column=void 0;Fl.prototype.line=void 0;Fl.prototype.ancestors=void 0;Fl.prototype.cause=void 0;Fl.prototype.fatal=void 0;Fl.prototype.place=void 0;Fl.prototype.ruleId=void 0;Fl.prototype.source=void 0;const fee={}.hasOwnProperty,bdt=new Map,wdt=/[A-Z]/g,xdt=new Set(["table","tbody","thead","tfoot","tr"]),_dt=new Set(["td","th"]),jIe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Edt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Ddt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Rdt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?dee:ddt,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=BIe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function BIe(e,t,n){if(t.type==="element")return Cdt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Sdt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Adt(e,t,n);if(t.type==="mdxjsEsm")return Tdt(e,t);if(t.type==="root")return kdt(e,t,n);if(t.type==="text")return Idt(e,t)}function Cdt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=dee,e.schema=i),e.ancestors.push(t);const s=VIe(e,t.tagName,!1),o=Pdt(e,t);let a=pee(e,t);return xdt.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!tdt(l):!0})),zIe(e,o,s,t),hee(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Sdt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}$k(e,t.position)}function Tdt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);$k(e,t.position)}function Adt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=dee,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:VIe(e,t.name,!0),o=Odt(e,t),a=pee(e,t);return zIe(e,o,s,t),hee(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function kdt(e,t,n){const r={};return hee(r,pee(e,t)),e.create(t,e.Fragment,r,n)}function Idt(e,t){return t.value}function zIe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function hee(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Rdt(e,t,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:t;return a?u(s,o,a):u(s,o)}}function Ddt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=wm(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function Pdt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&fee.call(t.properties,i)){const s=Ndt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&_dt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Odt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else $k(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else $k(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function pee(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:bdt;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=BIe(e,s,o);a!==void 0&&n.push(a)}return n}function Ndt(e,t,n){const r=ldt(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?IIe(n):FIe(n)),r.property==="style"){let i=typeof n=="object"?n:Mdt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=$dt(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?sdt[r.property]||r.property:r.attribute,n]}}function Mdt(e,t){try{return ydt(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const r=n,i=new Fl("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=e.filePath||void 0,i.url=jIe+"#cannot-parse-style-attribute",i}}function VIe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Uhe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Uhe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return fee.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);$k(e)}function $k(e,t){const n=new Fl("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=jIe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $dt(e){const t={};let n;for(n in e)fee.call(e,n)&&(t[Fdt(n)]=e[n]);return t}function Fdt(e){let t=e.replace(wdt,Ldt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Ldt(e){return"-"+e.toLowerCase()}const bz={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},jdt={};function mee(e,t){const n=jdt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return UIe(e,r,i)}function UIe(e,t,n){if(Bdt(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return epe(e.children,t,n)}return Array.isArray(e)?epe(e,t,n):""}function epe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=UIe(e[i],t,n);return r.join("")}function Bdt(e){return!!(e&&typeof e=="object")}const tpe=document.createElement("i");function gee(e){const t="&"+e+";";tpe.innerHTML=t;const n=tpe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Lc(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Td(e,t){return e.length>0?(Lc(e,e.length,0,t),e):t}const npe={}.hasOwnProperty;function HIe(e){const t={};let n=-1;for(;++n<e.length;)zdt(t,e[n]);return t}function zdt(e,t){let n;for(n in t){const i=(npe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){npe.call(i,o)||(i[o]=[]);const a=s[o];Vdt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Vdt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Lc(e,0,0,r)}function qIe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function rh(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nu=e1(/[A-Za-z]/),El=e1(/[\dA-Za-z]/),Udt=e1(/[#-'*+\--9=?A-Z^-~]/);function y6(e){return e!==null&&(e<32||e===127)}const sG=e1(/\d/),Hdt=e1(/[\dA-Fa-f]/),qdt=e1(/[!-/:-@[-`{-~]/);function Bn(e){return e!==null&&e<-2}function Bi(e){return e!==null&&(e<0||e===32)}function Dr(e){return e===-2||e===-1||e===32}const oL=e1(new RegExp("\\p{P}|\\p{S}","u")),ow=e1(/\s/);function e1(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function aS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&El(e.charCodeAt(n+1))&&El(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Xr(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Dr(l)?(e.enter(n),a(l)):t(l)}function a(l){return Dr(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const Wdt={tokenize:Gdt};function Gdt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Xr(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Bn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const Ydt={tokenize:Kdt},rpe={tokenize:Xdt};function Kdt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const _=n[r];return t.containerState=_[1],e.attempt(_[0].continuation,l,u)(b)}return u(b)}function l(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const _=t.events.length;let E=_,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=_;for(;T<t.events.length;)t.events[T][1].end={...S},T++;return Lc(t.events,E+1,0,t.events.slice(_)),t.events.length=T,u(b)}return a(b)}function u(b){if(r===n.length){if(!i)return f(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(rpe,c,d)(b)}function c(b){return i&&v(),y(r),f(b)}function d(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function f(b){return t.containerState={},e.attempt(rpe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),f(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Bn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,_){const E=t.sliceStream(b);if(_&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let A=T,R,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(R){I=t.events[A][1].end;break}R=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end={...I},S++;Lc(t.events,A+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let _=n.length;for(;_-- >b;){const E=n[_];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Xdt(e,t,n){return Xr(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function XE(e){if(e===null||Bi(e)||ow(e))return 1;if(oL(e))return 2}function aL(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const oG={name:"attention",resolveAll:Qdt,tokenize:Jdt};function Qdt(e,t){let n=-1,r,i,s,o,a,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d={...e[r][1].end},f={...e[n][1].start};ipe(d,-l),ipe(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...e[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...e[n][1].start},end:f},s={type:l>1?"strongText":"emphasisText",start:{...e[r][1].end},end:{...e[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[r][1].end={...o.start},e[n][1].start={...a.end},u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=Td(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=Td(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=Td(u,aL(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=Td(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=Td(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Lc(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Jdt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=XE(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const u=e.exit("attentionSequence"),c=XE(l),d=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?d:d&&(i||!f)),u._close=!!(s===42?f:f&&(c||!d)),t(l)}}function ipe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Zdt={name:"autolink",tokenize:eft};function eft(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return nu(h)?(e.consume(h),o):h===64?n(h):u(h)}function o(h){return h===43||h===45||h===46||El(h)?(r=1,a(h)):u(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||El(h))&&r++<32?(e.consume(h),a):(r=0,u(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||y6(h)?n(h):(e.consume(h),l)}function u(h){return h===64?(e.consume(h),c):Udt(h)?(e.consume(h),u):n(h)}function c(h){return El(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||El(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}const kR={partial:!0,tokenize:tft};function tft(e,t,n){return r;function r(s){return Dr(s)?Xr(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Bn(s)?t(s):n(s)}}const WIe={continuation:{tokenize:rft},exit:ift,name:"blockQuote",tokenize:nft};function nft(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Dr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function rft(e,t,n){const r=this;return i;function i(o){return Dr(o)?Xr(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(WIe,t,n)(o)}}function ift(e){e.exit("blockQuote")}const GIe={name:"characterEscape",tokenize:sft};function sft(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return qdt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const YIe={name:"characterReference",tokenize:oft};function oft(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=El,c(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Hdt,c):(e.enter("characterReferenceValue"),s=7,o=sG,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===El&&!gee(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const spe={partial:!0,tokenize:lft},ope={concrete:!0,name:"codeFenced",tokenize:aft};function aft(e,t,n){const r=this,i={partial:!0,tokenize:E};let s=0,o=0,a;return l;function l(S){return u(S)}function u(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),Dr(S)?Xr(e,d,"whitespace")(S):d(S))}function d(S){return S===null||Bn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(spe,m,_)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(S))}function f(S){return S===null||Bn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(S)):Dr(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Xr(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),f)}function h(S){return S===null||Bn(S)?d(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Bn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,_,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&Dr(S)?Xr(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||Bn(S)?e.check(spe,m,_)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||Bn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function _(S){return e.exit("codeFenced"),t(S)}function E(S,T,A){let R=0;return I;function I(j){return S.enter("lineEnding"),S.consume(j),S.exit("lineEnding"),P}function P(j){return S.enter("codeFencedFence"),Dr(j)?Xr(S,N,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):N(j)}function N(j){return j===a?(S.enter("codeFencedFenceSequence"),M(j)):A(j)}function M(j){return j===a?(R++,S.consume(j),M):R>=o?(S.exit("codeFencedFenceSequence"),Dr(j)?Xr(S,O,"whitespace")(j):O(j)):A(j)}function O(j){return j===null||Bn(j)?(S.exit("codeFencedFence"),T(j)):A(j)}}}function lft(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const wz={name:"codeIndented",tokenize:cft},uft={partial:!0,tokenize:dft};function cft(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),Xr(e,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):Bn(u)?e.attempt(uft,o,l)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||Bn(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),a)}function l(u){return e.exit("codeIndented"),t(u)}}function dft(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Bn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Xr(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Bn(o)?i(o):n(o)}}const fft={name:"codeText",previous:pft,resolve:hft,tokenize:mft};function hft(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function pft(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function mft(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):Bn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||Bn(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),u)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class gft{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&KT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),KT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),KT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);KT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);KT(this.left,n.reverse())}}}function KT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function KIe(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new gft(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,yft(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Lc(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function yft(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],u={};let c,d,f=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),f=g.length;f--;){const y=a.slice(g[f],g[f+1]),v=s.pop();l.push([v,v+y.length-1]),e.splice(v,2,y)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const vft={resolve:wft,tokenize:xft},bft={partial:!0,tokenize:_ft};function wft(e){return KIe(e),e}function xft(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Bn(a)?e.check(bft,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function _ft(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Xr(e,s,"linePrefix")}function s(o){if(o===null||Bn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function XIe(e,t,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),f):y===null||y===32||y===41||y6(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),f(y)):y===null||y===60||Bn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Bi(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<u&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||y6(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function QIe(e,t,n,r,i,s){const o=this;let a=0,l;return u;function u(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Bn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||Bn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!Dr(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function JIe(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===o?(e.exit(s),l(o)):f===null?n(f):Bn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),Xr(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||Bn(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function LA(e,t){let n;return r;function r(i){return Bn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Dr(i)?Xr(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Eft={name:"definition",tokenize:Sft},Cft={partial:!0,tokenize:Tft};function Sft(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return QIe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=rh(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return Bi(h)?LA(e,u)(h):u(h)}function u(h){return XIe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Cft,d,d)(h)}function d(h){return Dr(h)?Xr(e,f,"whitespace")(h):f(h)}function f(h){return h===null||Bn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Tft(e,t,n){return r;function r(a){return Bi(a)?LA(e,i)(a):n(a)}function i(a){return JIe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Dr(a)?Xr(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Bn(a)?t(a):n(a)}}const Aft={name:"hardBreakEscape",tokenize:kft};function kft(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Bn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Ift={name:"headingAtx",resolve:Rft,tokenize:Dft};function Rft(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Lc(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Dft(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Bi(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||Bn(c)?(e.exit("atxHeading"),t(c)):Dr(c)?Xr(e,a,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Bi(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),u)}}const Pft=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ape=["pre","script","style","textarea"],Oft={concrete:!0,name:"htmlFlow",resolveTo:$ft,tokenize:Fft},Nft={partial:!0,tokenize:jft},Mft={partial:!0,tokenize:Lft};function $ft(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Fft(e,t,n){const r=this;let i,s,o,a,l;return u;function u(V){return c(V)}function c(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),d}function d(V){return V===33?(e.consume(V),f):V===47?(e.consume(V),s=!0,m):V===63?(e.consume(V),i=3,r.interrupt?t:U):nu(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function f(V){return V===45?(e.consume(V),i=2,h):V===91?(e.consume(V),i=5,a=0,p):nu(V)?(e.consume(V),i=4,r.interrupt?t:U):n(V)}function h(V){return V===45?(e.consume(V),r.interrupt?t:U):n(V)}function p(V){const Y="CDATA[";return V===Y.charCodeAt(a++)?(e.consume(V),a===Y.length?r.interrupt?t:N:p):n(V)}function m(V){return nu(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function g(V){if(V===null||V===47||V===62||Bi(V)){const Y=V===47,Q=o.toLowerCase();return!Y&&!s&&ape.includes(Q)?(i=1,r.interrupt?t(V):N(V)):Pft.includes(o.toLowerCase())?(i=6,Y?(e.consume(V),y):r.interrupt?t(V):N(V)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(V):s?v(V):b(V))}return V===45||El(V)?(e.consume(V),o+=String.fromCharCode(V),g):n(V)}function y(V){return V===62?(e.consume(V),r.interrupt?t:N):n(V)}function v(V){return Dr(V)?(e.consume(V),v):I(V)}function b(V){return V===47?(e.consume(V),I):V===58||V===95||nu(V)?(e.consume(V),_):Dr(V)?(e.consume(V),b):I(V)}function _(V){return V===45||V===46||V===58||V===95||El(V)?(e.consume(V),_):E(V)}function E(V){return V===61?(e.consume(V),S):Dr(V)?(e.consume(V),E):b(V)}function S(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),l=V,T):Dr(V)?(e.consume(V),S):A(V)}function T(V){return V===l?(e.consume(V),l=null,R):V===null||Bn(V)?n(V):(e.consume(V),T)}function A(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Bi(V)?E(V):(e.consume(V),A)}function R(V){return V===47||V===62||Dr(V)?b(V):n(V)}function I(V){return V===62?(e.consume(V),P):n(V)}function P(V){return V===null||Bn(V)?N(V):Dr(V)?(e.consume(V),P):n(V)}function N(V){return V===45&&i===2?(e.consume(V),B):V===60&&i===1?(e.consume(V),H):V===62&&i===4?(e.consume(V),L):V===63&&i===3?(e.consume(V),U):V===93&&i===5?(e.consume(V),G):Bn(V)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Nft,z,M)(V)):V===null||Bn(V)?(e.exit("htmlFlowData"),M(V)):(e.consume(V),N)}function M(V){return e.check(Mft,O,z)(V)}function O(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),j}function j(V){return V===null||Bn(V)?M(V):(e.enter("htmlFlowData"),N(V))}function B(V){return V===45?(e.consume(V),U):N(V)}function H(V){return V===47?(e.consume(V),o="",q):N(V)}function q(V){if(V===62){const Y=o.toLowerCase();return ape.includes(Y)?(e.consume(V),L):N(V)}return nu(V)&&o.length<8?(e.consume(V),o+=String.fromCharCode(V),q):N(V)}function G(V){return V===93?(e.consume(V),U):N(V)}function U(V){return V===62?(e.consume(V),L):V===45&&i===2?(e.consume(V),U):N(V)}function L(V){return V===null||Bn(V)?(e.exit("htmlFlowData"),z(V)):(e.consume(V),L)}function z(V){return e.exit("htmlFlow"),t(V)}}function Lft(e,t,n){const r=this;return i;function i(o){return Bn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function jft(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(kR,t,n)}}const Bft={name:"htmlText",tokenize:zft};function zft(e,t,n){const r=this;let i,s,o;return a;function a(U){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(U),l}function l(U){return U===33?(e.consume(U),u):U===47?(e.consume(U),E):U===63?(e.consume(U),b):nu(U)?(e.consume(U),A):n(U)}function u(U){return U===45?(e.consume(U),c):U===91?(e.consume(U),s=0,p):nu(U)?(e.consume(U),v):n(U)}function c(U){return U===45?(e.consume(U),h):n(U)}function d(U){return U===null?n(U):U===45?(e.consume(U),f):Bn(U)?(o=d,H(U)):(e.consume(U),d)}function f(U){return U===45?(e.consume(U),h):d(U)}function h(U){return U===62?B(U):U===45?f(U):d(U)}function p(U){const L="CDATA[";return U===L.charCodeAt(s++)?(e.consume(U),s===L.length?m:p):n(U)}function m(U){return U===null?n(U):U===93?(e.consume(U),g):Bn(U)?(o=m,H(U)):(e.consume(U),m)}function g(U){return U===93?(e.consume(U),y):m(U)}function y(U){return U===62?B(U):U===93?(e.consume(U),y):m(U)}function v(U){return U===null||U===62?B(U):Bn(U)?(o=v,H(U)):(e.consume(U),v)}function b(U){return U===null?n(U):U===63?(e.consume(U),_):Bn(U)?(o=b,H(U)):(e.consume(U),b)}function _(U){return U===62?B(U):b(U)}function E(U){return nu(U)?(e.consume(U),S):n(U)}function S(U){return U===45||El(U)?(e.consume(U),S):T(U)}function T(U){return Bn(U)?(o=T,H(U)):Dr(U)?(e.consume(U),T):B(U)}function A(U){return U===45||El(U)?(e.consume(U),A):U===47||U===62||Bi(U)?R(U):n(U)}function R(U){return U===47?(e.consume(U),B):U===58||U===95||nu(U)?(e.consume(U),I):Bn(U)?(o=R,H(U)):Dr(U)?(e.consume(U),R):B(U)}function I(U){return U===45||U===46||U===58||U===95||El(U)?(e.consume(U),I):P(U)}function P(U){return U===61?(e.consume(U),N):Bn(U)?(o=P,H(U)):Dr(U)?(e.consume(U),P):R(U)}function N(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(e.consume(U),i=U,M):Bn(U)?(o=N,H(U)):Dr(U)?(e.consume(U),N):(e.consume(U),O)}function M(U){return U===i?(e.consume(U),i=void 0,j):U===null?n(U):Bn(U)?(o=M,H(U)):(e.consume(U),M)}function O(U){return U===null||U===34||U===39||U===60||U===61||U===96?n(U):U===47||U===62||Bi(U)?R(U):(e.consume(U),O)}function j(U){return U===47||U===62||Bi(U)?R(U):n(U)}function B(U){return U===62?(e.consume(U),e.exit("htmlTextData"),e.exit("htmlText"),t):n(U)}function H(U){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(U),e.exit("lineEnding"),q}function q(U){return Dr(U)?Xr(e,G,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):G(U)}function G(U){return e.enter("htmlTextData"),o(U)}}const yee={name:"labelEnd",resolveAll:qft,resolveTo:Wft,tokenize:Gft},Vft={tokenize:Yft},Uft={tokenize:Kft},Hft={tokenize:Xft};function qft(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",t+=i}}return e.length!==n.length&&Lc(e,0,e.length,n),e}function Wft(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[s][1].start},end:{...e[o][1].end}},c={type:"labelText",start:{...e[s+r+2][1].end},end:{...e[o-2][1].start}};return a=[["enter",l,t],["enter",u,t]],a=Td(a,e.slice(s+1,s+r+3)),a=Td(a,[["enter",c,t]]),a=Td(a,aL(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Td(a,[["exit",c,t],e[o-2],e[o-1],["exit",u,t]]),a=Td(a,e.slice(o+1)),a=Td(a,[["exit",l,t]]),Lc(e,s,e.length,a),e}function Gft(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(rh(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):n(f)}function l(f){return f===40?e.attempt(Vft,c,o?c:d)(f):f===91?e.attempt(Uft,c,o?u:d)(f):o?c(f):d(f)}function u(f){return e.attempt(Hft,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function Yft(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return Bi(d)?LA(e,s)(d):s(d)}function s(d){return d===41?c(d):XIe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Bi(d)?LA(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?JIe(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return Bi(d)?LA(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function Kft(e,t,n){const r=this;return i;function i(a){return QIe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(rh(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Xft(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Qft={name:"labelStartImage",resolveAll:yee.resolveAll,tokenize:Jft};function Jft(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Zft={name:"labelStartLink",resolveAll:yee.resolveAll,tokenize:eht};function eht(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const xz={name:"lineEnding",tokenize:tht};function tht(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Xr(e,t,"linePrefix")}}const s4={name:"thematicBreak",tokenize:nht};function nht(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||Bn(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),Dr(u)?Xr(e,a,"whitespace")(u):a(u))}}const ju={continuation:{tokenize:oht},exit:lht,name:"list",tokenize:sht},rht={partial:!0,tokenize:uht},iht={partial:!0,tokenize:aht};function sht(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:sG(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(s4,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return sG(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(kR,r.interrupt?n:c,e.attempt(rht,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return Dr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function oht(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(kR,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Xr(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Dr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(iht,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Xr(e,e.attempt(ju,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function aht(e,t,n){const r=this;return Xr(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function lht(e){e.exit(this.containerState.type)}function uht(e,t,n){const r=this;return Xr(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Dr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const lpe={name:"setextUnderline",resolveTo:cht,tokenize:dht};function cht(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...e[r][1].start},end:{...e[e.length-1][1].end}};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end={...e[s][1].end}):e[r][1]=o,e.push(["exit",o,t]),e}function dht(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),Dr(u)?Xr(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||Bn(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const fht={tokenize:hht};function hht(e){const t=this,n=e.attempt(kR,r,e.attempt(this.parser.constructs.flowInitial,i,Xr(e,e.attempt(this.parser.constructs.flow,i,e.attempt(vft,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const pht={resolveAll:eRe()},mht=ZIe("string"),ght=ZIe("text");function ZIe(e){return{resolveAll:eRe(e==="text"?yht:void 0),tokenize:t};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function eRe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function yht(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(a=0),a){const u={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...u.start},r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}const vht={42:ju,43:ju,45:ju,48:ju,49:ju,50:ju,51:ju,52:ju,53:ju,54:ju,55:ju,56:ju,57:ju,62:WIe},bht={91:Eft},wht={[-2]:wz,[-1]:wz,32:wz},xht={35:Ift,42:s4,45:[lpe,s4],60:Oft,61:lpe,95:s4,96:ope,126:ope},_ht={38:YIe,92:GIe},Eht={[-5]:xz,[-4]:xz,[-3]:xz,33:Qft,38:YIe,42:oG,60:[Zdt,Bft],91:Zft,92:[Aft,GIe],93:yee,95:oG,96:fft},Cht={null:[oG,pht]},Sht={null:[42,95]},Tht={null:[]},Aht=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Sht,contentInitial:bht,disable:Tht,document:vht,flow:xht,flowInitial:wht,insideSpan:Cht,string:_ht,text:Eht},Symbol.toStringTag,{value:"Module"}));function kht(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:T(E),check:T(S),consume:v,enter:b,exit:_,interrupt:T(S,{interrupt:!0})},u={code:null,containerState:{},defineSkip:m,events:[],now:p,parser:e,previous:null,sliceSerialize:f,sliceStream:h,write:d};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function d(P){return o=Td(o,P),g(),o[o.length-1]!==null?[]:(A(t,0),u.events=aL(s,u.events,u),u.events)}function f(P,N){return Rht(h(P),N)}function h(P){return Iht(o,P)}function p(){const{_bufferIndex:P,_index:N,line:M,column:O,offset:j}=r;return{_bufferIndex:P,_index:N,line:M,column:O,offset:j}}function m(P){i[P.line]=P.column,I()}function g(){let P;for(;r._index<o.length;){const N=o[r._index];if(typeof N=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<N.length;)y(N.charCodeAt(r._bufferIndex));else y(N)}}function y(P){c=c(P)}function v(P){Bn(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,I()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function b(P,N){const M=N||{};return M.type=P,M.start=p(),u.events.push(["enter",M,u]),a.push(M),M}function _(P){const N=a.pop();return N.end=p(),u.events.push(["exit",N,u]),N}function E(P,N){A(P,N.from)}function S(P,N){N.restore()}function T(P,N){return M;function M(O,j,B){let H,q,G,U;return Array.isArray(O)?z(O):"tokenize"in O?z([O]):L(O);function L(ne){return ue;function ue(se){const ae=se!==null&&ne[se],he=se!==null&&ne.null,ie=[...Array.isArray(ae)?ae:ae?[ae]:[],...Array.isArray(he)?he:he?[he]:[]];return z(ie)(se)}}function z(ne){return H=ne,q=0,ne.length===0?B:V(ne[q])}function V(ne){return ue;function ue(se){return U=R(),G=ne,ne.partial||(u.currentConstruct=ne),ne.name&&u.parser.constructs.disable.null.includes(ne.name)?Q():ne.tokenize.call(N?Object.assign(Object.create(u),N):u,l,Y,Q)(se)}}function Y(ne){return P(G,U),j}function Q(ne){return U.restore(),++q<H.length?V(H[q]):B}}}function A(P,N){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&Lc(u.events,N,u.events.length-N,P.resolve(u.events.slice(N),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function R(){const P=p(),N=u.previous,M=u.currentConstruct,O=u.events.length,j=Array.from(a);return{from:O,restore:B};function B(){r=P,u.previous=N,u.currentConstruct=M,u.events.length=O,a=j,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Iht(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Rht(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function Dht(e){const r={constructs:HIe([Aht,...(e||{}).extensions||[]]),content:i(Wdt),defined:[],document:i(Ydt),flow:i(fht),lazy:{},string:i(mht),text:i(ght)};return r;function i(s){return o;function o(a){return kht(r,s,a)}}}function Pht(e){for(;!KIe(e););return e}const upe=/[\0\t\n\r]/g;function Oht(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(upe.lastIndex=d,u=upe.exec(s),f=u&&u.index!==void 0?u.index:s.length,h=s.charCodeAt(f),!u){t=s.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(s.slice(d,f)),e+=f-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Nht=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Mht(e){return e.replace(Nht,$ht)}function $ht(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return qIe(n.slice(s?2:1),s?16:10)}return gee(n)||e}const tRe={}.hasOwnProperty;function Fht(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Lht(n)(Pht(Dht(n).document().write(Oht()(e,t,!0))))}function Lht(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(me),autolinkProtocol:R,autolinkEmail:R,atxHeading:s(fe),blockQuote:s(he),characterEscape:R,characterReference:R,codeFenced:s(ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ie,o),codeText:s(le,o),codeTextData:R,data:R,codeFlowValue:R,definition:s(Ce),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(X),hardBreakEscape:s(de),hardBreakTrailing:s(de),htmlFlow:s(te,o),htmlFlowData:R,htmlText:s(te,o),htmlTextData:R,image:s(ee),label:o,link:s(me),listItem:s(Te),listItemValue:f,listOrdered:s(Ie,d),listUnordered:s(Ie),paragraph:s(we),reference:V,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(fe),strong:s(Me),thematicBreak:s(Oe)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:ae,autolinkProtocol:se,blockQuote:l(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:Q,characterReferenceMarkerNumeric:Q,characterReferenceValue:ne,characterReference:ue,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:l(y),codeText:l(j),codeTextData:I,data:I,definition:l(),definitionDestinationString:_,definitionLabelString:v,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(N),hardBreakTrailing:l(N),htmlFlow:l(M),htmlFlowData:I,htmlText:l(O),htmlTextData:I,image:l(H),label:G,labelText:q,lineEnding:P,link:l(B),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Y,resourceDestinationString:U,resourceTitleString:L,resource:z,setextHeading:l(A),setextHeadingLineSequence:T,setextHeadingText:S,strong:l(),thematicBreak:l()}};nRe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(xe){let je={type:"root",children:[]};const Ve={stack:[je],tokenStack:[],config:t,enter:a,exit:u,buffer:o,resume:c,data:n},nt=[];let it=-1;for(;++it<xe.length;)if(xe[it][1].type==="listOrdered"||xe[it][1].type==="listUnordered")if(xe[it][0]==="enter")nt.push(it);else{const _t=nt.pop();it=i(xe,_t,it)}for(it=-1;++it<xe.length;){const _t=t[xe[it][0]];tRe.call(_t,xe[it][1].type)&&_t[xe[it][1].type].call(Object.assign({sliceSerialize:xe[it][2].sliceSerialize},Ve),xe[it][1])}if(Ve.tokenStack.length>0){const _t=Ve.tokenStack[Ve.tokenStack.length-1];(_t[1]||cpe).call(Ve,void 0,_t[0])}for(je.position={start:ry(xe.length>0?xe[0][1].start:{line:1,column:1,offset:0}),end:ry(xe.length>0?xe[xe.length-2][1].end:{line:1,column:1,offset:0})},it=-1;++it<t.transforms.length;)je=t.transforms[it](je)||je;return je}function i(xe,je,Ve){let nt=je-1,it=-1,_t=!1,rn,en,zn,zt;for(;++nt<=Ve;){const wn=xe[nt];switch(wn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{wn[0]==="enter"?it++:it--,zt=void 0;break}case"lineEndingBlank":{wn[0]==="enter"&&(rn&&!zt&&!it&&!zn&&(zn=nt),zt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:zt=void 0}if(!it&&wn[0]==="enter"&&wn[1].type==="listItemPrefix"||it===-1&&wn[0]==="exit"&&(wn[1].type==="listUnordered"||wn[1].type==="listOrdered")){if(rn){let nr=nt;for(en=void 0;nr--;){const Yn=xe[nr];if(Yn[1].type==="lineEnding"||Yn[1].type==="lineEndingBlank"){if(Yn[0]==="exit")continue;en&&(xe[en][1].type="lineEndingBlank",_t=!0),Yn[1].type="lineEnding",en=nr}else if(!(Yn[1].type==="linePrefix"||Yn[1].type==="blockQuotePrefix"||Yn[1].type==="blockQuotePrefixWhitespace"||Yn[1].type==="blockQuoteMarker"||Yn[1].type==="listItemIndent"))break}zn&&(!en||zn<en)&&(rn._spread=!0),rn.end=Object.assign({},en?xe[en][1].start:wn[1].end),xe.splice(en||nt,0,["exit",rn,wn[2]]),nt++,Ve++}if(wn[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},wn[1].start),end:void 0};rn=nr,xe.splice(nt,0,["enter",nr,wn[2]]),nt++,Ve++,zn=void 0,zt=!0}}}return xe[je][1]._spread=_t,Ve}function s(xe,je){return Ve;function Ve(nt){a.call(this,xe(nt),nt),je&&je.call(this,nt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(xe,je,Ve){this.stack[this.stack.length-1].children.push(xe),this.stack.push(xe),this.tokenStack.push([je,Ve||void 0]),xe.position={start:ry(je.start),end:void 0}}function l(xe){return je;function je(Ve){xe&&xe.call(this,Ve),u.call(this,Ve)}}function u(xe,je){const Ve=this.stack.pop(),nt=this.tokenStack.pop();if(nt)nt[0].type!==xe.type&&(je?je.call(this,xe,nt[0]):(nt[1]||cpe).call(this,xe,nt[0]));else throw new Error("Cannot close `"+xe.type+"` ("+FA({start:xe.start,end:xe.end})+"): its not open");Ve.position.end=ry(xe.end)}function c(){return mee(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(xe){if(this.data.expectingFirstListItemValue){const je=this.stack[this.stack.length-2];je.start=Number.parseInt(this.sliceSerialize(xe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.lang=xe}function p(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.meta=xe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.value=xe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.value=xe.replace(/(\r?\n|\r)$/g,"")}function v(xe){const je=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=je,Ve.identifier=rh(this.sliceSerialize(xe)).toLowerCase()}function b(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.title=xe}function _(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.url=xe}function E(xe){const je=this.stack[this.stack.length-1];if(!je.depth){const Ve=this.sliceSerialize(xe).length;je.depth=Ve}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(xe){const je=this.stack[this.stack.length-1];je.depth=this.sliceSerialize(xe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function R(xe){const Ve=this.stack[this.stack.length-1].children;let nt=Ve[Ve.length-1];(!nt||nt.type!=="text")&&(nt=ke(),nt.position={start:ry(xe.start),end:void 0},Ve.push(nt)),this.stack.push(nt)}function I(xe){const je=this.stack.pop();je.value+=this.sliceSerialize(xe),je.position.end=ry(xe.end)}function P(xe){const je=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ve=je.children[je.children.length-1];Ve.position.end=ry(xe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(je.type)&&(R.call(this,xe),I.call(this,xe))}function N(){this.data.atHardBreak=!0}function M(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.value=xe}function O(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.value=xe}function j(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.value=xe}function B(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const je=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=je,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function H(){const xe=this.stack[this.stack.length-1];if(this.data.inReference){const je=this.data.referenceType||"shortcut";xe.type+="Reference",xe.referenceType=je,delete xe.url,delete xe.title}else delete xe.identifier,delete xe.label;this.data.referenceType=void 0}function q(xe){const je=this.sliceSerialize(xe),Ve=this.stack[this.stack.length-2];Ve.label=Mht(je),Ve.identifier=rh(je).toLowerCase()}function G(){const xe=this.stack[this.stack.length-1],je=this.resume(),Ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ve.type==="link"){const nt=xe.children;Ve.children=nt}else Ve.alt=je}function U(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.url=xe}function L(){const xe=this.resume(),je=this.stack[this.stack.length-1];je.title=xe}function z(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function Y(xe){const je=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=je,Ve.identifier=rh(this.sliceSerialize(xe)).toLowerCase(),this.data.referenceType="full"}function Q(xe){this.data.characterReferenceType=xe.type}function ne(xe){const je=this.sliceSerialize(xe),Ve=this.data.characterReferenceType;let nt;Ve?(nt=qIe(je,Ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):nt=gee(je);const it=this.stack[this.stack.length-1];it.value+=nt}function ue(xe){const je=this.stack.pop();je.position.end=ry(xe.end)}function se(xe){I.call(this,xe);const je=this.stack[this.stack.length-1];je.url=this.sliceSerialize(xe)}function ae(xe){I.call(this,xe);const je=this.stack[this.stack.length-1];je.url="mailto:"+this.sliceSerialize(xe)}function he(){return{type:"blockquote",children:[]}}function ie(){return{type:"code",lang:null,meta:null,value:""}}function le(){return{type:"inlineCode",value:""}}function Ce(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function X(){return{type:"emphasis",children:[]}}function fe(){return{type:"heading",depth:0,children:[]}}function de(){return{type:"break"}}function te(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function me(){return{type:"link",title:null,url:"",children:[]}}function Ie(xe){return{type:"list",ordered:xe.type==="listOrdered",start:null,spread:xe._spread,children:[]}}function Te(xe){return{type:"listItem",spread:xe._spread,checked:null,children:[]}}function we(){return{type:"paragraph",children:[]}}function Me(){return{type:"strong",children:[]}}function ke(){return{type:"text",value:""}}function Oe(){return{type:"thematicBreak"}}}function ry(e){return{line:e.line,column:e.column,offset:e.offset}}function nRe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?nRe(e,r):jht(e,r)}}function jht(e,t){let n;for(n in t)if(tRe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function cpe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+FA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+FA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+FA({start:t.start,end:t.end})+") is still open")}function Bht(e){const t=this;t.parser=n;function n(r){return Fht(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function zht(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Vht(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Uht(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Hht(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qht(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Wht(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=aS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Ght(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Yht(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function rRe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Kht(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return rRe(e,t);const i={src:aS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Xht(e,t){const n={src:aS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Qht(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Jht(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return rRe(e,t);const i={href:aS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Zht(e,t){const n={href:aS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function ept(e,t,n){const r=e.all(t),i=n?tpt(n):iRe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function tpt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=iRe(n[r])}return t}function iRe(e){const t=e.spread;return t??e.children.length>1}function npt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function rpt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ipt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function spt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function opt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=wm(t.children[1]),l=sL(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function apt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<a;){const d=t.children[l],f={},h=o?o[l]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function lpt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const dpe=9,fpe=32;function upt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(hpe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(hpe(t.slice(i),i>0,!1)),s.join("")}function hpe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===dpe||s===fpe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===dpe||s===fpe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function cpt(e,t){const n={type:"text",value:upt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function dpt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const fpt={blockquote:zht,break:Vht,code:Uht,delete:Hht,emphasis:qht,footnoteReference:Wht,heading:Ght,html:Yht,imageReference:Kht,image:Xht,inlineCode:Qht,linkReference:Jht,link:Zht,listItem:ept,list:npt,paragraph:rpt,root:ipt,strong:spt,table:opt,tableCell:lpt,tableRow:apt,text:cpt,thematicBreak:dpt,toml:S3,yaml:S3,definition:S3,footnoteDefinition:S3};function S3(){}const sRe=-1,lL=0,jA=1,v6=2,vee=3,bee=4,wee=5,xee=6,oRe=7,aRe=8,ppe=typeof self=="object"?self:globalThis,hpt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case lL:case sRe:return n(o,i);case jA:{const a=n([],i);for(const l of o)a.push(r(l));return a}case v6:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case vee:return n(new Date(o),i);case bee:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case wee:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case xee:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case oRe:{const{name:a,message:l}=o;return n(new ppe[a](l),i)}case aRe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new ppe[s](o),i)};return r},mpe=e=>hpt(new Map,e)(0),u_="",{toString:ppt}={},{keys:mpt}=Object,XT=e=>{const t=typeof e;if(t!=="object"||!e)return[lL,t];const n=ppt.call(e).slice(8,-1);switch(n){case"Array":return[jA,u_];case"Object":return[v6,u_];case"Date":return[vee,u_];case"RegExp":return[bee,u_];case"Map":return[wee,u_];case"Set":return[xee,u_];case"DataView":return[jA,n]}return n.includes("Array")?[jA,n]:n.includes("Error")?[oRe,n]:[v6,n]},T3=([e,t])=>e===lL&&(t==="function"||t==="symbol"),gpt=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=XT(o);switch(a){case lL:{let c=o;switch(l){case"bigint":a=aRe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([sRe],o)}return i([a,c],o)}case jA:{if(l){let f=o;return l==="DataView"?f=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(f=new Uint8Array(o)),i([l,[...f]],o)}const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case v6:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of mpt(o))(e||!T3(XT(o[f])))&&c.push([s(f),s(o[f])]);return d}case vee:return i([a,o.toISOString()],o);case bee:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case wee:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(T3(XT(f))||T3(XT(h))))&&c.push([s(f),s(h)]);return d}case xee:{const c=[],d=i([a,c],o);for(const f of o)(e||!T3(XT(f)))&&c.push(s(f));return d}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},gpe=(e,{json:t,lossy:n}={})=>{const r=[];return gpt(!(t||n),!!t,new Map,r)(e),r},QE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?mpe(gpe(e,t)):structuredClone(e):(e,t)=>mpe(gpe(e,t));function ypt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function vpt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function bpt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ypt,r=e.options.footnoteBackLabel||vpt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),d=String(u.identifier).toUpperCase(),f=aS(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(l,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(u,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...QE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const uL=(function(e){if(e==null)return Ept;if(typeof e=="function")return cL(e);if(typeof e=="object")return Array.isArray(e)?wpt(e):xpt(e);if(typeof e=="string")return _pt(e);throw new Error("Expected function, string, or object as test")});function wpt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=uL(e[n]);return cL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function xpt(e){const t=e;return cL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function _pt(e){return cL(t);function t(n){return n&&n.type===e}}function cL(e){return t;function t(n,r,i){return!!(Cpt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Ept(){return!0}function Cpt(e){return e!==null&&typeof e=="object"&&"type"in e}const lRe=[],Spt=!0,aG=!1,Tpt="skip";function uRe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=uL(i),o=r?-1:1;a(e,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=lRe,p,m,g;if((!t||s(l,u,c[c.length-1]||void 0))&&(h=Apt(n(l,c)),h[0]===aG))return h;if("children"in l&&l.children){const y=l;if(y.children&&h[0]!==Tpt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===aG)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Apt(e){return Array.isArray(e)?e:typeof e=="number"?[Spt,e]:e==null?lRe:[e]}function IR(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),uRe(e,s,a,i);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const lG={}.hasOwnProperty,kpt={};function Ipt(e,t){const n=t||kpt,r=new Map,i=new Map,s=new Map,o={...fpt,...n.handlers},a={all:u,applyData:Dpt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:Rpt,wrap:Opt};return IR(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function l(c,d){const f=c.type,h=a.handlers[f];if(lG.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...g}=c,y=QE(g);return y.children=a.all(c),y}return QE(c)}return(a.options.unknownHandler||Ppt)(a,c,d)}function u(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=ype(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=ype(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function Rpt(e,t){e.position&&(t.position=vdt(e))}function Dpt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,QE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Ppt(e,t){const n=t.data||{},r="value"in t&&!(lG.call(n,"hProperties")||lG.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Opt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ype(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function vpe(e,t){const n=Ipt(e,t),r=n.one(e,void 0),i=bpt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Npt(e,t){return e&&"run"in e?async function(n,r){const i=vpe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return vpe(n,{file:r,...e||t})}}function bpe(e){if(e)throw e}var _z,wpe;function Mpt(){if(wpe)return _z;wpe=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(u){return typeof Array.isArray=="function"?Array.isArray(u):t.call(u)==="[object Array]"},s=function(u){if(!u||t.call(u)!=="[object Object]")return!1;var c=e.call(u,"constructor"),d=u.constructor&&u.constructor.prototype&&e.call(u.constructor.prototype,"isPrototypeOf");if(u.constructor&&!c&&!d)return!1;var f;for(f in u);return typeof f>"u"||e.call(u,f)},o=function(u,c){n&&c.name==="__proto__"?n(u,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):u[c.name]=c.newValue},a=function(u,c){if(c==="__proto__")if(e.call(u,c)){if(r)return r(u,c).value}else return;return u[c]};return _z=function l(){var u,c,d,f,h,p,m=arguments[0],g=1,y=arguments.length,v=!1;for(typeof m=="boolean"&&(v=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<y;++g)if(u=arguments[g],u!=null)for(c in u)d=a(m,c),f=a(u,c),m!==f&&(v&&f&&(s(f)||(h=i(f)))?(h?(h=!1,p=d&&i(d)?d:[]):p=d&&s(d)?d:{},o(m,{name:c,newValue:l(v,p,f)})):typeof f<"u"&&o(m,{name:c,newValue:f}));return m},_z}var $pt=Mpt();const Ez=Ao($pt);function uG(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Fpt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(u[d]===null||u[d]===void 0)&&(u[d]=i[d]);i=u,c?Lpt(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Lpt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const pp={basename:jpt,dirname:Bpt,extname:zpt,join:Vpt,sep:"/"};function jpt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');RR(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Bpt(e){if(RR(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function zpt(e){RR(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Vpt(...e){let t=-1,n;for(;++t<e.length;)RR(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Upt(n)}function Upt(e){RR(e);const t=e.codePointAt(0)===47;let n=Hpt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Hpt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function RR(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const qpt={cwd:Wpt};function Wpt(){return"/"}function cG(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Gpt(e){if(typeof e=="string")e=new URL(e);else if(!cG(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Ypt(e)}function Ypt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Cz=["history","path","basename","stem","extname","dirname"];class cRe{constructor(t){let n;t?cG(t)?n={path:t}:typeof t=="string"||Kpt(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":qpt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Cz.length;){const s=Cz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Cz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?pp.basename(this.path):void 0}set basename(t){Tz(t,"basename"),Sz(t,"basename"),this.path=pp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?pp.dirname(this.path):void 0}set dirname(t){xpe(this.basename,"dirname"),this.path=pp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?pp.extname(this.path):void 0}set extname(t){if(Sz(t,"extname"),xpe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=pp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){cG(t)&&(t=Gpt(t)),Tz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?pp.basename(this.path,this.extname):void 0}set stem(t){Tz(t,"stem"),Sz(t,"stem"),this.path=pp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Fl(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Sz(e,t){if(e&&e.includes(pp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+pp.sep+"`")}function Tz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function xpe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Kpt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Xpt=(function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s}),Qpt={}.hasOwnProperty;class _ee extends Xpt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Fpt()}copy(){const t=new _ee;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Ez(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Iz("data",this.frozen),this.namespace[t]=n,this):Qpt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Iz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=A3(t),r=this.parser||this.Parser;return Az("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Az("process",this.parser||this.Parser),kz("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=A3(t),l=r.parse(a);r.run(l,a,function(c,d,f){if(c||!d||!f)return u(c);const h=d,p=r.stringify(h,f);emt(p)?f.value=p:f.result=p,u(c,f)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),Az("processSync",this.parser||this.Parser),kz("processSync",this.compiler||this.Compiler),this.process(t,i),Epe("processSync","process",n),r;function i(s,o){n=!0,bpe(s),r=o}}run(t,n,r){_pe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=A3(n);i.run(t,l,u);function u(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Epe("runSync","run",r),i;function s(o,a){bpe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=A3(n),i=this.compiler||this.Compiler;return kz("stringify",i),_pe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Iz("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=Ez(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===u){f=d;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];uG(m)&&uG(h)&&(h=Ez(!0,m,h)),r[f]=[u,h,...p]}}}}const Jpt=new _ee().freeze();function Az(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function kz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Iz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function _pe(e){if(!uG(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Epe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function A3(e){return Zpt(e)?e:new cRe(e)}function Zpt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function emt(e){return typeof e=="string"||tmt(e)}function tmt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const nmt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Cpe=[],Spe={allowDangerousHtml:!0},rmt=/^(https?|ircs?|mailto|xmpp)$/i,imt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function smt(e){const t=omt(e),n=amt(e);return lmt(t.runSync(t.parse(n),n),e)}function omt(e){const t=e.rehypePlugins||Cpe,n=e.remarkPlugins||Cpe,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Spe}:Spe;return Jpt().use(Bht).use(n).use(Npt,r).use(t)}function amt(e){const t=e.children||"",n=new cRe;return typeof t=="string"&&(n.value=t),n}function lmt(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,s=t.disallowedElements,o=t.skipHtml,a=t.unwrapDisallowed,l=t.urlTransform||umt;for(const c of imt)Object.hasOwn(t,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+nmt+c.id,void 0);return t.className&&(e={type:"element",tagName:"div",properties:{className:t.className},children:e.type==="root"?e.children:[e]}),IR(e,u),Edt(e,{Fragment:w.Fragment,components:i,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function u(c,d,f){if(c.type==="raw"&&f&&typeof d=="number")return o?f.children.splice(d,1):f.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let h;for(h in bz)if(Object.hasOwn(bz,h)&&Object.hasOwn(c.properties,h)){const p=c.properties[h],m=bz[h];(m===null||m.includes(c.tagName))&&(c.properties[h]=l(String(p||""),h,c))}}if(c.type==="element"){let h=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!h&&r&&typeof d=="number"&&(h=!r(c,d,f)),h&&f&&typeof d=="number")return a&&c.children?f.children.splice(d,1,...c.children):f.children.splice(d,1),d}}}function umt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||rmt.test(e.slice(0,t))?e:""}let DR=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};DR.prototype.property={};DR.prototype.normal={};DR.prototype.space=null;function dRe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new DR(n,r,t)}function Fk(e){return e.toLowerCase()}let pf=class{constructor(t,n){this.property=t,this.attribute=n}};pf.prototype.space=null;pf.prototype.boolean=!1;pf.prototype.booleanish=!1;pf.prototype.overloadedBoolean=!1;pf.prototype.number=!1;pf.prototype.commaSeparated=!1;pf.prototype.spaceSeparated=!1;pf.prototype.commaOrSpaceSeparated=!1;pf.prototype.mustUseProperty=!1;pf.prototype.defined=!1;let cmt=0;const fr=Jw(),xo=Jw(),fRe=Jw(),Pt=Jw(),Gi=Jw(),gE=Jw(),kc=Jw();function Jw(){return 2**++cmt}const dG=Object.freeze(Object.defineProperty({__proto__:null,boolean:fr,booleanish:xo,commaOrSpaceSeparated:kc,commaSeparated:gE,number:Pt,overloadedBoolean:fRe,spaceSeparated:Gi},Symbol.toStringTag,{value:"Module"})),Rz=Object.keys(dG);class Eee extends pf{constructor(t,n,r,i){let s=-1;if(super(t,n),Tpe(this,"space",i),typeof r=="number")for(;++s<Rz.length;){const o=Rz[s];Tpe(this,Rz[s],(r&dG[o])===dG[o])}}}Eee.prototype.defined=!0;function Tpe(e,t,n){n&&(e[t]=n)}const dmt={}.hasOwnProperty;function lS(e){const t={},n={};let r;for(r in e.properties)if(dmt.call(e.properties,r)){const i=e.properties[r],s=new Eee(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[Fk(r)]=r,n[Fk(s.attribute)]=r}return new DR(t,n,e.space)}const hRe=lS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),pRe=lS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function mRe(e,t){return t in e?e[t]:t}function gRe(e,t){return mRe(e,t.toLowerCase())}const yRe=lS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:gRe,properties:{xmlns:null,xmlnsXLink:null}}),vRe=lS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:xo,ariaAutoComplete:null,ariaBusy:xo,ariaChecked:xo,ariaColCount:Pt,ariaColIndex:Pt,ariaColSpan:Pt,ariaControls:Gi,ariaCurrent:null,ariaDescribedBy:Gi,ariaDetails:null,ariaDisabled:xo,ariaDropEffect:Gi,ariaErrorMessage:null,ariaExpanded:xo,ariaFlowTo:Gi,ariaGrabbed:xo,ariaHasPopup:null,ariaHidden:xo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Gi,ariaLevel:Pt,ariaLive:null,ariaModal:xo,ariaMultiLine:xo,ariaMultiSelectable:xo,ariaOrientation:null,ariaOwns:Gi,ariaPlaceholder:null,ariaPosInSet:Pt,ariaPressed:xo,ariaReadOnly:xo,ariaRelevant:null,ariaRequired:xo,ariaRoleDescription:Gi,ariaRowCount:Pt,ariaRowIndex:Pt,ariaRowSpan:Pt,ariaSelected:xo,ariaSetSize:Pt,ariaSort:null,ariaValueMax:Pt,ariaValueMin:Pt,ariaValueNow:Pt,ariaValueText:null,role:null}}),fmt=lS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:gRe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:gE,acceptCharset:Gi,accessKey:Gi,action:null,allow:null,allowFullScreen:fr,allowPaymentRequest:fr,allowUserMedia:fr,alt:null,as:null,async:fr,autoCapitalize:null,autoComplete:Gi,autoFocus:fr,autoPlay:fr,blocking:Gi,capture:null,charSet:null,checked:fr,cite:null,className:Gi,cols:Pt,colSpan:null,content:null,contentEditable:xo,controls:fr,controlsList:Gi,coords:Pt|gE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fr,defer:fr,dir:null,dirName:null,disabled:fr,download:fRe,draggable:xo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fr,formTarget:null,headers:Gi,height:Pt,hidden:fr,high:Pt,href:null,hrefLang:null,htmlFor:Gi,httpEquiv:Gi,id:null,imageSizes:null,imageSrcSet:null,inert:fr,inputMode:null,integrity:null,is:null,isMap:fr,itemId:null,itemProp:Gi,itemRef:Gi,itemScope:fr,itemType:Gi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fr,low:Pt,manifest:null,max:null,maxLength:Pt,media:null,method:null,min:null,minLength:Pt,multiple:fr,muted:fr,name:null,nonce:null,noModule:fr,noValidate:fr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fr,optimum:Pt,pattern:null,ping:Gi,placeholder:null,playsInline:fr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fr,referrerPolicy:null,rel:Gi,required:fr,reversed:fr,rows:Pt,rowSpan:Pt,sandbox:Gi,scope:null,scoped:fr,seamless:fr,selected:fr,shadowRootClonable:fr,shadowRootDelegatesFocus:fr,shadowRootMode:null,shape:null,size:Pt,sizes:null,slot:null,span:Pt,spellCheck:xo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Pt,step:null,style:null,tabIndex:Pt,target:null,title:null,translate:null,type:null,typeMustMatch:fr,useMap:null,value:xo,width:Pt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Gi,axis:null,background:null,bgColor:null,border:Pt,borderColor:null,bottomMargin:Pt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fr,declare:fr,event:null,face:null,frame:null,frameBorder:null,hSpace:Pt,leftMargin:Pt,link:null,longDesc:null,lowSrc:null,marginHeight:Pt,marginWidth:Pt,noResize:fr,noHref:fr,noShade:fr,noWrap:fr,object:null,profile:null,prompt:null,rev:null,rightMargin:Pt,rules:null,scheme:null,scrolling:xo,standby:null,summary:null,text:null,topMargin:Pt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Pt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fr,disableRemotePlayback:fr,prefix:null,property:null,results:Pt,security:null,unselectable:null}}),hmt=lS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:mRe,properties:{about:kc,accentHeight:Pt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Pt,amplitude:Pt,arabicForm:null,ascent:Pt,attributeName:null,attributeType:null,azimuth:Pt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Pt,by:null,calcMode:null,capHeight:Pt,className:Gi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Pt,diffuseConstant:Pt,direction:null,display:null,dur:null,divisor:Pt,dominantBaseline:null,download:fr,dx:null,dy:null,edgeMode:null,editable:null,elevation:Pt,enableBackground:null,end:null,event:null,exponent:Pt,externalResourcesRequired:null,fill:null,fillOpacity:Pt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:gE,g2:gE,glyphName:gE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Pt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Pt,horizOriginX:Pt,horizOriginY:Pt,id:null,ideographic:Pt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Pt,k:Pt,k1:Pt,k2:Pt,k3:Pt,k4:Pt,kernelMatrix:kc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Pt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Pt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Pt,overlineThickness:Pt,paintOrder:null,panose1:null,path:null,pathLength:Pt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Gi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Pt,pointsAtY:Pt,pointsAtZ:Pt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:kc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:kc,rev:kc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:kc,requiredFeatures:kc,requiredFonts:kc,requiredFormats:kc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Pt,specularExponent:Pt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Pt,strikethroughThickness:Pt,string:null,stroke:null,strokeDashArray:kc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Pt,strokeOpacity:Pt,strokeWidth:null,style:null,surfaceScale:Pt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:kc,tabIndex:Pt,tableValues:null,target:null,targetX:Pt,targetY:Pt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:kc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Pt,underlineThickness:Pt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Pt,values:null,vAlphabetic:Pt,vMathematical:Pt,vectorEffect:null,vHanging:Pt,vIdeographic:Pt,version:null,vertAdvY:Pt,vertOriginX:Pt,vertOriginY:Pt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Pt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),pmt=/^data[-\w.:]+$/i,Ape=/-[a-z]/g,mmt=/[A-Z]/g;function Cee(e,t){const n=Fk(t);let r=t,i=pf;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&pmt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Ape,ymt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Ape.test(s)){let o=s.replace(mmt,gmt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=Eee}return new i(r,t)}function gmt(e){return"-"+e.toLowerCase()}function ymt(e){return e.charAt(1).toUpperCase()}const dL=dRe([pRe,hRe,yRe,vRe,fmt],"html"),PR=dRe([pRe,hRe,yRe,vRe,hmt],"svg"),kpe=/[#.]/g;function vmt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){kpe.lastIndex=i;const a=kpe.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const bmt=new Set(["button","menu","reset","submit"]),fG={}.hasOwnProperty;function bRe(e,t,n){const r=n&&Emt(n);function i(s,o,...a){let l=-1,u;if(s==null){u={type:"root",children:[]};const c=o;a.unshift(c)}else if(u=vmt(s,t),u.tagName=u.tagName.toLowerCase(),r&&fG.call(r,u.tagName)&&(u.tagName=r[u.tagName]),wmt(o,u.tagName)){let c;for(c in o)fG.call(o,c)&&xmt(e,u.properties,c,o[c])}else a.unshift(o);for(;++l<a.length;)hG(u.children,a[l]);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return i}function wmt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?bmt.has(e.type.toLowerCase()):!("value"in e)}function xmt(e,t,n,r){const i=Cee(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Ghe(r):i.commaSeparated?o=Vhe(r):i.commaOrSpaceSeparated?o=Ghe(Vhe(r).join(" ")):o=Ipe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?_mt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=Ipe(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function hG(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)hG(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?hG(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Ipe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||Fk(n)===Fk(t)))return!0}return n}function _mt(e){const t=[];let n;for(n in e)fG.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Emt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Cmt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Smt=bRe(dL,"div"),Tmt=bRe(PR,"g",Cmt),Dz=/\r?\n|\r/g;function Amt(e){const t=String(e),n=[];for(Dz.lastIndex=0;Dz.test(t);)n.push(Dz.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const l=(n[o-2]||0)+a-1||0;if(l>-1&&l<n[n.length-1])return l}}}const Pb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},wRe={}.hasOwnProperty,kmt=Object.prototype;function Imt(e,t){const n=t||{};return See({file:n.file||void 0,location:!1,schema:n.space==="svg"?PR:dL,verbose:n.verbose||!1},e)}function See(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},o4(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:xRe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Amt(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},o4(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},o4(e,r,n),n}default:return n=Rmt(e,t),n}}function xRe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=See(e,t[n]);r.push(i)}return r}function Rmt(e,t){const n=e.schema;e.schema=t.namespaceURI===Pb.svg?PR:dL;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;wRe.call(kmt,l)||(i[l]=a.value)}const o=(e.schema.space==="svg"?Tmt:Smt)(t.tagName,i,xRe(e,t.childNodes));if(o4(e,t,o),o.tagName==="template"){const a=t,l=a.sourceCodeLocation,u=l&&l.startTag&&K_(l.startTag),c=l&&l.endTag&&K_(l.endTag),d=See(e,a.content);u&&c&&e.file&&(d.position={start:u.end,end:c.start}),o.content=d}return e.schema=n,o}function o4(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Dmt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Dmt(e,t,n){const r=K_(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)wRe.call(n.attrs,o)&&(s[Cee(e.schema,o).property]=K_(n.attrs[o]));n.startTag;const a=K_(n.startTag),l=n.endTag?K_(n.endTag):void 0,u={opening:a};l&&(u.closing=l),u.properties=s,t.data={position:u}}}return r}function K_(e){const t=Rpe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Rpe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Rpe(e){return e.line&&e.column?e:void 0}const Dpe={}.hasOwnProperty;function _Re(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Dpe.call(i,e)){const l=String(i[e]);o=Dpe.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Pmt={},Omt={}.hasOwnProperty,ERe=_Re("type",{handlers:{root:Mmt,element:Bmt,text:Lmt,comment:jmt,doctype:Fmt}});function Nmt(e,t){const r=(t||Pmt).space;return ERe(e,r==="svg"?PR:dL)}function Mmt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Tee(e.children,n,t),uS(e,n),n}function $mt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Tee(e.children,n,t),uS(e,n),n}function Fmt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return uS(e,t),t}function Lmt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return uS(e,t),t}function jmt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return uS(e,t),t}function Bmt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=PR);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Omt.call(e.properties,s)){const l=zmt(r,s,e.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Pb[o],childNodes:[],parentNode:null};return a.childNodes=Tee(e.children,a,r),uS(e,a),e.tagName==="template"&&e.content&&(a.content=$mt(e.content,r)),a}function zmt(e,t,n){const r=Cee(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?IIe(n):FIe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Pb[r.space]}return i}function Tee(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=ERe(e[r],n);s.parentNode=t,i.push(s)}return i}function uS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Vmt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Umt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ds="";var ye;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ye=ye||(ye={}));const $u={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function CRe(e){return e>=55296&&e<=57343}function Hmt(e){return e>=56320&&e<=57343}function qmt(e,t){return(e-55296)*1024+9216+t}function SRe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function TRe(e){return e>=64976&&e<=65007||Umt.has(e)}var Je;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Je=Je||(Je={}));const Wmt=65536;class Gmt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Wmt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Hmt(n))return this.pos++,this._addGap(),qmt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ye.EOF;return this._err(Je.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ye.EOF;const r=this.html.charCodeAt(n);return r===ye.CARRIAGE_RETURN?ye.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ye.EOF;let t=this.html.charCodeAt(this.pos);return t===ye.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ye.LINE_FEED):t===ye.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,CRe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ye.LINE_FEED||t===ye.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){SRe(t)?this._err(Je.controlCharacterInInputStream):TRe(t)&&this._err(Je.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var xr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(xr=xr||(xr={}));function ARe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const cy=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Ymt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Pz;const Kmt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Xmt=(Pz=String.fromCodePoint)!==null&&Pz!==void 0?Pz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Qmt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Kmt.get(e))!==null&&t!==void 0?t:e}var fa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(fa||(fa={}));const Jmt=32;var Rp;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Rp||(Rp={}));function pG(e){return e>=fa.ZERO&&e<=fa.NINE}function Zmt(e){return e>=fa.UPPER_A&&e<=fa.UPPER_F||e>=fa.LOWER_A&&e<=fa.LOWER_F}function egt(e){return e>=fa.UPPER_A&&e<=fa.UPPER_Z||e>=fa.LOWER_A&&e<=fa.LOWER_Z||pG(e)}function tgt(e){return e===fa.EQUALS||egt(e)}var oa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(oa||(oa={}));var wb;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(wb||(wb={}));class ngt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=oa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=wb.Strict}startEntity(t){this.decodeMode=t,this.state=oa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case oa.EntityStart:return t.charCodeAt(n)===fa.NUM?(this.state=oa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=oa.NamedEntity,this.stateNamedEntity(t,n));case oa.NumericStart:return this.stateNumericStart(t,n);case oa.NumericDecimal:return this.stateNumericDecimal(t,n);case oa.NumericHex:return this.stateNumericHex(t,n);case oa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Jmt)===fa.LOWER_X?(this.state=oa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=oa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(pG(i)||Zmt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(pG(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===fa.SEMI)this.consumed+=1;else if(this.decodeMode===wb.Strict)return 0;return this.emitCodePoint(Qmt(this.result),this.consumed),this.errors&&(t!==fa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Rp.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=IRe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===wb.Attribute&&(s===0||tgt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Rp.VALUE_LENGTH)>>14,s!==0){if(o===fa.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==wb.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Rp.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Rp.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case oa.NamedEntity:return this.result!==0&&(this.decodeMode!==wb.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case oa.NumericDecimal:return this.emitNumericEntity(0,2);case oa.NumericHex:return this.emitNumericEntity(0,3);case oa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case oa.EntityStart:return 0}}}function kRe(e){let t="";const n=new ngt(e,r=>t+=Xmt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function IRe(e,t,n,r){const i=(t&Rp.BRANCH_LENGTH)>>7,s=t&Rp.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}kRe(cy);kRe(Ymt);var lt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(lt=lt||(lt={}));var Qy;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Qy=Qy||(Qy={}));var Dc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Dc=Dc||(Dc={}));var Ke;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ke=Ke||(Ke={}));var W;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(W=W||(W={}));const rgt=new Map([[Ke.A,W.A],[Ke.ADDRESS,W.ADDRESS],[Ke.ANNOTATION_XML,W.ANNOTATION_XML],[Ke.APPLET,W.APPLET],[Ke.AREA,W.AREA],[Ke.ARTICLE,W.ARTICLE],[Ke.ASIDE,W.ASIDE],[Ke.B,W.B],[Ke.BASE,W.BASE],[Ke.BASEFONT,W.BASEFONT],[Ke.BGSOUND,W.BGSOUND],[Ke.BIG,W.BIG],[Ke.BLOCKQUOTE,W.BLOCKQUOTE],[Ke.BODY,W.BODY],[Ke.BR,W.BR],[Ke.BUTTON,W.BUTTON],[Ke.CAPTION,W.CAPTION],[Ke.CENTER,W.CENTER],[Ke.CODE,W.CODE],[Ke.COL,W.COL],[Ke.COLGROUP,W.COLGROUP],[Ke.DD,W.DD],[Ke.DESC,W.DESC],[Ke.DETAILS,W.DETAILS],[Ke.DIALOG,W.DIALOG],[Ke.DIR,W.DIR],[Ke.DIV,W.DIV],[Ke.DL,W.DL],[Ke.DT,W.DT],[Ke.EM,W.EM],[Ke.EMBED,W.EMBED],[Ke.FIELDSET,W.FIELDSET],[Ke.FIGCAPTION,W.FIGCAPTION],[Ke.FIGURE,W.FIGURE],[Ke.FONT,W.FONT],[Ke.FOOTER,W.FOOTER],[Ke.FOREIGN_OBJECT,W.FOREIGN_OBJECT],[Ke.FORM,W.FORM],[Ke.FRAME,W.FRAME],[Ke.FRAMESET,W.FRAMESET],[Ke.H1,W.H1],[Ke.H2,W.H2],[Ke.H3,W.H3],[Ke.H4,W.H4],[Ke.H5,W.H5],[Ke.H6,W.H6],[Ke.HEAD,W.HEAD],[Ke.HEADER,W.HEADER],[Ke.HGROUP,W.HGROUP],[Ke.HR,W.HR],[Ke.HTML,W.HTML],[Ke.I,W.I],[Ke.IMG,W.IMG],[Ke.IMAGE,W.IMAGE],[Ke.INPUT,W.INPUT],[Ke.IFRAME,W.IFRAME],[Ke.KEYGEN,W.KEYGEN],[Ke.LABEL,W.LABEL],[Ke.LI,W.LI],[Ke.LINK,W.LINK],[Ke.LISTING,W.LISTING],[Ke.MAIN,W.MAIN],[Ke.MALIGNMARK,W.MALIGNMARK],[Ke.MARQUEE,W.MARQUEE],[Ke.MATH,W.MATH],[Ke.MENU,W.MENU],[Ke.META,W.META],[Ke.MGLYPH,W.MGLYPH],[Ke.MI,W.MI],[Ke.MO,W.MO],[Ke.MN,W.MN],[Ke.MS,W.MS],[Ke.MTEXT,W.MTEXT],[Ke.NAV,W.NAV],[Ke.NOBR,W.NOBR],[Ke.NOFRAMES,W.NOFRAMES],[Ke.NOEMBED,W.NOEMBED],[Ke.NOSCRIPT,W.NOSCRIPT],[Ke.OBJECT,W.OBJECT],[Ke.OL,W.OL],[Ke.OPTGROUP,W.OPTGROUP],[Ke.OPTION,W.OPTION],[Ke.P,W.P],[Ke.PARAM,W.PARAM],[Ke.PLAINTEXT,W.PLAINTEXT],[Ke.PRE,W.PRE],[Ke.RB,W.RB],[Ke.RP,W.RP],[Ke.RT,W.RT],[Ke.RTC,W.RTC],[Ke.RUBY,W.RUBY],[Ke.S,W.S],[Ke.SCRIPT,W.SCRIPT],[Ke.SECTION,W.SECTION],[Ke.SELECT,W.SELECT],[Ke.SOURCE,W.SOURCE],[Ke.SMALL,W.SMALL],[Ke.SPAN,W.SPAN],[Ke.STRIKE,W.STRIKE],[Ke.STRONG,W.STRONG],[Ke.STYLE,W.STYLE],[Ke.SUB,W.SUB],[Ke.SUMMARY,W.SUMMARY],[Ke.SUP,W.SUP],[Ke.TABLE,W.TABLE],[Ke.TBODY,W.TBODY],[Ke.TEMPLATE,W.TEMPLATE],[Ke.TEXTAREA,W.TEXTAREA],[Ke.TFOOT,W.TFOOT],[Ke.TD,W.TD],[Ke.TH,W.TH],[Ke.THEAD,W.THEAD],[Ke.TITLE,W.TITLE],[Ke.TR,W.TR],[Ke.TRACK,W.TRACK],[Ke.TT,W.TT],[Ke.U,W.U],[Ke.UL,W.UL],[Ke.SVG,W.SVG],[Ke.VAR,W.VAR],[Ke.WBR,W.WBR],[Ke.XMP,W.XMP]]);function cS(e){var t;return(t=rgt.get(e))!==null&&t!==void 0?t:W.UNKNOWN}const Ct=W,igt={[lt.HTML]:new Set([Ct.ADDRESS,Ct.APPLET,Ct.AREA,Ct.ARTICLE,Ct.ASIDE,Ct.BASE,Ct.BASEFONT,Ct.BGSOUND,Ct.BLOCKQUOTE,Ct.BODY,Ct.BR,Ct.BUTTON,Ct.CAPTION,Ct.CENTER,Ct.COL,Ct.COLGROUP,Ct.DD,Ct.DETAILS,Ct.DIR,Ct.DIV,Ct.DL,Ct.DT,Ct.EMBED,Ct.FIELDSET,Ct.FIGCAPTION,Ct.FIGURE,Ct.FOOTER,Ct.FORM,Ct.FRAME,Ct.FRAMESET,Ct.H1,Ct.H2,Ct.H3,Ct.H4,Ct.H5,Ct.H6,Ct.HEAD,Ct.HEADER,Ct.HGROUP,Ct.HR,Ct.HTML,Ct.IFRAME,Ct.IMG,Ct.INPUT,Ct.LI,Ct.LINK,Ct.LISTING,Ct.MAIN,Ct.MARQUEE,Ct.MENU,Ct.META,Ct.NAV,Ct.NOEMBED,Ct.NOFRAMES,Ct.NOSCRIPT,Ct.OBJECT,Ct.OL,Ct.P,Ct.PARAM,Ct.PLAINTEXT,Ct.PRE,Ct.SCRIPT,Ct.SECTION,Ct.SELECT,Ct.SOURCE,Ct.STYLE,Ct.SUMMARY,Ct.TABLE,Ct.TBODY,Ct.TD,Ct.TEMPLATE,Ct.TEXTAREA,Ct.TFOOT,Ct.TH,Ct.THEAD,Ct.TITLE,Ct.TR,Ct.TRACK,Ct.UL,Ct.WBR,Ct.XMP]),[lt.MATHML]:new Set([Ct.MI,Ct.MO,Ct.MN,Ct.MS,Ct.MTEXT,Ct.ANNOTATION_XML]),[lt.SVG]:new Set([Ct.TITLE,Ct.FOREIGN_OBJECT,Ct.DESC]),[lt.XLINK]:new Set,[lt.XML]:new Set,[lt.XMLNS]:new Set};function RRe(e){return e===Ct.H1||e===Ct.H2||e===Ct.H3||e===Ct.H4||e===Ct.H5||e===Ct.H6}Ke.STYLE,Ke.SCRIPT,Ke.XMP,Ke.IFRAME,Ke.NOEMBED,Ke.NOFRAMES,Ke.PLAINTEXT;const sgt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Ee;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Ee||(Ee={}));const ro={DATA:Ee.DATA,RCDATA:Ee.RCDATA,RAWTEXT:Ee.RAWTEXT,SCRIPT_DATA:Ee.SCRIPT_DATA,PLAINTEXT:Ee.PLAINTEXT,CDATA_SECTION:Ee.CDATA_SECTION};function BA(e){return e>=ye.DIGIT_0&&e<=ye.DIGIT_9}function W2(e){return e>=ye.LATIN_CAPITAL_A&&e<=ye.LATIN_CAPITAL_Z}function ogt(e){return e>=ye.LATIN_SMALL_A&&e<=ye.LATIN_SMALL_Z}function dy(e){return ogt(e)||W2(e)}function mG(e){return dy(e)||BA(e)}function DRe(e){return e>=ye.LATIN_CAPITAL_A&&e<=ye.LATIN_CAPITAL_F}function PRe(e){return e>=ye.LATIN_SMALL_A&&e<=ye.LATIN_SMALL_F}function agt(e){return BA(e)||DRe(e)||PRe(e)}function k3(e){return e+32}function ORe(e){return e===ye.SPACE||e===ye.LINE_FEED||e===ye.TABULATION||e===ye.FORM_FEED}function lgt(e){return e===ye.EQUALS_SIGN||mG(e)}function Ppe(e){return ORe(e)||e===ye.SOLIDUS||e===ye.GREATER_THAN_SIGN}class ugt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Ee.DATA,this.returnState=Ee.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Gmt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t?.())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:xr.START_TAG,tagName:"",tagID:W.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:xr.END_TAG,tagName:"",tagID:W.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:xr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:xr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(ARe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Je.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=cS(t.tagName),t.type===xr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Je.endTagWithAttributes),t.selfClosing&&this._err(Je.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case xr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case xr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case xr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:xr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=ORe(t)?xr.WHITESPACE_CHARACTER:t===ye.NULL?xr.NULL_CHARACTER:xr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(xr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=cy[0];s>=0&&(s=IRe(cy,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=cy[s];const a=o&Rp.VALUE_LENGTH;if(a){const l=(a>>14)-1;if(t!==ye.SEMICOLON&&this._isCharacterReferenceInAttribute()&&lgt(this.preprocessor.peek(1))?(n=[ye.AMPERSAND],s+=l):(n=l===0?[cy[s]&~Rp.VALUE_LENGTH]:l===1?[cy[++s]]:[cy[++s],cy[++s]],r=0,i=t!==ye.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Je.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Ee.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Ee.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Ee.DATA:{this._stateData(t);break}case Ee.RCDATA:{this._stateRcdata(t);break}case Ee.RAWTEXT:{this._stateRawtext(t);break}case Ee.SCRIPT_DATA:{this._stateScriptData(t);break}case Ee.PLAINTEXT:{this._statePlaintext(t);break}case Ee.TAG_OPEN:{this._stateTagOpen(t);break}case Ee.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Ee.TAG_NAME:{this._stateTagName(t);break}case Ee.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Ee.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Ee.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Ee.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Ee.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Ee.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Ee.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Ee.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Ee.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Ee.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Ee.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Ee.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Ee.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Ee.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Ee.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Ee.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Ee.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Ee.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Ee.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Ee.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Ee.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Ee.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Ee.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Ee.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Ee.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Ee.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Ee.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Ee.COMMENT_START:{this._stateCommentStart(t);break}case Ee.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Ee.COMMENT:{this._stateComment(t);break}case Ee.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Ee.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Ee.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Ee.COMMENT_END:{this._stateCommentEnd(t);break}case Ee.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Ee.DOCTYPE:{this._stateDoctype(t);break}case Ee.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Ee.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Ee.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Ee.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Ee.CDATA_SECTION:{this._stateCdataSection(t);break}case Ee.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Ee.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Ee.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Ee.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Ee.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Ee.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Ee.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Ee.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Ee.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Ee.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ye.LESS_THAN_SIGN:{this.state=Ee.TAG_OPEN;break}case ye.AMPERSAND:{this.returnState=Ee.DATA,this.state=Ee.CHARACTER_REFERENCE;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._emitCodePoint(t);break}case ye.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ye.AMPERSAND:{this.returnState=Ee.RCDATA,this.state=Ee.CHARACTER_REFERENCE;break}case ye.LESS_THAN_SIGN:{this.state=Ee.RCDATA_LESS_THAN_SIGN;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(ds);break}case ye.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ye.LESS_THAN_SIGN:{this.state=Ee.RAWTEXT_LESS_THAN_SIGN;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(ds);break}case ye.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ye.LESS_THAN_SIGN:{this.state=Ee.SCRIPT_DATA_LESS_THAN_SIGN;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(ds);break}case ye.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(ds);break}case ye.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(dy(t))this._createStartTagToken(),this.state=Ee.TAG_NAME,this._stateTagName(t);else switch(t){case ye.EXCLAMATION_MARK:{this.state=Ee.MARKUP_DECLARATION_OPEN;break}case ye.SOLIDUS:{this.state=Ee.END_TAG_OPEN;break}case ye.QUESTION_MARK:{this._err(Je.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Ee.BOGUS_COMMENT,this._stateBogusComment(t);break}case ye.EOF:{this._err(Je.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Je.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Ee.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(dy(t))this._createEndTagToken(),this.state=Ee.TAG_NAME,this._stateTagName(t);else switch(t){case ye.GREATER_THAN_SIGN:{this._err(Je.missingEndTagName),this.state=Ee.DATA;break}case ye.EOF:{this._err(Je.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Je.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Ee.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this.state=Ee.BEFORE_ATTRIBUTE_NAME;break}case ye.SOLIDUS:{this.state=Ee.SELF_CLOSING_START_TAG;break}case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA,this.emitCurrentTagToken();break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.tagName+=ds;break}case ye.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(W2(t)?k3(t):t)}}_stateRcdataLessThanSign(t){t===ye.SOLIDUS?this.state=Ee.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Ee.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){dy(t)?(this.state=Ee.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Ee.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Ee.BEFORE_ATTRIBUTE_NAME,!1;case ye.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Ee.SELF_CLOSING_START_TAG,!1;case ye.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Ee.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Ee.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ye.SOLIDUS?this.state=Ee.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){dy(t)?(this.state=Ee.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Ee.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Ee.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ye.SOLIDUS:{this.state=Ee.SCRIPT_DATA_END_TAG_OPEN;break}case ye.EXCLAMATION_MARK:{this.state=Ee.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Ee.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){dy(t)?(this.state=Ee.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ye.HYPHEN_MINUS?(this.state=Ee.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ye.HYPHEN_MINUS?(this.state=Ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Ee.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ye.LESS_THAN_SIGN:{this.state=Ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(ds);break}case ye.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ye.LESS_THAN_SIGN:{this.state=Ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.state=Ee.SCRIPT_DATA_ESCAPED,this._emitChars(ds);break}case ye.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ye.HYPHEN_MINUS:{this._emitChars("-");break}case ye.LESS_THAN_SIGN:{this.state=Ee.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ye.GREATER_THAN_SIGN:{this.state=Ee.SCRIPT_DATA,this._emitChars(">");break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.state=Ee.SCRIPT_DATA_ESCAPED,this._emitChars(ds);break}case ye.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ee.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ye.SOLIDUS?this.state=Ee.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:dy(t)?(this._emitChars("<"),this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){dy(t)?(this.state=Ee.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith($u.SCRIPT,!1)&&Ppe(this.preprocessor.peek($u.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<$u.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Ee.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ye.LESS_THAN_SIGN:{this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._emitChars(ds);break}case ye.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ye.LESS_THAN_SIGN:{this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ds);break}case ye.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ye.HYPHEN_MINUS:{this._emitChars("-");break}case ye.LESS_THAN_SIGN:{this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ye.GREATER_THAN_SIGN:{this.state=Ee.SCRIPT_DATA,this._emitChars(">");break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ds);break}case ye.EOF:{this._err(Je.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ye.SOLIDUS?(this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith($u.SCRIPT,!1)&&Ppe(this.preprocessor.peek($u.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<$u.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Ee.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Ee.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.SOLIDUS:case ye.GREATER_THAN_SIGN:case ye.EOF:{this.state=Ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ye.EQUALS_SIGN:{this._err(Je.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Ee.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:case ye.SOLIDUS:case ye.GREATER_THAN_SIGN:case ye.EOF:{this._leaveAttrName(),this.state=Ee.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ye.EQUALS_SIGN:{this._leaveAttrName(),this.state=Ee.BEFORE_ATTRIBUTE_VALUE;break}case ye.QUOTATION_MARK:case ye.APOSTROPHE:case ye.LESS_THAN_SIGN:{this._err(Je.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.name+=ds;break}default:this.currentAttr.name+=String.fromCodePoint(W2(t)?k3(t):t)}}_stateAfterAttributeName(t){switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.SOLIDUS:{this.state=Ee.SELF_CLOSING_START_TAG;break}case ye.EQUALS_SIGN:{this.state=Ee.BEFORE_ATTRIBUTE_VALUE;break}case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA,this.emitCurrentTagToken();break}case ye.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Ee.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.QUOTATION_MARK:{this.state=Ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ye.APOSTROPHE:{this.state=Ee.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ye.GREATER_THAN_SIGN:{this._err(Je.missingAttributeValue),this.state=Ee.DATA,this.emitCurrentTagToken();break}default:this.state=Ee.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ye.QUOTATION_MARK:{this.state=Ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ye.AMPERSAND:{this.returnState=Ee.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Ee.CHARACTER_REFERENCE;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=ds;break}case ye.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ye.APOSTROPHE:{this.state=Ee.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ye.AMPERSAND:{this.returnState=Ee.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Ee.CHARACTER_REFERENCE;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=ds;break}case ye.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this._leaveAttrValue(),this.state=Ee.BEFORE_ATTRIBUTE_NAME;break}case ye.AMPERSAND:{this.returnState=Ee.ATTRIBUTE_VALUE_UNQUOTED,this.state=Ee.CHARACTER_REFERENCE;break}case ye.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Ee.DATA,this.emitCurrentTagToken();break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),this.currentAttr.value+=ds;break}case ye.QUOTATION_MARK:case ye.APOSTROPHE:case ye.LESS_THAN_SIGN:case ye.EQUALS_SIGN:case ye.GRAVE_ACCENT:{this._err(Je.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ye.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this._leaveAttrValue(),this.state=Ee.BEFORE_ATTRIBUTE_NAME;break}case ye.SOLIDUS:{this._leaveAttrValue(),this.state=Ee.SELF_CLOSING_START_TAG;break}case ye.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Ee.DATA,this.emitCurrentTagToken();break}case ye.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._err(Je.missingWhitespaceBetweenAttributes),this.state=Ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ye.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Ee.DATA,this.emitCurrentTagToken();break}case ye.EOF:{this._err(Je.eofInTag),this._emitEOFToken();break}default:this._err(Je.unexpectedSolidusInTag),this.state=Ee.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA,this.emitCurrentComment(n);break}case ye.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.data+=ds;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch($u.DASH_DASH,!0)?(this._createCommentToken($u.DASH_DASH.length+1),this.state=Ee.COMMENT_START):this._consumeSequenceIfMatch($u.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation($u.DOCTYPE.length+1),this.state=Ee.DOCTYPE):this._consumeSequenceIfMatch($u.CDATA_START,!0)?this.inForeignNode?this.state=Ee.CDATA_SECTION:(this._err(Je.cdataInHtmlContent),this._createCommentToken($u.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Ee.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Je.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Ee.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.COMMENT_START_DASH;break}case ye.GREATER_THAN_SIGN:{this._err(Je.abruptClosingOfEmptyComment),this.state=Ee.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Ee.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.COMMENT_END;break}case ye.GREATER_THAN_SIGN:{this._err(Je.abruptClosingOfEmptyComment),this.state=Ee.DATA,this.emitCurrentComment(n);break}case ye.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Ee.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.COMMENT_END_DASH;break}case ye.LESS_THAN_SIGN:{n.data+="<",this.state=Ee.COMMENT_LESS_THAN_SIGN;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.data+=ds;break}case ye.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ye.EXCLAMATION_MARK:{n.data+="!",this.state=Ee.COMMENT_LESS_THAN_SIGN_BANG;break}case ye.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Ee.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ye.HYPHEN_MINUS?this.state=Ee.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Ee.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ye.HYPHEN_MINUS?this.state=Ee.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Ee.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ye.GREATER_THAN_SIGN&&t!==ye.EOF&&this._err(Je.nestedComment),this.state=Ee.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ye.HYPHEN_MINUS:{this.state=Ee.COMMENT_END;break}case ye.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Ee.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA,this.emitCurrentComment(n);break}case ye.EXCLAMATION_MARK:{this.state=Ee.COMMENT_END_BANG;break}case ye.HYPHEN_MINUS:{n.data+="-";break}case ye.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Ee.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ye.HYPHEN_MINUS:{n.data+="--!",this.state=Ee.COMMENT_END_DASH;break}case ye.GREATER_THAN_SIGN:{this._err(Je.incorrectlyClosedComment),this.state=Ee.DATA,this.emitCurrentComment(n);break}case ye.EOF:{this._err(Je.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Ee.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this.state=Ee.BEFORE_DOCTYPE_NAME;break}case ye.GREATER_THAN_SIGN:{this.state=Ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ye.EOF:{this._err(Je.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingWhitespaceBeforeDoctypeName),this.state=Ee.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(W2(t))this._createDoctypeToken(String.fromCharCode(k3(t))),this.state=Ee.DOCTYPE_NAME;else switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.NULL:{this._err(Je.unexpectedNullCharacter),this._createDoctypeToken(ds),this.state=Ee.DOCTYPE_NAME;break}case ye.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.EOF:{this._err(Je.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Ee.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this.state=Ee.AFTER_DOCTYPE_NAME;break}case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA,this.emitCurrentDoctype(n);break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.name+=ds;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(W2(t)?k3(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA,this.emitCurrentDoctype(n);break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch($u.PUBLIC,!1)?this.state=Ee.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch($u.SYSTEM,!1)?this.state=Ee.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Je.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this.state=Ee.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ye.QUOTATION_MARK:{this._err(Je.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ye.APOSTROPHE:{this._err(Je.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ye.GREATER_THAN_SIGN:{this._err(Je.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ee.DATA,this.emitCurrentDoctype(n);break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.QUOTATION_MARK:{n.publicId="",this.state=Ee.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ye.APOSTROPHE:{n.publicId="",this.state=Ee.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ye.GREATER_THAN_SIGN:{this._err(Je.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ee.DATA,this.emitCurrentDoctype(n);break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ye.QUOTATION_MARK:{this.state=Ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.publicId+=ds;break}case ye.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ye.APOSTROPHE:{this.state=Ee.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.publicId+=ds;break}case ye.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this.state=Ee.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA,this.emitCurrentDoctype(n);break}case ye.QUOTATION_MARK:{this._err(Je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ye.APOSTROPHE:{this._err(Je.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.QUOTATION_MARK:{n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ye.APOSTROPHE:{n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:{this.state=Ee.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ye.QUOTATION_MARK:{this._err(Je.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ye.APOSTROPHE:{this._err(Je.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ye.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ee.DATA,this.emitCurrentDoctype(n);break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.QUOTATION_MARK:{n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ye.APOSTROPHE:{n.systemId="",this.state=Ee.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ye.GREATER_THAN_SIGN:{this._err(Je.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ee.DATA,this.emitCurrentDoctype(n);break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ye.QUOTATION_MARK:{this.state=Ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.systemId+=ds;break}case ye.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ye.APOSTROPHE:{this.state=Ee.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter),n.systemId+=ds;break}case ye.GREATER_THAN_SIGN:{this._err(Je.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ye.SPACE:case ye.LINE_FEED:case ye.TABULATION:case ye.FORM_FEED:break;case ye.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.EOF:{this._err(Je.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Je.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Ee.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ye.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Ee.DATA;break}case ye.NULL:{this._err(Je.unexpectedNullCharacter);break}case ye.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ye.RIGHT_SQUARE_BRACKET:{this.state=Ee.CDATA_SECTION_BRACKET;break}case ye.EOF:{this._err(Je.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ye.RIGHT_SQUARE_BRACKET?this.state=Ee.CDATA_SECTION_END:(this._emitChars("]"),this.state=Ee.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ye.GREATER_THAN_SIGN:{this.state=Ee.DATA;break}case ye.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Ee.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ye.NUMBER_SIGN?this.state=Ee.NUMERIC_CHARACTER_REFERENCE:mG(t)?(this.state=Ee.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ye.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ye.AMPERSAND),this.state=Ee.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){mG(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ye.SEMICOLON&&this._err(Je.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ye.LATIN_SMALL_X||t===ye.LATIN_CAPITAL_X?this.state=Ee.HEXADEMICAL_CHARACTER_REFERENCE_START:BA(t)?(this.state=Ee.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Je.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ye.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ye.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){agt(t)?(this.state=Ee.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Je.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ye.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ye.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){DRe(t)?this.charRefCode=this.charRefCode*16+t-55:PRe(t)?this.charRefCode=this.charRefCode*16+t-87:BA(t)?this.charRefCode=this.charRefCode*16+t-48:t===ye.SEMICOLON?this.state=Ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Je.missingSemicolonAfterCharacterReference),this.state=Ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){BA(t)?this.charRefCode=this.charRefCode*10+t-48:t===ye.SEMICOLON?this.state=Ee.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Je.missingSemicolonAfterCharacterReference),this.state=Ee.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ye.NULL)this._err(Je.nullCharacterReference),this.charRefCode=ye.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Je.characterReferenceOutsideUnicodeRange),this.charRefCode=ye.REPLACEMENT_CHARACTER;else if(CRe(this.charRefCode))this._err(Je.surrogateCharacterReference),this.charRefCode=ye.REPLACEMENT_CHARACTER;else if(TRe(this.charRefCode))this._err(Je.noncharacterCharacterReference);else if(SRe(this.charRefCode)||this.charRefCode===ye.CARRIAGE_RETURN){this._err(Je.controlCharacterReference);const n=sgt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const NRe=new Set([W.DD,W.DT,W.LI,W.OPTGROUP,W.OPTION,W.P,W.RB,W.RP,W.RT,W.RTC]),Ope=new Set([...NRe,W.CAPTION,W.COLGROUP,W.TBODY,W.TD,W.TFOOT,W.TH,W.THEAD,W.TR]),I3=new Map([[W.APPLET,lt.HTML],[W.CAPTION,lt.HTML],[W.HTML,lt.HTML],[W.MARQUEE,lt.HTML],[W.OBJECT,lt.HTML],[W.TABLE,lt.HTML],[W.TD,lt.HTML],[W.TEMPLATE,lt.HTML],[W.TH,lt.HTML],[W.ANNOTATION_XML,lt.MATHML],[W.MI,lt.MATHML],[W.MN,lt.MATHML],[W.MO,lt.MATHML],[W.MS,lt.MATHML],[W.MTEXT,lt.MATHML],[W.DESC,lt.SVG],[W.FOREIGN_OBJECT,lt.SVG],[W.TITLE,lt.SVG]]),cgt=[W.H1,W.H2,W.H3,W.H4,W.H5,W.H6],dgt=[W.TR,W.TEMPLATE,W.HTML],fgt=[W.TBODY,W.TFOOT,W.THEAD,W.TEMPLATE,W.HTML],hgt=[W.TABLE,W.TEMPLATE,W.HTML],pgt=[W.TD,W.TH];class mgt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=W.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===W.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===lt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==lt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(cgt,lt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(pgt,lt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(hgt,lt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(fgt,lt.HTML)}clearBackToTableRowContext(){this.clearBackTo(dgt,lt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===W.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===W.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===lt.HTML)return!0;if(I3.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(RRe(n)&&r===lt.HTML)return!0;if(I3.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===lt.HTML)return!0;if((r===W.UL||r===W.OL)&&i===lt.HTML||I3.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===lt.HTML)return!0;if(r===W.BUTTON&&i===lt.HTML||I3.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML){if(r===t)return!0;if(r===W.TABLE||r===W.TEMPLATE||r===W.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===lt.HTML){if(n===W.TBODY||n===W.THEAD||n===W.TFOOT)return!0;if(n===W.TABLE||n===W.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===lt.HTML){if(r===t)return!0;if(r!==W.OPTION&&r!==W.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;NRe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Ope.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Ope.has(this.currentTagId);)this.pop()}}const Oz=3;var jf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(jf=jf||(jf={}));const Npe={type:jf.Marker};class ggt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===jf.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===o){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Oz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Oz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=Oz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Npe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:jf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:jf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Npe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===jf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===jf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===jf.Element&&n.element===t)}}function Mpe(e){return{nodeName:"#text",value:e,parentNode:null}}const j_={createDocument(){return{nodeName:"#document",mode:Dc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};j_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(j_.isTextNode(n)){n.value+=t;return}}j_.appendChild(e,Mpe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&j_.isTextNode(r)?r.value+=t:j_.insertBefore(e,Mpe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},MRe="html",ygt="about:legacy-compat",vgt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",$Re=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],bgt=[...$Re,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],wgt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),FRe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],xgt=[...FRe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function $pe(e,t){return t.some(n=>e.startsWith(n))}function _gt(e){return e.name===MRe&&e.publicId===null&&(e.systemId===null||e.systemId===ygt)}function Egt(e){if(e.name!==MRe)return Dc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===vgt)return Dc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),wgt.has(n))return Dc.QUIRKS;let r=t===null?bgt:$Re;if($pe(n,r))return Dc.QUIRKS;if(r=t===null?FRe:xgt,$pe(n,r))return Dc.LIMITED_QUIRKS}return Dc.NO_QUIRKS}const Fpe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Cgt="definitionurl",Sgt="definitionURL",Tgt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Agt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:lt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:lt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:lt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:lt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:lt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:lt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:lt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:lt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:lt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:lt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:lt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:lt.XMLNS}]]),kgt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Igt=new Set([W.B,W.BIG,W.BLOCKQUOTE,W.BODY,W.BR,W.CENTER,W.CODE,W.DD,W.DIV,W.DL,W.DT,W.EM,W.EMBED,W.H1,W.H2,W.H3,W.H4,W.H5,W.H6,W.HEAD,W.HR,W.I,W.IMG,W.LI,W.LISTING,W.MENU,W.META,W.NOBR,W.OL,W.P,W.PRE,W.RUBY,W.S,W.SMALL,W.SPAN,W.STRONG,W.STRIKE,W.SUB,W.SUP,W.TABLE,W.TT,W.U,W.UL,W.VAR]);function Rgt(e){const t=e.tagID;return t===W.FONT&&e.attrs.some(({name:r})=>r===Qy.COLOR||r===Qy.SIZE||r===Qy.FACE)||Igt.has(t)}function LRe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Cgt){e.attrs[t].name=Sgt;break}}function jRe(e){for(let t=0;t<e.attrs.length;t++){const n=Tgt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function Aee(e){for(let t=0;t<e.attrs.length;t++){const n=Agt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Dgt(e){const t=kgt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=cS(e.tagName))}function Pgt(e,t){return t===lt.MATHML&&(e===W.MI||e===W.MO||e===W.MN||e===W.MS||e===W.MTEXT)}function Ogt(e,t,n){if(t===lt.MATHML&&e===W.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Qy.ENCODING){const i=n[r].value.toLowerCase();return i===Fpe.TEXT_HTML||i===Fpe.APPLICATION_XML}}return t===lt.SVG&&(e===W.FOREIGN_OBJECT||e===W.DESC||e===W.TITLE)}function Ngt(e,t,n,r){return(!r||r===lt.HTML)&&Ogt(e,t,n)||(!r||r===lt.MATHML)&&Pgt(e,t)}const Mgt="hidden",$gt=8,Fgt=3;var Pe;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Pe||(Pe={}));const Lgt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},BRe=new Set([W.TABLE,W.TBODY,W.TFOOT,W.THEAD,W.TR]),Lpe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:j_,onParseError:null};let jpe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Pe.INITIAL,this.originalInsertionMode=Pe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Lpe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new ugt(this.options,this),this.activeFormattingElements=new ggt(this.treeAdapter),this.fragmentContextID=r?cS(this.treeAdapter.getTagName(r)):W.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new mgt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Lpe,...n};t??(t=r.treeAdapter.createElement(Ke.TEMPLATE,lt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",lt.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===W.TEMPLATE&&s.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Lgt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===lt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,lt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Pe.TEXT}switchToPlaintextParsing(){this.insertionMode=Pe.TEXT,this.originalInsertionMode=Pe.IN_BODY,this.tokenizer.state=ro.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ke.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==lt.HTML))switch(this.fragmentContextID){case W.TITLE:case W.TEXTAREA:{this.tokenizer.state=ro.RCDATA;break}case W.STYLE:case W.XMP:case W.IFRAME:case W.NOEMBED:case W.NOFRAMES:case W.NOSCRIPT:{this.tokenizer.state=ro.RAWTEXT;break}case W.SCRIPT:{this.tokenizer.state=ro.SCRIPT_DATA;break}case W.PLAINTEXT:{this.tokenizer.state=ro.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,lt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,lt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ke.HTML,lt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,W.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:u,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===xr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===W.SVG&&this.treeAdapter.getTagName(n)===Ke.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===lt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===W.MGLYPH||t.tagID===W.MALIGNMARK)&&!this._isIntegrationPoint(r,n,lt.HTML)}_processToken(t){switch(t.type){case xr.CHARACTER:{this.onCharacter(t);break}case xr.NULL_CHARACTER:{this.onNullCharacter(t);break}case xr.COMMENT:{this.onComment(t);break}case xr.DOCTYPE:{this.onDoctype(t);break}case xr.START_TAG:{this._processStartTag(t);break}case xr.END_TAG:{this.onEndTag(t);break}case xr.EOF:{this.onEof(t);break}case xr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Ngt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===jf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Pe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(W.P),this.openElements.popUntilTagNamePopped(W.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case W.TR:{this.insertionMode=Pe.IN_ROW;return}case W.TBODY:case W.THEAD:case W.TFOOT:{this.insertionMode=Pe.IN_TABLE_BODY;return}case W.CAPTION:{this.insertionMode=Pe.IN_CAPTION;return}case W.COLGROUP:{this.insertionMode=Pe.IN_COLUMN_GROUP;return}case W.TABLE:{this.insertionMode=Pe.IN_TABLE;return}case W.BODY:{this.insertionMode=Pe.IN_BODY;return}case W.FRAMESET:{this.insertionMode=Pe.IN_FRAMESET;return}case W.SELECT:{this._resetInsertionModeForSelect(t);return}case W.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case W.HTML:{this.insertionMode=this.headElement?Pe.AFTER_HEAD:Pe.BEFORE_HEAD;return}case W.TD:case W.TH:{if(t>0){this.insertionMode=Pe.IN_CELL;return}break}case W.HEAD:{if(t>0){this.insertionMode=Pe.IN_HEAD;return}break}}this.insertionMode=Pe.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===W.TEMPLATE)break;if(r===W.TABLE){this.insertionMode=Pe.IN_SELECT_IN_TABLE;return}}this.insertionMode=Pe.IN_SELECT}_isElementCausesFosterParenting(t){return BRe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case W.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===lt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case W.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return igt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){pyt(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{QT(this,t);break}case Pe.BEFORE_HTML:{zA(this,t);break}case Pe.BEFORE_HEAD:{VA(this,t);break}case Pe.IN_HEAD:{UA(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{HA(this,t);break}case Pe.AFTER_HEAD:{qA(this,t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:{VRe(this,t);break}case Pe.TEXT:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{Nz(this,t);break}case Pe.IN_TABLE_TEXT:{YRe(this,t);break}case Pe.IN_COLUMN_GROUP:{b6(this,t);break}case Pe.AFTER_BODY:{w6(this,t);break}case Pe.AFTER_AFTER_BODY:{a4(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){hyt(this,t);return}switch(this.insertionMode){case Pe.INITIAL:{QT(this,t);break}case Pe.BEFORE_HTML:{zA(this,t);break}case Pe.BEFORE_HEAD:{VA(this,t);break}case Pe.IN_HEAD:{UA(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{HA(this,t);break}case Pe.AFTER_HEAD:{qA(this,t);break}case Pe.TEXT:{this._insertCharacters(t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{Nz(this,t);break}case Pe.IN_COLUMN_GROUP:{b6(this,t);break}case Pe.AFTER_BODY:{w6(this,t);break}case Pe.AFTER_AFTER_BODY:{a4(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){gG(this,t);return}switch(this.insertionMode){case Pe.INITIAL:case Pe.BEFORE_HTML:case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_TEMPLATE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{gG(this,t);break}case Pe.IN_TABLE_TEXT:{JT(this,t);break}case Pe.AFTER_BODY:{qgt(this,t);break}case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{Wgt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Pe.INITIAL:{Ggt(this,t);break}case Pe.BEFORE_HEAD:case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:{this._err(t,Je.misplacedDoctype);break}case Pe.IN_TABLE_TEXT:{JT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Je.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?myt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{QT(this,t);break}case Pe.BEFORE_HTML:{Ygt(this,t);break}case Pe.BEFORE_HEAD:{Xgt(this,t);break}case Pe.IN_HEAD:{Ih(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{Zgt(this,t);break}case Pe.AFTER_HEAD:{t0t(this,t);break}case Pe.IN_BODY:{Ll(this,t);break}case Pe.IN_TABLE:{JE(this,t);break}case Pe.IN_TABLE_TEXT:{JT(this,t);break}case Pe.IN_CAPTION:{Q0t(this,t);break}case Pe.IN_COLUMN_GROUP:{Ree(this,t);break}case Pe.IN_TABLE_BODY:{pL(this,t);break}case Pe.IN_ROW:{mL(this,t);break}case Pe.IN_CELL:{eyt(this,t);break}case Pe.IN_SELECT:{QRe(this,t);break}case Pe.IN_SELECT_IN_TABLE:{nyt(this,t);break}case Pe.IN_TEMPLATE:{iyt(this,t);break}case Pe.AFTER_BODY:{oyt(this,t);break}case Pe.IN_FRAMESET:{ayt(this,t);break}case Pe.AFTER_FRAMESET:{uyt(this,t);break}case Pe.AFTER_AFTER_BODY:{dyt(this,t);break}case Pe.AFTER_AFTER_FRAMESET:{fyt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?gyt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Pe.INITIAL:{QT(this,t);break}case Pe.BEFORE_HTML:{Kgt(this,t);break}case Pe.BEFORE_HEAD:{Qgt(this,t);break}case Pe.IN_HEAD:{Jgt(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{e0t(this,t);break}case Pe.AFTER_HEAD:{n0t(this,t);break}case Pe.IN_BODY:{hL(this,t);break}case Pe.TEXT:{z0t(this,t);break}case Pe.IN_TABLE:{Lk(this,t);break}case Pe.IN_TABLE_TEXT:{JT(this,t);break}case Pe.IN_CAPTION:{J0t(this,t);break}case Pe.IN_COLUMN_GROUP:{Z0t(this,t);break}case Pe.IN_TABLE_BODY:{yG(this,t);break}case Pe.IN_ROW:{XRe(this,t);break}case Pe.IN_CELL:{tyt(this,t);break}case Pe.IN_SELECT:{JRe(this,t);break}case Pe.IN_SELECT_IN_TABLE:{ryt(this,t);break}case Pe.IN_TEMPLATE:{syt(this,t);break}case Pe.AFTER_BODY:{eDe(this,t);break}case Pe.IN_FRAMESET:{lyt(this,t);break}case Pe.AFTER_FRAMESET:{cyt(this,t);break}case Pe.AFTER_AFTER_BODY:{a4(this,t);break}}}onEof(t){switch(this.insertionMode){case Pe.INITIAL:{QT(this,t);break}case Pe.BEFORE_HTML:{zA(this,t);break}case Pe.BEFORE_HEAD:{VA(this,t);break}case Pe.IN_HEAD:{UA(this,t);break}case Pe.IN_HEAD_NO_SCRIPT:{HA(this,t);break}case Pe.AFTER_HEAD:{qA(this,t);break}case Pe.IN_BODY:case Pe.IN_TABLE:case Pe.IN_CAPTION:case Pe.IN_COLUMN_GROUP:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:case Pe.IN_CELL:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:{WRe(this,t);break}case Pe.TEXT:{V0t(this,t);break}case Pe.IN_TABLE_TEXT:{JT(this,t);break}case Pe.IN_TEMPLATE:{ZRe(this,t);break}case Pe.AFTER_BODY:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{Iee(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ye.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Pe.IN_HEAD:case Pe.IN_HEAD_NO_SCRIPT:case Pe.AFTER_HEAD:case Pe.TEXT:case Pe.IN_COLUMN_GROUP:case Pe.IN_SELECT:case Pe.IN_SELECT_IN_TABLE:case Pe.IN_FRAMESET:case Pe.AFTER_FRAMESET:{this._insertCharacters(t);break}case Pe.IN_BODY:case Pe.IN_CAPTION:case Pe.IN_CELL:case Pe.IN_TEMPLATE:case Pe.AFTER_BODY:case Pe.AFTER_AFTER_BODY:case Pe.AFTER_AFTER_FRAMESET:{zRe(this,t);break}case Pe.IN_TABLE:case Pe.IN_TABLE_BODY:case Pe.IN_ROW:{Nz(this,t);break}case Pe.IN_TABLE_TEXT:{GRe(this,t);break}}}};function jgt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):qRe(e,t),n}function Bgt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function zgt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),l=a&&s>=Fgt;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Vgt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Vgt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Ugt(e,t,n){const r=e.treeAdapter.getTagName(t),i=cS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===W.TEMPLATE&&s===lt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Hgt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function kee(e,t){for(let n=0;n<$gt;n++){const r=jgt(e,t);if(!r)break;const i=Bgt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=zgt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Ugt(e,o,s),Hgt(e,i,r)}}function gG(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function qgt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Wgt(e,t){e._appendCommentNode(t,e.document)}function Iee(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Ggt(e,t){e._setDocumentType(t);const n=t.forceQuirks?Dc.QUIRKS:Egt(t);_gt(t)||e._err(t,Je.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Pe.BEFORE_HTML}function QT(e,t){e._err(t,Je.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Dc.QUIRKS),e.insertionMode=Pe.BEFORE_HTML,e._processToken(t)}function Ygt(e,t){t.tagID===W.HTML?(e._insertElement(t,lt.HTML),e.insertionMode=Pe.BEFORE_HEAD):zA(e,t)}function Kgt(e,t){const n=t.tagID;(n===W.HTML||n===W.HEAD||n===W.BODY||n===W.BR)&&zA(e,t)}function zA(e,t){e._insertFakeRootElement(),e.insertionMode=Pe.BEFORE_HEAD,e._processToken(t)}function Xgt(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.HEAD:{e._insertElement(t,lt.HTML),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD;break}default:VA(e,t)}}function Qgt(e,t){const n=t.tagID;n===W.HEAD||n===W.BODY||n===W.HTML||n===W.BR?VA(e,t):e._err(t,Je.endTagWithoutMatchingOpenElement)}function VA(e,t){e._insertFakeElement(Ke.HEAD,W.HEAD),e.headElement=e.openElements.current,e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function Ih(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.BASE:case W.BASEFONT:case W.BGSOUND:case W.LINK:case W.META:{e._appendElement(t,lt.HTML),t.ackSelfClosing=!0;break}case W.TITLE:{e._switchToTextParsing(t,ro.RCDATA);break}case W.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ro.RAWTEXT):(e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_HEAD_NO_SCRIPT);break}case W.NOFRAMES:case W.STYLE:{e._switchToTextParsing(t,ro.RAWTEXT);break}case W.SCRIPT:{e._switchToTextParsing(t,ro.SCRIPT_DATA);break}case W.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Pe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Pe.IN_TEMPLATE);break}case W.HEAD:{e._err(t,Je.misplacedStartTagForHeadElement);break}default:UA(e,t)}}function Jgt(e,t){switch(t.tagID){case W.HEAD:{e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD;break}case W.BODY:case W.BR:case W.HTML:{UA(e,t);break}case W.TEMPLATE:{Zw(e,t);break}default:e._err(t,Je.endTagWithoutMatchingOpenElement)}}function Zw(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==W.TEMPLATE&&e._err(t,Je.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(W.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Je.endTagWithoutMatchingOpenElement)}function UA(e,t){e.openElements.pop(),e.insertionMode=Pe.AFTER_HEAD,e._processToken(t)}function Zgt(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.BASEFONT:case W.BGSOUND:case W.HEAD:case W.LINK:case W.META:case W.NOFRAMES:case W.STYLE:{Ih(e,t);break}case W.NOSCRIPT:{e._err(t,Je.nestedNoscriptInHead);break}default:HA(e,t)}}function e0t(e,t){switch(t.tagID){case W.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Pe.IN_HEAD;break}case W.BR:{HA(e,t);break}default:e._err(t,Je.endTagWithoutMatchingOpenElement)}}function HA(e,t){const n=t.type===xr.EOF?Je.openElementsLeftAfterEof:Je.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Pe.IN_HEAD,e._processToken(t)}function t0t(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.BODY:{e._insertElement(t,lt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_BODY;break}case W.FRAMESET:{e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_FRAMESET;break}case W.BASE:case W.BASEFONT:case W.BGSOUND:case W.LINK:case W.META:case W.NOFRAMES:case W.SCRIPT:case W.STYLE:case W.TEMPLATE:case W.TITLE:{e._err(t,Je.abandonedHeadElementChild),e.openElements.push(e.headElement,W.HEAD),Ih(e,t),e.openElements.remove(e.headElement);break}case W.HEAD:{e._err(t,Je.misplacedStartTagForHeadElement);break}default:qA(e,t)}}function n0t(e,t){switch(t.tagID){case W.BODY:case W.HTML:case W.BR:{qA(e,t);break}case W.TEMPLATE:{Zw(e,t);break}default:e._err(t,Je.endTagWithoutMatchingOpenElement)}}function qA(e,t){e._insertFakeElement(Ke.BODY,W.BODY),e.insertionMode=Pe.IN_BODY,fL(e,t)}function fL(e,t){switch(t.type){case xr.CHARACTER:{VRe(e,t);break}case xr.WHITESPACE_CHARACTER:{zRe(e,t);break}case xr.COMMENT:{gG(e,t);break}case xr.START_TAG:{Ll(e,t);break}case xr.END_TAG:{hL(e,t);break}case xr.EOF:{WRe(e,t);break}}}function zRe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function VRe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function r0t(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function i0t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function s0t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_FRAMESET)}function o0t(e,t){e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._insertElement(t,lt.HTML)}function a0t(e,t){e.openElements.hasInButtonScope(W.P)&&e._closePElement(),RRe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,lt.HTML)}function l0t(e,t){e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._insertElement(t,lt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function u0t(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._insertElement(t,lt.HTML),n||(e.formElement=e.openElements.current))}function c0t(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===W.LI&&i===W.LI||(n===W.DD||n===W.DT)&&(i===W.DD||i===W.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==W.ADDRESS&&i!==W.DIV&&i!==W.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._insertElement(t,lt.HTML)}function d0t(e,t){e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._insertElement(t,lt.HTML),e.tokenizer.state=ro.PLAINTEXT}function f0t(e,t){e.openElements.hasInScope(W.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(W.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.framesetOk=!1}function h0t(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ke.A);n&&(kee(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function p0t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function m0t(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(W.NOBR)&&(kee(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,lt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function g0t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function y0t(e,t){e.treeAdapter.getDocumentMode(e.document)!==Dc.QUIRKS&&e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._insertElement(t,lt.HTML),e.framesetOk=!1,e.insertionMode=Pe.IN_TABLE}function URe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,lt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function HRe(e){const t=ARe(e,Qy.TYPE);return t!=null&&t.toLowerCase()===Mgt}function v0t(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,lt.HTML),HRe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function b0t(e,t){e._appendElement(t,lt.HTML),t.ackSelfClosing=!0}function w0t(e,t){e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._appendElement(t,lt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function x0t(e,t){t.tagName=Ke.IMG,t.tagID=W.IMG,URe(e,t)}function _0t(e,t){e._insertElement(t,lt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ro.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Pe.TEXT}function E0t(e,t){e.openElements.hasInButtonScope(W.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ro.RAWTEXT)}function C0t(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ro.RAWTEXT)}function Bpe(e,t){e._switchToTextParsing(t,ro.RAWTEXT)}function S0t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Pe.IN_TABLE||e.insertionMode===Pe.IN_CAPTION||e.insertionMode===Pe.IN_TABLE_BODY||e.insertionMode===Pe.IN_ROW||e.insertionMode===Pe.IN_CELL?Pe.IN_SELECT_IN_TABLE:Pe.IN_SELECT}function T0t(e,t){e.openElements.currentTagId===W.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML)}function A0t(e,t){e.openElements.hasInScope(W.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,lt.HTML)}function k0t(e,t){e.openElements.hasInScope(W.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(W.RTC),e._insertElement(t,lt.HTML)}function I0t(e,t){e._reconstructActiveFormattingElements(),LRe(t),Aee(t),t.selfClosing?e._appendElement(t,lt.MATHML):e._insertElement(t,lt.MATHML),t.ackSelfClosing=!0}function R0t(e,t){e._reconstructActiveFormattingElements(),jRe(t),Aee(t),t.selfClosing?e._appendElement(t,lt.SVG):e._insertElement(t,lt.SVG),t.ackSelfClosing=!0}function zpe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,lt.HTML)}function Ll(e,t){switch(t.tagID){case W.I:case W.S:case W.B:case W.U:case W.EM:case W.TT:case W.BIG:case W.CODE:case W.FONT:case W.SMALL:case W.STRIKE:case W.STRONG:{p0t(e,t);break}case W.A:{h0t(e,t);break}case W.H1:case W.H2:case W.H3:case W.H4:case W.H5:case W.H6:{a0t(e,t);break}case W.P:case W.DL:case W.OL:case W.UL:case W.DIV:case W.DIR:case W.NAV:case W.MAIN:case W.MENU:case W.ASIDE:case W.CENTER:case W.FIGURE:case W.FOOTER:case W.HEADER:case W.HGROUP:case W.DIALOG:case W.DETAILS:case W.ADDRESS:case W.ARTICLE:case W.SECTION:case W.SUMMARY:case W.FIELDSET:case W.BLOCKQUOTE:case W.FIGCAPTION:{o0t(e,t);break}case W.LI:case W.DD:case W.DT:{c0t(e,t);break}case W.BR:case W.IMG:case W.WBR:case W.AREA:case W.EMBED:case W.KEYGEN:{URe(e,t);break}case W.HR:{w0t(e,t);break}case W.RB:case W.RTC:{A0t(e,t);break}case W.RT:case W.RP:{k0t(e,t);break}case W.PRE:case W.LISTING:{l0t(e,t);break}case W.XMP:{E0t(e,t);break}case W.SVG:{R0t(e,t);break}case W.HTML:{r0t(e,t);break}case W.BASE:case W.LINK:case W.META:case W.STYLE:case W.TITLE:case W.SCRIPT:case W.BGSOUND:case W.BASEFONT:case W.TEMPLATE:{Ih(e,t);break}case W.BODY:{i0t(e,t);break}case W.FORM:{u0t(e,t);break}case W.NOBR:{m0t(e,t);break}case W.MATH:{I0t(e,t);break}case W.TABLE:{y0t(e,t);break}case W.INPUT:{v0t(e,t);break}case W.PARAM:case W.TRACK:case W.SOURCE:{b0t(e,t);break}case W.IMAGE:{x0t(e,t);break}case W.BUTTON:{f0t(e,t);break}case W.APPLET:case W.OBJECT:case W.MARQUEE:{g0t(e,t);break}case W.IFRAME:{C0t(e,t);break}case W.SELECT:{S0t(e,t);break}case W.OPTION:case W.OPTGROUP:{T0t(e,t);break}case W.NOEMBED:{Bpe(e,t);break}case W.FRAMESET:{s0t(e,t);break}case W.TEXTAREA:{_0t(e,t);break}case W.NOSCRIPT:{e.options.scriptingEnabled?Bpe(e,t):zpe(e,t);break}case W.PLAINTEXT:{d0t(e,t);break}case W.COL:case W.TH:case W.TD:case W.TR:case W.HEAD:case W.FRAME:case W.TBODY:case W.TFOOT:case W.THEAD:case W.CAPTION:case W.COLGROUP:break;default:zpe(e,t)}}function D0t(e,t){if(e.openElements.hasInScope(W.BODY)&&(e.insertionMode=Pe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function P0t(e,t){e.openElements.hasInScope(W.BODY)&&(e.insertionMode=Pe.AFTER_BODY,eDe(e,t))}function O0t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function N0t(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(W.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(W.FORM):n&&e.openElements.remove(n))}function M0t(e){e.openElements.hasInButtonScope(W.P)||e._insertFakeElement(Ke.P,W.P),e._closePElement()}function $0t(e){e.openElements.hasInListItemScope(W.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(W.LI),e.openElements.popUntilTagNamePopped(W.LI))}function F0t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function L0t(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function j0t(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function B0t(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ke.BR,W.BR),e.openElements.pop(),e.framesetOk=!1}function qRe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==W.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function hL(e,t){switch(t.tagID){case W.A:case W.B:case W.I:case W.S:case W.U:case W.EM:case W.TT:case W.BIG:case W.CODE:case W.FONT:case W.NOBR:case W.SMALL:case W.STRIKE:case W.STRONG:{kee(e,t);break}case W.P:{M0t(e);break}case W.DL:case W.UL:case W.OL:case W.DIR:case W.DIV:case W.NAV:case W.PRE:case W.MAIN:case W.MENU:case W.ASIDE:case W.BUTTON:case W.CENTER:case W.FIGURE:case W.FOOTER:case W.HEADER:case W.HGROUP:case W.DIALOG:case W.ADDRESS:case W.ARTICLE:case W.DETAILS:case W.SECTION:case W.SUMMARY:case W.LISTING:case W.FIELDSET:case W.BLOCKQUOTE:case W.FIGCAPTION:{O0t(e,t);break}case W.LI:{$0t(e);break}case W.DD:case W.DT:{F0t(e,t);break}case W.H1:case W.H2:case W.H3:case W.H4:case W.H5:case W.H6:{L0t(e);break}case W.BR:{B0t(e);break}case W.BODY:{D0t(e,t);break}case W.HTML:{P0t(e,t);break}case W.FORM:{N0t(e);break}case W.APPLET:case W.OBJECT:case W.MARQUEE:{j0t(e,t);break}case W.TEMPLATE:{Zw(e,t);break}default:qRe(e,t)}}function WRe(e,t){e.tmplInsertionModeStack.length>0?ZRe(e,t):Iee(e,t)}function z0t(e,t){var n;t.tagID===W.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function V0t(e,t){e._err(t,Je.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Nz(e,t){if(BRe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Pe.IN_TABLE_TEXT,t.type){case xr.CHARACTER:{YRe(e,t);break}case xr.WHITESPACE_CHARACTER:{GRe(e,t);break}}else OR(e,t)}function U0t(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_CAPTION}function H0t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_COLUMN_GROUP}function q0t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ke.COLGROUP,W.COLGROUP),e.insertionMode=Pe.IN_COLUMN_GROUP,Ree(e,t)}function W0t(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_TABLE_BODY}function G0t(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ke.TBODY,W.TBODY),e.insertionMode=Pe.IN_TABLE_BODY,pL(e,t)}function Y0t(e,t){e.openElements.hasInTableScope(W.TABLE)&&(e.openElements.popUntilTagNamePopped(W.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function K0t(e,t){HRe(t)?e._appendElement(t,lt.HTML):OR(e,t),t.ackSelfClosing=!0}function X0t(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,lt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function JE(e,t){switch(t.tagID){case W.TD:case W.TH:case W.TR:{G0t(e,t);break}case W.STYLE:case W.SCRIPT:case W.TEMPLATE:{Ih(e,t);break}case W.COL:{q0t(e,t);break}case W.FORM:{X0t(e,t);break}case W.TABLE:{Y0t(e,t);break}case W.TBODY:case W.TFOOT:case W.THEAD:{W0t(e,t);break}case W.INPUT:{K0t(e,t);break}case W.CAPTION:{U0t(e,t);break}case W.COLGROUP:{H0t(e,t);break}default:OR(e,t)}}function Lk(e,t){switch(t.tagID){case W.TABLE:{e.openElements.hasInTableScope(W.TABLE)&&(e.openElements.popUntilTagNamePopped(W.TABLE),e._resetInsertionMode());break}case W.TEMPLATE:{Zw(e,t);break}case W.BODY:case W.CAPTION:case W.COL:case W.COLGROUP:case W.HTML:case W.TBODY:case W.TD:case W.TFOOT:case W.TH:case W.THEAD:case W.TR:break;default:OR(e,t)}}function OR(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,fL(e,t),e.fosterParentingEnabled=n}function GRe(e,t){e.pendingCharacterTokens.push(t)}function YRe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function JT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)OR(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const KRe=new Set([W.CAPTION,W.COL,W.COLGROUP,W.TBODY,W.TD,W.TFOOT,W.TH,W.THEAD,W.TR]);function Q0t(e,t){const n=t.tagID;KRe.has(n)?e.openElements.hasInTableScope(W.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(W.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,JE(e,t)):Ll(e,t)}function J0t(e,t){const n=t.tagID;switch(n){case W.CAPTION:case W.TABLE:{e.openElements.hasInTableScope(W.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(W.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_TABLE,n===W.TABLE&&Lk(e,t));break}case W.BODY:case W.COL:case W.COLGROUP:case W.HTML:case W.TBODY:case W.TD:case W.TFOOT:case W.TH:case W.THEAD:case W.TR:break;default:hL(e,t)}}function Ree(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.COL:{e._appendElement(t,lt.HTML),t.ackSelfClosing=!0;break}case W.TEMPLATE:{Ih(e,t);break}default:b6(e,t)}}function Z0t(e,t){switch(t.tagID){case W.COLGROUP:{e.openElements.currentTagId===W.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case W.TEMPLATE:{Zw(e,t);break}case W.COL:break;default:b6(e,t)}}function b6(e,t){e.openElements.currentTagId===W.COLGROUP&&(e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,e._processToken(t))}function pL(e,t){switch(t.tagID){case W.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_ROW;break}case W.TH:case W.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ke.TR,W.TR),e.insertionMode=Pe.IN_ROW,mL(e,t);break}case W.CAPTION:case W.COL:case W.COLGROUP:case W.TBODY:case W.TFOOT:case W.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,JE(e,t));break}default:JE(e,t)}}function yG(e,t){const n=t.tagID;switch(t.tagID){case W.TBODY:case W.TFOOT:case W.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE);break}case W.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE,Lk(e,t));break}case W.BODY:case W.CAPTION:case W.COL:case W.COLGROUP:case W.HTML:case W.TD:case W.TH:case W.TR:break;default:Lk(e,t)}}function mL(e,t){switch(t.tagID){case W.TH:case W.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,lt.HTML),e.insertionMode=Pe.IN_CELL,e.activeFormattingElements.insertMarker();break}case W.CAPTION:case W.COL:case W.COLGROUP:case W.TBODY:case W.TFOOT:case W.THEAD:case W.TR:{e.openElements.hasInTableScope(W.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,pL(e,t));break}default:JE(e,t)}}function XRe(e,t){switch(t.tagID){case W.TR:{e.openElements.hasInTableScope(W.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY);break}case W.TABLE:{e.openElements.hasInTableScope(W.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,yG(e,t));break}case W.TBODY:case W.TFOOT:case W.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(W.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Pe.IN_TABLE_BODY,yG(e,t));break}case W.BODY:case W.CAPTION:case W.COL:case W.COLGROUP:case W.HTML:case W.TD:case W.TH:break;default:Lk(e,t)}}function eyt(e,t){const n=t.tagID;KRe.has(n)?(e.openElements.hasInTableScope(W.TD)||e.openElements.hasInTableScope(W.TH))&&(e._closeTableCell(),mL(e,t)):Ll(e,t)}function tyt(e,t){const n=t.tagID;switch(n){case W.TD:case W.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Pe.IN_ROW);break}case W.TABLE:case W.TBODY:case W.TFOOT:case W.THEAD:case W.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),XRe(e,t));break}case W.BODY:case W.CAPTION:case W.COL:case W.COLGROUP:case W.HTML:break;default:hL(e,t)}}function QRe(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.OPTION:{e.openElements.currentTagId===W.OPTION&&e.openElements.pop(),e._insertElement(t,lt.HTML);break}case W.OPTGROUP:{e.openElements.currentTagId===W.OPTION&&e.openElements.pop(),e.openElements.currentTagId===W.OPTGROUP&&e.openElements.pop(),e._insertElement(t,lt.HTML);break}case W.INPUT:case W.KEYGEN:case W.TEXTAREA:case W.SELECT:{e.openElements.hasInSelectScope(W.SELECT)&&(e.openElements.popUntilTagNamePopped(W.SELECT),e._resetInsertionMode(),t.tagID!==W.SELECT&&e._processStartTag(t));break}case W.SCRIPT:case W.TEMPLATE:{Ih(e,t);break}}}function JRe(e,t){switch(t.tagID){case W.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===W.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===W.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===W.OPTGROUP&&e.openElements.pop();break}case W.OPTION:{e.openElements.currentTagId===W.OPTION&&e.openElements.pop();break}case W.SELECT:{e.openElements.hasInSelectScope(W.SELECT)&&(e.openElements.popUntilTagNamePopped(W.SELECT),e._resetInsertionMode());break}case W.TEMPLATE:{Zw(e,t);break}}}function nyt(e,t){const n=t.tagID;n===W.CAPTION||n===W.TABLE||n===W.TBODY||n===W.TFOOT||n===W.THEAD||n===W.TR||n===W.TD||n===W.TH?(e.openElements.popUntilTagNamePopped(W.SELECT),e._resetInsertionMode(),e._processStartTag(t)):QRe(e,t)}function ryt(e,t){const n=t.tagID;n===W.CAPTION||n===W.TABLE||n===W.TBODY||n===W.TFOOT||n===W.THEAD||n===W.TR||n===W.TD||n===W.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(W.SELECT),e._resetInsertionMode(),e.onEndTag(t)):JRe(e,t)}function iyt(e,t){switch(t.tagID){case W.BASE:case W.BASEFONT:case W.BGSOUND:case W.LINK:case W.META:case W.NOFRAMES:case W.SCRIPT:case W.STYLE:case W.TEMPLATE:case W.TITLE:{Ih(e,t);break}case W.CAPTION:case W.COLGROUP:case W.TBODY:case W.TFOOT:case W.THEAD:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE,e.insertionMode=Pe.IN_TABLE,JE(e,t);break}case W.COL:{e.tmplInsertionModeStack[0]=Pe.IN_COLUMN_GROUP,e.insertionMode=Pe.IN_COLUMN_GROUP,Ree(e,t);break}case W.TR:{e.tmplInsertionModeStack[0]=Pe.IN_TABLE_BODY,e.insertionMode=Pe.IN_TABLE_BODY,pL(e,t);break}case W.TD:case W.TH:{e.tmplInsertionModeStack[0]=Pe.IN_ROW,e.insertionMode=Pe.IN_ROW,mL(e,t);break}default:e.tmplInsertionModeStack[0]=Pe.IN_BODY,e.insertionMode=Pe.IN_BODY,Ll(e,t)}}function syt(e,t){t.tagID===W.TEMPLATE&&Zw(e,t)}function ZRe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(W.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Iee(e,t)}function oyt(e,t){t.tagID===W.HTML?Ll(e,t):w6(e,t)}function eDe(e,t){var n;if(t.tagID===W.HTML){if(e.fragmentContext||(e.insertionMode=Pe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===W.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else w6(e,t)}function w6(e,t){e.insertionMode=Pe.IN_BODY,fL(e,t)}function ayt(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.FRAMESET:{e._insertElement(t,lt.HTML);break}case W.FRAME:{e._appendElement(t,lt.HTML),t.ackSelfClosing=!0;break}case W.NOFRAMES:{Ih(e,t);break}}}function lyt(e,t){t.tagID===W.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==W.FRAMESET&&(e.insertionMode=Pe.AFTER_FRAMESET))}function uyt(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.NOFRAMES:{Ih(e,t);break}}}function cyt(e,t){t.tagID===W.HTML&&(e.insertionMode=Pe.AFTER_AFTER_FRAMESET)}function dyt(e,t){t.tagID===W.HTML?Ll(e,t):a4(e,t)}function a4(e,t){e.insertionMode=Pe.IN_BODY,fL(e,t)}function fyt(e,t){switch(t.tagID){case W.HTML:{Ll(e,t);break}case W.NOFRAMES:{Ih(e,t);break}}}function hyt(e,t){t.chars=ds,e._insertCharacters(t)}function pyt(e,t){e._insertCharacters(t),e.framesetOk=!1}function tDe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==lt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function myt(e,t){if(Rgt(t))tDe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===lt.MATHML?LRe(t):r===lt.SVG&&(Dgt(t),jRe(t)),Aee(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function gyt(e,t){if(t.tagID===W.P||t.tagID===W.BR){tDe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===lt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ke.AREA,Ke.BASE,Ke.BASEFONT,Ke.BGSOUND,Ke.BR,Ke.COL,Ke.EMBED,Ke.FRAME,Ke.HR,Ke.IMG,Ke.INPUT,Ke.KEYGEN,Ke.LINK,Ke.META,Ke.PARAM,Ke.SOURCE,Ke.TRACK,Ke.WBR;const yyt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Vpe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function nDe(e,t){const n=Ayt(e),r=_Re("type",{handlers:{root:vyt,element:byt,text:wyt,comment:iDe,doctype:xyt,raw:Eyt},unknown:Cyt}),i={parser:n?new jpe(Vpe):jpe.getFragmentParser(void 0,Vpe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),dS(i,wm());const s=n?i.parser.document:i.parser.getFragment(),o=Imt(s,{file:i.options.file});return i.stitches&&IR(o,"comment",function(a,l,u){const c=a;if(c.value.stitch&&u&&l!==void 0){const d=u.children;return d[l]=c.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function rDe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function vyt(e,t){rDe(e.children,t)}function byt(e,t){Syt(e,t),rDe(e.children,t),Tyt(e,t)}function wyt(e,t){const n={type:xr.CHARACTER,chars:e.value,location:NR(e)};dS(t,wm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function xyt(e,t){const n={type:xr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:NR(e)};dS(t,wm(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function _yt(e,t){t.stitches=!0;const n=kyt(e);if("children"in e&&"children"in n){const r=nDe({type:"root",children:e.children},t.options);n.children=r.children}iDe({type:"comment",value:{stitch:n}},t)}function iDe(e,t){const n=e.value,r={type:xr.COMMENT,data:n,location:NR(e)};dS(t,wm(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Eyt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,sDe(t,wm(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Cyt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))_yt(n,t);else{let r="";throw yyt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function dS(e,t){sDe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ro.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function sDe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Syt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ro.PLAINTEXT)return;dS(t,wm(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Pb.html;i===Pb.html&&n==="svg"&&(i=Pb.svg);const s=Nmt({...e,children:[]},{space:i===Pb.svg?"svg":"html"}),o={type:xr.START_TAG,tagName:n,tagID:cS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:NR(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Tyt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Vmt.includes(n)||t.parser.tokenizer.state===ro.PLAINTEXT)return;dS(t,sL(e));const r={type:xr.END_TAG,tagName:n,tagID:cS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:NR(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ro.RCDATA||t.parser.tokenizer.state===ro.RAWTEXT||t.parser.tokenizer.state===ro.SCRIPT_DATA)&&(t.parser.tokenizer.state=ro.DATA)}function Ayt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function NR(e){const t=wm(e)||{line:void 0,column:void 0,offset:void 0},n=sL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function kyt(e){return"children"in e?QE({...e,children:[]}):QE(e)}function Iyt(e){return function(t,n){return nDe(t,{...e,file:n})}}function Upe(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;i!==-1;)r++,i=n.indexOf(t,i+t.length);return r}function Ryt(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Dyt(e,t,n){const i=uL((n||{}).ignore||[]),s=Pyt(t);let o=-1;for(;++o<s.length;)uRe(e,"text",a);function a(u,c){let d=-1,f;for(;++d<c.length;){const h=c[d],p=f?f.children:void 0;if(i(h,p?p.indexOf(h):void 0,f))return;f=h}if(f)return l(u,c)}function l(u,c){const d=c[c.length-1],f=s[o][0],h=s[o][1];let p=0;const g=d.children.indexOf(u);let y=!1,v=[];f.lastIndex=0;let b=f.exec(u.value);for(;b;){const _=b.index,E={index:b.index,input:b.input,stack:[...c,u]};let S=h(...b,E);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?f.lastIndex=_+1:(p!==_&&v.push({type:"text",value:u.value.slice(p,_)}),Array.isArray(S)?v.push(...S):S&&v.push(S),p=_+b[0].length,y=!0),!f.global)break;b=f.exec(u.value)}return y?(p<u.value.length&&v.push({type:"text",value:u.value.slice(p)}),d.children.splice(g,1,...v)):v=[u],g+v.length}}function Pyt(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const i=n[r];t.push([Oyt(i[0]),Nyt(i[1])])}return t}function Oyt(e){return typeof e=="string"?new RegExp(Ryt(e),"g"):e}function Nyt(e){return typeof e=="function"?e:function(){return e}}const Mz="phrasing",$z=["autolink","link","image","label"];function Myt(){return{transforms:[Vyt],enter:{literalAutolink:Fyt,literalAutolinkEmail:Fz,literalAutolinkHttp:Fz,literalAutolinkWww:Fz},exit:{literalAutolink:zyt,literalAutolinkEmail:Byt,literalAutolinkHttp:Lyt,literalAutolinkWww:jyt}}}function $yt(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Mz,notInConstruct:$z},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Mz,notInConstruct:$z},{character:":",before:"[ps]",after:"\\/",inConstruct:Mz,notInConstruct:$z}]}}function Fyt(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Fz(e){this.config.enter.autolinkProtocol.call(this,e)}function Lyt(e){this.config.exit.autolinkProtocol.call(this,e)}function jyt(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Byt(e){this.config.exit.autolinkEmail.call(this,e)}function zyt(e){this.exit(e)}function Vyt(e){Dyt(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Uyt],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Hyt]],{ignore:["link","linkReference"]})}function Uyt(e,t,n,r,i){let s="";if(!oDe(i)||(/^w/i.test(t)&&(n=t+n,t="",s="http://"),!qyt(n)))return!1;const o=Wyt(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+t+o[0],children:[{type:"text",value:t+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function Hyt(e,t,n,r){return!oDe(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function qyt(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function Wyt(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=Upe(e,"(");let s=Upe(e,")");for(;r!==-1&&i>s;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[e,n]}function oDe(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||ow(n)||oL(n))&&(!t||n!==47)}aDe.peek=tvt;function Gyt(){this.buffer()}function Yyt(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function Kyt(){this.buffer()}function Xyt(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Qyt(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=rh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Jyt(e){this.exit(e)}function Zyt(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=rh(this.sliceSerialize(e)).toLowerCase(),n.label=t}function evt(e){this.exit(e)}function tvt(){return"["}function aDe(e,t,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(e),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function nvt(){return{enter:{gfmFootnoteCallString:Gyt,gfmFootnoteCall:Yyt,gfmFootnoteDefinitionLabelString:Kyt,gfmFootnoteDefinition:Xyt},exit:{gfmFootnoteCallString:Qyt,gfmFootnoteCall:Jyt,gfmFootnoteDefinitionLabelString:Zyt,gfmFootnoteDefinition:evt}}}function rvt(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:n,footnoteReference:aDe},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const u=s.enter("footnoteDefinition"),c=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),c(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((t?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),t?lDe:ivt))),u(),l}}function ivt(e,t,n){return t===0?e:lDe(e,t,n)}function lDe(e,t,n){return(n?"":"    ")+e}const svt=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];uDe.peek=cvt;function ovt(){return{canContainEols:["delete"],enter:{strikethrough:lvt},exit:{strikethrough:uvt}}}function avt(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:svt}],handlers:{delete:uDe}}}function lvt(e){this.enter({type:"delete",children:[]},e)}function uvt(e){this.exit(e)}function uDe(e,t,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(e,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function cvt(){return"~"}function dvt(e){return e.length}function fvt(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||dvt,s=[],o=[],a=[],l=[];let u=0,c=-1;for(;++c<e.length;){const m=[],g=[];let y=-1;for(e[c].length>u&&(u=e[c].length);++y<e[c].length;){const v=hvt(e[c][y]);if(n.alignDelimiters!==!1){const b=i(v);g[y]=b,(l[y]===void 0||b>l[y])&&(l[y]=b)}m.push(v)}o[c]=m,a[c]=g}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<u;)s[d]=Hpe(r[d]);else{const m=Hpe(r);for(;++d<u;)s[d]=m}d=-1;const f=[],h=[];for(;++d<u;){const m=s[d];let g="",y="";m===99?(g=":",y=":"):m===108?g=":":m===114&&(y=":");let v=n.alignDelimiters===!1?1:Math.max(1,l[d]-g.length-y.length);const b=g+"-".repeat(v)+y;n.alignDelimiters!==!1&&(v=g.length+v+y.length,v>l[d]&&(l[d]=v),h[d]=v),f[d]=b}o.splice(1,0,f),a.splice(1,0,h),c=-1;const p=[];for(;++c<o.length;){const m=o[c],g=a[c];d=-1;const y=[];for(;++d<u;){const v=m[d]||"";let b="",_="";if(n.alignDelimiters!==!1){const E=l[d]-(g[d]||0),S=s[d];S===114?b=" ".repeat(E):S===99?E%2?(b=" ".repeat(E/2+.5),_=" ".repeat(E/2-.5)):(b=" ".repeat(E/2),_=b):_=" ".repeat(E)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&v==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(b),y.push(v),n.alignDelimiters!==!1&&y.push(_),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==u-1)&&y.push("|")}p.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return p.join(`
`)}function hvt(e){return e==null?"":String(e)}function Hpe(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function pvt(e,t,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(e,s.current()),mvt);return i(),o}function mvt(e,t,n){return">"+(n?"":" ")+e}function gvt(e,t){return qpe(e,t.inConstruct,!0)&&!qpe(e,t.notInConstruct,!1)}function qpe(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function Wpe(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&gvt(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function yvt(e,t){const n=String(e);let r=n.indexOf(t),i=r,s=0,o=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+t.length,r=n.indexOf(t,i);return o}function vvt(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function bvt(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function wvt(e,t,n,r){const i=bvt(n),s=e.value||"",o=i==="`"?"GraveAccent":"Tilde";if(vvt(e,n)){const d=n.enter("codeIndented"),f=n.indentLines(s,xvt);return d(),f}const a=n.createTracker(r),l=i.repeat(Math.max(yvt(s,i)+1,3)),u=n.enter("codeFenced");let c=a.move(l);if(e.lang){const d=n.enter(`codeFencedLang${o}`);c+=a.move(n.safe(e.lang,{before:c,after:" ",encode:["`"],...a.current()})),d()}if(e.lang&&e.meta){const d=n.enter(`codeFencedMeta${o}`);c+=a.move(" "),c+=a.move(n.safe(e.meta,{before:c,after:`
`,encode:["`"],...a.current()})),d()}return c+=a.move(`
`),s&&(c+=a.move(s+`
`)),c+=a.move(l),u(),c}function xvt(e,t,n){return(n?"":"    ")+e}function Dee(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function _vt(e,t,n,r){const i=Dee(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(e),{before:u,after:"]",...l.current()})),u+=l.move("]: "),a(),!e.url||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":`
`,...l.current()}))),a(),e.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),o(),u}function Evt(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function jk(e){return"&#x"+e.toString(16).toUpperCase()+";"}function x6(e,t,n){const r=XE(e),i=XE(t);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}cDe.peek=Cvt;function cDe(e,t,n,r){const i=Evt(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(e,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=x6(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=jk(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=x6(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+jk(d));const h=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+h}function Cvt(e,t,n){return n.options.emphasis||"*"}function Svt(e,t){let n=!1;return IR(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,aG}),!!((!e.depth||e.depth<3)&&mee(e)&&(t.options.setext||n))}function Tvt(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),s=n.createTracker(r);if(Svt(e,n)){const c=n.enter("headingSetext"),d=n.enter("phrasing"),f=n.containerPhrasing(e,{...s.current(),before:`
`,after:`
`});return d(),c(),f+`
`+(i===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(e,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=jk(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),l(),a(),u}dDe.peek=Avt;function dDe(e){return e.value||""}function Avt(){return"<"}fDe.peek=kvt;function fDe(e,t,n,r){const i=Dee(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(e.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),a(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(a=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(a=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),a(),e.title&&(a=n.enter(`title${s}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),a()),u+=l.move(")"),o(),u}function kvt(){return"!"}hDe.peek=Ivt;function hDe(e,t,n,r){const i=e.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const u=n.safe(e.alt,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Ivt(){return"!"}pDe.peek=Rvt;function pDe(e,t,n){let r=e.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let u=l.index;r.charCodeAt(u)===10&&r.charCodeAt(u-1)===13&&u--,r=r.slice(0,u)+" "+r.slice(l.index+1)}}return i+r+i}function Rvt(){return"`"}function mDe(e,t){const n=mee(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}gDe.peek=Dvt;function gDe(e,t,n,r){const i=Dee(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(mDe(e,n)){const c=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(e,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=c,d}a=n.enter("link"),l=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(e,{before:u,after:"](",...o.current()})),u+=o.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(e.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(l=n.enter("destinationRaw"),u+=o.move(n.safe(e.url,{before:u,after:e.title?" ":")",...o.current()}))),l(),e.title&&(l=n.enter(`title${s}`),u+=o.move(" "+i),u+=o.move(n.safe(e.title,{before:u,after:i,...o.current()})),u+=o.move(i),l()),u+=o.move(")"),a(),u}function Dvt(e,t,n){return mDe(e,n)?"<":"["}yDe.peek=Pvt;function yDe(e,t,n,r){const i=e.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const u=n.containerPhrasing(e,{before:l,after:"]",...a.current()});l+=a.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...a.current()});return o(),n.stack=c,s(),i==="full"||!u||u!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function Pvt(){return"["}function Pee(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function Ovt(e){const t=Pee(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function Nvt(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function vDe(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function Mvt(e,t,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=e.ordered?Nvt(n):Pee(n);const a=e.ordered?o==="."?")":".":Ovt(n);let l=t&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!e.ordered){const c=e.children?e.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),vDe(n)===o&&c){let d=-1;for(;++d<e.children.length;){const f=e.children[d];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const u=n.containerFlow(e,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),u}function $vt(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function Fvt(e,t,n,r){const i=$vt(n);let s=n.bulletCurrent||Pee(n);t&&t.type==="list"&&t.ordered&&(s=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,a.current()),c);return l(),u;function c(d,f,h){return f?(h?"":" ".repeat(o))+d:(h?s:s+" ".repeat(o-s.length))+d}}function Lvt(e,t,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(e,r);return s(),i(),o}const jvt=uL(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function Bvt(e,t,n,r){return(e.children.some(function(o){return jvt(o)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function zvt(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}bDe.peek=Vvt;function bDe(e,t,n,r){const i=zvt(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(e,{after:i,before:a,...o.current()}));const u=l.charCodeAt(0),c=x6(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=jk(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=x6(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+jk(d));const h=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},a+l+h}function Vvt(e,t,n){return n.options.strong||"*"}function Uvt(e,t,n,r){return n.safe(e.value,r)}function Hvt(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function qvt(e,t,n){const r=(vDe(n)+(n.options.ruleSpaces?" ":"")).repeat(Hvt(n));return n.options.ruleSpaces?r.slice(0,-1):r}const wDe={blockquote:pvt,break:Wpe,code:wvt,definition:_vt,emphasis:cDe,hardBreak:Wpe,heading:Tvt,html:dDe,image:fDe,imageReference:hDe,inlineCode:pDe,link:gDe,linkReference:yDe,list:Mvt,listItem:Fvt,paragraph:Lvt,root:Bvt,strong:bDe,text:Uvt,thematicBreak:qvt};function Wvt(){return{enter:{table:Gvt,tableData:Gpe,tableHeader:Gpe,tableRow:Kvt},exit:{codeText:Xvt,table:Yvt,tableData:Lz,tableHeader:Lz,tableRow:Lz}}}function Gvt(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Yvt(e){this.exit(e),this.data.inTable=void 0}function Kvt(e){this.enter({type:"tableRow",children:[]},e)}function Lz(e){this.exit(e)}function Gpe(e){this.enter({type:"tableCell",children:[]},e)}function Xvt(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,Qvt));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function Qvt(e,t){return t==="|"?t:e}function Jvt(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:l,tableRow:a}};function o(h,p,m,g){return u(c(h,m,g),h.align)}function a(h,p,m,g){const y=d(h,m,g),v=u([y]);return v.slice(0,v.indexOf(`
`))}function l(h,p,m,g){const y=m.enter("tableCell"),v=m.enter("phrasing"),b=m.containerPhrasing(h,{...g,before:s,after:s});return v(),y(),b}function u(h,p){return fvt(h,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function c(h,p,m){const g=h.children;let y=-1;const v=[],b=p.enter("table");for(;++y<g.length;)v[y]=d(g[y],p,m);return b(),v}function d(h,p,m){const g=h.children;let y=-1;const v=[],b=p.enter("tableRow");for(;++y<g.length;)v[y]=l(g[y],h,p,m);return b(),v}function f(h,p,m){let g=wDe.inlineCode(h,p,m);return m.stack.includes("tableCell")&&(g=g.replace(/\|/g,"\\$&")),g}}function Zvt(){return{exit:{taskListCheckValueChecked:Ype,taskListCheckValueUnchecked:Ype,paragraph:t1t}}}function e1t(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:n1t}}}function Ype(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function t1t(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=t.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function n1t(e,t,n,r){const i=e.children[0],s=typeof e.checked=="boolean"&&i&&i.type==="paragraph",o="["+(e.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=wDe.listItem(e,t,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),l;function u(c){return c+o}}function r1t(){return[Myt(),nvt(),ovt(),Wvt(),Zvt()]}function i1t(e){return{extensions:[$yt(),rvt(e),avt(),Jvt(e),e1t()]}}const s1t={tokenize:d1t,partial:!0},xDe={tokenize:f1t,partial:!0},_De={tokenize:h1t,partial:!0},EDe={tokenize:p1t,partial:!0},o1t={tokenize:m1t,partial:!0},CDe={name:"wwwAutolink",tokenize:u1t,previous:TDe},SDe={name:"protocolAutolink",tokenize:c1t,previous:ADe},S0={name:"emailAutolink",tokenize:l1t,previous:kDe},xm={};function a1t(){return{text:xm}}let q1=48;for(;q1<123;)xm[q1]=S0,q1++,q1===58?q1=65:q1===91&&(q1=97);xm[43]=S0;xm[45]=S0;xm[46]=S0;xm[95]=S0;xm[72]=[S0,SDe];xm[104]=[S0,SDe];xm[87]=[S0,CDe];xm[119]=[S0,CDe];function l1t(e,t,n){const r=this;let i,s;return o;function o(d){return!vG(d)||!kDe.call(r,r.previous)||Oee(r.events)?n(d):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(d))}function a(d){return vG(d)?(e.consume(d),a):d===64?(e.consume(d),l):n(d)}function l(d){return d===46?e.check(o1t,c,u)(d):d===45||d===95||El(d)?(s=!0,e.consume(d),l):c(d)}function u(d){return e.consume(d),i=!0,l}function c(d){return s&&i&&nu(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(d)):n(d)}}function u1t(e,t,n){const r=this;return i;function i(o){return o!==87&&o!==119||!TDe.call(r,r.previous)||Oee(r.events)?n(o):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(s1t,e.attempt(xDe,e.attempt(_De,s),n),n)(o))}function s(o){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(o)}}function c1t(e,t,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&ADe.call(r,r.previous)&&!Oee(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),e.consume(d),a):n(d)}function a(d){if(nu(d)&&i.length<5)return i+=String.fromCodePoint(d),e.consume(d),a;if(d===58){const f=i.toLowerCase();if(f==="http"||f==="https")return e.consume(d),l}return n(d)}function l(d){return d===47?(e.consume(d),s?u:(s=!0,l)):n(d)}function u(d){return d===null||y6(d)||Bi(d)||ow(d)||oL(d)?n(d):e.attempt(xDe,e.attempt(_De,c),n)(d)}function c(d){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(d)}}function d1t(e,t,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,e.consume(o),i):o===46&&r===3?(e.consume(o),s):n(o)}function s(o){return o===null?n(o):t(o)}}function f1t(e,t,n){let r,i,s;return o;function o(u){return u===46||u===95?e.check(EDe,l,a)(u):u===null||Bi(u)||ow(u)||u!==45&&oL(u)?l(u):(s=!0,e.consume(u),o)}function a(u){return u===95?r=!0:(i=r,r=void 0),e.consume(u),o}function l(u){return i||r||!s?n(u):t(u)}}function h1t(e,t){let n=0,r=0;return i;function i(o){return o===40?(n++,e.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?e.check(EDe,t,s)(o):o===null||Bi(o)||ow(o)?t(o):(e.consume(o),i)}function s(o){return o===41&&r++,e.consume(o),i}}function p1t(e,t,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),r):a===38?(e.consume(a),s):a===93?(e.consume(a),i):a===60||a===null||Bi(a)||ow(a)?t(a):n(a)}function i(a){return a===null||a===40||a===91||Bi(a)||ow(a)?t(a):r(a)}function s(a){return nu(a)?o(a):n(a)}function o(a){return a===59?(e.consume(a),r):nu(a)?(e.consume(a),o):n(a)}}function m1t(e,t,n){return r;function r(s){return e.consume(s),i}function i(s){return El(s)?n(s):t(s)}}function TDe(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Bi(e)}function ADe(e){return!nu(e)}function kDe(e){return!(e===47||vG(e))}function vG(e){return e===43||e===45||e===46||e===95||El(e)}function Oee(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const g1t={tokenize:C1t,partial:!0};function y1t(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:x1t,continuation:{tokenize:_1t},exit:E1t}},text:{91:{name:"gfmFootnoteCall",tokenize:w1t},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:v1t,resolveTo:b1t}}}}function v1t(e,t,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const u=rh(r.sliceSerialize({start:o.end,end:r.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(l):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(l),e.exit("gfmFootnoteCallLabelMarker"),t(l))}}function b1t(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...a),e}function w1t(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(e.enter("gfmFootnoteCallMarker"),e.consume(d),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(d){if(s>999||d===93&&!o||d===null||d===91||Bi(d))return n(d);if(d===93){e.exit("chunkString");const f=e.exit("gfmFootnoteCallString");return i.includes(rh(r.sliceSerialize(f)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(d),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(d)}return Bi(d)||(o=!0),s++,e.consume(d),d===92?c:u}function c(d){return d===91||d===92||d===93?(e.consume(d),s++,u):u(d)}}function x1t(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",c):n(p)}function c(p){if(o>999||p===93&&!a||p===null||p===91||Bi(p))return n(p);if(p===93){e.exit("chunkString");const m=e.exit("gfmFootnoteDefinitionLabelString");return s=rh(r.sliceSerialize(m)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),f}return Bi(p)||(a=!0),o++,e.consume(p),p===92?d:c}function d(p){return p===91||p===92||p===93?(e.consume(p),o++,c):c(p)}function f(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),i.includes(s)||i.push(s),Xr(e,h,"gfmFootnoteDefinitionWhitespace")):n(p)}function h(p){return t(p)}}function _1t(e,t,n){return e.check(kR,t,e.attempt(g1t,t,n))}function E1t(e){e.exit("gfmFootnoteDefinition")}function C1t(e,t,n){const r=this;return Xr(e,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?t(s):n(s)}}function S1t(e){let n=(e||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let u=l;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[l][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[l][1].start)},f=[["enter",c,a],["enter",o[u][1],a],["exit",o[u][1],a],["enter",d,a]],h=a.parser.constructs.insideSpan.null;h&&Lc(f,f.length,0,aL(h,o.slice(u+1,l),a)),Lc(f,f.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",c,a]]),Lc(o,u-1,l-u+3,f),l=u+f.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const u=this.previous,c=this.events;let d=0;return f;function f(p){return u===126&&c[c.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),h(p))}function h(p){const m=XE(u);if(p===126)return d>1?l(p):(o.consume(p),d++,h);if(d<2&&!n)return l(p);const g=o.exit("strikethroughSequenceTemporary"),y=XE(p);return g._open=!y||y===2&&!!m,g._close=!m||m===2&&!!y,a(p)}}}class T1t{constructor(){this.map=[]}add(t,n,r){A1t(this,t,n,r)}consume(t){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push(t.slice()),t.length=0;let i=r.pop();for(;i;){for(const s of i)t.push(s);i=r.pop()}this.map.length=0}}function A1t(e,t,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<e.map.length;){if(e.map[i][0]===t){e.map[i][1]+=n,e.map[i][2].push(...r);return}i+=1}e.map.push([t,n,r])}}function k1t(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function I1t(){return{flow:{null:{name:"table",tokenize:R1t,resolveAll:D1t}}}}function R1t(e,t,n){const r=this;let i=0,s=0,o;return a;function a(I){let P=r.events.length-1;for(;P>-1;){const O=r.events[P][1].type;if(O==="lineEnding"||O==="linePrefix")P--;else break}const N=P>-1?r.events[P][1].type:null,M=N==="tableHead"||N==="tableRow"?S:l;return M===S&&r.parser.lazy[r.now().line]?n(I):M(I)}function l(I){return e.enter("tableHead"),e.enter("tableRow"),u(I)}function u(I){return I===124||(o=!0,s+=1),c(I)}function c(I){return I===null?n(I):Bn(I)?s>1?(s=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(I),e.exit("lineEnding"),h):n(I):Dr(I)?Xr(e,c,"whitespace")(I):(s+=1,o&&(o=!1,i+=1),I===124?(e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),o=!0,c):(e.enter("data"),d(I)))}function d(I){return I===null||I===124||Bi(I)?(e.exit("data"),c(I)):(e.consume(I),I===92?f:d)}function f(I){return I===92||I===124?(e.consume(I),d):d(I)}function h(I){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(I):(e.enter("tableDelimiterRow"),o=!1,Dr(I)?Xr(e,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):p(I))}function p(I){return I===45||I===58?g(I):I===124?(o=!0,e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),m):E(I)}function m(I){return Dr(I)?Xr(e,g,"whitespace")(I):g(I)}function g(I){return I===58?(s+=1,o=!0,e.enter("tableDelimiterMarker"),e.consume(I),e.exit("tableDelimiterMarker"),y):I===45?(s+=1,y(I)):I===null||Bn(I)?_(I):E(I)}function y(I){return I===45?(e.enter("tableDelimiterFiller"),v(I)):E(I)}function v(I){return I===45?(e.consume(I),v):I===58?(o=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(I),e.exit("tableDelimiterMarker"),b):(e.exit("tableDelimiterFiller"),b(I))}function b(I){return Dr(I)?Xr(e,_,"whitespace")(I):_(I)}function _(I){return I===124?p(I):I===null||Bn(I)?!o||i!==s?E(I):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(I)):E(I)}function E(I){return n(I)}function S(I){return e.enter("tableRow"),T(I)}function T(I){return I===124?(e.enter("tableCellDivider"),e.consume(I),e.exit("tableCellDivider"),T):I===null||Bn(I)?(e.exit("tableRow"),t(I)):Dr(I)?Xr(e,T,"whitespace")(I):(e.enter("data"),A(I))}function A(I){return I===null||I===124||Bi(I)?(e.exit("data"),T(I)):(e.consume(I),I===92?R:A)}function R(I){return I===92||I===124?(e.consume(I),A):A(I)}}function D1t(e,t){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,u,c,d;const f=new T1t;for(;++n<e.length;){const h=e[n],p=h[1];h[0]==="enter"?p.type==="tableHead"?(a=!1,l!==0&&(Kpe(f,t,l,u,c),c=void 0,l=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,c={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",c,t]])),i=p.type==="tableDelimiterRow"?2:c?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=R3(f,t,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=R3(f,t,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):p.type==="tableHead"?(a=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],d=R3(f,t,s,i,n,d)):o[1]!==0&&(d=R3(f,t,o,i,n,d)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&Kpe(f,t,l,u,c),f.consume(t.events),n=-1;++n<t.events.length;){const h=t.events[n];h[0]==="enter"&&h[1].type==="table"&&(h[1]._align=k1t(t.events,n))}return e}function R3(e,t,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},B_(t.events,n[0])),e.add(n[0],0,[["exit",s,t]]));const l=B_(t.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},e.add(n[1],0,[["enter",s,t]]),n[2]!==0){const u=B_(t.events,n[2]),c=B_(t.events,n[3]),d={type:a,start:Object.assign({},u),end:Object.assign({},c)};if(e.add(n[2],0,[["enter",d,t]]),r!==2){const f=t.events[n[2]],h=t.events[n[3]];if(f[1].end=Object.assign({},h[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,m=n[3]-n[2]-1;e.add(p,m,[])}}e.add(n[3]+1,0,[["exit",d,t]])}return i!==void 0&&(s.end=Object.assign({},B_(t.events,i)),e.add(i,0,[["exit",s,t]]),s=void 0),s}function Kpe(e,t,n,r,i){const s=[],o=B_(t.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,t])),r.end=Object.assign({},o),s.push(["exit",r,t]),e.add(n+1,0,s)}function B_(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const P1t={name:"tasklistCheck",tokenize:N1t};function O1t(){return{text:{91:P1t}}}function N1t(e,t,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),s)}function s(l){return Bi(l)?(e.enter("taskListCheckValueUnchecked"),e.consume(l),e.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(e.enter("taskListCheckValueChecked"),e.consume(l),e.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(e.enter("taskListCheckMarker"),e.consume(l),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(l)}function a(l){return Bn(l)?t(l):Dr(l)?e.check({tokenize:M1t},t,n)(l):n(l)}}function M1t(e,t,n){return Xr(e,r,"whitespace");function r(i){return i===null?n(i):t(i)}}function $1t(e){return HIe([a1t(),y1t(),S1t(e),I1t(),O1t()])}const F1t={};function L1t(e){const t=this,n=e||F1t,r=t.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push($1t(n)),s.push(r1t()),o.push(i1t(n))}function j1t(e){return!!e&&typeof e=="object"&&e.type==="text"}function B1t(e){return!!e&&typeof e=="object"&&e.type==="element"}const z1t={p({node:e,...t}){return w.jsx(He,{...t,pb:8,fw:"inherit",ref:void 0})},h1({node:e,...t}){return w.jsx(ri,{...t,order:1,pb:12})},h2({node:e,...t}){return w.jsx(ri,{...t,order:2,pb:12})},h3({node:e,...t}){return w.jsx(ri,{...t,order:3,pb:12})},h4({node:e,...t}){return w.jsx(ri,{...t,order:4,pb:12})},h5({node:e,...t}){return w.jsx(ri,{...t,order:5,pb:12})},h6({node:e,...t}){return w.jsx(ri,{...t,order:6,pb:12})},a({node:e,...t}){return w.jsx(Ww,{...t,ref:void 0})},ul({node:e,...t}){return w.jsx(wl,{withPadding:!0,...t,pb:8})},ol({node:e,type:t,...n}){return w.jsx(wl,{...n,type:"ordered",withPadding:!0,pb:8})},table({node:e,...t}){return w.jsx(In,{...t,mb:12,borderColor:"grey"})},thead({node:e,...t}){return w.jsx(In.Thead,{...t})},tbody({node:e,...t}){return w.jsx(In.Tbody,{...t})},tr({node:e,...t}){return w.jsx(In.Tr,{...t})},th({node:e,...t}){return w.jsx(In.Th,{...t})},td({node:e,...t}){return w.jsx(In.Td,{...t})},img({node:e,width:t,height:n,src:r,...i}){return w.jsx(x0,{...i,h:n,w:t,src:r?.startsWith("http")?r:`${as}${r}`})}};function Zp({text:e,required:t}){const n=k.useCallback(()=>r=>{if(!t||!r)return;let i=null,s=null;IR(r,(l,u,c)=>{B1t(l)&&(i=l,s=c)});const o=i,a=s;if(o!==null){const l={type:"element",tagName:"span",properties:{style:"color: #fa5252; margin-left: 4px"},children:[{type:"text",value:"*"}]};if(j1t(o.children.at(-1))){const c=o.children.at(-1).value.split(" "),d=c.pop(),f=c.join(" "),h={type:"element",tagName:"span",properties:{},children:[{type:"text",value:f?`${f} `:""},{type:"element",tagName:"span",properties:{style:"white-space: nowrap"},children:[{type:"text",value:`${d}`}]},l]};o.children.splice(o.children.length-1,1,h)}else{const u={type:"element",tagName:"span",properties:{style:"white-space: nowrap; display: inline-flex;"},children:[o,l]};if(a){const c=a.children.indexOf(o);c!==-1&&a.children.splice(c,1,u)}}}},[t]);return e.length>0&&w.jsx(smt,{components:z1t,rehypePlugins:[Iyt,n],remarkPlugins:[L1t],children:e})}function l4({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have ${t==="error"?"an error":"a warning"} at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return w.jsx(Zp,{text:n})}const c_=14;function V1t({completed:e,inProgress:t,rejected:n}){return w.jsxs(Rt,{ml:4,gap:4,children:[w.jsx(bt,{label:"Completed",children:w.jsx(_o,{variant:"light",color:"green",leftSection:w.jsx(mv,{width:c_,height:c_,style:{paddingTop:1}}),pb:1,children:e})}),w.jsx(bt,{label:"In Progress",children:w.jsx(_o,{variant:"light",color:"orange",leftSection:w.jsx(xIe,{width:c_,height:c_,style:{paddingTop:1}}),pb:1,children:t})}),w.jsx(bt,{label:"Rejected",children:w.jsx(_o,{variant:"light",color:"red",leftSection:w.jsx(Wg,{width:c_,height:c_,style:{paddingTop:1}}),pb:1,children:n})})]})}async function bG(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function ZT(e){const t=e;return typeof t=="object"&&t&&t.participantId!==void 0}function Ad(e){return!!e&&e.isCloudEngine()}function U1t(e,t,n,r,i){const s=Object.values(e).filter(l=>l.endTime>-1).map(l=>l.componentName),o=i!==void 0;return{total:t.map(l=>n.components[l]?1:Object.entries(e).filter(([u,c])=>u.includes(`${l}_`)).length).reduce((l,u)=>l+u,0),answered:s,isDynamic:o}}const IDe=k.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),t1=()=>k.useContext(IDe);function H1t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=k.useState(t),[o,a]=k.useState(!1),{storageEngine:l}=Vi(),u=async()=>{if(l&&Ad(l))try{await l.logout()}catch(h){console.error(`There was an issue signing-out the user: ${h.message}`)}finally{s(n)}},c=k.useCallback(()=>{a(!0)},[]);k.useEffect(()=>{(async()=>{if(l?.getEngine()==="supabase")try{await l.getSession()}catch(p){console.error("Supabase session check failed",p)}})()},[l,c]);const d=async h=>l&&Ad(l)?await l.validateUser(h,!0):!1;k.useEffect(()=>{s(t);const h=async g=>{if(s(y=>({user:y.user,isAdmin:y.isAdmin,determiningStatus:!0,adminVerification:!1})),g){const y={user:g,determiningStatus:!1,isAdmin:!1,adminVerification:!0},v=await d(y);y.isAdmin=!!v,s(y)}else u()},m=(async()=>(l&&Ad(l)?(await l.getUserManagementData("authentication"))?.isEnabled?l.unsubscribe(h):s(r):l&&s(r),()=>{}))();return()=>{m.then(g=>g())}},[l,o]);const f=k.useMemo(()=>({user:i,triggerAuth:c,logout:u,verifyAdminStatus:d}),[i]);return w.jsx(IDe.Provider,{value:f,children:i.determiningStatus?w.jsx(hu,{visible:!0}):e})}function q1t({configName:e,config:t,url:n,modes:r}){const{storageEngine:i}=Vi(),[s,o]=k.useState(null);k.useEffect(()=>{i&&i.getParticipantsStatusCounts(e).then(c=>{o(c)})},[e,i]);const{minTime:a,maxTime:l}=k.useMemo(()=>{if(!s)return{minTime:null,maxTime:null};if(!s.minTime||!s.maxTime)return{minTime:null,maxTime:null};const c=typeof s.minTime=="number"?new Date(s.minTime):s.minTime.toDate(),d=typeof s.maxTime=="number"?new Date(s.maxTime):s.maxTime.toDate();return{minTime:c.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[s]),u=k.useMemo(()=>r?r.dataCollectionEnabled?s&&(s.inProgress>0||s.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[r,s]);return w.jsx(Zv,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(He,{fw:"bold",children:e}),w.jsxs(Rt,{align:"center",direction:"row",children:[w.jsx(Vd,{color:"red"}),w.jsx(He,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),w.jsx(l4,{issues:t.errors,type:"error"}),t.warnings.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs(Rt,{align:"center",direction:"row",children:[w.jsx(Vd,{color:"orange"}),w.jsx(He,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),w.jsx(l4,{issues:t.warnings,type:"warning"})]})]}):w.jsxs(w.Fragment,{children:[w.jsx(Rt,{direction:"row",justify:"space-between",children:w.jsx(He,{fw:"bold",children:t.studyMetadata.title})}),w.jsxs(He,{c:"dimmed",children:[w.jsx(He,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),w.jsx(He,{c:"dimmed",children:t.studyMetadata.description}),w.jsx(He,{c:"dimmed",ta:"right",style:{paddingRight:5},children:w.jsxs(Ww,{target:"_blank",onClick:c=>c.stopPropagation(),href:`https://github.com/revisit-studies/study/tree/main/public/${n}`,children:["View source:"," ",n,w.jsx(_ut,{style:{width:Ye(18),height:Ye(18),marginLeft:Ye(2),marginBottom:Ye(-3)}})]})}),t.warnings.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs(Rt,{align:"center",direction:"row",children:[w.jsx(Vd,{color:"orange"}),w.jsx(He,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),w.jsx(l4,{issues:t.warnings,type:"warning"})]}),w.jsx(JC,{my:"md"}),w.jsxs(Rt,{direction:"row",gap:"sm",children:[w.jsxs(He,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",u]}),s&&w.jsx(V1t,{completed:s.completed,inProgress:s.inProgress,rejected:s.rejected}),w.jsxs(Rt,{ml:"auto",gap:"sm",opacity:.7,children:[r?.studyNavigatorEnabled?w.jsx(bt,{label:"Study navigator enabled",withinPortal:!0,children:w.jsx(EIe,{size:16,color:"green"})}):w.jsx(bt,{label:"Study navigator disabled",withinPortal:!0,children:w.jsx(yct,{size:16,color:"red"})}),r?.analyticsInterfacePubliclyAccessible?w.jsx(bt,{label:"Analytics interface publicly accessible",withinPortal:!0,children:w.jsx(vIe,{size:16,color:"green"})}):w.jsx(bt,{label:"Analytics interface not publicly accessible",withinPortal:!0,children:w.jsx(yIe,{size:16,color:"red"})}),i?.getEngine()==="localStorage"?w.jsx(bt,{label:"Local storage enabled",withinPortal:!0,position:"bottom",children:w.jsx(m6,{size:16,color:"green"})}):i?.getEngine()==="firebase"?w.jsx(bt,{label:"Firebase enabled",withinPortal:!0,position:"bottom",children:w.jsx(dIe,{size:16,color:"green"})}):i?.getEngine()==="supabase"?w.jsx(bt,{label:"Supabase enabled",withinPortal:!0,position:"bottom",children:w.jsx(aee,{size:16,color:"green"})}):w.jsx(bt,{label:"Unknown storage engine enabled",withinPortal:!0,position:"bottom",children:w.jsx(m6,{size:16,color:"red"})})]})]}),a&&l&&w.jsxs(He,{c:"dimmed",mt:4,children:["Activity:"," ",a," ",""," ",l]}),w.jsxs(Rt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[w.jsx(Yt,{leftSection:w.jsx(fIe,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${as}analysis/stats/${n}`,children:"Analyze & Manage Study"}),w.jsx(Yt,{leftSection:w.jsx(bIe,{}),component:"a",href:`${as}${n}`,children:"Go to Study"})]})]})},e)}function d_({configNames:e,studyConfigs:t,modesByConfig:n}){return e.map(r=>{const i=t[r];if(!i)return null;const s=kIe(r);return w.jsx(q1t,{configName:r,config:i,url:s,modes:n[r]??null},r)})}function W1t({globalConfig:e,studyConfigs:t}){const{storageEngine:n}=Vi(),{configsList:r}=e,[i,s]=k.useState({}),[o,a]=k.useState({});k.useEffect(()=>{async function b(){const _={},E={};await Promise.all(r.map(async S=>{if(n&&Ad(n)){const T=await n.getModes(S);_[S]=T.analyticsInterfacePubliclyAccessible,E[S]=T}else E[S]=null})),s(_),a(E)}b()},[r,n]);const{user:l}=t1(),u=k.useMemo(()=>r.filter(b=>i[b]||l.isAdmin),[r,i,l]),c=k.useMemo(()=>u.filter(b=>b.startsWith("demo-")),[u]),d=k.useMemo(()=>u.filter(b=>b.startsWith("tutorial")),[u]),f=k.useMemo(()=>u.filter(b=>b.startsWith("example-")),[u]),h=k.useMemo(()=>u.filter(b=>b.startsWith("test-")),[u]),p=k.useMemo(()=>u.filter(b=>b.startsWith("library-")),[u]),m=k.useMemo(()=>u.filter(b=>!b.startsWith("demo-")&&!b.startsWith("tutorial")&&!b.startsWith("example-")&&!b.startsWith("test-")&&!b.startsWith("library-")),[u]),[g]=nd(),y=k.useMemo(()=>g.get("tab")||(m.length>0?"Others":"Demos"),[m.length,g]),v=$l();return w.jsx(ps.Main,{children:w.jsxs(w0,{size:"sm",px:0,children:[w.jsx(x0,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${as}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),w.jsxs(wr,{variant:"outline",defaultValue:m.length>0?"Others":"Demos",value:y,onChange:b=>v(`/?tab=${b}`),children:[w.jsxs(wr.List,{children:[m.length>0&&w.jsx(wr.Tab,{value:"Others",children:"Your Studies"}),w.jsx(wr.Tab,{value:"Demos",children:"Demo Studies"}),w.jsx(wr.Tab,{value:"Examples",children:"Example Studies"}),w.jsx(wr.Tab,{value:"Tutorials",children:"Tutorials"}),w.jsx(wr.Tab,{value:"Tests",children:"Tests"}),w.jsx(wr.Tab,{value:"Libraries",children:"Libraries"})]}),m.length>0&&w.jsx(wr.Panel,{value:"Others",children:w.jsx(d_,{configNames:m,studyConfigs:t,modesByConfig:o})}),w.jsxs(wr.Panel,{value:"Demos",children:[w.jsx(He,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),w.jsx(d_,{configNames:c,studyConfigs:t,modesByConfig:o})]}),w.jsxs(wr.Panel,{value:"Examples",children:[w.jsx(He,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),w.jsx(d_,{configNames:f,studyConfigs:t,modesByConfig:o})]}),w.jsxs(wr.Panel,{value:"Tutorials",children:[w.jsx(He,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),w.jsx(d_,{configNames:d,studyConfigs:t,modesByConfig:o})]}),w.jsxs(wr.Panel,{value:"Tests",children:[w.jsx(He,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),w.jsx(d_,{configNames:h,studyConfigs:t,modesByConfig:o})]}),w.jsxs(wr.Panel,{value:"Libraries",children:[w.jsx(He,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),w.jsx(d_,{configNames:p,studyConfigs:t,modesByConfig:o})]})]})]})})}var jz={exports:{}},Bz={};var Xpe;function G1t(){if(Xpe)return Bz;Xpe=1;var e=fF();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return Bz.useSyncExternalStoreWithSelector=function(l,u,c,d,f){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function g(E){if(!y){if(y=!0,v=E,E=d(E),f!==void 0&&p.hasValue){var S=p.value;if(f(S,E))return b=S}return b=E}if(S=b,n(v,E))return S;var T=d(E);return f!==void 0&&f(S,T)?(v=E,S):(v=E,b=T)}var y=!1,v,b,_=c===void 0?null:c;return[function(){return g(u())},_===null?void 0:function(){return g(_())}]},[u,c,d,f]);var m=r(l,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},Bz}var Qpe;function Y1t(){return Qpe||(Qpe=1,jz.exports=G1t()),jz.exports}var K1t=Y1t();function X1t(e){e()}function Q1t(){let e=null,t=null;return{clear(){e=null,t=null},notify(){X1t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Jpe={notify(){},get:()=>[]};function J1t(e,t){let n,r=Jpe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return s}function c(){i++,n||(n=e.subscribe(l),r=Q1t())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Jpe)}function f(){s||(s=!0,c())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var Z1t=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ebt=Z1t(),tbt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nbt=tbt(),rbt=()=>ebt||nbt?k.useLayoutEffect:k.useEffect,ibt=rbt(),sbt=Symbol.for("react-redux-context"),obt=typeof globalThis<"u"?globalThis:{};function abt(){if(!k.createContext)return{};const e=obt[sbt]??=new Map;let t=e.get(k.createContext);return t||(t=k.createContext(null),e.set(k.createContext,t)),t}var gv=abt();function lbt(e){const{children:t,context:n,serverState:r,store:i}=e,s=k.useMemo(()=>{const l=J1t(i);return{store:i,subscription:l,getServerState:r?()=>r:void 0}},[i,r]),o=k.useMemo(()=>i.getState(),[i]);ibt(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==i.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,o]);const a=n||gv;return k.createElement(a.Provider,{value:s},t)}var ubt=lbt;function Nee(e=gv){return function(){return k.useContext(e)}}var RDe=Nee();function DDe(e=gv){const t=e===gv?RDe:Nee(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var cbt=DDe();function dbt(e=gv){const t=e===gv?cbt:DDe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var PDe=dbt(),fbt=(e,t)=>e===t;function hbt(e=gv){const t=e===gv?RDe:Nee(e),n=(r,i={})=>{const{equalityFn:s=fbt}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:l,getServerState:u}=o;k.useRef(!0);const c=k.useCallback({[r.name](f){return r(f)}}[r.name],[r]),d=K1t.useSyncExternalStoreWithSelector(l.addNestedSub,a.getState,u||a.getState,c,s);return k.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var pbt=hbt();const mbt="/template/assets/VLAT1-vnvZ7yRm.png",gbt=Object.freeze(Object.defineProperty({__proto__:null,default:mbt},Symbol.toStringTag,{value:"Module"})),ybt="/template/assets/VLAT10-BMGl61Mu.png",vbt=Object.freeze(Object.defineProperty({__proto__:null,default:ybt},Symbol.toStringTag,{value:"Module"})),bbt="/template/assets/VLAT11-Bxb0LCYD.png",wbt=Object.freeze(Object.defineProperty({__proto__:null,default:bbt},Symbol.toStringTag,{value:"Module"})),xbt="/template/assets/VLAT12-Ch9t16aS.png",_bt=Object.freeze(Object.defineProperty({__proto__:null,default:xbt},Symbol.toStringTag,{value:"Module"})),Ebt="/template/assets/VLAT2-Ck6767Xc.png",Cbt=Object.freeze(Object.defineProperty({__proto__:null,default:Ebt},Symbol.toStringTag,{value:"Module"})),Sbt="/template/assets/VLAT3-Cwe4YjoY.png",Tbt=Object.freeze(Object.defineProperty({__proto__:null,default:Sbt},Symbol.toStringTag,{value:"Module"})),Abt="/template/assets/VLAT4-CZ1oExNp.png",kbt=Object.freeze(Object.defineProperty({__proto__:null,default:Abt},Symbol.toStringTag,{value:"Module"})),Ibt="/template/assets/VLAT5-C6h4Z1Dz.png",Rbt=Object.freeze(Object.defineProperty({__proto__:null,default:Ibt},Symbol.toStringTag,{value:"Module"})),Dbt="/template/assets/VLAT6-BSRlVaih.png",Pbt=Object.freeze(Object.defineProperty({__proto__:null,default:Dbt},Symbol.toStringTag,{value:"Module"})),Obt="/template/assets/VLAT7-BF4fuAsD.png",Nbt=Object.freeze(Object.defineProperty({__proto__:null,default:Obt},Symbol.toStringTag,{value:"Module"})),Mbt="/template/assets/VLAT8-Cf_OYzE7.png",$bt=Object.freeze(Object.defineProperty({__proto__:null,default:Mbt},Symbol.toStringTag,{value:"Module"})),Fbt="/template/assets/VLAT9-CkTk-Ex0.png",Lbt=Object.freeze(Object.defineProperty({__proto__:null,default:Fbt},Symbol.toStringTag,{value:"Module"})),Mee=[{question:"What was the price of a barrel of oil in February 2015?",img:"VLAT1",name:"0",options:["$57.36","$47.82","$50.24","$39.72","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"line",originID:1,task:"Retrieve Value",CVR:1,P:.95,D:.07},{question:"In which month was the price of a barrel of oil the lowest in 2015?",img:"VLAT1",name:"1",options:["March","May","July","December","Skip"],answer:"",trueAnswer:3,required:!0,chartType:"line",originID:2,task:"Find Extremum",CVR:1,P:.97,D:.06},{question:"What was the price range of a barrel of oil in 2015?",img:"VLAT1",name:"2",options:["$35 - $65","$48.36 - $60.95","$37.04 - $48.36","$37.04 - $60.95","Skip"],answer:"",trueAnswer:3,required:!0,chartType:"line",originID:3,task:"Determine Range",CVR:1,P:.56,D:.66},{question:"Over the course of the second half of 2015, the price of a barrel of oil was",img:"VLAT1",name:"3",options:["Rising","Falling","Staying","Skip"],trueAnswer:1,answer:"",required:!0,chartType:"line",originID:4,task:"Find Correlations/Trends",CVR:1,P:.98,D:.03},{question:"About how much did the price of a barrel of oil fall from April to September in 2015?",img:"VLAT1",name:"4",options:["$4","$15","$17","$45","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"line",originID:5,task:"Make Comparisons",CVR:.2,P:.77,D:.44},{question:"What is the average internet speed in Japan?",img:"VLAT2",name:"5",options:["10 Mbps","14 Mbps","15 Mbps","16 Mbps","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"bar",originID:6,task:"Retrieve Value",CVR:1,P:.88,D:.21},{question:"In which country is the average internet speed the fastest in Asia?",img:"VLAT2",name:"6",options:["China","Hong Kong","South Korea","Vietnam","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"bar",originID:7,task:"Find Extremum",CVR:1,P:.98,D:.05},{question:"What is the range of the average internet speed in Asia?",img:"VLAT2",name:"7",options:["0 - 22 Mbps"," 2 - 20.5 Mbps","3 - 20 Mbps","3.4 - 7.8 Mbps","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"bar",originID:8,task:"Determine Range",CVR:.6,P:.54,D:.61},{question:"How many countries in Asia have an average internet speed that is slower than that of Thailand?",img:"VLAT2",name:"8",options:["5 Countries"," 6 Countries","7 Countries","8 Countries","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"bar",originID:9,task:"Make Comparisons",CVR:.2,P:.4,D:.23},{question:"What is the cost of peanuts in Las Vegas?",img:"VLAT3",name:"9",options:["$12"," $16.7","$23.4","$35.4","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"stackbar",originID:10,task:"Retrieve Value (Absolute Value)",CVR:.2,P:.38,D:.66},{question:"About what is the ratio of the cost of a sandwich to the total cost of room service in Seattle?",img:"VLAT3",name:"10",options:["1 to 10","2 to 10","4 to 10","6 to 10","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"stackbar",originID:11,task:"Retrieve Value (Relative Value)",CVR:.2,P:.36,D:.48},{question:"In which city is the cost of soda the highest?",img:"VLAT3",name:"11",options:["New York City","Las Vegas","Atlanta","Washington D.C.","Skip"],answer:"",trueAnswer:3,required:!0,chartType:"stackbar",originID:12,task:"Find Extremum",CVR:.2,P:.69,D:.45},{question:"The cost of vodka in Atlanta is higher than that of Honolulu.",img:"VLAT3",name:"13",options:["True","False","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"stackbar",originID:14,task:"Make Comparisons (Absolute Value)",CVR:.2,P:.59,D:.52},{question:"The ratio of the cost of Soda to the cost of Water in Orlando is higher than in that of Washington D.C.",img:"VLAT3",name:"14",options:["True","False","Skip"],trueAnswer:1,answer:"",required:!0,chartType:"stackbar",originID:15,task:"Make Comparisons (Relative Value)",CVR:.2,P:.47,D:.32},{question:"What is the approval rating of Republicans among the people who have the education level of Postgraduate Study?",img:"VLAT4",name:"15",options:["38%","47%","53%","62%","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"100% stackbar",originID:16,task:"Retrieve Value (Relative Value)",CVR:1,P:.49,D:.57},{question:"What is the education level of people in which the Democrats have the lowest approval rating?",img:"VLAT4",name:"16",options:["High School Graduate or Less","Some College Degree","College Graduate","Postgraduate study","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"100% stackbar",originID:17,task:"Find Extremum (Relative Value)",CVR:.6,P:.9,D:.21},{question:"The approval rating of Republicans for the people who have the education level of Some College Degree is lower than that for the people who have the education level of Postgraduate Study.",img:"VLAT4",name:"17",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"100% stackbar",originID:18,task:"Make Comparisons (Relative Value)",CVR:1,P:.54,D:.54},{question:"About what is the global smartphone market share of Samsung?",img:"VLAT5",name:"18",options:["15%","25%","33%","50%","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"pie",originID:19,task:"Retrieve Value (Relative Value)",CVR:.6,P:.72,D:.34},{question:"In which company is the global smartphone market share the smallest?",img:"VLAT5",name:"19",options:["Apple","Xiaomi","Lenovo","Others","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"pie",originID:20,task:"Find Extremum (Relative Value)",CVR:.6,P:.98,D:.03},{question:"The global smartphone market share of Apple is larger than that of Huawei.",img:"VLAT5",name:"20",options:["True","False","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"pie",originID:21,task:"Make Comparisons (Relative Value)",CVR:.6,P:1,D:0},{question:"How many people have rated the taxi between 4.0 and 4.2?",img:"VLAT6",name:"21",options:["145","153","200","240","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"histogram",originID:22,task:"Retrieve Value (Derived Value)",CVR:1,P:.84,D:.26},{question:"What is the rating that the people have rated the taxi the most?",img:"VLAT6",name:"22",options:["4.2-4.4","4.4-4.6","4.6-4.8","4.8-5.0","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"histogram",originID:23,task:"Find Extremum (Derived Value)",CVR:1,P:.94,D:.06},{question:"More people have rated the taxi between 4.6 and 4.8 than between 4.2 and 4.4.",img:"VLAT6",name:"24",options:["True","False","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"histogram",originID:25,task:"Make Comparisons (Derived Value)",CVR:1,P:.86,D:.18},{question:"What is the weight for the person who is 165.1 cm tall?",img:"VLAT7",name:"26",options:["53.9kg","67.7kg","70.5kg","82.7kg","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"scatterplot",originID:27,task:"Retrieve Value",CVR:1,P:.85,D:.27},{question:"What is the height for the tallest person among the 85 males?",img:"VLAT7",name:"27",options:["175.3cm","192cm","197.1cm","200cm","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"scatterplot",originID:28,task:"Find Extremum",CVR:1,P:.76,D:.39},{question:"What is the range in weight for the 85 males?",img:"VLAT7",name:"28",options:["40 - 130kg","62.3 - 90.9kg","53.9 - 102.3kg","53.9 - 123.6kg","Skip"],answer:"",trueAnswer:3,required:!0,chartType:"scatterplot",originID:29,task:"Determine Range",CVR:.6,P:.53,D:.49},{question:"What is the height for a person who lies outside the others the most?",img:"VLAT7",name:"30",options:["167.4cm","175.3cm","193cm","197.1cm","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"scatterplot",originID:31,task:"Find Anomalies",CVR:.6,P:.42,D:.29},{question:"A group of males are gathered around the height of 176 cm and the weight of 70 kg.",img:"VLAT7",name:"31",options:["True","False","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"scatterplot",originID:32,task:"Find Clusters",CVR:.2,P:.9,D:.23},{question:"There is a negative linear relationship between the height and the weight of the 85 males.",img:"VLAT7",name:"32",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"scatterplot",originID:33,task:"Find Correlations/Trends",CVR:1,P:.52,D:.66},{question:"The weights for males with the height of 188 cm are all the same.",img:"VLAT7",name:"33",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"scatterplot",originID:34,task:"Make Comparisons",CVR:.6,P:.79,D:.2},{question:"What was the average price of a pound of coffee beans in September 2013?",img:"VLAT8",name:"34",options:["$4.9","$5.0","$5.1","$5.2","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"area",originID:35,task:"Retrieve Value",CVR:1,P:.75,D:.34},{question:"When was the average price of a pound of coffee beans at minimum?",img:"VLAT8",name:"35",options:["April 2013","September 2013","June 2014","December 2014","Skip"],answer:"",trueAnswer:3,required:!0,chartType:"area",originID:36,task:"Find Extremum",CVR:1,P:.44,D:.33},{question:"What was the range of the average price of a pound of coffee beans between January 2013 and December 2014?",img:"VLAT8",name:"36",options:["$4.4 - $6.2","$4.6 - $5.9","$4.6 - $6.0","$4.6 - $6.1","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"area",originID:37,task:"Determine Range",CVR:.6,P:.38,D:.31},{question:"Over the course of 2013, the average price of a pound of coffee beans was",img:"VLAT8",name:"37",options:["Rising","Falling","Staying","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"area",originID:38,task:"Find Correlations/Trends",CVR:1,P:.94,D:.14},{question:"What was the number of girls named 'Amelia' in 2010 in the UK?",img:"VLAT9",name:"39",options:["1500","3800","4200","8000","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"stackarea",originID:40,task:"Retrieve Value (Absolute Value)",CVR:.2,P:.15,D:.29},{question:"About what was the ratio of the number of girls named 'Olivia' to those named 'Isla' in 2014 in the UK?",img:"VLAT9",name:"40",options:["1 to 1","1 to 2","1 to 3","1 to 4","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"stackarea",originID:41,task:"Retrieve Value (Relative Value)",CVR:.6,P:.25,D:.29},{question:"Over the course of years between 2009 and 2014, when was the number of girls named 'Amelia' at the maximum?",img:"VLAT9",name:"41",options:["2009","2011","2012","2014","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"stackarea",originID:42,task:"Find Extremum",CVR:.6,P:.97,D:.04},{question:"The number of girls named 'Isla' was __________ from 2009 to 2012.",img:"VLAT9",name:"43",options:["Rising","Falling","Staying","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"stackarea",originID:44,task:"Find Correlations/Trends",CVR:1,P:.96,D:.09},{question:"In the UK, the number of girls named 'Amelia' in 2014 was more than it was in 2013.",img:"VLAT9",name:"44",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"stackarea",originID:45,task:"Make Comparisons (Absolute Value)",CVR:.6,P:.2,D:.17},{question:"Over the course of years between 2009 and 2014, the number of girls named 'Isla' was always more than 'Olivia'.",img:"VLAT9",name:"45",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"stackarea",originID:46,task:"Make Comparisons (Relative Value)",CVR:.2,P:.24,D:.2},{question:"What is the total length of the metro system in Beijing?",img:"VLAT10",name:"47",options:["330km","400km","530km","560km","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"bubble",originID:47,task:"Retrieve Value",CVR:1,P:.41,D:.46},{question:"Which city's metro system has the largest number of stations?",img:"VLAT10",name:"48",options:["Seoul","Beijing","New York City","Shanghai","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"bubble",originID:48,task:"Find Extremum",CVR:1,P:.69,D:.41},{question:"What is the range of the total length of the metro systems?",img:"VLAT10",name:"49",options:["150 - 600 km","240 - 380 km","240 - 560 km","180 - 560 km","Skip"],answer:"",trueAnswer:3,required:!0,chartType:"bubble",originID:49,task:"Determine Range",CVR:.6,P:.29,D:.46},{question:"Which city's metro system does lie outside the relationship between the total system length and the number of stations most?",img:"VLAT10",name:"51",options:["Tokyo","New York City","Beijing","London","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"bubble",originID:51,task:"Find Anomalies",CVR:.2,P:.53,D:.32},{question:"A group of the metro systems of the world has approximately 300 stations and around a 200 km system length.",img:"VLAT10",name:"52",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"bubble",originID:52,task:"Find Clusters",CVR:.2,P:.59,D:.5},{question:"In general, the ridership of the metro system increases as the number of stations increases.",img:"VLAT10",name:"53",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"bubble",originID:53,task:"Find Correlations/Trends",CVR:.2,P:.26,D:.09},{question:"The metro system in Shanghai has more ridership than the metro system in Beijing.",img:"VLAT10",name:"54",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"bubble",originID:54,task:"Make Comparisons",CVR:1,P:.8,D:.33},{question:"What was the unemployment rate for Indiana (IN) in 2015?",img:"VLAT11",name:"55",options:["1.1 - 2.3%","2.3 - 3.4%","3.4 - 4.6%","4.6 - 5.7%","Skip"],answer:"",trueAnswer:2,required:!0,chartType:"map",originID:55,task:"Retrieve Value (Approximate Value)",CVR:.6,P:.24,D:.01},{question:"In which state was the unemployment rate the highest in 2015?",img:"VLAT11",name:"56",options:["Alaska (AK)","New Mexico (NM)","Florida (FL)","New York (NY)","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"map",originID:56,task:"Find Extremum (Approximate Value)",CVR:.6,P:.97,D:.06},{question:"In 2015, the unemployment rate for Washington (WA) was higher than that of Wisconsin (WI).",img:"VLAT11",name:"57",options:["True","False","Skip"],answer:"",trueAnswer:0,required:!0,chartType:"map",originID:57,task:"Make Comparisons (Approximate Value)",CVR:.6,P:.92,D:.15},{question:"For which website was the number of unique visitors the largest in 2010?",img:"VLAT12",name:"58",options:["Facebook","Amazon","Bing","Google","Skip"],answer:"",trueAnswer:3,required:!0,chartType:"treemap",originID:59,task:"Find Extremum (Relative Value)",CVR:.6,P:.68,D:.37},{question:"The number of unique visitors for Amazon was more than that of Yahoo in 2010.",img:"VLAT12",name:"59",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"treemap",originID:60,task:"Make Comparisons (Relative Value)",CVR:.2,P:.42,D:.38},{question:"Samsung is nested in the Financial category.",img:"VLAT12",name:"60",options:["True","False","Skip"],answer:"",trueAnswer:1,required:!0,chartType:"treemap",originID:61,task:"Identify the Hierarchical Structure",CVR:1,P:.92,D:.13}],ODe=Object.freeze(Object.defineProperty({__proto__:null,VLATQuestions:Mee},Symbol.toStringTag,{value:"Module"}));function jbt({parameters:e,setAnswer:t,answers:n}){const r="vlatResp",i=`dynamicBlock_1_VlatTrial_${e.qidx}`,s=n[i]?.answer?.[r],[o,a]=k.useState(s||""),[l,u]=k.useState(!1);k.useEffect(()=>{const h=Object.keys(n[i]?.incorrectAnswers||{}).length>0;u(h)},[n,i]),k.useEffect(()=>{t({status:!0,answers:{[r]:o,score:e.score}})},[o,e.score,t]);const c=Mee.filter(h=>h.originID===e.activeQuestionIdx)[0],d=Object.assign({"./vlatImg/VLAT1.png":gbt,"./vlatImg/VLAT10.png":vbt,"./vlatImg/VLAT11.png":wbt,"./vlatImg/VLAT12.png":_bt,"./vlatImg/VLAT2.png":Cbt,"./vlatImg/VLAT3.png":Tbt,"./vlatImg/VLAT4.png":kbt,"./vlatImg/VLAT5.png":Rbt,"./vlatImg/VLAT6.png":Pbt,"./vlatImg/VLAT7.png":Nbt,"./vlatImg/VLAT8.png":$bt,"./vlatImg/VLAT9.png":Lbt}),f={};if(!c)return w.jsx(De,{children:"Loading question..."});for(const h in d)if(h){const p=h.split("/").pop()?.replace(".png","")||"",m=d[h];f[p]=m.default}return w.jsx(De,{children:w.jsxs(Ss,{children:[w.jsx(Ss.Col,{span:8,children:w.jsx(x0,{radius:"sm",src:f[c.img]||"",alt:"VIS",w:"100%",maw:900})}),w.jsx(Ss.Col,{span:4,pt:20,children:w.jsx(Tl.Group,{name:"question",label:c.question,value:`${o}`,size:"md",children:w.jsx(Gn,{mt:30,children:c.options.map((h,p)=>w.jsx(Tl,{disabled:s!==void 0&&s!==""||l,value:`${String.fromCharCode(65+p)}`,label:`${String.fromCharCode(65+p)}. ${h}`,onClick:()=>a(String.fromCharCode(65+p))},`op${p}`))})})})]})})}const NDe=Object.freeze(Object.defineProperty({__proto__:null,default:jbt},Symbol.toStringTag,{value:"Module"}));function Bbt(e,t,n){const r=Math.sqrt(2*Math.PI);return e.map(i=>{const s=-((i-t)**2)/(2*n**2);return 1/(r*n)*Math.exp(s)})}function $ee(e,t,n){return 1/(1+Math.exp(-e*(n+t)))}function zbt(e,t,n){return 1-$ee(e,t,n)}function Vbt(e,t,n){const r=$ee(e,t,n);return e**2*r*(1-r)}function Ubt(e){const t={},n=new Set;for(const[r,i,s,o,a]of e)t[r]=[i,s,o,a],n.add(o),n.add(a);return[t,n]}function Hbt(e,t,n){const r=(t-e)/(n-1);return Array.from({length:n},(i,s)=>e+s*r)}function qbt(e){const t=[[1,2.8483115,1.27221185,"Line","RV"],[2,3.040871,1.499349129,"Line","FE"],[3,.25584395,1.374537045,"Line","DR"],[4,3.4258115,1.468088919,"Line","FCT"],[5,1.3189766,1.137137131,"Line","MC"],[6,2.2163635,1.087065104,"Bar","RV"],[7,3.3441315,1.370983684,"Bar","FE"],[8,.1907385,1.072558537,"Bar","DR"],[9,-.766119,.565435838,"Bar","MC"],[10,-.483896,1.308078217,"Stacked","RV"],[11,-.878004,.748876272,"Stacked","RV"],[12,1.011948,.892274374,"Stacked","FE"],[14,.498654,.864483077,"Stacked","MC"],[15,-.2163795,.63115109,"Stacked","MC"],[16,-.021748,1.061661146,"100%","RV"],[17,2.1735685,1.260906618,"100%","FE"],[18,.1964695,1.006552927,"100%","MC"],[19,1.1781005,.952170323,"Pie","RV"],[20,3.4990835,1.266495326,"Pie","FE"],[21,4.577599,1.955349598,"Pie","MC"],[22,1.8068275,1.103396903,"Histogram","RV"],[23,2.825006,1.162700946,"Histogram","FE"],[25,2.1723395,.945254699,"Histogram","MC"],[27,1.85473395,1.128140859,"Scatterplot","RV"],[28,1.226966,1.183203925,"Scatterplot","FE"],[29,.184373,.910403565,"Scatterplot","DR"],[31,-.568358,.598194995,"Scatterplot","FA"],[32,2.1477415,1.293432284,"Scatterplot","FC"],[33,.093807,1.159459154,"Scatterplot","FCT"],[34,1.818106,.805688047,"Scatterplot","MC"],[35,1.3666385,.964108248,"Area","RV"],[36,-.4578085,.596634966,"Area","FE"],[37,-.945452,.576156905,"Area","DR"],[38,2.5183945,1.352297435,"Area","FCT"],[40,-2.567331,.727247878,"Stacked Area","RV"],[41,-1.6333105,.721289353,"Stacked Area","RV"],[42,3.0243125,1.39970206,"Stacked Area","FE"],[44,2.808996,1.391714903,"Stacked Area","FCT"],[45,-2.898462,.485882721,"Stacked Area","MC"],[46,-2.1752885,.564928587,"Stacked Area","MC"],[47,-.5241995,.741666943,"Bubble","RV"],[48,1.0380654,.89755236,"Bubble","FE"],[49,-1.1506875,.851390316,"Bubble","DR"],[51,.210506,.576817469,"Bubble","FA"],[52,.455853,.993160348,"Bubble","FC"],[53,-2.5113305,.431845454,"Bubble","FCT"],[54,1.4998025,1.154025598,"Bubble","MC"],[55,-3.2260095,.367490725,"Map","RV"],[56,3.1477645,1.401881342,"Map","FE"],[57,2.6187185,1.101469613,"Map","MC"],[59,.9082805,.949041643,"Tree","FE"],[60,-.5345505,.671887408,"Tree","MC"],[61,2.5394745,1.109762274,"Tree","ID"]],[n,r]=Ubt(t),i=new Set,s=[[2.98530963],[2.26547287],[.47080041],[.96055864],[.97129651],[.85147839],[.49167494],[.32598163],[.23617328],[.75140709],[.4379747],[.89021346],[1.95678745],[.46671114],[.43121635],[.48382087],[.7061291],[.25740084],[.57526741],[.41269657],[.44926689],[.34097188],[.6853534],[2.06499294],[.35356854],[.5014103],[.60471721],[.35648783],[.55006742],[.7328309],[.58740872],[.07316467],[.37773089],[.25774662],[1.67778516],[.37425087],[.00468991],[.09117124],[-.072024],[.27787841],[.50850991],[.26712845],[.23313045],[.17836876],[-.06713018],[2.52157004],[.2163555],[.19764337],[.16053735],[.01037715],[.49067257],[.37890493],[.14471502],[-.15786205],[.37664253],[-.12646154],[1.48456846],[.11995221],[.45500459],[.06510908],[.30381369],[.23628236],[-.0132403],[.12346196],[-.16156058],[-.11441727],[-.09874702],[2.06170801],[.03819284],[-.33842136],[-.299268],[-.18361791],[-.27032307],[-.36719226],[-.63351759],[-.13235381],[-.32526859],[-.75094893],[2.00068807],[-.21555599],[-.29719866],[-.73570516],[-.96429984],[-.62994905],[-.5959251],[-.75414598],[-.91139529],[-.23647941],[-1.15477916],[2.13079529],[-1.19334718],[-1.17815316],[-.3703066],[-.86774687],[-.62753559],[-1.24836742],[-.73756034],[-.57090316],[-1.36838053],[-1.10974556],[1.79120327],[-.99938515],[-1.8725358],[2.81432538],[1.95511785],[1.82598207],[1.91495919],[1.64615882],[1.73761896],[1.74653664],[1.51736399],[1.48752685],[1.97221306],[1.19522668],[2.34740724],[1.54242075],[1.95637583],[1.65824094],[1.68725777],[1.97725808],[1.58887618],[1.51179316],[1.44743075],[1.63524539],[1.34980521],[2.94575102],[1.50590524],[1.58325844],[1.33751502],[.97699839],[1.17390674],[1.45071628],[.89705259],[1.26159178],[1.28050271],[1.2415599],[2.4859962],[1.52956813],[.9266179],[1.55897714],[1.66185973],[1.39525797],[1.02554983],[1.56911437],[1.08589595],[1.2344817],[1.0596063],[2.3289334],[.9177088],[.91794547],[1.03755144],[1.35990785],[1.13449186],[.97657427],[.61813711],[.94747231],[.83248912],[1.15351712],[2.19894252],[1.29781779],[1.0320319],[.95034002],[1.17618522],[.97588753],[.87400339],[1.08163796],[.94947705],[1.11457895],[.63173389],[2.29482725],[.90212167],[.87044902],[.22467558],[.79733281],[.31442579],[.38325478],[.70994584],[1.06667696],[.89253087],[.34143484],[2.14695731],[.84056897],[.88750332],[1.08639498],[.88874537],[.7858341],[.7279417],[.12745017],[.29013591],[.4602226],[.74735825]],o=s.reduce((g,y)=>g+y[0],0)/s.length,a=s.reduce((g,y)=>g+(y[0]-o)**2,0)/s.length,l=Math.sqrt(a),u=Hbt(-5,5,200);let c=Bbt(u,o,l),d=o;if(Object.keys(e).length>0){for(const[g,y]of Object.entries(e)){const v=parseInt(g,10),[b,_,E,S]=n[v];r.delete(E),r.delete(S),i.add(`${E}::${S}`);const T=u.map(P=>y===0?zbt(_,b,P):$ee(_,b,P)),A=c.map((P,N)=>P*T[N]),R=A.reduce((P,N)=>P+N,0);c=A.map(P=>P/R)}d=u.reduce((g,y,v)=>g+y*c[v],0)}const f={},h=27-Object.keys(e).length,p=(g,y)=>i.has(`${g}::${y}`);for(const[g,y]of Object.entries(n)){const v=parseInt(g,10),[b,_,E,S]=y,T=r.has(E)||r.has(S);Object.hasOwn(e,v)||(r.size===0||h>r.size&&!p(E,S)||h<=r.size&&T)&&(f[v]=Vbt(_,b,d))}const m=Object.entries(f).reduce((g,y)=>y[1]>g[1]?y:g)[0];return[parseInt(m,10),d]}function MDe(e,t){const n={};for(let s=0;s<e.length;s+=1)n[parseInt(e[s],10)]=t[s];const[r,i]=qbt(n);return[r,i]}const $De=Object.freeze(Object.defineProperty({__proto__:null,getVLATnextqid:MDe},Symbol.toStringTag,{value:"Module"}));function Wbt({answers:e,currentStep:t,currentBlock:n}){const r="vlatResp",i=Object.entries(e).filter(([c,d])=>c.startsWith(`${n}_${t}`)&&d.endTime>-1),s=[],o=[];i.forEach(c=>{const d=c[1].parameters.activeQuestionIdx,f=c[1].answer[r]===c[1].correctAnswer[0].answer;s.push(d),o.push(f?1:0)});const[a,l]=MDe(s,o),u=+Mee.filter(c=>c.originID===a)[0].trueAnswer;return i.length===27?{component:null}:{component:"$adaptive-vlat.components.VlatTrial",parameters:{activeQuestionIdx:a,qidx:s.length,score:l},correctAnswer:[{id:r,answer:String.fromCharCode(65+u)}]}}const FDe=Object.freeze(Object.defineProperty({__proto__:null,default:Wbt},Symbol.toStringTag,{value:"Module"}));function Gbt({answers:e,currentStep:t,currentBlock:n}){const r=Object.entries(e).filter(([i,s])=>i.startsWith(`${n}_${t}`)&&s.endTime>-1);return r.length===0?{component:"$berlin-num.components.q1-choir-probability"}:r.length===1?{component:r[0][1]?.answer?.["q1-choir-probability"]===25?"$berlin-num.components.q2b-loaded-dice":"$berlin-num.components.q2a-dice-odd-numbers"}:r.length===2&&r[0][1]?.answer?.["q1-choir-probability"]===25?{component:r[1][1]?.answer?.["q2b-loaded-dice"]===20?null:"$berlin-num.components.q3-poisonous-mushrooms"}:{component:null}}const LDe=Object.freeze(Object.defineProperty({__proto__:null,default:Gbt},Symbol.toStringTag,{value:"Module"}));function Fee({width:e=60,height:t=36,fps:n=30,fftSize:r=256,barColor:i="#FA5252",barWidth:s=2}){const o=k.useRef(null),a=k.useRef(null),l=k.useRef(null),u=k.useRef(null),c=k.useRef(0),d=k.useRef(null),[f,h]=k.useState(null);return k.useEffect(()=>{let p=0;const m=1e3/n,g=v=>{if(c.current=requestAnimationFrame(g),v-p<m)return;p=v;const b=o.current,_=l.current;if(!b||!_)return;const E=b.getContext("2d");if(!E)return;const S=_.fftSize,T=new Uint8Array(S);_.getByteTimeDomainData(T);const A=Math.max(...T)/128-1,R=E.getImageData(s/2,0,b.width-s/2,b.height);E.putImageData(R,0,0),E.clearRect(b.width-s,0,s,b.height);const I=(1-A)*(b.height/2);E.beginPath(),E.moveTo(b.width-s-10,b.height/2),E.lineTo(b.width-s,b.height/2),E.moveTo(b.width-s,b.height-I),E.lineTo(b.width-s,I),E.strokeStyle=i,E.lineWidth=s,E.stroke()};return(async()=>{const v=o.current;if(!v||!v.getContext("2d"))return;const _=window.devicePixelRatio||1;v.width=e*_,v.height=t*_,v.style.width=`${e}px`,v.style.height=`${t}px`;try{const E=await navigator.mediaDevices.getUserMedia({audio:!0});d.current=E;const S=new window.AudioContext;a.current=S;const T=S.createMediaStreamSource(E);u.current=T;const A=S.createAnalyser();l.current=A,A.fftSize=r,T.connect(A),c.current=requestAnimationFrame(g)}catch(E){console.error("Error accessing microphone:",E),E instanceof Error?h(`Error accessing microphone: ${E.message}. Please grant permission.`):h("An unknown error occurred while accessing the microphone.")}})(),()=>{cancelAnimationFrame(c.current),l.current&&l.current.disconnect(),u.current&&u.current.disconnect(),d.current&&d.current.getTracks().forEach(v=>v.stop()),a.current&&a.current.state!=="closed"&&a.current.close()}},[e,t,n,r,i,s]),w.jsxs(Rt,{children:[f&&w.jsx("p",{style:{color:"red",maxWidth:`${e}px`},children:f}),w.jsx("canvas",{ref:o})]})}function Zpe({setAnswer:e}){return k.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,l=new Uint8Array(a);let u=!1;const c=()=>{if(!u){o.getByteFrequencyData(l);for(let d=0;d<a;d+=1)l[d]>0&&(u=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),w.jsx(Ko,{style:{height:"70%",width:"100%"},children:w.jsxs(Gn,{children:[w.jsx(He,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),w.jsx(He,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),w.jsx(He,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),w.jsx(Ko,{children:w.jsx(Fee,{height:200,width:400})})]})})}const jDe=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Zpe,default:Zpe},Symbol.toStringTag,{value:"Module"}));function Na(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ybt=typeof Symbol=="function"&&Symbol.observable||"@@observable",eme=Ybt,zz=()=>Math.random().toString(36).substring(7).split("").join("."),Kbt={INIT:`@@redux/INIT${zz()}`,REPLACE:`@@redux/REPLACE${zz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${zz()}`},_6=Kbt;function Lee(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function BDe(e,t,n){if(typeof e!="function")throw new Error(Na(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Na(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Na(1));return n(BDe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(l)throw new Error(Na(3));return i}function d(g){if(typeof g!="function")throw new Error(Na(4));if(l)throw new Error(Na(5));let y=!0;u();const v=a++;return o.set(v,g),function(){if(y){if(l)throw new Error(Na(6));y=!1,u(),o.delete(v),s=null}}}function f(g){if(!Lee(g))throw new Error(Na(7));if(typeof g.type>"u")throw new Error(Na(8));if(typeof g.type!="string")throw new Error(Na(17));if(l)throw new Error(Na(9));try{l=!0,i=r(i,g)}finally{l=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Na(10));r=g,f({type:_6.REPLACE})}function p(){const g=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Na(11));function v(){const _=y;_.next&&_.next(c())}return v(),{unsubscribe:g(v)}},[eme](){return this}}}return f({type:_6.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[eme]:p}}function Xbt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:_6.INIT})>"u")throw new Error(Na(12));if(typeof n(void 0,{type:_6.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Na(13))})}function Qbt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Xbt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(Na(14));u[d]=p,l=l||p!==h}return l=l||r.length!==Object.keys(o).length,l?u:o}}function E6(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Jbt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Na(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=e.map(l=>l(o));return s=E6(...a)(i.dispatch),{...i,dispatch:s}}}function Zbt(e){return Lee(e)&&"type"in e&&typeof e.type=="string"}var zDe=Symbol.for("immer-nothing"),tme=Symbol.for("immer-draftable"),qc=Symbol.for("immer-state");function Vf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Bk=Object.getPrototypeOf;function aw(e){return!!e&&!!e[qc]}function Gg(e){return e?VDe(e)||Array.isArray(e)||!!e[tme]||!!e.constructor?.[tme]||MR(e)||yL(e):!1}var ewt=Object.prototype.constructor.toString(),nme=new WeakMap;function VDe(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=nme.get(n);return r===void 0&&(r=Function.toString.call(n),nme.set(n,r)),r===ewt}function C6(e,t,n=!0){gL(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((r,i)=>t(i,r,e))}function gL(e){const t=e[qc];return t?t.type_:Array.isArray(e)?1:MR(e)?2:yL(e)?3:0}function wG(e,t){return gL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function UDe(e,t,n){const r=gL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function twt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function MR(e){return e instanceof Map}function yL(e){return e instanceof Set}function cb(e){return e.copy_||e.base_}function xG(e,t){if(MR(e))return new Map(e);if(yL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=VDe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[qc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Bk(e),r)}else{const r=Bk(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function jee(e,t=!1){return vL(e)||aw(e)||!Gg(e)||(gL(e)>1&&Object.defineProperties(e,{set:D3,add:D3,clear:D3,delete:D3}),Object.freeze(e),t&&Object.values(e).forEach(n=>jee(n,!0))),e}function nwt(){Vf(2)}var D3={value:nwt};function vL(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var rwt={};function lw(e){const t=rwt[e];return t||Vf(0,e),t}var zk;function HDe(){return zk}function iwt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function rme(e,t){t&&(lw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function _G(e){EG(e),e.drafts_.forEach(swt),e.drafts_=null}function EG(e){e===zk&&(zk=e.parent_)}function ime(e){return zk=iwt(zk,e)}function swt(e){const t=e[qc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sme(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[qc].modified_&&(_G(t),Vf(4)),Gg(e)&&(e=S6(t,e),t.parent_||T6(t,e)),t.patches_&&lw("Patches").generateReplacementPatches_(n[qc].base_,e,t.patches_,t.inversePatches_)):e=S6(t,n,[]),_G(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==zDe?e:void 0}function S6(e,t,n){if(vL(t))return t;const r=e.immer_.shouldUseStrictIteration(),i=t[qc];if(!i)return C6(t,(s,o)=>ome(e,i,t,s,o,n),r),t;if(i.scope_!==e)return t;if(!i.modified_)return T6(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,a=!1;i.type_===3&&(o=new Set(s),s.clear(),a=!0),C6(o,(l,u)=>ome(e,i,s,l,u,n,a),r),T6(e,s,!1),n&&e.patches_&&lw("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function ome(e,t,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const a=vL(i);if(!(a&&!o)){if(aw(i)){const l=s&&t&&t.type_!==3&&!wG(t.assigned_,r)?s.concat(r):void 0,u=S6(e,i,l);if(UDe(n,r,u),aw(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Gg(i)&&!a){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[r]===i&&a)return;S6(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(MR(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&T6(e,i)}}}function T6(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jee(t,n)}function owt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:HDe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Bee;n&&(i=[r],s=Vk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Bee={get(e,t){if(t===qc)return e;const n=cb(e);if(!wG(n,t))return awt(e,n,t);const r=n[t];return e.finalized_||!Gg(r)?r:r===Vz(e.base_,t)?(Uz(e),e.copy_[t]=SG(r,e)):r},has(e,t){return t in cb(e)},ownKeys(e){return Reflect.ownKeys(cb(e))},set(e,t,n){const r=qDe(cb(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Vz(cb(e),t),s=i?.[qc];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(twt(n,i)&&(n!==void 0||wG(e.base_,t)))return!0;Uz(e),CG(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Vz(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Uz(e),CG(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=cb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Vf(11)},getPrototypeOf(e){return Bk(e.base_)},setPrototypeOf(){Vf(12)}},Vk={};C6(Bee,(e,t)=>{Vk[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Vk.deleteProperty=function(e,t){return Vk.set.call(this,e,t,void 0)};Vk.set=function(e,t,n){return Bee.set.call(this,e[0],t,n,e[0])};function Vz(e,t){const n=e[qc];return(n?cb(n):e)[t]}function awt(e,t,n){const r=qDe(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}function qDe(e,t){if(!(t in e))return;let n=Bk(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Bk(n)}}function CG(e){e.modified_||(e.modified_=!0,e.parent_&&CG(e.parent_))}function Uz(e){e.copy_||(e.copy_=xG(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var lwt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Vf(6),r!==void 0&&typeof r!="function"&&Vf(7);let i;if(Gg(t)){const s=ime(this),o=SG(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?_G(s):EG(s)}return rme(s,r),sme(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===zDe&&(i=void 0),this.autoFreeze_&&jee(i,!0),r){const s=[],o=[];lw("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Vf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Gg(e)||Vf(8),aw(e)&&(e=uwt(e));const t=ime(this),n=SG(e,void 0);return n[qc].isManual_=!0,EG(t),n}finishDraft(e,t){const n=e&&e[qc];(!n||!n.isManual_)&&Vf(9);const{scope_:r}=n;return rme(r,t),sme(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=lw("Patches").applyPatches_;return aw(e)?r(e,t):this.produce(e,i=>r(i,t))}};function SG(e,t){const n=MR(e)?lw("MapSet").proxyMap_(e,t):yL(e)?lw("MapSet").proxySet_(e,t):owt(e,t);return(t?t.scope_:HDe()).drafts_.push(n),n}function uwt(e){return aw(e)||Vf(10,e),WDe(e)}function WDe(e){if(!Gg(e)||vL(e))return e;const t=e[qc];let n,r=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=xG(e,t.scope_.immer_.useStrictShallowCopy_),r=t.scope_.immer_.shouldUseStrictIteration()}else n=xG(e,!0);return C6(n,(i,s)=>{UDe(n,i,WDe(s))},r),t&&(t.finalized_=!1),n}var TG=new lwt,GDe=TG.produce,cwt=TG.setUseStrictIteration.bind(TG);function dwt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function fwt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function hwt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var ame=e=>Array.isArray(e)?e:[e];function pwt(e){const t=Array.isArray(e[0])?e[0]:e;return hwt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function mwt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var gwt=class{constructor(e){this.value=e}deref(){return this.value}},ywt=typeof WeakRef<"u"?WeakRef:gwt,vwt=0,lme=1;function P3(){return{s:vwt,v:void 0,o:null,p:null}}function YDe(e,t={}){let n=P3();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let a=n;const{length:l}=arguments;for(let d=0,f=l;d<f;d++){const h=arguments[d];if(typeof h=="function"||typeof h=="object"&&h!==null){let p=a.o;p===null&&(a.o=p=new WeakMap);const m=p.get(h);m===void 0?(a=P3(),p.set(h,a)):a=m}else{let p=a.p;p===null&&(a.p=p=new Map);const m=p.get(h);m===void 0?(a=P3(),p.set(h,a)):a=m}}const u=a;let c;if(a.s===lme)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=i?.deref?.()??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new ywt(c):c}return u.s=lme,u.v=c,c}return o.clearCache=()=>{n=P3(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function bwt(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),dwt(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:h=YDe,argsMemoizeOptions:p=[]}=c,m=ame(f),g=ame(p),y=pwt(i),v=d(function(){return s++,u.apply(null,arguments)},...m),b=h(function(){o++;const E=mwt(y,arguments);return a=v.apply(null,E),a},...g);return Object.assign(b,{resultFunc:u,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var KDe=bwt(YDe),wwt=Object.assign((e,t=KDe)=>{fwt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>wwt});function XDe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var xwt=XDe(),_wt=XDe,Ewt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?E6:E6.apply(null,arguments)};function ume(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ig(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Zbt(r)&&r.type===e,n}var QDe=class G2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,G2.prototype)}static get[Symbol.species](){return G2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new G2(...t[0].concat(this)):new G2(...t.concat(this))}};function cme(e){return Gg(e)?GDe(e,()=>{}):e}function O3(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Cwt(e){return typeof e=="boolean"}var Swt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new QDe;return n&&(Cwt(n)?o.push(xwt):o.push(_wt(n.extraArgument))),o},Twt="RTK_autoBatch",dme=e=>t=>{setTimeout(t,e)},Awt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:dme(10):e.type==="callback"?e.queueNotification:dme(e.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){try{return i=!c?.meta?.[Twt],s=!i,s&&(o||(o=!0,l(u))),r.dispatch(c)}finally{i=!0}}})},kwt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new QDe(e);return r&&i.push(Awt(typeof r=="object"?r:void 0)),i};function Iwt(e){const t=Swt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(Lee(n))a=Qbt(n);else throw new Error(Ig(1));let l;typeof r=="function"?l=r(t):l=t();let u=E6;i&&(u=Ewt({trace:!1,...typeof i=="object"&&i}));const c=Jbt(...l),d=kwt(c);let f=typeof o=="function"?o(d):d();const h=u(...f);return BDe(a,s,h)}function JDe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Ig(28));if(a in t)throw new Error(Ig(29));return t[a]=o,i},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}cwt(!1);function Rwt(e){return typeof e=="function"}function Dwt(e,t){let[n,r,i]=JDe(t),s;if(Rwt(e))s=()=>cme(e());else{const a=cme(e);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,d)=>{if(d)if(aw(c)){const h=d(c,l);return h===void 0?c:h}else{if(Gg(c))return GDe(c,f=>d(f,l));{const f=d(c,l);if(f===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return c},a)}return o.getInitialState=s,o}var Pwt=Symbol.for("rtk-slice-createasyncthunk");function Owt(e,t){return`${e}/${t}`}function Nwt({creators:e}={}){const t=e?.asyncThunk?.[Pwt];return function(r){const{name:i,reducerPath:s=i}=r;if(!i)throw new Error(Ig(11));const o=(typeof r.reducers=="function"?r.reducers(Fwt()):r.reducers)||{},a=Object.keys(o),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,_){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Ig(12));if(E in l.sliceCaseReducersByType)throw new Error(Ig(13));return l.sliceCaseReducersByType[E]=_,u},addMatcher(b,_){return l.sliceMatchers.push({matcher:b,reducer:_}),u},exposeAction(b,_){return l.actionCreators[b]=_,u},exposeCaseReducer(b,_){return l.sliceCaseReducersByName[b]=_,u}};a.forEach(b=>{const _=o[b],E={reducerName:b,type:Owt(i,b),createNotation:typeof r.reducers=="function"};jwt(_)?zwt(E,_,u,t):Lwt(E,_,u)});function c(){const[b={},_=[],E=void 0]=typeof r.extraReducers=="function"?JDe(r.extraReducers):[r.extraReducers],S={...b,...l.sliceCaseReducersByType};return Dwt(r.initialState,T=>{for(let A in S)T.addCase(A,S[A]);for(let A of l.sliceMatchers)T.addMatcher(A.matcher,A.reducer);for(let A of _)T.addMatcher(A.matcher,A.reducer);E&&T.addDefaultCase(E)})}const d=b=>b,f=new Map,h=new WeakMap;let p;function m(b,_){return p||(p=c()),p(b,_)}function g(){return p||(p=c()),p.getInitialState()}function y(b,_=!1){function E(T){let A=T[b];return typeof A>"u"&&_&&(A=O3(h,E,g)),A}function S(T=d){const A=O3(f,_,()=>new WeakMap);return O3(A,T,()=>{const R={};for(const[I,P]of Object.entries(r.selectors??{}))R[I]=Mwt(P,T,()=>O3(h,T,g),_);return R})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:i,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(s),injectInto(b,{reducerPath:_,...E}={}){const S=_??s;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function Mwt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var $wt=Nwt();function Fwt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Lwt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Bwt(r))throw new Error(Ig(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?ume(e,o):ume(e))}function jwt(e){return e._reducerDefinitionType==="asyncThunk"}function Bwt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function zwt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ig(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,d=i(e,s,c);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(t,{fulfilled:o||N3,pending:a||N3,rejected:l||N3,settled:u||N3})}function N3(){}function Ig(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function bL(e){return e.baseComponent!==void 0}function Yd(e){return e.order==="dynamic"}function Kd(e){return Yd(e)?[e.id]:e.components.flatMap(t=>typeof t=="string"?t:Kd(t))}function ZDe(e){return Yd(e)?[e]:e.components.flatMap(t=>typeof t=="string"?[]:ZDe(t))}function AG(e,t){return ZDe(t).find(r=>r.id===e)}function ePe(e){return Yd(e)?[]:[...e.components.flatMap(t=>typeof t=="string"?t:Yd(t)?[]:ePe(t)),...e.interruptions?.flatMap(t=>t.components)||[]]}function tPe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Kd(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Kd(e).length-1}];r+=1}else{const o=tPe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function nPe(e,t){const n=tPe(e,t,0);return typeof n=="number"?null:n}function rPe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=rPe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Vwt(e,t){const n=rPe(e,t,0);return n.found?n.distance:-1}function zee(e,t){return typeof e=="string"?e:Yd(e)?{...e,orderPath:t,components:[]}:{...e,orderPath:t,order:e.order,components:e.components.map((n,r)=>zee(n,`${t}-${r}`))}}var Y2={exports:{}};Y2.exports;var fme;function Uwt(){return fme||(fme=1,(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",_="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",A="[object WeakMap]",R="[object ArrayBuffer]",I="[object DataView]",P="[object Float32Array]",N="[object Float64Array]",M="[object Int8Array]",O="[object Int16Array]",j="[object Int32Array]",B="[object Uint8Array]",H="[object Uint8ClampedArray]",q="[object Uint16Array]",G="[object Uint32Array]",U=/[\\^$.*+?()[\]{}|]/g,L=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,V={};V[P]=V[N]=V[M]=V[O]=V[j]=V[B]=V[H]=V[q]=V[G]=!0,V[a]=V[l]=V[R]=V[c]=V[I]=V[d]=V[f]=V[h]=V[m]=V[g]=V[v]=V[_]=V[E]=V[S]=V[A]=!1;var Y=typeof $i=="object"&&$i&&$i.Object===Object&&$i,Q=typeof self=="object"&&self&&self.Object===Object&&self,ne=Y||Q||Function("return this")(),ue=t&&!t.nodeType&&t,se=ue&&!0&&e&&!e.nodeType&&e,ae=se&&se.exports===ue,he=ae&&Y.process,ie=(function(){try{var oe=se&&se.require&&se.require("util").types;return oe||he&&he.binding&&he.binding("util")}catch{}})(),le=ie&&ie.isTypedArray;function Ce(oe,ve,$e){switch($e.length){case 0:return oe.call(ve);case 1:return oe.call(ve,$e[0]);case 2:return oe.call(ve,$e[0],$e[1]);case 3:return oe.call(ve,$e[0],$e[1],$e[2])}return oe.apply(ve,$e)}function X(oe,ve){for(var $e=-1,It=Array(oe);++$e<oe;)It[$e]=ve($e);return It}function fe(oe){return function(ve){return oe(ve)}}function de(oe,ve){return oe?.[ve]}function te(oe,ve){return function($e){return oe(ve($e))}}var ee=Array.prototype,me=Function.prototype,Ie=Object.prototype,Te=ne["__core-js_shared__"],we=me.toString,Me=Ie.hasOwnProperty,ke=(function(){var oe=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return oe?"Symbol(src)_1."+oe:""})(),Oe=Ie.toString,xe=we.call(Object),je=RegExp("^"+we.call(Me).replace(U,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=ae?ne.Buffer:void 0,nt=ne.Symbol,it=ne.Uint8Array;Ve&&Ve.allocUnsafe;var _t=te(Object.getPrototypeOf,Object),rn=Object.create,en=Ie.propertyIsEnumerable,zn=ee.splice,zt=nt?nt.toStringTag:void 0,wn=(function(){try{var oe=gt(Object,"defineProperty");return oe({},"",{}),oe}catch{}})(),nr=Ve?Ve.isBuffer:void 0,Yn=Math.max,Ur=Date.now,or=gt(ne,"Map"),Ir=gt(Object,"create"),On=(function(){function oe(){}return function(ve){if(!ku(ve))return{};if(rn)return rn(ve);oe.prototype=ve;var $e=new oe;return oe.prototype=void 0,$e}})();function gn(oe){var ve=-1,$e=oe==null?0:oe.length;for(this.clear();++ve<$e;){var It=oe[ve];this.set(It[0],It[1])}}function cr(){this.__data__=Ir?Ir(null):{},this.size=0}function xi(oe){var ve=this.has(oe)&&delete this.__data__[oe];return this.size-=ve?1:0,ve}function Rr(oe){var ve=this.__data__;if(Ir){var $e=ve[oe];return $e===r?void 0:$e}return Me.call(ve,oe)?ve[oe]:void 0}function Nn(oe){var ve=this.__data__;return Ir?ve[oe]!==void 0:Me.call(ve,oe)}function mt(oe,ve){var $e=this.__data__;return this.size+=this.has(oe)?0:1,$e[oe]=Ir&&ve===void 0?r:ve,this}gn.prototype.clear=cr,gn.prototype.delete=xi,gn.prototype.get=Rr,gn.prototype.has=Nn,gn.prototype.set=mt;function Cr(oe){var ve=-1,$e=oe==null?0:oe.length;for(this.clear();++ve<$e;){var It=oe[ve];this.set(It[0],It[1])}}function Xt(){this.__data__=[],this.size=0}function dr(oe){var ve=this.__data__,$e=vc(ve,oe);if($e<0)return!1;var It=ve.length-1;return $e==It?ve.pop():zn.call(ve,$e,1),--this.size,!0}function vn(oe){var ve=this.__data__,$e=vc(ve,oe);return $e<0?void 0:ve[$e][1]}function ar(oe){return vc(this.__data__,oe)>-1}function Or(oe,ve){var $e=this.__data__,It=vc($e,oe);return It<0?(++this.size,$e.push([oe,ve])):$e[It][1]=ve,this}Cr.prototype.clear=Xt,Cr.prototype.delete=dr,Cr.prototype.get=vn,Cr.prototype.has=ar,Cr.prototype.set=Or;function Hr(oe){var ve=-1,$e=oe==null?0:oe.length;for(this.clear();++ve<$e;){var It=oe[ve];this.set(It[0],It[1])}}function qr(){this.size=0,this.__data__={hash:new gn,map:new(or||Cr),string:new gn}}function ko(oe){var ve=ft(this,oe).delete(oe);return this.size-=ve?1:0,ve}function Ja(oe){return ft(this,oe).get(oe)}function Tu(oe){return ft(this,oe).has(oe)}function yc(oe,ve){var $e=ft(this,oe),It=$e.size;return $e.set(oe,ve),this.size+=$e.size==It?0:1,this}Hr.prototype.clear=qr,Hr.prototype.delete=ko,Hr.prototype.get=Ja,Hr.prototype.has=Tu,Hr.prototype.set=yc;function Kn(oe){var ve=this.__data__=new Cr(oe);this.size=ve.size}function Ji(){this.__data__=new Cr,this.size=0}function Io(oe){var ve=this.__data__,$e=ve.delete(oe);return this.size=ve.size,$e}function Xh(oe){return this.__data__.get(oe)}function wf(oe){return this.__data__.has(oe)}function sd(oe,ve){var $e=this.__data__;if($e instanceof Cr){var It=$e.__data__;if(!or||It.length<n-1)return It.push([oe,ve]),this.size=++$e.size,this;$e=this.__data__=new Hr(It)}return $e.set(oe,ve),this.size=$e.size,this}Kn.prototype.clear=Ji,Kn.prototype.delete=Io,Kn.prototype.get=Xh,Kn.prototype.has=wf,Kn.prototype.set=sd;function od(oe,ve){var $e=Ui(oe),It=!$e&&Zi(oe),Ft=!$e&&!It&&mo(oe),xn=!$e&&!It&&!Ft&&np(oe),Hn=$e||It||Ft||xn,ln=Hn?X(oe.length,String):[],Tn=ln.length;for(var yr in oe)Hn&&(yr=="length"||Ft&&(yr=="offset"||yr=="parent")||xn&&(yr=="buffer"||yr=="byteLength"||yr=="byteOffset")||Gt(yr,Tn))||ln.push(yr);return ln}function Ro(oe,ve,$e){($e!==void 0&&!Do(oe[ve],$e)||$e===void 0&&!(ve in oe))&&Sr(oe,ve,$e)}function Qh(oe,ve,$e){var It=oe[ve];(!(Me.call(oe,ve)&&Do(It,$e))||$e===void 0&&!(ve in oe))&&Sr(oe,ve,$e)}function vc(oe,ve){for(var $e=oe.length;$e--;)if(Do(oe[$e][0],ve))return $e;return-1}function Sr(oe,ve,$e){ve=="__proto__"&&wn?wn(oe,ve,{configurable:!0,enumerable:!0,value:$e,writable:!0}):oe[ve]=$e}var xf=rt();function qs(oe){return oe==null?oe===void 0?T:y:zt&&zt in Object(oe)?ht(oe):Ks(oe)}function ea(oe){return ws(oe)&&qs(oe)==a}function Ws(oe){if(!ku(oe)||lr(oe))return!1;var ve=el(oe)?je:L;return ve.test(ep(oe))}function bc(oe){return ws(oe)&&tp(oe.length)&&!!V[qs(oe)]}function Sa(oe){if(!ku(oe))return vr(oe);var ve=sn(oe),$e=[];for(var It in oe)It=="constructor"&&(ve||!Me.call(oe,It))||$e.push(It);return $e}function Au(oe,ve,$e,It,Ft){oe!==ve&&xf(ve,function(xn,Hn){if(Ft||(Ft=new Kn),ku(xn))Gs(oe,ve,Hn,$e,Au,It,Ft);else{var ln=It?It(Xs(oe,Hn),xn,Hn+"",oe,ve,Ft):void 0;ln===void 0&&(ln=xn),Ro(oe,Hn,ln)}},wc)}function Gs(oe,ve,$e,It,Ft,xn,Hn){var ln=Xs(oe,$e),Tn=Xs(ve,$e),yr=Hn.get(Tn);if(yr){Ro(oe,$e,yr);return}var hi=xn?xn(ln,Tn,$e+"",oe,ve,Hn):void 0,_i=hi===void 0;if(_i){var Mi=Ui(Tn),Rs=!Mi&&mo(Tn),Ei=!Mi&&!Rs&&np(Tn);hi=Tn,Mi||Rs||Ei?Ui(ln)?hi=ln:ld(ln)?hi=Be(ln):Rs?(_i=!1,hi=ge(Tn)):Ei?(_i=!1,hi=_e(Tn)):hi=[]:L0(Tn)||Zi(Tn)?(hi=ln,Zi(ln)?hi=Ta(ln):(!ku(ln)||el(ln))&&(hi=Tt(Tn))):_i=!1}_i&&(Hn.set(Tn,hi),Ft(hi,Tn,It,xn,Hn),Hn.delete(Tn)),Ro(oe,$e,hi)}function Jh(oe,ve){return Zh(Za(oe,ve,tl),oe+"")}var Ys=wn?function(oe,ve){return wn(oe,"toString",{configurable:!0,enumerable:!1,value:jl(ve),writable:!0})}:tl;function ge(oe,ve){return oe.slice()}function Ne(oe){var ve=new oe.constructor(oe.byteLength);return new it(ve).set(new it(oe)),ve}function _e(oe,ve){var $e=Ne(oe.buffer);return new oe.constructor($e,oe.byteOffset,oe.length)}function Be(oe,ve){var $e=-1,It=oe.length;for(ve||(ve=Array(It));++$e<It;)ve[$e]=oe[$e];return ve}function Ue(oe,ve,$e,It){var Ft=!$e;$e||($e={});for(var xn=-1,Hn=ve.length;++xn<Hn;){var ln=ve[xn],Tn=void 0;Tn===void 0&&(Tn=oe[ln]),Ft?Sr($e,ln,Tn):Qh($e,ln,Tn)}return $e}function Le(oe){return Jh(function(ve,$e){var It=-1,Ft=$e.length,xn=Ft>1?$e[Ft-1]:void 0,Hn=Ft>2?$e[2]:void 0;for(xn=oe.length>3&&typeof xn=="function"?(Ft--,xn):void 0,Hn&&Vn($e[0],$e[1],Hn)&&(xn=Ft<3?void 0:xn,Ft=1),ve=Object(ve);++It<Ft;){var ln=$e[It];ln&&oe(ve,ln,It,xn)}return ve})}function rt(oe){return function(ve,$e,It){for(var Ft=-1,xn=Object(ve),Hn=It(ve),ln=Hn.length;ln--;){var Tn=Hn[++Ft];if($e(xn[Tn],Tn,xn)===!1)break}return ve}}function ft(oe,ve){var $e=oe.__data__;return cn(ve)?$e[typeof ve=="string"?"string":"hash"]:$e.map}function gt(oe,ve){var $e=de(oe,ve);return Ws($e)?$e:void 0}function ht(oe){var ve=Me.call(oe,zt),$e=oe[zt];try{oe[zt]=void 0;var It=!0}catch{}var Ft=Oe.call(oe);return It&&(ve?oe[zt]=$e:delete oe[zt]),Ft}function Tt(oe){return typeof oe.constructor=="function"&&!sn(oe)?On(_t(oe)):{}}function Gt(oe,ve){var $e=typeof oe;return ve=ve??o,!!ve&&($e=="number"||$e!="symbol"&&z.test(oe))&&oe>-1&&oe%1==0&&oe<ve}function Vn(oe,ve,$e){if(!ku($e))return!1;var It=typeof ve;return(It=="number"?ta($e)&&Gt(ve,$e.length):It=="string"&&ve in $e)?Do($e[ve],oe):!1}function cn(oe){var ve=typeof oe;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?oe!=="__proto__":oe===null}function lr(oe){return!!ke&&ke in oe}function sn(oe){var ve=oe&&oe.constructor,$e=typeof ve=="function"&&ve.prototype||Ie;return oe===$e}function vr(oe){var ve=[];if(oe!=null)for(var $e in Object(oe))ve.push($e);return ve}function Ks(oe){return Oe.call(oe)}function Za(oe,ve,$e){return ve=Yn(ve===void 0?oe.length-1:ve,0),function(){for(var It=arguments,Ft=-1,xn=Yn(It.length-ve,0),Hn=Array(xn);++Ft<xn;)Hn[Ft]=It[ve+Ft];Ft=-1;for(var ln=Array(ve+1);++Ft<ve;)ln[Ft]=It[Ft];return ln[ve]=$e(Hn),Ce(oe,this,ln)}}function Xs(oe,ve){if(!(ve==="constructor"&&typeof oe[ve]=="function")&&ve!="__proto__")return oe[ve]}var Zh=ad(Ys);function ad(oe){var ve=0,$e=0;return function(){var It=Ur(),Ft=s-(It-$e);if($e=It,Ft>0){if(++ve>=i)return arguments[0]}else ve=0;return oe.apply(void 0,arguments)}}function ep(oe){if(oe!=null){try{return we.call(oe)}catch{}try{return oe+""}catch{}}return""}function Do(oe,ve){return oe===ve||oe!==oe&&ve!==ve}var Zi=ea((function(){return arguments})())?ea:function(oe){return ws(oe)&&Me.call(oe,"callee")&&!en.call(oe,"callee")},Ui=Array.isArray;function ta(oe){return oe!=null&&tp(oe.length)&&!el(oe)}function ld(oe){return ws(oe)&&ta(oe)}var mo=nr||Se;function el(oe){if(!ku(oe))return!1;var ve=qs(oe);return ve==h||ve==p||ve==u||ve==b}function tp(oe){return typeof oe=="number"&&oe>-1&&oe%1==0&&oe<=o}function ku(oe){var ve=typeof oe;return oe!=null&&(ve=="object"||ve=="function")}function ws(oe){return oe!=null&&typeof oe=="object"}function L0(oe){if(!ws(oe)||qs(oe)!=v)return!1;var ve=_t(oe);if(ve===null)return!0;var $e=Me.call(ve,"constructor")&&ve.constructor;return typeof $e=="function"&&$e instanceof $e&&we.call($e)==xe}var np=le?fe(le):bc;function Ta(oe){return Ue(oe,wc(oe))}function wc(oe){return ta(oe)?od(oe):Sa(oe)}var j0=Le(function(oe,ve,$e){Au(oe,ve,$e)});function jl(oe){return function(){return oe}}function tl(oe){return oe}function Se(){return!1}e.exports=j0})(Y2,Y2.exports)),Y2.exports}var Hwt=Uwt();const iPe=Ao(Hwt);function lu(e,t){return bL(e)&&t.baseComponents?iPe({},t.baseComponents?.[e.baseComponent],e):e}function hme(e,t){return t.components[e]===void 0?null:lu(t.components[e],t)}function pme(e){const t=e.response.map(n=>n.id);if(e.responseOrder==="random"){const n=e.response.flatMap((i,s)=>i.excludeFromRandomization?[s]:[]),r=e.response.filter(i=>!i.excludeFromRandomization).map(i=>i.id).map(i=>({value:i,sort:Math.random()})).sort((i,s)=>i.sort-s.sort).map(({value:i})=>i);return{response:e.response.map((i,s)=>n.includes(s)?i.id:r.shift())}}return{response:t}}function mme(e){return e.response.reduce((t,n)=>{if(n.type==="radio"||n.type==="checkbox"||n.type==="buttons")if(n.optionOrder==="random"){const i=[...n.options.map(s=>typeof s=="string"?{value:s,label:s}:s)].map(s=>({value:s,sort:Math.random()})).sort((s,o)=>s.sort-o.sort).map(({value:s})=>s);t[n.id]=i}else t[n.id]=n.options.map(r=>typeof r=="string"?{value:r,label:r}:r);return t},{})}function gme(e){return e.response.reduce((t,n)=>{if(n.type==="matrix-radio"||n.type==="matrix-checkbox")if(n.questionOrder==="random"){const i=[...n.questionOptions].map(s=>({value:s,sort:Math.random()})).sort((s,o)=>s.sort-o.sort).map(({value:s})=>s);t[n.id]=i}else t[n.id]=n.questionOptions;return t},{})}async function yme(e,t,n,r,i,s,o,a,l){const u=Kd(n),c=Object.fromEntries(u.filter(g=>g!=="end").map((g,y)=>{const v=lu(t.components[g]||{},t);return t.components[g]?[`${g}_${y}`,{answer:{},identifier:`${g}_${y}`,trialOrder:`${y}`,componentName:g,incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},windowEvents:[],timedOut:!1,helpButtonClickedCount:0,parameters:Object.hasOwn(v,"parameters")?v.parameters:{},correctAnswer:Object.hasOwn(v,"correctAnswer")?v.correctAnswer:[],optionOrders:mme(v),questionOrders:gme(v),formOrder:pme(v)}]:null}).filter(g=>g!==null)),d=Object.assign({},...u.map((g,y)=>{const v=lu(t.components[g]||{response:[]},t);return{[`${g}_${y}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},stimulus:{valid:!v.response.some(b=>b.type==="reactive"&&b.required!==!1),values:{}},provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}}})),f=Object.assign({},...u.map((g,y)=>({[`${g}_${y}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,stimulus:!0,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}}))),h={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:c,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:"",title:""},trialValidation:Object.keys(i).length>0?f:d,reactiveAnswers:{},metadata:r,analysisProvState:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasScreenRecording:!1,analysisCanPlayScreenRecording:!0,analysisHasProvenance:!1,provenanceJumpTime:0,modes:s,matrixAnswers:{},rankingAnswers:{},participantId:o,funcSequence:{},completed:a,clickedPrevious:!1,storageEngineFailedToConnect:l},p=$wt({name:"storeSlice",initialState:h,reducers:{setConfig(g,{payload:y}){g.config=y},setIsRecording(g,{payload:y}){g.isRecording=y},pushToFuncSequence(g,{payload:y}){if(g.funcSequence[y.funcName]||(g.funcSequence[y.funcName]=[]),g.funcSequence[y.funcName].length>y.funcIndex)return;const v=lu(g.config.components[y.component]||{response:[]},t),b=`${y.funcName}_${y.index}_${y.component}_${y.funcIndex}`;g.funcSequence[y.funcName].push(y.component),g.answers[b]={answer:{},identifier:b,incorrectAnswers:{},componentName:y.component,trialOrder:`${y.index}_${y.funcIndex}`,startTime:0,endTime:-1,provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0},windowEvents:[],timedOut:!1,helpButtonClickedCount:0,parameters:y.parameters||("parameters"in v?v.parameters:{})||{},correctAnswer:y.correctAnswer||v.correctAnswer||[],optionOrders:mme(v),questionOrders:gme(v),formOrder:pme(v)},g.trialValidation[b]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},stimulus:{valid:v.response.every(_=>_.type!=="reactive"),values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:{aboveStimulus:void 0,belowStimulus:void 0,stimulus:void 0,sidebar:void 0}}},toggleStudyBrowser:g=>{g.showStudyBrowser=!g.showStudyBrowser},toggleShowHelpText:g=>{g.showHelpText=!g.showHelpText},setAlertModal:(g,y)=>{g.alertModal=y.payload},setReactiveAnswers:(g,y)=>{g.reactiveAnswers=y.payload},saveAnalysisState(g,{payload:y}){g.analysisProvState[y.location]=y.prov},setAnalysisIsPlaying(g,{payload:y}){g.analysisIsPlaying=y},setAnalysisHasAudio(g,{payload:y}){g.analysisHasAudio=y},setAnalysisHasScreenRecording(g,{payload:y}){g.analysisHasScreenRecording=y},setAnalysisCanPlayScreenRecording(g,{payload:y}){g.analysisCanPlayScreenRecording=y},setAnalysisHasProvenance(g,{payload:y}){g.analysisHasProvenance=y},setProvenanceJumpTime(g,{payload:y}){g.provenanceJumpTime=y},setMatrixAnswersRadio:(g,y)=>{if(y.payload){const{responseId:v,questionKey:b,val:_}=y.payload;g.matrixAnswers={...g.matrixAnswers,[v]:{...g.matrixAnswers[v],[b]:_}}}else g.matrixAnswers={}},setMatrixAnswersCheckbox:(g,y)=>{if(y.payload){const{responseId:v,questionKey:b,value:_,isChecked:E,choiceOptions:S}=y.payload,T=g.matrixAnswers[v]?.[b]??"";let A="";E?T.length>0?A=[...T.split("|"),_].sort((R,I)=>S.map(P=>P.value).indexOf(R)-S.map(P=>P.value).indexOf(I)).join("|"):A=`${_}`:A=T.split("|").filter(R=>R!==_).join("|"),g.matrixAnswers={...g.matrixAnswers,[v]:{...g.matrixAnswers[v],[b]:A}}}else g.matrixAnswers={}},setRankingAnswers:(g,y)=>{if(y.payload){const{responseId:v,values:b}=y.payload;g.rankingAnswers={...g.rankingAnswers,[v]:{...b}}}else g.rankingAnswers={}},updateResponseBlockValidation:(g,{payload:y})=>{if(!g.trialValidation[y.identifier])return;const v=g.trialValidation[y.identifier]?.[y.location]?.values;Object.keys(y.values).length>0?g.trialValidation[y.identifier][y.location]={valid:y.status,values:{...v,...y.values}}:g.trialValidation[y.identifier][y.location]={valid:y.status,values:v||{}},y.provenanceGraph&&(g.trialValidation[y.identifier].provenanceGraph[y.location]=y.provenanceGraph)},saveTrialAnswer(g,{payload:y}){g.answers[y.identifier]={...y}},incrementHelpCounter(g,{payload:y}){g.answers[y.identifier].helpButtonClickedCount+=1},saveIncorrectAnswer(g,{payload:y}){const{identifier:v,answer:b,question:_}=y;g.answers[_].incorrectAnswers||(g.answers[_].incorrectAnswers={}),g.answers[_].incorrectAnswers[v]||(g.answers[_].incorrectAnswers[v]={id:v,value:[]}),g.answers[_].incorrectAnswers[v].value.push(b)},deleteDynamicBlockAnswers(g,{payload:y}){const{currentStep:v,funcIndex:b,funcName:_}=y,E=new RegExp(`.*_${v}_.*_${b}`);Object.keys(g.answers).forEach(S=>{S.match(E)&&delete g.answers[S]}),g.funcSequence[_]&&(g.funcSequence[_]=g.funcSequence[y.funcName].filter((S,T)=>T!==b)),g.funcSequence[_]?.length===0&&delete g.funcSequence[_]},setParticipantCompleted(g,{payload:y}){g.completed=y},setClickedPrevious(g,{payload:y}){g.clickedPrevious=y}}});return{store:Iwt({reducer:p.reducer,preloadedState:h}),actions:p.actions}}const sPe=k.createContext(null);function ls(){return k.useContext(sPe).actions}const Us=PDe,gr=pbt;function qwt(e){return gr(t=>{if(e.includes("reviewer-"))return!0;const n=t.trialValidation[e]?Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0):!0;return n?Object.values(n).every(r=>r):!1})}const Wwt=KDe(e=>e.sequence,e=>Kd(e));function n1(){return gr(Wwt)}function pc(){return gr(e=>e.config)}function Vee(){const e=pc(),t=n1(),n=$h(),r=e.components[n],{recordScreen:i,recordAudio:s}=e.uiConfig,o=k.useMemo(()=>i||t.some(c=>e.components[c]?.recordScreen),[t,e,i]),a=k.useMemo(()=>s||t.some(c=>e.components[c]?.recordAudio),[t,e,s]),l=k.useMemo(()=>r?.recordScreen??!!i,[i,r]),u=k.useMemo(()=>r?.recordAudio??!!s,[s,r]);return{studyHasAudioRecording:a,studyHasScreenRecording:o,currentComponentHasAudioRecording:u,currentComponentHasScreenRecording:l}}function Gwt(){const e=pc(),{recordScreenFPS:t,recordAudio:n}=e.uiConfig,r=k.useRef(null),[i,s]=k.useState(null),[o,a]=k.useState(!1),[l,u]=k.useState(!1),[c,d]=k.useState(!1),[f,h]=k.useState(!1),[p,m]=k.useState(!1),[g,y]=k.useState(!1),[v,b]=k.useState(!1),[_,E]=k.useState(!1),S=k.useRef(null),T=k.useRef(null),A=k.useRef(null),R=k.useRef(null),I=k.useRef(null),{storageEngine:P}=Vi(),N=$h(),[M]=k.useState(document.title),{studyHasScreenRecording:O,studyHasAudioRecording:j,currentComponentHasAudioRecording:B,currentComponentHasScreenRecording:H}=Vee(),q=k.useCallback(()=>{r.current&&(r.current.srcObject=null),m(!1),y(!1),b(!1),a(!1),u(!1),d(!1),A.current&&(A.current.getTracks().forEach(z=>{z.stop(),A.current?.removeTrack(z)}),A.current=null),I.current&&(I.current.getTracks().forEach(z=>{z.stop(),I.current?.removeTrack(z)}),I.current=null),T.current&&(T.current.stream.getTracks().forEach(z=>{z.stop(),T.current?.stream.removeTrack(z)}),T.current.stream.getVideoTracks().forEach(z=>{z.stop(),T.current?.stream.removeTrack(z)}),T.current.stream.getAudioTracks().forEach(z=>{z.stop(),T.current?.stream.removeTrack(z)}),T.current.stop(),T.current=null)},[]),G=k.useCallback(z=>{if(!(B||H)||!I.current)return;S.current=new MediaStream([...(H?I.current?.getVideoTracks():[])??[],...(B?A.current?.getAudioTracks():[])??[]]);const V=S.current,Y=new MediaRecorder(V);T.current=Y;const Q=B&&A.current?new MediaRecorder(A.current):null;R.current=Q;let ne=[];Y.addEventListener("dataavailable",se=>{se.data&&se.data.size>0&&ne.push(se.data)});let ue=[];Q?.addEventListener("dataavailable",se=>{se.data&&se.data.size>0&&ue.push(se.data)}),Y.addEventListener("start",()=>{ne=[]}),Q?.addEventListener("start",()=>{ue=[]}),H?(Y.addEventListener("stop",()=>{const{mimeType:se}=Y,ae=new Blob(ne,{type:se});P?.saveScreenRecording(ae,z)}),Q?.addEventListener("stop",()=>{const{mimeType:se}=Q,ae=new Blob(ue,{type:se});P?.saveAudioRecording(ae,z)})):Y.addEventListener("stop",()=>{const{mimeType:se}=Y,ae=new Blob(ne,{type:se});P?.saveAudioRecording(ae,z)}),m(!0),h(!0),d(B),s(null),u(B),a(H),Y.start(1e3),Q?.start(1e3)},[B,H,P]),U=k.useCallback(()=>{a(!1),d(!1),T.current?.stop()},[]);k.useEffect(()=>{N!=="$screen-recording.co.screenRecordingPermission"&&N!=="end"&&f&&!p&&E(!0)},[N,p,f]);const L=k.useCallback(()=>{(async()=>{document.title=`RECORD THIS TAB: ${M}`;try{const V=O?await navigator.mediaDevices.getDisplayMedia({video:{displaySurface:"browser",...t?{frameRate:{ideal:t}}:{}},audio:!1,selfBrowserSurface:"include",preferCurrentTab:!0}):null;I.current=V;const Y=j?await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}):null;A.current=Y;const Q=new MediaStream([...V?.getVideoTracks()||[],...Y?.getAudioTracks()??[]]);S.current=Q,r.current&&(r.current.srcObject=Q,r.current.play()),Q.getTracks().forEach(ne=>{ne.addEventListener("ended",()=>{q()})}),m(V!==null),y(Y!==null),b(V!==null||Y!==null),h(!0),d(!!n),s(null)}catch(V){console.error("Error accessing screen:",V),s("Recording permission denied or not supported.")}finally{document.title=M}})()},[M,n,t,q,j,O]);return{recordVideoRef:r,studyHasScreenRecording:O,recordAudio:n,startScreenCapture:L,stopScreenCapture:q,startScreenRecording:G,stopScreenRecording:U,screenRecordingError:i,isScreenRecording:o,isAudioRecording:l,isScreenCapturing:p,isAudioCapturing:g,isMediaCapturing:v,combinedMediaRecorder:T,audioMediaStream:A,screenWithAudioRecording:c,isRejected:_}}const oPe=k.createContext(void 0);function Uee(){const e=k.useContext(oPe);if(!e)throw new Error("useScreenRecordingContext must be used within a ScreenRecordingProvider");return e}function Ywt({setAnswer:e}){const{recordAudio:t,recordVideoRef:n,startScreenCapture:r,stopScreenCapture:i,isScreenCapturing:s,screenRecordingError:o,audioMediaStream:a}=Uee(),[l,u]=k.useState(!1);return k.useEffect(()=>{e({status:s&&(t?l:!0),provenanceGraph:void 0,answers:{screenRecordingPermission:s}})},[s,l,e,t]),k.useEffect(()=>{if(!s)return;const c=a.current;if(!c)return;new MediaRecorder(c).start();const f=new AudioContext,h=f.createMediaStreamSource(c),p=f.createAnalyser();p.minDecibels=-45,h.connect(p);const m=p.frequencyBinCount,g=new Uint8Array(m);let y=!1;const v=()=>{if(!y){p.getByteFrequencyData(g);for(let b=0;b<m;b+=1)g[b]>0&&(y=!0,u(!0));window.requestAnimationFrame(v)}};window.requestAnimationFrame(v)},[a,s,e]),w.jsxs(De,{p:"md",children:[w.jsxs(ri,{order:1,size:"h2",children:["Screen",t&&" and Audio"," ","Recording Permission"]}),t?w.jsxs(w.Fragment,{children:[w.jsxs("p",{children:["This study requires recording of your"," ",w.jsx("strong",{children:"screen"})," ","and"," ",w.jsx("strong",{children:"audio"}),". If you're not comfortable, you may exit and return the study."]}),w.jsx("p",{children:"Follow the steps below to grant screen and audio recording permissions."}),w.jsxs("ol",{children:[w.jsxs("li",{children:[w.jsx("strong",{children:"Click the button below"})," ","to enable screen and audio recording.",w.jsx(Yt,{type:"button",onClick:s?i:r,display:"block",mt:"sm",children:s?"Stop Recording":"Start Recording"}),w.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"400px",border:"1px solid #ccc",marginTop:"1rem"}}),o&&w.jsx("p",{style:{color:"red"},children:o}),w.jsx("p",{children:w.jsx("i",{children:"Note: Please make sure you are recording the correct tab or window. Otherwise, stop and re-share the correct one."})})]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Speak"})," ","into your microphone to check if audio is working.",t&&s?w.jsx(De,{h:200,w:400,bd:"1px solid #ccc",children:w.jsx(Fee,{height:200,width:400})}):w.jsx(De,{h:200,w:400,bd:"1px solid #ccc"})]})]}),w.jsx("strong",{children:"Note:"}),w.jsxs("ul",{children:[w.jsxs("li",{children:["After we hear you say something, the"," ",w.jsx("b",{children:"Continue"})," ","button will be enabled."]}),w.jsx("li",{children:"Please do not close the window or screen recording until the entire study is completed."})]})]}):w.jsxs(w.Fragment,{children:[w.jsxs("p",{children:["This study requires recording of your"," ",w.jsx("strong",{children:"screen"}),". If you're not comfortable, you may exit and return the study."]}),w.jsx("strong",{children:"Click the button below"})," ","to enable screen recording.",w.jsx(Yt,{type:"button",onClick:s?i:r,display:"block",mt:"sm",children:s?"Stop Recording":"Start Recording"}),w.jsx("video",{ref:n,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"400px",border:"1px solid #ccc",marginTop:"1rem"}}),o&&w.jsx("p",{style:{color:"red"},children:o}),w.jsx("p",{children:w.jsx("i",{children:"Note: Please make sure you are recording the correct tab or window. Otherwise, stop and re-share the correct one."})}),w.jsx("strong",{children:"Note:"}),w.jsx("ul",{children:w.jsx("li",{children:"Please do not close the window or screen recording until the entire study is completed."})})]})]})}const aPe=Object.freeze(Object.defineProperty({__proto__:null,default:Ywt},Symbol.toStringTag,{value:"Module"}));function Kwt(){return w.jsx("div",{children:"test react file"})}const lPe=Object.freeze(Object.defineProperty({__proto__:null,default:Kwt},Symbol.toStringTag,{value:"Module"})),Xwt=e=>e*Math.PI/180;function Qwt({parameters:e,setAnswer:t}){const n=k.useRef(null),r=k.useRef(null),i=k.useRef(null),{blindspotAngle:s}=e,o=gr(E=>E.answers),a=Object.values(o).find(E=>E.componentName==="$virtual-chinrest.components.card-size"),l=Number(a?.answer?.pixelsPerMM),[u,c]=k.useState([]),[d,f]=k.useState(!1),[h,p]=k.useState(null),[m,g]=k.useState(5),y=k.useCallback(E=>{if(!E.length||!l||!r.current)return;const S=E.reduce((P,N)=>P+N,0)/E.length,A=r.current.getBoundingClientRect().left,I=Math.abs(S-A)/l/Math.tan(Xwt(s));p(I),f(!1)},[s,l]),v=()=>{n.current&&(n.current.style.left="740px")},b=k.useCallback(()=>{if(!n.current||!r.current||!l||u.length>=5)return;f(!0);let E=!1,S=0;const T=1e3,A=R=>{if(!n.current)return;if(E){R-S>=T&&(E=!1,n.current.style.left="740px"),i.current=requestAnimationFrame(A);return}const P=parseInt(n.current.style.left||"740",10)-2;P<=0?(E=!0,S=R):n.current.style.left=`${P}px`,i.current=requestAnimationFrame(A)};i.current=requestAnimationFrame(A)},[u,l]),_=()=>{i.current&&cancelAnimationFrame(i.current),f(!1)};return k.useEffect(()=>{h!==null&&u.length===5&&t({status:!0,answers:{"dist-calibration-MM":h,"dist-calibration-CM":h/10,"ball-positions":JSON.stringify(u),"square-position":r.current?.getBoundingClientRect().left??0}})},[h,u,t]),k.useEffect(()=>{const E=S=>{if(S.code==="Space"){if(S.preventDefault(),!d)b();else if(n.current){_();const A=n.current.getBoundingClientRect().left;c(R=>{const I=[...R,A];return I.length>=5&&y(I),I}),g(R=>R-1),v()}}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[d,b,y]),k.useEffect(()=>(p(null),f(!1),c([]),g(5),v(),()=>{p(null),f(!1),c([]),g(5)}),[]),k.useEffect(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[]),l?w.jsx(w0,{size:"md",children:w.jsxs(Gn,{gap:"md",children:[w.jsx(He,{children:"Now we will quickly measure how far away you are sitting. "}),w.jsxs(Gn,{gap:"xs",children:[w.jsxs(wl,{children:[w.jsxs(wl.Item,{children:["Put your left hand on the",w.jsx("b",{children:"space bar"}),"."]}),w.jsx(wl.Item,{children:"Cover your right eye with your right hand."}),w.jsx(wl.Item,{children:"Using your left eye, focus on the black square. Keep your focus on the black square."}),w.jsxs(wl.Item,{children:["The",w.jsx("span",{style:{color:"red",fontWeight:"bold"},children:"red ball"})," ","will disappear as it moves from right to left. Press the space bar as soon as the ball disappears."]})]}),w.jsx(He,{ta:"center",children:u.length>=5?"All measurements completed!":"Press the space bar when you are ready to begin."})]}),w.jsxs("div",{style:{position:"relative",width:"900px",height:"100px",backgroundColor:"#ffffff"},children:[w.jsx("div",{ref:n,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(255, 0, 0)",borderRadius:"30px",left:"740px"}}),w.jsx("div",{ref:r,style:{position:"absolute",width:"30px",height:"30px",backgroundColor:"rgb(0, 0, 0)",left:"870px"}})]}),w.jsxs(He,{ta:"center",children:["Remaining measurements:"," ",5-u.length]}),h&&w.jsxs(Gn,{gap:"xs",children:[w.jsx(He,{fw:700,size:"lg",children:"Viewing Distance Results"}),w.jsxs(He,{children:["Estimated Viewing Distance:",(h/10).toFixed(1)," ","cm"]}),w.jsxs(He,{children:["Number of measurements:",u.length]})]})]})}):w.jsx("div",{children:"Please complete card calibration first."})}const uPe=Object.freeze(Object.defineProperty({__proto__:null,default:Qwt},Symbol.toStringTag,{value:"Module"})),Jwt="/template/assets/costco_card-B3j7PHjO.png";function Zwt({parameters:e,setAnswer:t,itemWidthMM:n=85.6,itemHeightMM:r=53.98,fixedCorner:i="top-left"}){const[s,o]=k.useState(300),[a,l]=k.useState(null),[u,c]=k.useState(!1),[d,f]=k.useState({min:100,max:500}),{taskid:h}=e,p=k.useRef(null),m=k.useRef(null),g=r/n;k.useEffect(()=>{const S=()=>{const T=window.innerWidth;f({min:Math.round(T*.1),max:Math.round(T*.8)})};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const y=S=>Math.round(S*g),v=S=>S/n,b=S=>{o(S)},_=()=>{if(!p.current)return;const S=v(s);l(S),t({status:!0,answers:{[h]:S}}),c(!0)},E=()=>({position:"relative",width:"100%",display:"flex",justifyContent:i.includes("right")?"flex-end":"flex-start",alignItems:i.includes("bottom")?"flex-end":"flex-start"});return w.jsxs(Gn,{gap:"lg",children:[w.jsx(He,{size:"md",children:" Drag the slider until the image is the same size as a credit card held up to the screen."}),w.jsx(He,{size:"md",children:" You can use any card this is the same size as a credit card, like a membership card or driver's license."}),w.jsx(He,{size:"md",children:" If you do not have access to a real card, you can use a ruler to measure the image width to 3.37 inches or 85.6mm. "}),w.jsx(He,{size:"md",children:" Once you are finished, click 'Confirm Size' and then 'Next'. "}),w.jsx(Yt,{onClick:_,size:"lg",variant:"transparent",children:"Confirm Size"}),w.jsx(nL,{min:d.min,max:d.max,value:s,label:null,onChange:b,styles:{root:{width:"100%"},track:{cursor:"pointer"},thumb:{cursor:"grab"},bar:{cursor:"pointer"}}}),w.jsx("div",{ref:m,style:E(),children:w.jsx("div",{ref:p,style:{width:`${s}px`,height:`${y(s)}px`,overflow:"hidden"},children:w.jsx("img",{src:Jwt,alt:"Credit Card",style:{width:"100%",height:"100%",objectFit:"contain"}})})}),u&&w.jsxs("div",{style:{textAlign:"center",color:"green"},children:["Calibration Complete - Pixels per MM:"," ",a?.toFixed(2)]})]})}const cPe=Object.freeze(Object.defineProperty({__proto__:null,default:Zwt},Symbol.toStringTag,{value:"Module"})),M3=2147483648,ext=4294967295;class dPe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&M3>>>t}set(t){this._bits[t>>5]|=M3>>>t}clear(t){this._bits[t>>5]&=~(M3>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&ext>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=M3>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function txt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function yv(e){return e instanceof Date}function A6(e){return e instanceof RegExp}function vv(e){return e===Object(e)}function Hee(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:yv(e)||yv(t)?+e==+t:A6(e)&&A6(t)?e+""==t+"":vv(e)&&vv(t)?nxt(e,t):!1}function nxt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return vme(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!vme(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Hee(e[o],t[o]))return!1}return!0}function vme(e,t,n=Hee){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}function rxt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else{const r=`${e}`;if(Object.hasOwn(t,r))return t[r]}return n!==void 0?n:e}function ixt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const ni=void 0;function wu(e){return Array.isArray(e)}const sxt=Object.getPrototypeOf(Int8Array);function wL(e){return e instanceof sxt}function r1(e){return wu(e)||wL(e)}function Rh(e){return typeof e=="string"}function Kf(e){return e!=null&&e===e}const $R=e=>r1(e)||Rh(e);function oxt(e){return r1(e)?e.filter(t=>Kf(t)):e}function axt(...e){return[].concat(...e)}function lxt(e,t,n){return $R(e)?e.includes(t,n):!1}function uxt(e,t){return $R(e)?e.indexOf(t):-1}function cxt(e,t){return r1(e)?e.join(t):ni}function dxt(e,t){return $R(e)?e.lastIndexOf(t):-1}function fxt(e){return $R(e)?e.length:0}function hxt(e,t){return r1(e)?e.map(n=>Kf(n)?n[t]:ni):ni}function pxt(e){return r1(e)?e.slice().reverse():Rh(e)?e.split("").reverse().join(""):ni}function mxt(e,t,n){return $R(e)?e.slice(t,n):ni}const gxt=Object.freeze(Object.defineProperty({__proto__:null,compact:oxt,concat:axt,includes:lxt,indexof:uxt,join:cxt,lastindexof:dxt,length:fxt,pluck:hxt,reverse:pxt,slice:mxt},Symbol.toStringTag,{value:"Module"}));function u4(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const lp=e=>(e<10?"0":"")+e,yxt=e=>e<0?"-"+u4(-e,6):e>9999?"+"+u4(e,6):u4(e,4);function fPe(e,t,n,r,i,s,o,a,l){const u=a?"Z":"";return yxt(e)+"-"+lp(t+1)+"-"+lp(n)+(!l||o?"T"+lp(r)+":"+lp(i)+":"+lp(s)+"."+u4(o,3)+u:s?"T"+lp(r)+":"+lp(i)+":"+lp(s)+u:i||r||!a?"T"+lp(r)+":"+lp(i)+u:"")}function hPe(e,t){return isNaN(e)?"Invalid Date":fPe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function xL(e,t){return isNaN(e)?"Invalid Date":fPe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const vxt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function bxt(e){return e.match(vxt)&&!isNaN(Date.parse(e))}function wxt(e,t=Date.parse){return bxt(e)?t(e):e}const pPe=6e4,mPe=864e5,gPe=6048e5,Ms=new Date,$s=new Date,fo=e=>(Ms.setTime(typeof e=="string"?wxt(e):e),Ms);function xxt(e,t){return hPe(fo(e),!t)}function _xt(e,t){return xL(fo(e),!t)}function Ext(){return Date.now()}function Cxt(e){return+fo(e)}function Sxt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function Txt(e){return fo(e).getFullYear()}function Axt(e){return Math.floor(fo(e).getMonth()/3)}function kxt(e){return fo(e).getMonth()}function Ixt(e,t){const n=t||0;$s.setTime(+e),$s.setDate($s.getDate()-($s.getDay()+7-n)%7),$s.setHours(0,0,0,0),Ms.setTime(+e),Ms.setMonth(0),Ms.setDate(1),Ms.setDate(1-(Ms.getDay()+7-n)%7),Ms.setHours(0,0,0,0);const r=($s.getTimezoneOffset()-Ms.getTimezoneOffset())*pPe;return Math.floor((1+(+$s-+Ms)-r)/gPe)}function Rxt(e){return fo(e).getDate()}function Dxt(e){$s.setTime(+e),$s.setHours(0,0,0,0),Ms.setTime(+$s),Ms.setMonth(0),Ms.setDate(1);const t=($s.getTimezoneOffset()-Ms.getTimezoneOffset())*pPe;return Math.floor(1+(+$s-+Ms-t)/mPe)}function Pxt(e){return fo(e).getDay()}function Oxt(e){return fo(e).getHours()}function Nxt(e){return fo(e).getMinutes()}function Mxt(e){return fo(e).getSeconds()}function $xt(e){return fo(e).getMilliseconds()}function Fxt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function Lxt(e){return fo(e).getUTCFullYear()}function jxt(e){return Math.floor(fo(e).getUTCMonth()/3)}function Bxt(e){return fo(e).getUTCMonth()}function zxt(e,t){const n=t||0;return $s.setTime(+e),$s.setUTCDate($s.getUTCDate()-($s.getUTCDay()+7-n)%7),$s.setUTCHours(0,0,0,0),Ms.setTime(+e),Ms.setUTCMonth(0),Ms.setUTCDate(1),Ms.setUTCDate(1-(Ms.getUTCDay()+7-n)%7),Ms.setUTCHours(0,0,0,0),Math.floor((1+(+$s-+Ms))/gPe)}function Vxt(e){return fo(e).getUTCDate()}function Uxt(e){$s.setTime(+e),$s.setUTCHours(0,0,0,0);const t=Date.UTC($s.getUTCFullYear(),0,1);return Math.floor(1+(+$s-t)/mPe)}function Hxt(e){return fo(e).getUTCDay()}function qxt(e){return fo(e).getUTCHours()}function Wxt(e){return fo(e).getUTCMinutes()}function Gxt(e){return fo(e).getUTCSeconds()}function Yxt(e){return fo(e).getUTCMilliseconds()}const Kxt=Object.freeze(Object.defineProperty({__proto__:null,date:Rxt,datetime:Sxt,dayofweek:Pxt,dayofyear:Dxt,format_date:xxt,format_utcdate:_xt,hours:Oxt,milliseconds:$xt,minutes:Nxt,month:kxt,now:Ext,quarter:Axt,seconds:Mxt,timestamp:Cxt,utcdate:Vxt,utcdatetime:Fxt,utcdayofweek:Hxt,utcdayofyear:Uxt,utchours:qxt,utcmilliseconds:Yxt,utcminutes:Wxt,utcmonth:Bxt,utcquarter:jxt,utcseconds:Gxt,utcweek:zxt,utcyear:Lxt,week:Ixt,year:Txt},Symbol.toStringTag,{value:"Module"}));function Xxt(e){return JSON.parse(e)}function Qxt(e){return JSON.stringify(e)}const Jxt=Object.freeze(Object.defineProperty({__proto__:null,parse_json:Xxt,to_json:Qxt},Symbol.toStringTag,{value:"Module"}));let Zxt=Math.random;function fS(){return Zxt()}function e_t(){return fS()}function t_t(e){return Number.isNaN(e)}function n_t(e){return Number.isFinite(e)}function r_t(e){return Math.abs(e)}function i_t(e){return Math.cbrt(e)}function s_t(e){return Math.ceil(e)}function o_t(e){return Math.clz32(e)}function a_t(e){return Math.exp(e)}function l_t(e){return Math.expm1(e)}function u_t(e){return Math.floor(e)}function c_t(e){return Math.fround(e)}function d_t(...e){return Math.max(...e)}function f_t(...e){return Math.min(...e)}function h_t(e){return Math.log(e)}function p_t(e){return Math.log10(e)}function m_t(e){return Math.log1p(e)}function g_t(e){return Math.log2(e)}function y_t(e,t){return Math.pow(e,t)}function v_t(e){return Math.round(e)}function b_t(e){return Math.sign(e)}function w_t(e){return Math.sqrt(e)}function x_t(e){return Math.trunc(e)}function __t(e){return 180*e/Math.PI}function E_t(e){return Math.PI*e/180}function C_t(e){return Math.acos(e)}function S_t(e){return Math.acosh(e)}function T_t(e){return Math.asin(e)}function A_t(e){return Math.asinh(e)}function k_t(e){return Math.atan(e)}function I_t(e,t){return Math.atan2(e,t)}function R_t(e){return Math.atanh(e)}function D_t(e){return Math.cos(e)}function P_t(e){return Math.cosh(e)}function O_t(e){return Math.sin(e)}function N_t(e){return Math.sinh(e)}function M_t(e){return Math.tan(e)}function $_t(e){return Math.tanh(e)}const F_t=Object.freeze(Object.defineProperty({__proto__:null,abs:r_t,acos:C_t,acosh:S_t,asin:T_t,asinh:A_t,atan:k_t,atan2:I_t,atanh:R_t,cbrt:i_t,ceil:s_t,clz32:o_t,cos:D_t,cosh:P_t,degrees:__t,exp:a_t,expm1:l_t,floor:u_t,fround:c_t,greatest:d_t,is_finite:n_t,is_nan:t_t,least:f_t,log:h_t,log10:p_t,log1p:m_t,log2:g_t,pow:y_t,radians:E_t,random:e_t,round:v_t,sign:b_t,sin:O_t,sinh:N_t,sqrt:w_t,tan:M_t,tanh:$_t,trunc:x_t},Symbol.toStringTag,{value:"Module"}));function qee(e){return e instanceof Map}function L_t(e){return e instanceof Set}function _L(e){return qee(e)||L_t(e)}function Wee(e){return Array.from(e)}function j_t(e,t){return _L(e)?e.has(t):e!=null?Object.hasOwn(e,`${t}`):!1}function B_t(e){return qee(e)?Wee(e.keys()):e!=null?Object.keys(e):[]}function z_t(e){return _L(e)?Wee(e.values()):e!=null?Object.values(e):[]}function V_t(e){return _L(e)?Wee(e.entries()):e!=null?Object.entries(e):[]}function U_t(e){return e?Object.fromEntries(e):ni}const H_t=Object.freeze(Object.defineProperty({__proto__:null,entries:V_t,has:j_t,keys:B_t,object:U_t,values:z_t},Symbol.toStringTag,{value:"Module"}));function q_t(e){return e==null?e:new Date(e)}function W_t(e){return e==null?e:Number.parseFloat(e)}function G_t(e,t){return e==null?e:Number.parseInt(e,t)}function Y_t(e,t,n){return e==null?!1:String(e).endsWith(t,n)}function K_t(e,t,n){const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null}function X_t(e,t){return e==null?e:String(e).normalize(t)}function Q_t(e,t,n){return e==null?e:String(e).padEnd(t,n)}function J_t(e,t,n){return e==null?e:String(e).padStart(t,n)}function Z_t(e){return e==null?e:String(e).toUpperCase()}function eEt(e){return e==null?e:String(e).toLowerCase()}function tEt(e,t){return e==null?e:String(e).repeat(t)}function nEt(e,t,n){return e==null?e:String(e).replace(t,String(n))}function rEt(e,t,n){return e==null?[]:String(e).split(t,n)}function iEt(e,t,n){return e==null?!1:String(e).startsWith(t,n)}function sEt(e,t,n){return e==null?e:String(e).substring(t,n)}function oEt(e){return e==null?e:String(e).trim()}const aEt=Object.freeze(Object.defineProperty({__proto__:null,endswith:Y_t,lower:eEt,match:K_t,normalize:X_t,padend:Q_t,padstart:J_t,parse_date:q_t,parse_float:W_t,parse_int:G_t,repeat:tEt,replace:nEt,split:rEt,startswith:iEt,substring:sEt,trim:oEt,upper:Z_t},Symbol.toStringTag,{value:"Module"})),X_={bin:txt,equal:Hee,recode:rxt,sequence:ixt,...gxt,...Kxt,...Jxt,...F_t,...H_t,...aEt};function em(e){return e!=null?wu(e)?e:[e]:[]}function Uk(e){return typeof e=="bigint"}function Yg(e){return e===void 0?e+"":Uk(e)?e+"n":JSON.stringify(e)}let lEt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Yg(n)}]`),...this.params.map(Yg)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};function ex(e,t=[],n=[]){return new lEt(e,em(t),em(n))}const uEt=e=>ex("any",e),cEt=()=>ex("count"),dEt=e=>ex("array_agg",e),fEt=e=>ex("array_agg_distinct",e),hEt=(e,t)=>ex("map_agg",[e,t]),pEt=(e,t)=>ex("object_agg",[e,t]),mEt=(e,t)=>ex("entries_agg",[e,t]);({...X_});function zs(e,t){throw Error(e,{cause:t})}function gEt(e,t){e=_L(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function pu(e){return typeof e=="function"}function EL(e,t){const n=Array(e);if(pu(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}function yEt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const l=Math.ceil(Math.log(n)/a),u=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(u)/a)-l));Math.ceil(u/s)>n;)s*=10;const d=c.length;for(let f=0;f<d;++f){const h=s/c[f];h>=i&&u/h<=n&&(s=h)}}if(r){let l=Math.log(s);const u=l>=0?0:~~(-l/a)+1,c=Math.pow(10,-u-1);l=Math.floor(e/s+c)*s,e=e<l?l-s:l,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function ZE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:yv(e)?+e:wu(e)||wL(e)?`[${e.map(ZE)}]`:A6(e)?e+"":vEt(e)}function vEt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ZE(e[r])}`;return t+="}",t}function k6(e,t){const n=e.length;return n===1?(r,i)=>ZE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=ZE(a)}return s}}function bEt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=ZE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=ZE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function sg(){}function wEt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Mo(e){return e.init=e.init||sg,e.add=e.add||sg,e.rem=e.rem||sg,e}function bme(e,t){return e.product_v=!1,e.product=t}const yPe={count:{create:()=>Mo({value:e=>e.count}),param:[]},array_agg:{create:()=>Mo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Mo({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Mo({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Mo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Mo({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ni}),param:[1]},valid:{create:()=>Mo({value:e=>e.valid}),param:[1]},invalid:{create:()=>Mo({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=bEt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Mo({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Mo({value:e=>{let t=ni,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ni,add:(e,t)=>Uk(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>bme(e,1),value:e=>e.valid?e.product_v?bme(e,wEt(e.list.values())):e.product:void 0,add:(e,t)=>Uk(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ni,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Mo({value:e=>e.valid?e.mean:ni}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ni,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Mo({value:e=>e.valid>1?e.dev/e.valid:ni}),param:[1],req:["variance"]},stdev:{create:()=>Mo({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ni}),param:[1],req:["variance"]},stdevp:{create:()=>Mo({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ni}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ni,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ni)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ni,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ni)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Mo({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Mo({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ni,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Mo({value:e=>e.valid>1?e.cov/e.valid:ni}),param:[2],req:["covariance"]},corr:{create:()=>Mo({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ni}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Mo({value:i=>yEt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},wme={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},xme={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},vPe={row_number:{create(){return{init:sg,value:e=>e.index+1}},param:[]},rank:wme,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=wme.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:xme,ntile:{create(e){e=+e,e>0||zs("ntile num must be greater than zero.");const{init:t,value:n}=xme.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ni){return e=+e||1,{init:sg,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ni){return e=+e||1,{init:sg,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:sg,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:sg,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||zs("nth_value nth must be greater than zero."),{init:sg,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ni}}},param:[1,1]},fill_down:{create(e=ni){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Kf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ni){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=xEt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function xEt(e,t,n){for(const r=e.size;n<r;++n)if(Kf(e.value(n,t)))return n;return-1}function Gee(e){return Object.hasOwn(yPe,e)}function Yee(e){return Object.hasOwn(vPe,e)}function bPe(e){return Object.hasOwn(X_,e)||e==="row_object"}function wPe(e){return Gee(e)&&yPe[e]}function xPe(e){return Yee(e)&&vPe[e]}function FR(e,t=((r,i)=>r),n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function hS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,l)=>`${r[o]}${l} = ${r[o]}[${l}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function Kee(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function _Et(e,t=0,n=e.length){let r=n?e[t++]:ni;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function EEt(e,t=0,n=e.length){let r=n?e[t++]:ni;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function $3(e){return Uk(e)?e:+e}function CEt(e,t){const n=e.length;if(!n)return ni;if((t=+t)<=0||n<2)return $3(e[0]);if(t>=1)return $3(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=$3(e[i]);return Uk(s)?s:s+($3(e[i+1])-s)*(r-i)}class SEt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:EEt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:_Et(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Kee)),CEt(this._sorted,t)}}class TEt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(t){return{}}add(t,n,r){}rem(t,n,r){}write(t,n,r){}}const I6=(e,t,n)=>hS(t,"{"+FR(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function AEt(e,t){const{ops:n,output:r}=kEt(e,t),i=e[0].fields,s=i.length,o=s===0?Xee:s===1?IEt:s===2?REt:zs("Unsupported field count: "+s);return new o(i,n,r,t)}function kEt(e,t){const n={},r=[];function i(o,a=[]){const l=o+":"+a;if(n[l])return n[l];const u=wPe(o),c=u.create(...a);return t<0&&u.stream&&u.stream.forEach(d=>i(d,[])),u.req&&u.req.forEach(d=>i(d,[])),n[l]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class Xee extends TEt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new SEt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class IEt extends Xee{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=I6(n,s,"add"),this._rem=I6(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Kf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Kf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class REt extends Xee{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=I6(n,s,"add"),this._rem=I6(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Kf(i)&&Kf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Kf(i)&&Kf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function tx(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=pS(e,t),o=i?(a,l)=>s[a][i[l]]:a=>s[a][0];n=n.map(a=>l=>a(l,r,o))}return n}function pS(e,t,n){if(!t.length)return n;const r=_Pe(t),i=e.groups(),s=i?i.size:1;return n=n||EL(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=CPe(e,o,i);for(let l=0;l<s;++l)o.write(a[l],n,l)}):r.forEach(o=>{const a=EPe(e,o);o.write(a,n,0)}),n}function _Pe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(AEt(r[i],t));return n}function EPe(e,t){const n=t.init(),r=e.data(),i=e.mask();if(e.isOrdered()){const s=e.indices(),o=s.length;for(let a=0;a<o;++a)t.add(n,s[a],r)}else if(i)for(let s=i.next(0);s>=0;s=i.next(s+1))t.add(n,s,r);else{const s=e.totalRows();for(let o=0;o<s;++o)t.add(n,o,r)}return n}function CPe(e,t,n){const{keys:r,size:i}=n,s=EL(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),l=a.length;for(let u=0;u<l;++u){const c=a[u];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let l=a.next(0);l>=0;l=a.next(l+1))t.add(s[r[l]],l,o)}else{const a=e.totalRows();for(let l=0;l<a;++l)t.add(s[r[l]],l,o)}return s}function SPe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const l=e.add(r[a],Array(s)),u=n[a];for(let c=0;c<s;++c)l[c]=u(i[c])}}function Qee(e){return wu(e)?e:qee(e)?e.entries():e?Object.entries(e):[]}const DEt="ArrayPattern",PEt="ArrowFunctionExpression",OEt="FunctionExpression",Jy="Identifier",mS="Literal",TPe="MemberExpression",NEt="ObjectExpression",APe="ObjectPattern",kPe="Property",IPe="Column",MEt="Constant",$Et="Dictionary",FEt="Function",LEt="Parameter",RPe="Op";function Yr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=jEt[e.type];s&&s(e,t,n)}const F3=(e,t,n)=>{Yr(e.argument,t,n,e)},Hz=(e,t,n)=>{Yr(e.left,t,n,e),Yr(e.right,t,n,e)},_me=(e,t,n)=>{Yr(e.test,t,n,e),Yr(e.consequent,t,n,e),e.alternate&&Yr(e.alternate,t,n,e)},qz=(e,t,n)=>{mp(e.params,t,n,e),Yr(e.body,t,n,e)},Eme=(e,t,n)=>{Yr(e.callee,t,n,e),mp(e.arguments,t,n,e)},mp=(e,t,n,r)=>{e.forEach(i=>Yr(i,t,n,r))},jEt={TemplateLiteral:(e,t,n)=>{mp(e.expressions,t,n,e),mp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Yr(e.object,t,n,e),Yr(e.property,t,n,e)},CallExpression:Eme,NewExpression:Eme,ArrayExpression:(e,t,n)=>{mp(e.elements,t,n,e)},AssignmentExpression:Hz,AwaitExpression:F3,BinaryExpression:Hz,LogicalExpression:Hz,UnaryExpression:F3,UpdateExpression:F3,ConditionalExpression:_me,ObjectExpression:(e,t,n)=>{mp(e.properties,t,n,e)},Property:(e,t,n)=>{Yr(e.key,t,n,e),Yr(e.value,t,n,e)},ArrowFunctionExpression:qz,FunctionExpression:qz,FunctionDeclaration:qz,VariableDeclaration:(e,t,n)=>{mp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Yr(e.id,t,n,e),Yr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Yr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{mp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Yr(e.expression,t,n,e)},IfStatement:_me,ForStatement:(e,t,n)=>{Yr(e.init,t,n,e),Yr(e.test,t,n,e),Yr(e.update,t,n,e),Yr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Yr(e.test,t,n,e),Yr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Yr(e.body,t,n,e),Yr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Yr(e.discriminant,t,n,e),mp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Yr(e.test,t,n,e),mp(e.consequent,t,n,e)},ReturnStatement:F3,Program:(e,t,n)=>{Yr(e.body[0],t,n,e)}};function DPe(e){delete e.start,delete e.end,delete e.optional}function Cme(e){DPe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function BEt(e){return Yr(e,null,{Column:Cme,Constant:Cme,Default:DPe}),e}function zo(e,t){return t&&t.type===e}function zEt(e){return zo(OEt,e)||zo(PEt,e)}const qi=(e,t)=>{const n=UEt[e.type];return n?n(e,t):zs(`Unsupported expression construct: ${e.type}`)},Wz=(e,t)=>"("+qi(e.left,t)+" "+e.operator+" "+qi(e.right,t)+")",Gz=(e,t)=>"("+gp(e.params,t)+")=>"+qi(e.body,t),Sme=(e,t)=>qi(e.callee,t)+"("+gp(e.arguments,t)+")",gp=(e,t,n=",")=>e.map(r=>qi(r,t)).join(n),Jee=e=>e.computed?`[${Yg(e.name)}]`:`.${e.name}`,Tme=(e,t,n)=>{const r=e.table||"";return`data${r}${Jee(e)}.${n}(${t.index}${r})`},VEt=(e,t)=>{const n=e.table||"";return`data${n}${Jee(e)}[${t.index}${n}]`},UEt={Constant:e=>e.raw,Column:(e,t)=>e.array?VEt(e,t):Tme(e,t,"at"),Dictionary:(e,t)=>Tme(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${Jee(e)}`,Op:(e,t)=>`op(${Yg(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+qi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=qi(e.object,t),i=qi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Sme,NewExpression:(e,t)=>"new "+Sme(e,t),ArrayExpression:(e,t)=>"["+gp(e.elements,t)+"]",AssignmentExpression:Wz,BinaryExpression:Wz,LogicalExpression:Wz,UnaryExpression:(e,t)=>"("+e.operator+qi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+qi(e.test,t)+"?"+qi(e.consequent,t)+":"+qi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+gp(e.properties,t)+"})",Property:(e,t)=>{const n=qi(e.key,t);return(e.computed?`[${n}]`:n)+":"+qi(e.value,t)},ArrowFunctionExpression:Gz,FunctionExpression:Gz,FunctionDeclaration:Gz,ArrayPattern:(e,t)=>"["+gp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+gp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+gp(e.declarations,t,","),VariableDeclarator:(e,t)=>qi(e.id,t)+"="+qi(e.init,t),SpreadElement:(e,t)=>"..."+qi(e.argument,t),BlockStatement:(e,t)=>"{"+gp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>qi(e.expression,t),IfStatement:(e,t)=>"if ("+qi(e.test,t)+")"+qi(e.consequent,t)+(e.alternate?" else "+qi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+qi(e.discriminant,t)+") {"+gp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+qi(e.test,t):"default")+": "+gp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+qi(e.argument,t),Program:(e,t)=>qi(e.body[0],t)};function R6(e,t={index:"row"}){return qi(e,t)}function e2(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Zee={escape:(e,t,n)=>e2(e,t,n),expr:(e,t)=>e2(`(row,data,op)=>${e}`,X_,t),expr2:(e,t)=>e2(`(row0,data0,row,data)=>${e}`,X_,t),join:(e,t)=>e2(`(row1,data1,row2,data2)=>${e}`,X_,t),param:(e,t)=>e2(e,X_,t)},HEt={"==":1,"!=":1,"===":1,"!==":1};function PPe(e,t,n=0,r=void 0,i=void 0){if(e.type=IPe,e.name=t,e.table=n,r1(r)&&(e.array=!0),i&&r&&pu(r.keyFor)){const s=HEt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===mS&&qEt(i,e,s,r.keyFor(s.value))}return e}function qEt(e,t,n,r){return r<0?(e.type=mS,e.value=!1,e.raw="false"):(t.type=$Et,n.value=r,n.raw=r+""),!0}const OPe="row_object";function NPe(e,t,n=t.columnNames()){e.type=NEt;const r=e.properties=[];for(const i of Qee(n)){const[s,o]=wu(i)?i:[i,i];r.push({type:kPe,key:{type:mS,raw:Yg(o)},value:PPe({computed:!0},s,0,t.column(s))})}return e}function MPe(e,t){return R6(NPe({},e,t))}function $Pe(e,t){return Zee.expr(MPe(e,t))}function WEt(e){return pu(e)?e:()=>e}const GEt="Escaped functions are not valid as rollup or pivot values.";function YEt(e,t,n){e.aggronly&&zs(GEt);const r=`(row,data)=>fn(${MPe(e.table)},$)`;return{escape:Zee.escape(r,WEt(t.expr),n)}}var KEt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],FPe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],XEt="-----------------------------------------------------------------------------------------------------------------------------------------------------",LPe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Yz={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Kz="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",QEt={5:Kz,"5module":Kz+" export import",6:Kz+" const class extends export import super"},JEt=/^in(stanceof)?$/,ZEt=new RegExp("["+LPe+"]"),eCt=new RegExp("["+LPe+XEt+"]");function kG(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function tm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&ZEt.test(String.fromCharCode(e)):t===!1?!1:kG(e,FPe)}function bv(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&eCt.test(String.fromCharCode(e)):t===!1?!1:kG(e,FPe)||kG(e,KEt)}var ei=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function gd(e,t){return new ei(e,{beforeExpr:!0,binop:t})}var yd={beforeExpr:!0},Fu={startsExpr:!0},ete={};function Lr(e,t){return t===void 0&&(t={}),t.keyword=e,ete[e]=new ei(e,t)}var pe={num:new ei("num",Fu),regexp:new ei("regexp",Fu),string:new ei("string",Fu),name:new ei("name",Fu),privateId:new ei("privateId",Fu),eof:new ei("eof"),bracketL:new ei("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ei("]"),braceL:new ei("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ei("}"),parenL:new ei("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ei(")"),comma:new ei(",",yd),semi:new ei(";",yd),colon:new ei(":",yd),dot:new ei("."),question:new ei("?",yd),questionDot:new ei("?."),arrow:new ei("=>",yd),template:new ei("template"),invalidTemplate:new ei("invalidTemplate"),ellipsis:new ei("...",yd),backQuote:new ei("`",Fu),dollarBraceL:new ei("${",{beforeExpr:!0,startsExpr:!0}),eq:new ei("=",{beforeExpr:!0,isAssign:!0}),assign:new ei("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ei("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ei("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:gd("||",1),logicalAND:gd("&&",2),bitwiseOR:gd("|",3),bitwiseXOR:gd("^",4),bitwiseAND:gd("&",5),equality:gd("==/!=/===/!==",6),relational:gd("</>/<=/>=",7),bitShift:gd("<</>>/>>>",8),plusMin:new ei("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:gd("%",10),star:gd("*",10),slash:gd("/",10),starstar:new ei("**",{beforeExpr:!0}),coalesce:gd("??",1),_break:Lr("break"),_case:Lr("case",yd),_catch:Lr("catch"),_continue:Lr("continue"),_debugger:Lr("debugger"),_default:Lr("default",yd),_do:Lr("do",{isLoop:!0,beforeExpr:!0}),_else:Lr("else",yd),_finally:Lr("finally"),_for:Lr("for",{isLoop:!0}),_function:Lr("function",Fu),_if:Lr("if"),_return:Lr("return",yd),_switch:Lr("switch"),_throw:Lr("throw",yd),_try:Lr("try"),_var:Lr("var"),_const:Lr("const"),_while:Lr("while",{isLoop:!0}),_with:Lr("with"),_new:Lr("new",{beforeExpr:!0,startsExpr:!0}),_this:Lr("this",Fu),_super:Lr("super",Fu),_class:Lr("class",Fu),_extends:Lr("extends",yd),_export:Lr("export"),_import:Lr("import",Fu),_null:Lr("null",Fu),_true:Lr("true",Fu),_false:Lr("false",Fu),_in:Lr("in",{beforeExpr:!0,binop:7}),_instanceof:Lr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Lr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Lr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Lr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},rc=/\r\n?|\n|\u2028|\u2029/,tCt=new RegExp(rc.source,"g");function gS(e){return e===10||e===13||e===8232||e===8233}function jPe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(gS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var BPe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,vl=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,zPe=Object.prototype,nCt=zPe.hasOwnProperty,rCt=zPe.toString,yS=Object.hasOwn||(function(e,t){return nCt.call(e,t)}),Ame=Array.isArray||(function(e){return rCt.call(e)==="[object Array]"}),kme=Object.create(null);function My(e){return kme[e]||(kme[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Kg(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var iCt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Hk=function(t,n){this.line=t,this.column=n};Hk.prototype.offset=function(t){return new Hk(this.line,this.column+t)};var CL=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function VPe(e,t){for(var n=1,r=0;;){var i=jPe(e,r,t);if(i<0)return new Hk(n,t-r);++n,r=i}}var IG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ime=!1;function sCt(e){var t={};for(var n in IG)t[n]=e&&yS(e,n)?e[n]:IG[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Ime&&typeof console=="object"&&console.warn&&(Ime=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Ame(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Ame(t.onComment)&&(t.onComment=oCt(t,t.onComment)),t}function oCt(e,t){return function(n,r,i,s,o,a){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new CL(this,o,a)),e.ranges&&(l.range=[i,s]),t.push(l)}}var qk=1,vS=2,tte=4,UPe=8,nte=16,HPe=32,SL=64,qPe=128,nx=256,LR=512,TL=qk|vS|nx;function rte(e,t){return vS|(e?tte:0)|(t?UPe:0)}var D6=0,ite=1,T0=2,WPe=3,GPe=4,YPe=5,Xo=function(t,n,r){this.options=t=sCt(t),this.sourceFile=t.sourceFile,this.keywords=My(QEt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=Yz[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=My(i);var s=(i?i+" ":"")+Yz.strict;this.reservedWordsStrict=My(s),this.reservedWordsStrictBind=My(s+" "+Yz.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(rc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=pe.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(qk),this.regexpState=null,this.privateNameStack=[]},_m={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Xo.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};_m.inFunction.get=function(){return(this.currentVarScope().flags&vS)>0};_m.inGenerator.get=function(){return(this.currentVarScope().flags&UPe)>0};_m.inAsync.get=function(){return(this.currentVarScope().flags&tte)>0};_m.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],n=t.flags;if(n&(nx|LR))return!1;if(n&vS)return(n&tte)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};_m.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags;return(t&SL)>0||this.options.allowSuperOutsideMethod};_m.allowDirectSuper.get=function(){return(this.currentThisScope().flags&qPe)>0};_m.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};_m.allowNewDotTarget.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e],n=t.flags;if(n&(nx|LR)||n&vS&&!(n&nte))return!0}return!1};_m.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&nx)>0};Xo.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Xo.parse=function(t,n){return new this(n,t).parse()};Xo.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Xo.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Xo.prototype,_m);var xu=Xo.prototype,aCt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;xu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){vl.lastIndex=e,e+=vl.exec(this.input)[0].length;var t=aCt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){vl.lastIndex=e+t[0].length;var n=vl.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||rc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,vl.lastIndex=e,e+=vl.exec(this.input)[0].length,this.input[e]===";"&&e++}};xu.eat=function(e){return this.type===e?(this.next(),!0):!1};xu.isContextual=function(e){return this.type===pe.name&&this.value===e&&!this.containsEsc};xu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};xu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};xu.canInsertSemicolon=function(){return this.type===pe.eof||this.type===pe.braceR||rc.test(this.input.slice(this.lastTokEnd,this.start))};xu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};xu.semicolon=function(){!this.eat(pe.semi)&&!this.insertSemicolon()&&this.unexpected()};xu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};xu.expect=function(e){this.eat(e)||this.unexpected()};xu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var AL=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};xu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};xu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};xu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};xu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var un=Xo.prototype;un.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==pe.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var ste={kind:"loop"},lCt={kind:"switch"};un.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;vl.lastIndex=this.pos;var t=vl.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(tm(r,!0)){for(var i=n+1;bv(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!JEt.test(s))return!0}return!1};un.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;vl.lastIndex=this.pos;var e=vl.exec(this.input),t=this.pos+e[0].length,n;return!rc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(bv(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};un.isUsingKeyword=function(e,t){if(this.options.ecmaVersion<17||!this.isContextual(e?"await":"using"))return!1;vl.lastIndex=this.pos;var n=vl.exec(this.input),r=this.pos+n[0].length;if(rc.test(this.input.slice(this.pos,r)))return!1;if(e){var i=r+5,s;if(this.input.slice(r,i)!=="using"||i===this.input.length||bv(s=this.input.charCodeAt(i))||s>55295&&s<56320)return!1;vl.lastIndex=i;var o=vl.exec(this.input);if(o&&rc.test(this.input.slice(i,i+o[0].length)))return!1}if(t){var a=r+2,l;if(this.input.slice(r,a)==="of"&&(a===this.input.length||!bv(l=this.input.charCodeAt(a))&&!(l>55295&&l<56320)))return!1}var u=this.input.charCodeAt(r);return tm(u,!0)||u===92};un.isAwaitUsing=function(e){return this.isUsingKeyword(!0,e)};un.isUsing=function(e){return this.isUsingKeyword(!1,e)};un.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=pe._var,s="let"),r){case pe._break:case pe._continue:return this.parseBreakContinueStatement(i,r.keyword);case pe._debugger:return this.parseDebuggerStatement(i);case pe._do:return this.parseDoStatement(i);case pe._for:return this.parseForStatement(i);case pe._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case pe._class:return e&&this.unexpected(),this.parseClass(i,!0);case pe._if:return this.parseIfStatement(i);case pe._return:return this.parseReturnStatement(i);case pe._switch:return this.parseSwitchStatement(i);case pe._throw:return this.parseThrowStatement(i);case pe._try:return this.parseTryStatement(i);case pe._const:case pe._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case pe._while:return this.parseWhileStatement(i);case pe._with:return this.parseWithStatement(i);case pe.braceL:return this.parseBlock(!0,i);case pe.semi:return this.parseEmptyStatement(i);case pe._export:case pe._import:if(this.options.ecmaVersion>10&&r===pe._import){vl.lastIndex=this.pos;var o=vl.exec(this.input),a=this.pos+o[0].length,l=this.input.charCodeAt(a);if(l===40||l===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===pe._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var u=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(u)return t&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),u==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(i,!1,u),this.semicolon(),this.finishNode(i,"VariableDeclaration");var c=this.value,d=this.parseExpression();return r===pe.name&&d.type==="Identifier"&&this.eat(pe.colon)?this.parseLabeledStatement(i,c,d,e):this.parseExpressionStatement(i,d)}};un.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(pe.semi)||this.insertSemicolon()?e.label=null:this.type!==pe.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};un.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};un.parseDoStatement=function(e){return this.next(),this.labels.push(ste),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(pe._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(pe.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};un.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ste),this.enterScope(0),this.expect(pe.parenL),this.type===pe.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===pe._var||this.type===pe._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),this.parseForAfterInit(e,r,t)}var s=this.isContextual("let"),o=!1,a=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(a){var l=this.startNode();return this.next(),a==="await using"&&this.next(),this.parseVar(l,!0,a),this.finishNode(l,"VariableDeclaration"),this.parseForAfterInit(e,l,t)}var u=this.containsEsc,c=new AL,d=this.start,f=t>-1?this.parseExprSubscripts(c,"await"):this.parseExpression(!0,c);return this.type===pe._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===pe._in&&this.unexpected(t),e.await=!0):o&&this.options.ecmaVersion>=8&&(f.start===d&&!u&&f.type==="Identifier"&&f.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&o&&this.raise(f.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(f,!1,c),this.checkLValPattern(f),this.parseForIn(e,f)):(this.checkExpressionErrors(c,!0),t>-1&&this.unexpected(t),this.parseFor(e,f))};un.parseForAfterInit=function(e,t,n){return(this.type===pe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&t.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===pe._in?n>-1&&this.unexpected(n):e.await=n>-1),this.parseForIn(e,t)):(n>-1&&this.unexpected(n),this.parseFor(e,t))};un.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,WA|(n?0:RG),!1,t)};un.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(pe._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};un.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(pe.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};un.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(pe.braceL),this.labels.push(lCt),this.enterScope(0);for(var t,n=!1;this.type!==pe.braceR;)if(this.type===pe._case||this.type===pe._default){var r=this.type===pe._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(pe.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};un.parseThrowStatement=function(e){return this.next(),rc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var uCt=[];un.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?HPe:0),this.checkLValPattern(e,t?GPe:T0),this.expect(pe.parenR),e};un.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===pe._catch){var t=this.startNode();this.next(),this.eat(pe.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(pe._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};un.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};un.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(ste),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};un.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};un.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};un.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===pe._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};un.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};un.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(pe.braceL),e&&this.enterScope(0);this.type!==pe.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};un.parseFor=function(e,t){return e.init=t,this.expect(pe.semi),e.test=this.type===pe.semi?null:this.parseExpression(),this.expect(pe.semi),e.update=this.type===pe.parenR?null:this.parseExpression(),this.expect(pe.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};un.parseForIn=function(e,t){var n=this.type===pe._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(pe.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};un.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(pe.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===pe._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&(n==="using"||n==="await using")&&this.options.ecmaVersion>=17&&this.type!==pe._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+n+" declaration"):!r&&i.id.type!=="Identifier"&&!(t&&(this.type===pe._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(pe.comma))break}return e};un.parseVarId=function(e,t){e.id=t==="using"||t==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?ite:T0,!1)};var WA=1,RG=2,KPe=4;un.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===pe.star&&t&RG&&this.unexpected(),e.generator=this.eat(pe.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&WA&&(e.id=t&KPe&&this.type!==pe.name?null:this.parseIdent(),e.id&&!(t&RG)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?ite:T0:WPe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(rte(e.async,e.generator)),t&WA||(e.id=this.type===pe.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&WA?"FunctionDeclaration":"FunctionExpression")};un.parseFunctionParams=function(e){this.expect(pe.parenL),e.params=this.parseBindingList(pe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};un.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(pe.braceL);this.type!==pe.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&cCt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};un.parseClassElement=function(e){if(this.eat(pe.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(pe.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===pe.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===pe.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(pe.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===pe.parenL||o!=="method"||i||s){var u=!n.static&&P6(n,"constructor"),c=u&&e;u&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};un.isClassElementNameStart=function(){return this.type===pe.name||this.type===pe.privateId||this.type===pe.num||this.type===pe.string||this.type===pe.bracketL||this.type.keyword};un.parseClassElementName=function(e){this.type===pe.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};un.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&P6(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};un.parseClassField=function(e){return P6(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&P6(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(pe.eq)?(this.enterScope(LR|SL),e.value=this.parseMaybeAssign(),this.exitScope()):e.value=null,this.semicolon(),this.finishNode(e,"PropertyDefinition")};un.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(nx|SL);this.type!==pe.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};un.parseClassId=function(e,t){this.type===pe.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,T0,!1)):(t===!0&&this.unexpected(),e.id=null)};un.parseClassSuper=function(e){e.superClass=this.eat(pe._extends)?this.parseExprSubscripts(null,!1):null};un.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};un.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];yS(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function cCt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function P6(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}un.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==pe.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};un.parseExport=function(e,t){if(this.next(),this.eat(pe.star))return this.parseExportAllDeclaration(e,t);if(this.eat(pe._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[]);else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==pe.string&&this.unexpected(),e.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause());else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null,this.options.ecmaVersion>=16&&(e.attributes=[])}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};un.parseExportDeclaration=function(e){return this.parseStatement(null)};un.parseExportDefaultDeclaration=function(){var e;if(this.type===pe._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,WA|KPe,!1,e)}else if(this.type===pe._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};un.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),yS(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};un.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var l=a[o];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};un.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};un.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};un.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};un.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(pe.braceL);!this.eat(pe.braceR);){if(n)n=!1;else if(this.expect(pe.comma),this.afterTrailingComma(pe.braceR))break;t.push(this.parseExportSpecifier(e))}return t};un.parseImport=function(e){return this.next(),this.type===pe.string?(e.specifiers=uCt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===pe.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(e.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};un.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,T0),this.finishNode(e,"ImportSpecifier")};un.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,T0),this.finishNode(e,"ImportDefaultSpecifier")};un.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,T0),this.finishNode(e,"ImportNamespaceSpecifier")};un.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===pe.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(pe.comma)))return e;if(this.type===pe.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(pe.braceL);!this.eat(pe.braceR);){if(t)t=!1;else if(this.expect(pe.comma),this.afterTrailingComma(pe.braceR))break;e.push(this.parseImportSpecifier())}return e};un.parseWithClause=function(){var e=[];if(!this.eat(pe._with))return e;this.expect(pe.braceL);for(var t={},n=!0;!this.eat(pe.braceR);){if(n)n=!1;else if(this.expect(pe.comma),this.afterTrailingComma(pe.braceR))break;var r=this.parseImportAttribute(),i=r.key.type==="Identifier"?r.key.name:r.key.value;yS(t,i)&&this.raiseRecoverable(r.key.start,"Duplicate attribute key '"+i+"'"),t[i]=!0,e.push(r)}return e};un.parseImportAttribute=function(){var e=this.startNode();return e.key=this.type===pe.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(pe.colon),this.type!==pe.string&&this.unexpected(),e.value=this.parseExprAtom(),this.finishNode(e,"ImportAttribute")};un.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===pe.string){var e=this.parseLiteral(this.value);return iCt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};un.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};un.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var mf=Xo.prototype;mf.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};mf.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};mf.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};mf.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==pe.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};mf.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case pe.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(pe.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case pe.braceL:return this.parseObj(!0)}return this.parseIdent()};mf.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(pe.comma),t&&this.type===pe.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===pe.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===pe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};mf.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};mf.parseBindingListItem=function(e){return e};mf.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(pe.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};mf.checkLValSimple=function(e,t,n){t===void 0&&(t=D6);var r=t!==D6;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===T0&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(yS(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==YPe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};mf.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=D6),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var l=a[o];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}};mf.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=D6),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Pf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},ms={b_stat:new Pf("{",!1),b_expr:new Pf("{",!0),b_tmpl:new Pf("${",!1),p_stat:new Pf("(",!1),p_expr:new Pf("(",!0),q_tmpl:new Pf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Pf("function",!1),f_expr:new Pf("function",!0),f_expr_gen:new Pf("function",!0,!1,null,!0),f_gen:new Pf("function",!1,!1,null,!0)},bS=Xo.prototype;bS.initialContext=function(){return[ms.b_stat]};bS.curContext=function(){return this.context[this.context.length-1]};bS.braceIsBlock=function(e){var t=this.curContext();return t===ms.f_expr||t===ms.f_stat?!0:e===pe.colon&&(t===ms.b_stat||t===ms.b_expr)?!t.isExpr:e===pe._return||e===pe.name&&this.exprAllowed?rc.test(this.input.slice(this.lastTokEnd,this.start)):e===pe._else||e===pe.semi||e===pe.eof||e===pe.parenR||e===pe.arrow?!0:e===pe.braceL?t===ms.b_stat:e===pe._var||e===pe._const||e===pe.name?!1:!this.exprAllowed};bS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};bS.updateContext=function(e){var t,n=this.type;n.keyword&&e===pe.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};bS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};pe.parenR.updateContext=pe.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===ms.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};pe.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ms.b_stat:ms.b_expr),this.exprAllowed=!0};pe.dollarBraceL.updateContext=function(){this.context.push(ms.b_tmpl),this.exprAllowed=!0};pe.parenL.updateContext=function(e){var t=e===pe._if||e===pe._for||e===pe._with||e===pe._while;this.context.push(t?ms.p_stat:ms.p_expr),this.exprAllowed=!0};pe.incDec.updateContext=function(){};pe._function.updateContext=pe._class.updateContext=function(e){e.beforeExpr&&e!==pe._else&&!(e===pe.semi&&this.curContext()!==ms.p_stat)&&!(e===pe._return&&rc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===pe.colon||e===pe.braceL)&&this.curContext()===ms.b_stat)?this.context.push(ms.f_expr):this.context.push(ms.f_stat),this.exprAllowed=!1};pe.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};pe.backQuote.updateContext=function(){this.curContext()===ms.q_tmpl?this.context.pop():this.context.push(ms.q_tmpl),this.exprAllowed=!1};pe.star.updateContext=function(e){if(e===pe._function){var t=this.context.length-1;this.context[t]===ms.f_expr?this.context[t]=ms.f_expr_gen:this.context[t]=ms.f_gen}this.exprAllowed=!0};pe.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==pe.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var tr=Xo.prototype;tr.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};tr.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===pe.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(pe.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};tr.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new AL,r=!0);var a=this.start,l=this.startLoc;(this.type===pe.parenL||this.type===pe.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,a,l)),this.type.isAssign){var c=this.startNodeAt(a,l);return c.operator=this.value,this.type===pe.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===pe.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u};tr.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(pe.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(pe.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};tr.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};tr.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==pe._in)&&s>r){var o=this.type===pe.logicalOR||this.type===pe.logicalAND,a=this.type===pe.coalesce;a&&(s=pe.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,s,i),f=this.buildBinary(t,n,e,d,l,o||a);return(o&&this.type===pe.coalesce||a&&(this.type===pe.logicalOR||this.type===pe.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,r,i)}return e};tr.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};tr.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),l=this.type===pe.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&XPe(a.argument)?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&DG(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,l?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===pe.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==pe._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(i,s);u.operator=this.value,u.prefix=!1,u.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(pe.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function XPe(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&XPe(e.expression)}function DG(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&DG(e.expression)||e.type==="ParenthesizedExpression"&&DG(e.expression)}tr.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};tr.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var l=this.startNodeAt(t,n);l.expression=a,a=this.finishNode(l,"ChainExpression")}return a}e=a}};tr.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(pe.arrow)};tr.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};tr.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,l=a&&this.eat(pe.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(pe.bracketL);if(u||l&&this.type!==pe.parenL&&this.type!==pe.backQuote||this.eat(pe.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(pe.bracketR)):this.type===pe.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!u,a&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(pe.parenL)){var d=new AL,f=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(pe.parenR,this.options.ecmaVersion>=8,!1,d);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=l),e=this.finishNode(g,"CallExpression")}else if(this.type===pe.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};tr.parseExprAtom=function(e,t,n){this.type===pe.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case pe._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===pe.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==pe.dot&&this.type!==pe.bracketL&&this.type!==pe.parenL&&this.unexpected(),this.finishNode(r,"Super");case pe._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case pe.name:var s=this.start,o=this.startLoc,a=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&l.name==="async"&&!this.canInsertSemicolon()&&this.eat(pe._function))return this.overrideContext(ms.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(pe.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[l],!1,t);if(this.options.ecmaVersion>=8&&l.name==="async"&&this.type===pe.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(pe.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[l],!0,t)}return l;case pe.regexp:var u=this.value;return r=this.parseLiteral(u.value),r.regex={pattern:u.pattern,flags:u.flags},r;case pe.num:case pe.string:return this.parseLiteral(this.value);case pe._null:case pe._true:case pe._false:return r=this.startNode(),r.value=this.type===pe._null?null:this.type===pe._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case pe.parenL:var c=this.start,d=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),d;case pe.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(pe.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case pe.braceL:return this.overrideContext(ms.b_expr),this.parseObj(!1,e);case pe._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case pe._class:return this.parseClass(this.startNode(),!1);case pe._new:return this.parseNew();case pe.backQuote:return this.parseTemplate();case pe._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};tr.parseExprAtomDefault=function(){this.unexpected()};tr.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===pe.parenL&&!e)return this.parseDynamicImport(t);if(this.type===pe.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};tr.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(pe.parenR)?e.options=null:(this.expect(pe.comma),this.afterTrailingComma(pe.parenR)?e.options=null:(e.options=this.parseMaybeAssign(),this.eat(pe.parenR)||(this.expect(pe.comma),this.afterTrailingComma(pe.parenR)||this.unexpected())));else if(!this.eat(pe.parenR)){var t=this.start;this.eat(pe.comma)&&this.eat(pe.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};tr.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};tr.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.value!=null?t.value.toString():t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};tr.parseParenExpression=function(){this.expect(pe.parenL);var e=this.parseExpression();return this.expect(pe.parenR),e};tr.shouldParseArrow=function(e){return!this.canInsertSemicolon()};tr.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,l=[],u=!0,c=!1,d=new AL,f=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==pe.parenR;)if(u?u=!1:this.expect(pe.comma),s&&this.afterTrailingComma(pe.parenR,!0)){c=!0;break}else if(this.type===pe.ellipsis){p=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===pe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(pe.parenR),e&&this.shouldParseArrow(l)&&this.eat(pe.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(n,r,l,t);(!l.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,l.length>1?(i=this.startNodeAt(o,a),i.expressions=l,this.finishNodeAt(i,"SequenceExpression",m,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};tr.parseParenItem=function(e){return e};tr.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var dCt=[];tr.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===pe.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(pe.parenL)?e.arguments=this.parseExprList(pe.parenR,this.options.ecmaVersion>=8,!1):e.arguments=dCt,this.finishNode(e,"NewExpression")};tr.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===pe.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===pe.backQuote,this.finishNode(n,"TemplateElement")};tr.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===pe.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(pe.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(pe.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};tr.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===pe.name||this.type===pe.num||this.type===pe.string||this.type===pe.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===pe.star)&&!rc.test(this.input.slice(this.lastTokEnd,this.start))};tr.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(pe.braceR);){if(r)r=!1;else if(this.expect(pe.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(pe.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};tr.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(pe.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===pe.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===pe.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(pe.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(pe.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};tr.parseGetterSetter=function(e){var t=e.key.name;this.parsePropertyName(e),e.value=this.parseMethod(!1),e.kind=t;var n=e.kind==="get"?0:1;if(e.value.params.length!==n){var r=e.value.start;e.kind==="get"?this.raiseRecoverable(r,"getter should have no params"):this.raiseRecoverable(r,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};tr.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===pe.colon&&this.unexpected(),this.eat(pe.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===pe.parenL?(t&&this.unexpected(),e.method=!0,e.value=this.parseMethod(n,r),e.kind="init"):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==pe.comma&&this.type!==pe.braceR&&this.type!==pe.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===pe.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.kind="init",e.shorthand=!0):this.unexpected()};tr.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(pe.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(pe.bracketR),e.key;e.computed=!1}return e.key=this.type===pe.num||this.type===pe.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};tr.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};tr.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(rte(t,r.generator)|SL|(n?qPe:0)),this.expect(pe.parenL),r.params=this.parseBindingList(pe.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};tr.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(rte(n,!1)|nte),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};tr.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==pe.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,YPe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()};tr.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};tr.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,ite,t?null:n)}};tr.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(pe.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===pe.comma?o=null:this.type===pe.ellipsis?(o=this.parseSpread(r),r&&this.type===pe.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};tr.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&TL)&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};tr.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};tr.parseIdentNode=function(){var e=this.startNode();return this.type===pe.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=pe.name):this.unexpected(),e};tr.parsePrivateIdent=function(){var e=this.startNode();return this.type===pe.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};tr.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===pe.semi||this.canInsertSemicolon()||this.type!==pe.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(pe.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};tr.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var O6=Xo.prototype;O6.raise=function(e,t){var n=VPe(this.input,e);t+=" ("+n.line+":"+n.column+")",this.sourceFile&&(t+=" in "+this.sourceFile);var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};O6.raiseRecoverable=O6.raise;O6.curPosition=function(){if(this.options.locations)return new Hk(this.curLine,this.pos-this.lineStart)};var i1=Xo.prototype,fCt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};i1.enterScope=function(e){this.scopeStack.push(new fCt(e))};i1.exitScope=function(){this.scopeStack.pop()};i1.treatFunctionsAsVarInScope=function(e){return e.flags&vS||!this.inModule&&e.flags&qk};i1.declareName=function(e,t,n){var r=!1;if(t===T0){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&qk&&delete this.undefinedExports[e]}else if(t===GPe){var s=this.currentScope();s.lexical.push(e)}else if(t===WPe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var l=this.scopeStack[a];if(l.lexical.indexOf(e)>-1&&!(l.flags&HPe&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){r=!0;break}if(l.var.push(e),this.inModule&&l.flags&qk&&delete this.undefinedExports[e],l.flags&TL)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};i1.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};i1.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};i1.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(TL|LR|nx))return t}};i1.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&(TL|LR|nx)&&!(t.flags&nte))return t}};var kL=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new CL(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},jR=Xo.prototype;jR.startNode=function(){return new kL(this,this.start,this.startLoc)};jR.startNodeAt=function(e,t){return new kL(this,e,t)};function QPe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}jR.finishNode=function(e,t){return QPe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};jR.finishNodeAt=function(e,t,n,r){return QPe.call(this,e,t,n,r)};jR.copyNode=function(e){var t=new kL(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var hCt="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",JPe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",ZPe=JPe+" Extended_Pictographic",e3e=ZPe,t3e=e3e+" EBase EComp EMod EPres ExtPict",n3e=t3e,pCt=n3e,mCt={9:JPe,10:ZPe,11:e3e,12:t3e,13:n3e,14:pCt},gCt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",yCt={9:"",10:"",11:"",12:"",13:"",14:gCt},Rme="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",r3e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",i3e=r3e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",s3e=i3e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",o3e=s3e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",a3e=o3e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",vCt=a3e+" "+hCt,bCt={9:r3e,10:i3e,11:s3e,12:o3e,13:a3e,14:vCt},l3e={};function wCt(e){var t=l3e[e]={binary:My(mCt[e]+" "+Rme),binaryOfStrings:My(yCt[e]),nonBinary:{General_Category:My(Rme),Script:My(bCt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Xz=0,Dme=[9,10,11,12,13,14];Xz<Dme.length;Xz+=1){var xCt=Dme[Xz];wCt(xCt)}var an=Xo.prototype,N6=function(t,n){this.parent=t,this.base=n||this};N6.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};N6.prototype.sibling=function(){return new N6(this.parent,this.base)};var Em=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=l3e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Em.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Em.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Em.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Em.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Em.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Em.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Em.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Em.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Em.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};an.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function _Ct(e){for(var t in e)return!0;return!1}an.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&_Ct(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};an.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};an.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new N6(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};an.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};an.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};an.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};an.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};an.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};an.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};an.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};an.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};an.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)){if(this.options.ecmaVersion>=16){var n=this.regexp_eatModifiers(e),r=e.eat(45);if(n||r){for(var i=0;i<n.length;i++){var s=n.charAt(i);n.indexOf(s,i+1)>-1&&e.raise("Duplicate regular expression modifiers")}if(r){var o=this.regexp_eatModifiers(e);!n&&!o&&e.current()===58&&e.raise("Invalid regular expression modifiers");for(var a=0;a<o.length;a++){var l=o.charAt(a);(o.indexOf(l,a+1)>-1||n.indexOf(l)>-1)&&e.raise("Duplicate regular expression modifiers")}}}}if(e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}}e.pos=t}return!1};an.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};an.regexp_eatModifiers=function(e){for(var t="",n=0;(n=e.current())!==-1&&ECt(n);)t+=Kg(n),e.advance();return t};function ECt(e){return e===105||e===109||e===115}an.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};an.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};an.regexp_eatSyntaxCharacter=function(e){var t=e.current();return u3e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function u3e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}an.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!u3e(n);)e.advance();return e.pos!==t};an.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};an.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};an.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};an.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Kg(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Kg(e.lastIntValue);return!0}return!1};an.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),CCt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function CCt(e){return tm(e,!0)||e===36||e===95}an.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),SCt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function SCt(e){return bv(e,!0)||e===36||e===95||e===8204||e===8205}an.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};an.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};an.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};an.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};an.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};an.regexp_eatZero=function(e){return e.current()===48&&!IL(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};an.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};an.regexp_eatControlLetter=function(e){var t=e.current();return c3e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function c3e(e){return e>=65&&e<=90||e>=97&&e<=122}an.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&TCt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function TCt(e){return e>=0&&e<=1114111}an.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};an.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var d3e=0,Xg=1,Rd=2;an.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(ACt(t))return e.lastIntValue=-1,e.advance(),Xg;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Rd&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return d3e};function ACt(e){return e===100||e===68||e===115||e===83||e===119||e===87}an.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Xg}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return d3e};an.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){yS(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};an.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Xg;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Rd;e.raise("Invalid property name")};an.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";f3e(t=e.current());)e.lastStringValue+=Kg(t),e.advance();return e.lastStringValue!==""};function f3e(e){return c3e(e)||e===95}an.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";kCt(t=e.current());)e.lastStringValue+=Kg(t),e.advance();return e.lastStringValue!==""};function kCt(e){return f3e(e)||IL(e)}an.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};an.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Rd&&e.raise("Negated character class may contain strings"),!0}return!1};an.regexp_classContents=function(e){return e.current()===93?Xg:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Xg)};an.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};an.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||m3e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};an.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};an.regexp_classSetExpression=function(e){var t=Xg,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Rd&&(t=Rd);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Rd&&(t=Xg);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Rd&&(t=Rd)}};an.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};an.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Xg:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};an.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Rd&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};an.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};an.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Rd&&(t=Rd);return t};an.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Xg:Rd};an.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&ICt(n)||RCt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function ICt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function RCt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}an.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return DCt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function DCt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}an.regexp_eatClassControlLetter=function(e){var t=e.current();return IL(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};an.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};an.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;IL(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function IL(e){return e>=48&&e<=57}an.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;h3e(n=e.current());)e.lastIntValue=16*e.lastIntValue+p3e(n),e.advance();return e.pos!==t};function h3e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function p3e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}an.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};an.regexp_eatOctalDigit=function(e){var t=e.current();return m3e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function m3e(e){return e>=48&&e<=55}an.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!h3e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+p3e(i),e.advance()}return!0};var ote=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new CL(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Fr=Xo.prototype;Fr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ote(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Fr.getToken=function(){return this.next(),new ote(this)};typeof Symbol<"u"&&(Fr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===pe.eof,value:t}}}});Fr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(pe.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Fr.readToken=function(e){return tm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Fr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Fr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=jPe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Fr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!gS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Fr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&BPe.test(String.fromCharCode(e)))++this.pos;else break e}}};Fr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Fr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(pe.ellipsis)):(++this.pos,this.finishToken(pe.dot))};Fr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(pe.assign,2):this.finishOp(pe.slash,1)};Fr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?pe.star:pe.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=pe.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(pe.assign,n+1):this.finishOp(r,n)};Fr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(pe.assign,3)}return this.finishOp(e===124?pe.logicalOR:pe.logicalAND,2)}return t===61?this.finishOp(pe.assign,2):this.finishOp(e===124?pe.bitwiseOR:pe.bitwiseAND,1)};Fr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(pe.assign,2):this.finishOp(pe.bitwiseXOR,1)};Fr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||rc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(pe.incDec,2):t===61?this.finishOp(pe.assign,2):this.finishOp(pe.plusMin,1)};Fr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(pe.assign,n+1):this.finishOp(pe.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(pe.relational,n))};Fr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(pe.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(pe.arrow)):this.finishOp(e===61?pe.eq:pe.prefix,1)};Fr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(pe.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(pe.assign,3)}return this.finishOp(pe.coalesce,2)}}return this.finishOp(pe.question,1)};Fr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),tm(t,!0)||t===92))return this.finishToken(pe.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Kg(t)+"'")};Fr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(pe.parenL);case 41:return++this.pos,this.finishToken(pe.parenR);case 59:return++this.pos,this.finishToken(pe.semi);case 44:return++this.pos,this.finishToken(pe.comma);case 91:return++this.pos,this.finishToken(pe.bracketL);case 93:return++this.pos,this.finishToken(pe.bracketR);case 123:return++this.pos,this.finishToken(pe.braceL);case 125:return++this.pos,this.finishToken(pe.braceR);case 58:return++this.pos,this.finishToken(pe.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(pe.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(pe.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Kg(e)+"'")};Fr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Fr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(rc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Em(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var l=null;try{l=new RegExp(i,o)}catch{}return this.finishToken(pe.regexp,{pattern:i,flags:o,value:l})};Fr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,l=0,u=t??1/0;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),d=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?d=c-97+10:c>=65?d=c-65+10:c>=48&&c<=57?d=c-48:d=1/0,d>=e)break;a=c,o=o*e+d}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function PCt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function g3e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Fr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=g3e(this.input.slice(t,this.pos)),++this.pos):tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(pe.num,n)};Fr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=g3e(this.input.slice(t,this.pos));return++this.pos,tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(pe.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),tm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=PCt(this.input.slice(t,this.pos),n);return this.finishToken(pe.num,s)};Fr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Fr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(gS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(pe.string,t)};var y3e={};Fr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===y3e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Fr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw y3e;this.raise(e,t)};Fr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===pe.template||this.type===pe.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(pe.dollarBraceL)):(++this.pos,this.finishToken(pe.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(pe.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(gS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Fr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(pe.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Fr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Kg(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return gS(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Fr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Fr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(bv(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?tm:bv)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Kg(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Fr.readWord=function(){var e=this.readWord1(),t=pe.name;return this.keywords.test(e)&&(t=ete[e]),this.finishToken(t,e)};var OCt="8.15.0";Xo.acorn={Parser:Xo,version:OCt,defaultOptions:IG,Position:Hk,SourceLocation:CL,getLineInfo:VPe,Node:kL,TokenType:ei,tokTypes:pe,keywordTypes:ete,TokContext:Pf,tokContexts:ms,isIdentifierChar:bv,isIdentifierStart:tm,Token:ote,isNewLine:gS,lineBreak:rc,lineBreakG:tCt,nonASCIIwhitespace:BPe};function NCt(e,t){return Xo.parse(e,t)}const ate={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"};function s1(e){return typeof e=="number"}const MCt={ecmaVersion:11},Pme="$",$Ct="d",FCt="d1",LCt="d2",Ma=e=>(t,n)=>n.error(t,e+" not allowed"),jCt=Ma("Aggregate function"),BCt=Ma("Window function"),zCt="Invalid argument",lte="Invalid column reference",VCt=lte+" (must be input to an aggregate function)",v3e="Invalid function call",UCt="Invalid member expression",HCt="Invalid operator parameter",qCt="Invalid param reference",WCt="Invalid variable reference",GCt="Variable not accessible in operator call",YCt="Unsupported variable declaration",KCt="Unsupported destructuring pattern",b3e="Table expressions do not support closures",w3e="Use aq.escape(fn) to use a function as-is (including closures)",XCt="use table.params({ name: value }) to define dynamic parameters",QCt="use aq.addFunction(name, fn) to add new op functions",JCt=`
Note: ${b3e}. ${w3e}, or ${XCt}.`,x3e=`
Note: ${b3e}. ${w3e}, or ${QCt}.`,ZCt=`The ${OPe} method is not valid in multi-table expressions.`;function eSt(e,t){const n=tSt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,zEt(r)?(rSt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=FCt),e.scope.add(e.tuple2=LCt),e.scope.add(e.$param=Pme)):(e.scope.add(e.tuple=$Ct),e.scope.add(e.$param=Pme)),Yr(r,e,ute),e.root}function tSt(e){try{const t=e.field?nSt(e):wu(e)?Yg(e):e;return NCt(`expr=(${t})`,MCt).body[0].expression.right}catch{zs(`Expression parse error: ${e+""}`)}}function nSt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const ute={FunctionDeclaration:Ma("Function definitions"),ForStatement:Ma("For loops"),ForOfStatement:Ma("For-of loops"),ForInStatement:Ma("For-in loops"),WhileStatement:Ma("While loops"),DoWhileStatement:Ma("Do-while loops"),AwaitExpression:Ma("Await expressions"),ArrowFunctionExpression:Ma("Function definitions"),AssignmentExpression:Ma("Assignments"),FunctionExpression:Ma("Function definitions"),NewExpression:Ma('Use of "new"'),UpdateExpression:Ma("Update expressions"),VariableDeclarator(e,t){NG(e.id,t)},Identifier(e,t,n){C3e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,WCt,JCt)},CallExpression(e,t){const n=_3e(e.callee),r=wPe(n)||xPe(n);if(r){if((t.join||t.aggregate===!1)&&Gee(n)&&jCt(e,t),(t.join||t.window===!1)&&Yee(n)&&BCt(e,t),t.$op=1,t.ast)OG(e,n,t),e.arguments.forEach(i=>Yr(i,t,PG));else{const i=t.op(iSt(t,r,n,e.arguments));Object.assign(e,{type:RPe,name:i.id})}return t.$op=0,!1}else bPe(n)?OG(e,n,t):t.error(e,v3e,x3e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!zo(Jy,r))return;const{name:s}=r;if(E3e(e)&&zo(Jy,i)&&Object.hasOwn(ate,i.name)){A3e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Ome(e,o,t,S3e,n);if(s===t.$param)return Ome(e,o,t,oSt);t.paramsRef.has(s)?Wk(e,t.paramsRef.get(s)):t.columnRef.has(s)?T3e(r,s,t,e):Object.hasOwn(t.params,s)&&Wk(r,s)}};function Ome(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(zo(mS,s))a=s.value;else try{Yr(s,n,ute,e),a=n.param(s)}catch{n.error(e,UCt)}return r(e,a,t,n,i),!1}const PG={...ute,VariableDeclarator:Ma("Variable declaration in operator call"),Identifier(e,t,n){C3e(e,t,n)&&t.error(e,GCt)},CallExpression(e,t){const n=_3e(e.callee);bPe(n)?OG(e,n,t):t.error(e,v3e,x3e)}};function rSt(e,t){e.generator&&Ma("Generator functions")(e,t),e.async&&Ma("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,l)=>t.columnRef.set(a,[l,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(t2(t,n[0],"tuple1",i(1)),r>1&&t2(t,n[1],"tuple2",i(2)),r>2&&t2(t,n[2],"$param",s)):(t2(t,n[0],"tuple",i(0)),r>1&&t2(t,n[1],"$param",s))),t.root=e.body}function t2(e,t,n,r){zo(Jy,t)?(e.scope.add(t.name),e[n]=t.name):zo(APe,t)&&t.properties.forEach(i=>{const s=zo(Jy,i.key)?i.key.name:zo(mS,i.key)?i.key.value:e.error(i,zCt);zo(Jy,i.value)||e.error(i.value,KCt),r(i.value.name,s)})}function iSt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((l,u)=>{u<o?(Yr(l,e,PG),i.push(e.field(l))):u<a?(Yr(l,e,PG),s.push(e.param(l))):e.error(l,HCt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function _3e(e){return zo(Jy,e)?e.name:zo(TPe,e)?E3e(e)?sSt(e.property.name):e.property.name:null}function E3e(e){return zo(Jy,e.object)&&e.object.name==="Math"}function sSt(e){return e==="max"?"greatest":e==="min"?"least":e}function C3e(e,t,n){const{name:r}=e;if(!(zo(TPe,n)&&n.property===e)){if(!(zo(kPe,n)&&n.key===e))if(t.paramsRef.has(r))Wk(e,t.paramsRef.get(r));else if(t.columnRef.has(r))T3e(e,r,t,n);else if(Object.hasOwn(t.params,r))Wk(e,r);else if(Object.hasOwn(ate,r))A3e(e,r);else return!0}}function S3e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,lte),r.aggronly&&!r.$op&&r.error(e,VCt),PPe(e,t,n,o,i)}function T3e(e,t,n,r){const[i,s]=n.columnRef.get(t);S3e(e,i,s,n,r)}function oSt(e,t,n,r){r.params&&!Object.hasOwn(r.params,t)&&r.error(e,qCt),Wk(e,t)}function Wk(e,t){e.type=LEt,e.name=t}function A3e(e,t){e.type=MEt,e.name=t,e.raw=ate[t]}function OG(e,t,n){if(t===OPe){const r=n.table;r||n.error(e,ZCt),NPe(e,r,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=s1(s)?r.columnName(s):s;return r.column(o)||n.error(i,lte),o}):r.columnNames())}else e.callee={type:FEt,name:t}}function NG(e,t){zo(Jy,e)?t.scope.add(e.name):zo(DEt,e)?e.elements.forEach(n=>NG(n,t)):zo(APe,e)?e.properties.forEach(n=>NG(n.value,t)):t.error(e.id,YCt)}const aSt={[IPe]:1,[RPe]:1};function Wc(e,t={}){const n=t.generate||R6,r=t.compiler||Zee,i=uSt(t),s={},o={},a=[],l=[];let u=0,c=-1;const d=t.join?r.join:t.index==1?r.expr2:r.expr,f={op(m){const g=lSt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++u)},param(m){return zo(mS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?BEt(g):d(n(g),i));l.push(y),aSt[g.type]&&y!==g&&vv(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,_=String(f.spec).slice(v,b);zs(`${g}: "${_}"${y}`)}};Object.assign(f,t,{params:i});for(const[m,g]of Qee(e))f.value(m+"",g.escape?YEt(f,g,i):eSt(f,g));if(t.ast)return{names:a,exprs:l};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:l,ops:p}}function lSt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function uSt(e){return(e.table?Qz(e.table):e.join?{...Qz(e.join[1]),...Qz(e.join[0])}:{})||{}}function Qz(e){return e&&pu(e.params)?e.params():{}}function k3e(e,t){return e&&e.expr?new Nme({...e,...t}):new Nme(t,e)}class Nme{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...pu(this.expr)?{func:!0}:{}}}}function M6(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return k3e(e,t?{expr:t,...r}:r)}function I3e(e,t){for(const[n,r]of Qee(t))e.set(n,r);return e}function Qg(e,t,n=new Map){return t=s1(t)?e.columnName(t):t,Rh(t)?n.set(t,t):wu(t)?t.forEach(r=>Qg(e,r,n)):pu(t)?Qg(e,t(e),n):vv(t)?I3e(n,t):zs(`Invalid column selection: ${Yg(t)}`),n}function R3e(e,t){return e.toObject=t,e}function D3e(e){return wu(e)?e.map(D3e):e&&e.toObject?e.toObject():e}function Gk(){return R3e(e=>e.columnNames(),()=>({all:[]}))}function P3e(...e){return e=e.flat(),R3e(t=>{const n=Qg(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:D3e(e)}))}function mh(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=s1(o)?t.columnName(o):o,Rh(o)?i.set(o,M6(o)):pu(o)?Qg(t,o).forEach(s):vv(o)?I3e(i,o):zs(`Invalid ${e} value: ${o+""}`)};return em(n).forEach(s),r.preparse&&r.preparse(i),Wc(i,{table:t,...r})}function cte(e,...t){return cSt(e,mh("groupby",e,t.flat()))}function cSt(e,t){return e.create({groups:dSt(e,t)})}function dSt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=tx(e,r,n);const o=k6(s),a=e.totalRows(),l=new Uint32Array(a),u={},c=[],d=e.data(),f=e.mask();if(f)for(let h=f.next(0);h>=0;h=f.next(h+1)){const p=o(h,d)+"";l[h]=u[p]??=c.push(h)-1}else for(let h=0;h<a;++h){const p=o(h,d)+"";l[h]=u[p]??=c.push(h)-1}return r.length||(s=s.map(h=>p=>h(p,d))),{keys:l,get:s,names:t,rows:c,size:c.length}}function rd(e){return e?new Mme({...e.data()},e.columnNames()):new Mme}class Mme{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Object.hasOwn(this.data,t)}groupby(t){return this.groups=t,this}new(t){const{data:n,names:r,groups:i=null}=this;return t.create({data:n,names:r,groups:i,filter:null,order:null})}derive(t){return t.create(this)}}function $6(e,t){return dte(e,Wc(t,{table:e,aggronly:!0,window:!1}))}function dte(e,{names:t,exprs:n,ops:r=[]}){const i=rd(),s=e.groups();return s&&SPe(i,s),fSt(t,n,s,pS(e,r),i),i.new(e)}function fSt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(l,u)=>r[l][u],a=e.length;for(let l=0;l<a;++l){const u=t[l];if(u.field!=null)i.add(e[l],r[u.field]);else if(s>1){const c=i.add(e[l],Array(s));for(let d=0;d<s;++d)c[d]=u(d,null,o)}else i.add(e[l],[u(0,null,o)])}}function O3e(e,...t){return fte(e,Qg(e,t.flat()))}function fte(e,t){const n=rd();return t.forEach((r,i)=>{const s=Rh(r)?r:i;if(s){const o=e.column(i)||zs(`Unrecognized column: ${i}`);n.add(s,o)}}),n.derive(e)}function hSt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Uint32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,d)=>c+d,0);if(o===i)return e;const a=Array(o);let l=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=l++]=r[c]);const u=new Uint32Array(n.length);return t.scan(c=>u[c]=s[n[c]]),{...e,keys:u,rows:a,size:l}}function pSt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,l=o,u=null;if(n){u=new Int32Array(o),t(p=>u[i[p]]=1);const h=u.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),l=0;for(let p=0;p<o;++p)u[p]&&(a[u[p]=l++]=s[p])}}let c=-1;const d=new Uint32Array(r);return t(l!==o?h=>d[++c]=u[i[h]]:h=>d[++c]=i[h]),{...e,keys:d,rows:a,size:l}}function mSt(e,t,n,r){const i=r==="map"||r===!0?hEt:r==="entries"?mEt:r==="object"?pEt:zs('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=gEt(e.columnNames(),"_");let a=O3e(e,{}).reify(t).create({data:{[o]:n}});a=$6(a,{[o]:dEt(o)});for(let l=s.length;--l>=0;)a=$6(cte(a,s.slice(0,l)),{[o]:i(s[l],o)});return a.get(o)}function gSt(e){return wL(e)?e.constructor:Array}let MG=class{constructor(t,n,r,i,s,o){const a=Object.freeze({...t});n=n?.slice()??Object.keys(a);const l=n.length?a[n[0]].length:0;this._names=Object.freeze(n),this._data=a,this._total=l,this._nrows=r?.count()??l,this._mask=r??null,this._group=i??null,this._order=s??null,this._params=o,this._index=null,this._partitions=null}create({data:t=void 0,names:n=void 0,filter:r=void 0,groups:i=void 0,order:s=void 0}={}){const o=r!==void 0?r:this.mask();return new this.constructor(t||this._data,n||(t?null:this._names),o,i!==void 0?i:hSt(this._group,r&&o),s!==void 0?s:this._order,this._params)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows(),n=this.numCols(),r=i=>i!==1?"s":"";return`Table: ${n} col${r(n)} x ${t} row${r(t)}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.at(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.at(this.indices()[n]):r.at(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;if(r)return i=>n.at(r[i]);if(n)return i=>n.at(i);zs(`Unrecognized column: ${t}`)}object(t=0){return $me(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Qg(this,t.columns||Gk()),o=$Pe(this,s),a=[];if(this.scan((l,u)=>a.push(o(l,u)),!0,r,i),n&&this.isGrouped()){const l=[];return this.scan(u=>l.push(u),!0,r,i),mSt(this,l,a,n)}return a}*[Symbol.iterator](){const t=$me(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}print(t={}){const n=s1(t)?{limit:+t}:{...t,limit:10},r=this.objects({...n,grouped:!1}),i=`${this[Symbol.toStringTag]}. Showing ${r.length} rows.`;return console.log(i),console.table(r),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const{_order:a,_data:l}=this;r.sort((u,c)=>a(u,c,l))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=EL(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let l=0,u;l<a;++l)u=s[l],i[n[u]].push(u);else if(o)for(let l=o.next(0);l>=0;l=o.next(l+1))i[n[l]].push(l);else for(let l=0;l<a;++l)i[n[l]].push(l);if(t&&!s&&this.isOrdered()){const l=this._order,u=this._data;for(let c=0;c<r;++c)i[c].sort((d,f)=>l(d,f,u))}return(t||!this.isOrdered())&&(this._partitions=i),i}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?l=>t.forEach(l):l=>this.scan(l,!0),a=r.length;i={};for(let l=0;l<a;++l){const u=r[l],c=this.column(u),d=i[u]=new(gSt(c))(n);let f=-1;r1(c)?o(h=>d[++f]=c[h]):o(h=>d[++f]=c.at(h))}this.isGrouped()&&(s=pSt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let l=i||0;if(l>o)return;const u=Math.min(o,l+r),c=()=>l=this._total;if(n&&this.isOrdered()||s&&this._index){const d=this.indices(),f=this._data;for(;l<u;++l)t(d[l],f,c)}else if(s){let d=u-l+1;for(l=s.nth(l);--d&&l>-1;l=s.next(l+1))t(l,a,c)}else for(;l<u;++l)t(l,a,c)}};function $me(e){let t=e._builder;if(!t){const n=$Pe(e),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}function ySt(e,...t){t=t.flat();const n=e.numRows(),r=e.reify(),i=rd(r).groupby(r.groups());return t.forEach(s=>{s=s instanceof MG?s:new MG(s),s.numRows()!==n&&zs("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),i.new(e)}function N3e(e,...t){t=t.flat();const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=rd();return e.columnNames().forEach(o=>{const a=Array(r);let l=0;i.forEach(u=>{const c=u.column(o)||{at:()=>ni};u.scan(d=>a[l++]=c.at(d))}),s.add(o,a)}),s.new(e)}function M3e(e,t,{before:n=void 0,after:r=void 0}={}){const i=n!=null,s=r!=null;i||s||zs("relocate requires a before or after option."),i&&s&&zs("relocate accepts only one of the before or after options."),t=Qg(e,t);const o=[...Qg(e,i?n:r).keys()],a=i?o[0]:o.pop(),l=new Map;return e.columnNames().forEach(u=>{const c=!t.has(u);if(u===a){s&&c&&l.set(u,u);for(const[d,f]of t)l.set(d,f);if(s)return}c&&l.set(u,u)}),fte(e,l)}function $3e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Fme=$3e(Kee);function vSt(e,t,n,r,i){let s,o,a,l,u;const c=m=>o[m-1]===o[m],d=r.length,f=i.length,h=r.length?hS(["w","r","k"],"{"+FR(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,l=y,u=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<d;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,_=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Fme.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Fme.right(o,o[p.i1-1])));for(let E=0;E<f;++E){const S=i[E],T=a[E];for(let A=b;A<p.i0;++A)S.rem(T,s[A],e);for(let A=_;A<p.i1;++A)S.add(T,s[A],e);S.write(T,l,u)}return h(p,l,u),l}};return p}const bSt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),wSt=e=>!!e.peers;function xSt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e;return{...xPe(n).create(...i),get:r.length?r[0]:null,id:t}}function _St(e,t,n,r={},i){const s=e.data(),o=ESt(i,s),a=o.length,l=hS(["r","d","op"],"{"+FR(t,(u,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,c)=>{const d=u.length,f=CSt(e,u);for(let p=0;p<a;++p)o[p].init(u,f,r,c);const h=p=>r[p][c];for(let p=0;p<d;++p){for(let m=0;m<a;++m)o[m].step(p);l(u[p],s,h)}})}function ESt(e,t){const n={};return e.forEach(r=>{const i=bSt(r),s=wSt(r),o=`${i},${s}`,{aggOps:a,winOps:l}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Gee(r.name)?a.push(r):l.push(xSt(r))}),Object.values(n).map(r=>vSt(t,r.frame,r.peers,r.winOps,_Pe(r.aggOps,r.frame[0]!=null?-1:1)))}function CSt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function SSt(e){return Yee(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function TSt(e,t,n={}){const r=hte(e,Wc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:M3e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function hte(e,{names:t,exprs:n,ops:r=[]},i={}){const s=e.totalRows(),o=rd(i.drop?null:e),a=t.map(f=>o.add(f,Array(s))),[l,u]=ASt(r),c=e.isGrouped()?e.groups().size:1,d=pS(e,l,EL(r.length,()=>Array(c)));return u.length?_St(e,a,n,d,u):kSt(e,a,n,d),o.derive(e)}function ASt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(SSt(s)?n:t).push(s)}return[t,n]}function kSt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(u,c)=>r[u][o[c]]:u=>r[u][0],l=t.length;for(let u=0;u<l;++u){const c=n[u],d=t[u];if(i)for(let f=i.next(0);f>=0;f=i.next(f+1))d[f]=c(f,s,a);else{const f=e.totalRows();for(let h=0;h<f;++h)d[h]=c(h,s,a)}}}function pte(e,t){const n=Wc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const i=hte(e,n,{drop:!0}).column("p");r=s=>i.at(s)}return ISt(e,r)}function ISt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new dPe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function RL(e,...t){t=t.flat();const n=cte(e,t.length?t:e.columnNames());return pte(n,"row_number() === 1").ungroup().reify()}function F3e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function RSt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function DSt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function F6(e,t,n){const r=new Map;em(n).forEach((s,o)=>{s=s1(s)?t.columnName(s):s,Rh(s)?r.set(o,M6(s)):pu(s)||vv(s)&&s.expr?r.set(o,s):zs(`Invalid ${e} key value: ${s+""}`)});const i=Wc(r,{table:t,aggregate:!1,window:!1});return k6(i.exprs,!0)}function mte(e,t,n){if(n)Rh(n)?n=[n,n]:wu(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=DSt(e.columnNames(),t.columnNames());r.length||zs("Natural join requires shared column names."),n=[r,r]}return n}function L3e(e,t,n,r){return n.length!==r.length&&zs("Mismatched number of join keys"),[F6("join",e,n),F6("join",t,r)]}function j3e(e,t,n){return z3e(e,t,n,{anti:!1})}function B3e(e,t,n){return z3e(e,t,n,{anti:!0})}function z3e(e,t,n,r){n=mte(e,t,n);const i=wu(n)?L3e(e,t,...n.map(em)):Wc({on:n},{join:[e,t]}).exprs[0];return PSt(e,t,i,r)}function PSt(e,t,n,r={}){const i=new dPe(e.totalRows());return(wu(n)?OSt:NSt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function OSt(e,t,n,[r,i]){const s=F3e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function NSt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const l=t.indices(!1),u=n.indices(!1);for(let c=0;c<i;++c){const d=l[c];for(let f=0;f<s;++f)if(r(d,o,u[f],a)){e.set(d);break}}}else for(let l=0;l<i;++l)for(let u=0;u<s;++u)if(r(l,o,u,a)){e.set(l);break}}function MSt(e,...t){if(t=t.flat(),t.length===0)return e;const n=e.columnNames();return RL(t.reduce((r,i)=>B3e(r,i.select(n)),e))}function $St(e,t,n){return V3e(e,mh("unroll",e,t),n&&n.drop?{...n,drop:mh("unroll",e,n.drop).names}:n)}function V3e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),l=tx(e,r,n),u=rd(),c=new Set(t),d=[],f=[],h=[];e.columnNames().forEach(_=>{if(!a.has(_)){const E=u.add(_,[]);c.has(_)||(d.push(e.column(_)),f.push(E))}}),t.forEach(_=>{a.has(_)||(u.has(_)||u.add(_,[]),h.push(u.data[_]))});const p=o?u.add(o,[]):null;let m=0;const g=d.length,y=h.length,v=(_,E)=>{for(let S=0;S<g;++S)f[S].length=m+E,f[S].fill(d[S].at(_),m,m+E)},b=p?(_,E)=>{for(let S=0;S<E;++S)p[_+S]=S}:()=>{};if(y===1){const _=l[0],E=h[0];e.scan((S,T)=>{const A=em(_(S,T)),R=Math.min(A.length,s);v(S,R);for(let I=0;I<R;++I)E[m+I]=A[I];b(m,R),m+=R})}else e.scan((_,E)=>{let S=0;const T=l.map(A=>{const R=em(A(_,E));return S=Math.min(Math.max(S,R.length),s),R});v(_,S);for(let A=0;A<y;++A){const R=h[A],I=T[A];for(let P=0;P<S;++P)R[m+P]=I[P]}b(m,S),m+=S});return u.new(e)}function FSt(e,t,n){return LSt(e,mh("fold",e,t),n)}function LSt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=tx(e,r,n);return V3e(e,{names:[s,o],exprs:[()=>t,(l,u)=>a.map(c=>c(l,u))]},{...i,drop:t})}function gte(e){return e.isGrouped()?e.create({groups:null}):e}function jSt(e,t,n={}){if(t=Wc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:zs(`Invalid impute column ${Yg(r)}`)),n.expand){const r={preparse:BSt,window:!1,aggronly:!0},i=mh("impute",e,n.expand,r),s=dte(gte(e),i);return Lme(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Lme(e,t)}function BSt(e){e.forEach((t,n)=>t.field?e.set(n,fEt(t+"")):0)}function Lme(e,t,n,r){const i=n&&n.length;e=i?zSt(e,n,r):e;const{names:s,exprs:o,ops:a}=t,l=tx(e,a,o),u=i?null:rd(e),c=e.totalRows();return s.forEach((d,f)=>{const h=e.column(d),p=i?h:u.add(d,Array(c)),m=l[f];e.scan(g=>{const y=h.at(g);p[g]=Kf(y)?y:m(g)})}),i?e:e.create(u)}function zSt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,l=k6(o);e.scan((p,m)=>a.add(l(p,m)));const u=e.columnNames(),c=rd(),d=u.map(p=>c.add(p,[]));u.forEach((p,m)=>{const g=i[p],y=d[m];e.scan(v=>y.push(g.at(v)))});const f=k6(o.map((p,m)=>g=>g[m])),h=hS("v","{"+d.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",d,u.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),jme(r,n,(y,v)=>{a.has(f(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else jme(r,n,p=>{a.has(f(p))||h(p)});return c.new(e)}function jme(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),l=[];if(e){const{get:c,rows:d,size:f}=e;o[0]=f,l.push((h,p)=>{const m=d[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,d)=>{const f=d+r;o[d+i]=c.length,l.push((h,p)=>h[f]=c[p])});const u=Array(r+t.length);for(let c=0;c<s;++c)l[c](u,0);n(u,a);for(let c=s-1;c>=0;){const d=++a[c];d<o[c]?(l[c](u,d),n(u,a),c=s-1):(a[c]=0,l[c](u,0),--c)}}function VSt(e,...t){t=t.flat();const n=e.columnNames();return t.length?RL(t.reduce((r,i)=>j3e(r,i.select(n)),e)):e.reify([])}const USt={aggregate:!1,window:!1},HSt={...USt,index:1},Bme=-1/0;function qSt(e,t,n,r){return K2(e,t,()=>!0,n,{...r,left:!0,right:!0})}function K2(e,t,n,r,i={}){n=mte(e,t,n);const s={join:[e,t]};let o;if(wu(n)){const[a,l]=n.map(em);o=L3e(e,t,a,l),r||(r=WSt(e,a,l,i))}else o=Wc({on:n},s).exprs[0],r||(r=[Gk(),Gk()]);return KSt(e,t,o,GSt(e,t,r,s,i&&i.suffix),i)}function WSt(e,t,n,r){const i=[];t.forEach((o,a)=>Rh(o)&&o===n[a]?i.push(o):0);const s=P3e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const l=`[${Yg(a)}]`;return o.has(a)?{[a]:`(a, b) => a${l} == null ? b${l} : a${l}`}:a}),s]}return r.right?[s,Gk()]:[Gk(),s]}function GSt(e,t,n,r,i=[]){if(wu(n)){let s,o,a,l=n.length;s=o=a={names:[],exprs:[]},l--&&(s=mh("join",e,n[0],r)),l--&&(o=mh("join",t,n[1],HSt)),l--&&(a=Wc(n[2],r));const u=new Set,c=new Set(s.names);return o.names.forEach(d=>{c.has(d)&&u.add(d)}),u.size&&(i[0]!==""&&zme(s.names,u,i[0]||"_1"),i[1]!==""&&zme(o.names,u,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Wc(n,r)}function zme(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function YSt(e,t){const n=["i","a","j","b"];return hS(n,"{"+FR(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function KSt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),l=a.length,u=new Int32Array(l),c=t.data(),d=t.indices(!1),f=d.length,h=new Int32Array(f),p=r.length,m=rd(),g=Array(p),y=Array(p);for(let _=0;_<r.length;++_)g[_]=m.add(r[_],[]),y[_]=i[_];const v=YSt(g,y);if((wu(n)?QSt:XSt)(v,n,o,c,a,d,u,h,l,f),s.left)for(let _=0;_<l;++_)u[_]||v(a[_],o,Bme,c);if(s.right)for(let _=0;_<f;++_)h[_]||v(Bme,o,d[_],c);return m.new(e)}function XSt(e,t,n,r,i,s,o,a,l,u){for(let c=0;c<l;++c){const d=i[c];for(let f=0;f<u;++f){const h=s[f];t(d,n,h,r)&&(e(d,n,h,r),o[c]=1,a[f]=1)}}}function QSt(e,[t,n],r,i,s,o,a,l,u,c){let d,f,h,p,m,g,y,v,b=e;u>=c?(d=r,f=t,h=a,p=s,m=i,g=n,y=l,v=o):(d=i,f=n,h=l,p=o,m=r,g=t,y=a,v=s,b=(S,T,A,R)=>e(A,R,S,T));const _=RSt(v,m,g),E=p.length;for(let S=0;S<E;++S){const T=p[S],A=_.get(f(T,d));if(A){const R=A.length;for(let I=0;I<R;++I){const P=A[I];b(T,d,v[P],m),y[P]=1}h[S]=1}}}function JSt(e,t,n,...r){return n=mte(e,t,n),r=r.length===0?[P3e(e.columnNames())]:r.flat(),ZSt(e,t,[F6("lookup",e,n[0]),F6("lookup",t,n[1])],mh("lookup",t,r))}function ZSt(e,t,[n,r],{names:i,exprs:s,ops:o=[]}){const a=rd(e),l=e.totalRows();i.forEach(f=>a.add(f,Array(l).fill(ni)));const u=F3e(t,r),c=hS(["lr","rr","data"],"{"+FR(i,(f,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(f=>a.data[f]),tx(t,o,s)),d=t.data();return e.scan((f,h)=>{const p=u.get(n(f,h));p>=0&&c(f,p,d)}),a.derive(e)}const eTt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n} : (u > v || v == null) && u != null ? ${r} : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n} : v !== v && u === u ? ${r} : `,tTt=(e,t,n,r,i)=>`(v = ${t}, (u = ${e}) == null && v == null) ? 0 : v == null ? ${r} : u == null ? ${n} : (u = ${i}(u,v)) ? u : `;function nTt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:l}=Wc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([R6(p,{index:"a",op:o}),R6(p,{index:"b",op:a})])},window:!1}),u=pS(e,l),c=(h,p)=>u[h][p],d=n.length;let f="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<d;++h){const p=t.get(n[h]),m=p.desc?-1:1,[g,y]=r[h];p.collate?(f+=tTt(g,y,-m,m,`${m<0?"-":""}fn[${i.length}]`),i.push(p.collate)):f+=eTt(g,y,-m,m)}return f+="0;};",Function("op","keys","fn","data",f)(c,s,i,e.data())}function rTt(e,...t){return sTt(e,iTt(e,t.flat()))}function iTt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(vv(o)&&!pu(o))for(const a in o)i(o[a]);else i(s1(o)?M6(s,e.columnName(o)):Rh(o)?M6(s):pu(o)?s:zs(`Invalid orderby field: ${s+""}`))}),nTt(e,r)}function sTt(e,t){return e.create({order:t})}function oTt(e,t,n,r){return lTt(e,mh("fold",e,t),mh("fold",e,n,{preparse:aTt,window:!1,aggronly:!0}),r)}function aTt(e){e.forEach((t,n)=>t.field?e.set(n,uEt(t+"")):0)}const $G=(e,t)=>e??t;function lTt(e,t,n,r={}){const{keys:i,keyColumn:s}=uTt(e,t,r),o=$G(r.valueSeparator,"_"),a=n.names.length>1?(u,c)=>c+o+i[u]:u=>i[u],l=i.map(u=>pS(e,n.ops.map(c=>{if(c.name==="count"){const f=h=>u===s[h]?1:NaN;return f.toString=()=>u+":1",{...c,name:"sum",fields:[f]}}const d=c.fields.map(f=>{const h=(p,m)=>u===s[p]?f(p,m):NaN;return h.toString=()=>u+":"+f,h});return{...c,fields:d}})));return cTt(n,a,e.groups(),l).new(e)}function uTt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=$G(n.sort,!0),s=$G(n.keySeparator,"_"),o=tx(e,t.ops,t.exprs),a=o.length===1?o[0]:(d,f)=>o.map(h=>h(d,f)).join(s),l=Array(e.totalRows());e.scan((d,f)=>l[d]=a(d,f));const u=pS(gte(e),[{id:0,name:"array_agg_distinct",fields:[(d=>l[d])],params:[]}])[0][0],c=i?u.sort():u;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:l}}function cTt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=rd(),a=i.length,l=e.length;let u;const c=(d,f)=>u[d][f];r&&SPe(o,r);for(let d=0;d<l;++d){const f=t[d];if(f.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[d]),i[h][f.field]);else if(s>1)for(let h=0;h<a;++h){u=i[h];const p=o.add(n(h,e[d]),Array(s));for(let m=0;m<s;++m)p[m]=f(m,null,c)}else for(let h=0;h<a;++h)u=i[h],o.add(n(h,e[d]),[f(0,null,c)])}return o}function dTt(e,t){const n=rd(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},l=new Uint32Array(a+1);s.forEach(f=>n.add(f,null));const u=r?CPe(e,t,r):[EPe(e,t)];t.outputs().map(f=>n.add(f,[]));const c=l.length-1;let d=0;for(let f=0;f<c;++f)d+=l[f+1]=t.write(u[f],n.data,l[f]);if(r){const f=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(d),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],f),v,v+=l[y+1])})}return n.new(e)}function fTt(e,...t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),fte(e,Qg(e,t.flat(),n))}function hTt(e,t,n,r){return(t?r?mTt:pTt:r?yTt:gTt)(e.length,e,n,r)}function pTt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*fS()|0];return t}function mTt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let l=0;l<i;++l)s[l]=o+=r(n[l]);const a=$3e(Kee).right;for(let l=0;l<e;++l)t[l]=n[a(s,o*fS())];return t}function gTt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*fS();s<e&&(t[s|0]=n[i])}return t}function yTt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(fS())/r(n[a]);o.sort((a,l)=>s[a]-s[l]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function vTt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=fS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function bTt(e,t,n={}){return _Tt(e,wTt(e,t),xTt(e,n.weight),n)}const U3e=e=>t=>e.at(t)||0;function wTt(e,t){return s1(t)?()=>t:U3e(dte(e,Wc({size:t},{table:e,window:!1})).column("size"))}function xTt(e,t){return t==null?null:(t=s1(t)?e.columnName(t):t,U3e(Rh(t)?e.column(t):hte(e,Wc({w:t},{table:e}),{drop:!0}).column("w")))}function _Tt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,d)=>{let f=t(d);return a+=f=i?f:Math.min(c.length,f),f});const l=new Uint32Array(a);let u=0;return o.forEach((c,d)=>{const f=t[d],h=l.subarray(u,u+=f);!i&&f===c.length?h.set(c):hTt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&vTt(l),e.reify(l)}function ETt(e=0,t=1/0){return`${Vme(e)} < row_number() && row_number() <= ${Vme(t)}`}function Vme(e){return e<0?`count() + ${e}`:e}function CTt(e,t=0,n=1/0){if(e.isGrouped())return pte(e,ETt(t,n)).reify();const r=[],i=e.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),e.scan(s=>r.push(s),!0,n-t,t),e.reify(r)}function STt(e,t,n){return TTt(e,mh("spread",e,t),n)}function TTt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),l=tx(e,r,n),u=rd(),c=t.reduce((f,h,p)=>f.set(h,p),new Map),d=(f,h)=>{const p=ATt(e,l[f],a),m=p.length;for(let g=0;g<m;++g)u.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(f=>{c.has(f)?(o||u.add(f,e.column(f)),d(c.get(f),f),c.delete(f)):u.add(f,e.column(f))}),c.forEach(d),u.derive(e)}function ATt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=em(t(s,o)),l=Math.min(a.length,n);for(;i.length<l;)i.push(Array(r).fill(ni));for(let u=0;u<l;++u)i[u][s]=a[u]}),i}function kTt(e,...t){return RL(N3e(e,t.flat()))}function ITt(e){return e.isOrdered()?e.create({order:null}):e}const H3e=Uint8Array.of(65,82,82,79,87,49),RTt=Uint8Array.of(255,255,255,255,0,0,0,0),Yk={V1:0,V5:4},DTt={Little:0},c4={NONE:0,Schema:1,DictionaryBatch:2,RecordBatch:3},pt={Dictionary:-1,NONE:0,Null:1,Int:2,Float:3,Binary:4,Utf8:5,Bool:6,Decimal:7,Date:8,Time:9,Timestamp:10,Interval:11,List:12,Struct:13,Union:14,FixedSizeBinary:15,FixedSizeList:16,Map:17,Duration:18,LargeBinary:19,LargeUtf8:20,LargeList:21,RunEndEncoded:22,BinaryView:23,Utf8View:24,ListView:25,LargeListView:26},DL={HALF:0,SINGLE:1,DOUBLE:2},Kk={DAY:0,MILLISECOND:1},ih={SECOND:0,MILLISECOND:1,MICROSECOND:2,NANOSECOND:3},Xk={YEAR_MONTH:0,DAY_TIME:1,MONTH_DAY_NANO:2},q3e={Sparse:0,Dense:1},wS=Uint8Array,yte=Uint16Array,vte=Uint32Array,bte=BigUint64Array,wte=Int8Array,W3e=Int16Array,xS=Int32Array,_S=BigInt64Array,G3e=Float32Array,BR=Float64Array;function PTt(e,t){const n=Math.log2(e)-3;return(t?[wte,W3e,xS,_S]:[wS,yte,vte,bte])[n]}const OTt=Object.getPrototypeOf(Int8Array);function Y3e(e){return e instanceof OTt}function K3e(e){return Array.isArray(e)||Y3e(e)}function xte(e){return e===_S||e===bte}function _te(e,t){let n=0,r=e.length;if(r<=2147483648)do{const i=n+r>>>1;e[i]<=t?n=i+1:r=i}while(n<r);else do{const i=Math.trunc((n+r)/2);e[i]<=t?n=i+1:r=i}while(n<r);return n}function NTt(e,t=1){return(e*t+7&-8)/t}function MTt(e,t=e.length){const n=NTt(t,e.BYTES_PER_ELEMENT);return e.length>n?e.subarray(0,n):e.length<n?X3e(e,n):e}function X3e(e,t,n=0){const r=new e.constructor(t);return r.set(e,n),r}function Q3e(e,t,n){for(;e.length<=t;)e=X3e(e,e.length<<1,n?e.length:0);return e}function $Tt(e){return e instanceof Date}function FTt(e){return typeof e[Symbol.iterator]=="function"}function J3e(e,t,n){if(t(e))return e;throw new Error(n(e))}function zR(e,t,n){return t=Array.isArray(t)?t:Object.values(t),J3e(e,r=>t.includes(r),n??(()=>`${e} must be one of ${t}`))}function LTt(e,t){for(const[n,r]of Object.entries(e))if(r===t)return n;return"<Unknown>"}const PL=e=>`Unsupported data type: "${LTt(pt,e)}" (id ${e})`,OL=(e,t,n=!0,r=null)=>({name:e,type:t,nullable:n,metadata:r});function Z3e(e){return Object.hasOwn(e,"name")&&eOe(e.type)}function eOe(e){return typeof e?.typeId=="number"}function tOe(e,t="",n=!0){return Z3e(e)?e:OL(t,J3e(e,eOe,()=>"Data type expected."),n)}const nOe=e=>({typeId:e}),jTt=(e,t,n=!1,r=-1)=>({typeId:pt.Dictionary,id:r,dictionary:e,indices:t||Ete(),ordered:n}),BTt=()=>nOe(pt.Null),o1=(e=32,t=!0)=>({typeId:pt.Int,bitWidth:zR(e,[8,16,32,64]),signed:t,values:PTt(e,t)}),rOe=()=>o1(8),iOe=()=>o1(16),Ete=()=>o1(32),sOe=()=>o1(64),zTt=()=>o1(8,!1),VTt=()=>o1(16,!1),UTt=()=>o1(32,!1),HTt=()=>o1(64,!1),oOe=(e=2)=>({typeId:pt.Float,precision:zR(e,DL),values:[yte,G3e,BR][e]}),qTt=()=>oOe(DL.SINGLE),Cte=()=>oOe(DL.DOUBLE),WTt=()=>({typeId:pt.Utf8,offsets:xS}),GTt=()=>nOe(pt.Bool),YTt=e=>({typeId:pt.Date,unit:zR(e,Kk),values:e===Kk.DAY?xS:_S}),KTt=()=>YTt(Kk.DAY),XTt=(e=ih.MILLISECOND,t=null)=>({typeId:pt.Timestamp,unit:zR(e,ih),timezone:t,values:_S}),QTt=e=>({typeId:pt.List,children:[tOe(e)],offsets:xS}),JTt=e=>({typeId:pt.Struct,children:Array.isArray(e)&&Z3e(e[0])?e:Object.entries(e).map(([t,n])=>OL(t,n))}),ZTt=(e,t)=>({typeId:pt.FixedSizeList,stride:t,children:[tOe(e)]}),aOe=new BR(2),NL=aOe.buffer,e2t=new _S(NL),f_=new vte(NL),Ume=new xS(NL),t2t=new wS(NL);function n2t(e){return e}function pg(e){return BigInt(e)}function lOe(e){return xte(e)?pg:n2t}function r2t(e){return e/864e5|0}function i2t(e){return e===ih.SECOND?t=>pg(t/1e3):e===ih.MILLISECOND?pg:e===ih.MICROSECOND?t=>pg(t*1e3):t=>pg(t*1e6)}function s2t([e,t,n]){return Ume[0]=e,Ume[1]=t,e2t[1]=pg(n),t2t}function wv(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error(`BigInt exceeds integer number representation: ${e}`);return Number(e)}function Ste(e,t){return Number(e/t)+Number(e%t)/Number(t)}function o2t(e){return t=>typeof t=="bigint"?Number(t):Math.trunc(t*e)}function a2t(e,t,n,r,i){const s=typeof e=="bigint"?e:pg(Math.trunc(e*i));t[n]=s,r>1&&(t[n+1]=s>>64n,r>2&&(t[n+2]=s>>128n,t[n+3]=s>>192n))}const Q_=e=>BigInt.asUintN(64,e);function l2t(e,t){return BigInt.asIntN(64,e[t])}function u2t(e,t){const n=t<<1;let r;return BigInt.asIntN(64,e[n+1])<0?(r=Q_(~e[n])|Q_(~e[n+1])<<64n,r=-(r+1n)):r=e[n]|e[n+1]<<64n,r}function c2t(e,t){const n=t<<2;let r;return BigInt.asIntN(64,e[n+3])<0?(r=Q_(~e[n])|Q_(~e[n+1])<<64n|Q_(~e[n+2])<<128n|Q_(~e[n+3])<<192n,r=-(r+1n)):r=e[n]|e[n+1]<<64n|e[n+2]<<128n|e[n+3]<<192n,r}function d2t(e){if(e!==e)return 32256;aOe[0]=e;const t=(f_[1]&2147483648)>>16&65535;let n=f_[1]&2146435072,r=0;return n>=1089470464?f_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(f_[1]&1048575)>>10):n<=1056964608?(r=1048576+(f_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(f_[1]&1048575)+512>>10),t|n|r&65535}const f2t=new TextDecoder("utf-8"),h2t=new TextEncoder;function Tte(e){return f2t.decode(e)}function uOe(e){return h2t.encode(e)}function ML(e){return`${typeof e!="object"||!e?e??null:$Tt(e)?+e:K3e(e)?`[${e.map(ML)}]`:p2t(e)}`}function p2t(e){let t="",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${ML(e[r])}`;return`{${t}}`}const z_=4,Jz=2;function cOe(e,t){return(e[t>>3]&1<<t%8)!==0}function Zz(e,t){return m2t(e,t)<<16>>16}function m2t(e,t){return e[t]|e[t+1]<<8}function yE(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function Hme(e,t){return yE(e,t)>>>0}function g2t(e,t){return wv(BigInt.asIntN(64,BigInt(Hme(e,t))+(BigInt(Hme(e,t+z_))<<32n)))}const eV=Symbol("rowIndex");function FG(e,t){class n{constructor(s){this[eV]=s}toJSON(){return fOe(e,t,this[eV])}}const r=n.prototype;for(let i=0;i<e.length;++i){if(Object.hasOwn(r,e[i]))continue;const s=t[i];Object.defineProperty(r,e[i],{get(){return s.at(this[eV])},enumerable:!0})}return i=>new n(i)}function dOe(e,t){return n=>fOe(e,t,n)}function fOe(e,t,n){const r={};for(let i=0;i<e.length;++i)r[e[i]]=t[i].at(n);return r}function y2t(e){return e instanceof J_}class $L{static ArrayType=null;constructor({length:t,nullCount:n,type:r,validity:i,values:s,offsets:o,sizes:a,children:l}){this.length=t,this.nullCount=n,this.type=r,this.validity=i,this.values=s,this.offsets=o,this.sizes=a,this.children=l,(!n||!this.validity)&&(this.at=u=>this.value(u))}get[Symbol.toStringTag](){return"Batch"}at(t){return this.isValid(t)?this.value(t):null}isValid(t){return cOe(this.validity,t)}value(t){return this.values[t]}slice(t,n){const r=n-t,i=Array(r);for(let s=0;s<r;++s)i[s]=this.at(t+s);return i}*[Symbol.iterator](){for(let t=0;t<this.length;++t)yield this.at(t)}}class J_ extends $L{constructor(t){super(t);const{length:n,values:r}=this;this.values=r.subarray(0,n)}slice(t,n){return this.nullCount?super.slice(t,n):this.values.subarray(t,n)}[Symbol.iterator](){return this.nullCount?super[Symbol.iterator]():this.values[Symbol.iterator]()}}class FL extends $L{static ArrayType=BR}class ho extends $L{static ArrayType=Array}class hOe extends ho{value(t){return null}}class rx extends FL{value(t){return wv(this.values[t])}}class v2t extends FL{value(t){const n=this.values[t],r=(n&31744)>>10,i=(n&1023)/1024,s=(-1)**((n&32768)>>15);switch(r){case 31:return s*(i?Number.NaN:1/0);case 0:return s*(i?6103515625e-14*i:0)}return s*2**(r-15)*(1+i)}}class b2t extends ho{value(t){return cOe(this.values,t)}}class w2t extends FL{constructor(t){super(t);const{scale:n}=this.type;this.scale=10**n}value(t){return this.values[t]/this.scale}}class pOe extends $L{constructor(t){super(t);const{bitWidth:n,scale:r}=this.type;this.decimal=n===64?l2t:n===128?u2t:c2t,this.scale=10n**BigInt(r)}}class x2t extends pOe{static ArrayType=BR;value(t){return Ste(this.decimal(this.values,t),this.scale)}}class _2t extends pOe{static ArrayType=Array;value(t){return this.decimal(this.values,t)}}class qme extends ho{constructor(t){super(t),this.source=t}value(t){return new Date(this.source.value(t))}}class E2t extends FL{value(t){return 864e5*this.values[t]}}const C2t=rx;class S2t extends rx{value(t){return super.value(t)*1e3}}const T2t=rx;class A2t extends rx{value(t){return Ste(this.values[t],1000n)}}class k2t extends rx{value(t){return Ste(this.values[t],1000000n)}}class I2t extends ho{value(t){return this.values.subarray(t<<1,t+1<<1)}}class R2t extends ho{value(t){const n=this.values,r=t<<4;return Float64Array.of(yE(n,r),yE(n,r+4),g2t(n,r+8))}}const mOe=({values:e,offsets:t},n)=>e.subarray(t[n],t[n+1]),gOe=({values:e,offsets:t},n)=>e.subarray(wv(t[n]),wv(t[n+1]));class D2t extends ho{value(t){return mOe(this,t)}}class P2t extends ho{value(t){return gOe(this,t)}}class O2t extends ho{value(t){return Tte(mOe(this,t))}}class N2t extends ho{value(t){return Tte(gOe(this,t))}}class M2t extends ho{value(t){const n=this.offsets;return this.children[0].slice(n[t],n[t+1])}}class $2t extends ho{value(t){const n=this.offsets;return this.children[0].slice(wv(n[t]),wv(n[t+1]))}}class F2t extends ho{value(t){const n=this.offsets[t],r=n+this.sizes[t];return this.children[0].slice(n,r)}}class L2t extends ho{value(t){const n=this.offsets[t],r=n+this.sizes[t];return this.children[0].slice(wv(n),wv(r))}}class yOe extends ho{constructor(t){super(t),this.stride=this.type.stride}}class j2t extends yOe{value(t){const{stride:n,values:r}=this;return r.subarray(t*n,(t+1)*n)}}class B2t extends yOe{value(t){const{children:n,stride:r}=this;return n[0].slice(t*r,(t+1)*r)}}function vOe({children:e,offsets:t},n){const[r,i]=e[0].children,s=t[n],o=t[n+1],a=[];for(let l=s;l<o;++l)a.push([r.at(l),i.at(l)]);return a}class z2t extends ho{value(t){return vOe(this,t)}}class V2t extends ho{value(t){return new Map(vOe(this,t))}}class bOe extends ho{constructor({typeIds:t,...n}){super(n),this.typeIds=t,this.typeMap=this.type.typeMap}value(t,n=t){const{typeIds:r,children:i,typeMap:s}=this;return i[s[r[t]]].at(n)}}class U2t extends bOe{value(t){return super.value(t,this.offsets[t])}}class wOe extends ho{constructor(t,n=dOe){super(t),this.names=this.type.children.map(r=>r.name),this.factory=n(this.names,this.children)}value(t){return this.factory(t)}}class H2t extends wOe{constructor(t){super(t,FG)}}class q2t extends ho{value(t){const[{values:n},r]=this.children;return r.at(_te(n,t))}}class W2t extends ho{setDictionary(t){return this.dictionary=t,this.cache=t.cache(),this}value(t){return this.cache[this.key(t)]}key(t){return this.values[t]}}class xOe extends ho{constructor({data:t,...n}){super(n),this.data=t}view(t){const{values:n,data:r}=this,i=t<<4;let s=i+4,o=n;const a=yE(o,i);return a>12&&(s=yE(o,i+12),o=r[yE(o,i+8)]),o.subarray(s,s+a)}}class G2t extends xOe{value(t){return this.view(t)}}class Y2t extends xOe{value(t){return Tte(this.view(t))}}let Ate=class{constructor(t,n=t[0]?.type){this.type=n,this.length=t.reduce((s,o)=>s+o.length,0),this.nullCount=t.reduce((s,o)=>s+o.nullCount,0),this.data=t;const r=t.length,i=new Int32Array(r+1);if(r===1){const[s]=t;i[1]=s.length,this.at=o=>s.at(o)}else for(let s=0,o=0;s<r;++s)i[s+1]=o+=t[s].length;this.offsets=i}get[Symbol.toStringTag](){return"Column"}[Symbol.iterator](){const t=this.data;return t.length===1?t[0][Symbol.iterator]():K2t(t)}at(t){const{data:n,offsets:r}=this,i=_te(r,t)-1;return n[i]?.at(t-r[i])}get(t){return this.at(t)}toArray(){const{length:t,nullCount:n,data:r}=this,i=!n&&y2t(r[0]),s=r.length;if(i&&s===1)return r[0].values;const o=!s||n>0?Array:r[0].constructor.ArrayType??r[0].values.constructor,a=new o(t);return i?X2t(a,r):Q2t(a,r)}cache(){return this._cache??(this._cache=this.toArray())}};function*K2t(e){for(let t=0;t<e.length;++t){const n=e[t][Symbol.iterator]();for(let r=n.next();!r.done;r=n.next())yield r.value}}function X2t(e,t){for(let n=0,r=0;n<t.length;++n){const{values:i}=t[n];e.set(i,r),r+=i.length}return e}function Q2t(e,t){let n=-1;for(let r=0;r<t.length;++r){const i=t[r];for(let s=0;s<i.length;++s)e[++n]=i.at(s)}return e}class kte{constructor(t,n,r=!1){const i=t.fields.map(o=>o.name);this.schema=t,this.names=i,this.children=n,this.factory=r?FG:dOe;const s=[];this.getFactory=o=>s[o]??(s[o]=this.factory(i,n.map(a=>a.data[o])))}get[Symbol.toStringTag](){return"Table"}get numCols(){return this.names.length}get numRows(){return this.children[0]?.length??0}getChildAt(t){return this.children[t]}getChild(t){const n=this.names.findIndex(r=>r===t);return n>-1?this.children[n]:void 0}selectAt(t,n=[]){const{children:r,factory:i,schema:s}=this,{fields:o}=s;return new kte({...s,fields:t.map((a,l)=>J2t(o[a],n[l]))},t.map(a=>r[a]),i===FG)}select(t,n){const r=this.names,i=t.map(s=>r.indexOf(s));return this.selectAt(i,n)}toColumns(){const{children:t,names:n}=this,r={};return n.forEach((i,s)=>r[i]=t[s]?.toArray()??[]),r}toArray(){const{children:t,getFactory:n,numRows:r}=this,i=t[0]?.data??[],s=Array(r);for(let o=0,a=-1;o<i.length;++o){const l=n(o);for(let u=0;u<i[o].length;++u)s[++a]=l(u)}return s}*[Symbol.iterator](){const{children:t,getFactory:n}=this,r=t[0]?.data??[];for(let i=0;i<r.length;++i){const s=n(i);for(let o=0;o<r[i].length;++o)yield s(o)}}at(t){const{children:n,getFactory:r,numRows:i}=this;if(t<0||t>=i)return null;const[{offsets:s}]=n,o=_te(s,t)-1;return r(o)(t-s[o])}get(t){return this.at(t)}}function J2t(e,t){return t!=null&&t!==e.name?{...e,name:t}:e}function _Oe(e,t={}){const{typeId:n,bitWidth:r,mode:i,precision:s,unit:o}=e,{useBigInt:a,useDate:l,useDecimalInt:u,useMap:c,useProxy:d}=t;switch(n){case pt.Null:return hOe;case pt.Bool:return b2t;case pt.Int:case pt.Time:case pt.Duration:return a||r<64?J_:rx;case pt.Float:return s?J_:v2t;case pt.Date:return Wme(o===Kk.DAY?E2t:C2t,l&&qme);case pt.Timestamp:return Wme(o===ih.SECOND?S2t:o===ih.MILLISECOND?T2t:o===ih.MICROSECOND?A2t:k2t,l&&qme);case pt.Decimal:return r===32?u?J_:w2t:u?_2t:x2t;case pt.Interval:return o===Xk.DAY_TIME?I2t:o===Xk.YEAR_MONTH?J_:R2t;case pt.FixedSizeBinary:return j2t;case pt.Utf8:return O2t;case pt.LargeUtf8:return N2t;case pt.Binary:return D2t;case pt.LargeBinary:return P2t;case pt.BinaryView:return G2t;case pt.Utf8View:return Y2t;case pt.List:return M2t;case pt.LargeList:return $2t;case pt.Map:return c?V2t:z2t;case pt.ListView:return F2t;case pt.LargeListView:return L2t;case pt.FixedSizeList:return B2t;case pt.Struct:return d?H2t:wOe;case pt.RunEndEncoded:return q2t;case pt.Dictionary:return W2t;case pt.Union:return i?U2t:bOe}throw new Error(PL(n))}function Wme(e,t){return t?class extends t{constructor(r){super(new e(r))}}:e}function LG(e,t,n){e[t]=n,e[t+1]=n>>8,e[t+2]=n>>16,e[t+3]=n>>24}const L3=1024;class Z2t{constructor(t){this.sink=t,this.minalign=1,this.buf=new Uint8Array(L3),this.space=L3,this.vtables=[],this.outputBytes=0}offset(){return this.buf.length-this.space}writeInt8(t){this.buf[this.space-=1]=t}writeInt16(t){this.buf[this.space-=2]=t,this.buf[this.space+1]=t>>8}writeInt32(t){LG(this.buf,this.space-=4,t)}writeInt64(t){const n=BigInt(t);this.writeInt32(Number(BigInt.asIntN(32,n>>BigInt(32)))),this.writeInt32(Number(BigInt.asIntN(32,n)))}addInt8(t){Ym(this,1,0),this.writeInt8(t)}addInt16(t){Ym(this,2,0),this.writeInt16(t)}addInt32(t){Ym(this,4,0),this.writeInt32(t)}addInt64(t){Ym(this,8,0),this.writeInt64(t)}addOffset(t){Ym(this,z_,0),this.writeInt32(this.offset()-t+z_)}addObject(t,n){const r=eAt(this,t);return n?.(r),r.finish()}addVector(t,n,r,i){const s=t?.length;if(!s)return 0;Ym(this,z_,n*s),Ym(this,r,n*s);for(let o=s;--o>=0;)i(this,t[o]);return this.writeInt32(s),this.offset()}addOffsetVector(t){return this.addVector(t,4,4,(n,r)=>n.addOffset(r))}addString(t){if(t==null)return 0;const n=uOe(t),r=n.length;return this.addInt8(0),Ym(this,z_,r),this.buf.set(n,this.space-=r),this.writeInt32(r),this.offset()}finish(t){Ym(this,this.minalign,z_),this.addOffset(t)}flush(){const{buf:t,sink:n}=this,r=t.subarray(this.space,t.length);n.write(r),this.outputBytes+=r.byteLength,this.minalign=1,this.vtables=[],this.buf=new Uint8Array(L3),this.space=L3}addBuffer(t){const n=t.byteLength;if(!n)return 0;this.sink.write(t),this.outputBytes+=n;const r=(n+7&-8)-n;return this.addPadding(r),n+r}addPadding(t){t>0&&(this.sink.write(new Uint8Array(t)),this.outputBytes+=t)}}function Ym(e,t,n){let{buf:r,space:i,minalign:s}=e;t>s&&(e.minalign=t);const o=r.length,a=o-i+n,l=~a+1&t-1;r=Q3e(r,a+l+t-1,!0),i+=r.length-o;for(let u=0;u<l;++u)r[--i]=0;e.buf=r,e.space=i}function eAt(e,t){const n=Array(t).fill(0),r=e.offset();function i(s){n[s]=e.offset()}return{addInt8(s,o,a){o!=a&&(e.addInt8(o),i(s))},addInt16(s,o,a){o!=a&&(e.addInt16(o),i(s))},addInt32(s,o,a){o!=a&&(e.addInt32(o),i(s))},addInt64(s,o,a){o!=a&&(e.addInt64(o),i(s))},addOffset(s,o,a){o!=a&&(e.addOffset(o),i(s))},finish(){e.addInt32(0);const s=e.offset();let o=t;for(;--o>=0&&n[o]===0;);const a=o+1;for(;o>=0;--o)e.addInt16(n[o]?s-n[o]:0);const l=2;e.addInt16(s-r);const u=(a+l)*Jz;e.addInt16(u);let c=0;const{buf:d,vtables:f,space:h}=e;e:for(o=0;o<f.length;++o){const p=d.length-f[o];if(u==Zz(d,p)){for(let m=Jz;m<u;m+=Jz)if(Zz(d,h+m)!=Zz(d,p+m))continue e;c=f[o];break}}if(c)e.space=d.length-s,LG(d,e.space,c-s);else{const p=e.offset();f.push(p),LG(d,d.length-s,p-s)}return s}}}function EOe(e,t){const{nodes:n,regions:r,variadic:i}=t,s=e.addVector(n,16,8,(l,u)=>(l.writeInt64(u.nullCount),l.writeInt64(u.length),l.offset())),o=e.addVector(r,16,8,(l,u)=>(l.writeInt64(u.length),l.writeInt64(u.offset),l.offset())),a=e.addVector(i,8,8,(l,u)=>l.addInt64(u));return e.addObject(5,l=>{l.addInt64(0,n[0].length,0),l.addOffset(1,s,0),l.addOffset(2,o,0),l.addOffset(4,a,0)})}function tAt(e,t){const n=EOe(e,t.data);return e.addObject(3,r=>{r.addInt64(0,t.id,0),r.addOffset(1,n,0),r.addInt8(2,+t.isDelta,0)})}function Ite(e,t){return t?.size>0?e.addOffsetVector(Array.from(t,([n,r])=>{const i=e.addString(`${n}`),s=e.addString(`${r}`);return e.addObject(2,o=>{o.addOffset(0,i,0),o.addOffset(1,s,0)})})):0}function d4(e,t){switch(zR(t.typeId,pt,PL)){case pt.Dictionary:return hAt(e,t);case pt.Int:return aAt(e,t);case pt.Float:return oAt(e,t);case pt.Decimal:return rAt(e,t);case pt.Date:return nAt(e,t);case pt.Time:return cAt(e,t);case pt.Timestamp:return dAt(e,t);case pt.Interval:return lAt(e,t);case pt.Duration:return iAt(e,t);case pt.FixedSizeBinary:case pt.FixedSizeList:return sAt(e,t);case pt.Map:return uAt(e,t);case pt.Union:return fAt(e,t)}return e.addObject(0)}function nAt(e,t){return e.addObject(1,n=>{n.addInt16(0,t.unit,Kk.MILLISECOND)})}function rAt(e,t){return e.addObject(3,n=>{n.addInt32(0,t.precision,0),n.addInt32(1,t.scale,0),n.addInt32(2,t.bitWidth,128)})}function iAt(e,t){return e.addObject(1,n=>{n.addInt16(0,t.unit,ih.MILLISECOND)})}function sAt(e,t){return e.addObject(1,n=>{n.addInt32(0,t.stride,0)})}function oAt(e,t){return e.addObject(1,n=>{n.addInt16(0,t.precision,DL.HALF)})}function aAt(e,t){return e.addObject(2,n=>{n.addInt32(0,t.bitWidth,0),n.addInt8(1,+t.signed,0)})}function lAt(e,t){return e.addObject(1,n=>{n.addInt16(0,t.unit,Xk.YEAR_MONTH)})}function uAt(e,t){return e.addObject(1,n=>{n.addInt8(0,+t.keysSorted,0)})}function cAt(e,t){return e.addObject(2,n=>{n.addInt16(0,t.unit,ih.MILLISECOND),n.addInt32(1,t.bitWidth,32)})}function dAt(e,t){const n=e.addString(t.timezone);return e.addObject(2,r=>{r.addInt16(0,t.unit,ih.SECOND),r.addOffset(1,n,0)})}function fAt(e,t){const n=e.addVector(t.typeIds,4,4,(r,i)=>r.addInt32(i));return e.addObject(2,r=>{r.addInt16(0,t.mode,q3e.Sparse),r.addOffset(1,n,0)})}function hAt(e,t){return e.addObject(4,n=>{n.addInt64(0,t.id,0),n.addOffset(1,d4(e,t.indices),0),n.addInt8(2,+t.ordered,0)})}const pAt=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;function COe(e,t){const{fields:n,metadata:r}=t,i=n.map(a=>SOe(e,a)),s=e.addOffsetVector(i),o=Ite(e,r);return e.addObject(4,a=>{a.addInt16(0,+!pAt,0),a.addOffset(1,s,0),a.addOffset(2,o,0)})}function SOe(e,t){const{name:n,nullable:r,type:i,metadata:s}=t;let{typeId:o}=i,a=0,l=0;if(o!==pt.Dictionary)a=d4(e,i);else{const h=i.dictionary;o=h.typeId,l=d4(e,i),a=d4(e,h)}const u=(i.children||[]).map(h=>SOe(e,h)),c=e.addOffsetVector(u),d=Ite(e,s),f=e.addString(n);return e.addObject(7,h=>{h.addOffset(0,f,0),h.addInt8(1,+r,0),h.addInt8(2,o,pt.NONE),h.addOffset(3,a,0),h.addOffset(4,l,0),h.addOffset(5,c,0),h.addOffset(6,d,0)})}function mAt(e,t,n,r,i){const s=Ite(e,i),o=e.addVector(r,24,8,Gme),a=e.addVector(n,24,8,Gme),l=COe(e,t);e.finish(e.addObject(5,c=>{c.addInt16(0,Yk.V5,Yk.V1),c.addOffset(1,l,0),c.addOffset(2,a,0),c.addOffset(3,o,0),c.addOffset(4,s,0)}));const u=e.offset();e.addInt32(0),e.addInt32(-1),e.flush(),e.sink.write(new Uint8Array(Int32Array.of(u).buffer)),e.sink.write(H3e)}function Gme(e,{offset:t,metadataLength:n,bodyLength:r}){return e.writeInt64(r),e.writeInt32(0),e.writeInt32(n),e.writeInt64(t),e.offset()}function tV(e,t,n,r,i){e.finish(e.addObject(5,l=>{l.addInt16(0,Yk.V5,Yk.V1),l.addInt8(1,t,c4.NONE),l.addOffset(2,n,0),l.addInt64(3,r,0)}));const s=8,o=e.offset(),a=o+s+7&-8;i?.push({offset:e.outputBytes,metadataLength:a,bodyLength:r}),e.addInt32(a-s),e.addInt32(-1),e.flush(),e.addPadding(a-o-s)}class gAt{write(t){}pad(t){this.write(new Uint8Array(t))}finish(){return null}}class yAt extends gAt{constructor(){super(),this.buffers=[]}write(t){this.buffers.push(t)}finish(){const t=this.buffers,n=t.reduce((i,s)=>i+s.byteLength,0),r=new Uint8Array(n);for(let i=0,s=0;i<t.length;++i)r.set(t[i],s),s+=t[i].byteLength;return r}}const Yme="stream",Kme="file";function vAt(e,{sink:t,format:n=Yme}={}){if(n!==Yme&&n!==Kme)throw new Error(`Unrecognized Arrow IPC format: ${n}`);const{schema:r,dictionaries:i=[],records:s=[],metadata:o}=e,a=new Z2t(t||new yAt),l=n===Kme,u=[],c=[];l&&a.addBuffer(H3e),r&&tV(a,c4.Schema,COe(a,r),0);for(const d of i){const{data:f}=d;tV(a,c4.DictionaryBatch,tAt(a,d),f.byteLength,u),Xme(a,f.buffers)}for(const d of s)tV(a,c4.RecordBatch,EOe(a,d),d.byteLength,c),Xme(a,d.buffers);return a.addBuffer(RTt),l&&mAt(a,r,u,c,o),a.sink}function Xme(e,t){for(let n=0;n<t.length;++n)e.addBuffer(t[n])}function bAt(e,t){typeof t=="string"&&(t={format:t});const n=e.children;wAt(n);const{dictionaries:r,idMap:i}=_At(n),s=CAt(n),a={schema:EAt(e.schema,i),dictionaries:r,records:s};return vAt(a,t).finish()}function wAt(e){const t=e[0]?.data.map(n=>n.length);e.forEach(({data:n})=>{if(n.length!==t.length||n.some((r,i)=>r.length!==t[i]))throw new Error("Columns have inconsistent batch sizes.")})}function xAt(){let e=0;const t=[],n=[],r=[],i=[];return{node(s,o){t.push({length:s,nullCount:o})},buffer(s){const o=s.byteLength,a=o+7&-8;n.push({offset:e,length:a}),e+=a,r.push(new Uint8Array(s.buffer,s.byteOffset,o))},variadic(s){i.push(s)},children(s,o){s.children.forEach((a,l)=>{AOe(a.type,o.children[l],this)})},done(){return{byteLength:e,nodes:t,regions:n,variadic:i,buffers:r}}}}function _At(e){const t=[],n=new Map,r=new Map;let i=-1;const s=o=>{if(n.has(o))r.set(o.type,n.get(o));else{n.set(o,++i);for(let a=0;a<o.data.length;++a)t.push({id:i,isDelta:a>0,data:TOe([o],a)});r.set(o.type,i)}};return e.forEach(o=>jG(o.data[0],s)),{dictionaries:t,idMap:r}}function jG(e,t){if(e?.type.typeId===pt.Dictionary){const n=e.dictionary;t(n),jG(n.data[0],t)}e?.children?.forEach(n=>jG(n,t))}function EAt(e,t){if(!t.size)return e;const n=s=>{s.typeId===pt.Dictionary&&(s.id=t.get(s.dictionary),i(s)),s.children&&(s.children=s.children.slice()).forEach(r)},r=(s,o,a)=>{const l={...s.type};a[o]={...s,type:l},n(l)},i=s=>{const o={...s.dictionary};s.dictionary=o,n(o)};return e={...e,fields:e.fields.slice()},e.fields.forEach(r),e}function CAt(e){return(e[0]?.data||[]).map((t,n)=>TOe(e,n))}function TOe(e,t=0){const n=xAt();return e.forEach(r=>{AOe(r.type,r.data[t],n)}),n.done()}function AOe(e,t,n){const{typeId:r}=e;if(n.node(t.length,t.nullCount),r!==pt.Null)switch(r){case pt.Bool:case pt.Int:case pt.Time:case pt.Duration:case pt.Float:case pt.Date:case pt.Timestamp:case pt.Decimal:case pt.Interval:case pt.FixedSizeBinary:case pt.Dictionary:n.buffer(t.validity),n.buffer(t.values);return;case pt.Utf8:case pt.LargeUtf8:case pt.Binary:case pt.LargeBinary:n.buffer(t.validity),n.buffer(t.offsets),n.buffer(t.values);return;case pt.BinaryView:case pt.Utf8View:n.buffer(t.validity),n.buffer(t.values),n.variadic(t.data.length),t.data.forEach(i=>n.buffer(i));return;case pt.List:case pt.LargeList:case pt.Map:n.buffer(t.validity),n.buffer(t.offsets),n.children(e,t);return;case pt.ListView:case pt.LargeListView:n.buffer(t.validity),n.buffer(t.offsets),n.buffer(t.sizes),n.children(e,t);return;case pt.FixedSizeList:case pt.Struct:n.buffer(t.validity),n.children(e,t);return;case pt.RunEndEncoded:n.children(e,t);return;case pt.Union:{n.buffer(t.typeIds),e.mode===q3e.Dense&&n.buffer(t.offsets),n.children(e,t);return}default:throw new Error(PL(r))}}function Xd(e){return new kOe(e)}let kOe=class{constructor(t=wS){this.buf=new t(512)}array(t){return MTt(this.buf,t)}prep(t){t>=this.buf.length&&(this.buf=Q3e(this.buf,t))}get(t){return this.buf[t]}set(t,n){this.prep(n),this.buf[n]=t}write(t,n){this.prep(n+t.length),this.buf.set(t,n)}};function IOe(){return new SAt}let SAt=class extends kOe{set(t){const n=t>>3;this.prep(n),this.buf[n]|=1<<t%8}};class Rte{constructor(t,n){this.type=t,this.ctx=n,this.batchClass=n.batchType(t)}init(){return this.index=-1,this}set(t,n){return this.index=n,!1}done(){return null}batch(){const t=new this.batchClass(this.done());return this.init(),t}}class Dh extends Rte{constructor(t,n){super(t,n)}init(){return this.nullCount=0,this.validity=IOe(),super.init()}set(t,n){this.index=n;const r=t!=null;return r?this.validity.set(n):this.nullCount++,r}done(){const{index:t,nullCount:n,type:r,validity:i}=this;return{length:t+1,nullCount:n,type:r,validity:n?i.array((t>>3)+1):new wS(0)}}}function TAt(){const e=new Map,t=new Set;return{get(n,r){const i=n.id;if(i>=0&&e.has(i))return e.get(i);{const s=AAt(n,r);return i>=0&&e.set(i,s),t.add(s),s}},finish(n){t.forEach(r=>r.finish(n))}}}function AAt(e,t){const n=Object.create(null),r=t.builder(e.dictionary),i=[];r.init();let s=-1;return{type:e,values:r,add(o){return i.push(o),o},key(o){const a=ML(o);let l=n[a];return l===void 0&&(n[a]=l=++s,r.set(o,l)),l},finish(o){const a=e.dictionary,l=new(_Oe(a,o))(r.done()),u=new Ate([l]);i.forEach(c=>c.setDictionary(u))}}}class kAt extends Dh{constructor(t,n){super(t,n),this.dict=n.dictionary(t)}init(){return this.values=Xd(this.type.indices.values),super.init()}set(t,n){super.set(t,n)&&this.values.set(this.dict.key(t),n)}done(){return{...super.done(),values:this.values.array(this.index+1)}}batch(){return this.dict.add(super.batch())}}function IAt(e){const t=BG();return e(n=>t.add(n)),t.type()}function BG(){let e=0,t=0,n=0,r=0,i=0,s=0,o=0,a=0,l=0,u=0,c=0,d=1/0,f=-1/0,h=1/0,p=-1/0,m,g,y,v={};return{add(b){if(e++,b==null){t++;return}switch(typeof b){case"string":l++;break;case"number":r++,b<d&&(d=b),b>f&&(f=b),Number.isInteger(b)&&i++;break;case"bigint":s++,m===void 0?m=g=b:(b<m&&(m=b),b>g&&(g=b));break;case"boolean":n++;break;case"object":if(b instanceof Date)o++,+b%864e5===0&&a++;else if(K3e(b)){u++;const _=b.length;_<h&&(h=_),_>p&&(p=_),y??=BG(),b.forEach(y.add)}else{c++;for(const _ in b)(v[_]??(v[_]=BG())).add(b[_])}}},type(){const b=e-t;return b===0?BTt():i===b?DAt(d,f):r===b?Cte():s===b?PAt(m,g):n===b?GTt():a===b?KTt():o===b?XTt():l===b?jTt(WTt()):u===b?RAt(y.type(),h,p):c===b?JTt(Object.entries(v).map(_=>OL(_[0],_[1].type()))):OAt()}}}function RAt(e,t,n){return n===t?ZTt(e,t):QTt(e)}function DAt(e,t){const n=Math.max(Math.abs(e)-1,t);return n<128?rOe():n<32768?iOe():n<2**31?Ete():Cte()}function PAt(e,t){const n=-e>t?-e-1n:t;if(n>=2**63)throw new Error(`BigInt exceeds 64 bits: ${n}`);return sOe()}function OAt(){throw new Error("Mixed types detected, please define a union type.")}class ROe extends Dh{constructor(t,n){super(t,n),this.toOffset=lOe(t.offsets)}init(){return this.offsets=Xd(this.type.offsets),this.values=Xd(),this.pos=0,super.init()}set(t,n){const{offsets:r,values:i,toOffset:s}=this;super.set(t,n)&&(i.write(t,this.pos),this.pos+=t.length),r.set(s(this.pos),n+1)}done(){return{...super.done(),offsets:this.offsets.array(this.index+2),values:this.values.array(this.pos+1)}}}class NAt extends Dh{constructor(t,n){super(t,n)}init(){return this.values=IOe(),super.init()}set(t,n){super.set(t,n),t&&this.values.set(n)}done(){return{...super.done(),values:this.values.array((this.index>>3)+1)}}}class MAt extends Dh{constructor(t,n){super(t,n),this.scale=10**t.scale,this.stride=t.bitWidth>>6}init(){return this.values=Xd(this.type.values),super.init()}set(t,n){const{scale:r,stride:i,values:s}=this;super.set(t,n)&&(s.prep((n+1)*i),a2t(t,s.buf,n*i,i,r))}done(){const{index:t,stride:n,values:r}=this;return{...super.done(),values:r.array((t+1)*n)}}}class $At extends Dh{constructor(t,n){super(t,n),this.stride=t.stride}init(){return this.values=Xd(),super.init()}set(t,n){super.set(t,n)&&this.values.write(t,n*this.stride)}done(){const{stride:t,values:n}=this;return{...super.done(),values:n.array(t*(this.index+1))}}}class FAt extends Dh{constructor(t,n){super(t,n),this.child=n.builder(this.type.children[0].type),this.stride=t.stride}init(){return this.child.init(),super.init()}set(t,n){const{child:r,stride:i}=this,s=n*i;if(super.set(t,n))for(let o=0;o<i;++o)r.set(t[o],s+o);else r.index=s+i}done(){const{child:t}=this;return{...super.done(),children:[t.batch()]}}}class LAt extends Dh{init(){return this.values=Xd(this.type.values),super.init()}set(t,n){if(super.set(t,n)){const r=n<<1;this.values.set(t[0],r),this.values.set(t[1],r+1)}}done(){return{...super.done(),values:this.values.array(this.index+1<<1)}}}class jAt extends Dh{init(){return this.values=Xd(),super.init()}set(t,n){super.set(t,n)&&this.values.write(s2t(t),n<<4)}done(){return{...super.done(),values:this.values.array(this.index+1<<4)}}}class DOe extends Dh{constructor(t,n,r){super(t,n),this.child=r}init(){this.child.init();const t=this.type.offsets;return this.offsets=Xd(t),this.toOffset=lOe(t),this.pos=0,super.init()}done(){return{...super.done(),offsets:this.offsets.array(this.index+2),children:[this.child.batch()]}}}class BAt extends DOe{constructor(t,n){super(t,n,n.builder(t.children[0].type))}set(t,n){const{child:r,offsets:i,toOffset:s}=this;super.set(t,n)&&t.forEach(o=>r.set(o,this.pos++)),i.set(s(this.pos),n+1)}}class POe extends Dh{constructor(t,n){super(t,n),this.children=t.children.map(r=>n.builder(r.type))}init(){return this.children.forEach(t=>t.init()),super.init()}done(){const{children:t}=this;return t.forEach(n=>n.index=this.index),{...super.done(),children:t.map(n=>n.batch())}}}class zAt extends POe{constructor(t,n){super(t,n),this.setters=this.children.map((r,i)=>{const s=t.children[i].name;return(o,a)=>r.set(o?.[s],a)})}set(t,n){super.set(t,n);const r=this.setters;for(let i=0;i<r.length;++i)r[i](t,n)}}class VAt extends DOe{constructor(t,n){super(t,n,new UAt(t.children[0].type,n))}set(t,n){const{child:r,offsets:i,toOffset:s}=this;if(super.set(t,n))for(const o of t)r.set(o,this.pos++);i.set(s(this.pos),n+1)}}class UAt extends POe{set(t,n){super.set(t,n);const[r,i]=this.children;r.set(t[0],n),i.set(t[1],n)}}const HAt={};class qAt extends Rte{constructor(t,n){super(t,n),this.children=t.children.map(r=>n.builder(r.type))}init(){return this.pos=0,this.key=null,this.value=HAt,this.children.forEach(t=>t.init()),super.init()}next(){const[t,n]=this.children;t.set(this.index+1,this.pos),n.set(this.value,this.pos++)}set(t,n){if(t!==this.value){const r=ML(t);r!==this.key&&(this.key&&this.next(),this.key=r,this.value=t)}this.index=n}done(){this.next();const{children:t,index:n,type:r}=this;return{length:n+1,nullCount:0,type:r,children:t.map(i=>i.batch())}}}class OOe extends Rte{constructor(t,n){super(t,n),this.children=t.children.map(r=>n.builder(r.type)),this.typeMap=t.typeMap,this.lookup=t.typeIdForValue}init(){return this.nullCount=0,this.typeIds=Xd(wte),this.children.forEach(t=>t.init()),super.init()}set(t,n){const{children:r,lookup:i,typeMap:s,typeIds:o}=this;this.index=n;const a=i(t,n),l=r[s[a]];o.set(a,n),t==null&&++this.nullCount,this.update(t,n,l)}done(){const{children:t,nullCount:n,type:r,typeIds:i}=this,s=this.index+1;return{length:s,nullCount:n,type:r,typeIds:i.array(s),children:t.map(o=>o.batch())}}}class WAt extends OOe{update(t,n,r){r.set(t,n),this.children.forEach(i=>{i!==r&&i.set(null,n)})}}class GAt extends OOe{init(){return this.offsets=Xd(this.type.offsets),super.init()}update(t,n,r){const i=r.index+1;r.set(t,i),this.offsets.set(i,n)}done(){return{...super.done(),offsets:this.offsets.array(this.index+1)}}}class YAt extends ROe{set(t,n){super.set(t&&uOe(t),n)}}class GA extends Dh{constructor(t,n){super(t,n),this.values=Xd(t.values)}init(){return this.values=Xd(this.type.values),super.init()}set(t,n){super.set(t,n)&&this.values.set(t,n)}done(){return{...super.done(),values:this.values.array(this.index+1)}}}class KAt extends GA{set(t,n){super.set(t==null?t:pg(t),n)}}class j3 extends GA{constructor(t,n,r){super(t,n),this.transform=r}set(t,n){super.set(t==null?t:this.transform(t),n)}}function NOe(e={},t=TAt()){return{batchType:n=>_Oe(n,e),builder(n){return MOe(n,this)},dictionary(n){return t.get(n,this)},finish:()=>t.finish(e)}}function MOe(e,t=NOe()){const{typeId:n}=e;switch(n){case pt.Int:case pt.Time:case pt.Duration:return xte(e.values)?new KAt(e,t):new GA(e,t);case pt.Float:return e.precision?new GA(e,t):new j3(e,t,d2t);case pt.Binary:case pt.LargeBinary:return new ROe(e,t);case pt.Utf8:case pt.LargeUtf8:return new YAt(e,t);case pt.Bool:return new NAt(e,t);case pt.Decimal:return e.bitWidth===32?new j3(e,t,o2t(e.scale)):new MAt(e,t);case pt.Date:return new j3(e,t,e.unit?pg:r2t);case pt.Timestamp:return new j3(e,t,i2t(e.unit));case pt.Interval:switch(e.unit){case Xk.DAY_TIME:return new LAt(e,t);case Xk.MONTH_DAY_NANO:return new jAt(e,t)}return new GA(e,t);case pt.List:case pt.LargeList:return new BAt(e,t);case pt.Struct:return new zAt(e,t);case pt.Union:return e.mode?new GAt(e,t):new WAt(e,t);case pt.FixedSizeBinary:return new $At(e,t);case pt.FixedSizeList:return new FAt(e,t);case pt.Map:return new VAt(e,t);case pt.RunEndEncoded:return new qAt(e,t);case pt.Dictionary:return new kAt(e,t)}throw new Error(PL(n))}function $Oe(e,t,n={},r){const i=FTt(e)?l=>{for(const u of e)l(u)}:e;t??=IAt(i);const{maxBatchRows:s=1/0,...o}=n;let a;if(t.typeId===pt.Null){let l=0;i(()=>++l),a=XAt(t,l,s)}else{const l=NOe(o,r),u=MOe(t,l).init(),c=f=>a.push(f.batch());a=[];let d=0;i(f=>{u.set(f,d++),d>=s&&(c(u),d=0)}),d&&c(u),l.finish()}return new Ate(a,t)}function XAt(e,t,n){const r=[],i=a=>new hOe({length:a,nullCount:a,type:e}),s=Math.floor(t/n);for(let a=0;a<s;++a)r.push(i(n));const o=t%n;return o&&r.push(i(o)),r}function QAt(e,t,n={},r){return!t&&Y3e(e)?JAt(e,n):$Oe(i=>e.forEach(i),t,n,r)}function JAt(e,{maxBatchRows:t,useBigInt:n}){const r=e.constructor,i=ZAt(r),s=e.length,o=Math.min(t||1/0,s),a=Math.floor(s/o),l=[],u=xte(r)&&!n?rx:J_,c=(f,h)=>l.push(new u({length:h-f,nullCount:0,type:i,validity:new wS(0),values:e.subarray(f,h)}));let d=0;for(let f=0;f<a;++f)c(d,d+=o);return d<s&&c(d,s),new Ate(l)}function ZAt(e){switch(e){case G3e:return qTt();case BR:return Cte();case wte:return rOe();case W3e:return iOe();case xS:return Ete();case _S:return sOe();case wS:return zTt();case yte:return VTt();case vte:return UTt();case bte:return HTt()}}function ekt(e,t){const n=[],r=Array.isArray(e)?e:Object.entries(e),i=r[0]?.[1].length,s=r.map(([a,l])=>{if(l.length!==i)throw new Error("All columns must have the same length.");return n.push(OL(a,l.type)),l}),o={version:Yk.V5,endianness:DTt.Little,fields:n,metadata:null};return new kte(o,s,t)}function VR(e,t){return pu(t)?t(e):t||e.columnNames()}function FOe(e,t={}){const{columns:n,limit:r=1/0,offset:i=0,types:s={},...o}=t,a=VR(e,n),l=e.data(),u=i===0&&e.numRows()<=r&&!e.isFiltered()&&!e.isOrdered();return ekt(a.map(c=>{const d=l[c],f=s[c],h=r1(d);let p;if(u&&(h||pu(d.toArray)))p=QAt(h?d:d.toArray(),f,o);else{const m=h?g=>d[g]:g=>d.at(g);p=$Oe(g=>e.scan(y=>g(m(y)),!0,r,i),f,o)}return[c,p]}))}function tkt(e,t={}){const{format:n="stream",...r}=t;return bAt(FOe(e,r),{format:n})}function zG(e){return e}function Dte(e,t,n=100,r,i){const{start:s=zG,cell:o,end:a=zG}=i,l=e.data(),u=t.length;e.scan(c=>{s(c);for(let d=0;d<u;++d){const f=t[d];o(l[f].at(c),f,d)}a(c)},!0,n,r)}function nkt(e,t={}){const n=VR(e,t.columns),r=t.format||{},i=t.delimiter||",",s=t.header??!0,o=new RegExp(`["${i}
\r]`),a=c=>c==null?"":yv(c)?xL(c,!0):o.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c,l=n.map(a);let u=s?l.join(i)+`
`:"";return Dte(e,n,t.limit||1/0,t.offset,{cell(c,d,f){l[f]=a(r[d]?r[d](c):c)},end(){u+=l.join(i)+`
`}}),u}function rkt(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function ikt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function skt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(l=>{if(++n,l==null){++r;return}const u=typeof l;if(u==="object"&&yv(l))++i,ikt(l)&&++s;else if(u==="number"&&(++o,l===l&&(l|0)!==l)){const c=l+"",d=c.indexOf(".");if(d>=0){const f=c.indexOf("e"),h=f>0?f:c.length;a=Math.max(a,h-d-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function LOe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const l=skt(okt(e,a),n);o[a]=i[a]||l.align,s[a]=r[a]||l.format}),{align:o,format:s}}function okt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.at(i)))}function jOe(e,t={}){if(pu(t))return t(e)+"";const n=typeof e;if(n==="object"){if(yv(e))return t.utc?xL(e):hPe(e);{const r=JSON.stringify(e,(s,o)=>wL(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function akt(e,t={}){const n=VR(e,t.columns),{align:r,format:i}=LOe(e,n,t),s=lkt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",l=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(m,g)=>l(jOe(m,g)),c=o?(m,g)=>m==null?o(m):u(m,g):u;let d=-1,f=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,f,d)||"",_=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${_?` style="${_}"`:""}>`};let p=h("table")+h("thead")+h("tr",d)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Dte(e,n,t.limit,t.offset,{start(m){d=m,++f,p+=h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"},end(){p+="</tr>"}}),p+"</tbody></table>"}function lkt(e){return rkt(e.style,t=>pu(t)?t:()=>t)}const ukt="columns",ckt="ndjson",dkt=e=>yv(e)?xL(e,!0):e;function fkt(e,{type:t,columns:n,format:r={},limit:i,offset:s}={}){const o=VR(e,n),a=o.map(u=>r[u]||dkt),l=u=>e.scan(u,!0,i,s);return t===ukt?hkt(e,o,a,l):pkt(e,o,a,l,t===ckt)}function hkt(e,t,n,r){let i="{";return t.forEach((s,o)=>{i+=(o?",":"")+JSON.stringify(s)+":[";const a=e.column(s),l=n[o];let u=-1;r(c=>{const d=a.at(c);i+=(++u?",":"")+JSON.stringify(l(d))}),i+="]"}),i+"}"}function pkt(e,t,n,r,i=!1){const s=t.length,o=t.map(f=>`"${f}":`),a=t.map(f=>e.column(f)),l=i?f=>f.replaceAll(`
`,""):zG,u=i?`
`:",";let c=i?"":"[",d=-1;return r(f=>{const h=[];for(let p=0;p<s;++p)h.push(o[p]+JSON.stringify(n[p](a[p].at(f))));c+=(++d?u:"")+l(`{${h.join(",")}}`)}),c+(i?"":"]")}function mkt(e,t={}){const n=VR(e,t.columns),{align:r,format:i}=LOe(e,n,t),s=l=>l==="c"?":-:":l==="r"?"-:":":-",o=l=>l.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(l=>s(r[l])).join("|")+`|
`;return Dte(e,n,t.limit,t.offset,{start(){a+="|"},cell(l,u){a+=o(jOe(l,i[u]))+"|"},end(){a+=`
`}}),a}class gkt extends MG{assign(...t){return ySt(this,...t)}count(t={}){const{as:n="count"}=t;return $6(this,{[n]:cEt()})}derive(t,n){return TSt(this,t,n)}filter(t){return pte(this,t)}slice(t,n){return CTt(this,t,n)}groupby(...t){return cte(this,...t)}orderby(...t){return rTt(this,...t)}relocate(t,n){return M3e(this,em(t),n)}rename(...t){return fTt(this,...t)}reduce(t){return dTt(this,t)}rollup(t){return $6(this,t)}sample(t,n){return bTt(this,t,n)}select(...t){return O3e(this,...t)}ungroup(){return gte(this)}unorder(){return ITt(this)}dedupe(...t){return RL(this,...t)}impute(t,n){return jSt(this,t,n)}fold(t,n){return FSt(this,t,n)}pivot(t,n,r){return oTt(this,t,n,r)}spread(t,n){return STt(this,t,n)}unroll(t,n){return $St(this,t,n)}lookup(t,n,...r){return JSt(this,t,n,...r)}join(t,n,r,i){return K2(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return K2(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return K2(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return K2(this,t,n,r,s)}cross(t,n,r){return qSt(this,t,n,r)}semijoin(t,n){return j3e(this,t,n)}antijoin(t,n){return B3e(this,t,n)}concat(...t){return N3e(this,...t)}union(...t){return kTt(this,...t)}intersect(...t){return VSt(this,...t)}except(...t){return MSt(this,...t)}toArrow(t){return FOe(this,t)}toArrowIPC(t){return tkt(this,t)}toCSV(t){return nkt(this,t)}toHTML(t){return akt(this,t)}toJSON(t){return fkt(this,t)}toMarkdown(t){return mkt(this,t)}}function nV(e){return k3e(e,{escape:!0,toString(){zs("Escaped values can not be serialized.")}})}function ykt(e,t){const n=r=>(zs(`Illegal argument type: ${r||typeof e}`),{});return e instanceof Map?Qme(e.entries(),t):yv(e)?n("Date"):A6(e)?n("RegExp"):Rh(e)?n():wu(e)?vkt(e,t):pu(e[Symbol.iterator])?bkt(e,t):vv(e)?Qme(Object.entries(e),t):n()}function Qme(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function vkt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const l=e[a];for(let u=0;u<o;++u)s[u][a]=l[t[u]]}}else t&&t.forEach(i);return r}function bkt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}function wkt(e,t){return new gkt(ykt(e,t),t)}function Uf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(i){return"'"+i+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xv(e){return!!e&&!!e[hs]}function Jg(e){var t;return!!e&&((function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Ikt})(e)||Array.isArray(e)||!!e[ige]||!!(!((t=e.constructor)===null||t===void 0)&&t[ige])||Pte(e)||Ote(e))}function uw(e,t,n){n===void 0&&(n=!1),ES(e)===0?(n?Object.keys:bE)(e).forEach((function(r){n&&typeof r=="symbol"||t(r,e[r],e)})):e.forEach((function(r,i){return t(i,r,e)}))}function ES(e){var t=e[hs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Pte(e)?2:Ote(e)?3:0}function vE(e,t){return ES(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xkt(e,t){return ES(e)===2?e.get(t):e[t]}function BOe(e,t,n){var r=ES(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function zOe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Pte(e){return Akt&&e instanceof Map}function Ote(e){return kkt&&e instanceof Set}function db(e){return e.o||e.t}function Nte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=UOe(e);delete t[hs];for(var n=bE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Mte(e,t){return t===void 0&&(t=!1),$te(e)||xv(e)||!Jg(e)||(ES(e)>1&&(e.set=e.add=e.clear=e.delete=_kt),Object.freeze(e),t&&uw(e,(function(n,r){return Mte(r,!0)}),!0)),e}function _kt(){Uf(2)}function $te(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function $p(e){var t=qG[e];return t||Uf(18,e),t}function Ekt(e,t){qG[e]||(qG[e]=t)}function VG(){return Qk}function rV(e,t){t&&($p("Patches"),e.u=[],e.s=[],e.v=t)}function L6(e){UG(e),e.p.forEach(Ckt),e.p=null}function UG(e){e===Qk&&(Qk=e.l)}function Jme(e){return Qk={p:[],l:Qk,h:e,m:!0,_:0}}function Ckt(e){var t=e[hs];t.i===0||t.i===1?t.j():t.g=!0}function iV(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||$p("ES5").S(t,e,r),r?(n[hs].P&&(L6(t),Uf(4)),Jg(e)&&(e=j6(t,e),t.l||B6(t,e)),t.u&&$p("Patches").M(n[hs].t,e,t.u,t.s)):e=j6(t,n,[]),L6(t),t.u&&t.v(t.u,t.s),e!==VOe?e:void 0}function j6(e,t,n){if($te(t))return t;var r=t[hs];if(!r)return uw(t,(function(a,l){return Zme(e,r,t,a,l,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return B6(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Nte(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),uw(s,(function(a,l){return Zme(e,r,i,a,l,n,o)})),B6(e,i,!1),n&&e.u&&$p("Patches").N(r,n,e.u,e.s)}return r.o}function Zme(e,t,n,r,i,s,o){if(xv(i)){var a=j6(e,i,s&&t&&t.i!==3&&!vE(t.R,r)?s.concat(r):void 0);if(BOe(n,r,a),!xv(a))return;e.m=!1}else o&&n.add(i);if(Jg(i)&&!$te(i)){if(!e.h.D&&e._<1)return;j6(e,i),t&&t.A.l||B6(e,i)}}function B6(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&Mte(t,n)}function sV(e,t){var n=e[hs];return(n?db(n):e)[t]}function ege(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Ty(e){e.P||(e.P=!0,e.l&&Ty(e.l))}function oV(e){e.o||(e.o=Nte(e.t))}function HG(e,t,n){var r=Pte(t)?$p("MapSet").F(t,n):Ote(t)?$p("MapSet").T(t,n):e.O?(function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:VG(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=Jk;o&&(l=[a],u=X2);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f})(t,n):$p("ES5").J(t,n);return(n?n.A:VG()).p.push(r),r}function Skt(e){return xv(e)||Uf(22,e),(function t(n){if(!Jg(n))return n;var r,i=n[hs],s=ES(n);if(i){if(!i.P&&(i.i<4||!$p("ES5").K(i)))return i.t;i.I=!0,r=tge(n,s),i.I=!1}else r=tge(n,s);return uw(r,(function(o,a){i&&xkt(i.t,o)===a||BOe(r,o,t(a))})),s===3?new Set(r):r})(e)}function tge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Nte(e)}function Tkt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[hs];return Jk.get(l,s)},set:function(l){var u=this[hs];Jk.set(u,s,l)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][hs];if(!a.P)switch(a.i){case 5:r(a)&&Ty(a);break;case 4:n(a)&&Ty(a)}}}function n(s){for(var o=s.t,a=s.k,l=bE(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==hs){var d=o[c];if(d===void 0&&!vE(o,c))return!0;var f=a[c],h=f&&f[hs];if(h?h.t!==d:!zOe(f,d))return!0}}var p=!!o[hs];return l.length!==bE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};Ekt("ES5",{J:function(s,o){var a=Array.isArray(s),l=(function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,e(h,!0));return f}var p=UOe(d);delete p[hs];for(var m=bE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(d),p)})(a,s),u={i:a?5:4,A:o?o.A:VG(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,hs,{value:u,writable:!0}),l},S:function(s,o,a){a?xv(o)&&o[hs].A===s&&t(s.p):(s.u&&(function l(u){if(u&&typeof u=="object"){var c=u[hs];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)uw(f,(function(b){b!==hs&&(d[b]!==void 0||vE(d,b)?h[b]||l(f[b]):(h[b]=!0,Ty(c)))})),uw(d,(function(b){f[b]!==void 0||vE(f,b)||(h[b]=!1,Ty(c))}));else if(p===5){if(r(c)&&(Ty(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var g=d.length;g<f.length;g++)h[g]=!0;for(var y=Math.min(f.length,d.length),v=0;v<y;v++)f.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&l(f[v])}}}})(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var nge,Qk,Fte=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Akt=typeof Map<"u",kkt=typeof Set<"u",rge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",VOe=Fte?Symbol.for("immer-nothing"):((nge={})["immer-nothing"]=!0,nge),ige=Fte?Symbol.for("immer-draftable"):"__$immer_draftable",hs=Fte?Symbol.for("immer-state"):"__$immer_state",Ikt=""+Object.prototype.constructor,bE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,UOe=Object.getOwnPropertyDescriptors||function(e){var t={};return bE(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},qG={},Jk={get:function(e,t){if(t===hs)return e;var n=db(e);if(!vE(n,t))return(function(i,s,o){var a,l=ege(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0})(e,n,t);var r=n[t];return e.I||!Jg(r)?r:r===sV(e.t,t)?(oV(e),e.o[t]=HG(e.A.h,r,e)):r},has:function(e,t){return t in db(e)},ownKeys:function(e){return Reflect.ownKeys(db(e))},set:function(e,t,n){var r=ege(db(e),t);if(r?.set)return r.set.call(e.k,n),!0;if(!e.P){var i=sV(db(e),t),s=i?.[hs];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(zOe(n,i)&&(n!==void 0||vE(e.t,t)))return!0;oV(e),Ty(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return sV(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,oV(e),Ty(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=db(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Uf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Uf(12)}},X2={};uw(Jk,(function(e,t){X2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),X2.deleteProperty=function(e,t){return X2.set.call(this,e,t,void 0)},X2.set=function(e,t,n){return Jk.set.call(this,e[0],t,n,e[0])};var Rkt=(function(){function e(n){var r=this;this.O=rge,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return l.produce(m,(function(_){var E;return(E=s).call.apply(E,[g,_].concat(v))}))}}var u;if(typeof s!="function"&&Uf(6),o!==void 0&&typeof o!="function"&&Uf(7),Jg(i)){var c=Jme(r),d=HG(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?L6(c):UG(c)}return typeof Promise<"u"&&u instanceof Promise?u.then((function(m){return rV(c,o),iV(m,c)}),(function(m){throw L6(c),m})):(rV(c,o),iV(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===VOe&&(u=void 0),r.D&&Mte(u,!0),o){var h=[],p=[];$p("Patches").M(i,u,h,p),o(h,p)}return u}Uf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,(function(h){return i.apply(void 0,[h].concat(d))}))};var o,a,l=r.produce(i,s,(function(u,c){o=u,a=c}));return typeof Promise<"u"&&l instanceof Promise?l.then((function(u){return[u,o,a]})):[l,o,a]},typeof n?.useProxies=="boolean"&&this.setUseProxies(n.useProxies),typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Jg(n)||Uf(8),xv(n)&&(n=Skt(n));var r=Jme(this),i=HG(this,n,void 0);return i[hs].C=!0,UG(r),i},t.finishDraft=function(n,r){var i=n&&n[hs],s=i.A;return rV(s,r),iV(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!rge&&Uf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=$p("Patches").$;return xv(n)?o(n,r):this.produce(n,(function(a){return o(a,r)}))},e})(),Gc=new Rkt,HOe=Gc.produce;Gc.produceWithPatches.bind(Gc);Gc.setAutoFreeze.bind(Gc);Gc.setUseProxies.bind(Gc);Gc.applyPatches.bind(Gc);Gc.createDraft.bind(Gc);Gc.finishDraft.bind(Gc);function Zk(e){"@babel/helpers - typeof";return Zk=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zk(e)}function Dkt(e,t){if(Zk(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zk(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pkt(e){var t=Dkt(e,"string");return Zk(t)=="symbol"?t:t+""}function Okt(e,t,n){return(t=Pkt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sge(Object(n),!0).forEach(function(r){Okt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sge(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ml(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var age=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),aV=function(){return Math.random().toString(36).substring(7).split("").join(".")},z6={INIT:"@@redux/INIT"+aV(),REPLACE:"@@redux/REPLACE"+aV(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+aV()}};function Nkt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function qOe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ml(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ml(1));return n(qOe)(e,t)}if(typeof e!="function")throw new Error(ml(2));var i=e,s=t,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(ml(3));return s}function d(m){if(typeof m!="function")throw new Error(ml(4));if(l)throw new Error(ml(5));var g=!0;return u(),a.push(m),function(){if(g){if(l)throw new Error(ml(6));g=!1,u();var v=a.indexOf(m);a.splice(v,1),o=null}}}function f(m){if(!Nkt(m))throw new Error(ml(7));if(typeof m.type>"u")throw new Error(ml(8));if(l)throw new Error(ml(9));try{l=!0,s=i(s,m)}finally{l=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ml(10));i=m,f({type:z6.REPLACE})}function p(){var m,g=d;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ml(11));function b(){v.next&&v.next(c())}b();var _=g(b);return{unsubscribe:_}}},m[age]=function(){return this},m}return f({type:z6.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[age]=p,r}function Mkt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:z6.INIT});if(typeof r>"u")throw new Error(ml(12));if(typeof n(void 0,{type:z6.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ml(13))})}function $kt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Mkt(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=l[h],g=p(m,u);if(typeof g>"u")throw u&&u.type,new Error(ml(14));d[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(l).length,c?d:l}}function V6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Fkt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ml(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(l){return l(o)});return s=V6.apply(void 0,a)(i.dispatch),oge(oge({},i),{},{dispatch:s})}}}function WOe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var WG=WOe();WG.withExtraArgument=WOe;var GOe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),UR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},cw=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Lkt=Object.defineProperty,jkt=Object.defineProperties,Bkt=Object.getOwnPropertyDescriptors,lge=Object.getOwnPropertySymbols,zkt=Object.prototype.hasOwnProperty,Vkt=Object.prototype.propertyIsEnumerable,uge=function(e,t,n){return t in e?Lkt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Zy=function(e,t){for(var n in t||(t={}))zkt.call(t,n)&&uge(e,n,t[n]);if(lge)for(var r=0,i=lge(t);r<i.length;r++){var n=i[r];Vkt.call(t,n)&&uge(e,n,t[n])}return e},lV=function(e,t){return jkt(e,Bkt(t))},HR=function(e,t,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(u){i(u)}},o=function(l){try{a(n.throw(l))}catch(u){i(u)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(e,t)).next())})},Ukt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?V6:V6.apply(null,arguments)};function YOe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Hkt=function(e){return e&&typeof e.match=="function"};function Fp(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return Zy(Zy({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function qkt(e){return YOe(e)&&"type"in e}var Wkt=(function(e){GOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,cw([void 0],n[0].concat(this)))):new(t.bind.apply(t,cw([void 0],n.concat(this))))},t})(Array),Gkt=(function(e){GOe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,cw([void 0],n[0].concat(this)))):new(t.bind.apply(t,cw([void 0],n.concat(this))))},t})(Array);function GG(e){return Jg(e)?HOe(e,function(){}):e}function Ykt(e){return typeof e=="boolean"}function Kkt(){return function(t){return Xkt(t)}}function Xkt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Wkt;return n&&(Ykt(n)?r.push(WG):r.push(WG.withExtraArgument(n.extraArgument))),r}function Qkt(e){var t=Kkt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(YOe(i))h=$kt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Fkt.apply(void 0,p),g=V6;l&&(g=Ukt(Zy({trace:!1},typeof l=="object"&&l)));var y=new Gkt(m),v=y;Array.isArray(f)?v=cw([m],f):typeof f=="function"&&(v=f(y));var b=g.apply(void 0,v);return qOe(h,c,b)}function KOe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Jkt(e){return typeof e=="function"}function Zkt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?KOe(t):[t,n,r],s=i[0],o=i[1],a=i[2],l;if(Jkt(e))l=function(){return GG(e())};else{var u=GG(e);l=function(){return u}}function c(d,f){d===void 0&&(d=l());var h=cw([s[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(xv(p)){var g=p,y=m(g,f);return y===void 0?p:y}else{if(Jg(p))return HOe(p,function(v){return m(v,f)});var y=m(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},d)}return c.getInitialState=l,c}function eIt(e,t){return e+"/"+t}function tIt(e){var t=e.name,n=typeof e.initialState=="function"?e.initialState:GG(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],f=eIt(t,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,s[c]=h,o[f]=h,a[c]=p?Fp(f,p):Fp(f)});function l(){var c=typeof e.extraReducers=="function"?KOe(e.extraReducers):[e.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=Zy(Zy({},f),o);return Zkt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var _=0,E=p;_<E.length;_++){var S=E[_];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var u;return{name:t,reducer:function(c,d){return u||(u=l()),u(c,d)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var nIt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",XOe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=nIt[Math.random()*64|0];return t},rIt=["name","message","stack","code"],uV=(function(){function e(t,n){this.payload=t,this.meta=n}return e})(),cge=(function(){function e(t,n){this.payload=t,this.meta=n}return e})(),iIt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=rIt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Fp(t+"/fulfilled",function(u,c,d,f){return{payload:u,meta:lV(Zy({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=Fp(t+"/pending",function(u,c,d){return{payload:void 0,meta:lV(Zy({},d||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),o=Fp(t+"/rejected",function(u,c,d,f,h){return{payload:f,error:(r&&r.serializeError||iIt)(u||"Rejected"),meta:lV(Zy({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:(function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u})();function l(u){return function(c,d,f){var h=r?.idGenerator?r.idGenerator(u):XOe(),p=new a,m;function g(v){m=v,p.abort()}var y=(function(){return HR(this,null,function(){var v,b,_,E,S,T,A;return UR(this,function(R){switch(R.label){case 0:return R.trys.push([0,4,,5]),E=(v=r?.condition)==null?void 0:v.call(r,u,{getState:d,extra:f}),oIt(E)?[4,E]:[3,2];case 1:E=R.sent(),R.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(s(h,u,(b=r?.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:u},{getState:d,extra:f}))),[4,Promise.race([S,Promise.resolve(n(u,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,P){return new uV(I,P)},fulfillWithValue:function(I,P){return new cge(I,P)}})).then(function(I){if(I instanceof uV)throw I;return I instanceof cge?i(I.payload,h,u,I.meta):i(I,h,u)})])];case 3:return _=R.sent(),[3,5];case 4:return T=R.sent(),_=T instanceof uV?o(null,h,u,T.payload,T.meta):o(T,h,u),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(_)&&_.meta.condition,A||c(_),[2,_]}})})})();return Object.assign(y,{abort:g,requestId:h,arg:u,unwrap:function(){return y.then(sIt)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function sIt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function oIt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var aIt=function(e,t){return Hkt(e)?e.match(t):e(t)};function dge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return aIt(r,n)})}}var Lte=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},YG=function(){},QOe=function(e,t){return t===void 0&&(t=YG),e.catch(t),e},JOe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},wE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},lIt="task",ZOe="listener",eNe="completed",jte="cancelled",uIt="task-"+jte,cIt="task-"+eNe,tNe=ZOe+"-"+jte,dIt=ZOe+"-"+eNe,LL=(function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=lIt+" "+jte+" (reason: "+t+")"}return e})(),xE=function(e){if(e.aborted)throw new LL(e.reason)};function nNe(e,t){var n=YG;return new Promise(function(r,i){var s=function(){return i(new LL(e.reason))};if(e.aborted){s();return}n=JOe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=YG})}var fIt=function(e,t){return HR(void 0,null,function(){var n,r;return UR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof LL?"cancelled":"rejected",error:r}];case 4:return t?.(),[7];case 5:return[2]}})})},U6=function(e){return function(t){return QOe(nNe(e,t).then(function(n){return xE(e),n}))}},rNe=function(e){var t=U6(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},hIt=Object.assign,fge={},qR="listenerMiddleware",pIt=function(e,t){var n=function(r){return JOe(e,function(){return wE(r,e.reason)})};return function(r,i){Lte(r,"taskExecutor");var s=new AbortController;n(s);var o=fIt(function(){return HR(void 0,null,function(){var a;return UR(this,function(l){switch(l.label){case 0:return xE(e),xE(s.signal),[4,r({pause:U6(s.signal),delay:rNe(s.signal),signal:s.signal})];case 1:return a=l.sent(),xE(s.signal),[2,a]}})})},function(){return wE(s,cIt)});return i?.autoJoin&&t.push(o),{result:U6(e)(o),cancel:function(){wE(s,uIt)}}}},mIt=function(e,t){var n=function(r,i){return HR(void 0,null,function(){var s,o,a,l;return UR(this,function(u){switch(u.label){case 0:xE(t),s=function(){},o=new Promise(function(c,d){var f=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){f(),d()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,nNe(t,Promise.race(a))];case 2:return l=u.sent(),xE(t),[2,l];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return QOe(n(r,i))}},iNe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Fp(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Lte(s,"options.listener"),{predicate:i,type:t,effect:s}},gIt=function(e){var t=iNe(e),n=t.type,r=t.predicate,i=t.effect,s=XOe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},KG=function(e){e.pending.forEach(function(t){wE(t,tNe)})},yIt=function(e){return function(){e.forEach(KG),e.clear()}},hge=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},vIt=Fp(qR+"/add"),bIt=Fp(qR+"/removeAll"),wIt=Fp(qR+"/remove"),xIt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,cw([qR+"/error"],e))};function _It(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?xIt:i;Lte(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p?.cancelActive&&KG(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},l=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=gIt(h)),o(p)},u=function(h){var p=iNe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var _=typeof m=="string"?b.type===m:b.predicate===y;return _&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&KG(v)),!!v},c=function(h,p,m,g){return HR(t,null,function(){var y,v,b,_;return UR(this,function(E){switch(E.label){case 0:y=new AbortController,v=mIt(l,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,hIt({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:rNe(y.signal),pause:U6(y.signal),extra:r,signal:y.signal,fork:pIt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,A){S!==y&&(wE(S,tNe),A.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return _=E.sent(),_ instanceof LL||hge(s,_,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),wE(y,dIt),h.pending.delete(y),[7];case 6:return[2]}})})},d=yIt(n),f=function(h){return function(p){return function(m){if(!qkt(m))return p(m);if(vIt.match(m))return l(m.payload);if(bIt.match(m)){d();return}if(wIt.match(m))return u(m.payload);var g=h.getState(),y=function(){if(g===fge)throw new Error(qR+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),_=Array.from(n.values()),E=0,S=_;E<S.length;E++){var T=S[E],A=!1;try{A=T.predicate(m,b,g)}catch(R){A=!1,hge(s,R,{raisedBy:"predicate"})}A&&c(T,m,h,y)}}finally{g=fge}return v}}};return{middleware:f,startListening:l,stopListening:u,clearListeners:d}}var pge;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Tkt();function EIt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let B3;const CIt=new Uint8Array(16);function SIt(){if(!B3&&(B3=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!B3))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B3(CIt)}const Pa=[];for(let e=0;e<256;++e)Pa.push((e+256).toString(16).slice(1));function TIt(e,t=0){return(Pa[e[t+0]]+Pa[e[t+1]]+Pa[e[t+2]]+Pa[e[t+3]]+"-"+Pa[e[t+4]]+Pa[e[t+5]]+"-"+Pa[e[t+6]]+Pa[e[t+7]]+"-"+Pa[e[t+8]]+Pa[e[t+9]]+"-"+Pa[e[t+10]]+Pa[e[t+11]]+Pa[e[t+12]]+Pa[e[t+13]]+Pa[e[t+14]]+Pa[e[t+15]]).toLowerCase()}const AIt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mge={randomUUID:AIt};function gge(e,t,n){if(mge.randomUUID&&!t&&!e)return mge.randomUUID();e=e||{};const r=e.random||(e.rng||SIt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,TIt(r)}let Lp=class{static get(){let t=gge();for(;this.ids.has(t);)t=gge();return this.ids.set(t,!0),t}};Lp.ids=new Map;function sh(e){return"parent"in e}function sNe(e){return!sh(e)}function kIt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((l,u)=>(l[u]=[],i&&i[u]&&l[u].push({type:u,id:Lp.get(),val:i[u],createdOn:Date.now()}),l),s),a=r?[{id:Lp.get(),createdOn:Date.now(),val:r}]:[];return{id:Lp.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function IIt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},l=Object.keys(i||{}).reduce((c,d)=>(c[d]=[],i&&i[d]&&c[d].push({type:d,id:Lp.get(),val:i[d],createdOn:Date.now()}),c),a),u=s?[{id:Lp.get(),createdOn:Date.now(),val:s}]:[];return{id:Lp.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:l,artifacts:u,sideEffects:r,state:t,level:e.level+1}}function Fs(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=LIt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function dw(e){return!!e&&!!e[Yc]}function _v(e){var t;return!!e&&((function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===jIt})(e)||Array.isArray(e)||!!e[YA]||!!(!((t=e.constructor)===null||t===void 0)&&t[YA])||jL(e)||BL(e))}function eC(e,t,n){n===void 0&&(n=!1),Ev(e)===0?(n?Object.keys:qte)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Ev(e){var t=e[Yc];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:jL(e)?2:BL(e)?3:0}function eI(e,t){return Ev(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function f4(e,t){return Ev(e)===2?e.get(t):e[t]}function oNe(e,t,n){var r=Ev(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function RIt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function jL(e){return $It&&e instanceof Map}function BL(e){return FIt&&e instanceof Set}function fb(e){return e.o||e.t}function Bte(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=BIt(e);delete t[Yc];for(var n=qte(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function zte(e,t){return t===void 0&&(t=!1),Vte(e)||dw(e)||!_v(e)||(Ev(e)>1&&(e.set=e.add=e.clear=e.delete=DIt),Object.freeze(e),t&&eC(e,function(n,r){return zte(r,!0)},!0)),e}function DIt(){Fs(2)}function Vte(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function jp(e){var t=ZG[e];return t||Fs(18,e),t}function PIt(e,t){ZG[e]||(ZG[e]=t)}function yge(){return{}.NODE_ENV==="production"||tC||Fs(0),tC}function cV(e,t){t&&(jp("Patches"),e.u=[],e.s=[],e.v=t)}function H6(e){XG(e),e.p.forEach(OIt),e.p=null}function XG(e){e===tC&&(tC=e.l)}function vge(e){return tC={p:[],l:tC,h:e,m:!0,_:0}}function OIt(e){var t=e[Yc];t.i===0||t.i===1?t.j():t.O=!0}function dV(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||jp("ES5").S(t,e,r),r?(n[Yc].P&&(H6(t),Fs(4)),_v(e)&&(e=q6(t,e),t.l||W6(t,e)),t.u&&jp("Patches").M(n[Yc].t,e,t.u,t.s)):e=q6(t,n,[]),H6(t),t.u&&t.v(t.u,t.s),e!==Hte?e:void 0}function q6(e,t,n){if(Vte(t))return t;var r=t[Yc];if(!r)return eC(t,function(s,o){return bge(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return W6(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Bte(r.k):r.o;eC(r.i===3?new Set(i):i,function(s,o){return bge(e,r,i,s,o,n)}),W6(e,i,!1),n&&e.u&&jp("Patches").R(r,n,e.u,e.s)}return r.o}function bge(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Fs(5),dw(i)){var o=q6(e,i,s&&t&&t.i!==3&&!eI(t.D,r)?s.concat(r):void 0);if(oNe(n,r,o),!dw(o))return;e.m=!1}if(_v(i)&&!Vte(i)){if(!e.h.F&&e._<1)return;q6(e,i),t&&t.A.l||W6(e,i)}}function W6(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&zte(t,n)}function fV(e,t){var n=e[Yc];return(n?fb(n):e)[t]}function wge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function QG(e){e.P||(e.P=!0,e.l&&QG(e.l))}function hV(e){e.o||(e.o=Bte(e.t))}function JG(e,t,n){var r=jL(t)?jp("MapSet").N(t,n):BL(t)?jp("MapSet").T(t,n):e.g?(function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:yge(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=eY;o&&(l=[a],u=Q2);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f})(t,n):jp("ES5").J(t,n);return(n?n.A:yge()).p.push(r),r}function NIt(e){return dw(e)||Fs(22,e),(function t(n){if(!_v(n))return n;var r,i=n[Yc],s=Ev(n);if(i){if(!i.P&&(i.i<4||!jp("ES5").K(i)))return i.t;i.I=!0,r=xge(n,s),i.I=!1}else r=xge(n,s);return eC(r,function(o,a){i&&f4(i.t,o)===a||oNe(r,o,t(a))}),s===3?new Set(r):r})(e)}function xge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Bte(e)}function MIt(){function e(r){if(!_v(r))return r;if(Array.isArray(r))return r.map(e);if(jL(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(BL(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return eI(r,YA)&&(i[YA]=r[YA]),i}function t(r){return dw(r)?e(r):r}var n="add";PIt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,l=r,u=0;u<o.length-1;u++){var c=Ev(l),d=""+o[u];c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||Fs(24),typeof l=="function"&&d==="prototype"&&Fs(24),typeof(l=f4(l,d))!="object"&&Fs(15,o.join("/"))}var f=Ev(l),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(f){case 2:return l.set(p,h);case 3:Fs(16);default:return l[p]=h}case n:switch(f){case 1:return p==="-"?l.push(h):l.splice(p,0,h);case 2:return l.set(p,h);case 3:return l.add(h);default:return l[p]=h}case"remove":switch(f){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(s.value);default:return delete l[p]}default:Fs(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return(function(a,l,u,c){var d=a.t,f=a.o;eC(a.D,function(h,p){var m=f4(d,h),g=f4(f,h),y=p?eI(d,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=l.concat(h);u.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})})(r,i,s,o);case 5:case 1:return(function(a,l,u,c){var d=a.t,f=a.D,h=a.o;if(h.length<d.length){var p=[h,d];d=p[0],h=p[1];var m=[c,u];u=m[0],c=m[1]}for(var g=0;g<d.length;g++)if(f[g]&&h[g]!==d[g]){var y=l.concat([g]);u.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(d[g])})}for(var v=d.length;v<h.length;v++){var b=l.concat([v]);u.push({op:n,path:b,value:t(h[v])})}d.length<h.length&&c.push({op:"replace",path:l.concat(["length"]),value:d.length})})(r,i,s,o);case 3:return(function(a,l,u,c){var d=a.t,f=a.o,h=0;d.forEach(function(p){if(!f.has(p)){var m=l.concat([h]);u.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,f.forEach(function(p){if(!d.has(p)){var m=l.concat([h]);u.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})})(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Hte?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var _ge,tC,Ute=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",$It=typeof Map<"u",FIt=typeof Set<"u",Ege=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Hte=Ute?Symbol.for("immer-nothing"):((_ge={})["immer-nothing"]=!0,_ge),YA=Ute?Symbol.for("immer-draftable"):"__$immer_draftable",Yc=Ute?Symbol.for("immer-state"):"__$immer_state",LIt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},jIt=""+Object.prototype.constructor,qte=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,BIt=Object.getOwnPropertyDescriptors||function(e){var t={};return qte(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},ZG={},eY={get:function(e,t){if(t===Yc)return e;var n=fb(e);if(!eI(n,t))return(function(i,s,o){var a,l=wge(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0})(e,n,t);var r=n[t];return e.I||!_v(r)?r:r===fV(e.t,t)?(hV(e),e.o[t]=JG(e.A.h,r,e)):r},has:function(e,t){return t in fb(e)},ownKeys:function(e){return Reflect.ownKeys(fb(e))},set:function(e,t,n){var r=wge(fb(e),t);if(r?.set)return r.set.call(e.k,n),!0;if(!e.P){var i=fV(fb(e),t),s=i?.[Yc];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(RIt(n,i)&&(n!==void 0||eI(e.t,t)))return!0;hV(e),QG(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return fV(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,hV(e),QG(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=fb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Fs(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Fs(12)}},Q2={};eC(eY,function(e,t){Q2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Q2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Fs(13),Q2.set.call(this,e,t,void 0)},Q2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Fs(14),eY.set.call(this,e[0],t,n,e[0])};var zIt=(function(){function e(n){var r=this;this.g=Ege,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return l.produce(m,function(_){var E;return(E=s).call.apply(E,[g,_].concat(v))})}}var u;if(typeof s!="function"&&Fs(6),o!==void 0&&typeof o!="function"&&Fs(7),_v(i)){var c=vge(r),d=JG(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?H6(c):XG(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return cV(c,o),dV(m,c)},function(m){throw H6(c),m}):(cV(c,o),dV(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===Hte&&(u=void 0),r.F&&zte(u,!0),o){var h=[],p=[];jp("Patches").M(i,u,h,p),o(h,p)}return u}Fs(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof n?.useProxies=="boolean"&&this.setUseProxies(n.useProxies),typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){_v(n)||Fs(8),dw(n)&&(n=NIt(n));var r=vge(this),i=JG(this,n,void 0);return i[Yc].C=!0,XG(r),i},t.finishDraft=function(n,r){var i=n&&n[Yc];({}).NODE_ENV!=="production"&&(i&&i.C||Fs(9),i.I&&Fs(10));var s=i.A;return cV(s,r),dV(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Ege&&Fs(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=jp("Patches").$;return dw(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e})(),Kc=new zIt,VIt=Kc.produce;Kc.produceWithPatches.bind(Kc);Kc.setAutoFreeze.bind(Kc);Kc.setUseProxies.bind(Kc);Kc.applyPatches.bind(Kc);Kc.createDraft.bind(Kc);Kc.finishDraft.bind(Kc);function UIt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=kIt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return tIt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,l){const{id:u,meta:c}=l.payload,d=a.nodes[u].meta,f=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Lp.get(),val:c[p],createdOn:Date.now()}),h),d);a.nodes[l.payload.id].meta=f},addArtifact(a,l){a.nodes[l.payload.id].artifacts.push({id:Lp.get(),createdOn:Date.now(),val:l.payload.artifact})},changeCurrent(a,l){a.current=l.payload},addNode(a,{payload:l}){a.nodes[l.id]=l,a.nodes[l.parent].children.push(l.id),a.current=l.id},load(a,{payload:l}){return l}}})}function HIt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=UIt(e),s=_It();s.startListening({matcher:dge(r.changeCurrent,r.addNode),effect:(a,l)=>{l.cancelActiveListeners(),t.forEach(u=>{const c=dge(r.addNode)(a),{skipOnNew:d}=u.config;d&&c||u.func(c?"new":"traversal")})}});const o=Qkt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,l){const u={id:Lp.get(),func:a,config:l};return t.set(u.id,u),()=>t.delete(u.id)},update:o.dispatch,...r}}var qIt=globalThis&&globalThis.__extends||(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),WIt=Object.prototype.hasOwnProperty;function tY(e,t){return WIt.call(e,t)}function nY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)tY(e,i)&&r.push(i);return r}function Ku(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function rY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function hb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function aNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function iY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(iY(e[t]))return!0}else if(typeof e=="object"){for(var r=nY(e),i=r.length,s=0;s<i;s++)if(iY(e[r[s]]))return!0}}return!1}function Cge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var lNe=(function(e){qIt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,Cge(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=Cge(n,{name:r,index:i,operation:s,tree:o}),l}return t})(Error),Os=lNe,GIt=Ku,Z_={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=G6(n,this.path);r&&(r=Ku(r));var i=Hb(n,{op:"remove",path:this.from}).removed;return Hb(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=G6(n,this.from);return Hb(n,{op:"add",path:this.path,value:Ku(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:tI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},YIt={add:function(e,t,n){return rY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Z_.move,copy:Z_.copy,test:Z_.test,_get:Z_._get};function G6(e,t){if(t=="")return e;var n={op:"_get",path:t};return Hb(e,n),n.value}function Hb(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Y6(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=G6(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=tI(e,t.value),o.test===!1)throw new Os("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Os("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ku(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Y6;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=aNe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!rY(h))throw new Os("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);rY(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new Os("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=YIt[t.op].call(t,u,h,e);if(o.test===!1)throw new Os("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=Z_[t.op].call(t,u,h,e);if(o.test===!1)throw new Os("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new Os("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function zL(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Os("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ku(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Hb(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function KIt(e,t,n){var r=Hb(e,t);if(r.test===!1)throw new Os("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Y6(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Os("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Z_[e.op]){if(typeof e.path!="string")throw new Os("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Os('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Os("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Os("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&iY(e.value))throw new Os("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Os("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Os("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=uNe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Os("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Os("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function uNe(e,t,n){try{if(!Array.isArray(e))throw new Os("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)zL(Ku(t),Ku(e),n||!0);else{n=n||Y6;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Os)return i;throw i}}function tI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!tI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!tI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const XIt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Os,_areEquals:tI,applyOperation:Hb,applyPatch:zL,applyReducer:KIt,deepClone:GIt,getValueByPointer:G6,validate:uNe,validator:Y6},Symbol.toStringTag,{value:"Module"}));var Wte=new WeakMap,QIt=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),JIt=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function ZIt(e){return Wte.get(e)}function eRt(e,t){return e.observers.get(t)}function tRt(e,t){e.observers.delete(t.callback)}function nRt(e,t){t.unobserve()}function rRt(e,t){var n=[],r,i=ZIt(e);if(!i)i=new QIt(e),Wte.set(e,i);else{var s=eRt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ku(e),t){r.callback=t,r.next=null;var o=function(){sY(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){sY(r),clearTimeout(r.next),tRt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new JIt(t,r)),r}function sY(e,t){t===void 0&&(t=!1);var n=Wte.get(e.object);Gte(n.value,e.object,e.patches,"",t),e.patches.length&&zL(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Gte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=nY(t),o=nY(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(tY(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?Gte(c,d,n,r+"/"+hb(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+hb(u),value:Ku(c)}),n.push({op:"replace",path:r+"/"+hb(u),value:Ku(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+hb(u),value:Ku(c)}),n.push({op:"remove",path:r+"/"+hb(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!tY(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+hb(u),value:Ku(t[u])})}}}function cNe(e,t,n){n===void 0&&(n=!1);var r=[];return Gte(e,t,r,"",n),r}const iRt=Object.freeze(Object.defineProperty({__proto__:null,compare:cNe,generate:sY,observe:rRt,unobserve:nRt},Symbol.toStringTag,{value:"Module"}));Object.assign({},XIt,iRt,{JsonPatchError:lNe,deepClone:Ku,escapePathComponent:hb,unescapePathComponent:aNe});var J2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(J2||{});function h4(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=dNe(i,e,t);s.shift();const o=s.map(l=>t[l]).map(l=>l.state.val).reduce((l,u)=>[...l,...u],[]),a=h4(i,t);return zL(a,Ku(o),!0,!1).newDocument}function sRt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function CS({registry:e,initialState:t}){let n=!1;const r=EIt(),i=HIt(t);function s(c){return i.backend.nodes[c]}r.listen(J2.TRAVERSAL_START,()=>{n=!0}),r.listen(J2.TRAVERSAL_END,()=>{n=!1});const o={add(c,d=i.current.id){i.update(i.addMetadata({id:d,meta:c}))},latestOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]?.at(-1)},allOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]},latest(c=i.current.id){const d=i.backend.nodes[c].meta,f=Object.keys(d).reduce((h,p)=>{const m=d[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(f).length>0?f:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,d=i.current.id){i.update(i.addArtifact({id:d,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},l={add(c,d=i.current.id){o.add({annotation:c},d)},latest(c=i.current.id){return o.latestOfType("annotation",c)?.val},all(c=i.current.id){return o.allOfType("annotation",c)?.map(d=>d.val)}},u={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){return!!o.latestOfType("bookmark",c)?.val},toggle(c=i.current.id){u.is(c)?u.remove(c):u.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return h4(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:d,sideEffects:f,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=h4(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:d};else{const v=cNe(y,d);if(sRt(d,v)==="checkpoint")g={type:"checkpoint",val:d};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=IIt({label:c,state:g,parent:this.current,sideEffects:f,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,d){const f=e.get(d.type),h=h4(this.current,this.graph.backend.nodes);if(f.config.hasSideEffects){const{do:p=d,undo:m}=f.func(d.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:f.config.eventType})}else{const p=f.func(h,d.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:f.config.eventType})}},async to(c){r.fire(J2.TRAVERSAL_START);const d=dNe(i.current,i.backend.nodes[c],i.backend.nodes),f=[];for(let h=0;h<d.length-1;++h){const p=s(d[h]),m=s(d[h+1]);aRt(p,m)?sh(p)&&f.push(...p.sideEffects.undo):sh(m)&&f.push(...m.sideEffects.do)}for(const h of f){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(J2.TRAVERSAL_END)},undo(){const{current:c}=i;return sh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:d}=i;return d.children.length>0?this.to(d.children[c==="oldest"?0:d.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,d=!1){return i.currentChange(c,{skipOnNew:d})},done(){console.log("Setup later for URL sharing.")},tree(){return fNe(i.root,i.backend.nodes)},on(c,d){r.listen(c,d)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const d=JSON.parse(c),f=d.current;d.current=d.root,i.update(i.load(d)),this.to(f)},importObject(c){const d=c.current;c.current=c.root,i.update(i.load(c)),this.to(d)},metadata:o,artifact:a,annotations:l,bookmarks:u}}function oRt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;sh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)sh(r)&&(r=n[r.parent]),sh(i)&&(i=n[i.parent]);return r.id}function dNe(e,t,n){const r=oRt(e,t,n),i=n[r],s=[],o=[];let[a,l]=[e,t];for(;a.id!==i.id;)s.push(a),sh(a)&&(a=n[a.parent]);for(s.push(a);l.id!==i.id;)o.push(l),sh(l)&&(l=n[l.parent]);const u=o.reverse();return[...s,...u].map(c=>c.id)}function aRt(e,t){if(sh(e)&&e.parent===t.id)return!0;if(sh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function fNe(e,t){return{...e,children:e.children.map(n=>fNe(t[n],t)),name:`${e.label}`}}MIt();function lRt(e){return e.length===2?VIt(e):e}class a1{static create(){return new a1}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:lRt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Fp(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}function Rg(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function uRt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function SS(e){let t,n,r;e.length!==2?(t=Rg,n=(a,l)=>Rg(e(a),l),r=(a,l)=>e(a)-l):(t=e===Rg||e===uRt?e:cRt,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function cRt(){return 0}function hNe(e){return e===null?NaN:+e}function*dRt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const pNe=SS(Rg),Cv=pNe.right,fRt=pNe.left;SS(hNe).center;function hRt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function pRt(e,t){const n=hRt(e,t);return n&&Math.sqrt(n)}function K6(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class uu{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Sge extends Map{constructor(t,n=yNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(oY(this,t))}has(t){return super.has(oY(this,t))}set(t,n){return super.set(mNe(this,t),n)}delete(t){return super.delete(gNe(this,t))}}class X6 extends Set{constructor(t,n=yNe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(oY(this,t))}add(t){return super.add(mNe(this,t))}delete(t){return super.delete(gNe(this,t))}}function oY({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function mNe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function gNe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function yNe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mRt(e,t){return Array.from(t,n=>e[n])}function gRt(e=Rg){if(e===Rg)return vNe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function vNe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const yRt=Math.sqrt(50),vRt=Math.sqrt(10),bRt=Math.sqrt(2);function Q6(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=yRt?10:s>=vRt?5:s>=bRt?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?Q6(e,t,n*2):[a,l,u]}function aY(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?Q6(t,e,n):Q6(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function lY(e,t,n){return t=+t,e=+e,n=+n,Q6(e,t,n)[2]}function Sv(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?lY(t,e,n):lY(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function ev(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function uY(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function bNe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?vNe:gRt(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*d/l+f)),p=Math.min(r,Math.floor(t+(l-u)*d/l+f));bNe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(n2(e,n,t),i(e[r],s)>0&&n2(e,n,r);o<a;){for(n2(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?n2(e,n,a):(++a,n2(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function n2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function cY(e,t,n){if(e=Float64Array.from(dRt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return uY(e);if(t>=1)return ev(e);var r,i=(r-1)*t,s=Math.floor(i),o=ev(bNe(e,s).subarray(0,s+1)),a=uY(e.subarray(s+1));return o+(a-o)*(i-s)}}function wNe(e,t,n=hNe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function wRt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function xNe(e,t){return cY(e,.5,t)}function*xRt(e){for(const t of e)yield*t}function _Ne(e){return Array.from(xRt(e))}function Xu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function ENe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function _Rt(e,...t){e=new X6(e),t=t.map(ERt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function ERt(e){return e instanceof X6?e:new X6(e)}function CRt(...e){const t=new X6;for(const n of e)for(const r of n)t.add(r);return t}function SRt(e){return e}var pV=1,mV=2,dY=3,Z2=4,Tge=1e-6;function TRt(e){return"translate("+e+",0)"}function ARt(e){return"translate(0,"+e+")"}function kRt(e){return t=>+e(t)}function IRt(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function RRt(){return!this.__axis}function CNe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===pV||e===Z2?-1:1,c=e===Z2||e===mV?"x":"y",d=e===pV||e===dY?TRt:ARt;function f(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):SRt),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+l,b=+y[y.length-1]+l,_=(t.bandwidth?IRt:kRt)(t.copy(),l),E=h.selection?h.selection():h,S=E.selectAll(".domain").data([null]),T=E.selectAll(".tick").data(p,t).order(),A=T.exit(),R=T.enter().append("g").attr("class","tick"),I=T.select("line"),P=T.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(R),I=I.merge(R.append("line").attr("stroke","currentColor").attr(c+"2",u*s)),P=P.merge(R.append("text").attr("fill","currentColor").attr(c,u*g).attr("dy",e===pV?"0em":e===dY?"0.71em":"0.32em")),h!==E&&(S=S.transition(h),T=T.transition(h),I=I.transition(h),P=P.transition(h),A=A.transition(h).attr("opacity",Tge).attr("transform",function(N){return isFinite(N=_(N))?d(N+l):this.getAttribute("transform")}),R.attr("opacity",Tge).attr("transform",function(N){var M=this.parentNode.__axis;return d((M&&isFinite(M=M(N))?M:_(N))+l)})),A.remove(),S.attr("d",e===Z2||e===mV?o?"M"+u*o+","+v+"H"+l+"V"+b+"H"+u*o:"M"+l+","+v+"V"+b:o?"M"+v+","+u*o+"V"+l+"H"+b+"V"+u*o:"M"+v+","+l+"H"+b),T.attr("opacity",1).attr("transform",function(N){return d(_(N)+l)}),I.attr(c+"2",u*s),P.attr(c,u*g).text(m),E.filter(RRt).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===mV?"start":e===Z2?"end":"middle"),E.each(function(){this.__axis=_})}return f.scale=function(h){return arguments.length?(t=h,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),f):n.slice()},f.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),f):r&&r.slice()},f.tickFormat=function(h){return arguments.length?(i=h,f):i},f.tickSize=function(h){return arguments.length?(s=o=+h,f):s},f.tickSizeInner=function(h){return arguments.length?(s=+h,f):s},f.tickSizeOuter=function(h){return arguments.length?(o=+h,f):o},f.tickPadding=function(h){return arguments.length?(a=+h,f):a},f.offset=function(h){return arguments.length?(l=+h,f):l},f}function SNe(e){return CNe(dY,e)}function TNe(e){return CNe(Z2,e)}var DRt={value:()=>{}};function VL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new p4(n)}function p4(e){this._=e}function PRt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}p4.prototype=VL.prototype={constructor:p4,on:function(e,t){var n=this._,r=PRt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=ORt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Age(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Age(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new p4(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function ORt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Age(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=DRt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var fY="http://www.w3.org/1999/xhtml";const kge={svg:"http://www.w3.org/2000/svg",xhtml:fY,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function UL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kge.hasOwnProperty(t)?{space:kge[t],local:e}:e}function NRt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fY&&t.documentElement.namespaceURI===fY?t.createElement(e):t.createElementNS(n,e)}}function MRt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ANe(e){var t=UL(e);return(t.local?MRt:NRt)(t)}function $Rt(){}function Yte(e){return e==null?$Rt:function(){return this.querySelector(e)}}function FRt(e){typeof e!="function"&&(e=Yte(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=s[c])&&(u=e.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new mu(r,this._parents)}function kNe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function LRt(){return[]}function INe(e){return e==null?LRt:function(){return this.querySelectorAll(e)}}function jRt(e){return function(){return kNe(e.apply(this,arguments))}}function BRt(e){typeof e=="function"?e=jRt(e):e=INe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new mu(r,i)}function RNe(e){return function(){return this.matches(e)}}function DNe(e){return function(t){return t.matches(e)}}var zRt=Array.prototype.find;function VRt(e){return function(){return zRt.call(this.children,e)}}function URt(){return this.firstElementChild}function HRt(e){return this.select(e==null?URt:VRt(typeof e=="function"?e:DNe(e)))}var qRt=Array.prototype.filter;function WRt(){return Array.from(this.children)}function GRt(e){return function(){return qRt.call(this.children,e)}}function YRt(e){return this.selectAll(e==null?WRt:GRt(typeof e=="function"?e:DNe(e)))}function KRt(e){typeof e!="function"&&(e=RNe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new mu(r,this._parents)}function PNe(e){return new Array(e.length)}function XRt(){return new mu(this._enter||this._groups.map(PNe),this._parents)}function J6(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}J6.prototype={constructor:J6,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function QRt(e){return function(){return e}}function JRt(e,t,n,r,i,s){for(var o=0,a,l=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new J6(e,s[o]);for(;o<l;++o)(a=t[o])&&(i[o]=a)}function ZRt(e,t,n,r,i,s,o){var a,l,u=new Map,c=t.length,d=s.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=o.call(l,l.__data__,a,t)+"",u.has(h)?i[a]=l:u.set(h,l));for(a=0;a<d;++a)h=o.call(e,s[a],a,s)+"",(l=u.get(h))?(r[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new J6(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(i[a]=l)}function eDt(e){return e.__data__}function tDt(e,t){if(!arguments.length)return Array.from(this,eDt);var n=t?ZRt:JRt,r=this._parents,i=this._groups;typeof e!="function"&&(e=QRt(e));for(var s=i.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],d=i[u],f=d.length,h=nDt(e.call(c,c&&c.__data__,u,r)),p=h.length,m=a[u]=new Array(p),g=o[u]=new Array(p),y=l[u]=new Array(f);n(c,d,m,g,y,h,t);for(var v=0,b=0,_,E;v<p;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);_._next=E||null}}return o=new mu(o,r),o._enter=a,o._exit=l,o}function nDt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rDt(){return new mu(this._exit||this._groups.map(PNe),this._parents)}function iDt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function sDt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],d=u.length,f=a[l]=new Array(d),h,p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<i;++l)a[l]=n[l];return new mu(a,this._parents)}function oDt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function aDt(e){e||(e=lDt);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,l=i[s]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new mu(i,this._parents).order()}function lDt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uDt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function cDt(){return Array.from(this)}function dDt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function fDt(){let e=0;for(const t of this)++e;return e}function hDt(){return!this.node()}function pDt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function mDt(e){return function(){this.removeAttribute(e)}}function gDt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function yDt(e,t){return function(){this.setAttribute(e,t)}}function vDt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function bDt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function wDt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function xDt(e,t){var n=UL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?gDt:mDt:typeof t=="function"?n.local?wDt:bDt:n.local?vDt:yDt)(n,t))}function ONe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function _Dt(e){return function(){this.style.removeProperty(e)}}function EDt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function CDt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function SDt(e,t,n){return arguments.length>1?this.each((t==null?_Dt:typeof t=="function"?CDt:EDt)(e,t,n??"")):nC(this.node(),e)}function nC(e,t){return e.style.getPropertyValue(t)||ONe(e).getComputedStyle(e,null).getPropertyValue(t)}function TDt(e){return function(){delete this[e]}}function ADt(e,t){return function(){this[e]=t}}function kDt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function IDt(e,t){return arguments.length>1?this.each((t==null?TDt:typeof t=="function"?kDt:ADt)(e,t)):this.node()[e]}function NNe(e){return e.trim().split(/^|\s+/)}function Kte(e){return e.classList||new MNe(e)}function MNe(e){this._node=e,this._names=NNe(e.getAttribute("class")||"")}MNe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $Ne(e,t){for(var n=Kte(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function FNe(e,t){for(var n=Kte(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function RDt(e){return function(){$Ne(this,e)}}function DDt(e){return function(){FNe(this,e)}}function PDt(e,t){return function(){(t.apply(this,arguments)?$Ne:FNe)(this,e)}}function ODt(e,t){var n=NNe(e+"");if(arguments.length<2){for(var r=Kte(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?PDt:t?RDt:DDt)(n,t))}function NDt(){this.textContent=""}function MDt(e){return function(){this.textContent=e}}function $Dt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function FDt(e){return arguments.length?this.each(e==null?NDt:(typeof e=="function"?$Dt:MDt)(e)):this.node().textContent}function LDt(){this.innerHTML=""}function jDt(e){return function(){this.innerHTML=e}}function BDt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zDt(e){return arguments.length?this.each(e==null?LDt:(typeof e=="function"?BDt:jDt)(e)):this.node().innerHTML}function VDt(){this.nextSibling&&this.parentNode.appendChild(this)}function UDt(){return this.each(VDt)}function HDt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qDt(){return this.each(HDt)}function WDt(e){var t=typeof e=="function"?e:ANe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function GDt(){return null}function YDt(e,t){var n=typeof e=="function"?e:ANe(e),r=t==null?GDt:typeof t=="function"?t:Yte(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function KDt(){var e=this.parentNode;e&&e.removeChild(this)}function XDt(){return this.each(KDt)}function QDt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function JDt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZDt(e){return this.select(e?JDt:QDt)}function ePt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tPt(e){return function(t){e.call(this,t,this.__data__)}}function nPt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function rPt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function iPt(e,t,n){return function(){var r=this.__on,i,s=tPt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function sPt(e,t,n){var r=nPt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?iPt:rPt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function LNe(e,t,n){var r=ONe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function oPt(e,t){return function(){return LNe(this,e,t)}}function aPt(e,t){return function(){return LNe(this,e,t.apply(this,arguments))}}function lPt(e,t){return this.each((typeof t=="function"?aPt:oPt)(e,t))}function*uPt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Xte=[null];function mu(e,t){this._groups=e,this._parents=t}function WR(){return new mu([[document.documentElement]],Xte)}function cPt(){return this}mu.prototype=WR.prototype={constructor:mu,select:FRt,selectAll:BRt,selectChild:HRt,selectChildren:YRt,filter:KRt,data:tDt,enter:XRt,exit:rDt,join:iDt,merge:sDt,selection:cPt,order:oDt,sort:aDt,call:uDt,nodes:cDt,node:dDt,size:fDt,empty:hDt,each:pDt,attr:xDt,style:SDt,property:IDt,classed:ODt,text:FDt,html:zDt,raise:UDt,lower:qDt,append:WDt,insert:YDt,remove:XDt,clone:ZDt,datum:ePt,on:sPt,dispatch:lPt,[Symbol.iterator]:uPt};function Lo(e){return typeof e=="string"?new mu([[document.querySelector(e)]],[document.documentElement]):new mu([[e]],Xte)}function dPt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ige(e,t){if(e=dPt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function fPt(e){return typeof e=="string"?new mu([document.querySelectorAll(e)],[document.documentElement]):new mu([kNe(e)],Xte)}const hY={capture:!0,passive:!1};function pY(e){e.preventDefault(),e.stopImmediatePropagation()}function hPt(e){var t=e.document.documentElement,n=Lo(e).on("dragstart.drag",pY,hY);"onselectstart"in t?n.on("selectstart.drag",pY,hY):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function pPt(e,t){var n=e.document.documentElement,r=Lo(e).on("dragstart.drag",null);t&&(r.on("click.drag",pY,hY),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function TS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function GR(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function l1(){}var fw=.7,rC=1/fw,_E="\\s*([+-]?\\d+)\\s*",nI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mPt=/^#([0-9a-f]{3,8})$/,gPt=new RegExp(`^rgb\\(${_E},${_E},${_E}\\)$`),yPt=new RegExp(`^rgb\\(${Bp},${Bp},${Bp}\\)$`),vPt=new RegExp(`^rgba\\(${_E},${_E},${_E},${nI}\\)$`),bPt=new RegExp(`^rgba\\(${Bp},${Bp},${Bp},${nI}\\)$`),wPt=new RegExp(`^hsl\\(${nI},${Bp},${Bp}\\)$`),xPt=new RegExp(`^hsla\\(${nI},${Bp},${Bp},${nI}\\)$`),Rge={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};TS(l1,hw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dge,formatHex:Dge,formatHex8:_Pt,formatHsl:EPt,formatRgb:Pge,toString:Pge});function Dge(){return this.rgb().formatHex()}function _Pt(){return this.rgb().formatHex8()}function EPt(){return jNe(this).formatHsl()}function Pge(){return this.rgb().formatRgb()}function hw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=mPt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Oge(t):n===3?new pa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?z3(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?z3(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=gPt.exec(e))?new pa(t[1],t[2],t[3],1):(t=yPt.exec(e))?new pa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vPt.exec(e))?z3(t[1],t[2],t[3],t[4]):(t=bPt.exec(e))?z3(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=wPt.exec(e))?$ge(t[1],t[2]/100,t[3]/100,1):(t=xPt.exec(e))?$ge(t[1],t[2]/100,t[3]/100,t[4]):Rge.hasOwnProperty(e)?Oge(Rge[e]):e==="transparent"?new pa(NaN,NaN,NaN,0):null}function Oge(e){return new pa(e>>16&255,e>>8&255,e&255,1)}function z3(e,t,n,r){return r<=0&&(e=t=n=NaN),new pa(e,t,n,r)}function Qte(e){return e instanceof l1||(e=hw(e)),e?(e=e.rgb(),new pa(e.r,e.g,e.b,e.opacity)):new pa}function Tv(e,t,n,r){return arguments.length===1?Qte(e):new pa(e,t,n,r??1)}function pa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}TS(pa,Tv,GR(l1,{brighter(e){return e=e==null?rC:Math.pow(rC,e),new pa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?fw:Math.pow(fw,e),new pa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new pa(qb(this.r),qb(this.g),qb(this.b),Z6(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nge,formatHex:Nge,formatHex8:CPt,formatRgb:Mge,toString:Mge}));function Nge(){return`#${Ob(this.r)}${Ob(this.g)}${Ob(this.b)}`}function CPt(){return`#${Ob(this.r)}${Ob(this.g)}${Ob(this.b)}${Ob((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mge(){const e=Z6(this.opacity);return`${e===1?"rgb(":"rgba("}${qb(this.r)}, ${qb(this.g)}, ${qb(this.b)}${e===1?")":`, ${e})`}`}function Z6(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qb(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ob(e){return e=qb(e),(e<16?"0":"")+e.toString(16)}function $ge(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hf(e,t,n,r)}function jNe(e){if(e instanceof Hf)return new Hf(e.h,e.s,e.l,e.opacity);if(e instanceof l1||(e=hw(e)),!e)return new Hf;if(e instanceof Hf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Hf(o,a,l,e.opacity)}function rI(e,t,n,r){return arguments.length===1?jNe(e):new Hf(e,t,n,r??1)}function Hf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}TS(Hf,rI,GR(l1,{brighter(e){return e=e==null?rC:Math.pow(rC,e),new Hf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fw:Math.pow(fw,e),new Hf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pa(gV(e>=240?e-240:e+120,i,r),gV(e,i,r),gV(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hf(Fge(this.h),V3(this.s),V3(this.l),Z6(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Z6(this.opacity);return`${e===1?"hsl(":"hsla("}${Fge(this.h)}, ${V3(this.s)*100}%, ${V3(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fge(e){return e=(e||0)%360,e<0?e+360:e}function V3(e){return Math.max(0,Math.min(1,e||0))}function gV(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const BNe=Math.PI/180,zNe=180/Math.PI,e5=18,VNe=.96422,UNe=1,HNe=.82521,qNe=4/29,EE=6/29,WNe=3*EE*EE,SPt=EE*EE*EE;function GNe(e){if(e instanceof zp)return new zp(e.l,e.a,e.b,e.opacity);if(e instanceof mg)return YNe(e);e instanceof pa||(e=Qte(e));var t=wV(e.r),n=wV(e.g),r=wV(e.b),i=yV((.2225045*t+.7168786*n+.0606169*r)/UNe),s,o;return t===n&&n===r?s=o=i:(s=yV((.4360747*t+.3850649*n+.1430804*r)/VNe),o=yV((.0139322*t+.0971045*n+.7141733*r)/HNe)),new zp(116*i-16,500*(s-i),200*(i-o),e.opacity)}function t5(e,t,n,r){return arguments.length===1?GNe(e):new zp(e,t,n,r??1)}function zp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}TS(zp,t5,GR(l1,{brighter(e){return new zp(this.l+e5*(e??1),this.a,this.b,this.opacity)},darker(e){return new zp(this.l-e5*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=VNe*vV(t),e=UNe*vV(e),n=HNe*vV(n),new pa(bV(3.1338561*t-1.6168667*e-.4906146*n),bV(-.9787684*t+1.9161415*e+.033454*n),bV(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function yV(e){return e>SPt?Math.pow(e,1/3):e/WNe+qNe}function vV(e){return e>EE?e*e*e:WNe*(e-qNe)}function bV(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function wV(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function TPt(e){if(e instanceof mg)return new mg(e.h,e.c,e.l,e.opacity);if(e instanceof zp||(e=GNe(e)),e.a===0&&e.b===0)return new mg(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*zNe;return new mg(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function n5(e,t,n,r){return arguments.length===1?TPt(e):new mg(e,t,n,r??1)}function mg(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function YNe(e){if(isNaN(e.h))return new zp(e.l,0,0,e.opacity);var t=e.h*BNe;return new zp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}TS(mg,n5,GR(l1,{brighter(e){return new mg(this.h,this.c,this.l+e5*(e??1),this.opacity)},darker(e){return new mg(this.h,this.c,this.l-e5*(e??1),this.opacity)},rgb(){return YNe(this).rgb()}}));var KNe=-.14861,Jte=1.78277,Zte=-.29227,HL=-.90649,iI=1.97294,Lge=iI*HL,jge=iI*Jte,Bge=Jte*Zte-HL*KNe;function APt(e){if(e instanceof Wb)return new Wb(e.h,e.s,e.l,e.opacity);e instanceof pa||(e=Qte(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Bge*r+Lge*t-jge*n)/(Bge+Lge-jge),s=r-i,o=(iI*(n-i)-Zte*s)/HL,a=Math.sqrt(o*o+s*s)/(iI*i*(1-i)),l=a?Math.atan2(o,s)*zNe-120:NaN;return new Wb(l<0?l+360:l,a,i,e.opacity)}function mY(e,t,n,r){return arguments.length===1?APt(e):new Wb(e,t,n,r??1)}function Wb(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}TS(Wb,mY,GR(l1,{brighter(e){return e=e==null?rC:Math.pow(rC,e),new Wb(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?fw:Math.pow(fw,e),new Wb(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*BNe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new pa(255*(t+n*(KNe*r+Jte*i)),255*(t+n*(Zte*r+HL*i)),255*(t+n*(iI*r)),this.opacity)}}));function XNe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function QNe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return XNe((n-r/t)*t,o,i,s,a)}}function JNe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return XNe((n-r/t)*t,i,s,o,a)}}const qL=e=>()=>e;function ZNe(e,t){return function(n){return e+n*t}}function kPt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function WL(e,t){var n=t-e;return n?ZNe(e,n>180||n<-180?n-360*Math.round(n/360):n):qL(isNaN(e)?t:e)}function IPt(e){return(e=+e)==1?ma:function(t,n){return n-t?kPt(t,n,e):qL(isNaN(t)?n:t)}}function ma(e,t){var n=t-e;return n?ZNe(e,n):qL(isNaN(e)?t:e)}const sI=(function e(t){var n=IPt(t);function r(i,s){var o=n((i=Tv(i)).r,(s=Tv(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=ma(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r})(1);function e4e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Tv(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var RPt=e4e(QNe),DPt=e4e(JNe);function ene(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function t4e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function PPt(e,t){return(t4e(t)?ene:n4e)(e,t)}function n4e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=A0(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function r4e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function i4e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=A0(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var gY=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xV=new RegExp(gY.source,"g");function OPt(e){return function(){return e}}function NPt(e){return function(t){return e(t)+""}}function tne(e,t){var n=gY.lastIndex=xV.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=gY.exec(e))&&(i=xV.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:kd(r,i)})),n=xV.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?NPt(l[0].x):OPt(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function A0(e,t){var n=typeof t,r;return t==null||n==="boolean"?qL(t):(n==="number"?kd:n==="string"?(r=hw(t))?(t=r,sI):tne:t instanceof hw?sI:t instanceof Date?r4e:t4e(t)?ene:Array.isArray(t)?n4e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?i4e:kd)(e,t)}function MPt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function $Pt(e,t){var n=WL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function YR(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var zge=180/Math.PI,yY={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function s4e(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*zge,skewX:Math.atan(l)*zge,scaleX:o,scaleY:a}}var U3;function FPt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?yY:s4e(t.a,t.b,t.c,t.d,t.e,t.f)}function LPt(e){return e==null||(U3||(U3=document.createElementNS("http://www.w3.org/2000/svg","g")),U3.setAttribute("transform",e),!(e=U3.transform.baseVal.consolidate()))?yY:(e=e.matrix,s4e(e.a,e.b,e.c,e.d,e.e,e.f))}function o4e(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:kd(u,d)},{i:m-2,x:kd(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:kd(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:kd(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:kd(u,d)},{i:m-2,x:kd(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var p=-1,m=f.length,g;++p<m;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var a4e=o4e(FPt,"px, ","px)","deg)"),l4e=o4e(LPt,", ",")",")"),jPt=1e-12;function Vge(e){return((e=Math.exp(e))+1/e)/2}function BPt(e){return((e=Math.exp(e))-1/e)/2}function zPt(e){return((e=Math.exp(2*e))-1)/(e+1)}const VPt=(function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-l,m=h*h+p*p,g,y;if(m<jPt)y=Math.log(f/u)/t,g=function(T){return[a+T*h,l+T*p,u*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(f*f-u*u+r*m)/(2*u*n*v),_=(f*f-u*u-r*m)/(2*f*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(_*_+1)-_);y=(S-E)/t,g=function(T){var A=T*y,R=Vge(E),I=u/(n*v)*(R*zPt(t*A+E)-BPt(E));return[a+I*h,l+I*p,u*R/Vge(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i})(Math.SQRT2,2,4);function u4e(e){return function(t,n){var r=e((t=rI(t)).h,(n=rI(n)).h),i=ma(t.s,n.s),s=ma(t.l,n.l),o=ma(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const UPt=u4e(WL);var HPt=u4e(ma);function qPt(e,t){var n=ma((e=t5(e)).l,(t=t5(t)).l),r=ma(e.a,t.a),i=ma(e.b,t.b),s=ma(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function c4e(e){return function(t,n){var r=e((t=n5(t)).h,(n=n5(n)).h),i=ma(t.c,n.c),s=ma(t.l,n.l),o=ma(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const WPt=c4e(WL);var GPt=c4e(ma);function d4e(e){return(function t(n){n=+n;function r(i,s){var o=e((i=mY(i)).h,(s=mY(s)).h),a=ma(i.s,s.s),l=ma(i.l,s.l),u=ma(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r})(1)}const YPt=d4e(WL);var KPt=d4e(ma);function nne(e,t){t===void 0&&(t=e,e=A0);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function XPt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const QPt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:A0,interpolateArray:PPt,interpolateBasis:QNe,interpolateBasisClosed:JNe,interpolateCubehelix:YPt,interpolateCubehelixLong:KPt,interpolateDate:r4e,interpolateDiscrete:MPt,interpolateHcl:WPt,interpolateHclLong:GPt,interpolateHsl:UPt,interpolateHslLong:HPt,interpolateHue:$Pt,interpolateLab:qPt,interpolateNumber:kd,interpolateNumberArray:ene,interpolateObject:i4e,interpolateRgb:sI,interpolateRgbBasis:RPt,interpolateRgbBasisClosed:DPt,interpolateRound:YR,interpolateString:tne,interpolateTransformCss:a4e,interpolateTransformSvg:l4e,interpolateZoom:VPt,piecewise:nne,quantize:XPt},Symbol.toStringTag,{value:"Module"}));var iC=0,eA=0,r2=0,f4e=1e3,r5,tA,i5=0,pw=0,GL=0,oI=typeof performance=="object"&&performance.now?performance:Date,h4e=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function YL(){return pw||(h4e(JPt),pw=oI.now()+GL)}function JPt(){pw=0}function aI(){this._call=this._time=this._next=null}aI.prototype=rne.prototype={constructor:aI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?YL():+n)+(t==null?0:+t),!this._next&&tA!==this&&(tA?tA._next=this:r5=this,tA=this),this._call=e,this._time=n,vY()},stop:function(){this._call&&(this._call=null,this._time=1/0,vY())}};function rne(e,t,n){var r=new aI;return r.restart(e,t,n),r}function ZPt(){YL(),++iC;for(var e=r5,t;e;)(t=pw-e._time)>=0&&e._call.call(void 0,t),e=e._next;--iC}function Uge(){pw=(i5=oI.now())+GL,iC=eA=0;try{ZPt()}finally{iC=0,t3t(),pw=0}}function e3t(){var e=oI.now(),t=e-i5;t>f4e&&(GL-=t,i5=e)}function t3t(){for(var e,t=r5,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:r5=n);tA=e,vY(r)}function vY(e){if(!iC){eA&&(eA=clearTimeout(eA));var t=e-pw;t>24?(e<1/0&&(eA=setTimeout(Uge,e-oI.now()-GL)),r2&&(r2=clearInterval(r2))):(r2||(i5=oI.now(),r2=setInterval(e3t,f4e)),iC=1,h4e(Uge))}}function Hge(e,t,n){var r=new aI;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function n3t(e,t,n){var r=new aI,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?YL():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}var r3t=VL("start","end","cancel","interrupt"),i3t=[],p4e=0,qge=1,bY=2,m4=3,Wge=4,wY=5,g4=6;function KL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;s3t(e,n,{name:t,index:r,group:i,on:r3t,tween:i3t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:p4e})}function ine(e,t){var n=Ph(e,t);if(n.state>p4e)throw new Error("too late; already scheduled");return n}function Cm(e,t){var n=Ph(e,t);if(n.state>m4)throw new Error("too late; already running");return n}function Ph(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function s3t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=rne(s,0,n.time);function s(u){n.state=qge,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,d,f,h;if(n.state!==qge)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===m4)return Hge(o);h.state===Wge?(h.state=g4,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=g4,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Hge(function(){n.state===m4&&(n.state=Wge,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=bY,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bY){for(n.state=m4,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=wY,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===wY&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=g4,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function xY(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>bY&&r.state<wY,r.state=g4,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function o3t(e){return this.each(function(){xY(this,e)})}function a3t(e,t){var n,r;return function(){var i=Cm(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function l3t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Cm(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}s.tween=i}}function u3t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ph(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?a3t:l3t)(n,e,t))}function sne(e,t,n){var r=e._id;return e.each(function(){var i=Cm(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ph(i,r).value[t]}}function m4e(e,t){var n;return(typeof t=="number"?kd:t instanceof hw?sI:(n=hw(t))?(t=n,sI):tne)(e,t)}function c3t(e){return function(){this.removeAttribute(e)}}function d3t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function f3t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function h3t(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function p3t(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function m3t(e,t,n){var r,i,s;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a)))}}function g3t(e,t){var n=UL(e),r=n==="transform"?l4e:m4e;return this.attrTween(e,typeof t=="function"?(n.local?m3t:p3t)(n,r,sne(this,"attr."+e,t)):t==null?(n.local?d3t:c3t)(n):(n.local?h3t:f3t)(n,r,t))}function y3t(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function v3t(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function b3t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&v3t(e,s)),n}return i._value=t,i}function w3t(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&y3t(e,s)),n}return i._value=t,i}function x3t(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=UL(e);return this.tween(n,(r.local?b3t:w3t)(r,t))}function _3t(e,t){return function(){ine(this,e).delay=+t.apply(this,arguments)}}function E3t(e,t){return t=+t,function(){ine(this,e).delay=t}}function C3t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_3t:E3t)(t,e)):Ph(this.node(),t).delay}function S3t(e,t){return function(){Cm(this,e).duration=+t.apply(this,arguments)}}function T3t(e,t){return t=+t,function(){Cm(this,e).duration=t}}function A3t(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?S3t:T3t)(t,e)):Ph(this.node(),t).duration}function k3t(e,t){if(typeof t!="function")throw new Error;return function(){Cm(this,e).ease=t}}function I3t(e){var t=this._id;return arguments.length?this.each(k3t(t,e)):Ph(this.node(),t).ease}function R3t(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Cm(this,e).ease=n}}function D3t(e){if(typeof e!="function")throw new Error;return this.each(R3t(this._id,e))}function P3t(e){typeof e!="function"&&(e=RNe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],l,u=0;u<o;++u)(l=s[u])&&e.call(l,l.__data__,u,s)&&a.push(l);return new Zg(r,this._parents,this._name,this._id)}function O3t(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],u=n[a],c=l.length,d=o[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<r;++a)o[a]=t[a];return new Zg(o,this._parents,this._name,this._id)}function N3t(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function M3t(e,t,n){var r,i,s=N3t(t)?ine:Cm;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function $3t(e,t){var n=this._id;return arguments.length<2?Ph(this.node(),n).on.on(e):this.each(M3t(n,e,t))}function F3t(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function L3t(){return this.on("end.remove",F3t(this._id))}function j3t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yte(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],l=a.length,u=s[o]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,KL(u[f],t,n,f,u,Ph(c,n)));return new Zg(s,this._parents,t,n)}function B3t(e){var t=this._name,n=this._id;typeof e!="function"&&(e=INe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,p=Ph(c,n),m=0,g=f.length;m<g;++m)(h=f[m])&&KL(h,t,n,m,f,p);s.push(f),o.push(c)}return new Zg(s,o,t,n)}var z3t=WR.prototype.constructor;function V3t(){return new z3t(this._groups,this._parents)}function U3t(e,t){var n,r,i;return function(){var s=nC(this,e),o=(this.style.removeProperty(e),nC(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function g4e(e){return function(){this.style.removeProperty(e)}}function H3t(e,t,n){var r,i=n+"",s;return function(){var o=nC(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function q3t(e,t,n){var r,i,s;return function(){var o=nC(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),nC(this,e))),o===l?null:o===r&&l===i?s:(i=l,s=t(r=o,a))}}function W3t(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var l=Cm(this,e),u=l.on,c=l.value[s]==null?a||(a=g4e(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function G3t(e,t,n){var r=(e+="")=="transform"?a4e:m4e;return t==null?this.styleTween(e,U3t(e,r)).on("end.style."+e,g4e(e)):typeof t=="function"?this.styleTween(e,q3t(e,r,sne(this,"style."+e,t))).each(W3t(this._id,e)):this.styleTween(e,H3t(e,r,t),n).on("end.style."+e,null)}function Y3t(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function K3t(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Y3t(e,o,n)),r}return s._value=t,s}function X3t(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,K3t(e,t,n??""))}function Q3t(e){return function(){this.textContent=e}}function J3t(e){return function(){var t=e(this);this.textContent=t??""}}function Z3t(e){return this.tween("text",typeof e=="function"?J3t(sne(this,"text",e)):Q3t(e==null?"":e+""))}function eOt(e){return function(t){this.textContent=e.call(this,t)}}function tOt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&eOt(i)),t}return r._value=e,r}function nOt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,tOt(e))}function rOt(){for(var e=this._name,t=this._id,n=y4e(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=Ph(l,t);KL(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Zg(r,this._parents,e,n)}function iOt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},l={value:function(){--i===0&&s()}};n.each(function(){var u=Cm(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&s()})}var sOt=0;function Zg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function y4e(){return++sOt}var Km=WR.prototype;Zg.prototype={constructor:Zg,select:j3t,selectAll:B3t,selectChild:Km.selectChild,selectChildren:Km.selectChildren,filter:P3t,merge:O3t,selection:V3t,transition:rOt,call:Km.call,nodes:Km.nodes,node:Km.node,size:Km.size,empty:Km.empty,each:Km.each,on:$3t,attr:g3t,attrTween:x3t,style:G3t,styleTween:X3t,text:Z3t,textTween:nOt,remove:L3t,tween:u3t,delay:C3t,duration:A3t,ease:I3t,easeVarying:D3t,end:iOt,[Symbol.iterator]:Km[Symbol.iterator]};function oOt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var aOt={time:null,delay:0,duration:250,ease:oOt};function lOt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function uOt(e){var t,n;e instanceof Zg?(t=e._id,e=e._name):(t=y4e(),(n=aOt).time=YL(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,l,u=0;u<a;++u)(l=o[u])&&KL(l,e,t,u,o,n||lOt(l,t));return new Zg(r,this._parents,e,t)}WR.prototype.interrupt=o3t;WR.prototype.transition=uOt;const _V=e=>()=>e;function cOt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function dOt(e){e.stopImmediatePropagation()}function EV(e){e.preventDefault(),e.stopImmediatePropagation()}var Gge={name:"drag"},CV={name:"space"},h_={name:"handle"},p_={name:"center"};const{abs:Yge,max:ol,min:al}=Math;function Kge(e){return[+e[0],+e[1]]}function _Y(e){return[Kge(e[0]),Kge(e[1])]}var y4={name:"x",handles:["w","e"].map(lI),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},v4={name:"y",handles:["n","s"].map(lI),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},fOt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(lI),input:function(e){return e==null?null:_Y(e)},output:function(e){return e}},Xm={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Xge={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Qge={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},hOt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},pOt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function lI(e){return{type:e}}function mOt(e){return!e.ctrlKey&&!e.button}function gOt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function yOt(){return navigator.maxTouchPoints||"ontouchstart"in this}function SV(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function vOt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function bOt(){return one(y4)}function wOt(){return one(v4)}function xOt(){return one(fOt)}function one(e){var t=gOt,n=mOt,r=yOt,i=!0,s=VL("start","brush","end"),o=6,a;function l(g){var y=g.property("__brush",m).selectAll(".overlay").data([lI("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Xm.overlay).merge(y).each(function(){var b=SV(this).extent;Lo(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([lI("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Xm.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return Xm[b.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,_=b.__brush,E=c(b,arguments),S=_.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,_.extent),A=A0(S,T);function R(I){_.selection=I===1&&T===null?null:A(I),u.call(b),E.brush()}return S!==null&&T!==null?R:R(1)}):g.each(function(){var b=this,_=arguments,E=b.__brush,S=e.input(typeof y=="function"?y.apply(b,_):y,E.extent),T=c(b,_).beforestart();xY(b),E.selection=S===null?null:S,u.call(b),T.start(v).brush(v).end(v)})},l.clear=function(g,y){l.move(g,null,y)};function u(){var g=Lo(this),y=SV(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new d(g,y,v)}function d(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}d.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=Lo(this.that).datum();s.call(g,this.that,new cOt(g,{sourceEvent:y,target:l,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function f(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?Gge:i&&g.altKey?p_:h_,_=e===v4?null:hOt[v],E=e===y4?null:pOt[v],S=SV(y),T=S.extent,A=S.selection,R=T[0][0],I,P,N=T[0][1],M,O,j=T[1][0],B,H,q=T[1][1],G,U,L=0,z=0,V,Y=_&&E&&i&&g.shiftKey,Q,ne,ue=Array.from(g.touches||[g],te=>{const ee=te.identifier;return te=Ige(te,y),te.point0=te.slice(),te.identifier=ee,te});xY(y);var se=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(V=!0);const te=[ue[0],ue[1]||ue[0]];S.selection=A=[[I=e===v4?R:al(te[0][0],te[1][0]),M=e===y4?N:al(te[0][1],te[1][1])],[B=e===v4?j:ol(te[0][0],te[1][0]),G=e===y4?q:ol(te[0][1],te[1][1])]],ue.length>1&&Ce(g)}else I=A[0][0],M=A[0][1],B=A[1][0],G=A[1][1];P=I,O=M,H=B,U=G;var ae=Lo(y).attr("pointer-events","none"),he=ae.selectAll(".overlay").attr("cursor",Xm[v]);if(g.touches)se.moved=le,se.ended=X;else{var ie=Lo(g.view).on("mousemove.brush",le,!0).on("mouseup.brush",X,!0);i&&ie.on("keydown.brush",fe,!0).on("keyup.brush",de,!0),hPt(g.view)}u.call(y),se.start(g,b.name);function le(te){for(const ee of te.changedTouches||[te])for(const me of ue)me.identifier===ee.identifier&&(me.cur=Ige(ee,y));if(Y&&!Q&&!ne&&ue.length===1){const ee=ue[0];Yge(ee.cur[0]-ee[0])>Yge(ee.cur[1]-ee[1])?ne=!0:Q=!0}for(const ee of ue)ee.cur&&(ee[0]=ee.cur[0],ee[1]=ee.cur[1]);V=!0,EV(te),Ce(te)}function Ce(te){const ee=ue[0],me=ee.point0;var Ie;switch(L=ee[0]-me[0],z=ee[1]-me[1],b){case CV:case Gge:{_&&(L=ol(R-I,al(j-B,L)),P=I+L,H=B+L),E&&(z=ol(N-M,al(q-G,z)),O=M+z,U=G+z);break}case h_:{ue[1]?(_&&(P=ol(R,al(j,ue[0][0])),H=ol(R,al(j,ue[1][0])),_=1),E&&(O=ol(N,al(q,ue[0][1])),U=ol(N,al(q,ue[1][1])),E=1)):(_<0?(L=ol(R-I,al(j-I,L)),P=I+L,H=B):_>0&&(L=ol(R-B,al(j-B,L)),P=I,H=B+L),E<0?(z=ol(N-M,al(q-M,z)),O=M+z,U=G):E>0&&(z=ol(N-G,al(q-G,z)),O=M,U=G+z));break}case p_:{_&&(P=ol(R,al(j,I-L*_)),H=ol(R,al(j,B+L*_))),E&&(O=ol(N,al(q,M-z*E)),U=ol(N,al(q,G+z*E)));break}}H<P&&(_*=-1,Ie=I,I=B,B=Ie,Ie=P,P=H,H=Ie,v in Xge&&he.attr("cursor",Xm[v=Xge[v]])),U<O&&(E*=-1,Ie=M,M=G,G=Ie,Ie=O,O=U,U=Ie,v in Qge&&he.attr("cursor",Xm[v=Qge[v]])),S.selection&&(A=S.selection),Q&&(P=A[0][0],H=A[1][0]),ne&&(O=A[0][1],U=A[1][1]),(A[0][0]!==P||A[0][1]!==O||A[1][0]!==H||A[1][1]!==U)&&(S.selection=[[P,O],[H,U]],u.call(y),se.brush(te,b.name))}function X(te){if(dOt(te),te.touches){if(te.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else pPt(te.view,V),ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ae.attr("pointer-events","all"),he.attr("cursor",Xm.overlay),S.selection&&(A=S.selection),vOt(A)&&(S.selection=null,u.call(y)),se.end(te,b.name)}function fe(te){switch(te.keyCode){case 16:{Y=_&&E;break}case 18:{b===h_&&(_&&(B=H-L*_,I=P+L*_),E&&(G=U-z*E,M=O+z*E),b=p_,Ce(te));break}case 32:{(b===h_||b===p_)&&(_<0?B=H-L:_>0&&(I=P-L),E<0?G=U-z:E>0&&(M=O-z),b=CV,he.attr("cursor",Xm.selection),Ce(te));break}default:return}EV(te)}function de(te){switch(te.keyCode){case 16:{Y&&(Q=ne=Y=!1,Ce(te));break}case 18:{b===p_&&(_<0?B=H:_>0&&(I=P),E<0?G=U:E>0&&(M=O),b=h_,Ce(te));break}case 32:{b===CV&&(te.altKey?(_&&(B=H-L*_,I=P+L*_),E&&(G=U-z*E,M=O+z*E),b=p_):(_<0?B=H:_>0&&(I=P),E<0?G=U:E>0&&(M=O),b=h_),he.attr("cursor",Xm[v]),Ce(te));break}default:return}EV(te)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=_Y(t.apply(this,arguments)),g.dim=e,g}return l.extent=function(g){return arguments.length?(t=typeof g=="function"?g:_V(_Y(g)),l):t},l.filter=function(g){return arguments.length?(n=typeof g=="function"?g:_V(!!g),l):n},l.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:_V(!!g),l):r},l.handleSize=function(g){return arguments.length?(o=+g,l):o},l.keyModifiers=function(g){return arguments.length?(i=!!g,l):i},l.on=function(){var g=s.on.apply(s,arguments);return g===s?l:g},l}const EY=Math.PI,CY=2*EY,pb=1e-6,_Ot=CY-pb;function v4e(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function EOt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return v4e;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let ane=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?v4e:EOt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,c=o-t,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>pb)if(!(Math.abs(d*l-u*c)>pb)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(f),b=s*Math.tan((EY-Math.acos((m+f-g)/(2*y*v)))/2),_=b/v,E=b/y;Math.abs(_-1)>pb&&this._append`L${t+_*c},${n+_*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=t+E*l},${this._y1=n+E*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>pb||Math.abs(this._y1-c)>pb)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%CY+CY),f>_Ot?this._append`A${r},${r},0,1,${d},${t-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>pb&&this._append`A${r},${r},0,${+(f>=EY)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function XL(){return new ane}XL.prototype=ane.prototype;const Dg=11102230246251565e-32,ll=134217729,COt=(3+8*Dg)*Dg;function TV(e,t,n,r,i){let s,o,a,l,u=t[0],c=r[0],d=0,f=0;c>u==c>-u?(s=u,u=t[++d]):(s=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=t[++d]):(o=c+s,a=s-(o-c),c=r[++f]),s=o,a!==0&&(i[h++]=a);d<e&&f<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f]),s=o,a!==0&&(i[h++]=a);for(;d<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function SOt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function KR(e){return new Float64Array(e)}const TOt=(3+16*Dg)*Dg,AOt=(2+12*Dg)*Dg,kOt=(9+64*Dg)*Dg*Dg,m_=KR(4),Jge=KR(8),Zge=KR(12),e0e=KR(16),Hl=KR(4);function IOt(e,t,n,r,i,s,o){let a,l,u,c,d,f,h,p,m,g,y,v,b,_,E,S,T,A;const R=e-i,I=n-i,P=t-s,N=r-s;_=R*N,f=ll*R,h=f-(f-R),p=R-h,f=ll*N,m=f-(f-N),g=N-m,E=p*g-(_-h*m-p*m-h*g),S=P*I,f=ll*P,h=f-(f-P),p=P-h,f=ll*I,m=f-(f-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,d=E-y,m_[0]=E-(y+d)+(d-T),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-S,d=b-y,m_[1]=b-(y+d)+(d-S),A=v+y,d=A-v,m_[2]=v-(A-d)+(y-d),m_[3]=A;let M=SOt(4,m_),O=AOt*o;if(M>=O||-M>=O||(d=e-R,a=e-(R+d)+(d-i),d=n-I,u=n-(I+d)+(d-i),d=t-P,l=t-(P+d)+(d-s),d=r-N,c=r-(N+d)+(d-s),a===0&&l===0&&u===0&&c===0)||(O=kOt*o+COt*Math.abs(M),M+=R*c+N*a-(P*u+I*l),M>=O||-M>=O))return M;_=a*N,f=ll*a,h=f-(f-a),p=a-h,f=ll*N,m=f-(f-N),g=N-m,E=p*g-(_-h*m-p*m-h*g),S=l*I,f=ll*l,h=f-(f-l),p=l-h,f=ll*I,m=f-(f-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,d=E-y,Hl[0]=E-(y+d)+(d-T),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-S,d=b-y,Hl[1]=b-(y+d)+(d-S),A=v+y,d=A-v,Hl[2]=v-(A-d)+(y-d),Hl[3]=A;const j=TV(4,m_,4,Hl,Jge);_=R*c,f=ll*R,h=f-(f-R),p=R-h,f=ll*c,m=f-(f-c),g=c-m,E=p*g-(_-h*m-p*m-h*g),S=P*u,f=ll*P,h=f-(f-P),p=P-h,f=ll*u,m=f-(f-u),g=u-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,d=E-y,Hl[0]=E-(y+d)+(d-T),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-S,d=b-y,Hl[1]=b-(y+d)+(d-S),A=v+y,d=A-v,Hl[2]=v-(A-d)+(y-d),Hl[3]=A;const B=TV(j,Jge,4,Hl,Zge);_=a*c,f=ll*a,h=f-(f-a),p=a-h,f=ll*c,m=f-(f-c),g=c-m,E=p*g-(_-h*m-p*m-h*g),S=l*u,f=ll*l,h=f-(f-l),p=l-h,f=ll*u,m=f-(f-u),g=u-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,d=E-y,Hl[0]=E-(y+d)+(d-T),v=_+y,d=v-_,b=_-(v-d)+(y-d),y=b-S,d=b-y,Hl[1]=b-(y+d)+(d-S),A=v+y,d=A-v,Hl[2]=v-(A-d)+(y-d),Hl[3]=A;const H=TV(B,Zge,4,Hl,e0e);return e0e[H-1]}function H3(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=TOt*u?l:-IOt(e,t,n,r,i,s,u)}const t0e=Math.pow(2,-52),q3=new Uint32Array(512);class s5{static from(t,n=NOt,r=MOt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new s5(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let R=0;R<o;R++){const I=t[2*R],P=t[2*R+1];I<a&&(a=I),P<l&&(l=P),I>u&&(u=I),P>c&&(c=P),this._ids[R]=R}const d=(a+u)/2,f=(l+c)/2;let h,p,m;for(let R=0,I=1/0;R<o;R++){const P=AV(d,f,t[2*R],t[2*R+1]);P<I&&(h=R,I=P)}const g=t[2*h],y=t[2*h+1];for(let R=0,I=1/0;R<o;R++){if(R===h)continue;const P=AV(g,y,t[2*R],t[2*R+1]);P<I&&P>0&&(p=R,I=P)}let v=t[2*p],b=t[2*p+1],_=1/0;for(let R=0;R<o;R++){if(R===h||R===p)continue;const I=POt(g,y,v,b,t[2*R],t[2*R+1]);I<_&&(m=R,_=I)}let E=t[2*m],S=t[2*m+1];if(_===1/0){for(let P=0;P<o;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];eE(this._ids,this._dists,0,o-1);const R=new Uint32Array(o);let I=0;for(let P=0,N=-1/0;P<o;P++){const M=this._ids[P],O=this._dists[M];O>N&&(R[I++]=M,N=O)}this.hull=R.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(H3(g,y,v,b,E,S)<0){const R=p,I=v,P=b;p=m,v=E,b=S,m=R,E=I,S=P}const T=OOt(g,y,v,b,E,S);this._cx=T.x,this._cy=T.y;for(let R=0;R<o;R++)this._dists[R]=AV(t[2*R],t[2*R+1],T.x,T.y);eE(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let R=0,I,P;R<this._ids.length;R++){const N=this._ids[R],M=t[2*N],O=t[2*N+1];if(R>0&&Math.abs(M-I)<=t0e&&Math.abs(O-P)<=t0e||(I=M,P=O,N===h||N===p||N===m))continue;let j=0;for(let U=0,L=this._hashKey(M,O);U<this._hashSize&&(j=s[(L+U)%this._hashSize],!(j!==-1&&j!==r[j]));U++);j=n[j];let B=j,H;for(;H=r[B],H3(M,O,t[2*B],t[2*B+1],t[2*H],t[2*H+1])>=0;)if(B=H,B===j){B=-1;break}if(B===-1)continue;let q=this._addTriangle(B,N,r[B],-1,-1,i[B]);i[N]=this._legalize(q+2),i[B]=q,A++;let G=r[B];for(;H=r[G],H3(M,O,t[2*G],t[2*G+1],t[2*H],t[2*H+1])<0;)q=this._addTriangle(G,N,H,i[N],-1,i[G]),i[N]=this._legalize(q+2),r[G]=G,A--,G=H;if(B===j)for(;H=n[B],H3(M,O,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)q=this._addTriangle(H,N,B,-1,i[B],i[H]),this._legalize(q+2),i[H]=q,r[B]=B,A--,B=H;this._hullStart=n[N]=B,r[B]=n[G]=N,r[N]=G,s[this._hashKey(M,O)]=N,s[this._hashKey(t[2*B],t[2*B+1])]=B}this.hull=new Uint32Array(A);for(let R=0,I=this._hullStart;R<A;R++)this.hull[R]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(ROt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=q3[--s];continue}const u=a-a%3,c=l+(t+1)%3,d=u+(a+2)%3,f=n[o],h=n[t],p=n[c],m=n[d];if(DOt(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=f;const y=r[d];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===d){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,d);const v=u+(a+1)%3;s<q3.length&&(q3[s++]=v)}else{if(s===0)break;t=q3[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function ROt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function AV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function DOt(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,c=n-o,d=r-a,f=i-o,h=s-a,p=l*l+u*u,m=c*c+d*d,g=f*f+h*h;return l*(d*g-m*h)-u*(c*g-m*f)+p*(c*h-d*f)<0}function POt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=(u*c-a*d)*f,p=(o*d-l*c)*f;return h*h+p*p}function OOt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=e+(u*c-a*d)*f,p=t+(o*d-l*c)*f;return{x:h,y:p}}function eE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;i2(e,i,s),t[e[n]]>t[e[r]]&&i2(e,n,r),t[e[s]]>t[e[r]]&&i2(e,s,r),t[e[n]]>t[e[s]]&&i2(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;i2(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(eE(e,t,s,r),eE(e,t,n,o-1)):(eE(e,t,n,o-1),eE(e,t,s,r))}}function i2(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function NOt(e){return e[0]}function MOt(e){return e[1]}const n0e=1e-6;class Nb{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>n0e||Math.abs(this._y1-s)>n0e)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class SY{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let $Ot=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const _=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[_],A=t[_+1],R=t[E],I=t[E+1],P=t[S],N=t[S+1],M=R-T,O=I-A,j=P-T,B=N-A,H=(M*B-O*j)*2;if(Math.abs(H)<1e-9){if(s===void 0){s=o=0;for(const G of n)s+=t[G*2],o+=t[G*2+1];s/=n.length,o/=n.length}const q=1e9*Math.sign((s-T)*B-(o-A)*j);v=(T+P)/2-q*B,b=(A+N)/2+q*j}else{const q=1/H,G=M*M+O*O,U=j*j+B*B;v=T+(B*G-O*U)*q,b=A+(M*U-j*G)*q}a[g]=v,a[g+1]=b}let l=n[n.length-1],u,c=l*4,d,f=t[2*l],h,p=t[2*l+1];i.fill(0);for(let m=0;m<n.length;++m)l=n[m],u=c,d=f,h=p,c=l*4,f=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=f-d}render(t){const n=t==null?t=new Nb:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=r.length;c<d;++c){const f=r[c];if(f<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(f/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const d=Math.floor(i[u]/3)*2,f=o[d],h=o[d+1],p=l*4,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Nb:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Nb:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new SY;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),d,f=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)d=f,f=0,i?i.push(a,l):i=[a,l];else{let p,m,g,y,v;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[y,v,m,g]=p,d=f,f=this._edgecode(m,g),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(m,g):i=[m,g]}d=f,f=this._edgecode(y,v),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(y,v):i=[y,v]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(t,d,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,c=s||o;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,d,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const FOt=2*Math.PI,g_=Math.pow;function LOt(e){return e[0]}function jOt(e){return e[1]}function BOt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function zOt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class lne{static from(t,n=LOt,r=jOt,i){return new lne("length"in t?VOt(t,n,r,i):Float64Array.from(UOt(t,n,r,i)))}constructor(t){this._delaunator=new s5(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&BOt(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=zOt(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new s5(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new $Ot(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=g_(n-u[t*2],2)+g_(r-u[t*2+1],2);const f=i[t];let h=f;do{let p=l[h];const m=g_(n-u[p*2],2)+g_(r-u[p*2+1],2);if(m<d&&(d=m,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&g_(n-u[h*2],2)+g_(r-u[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new Nb:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Nb:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,FOt)}return r&&r.value()}renderHull(t){const n=t==null?t=new Nb:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new SY;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Nb:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new SY;return this.renderTriangle(t,n),n.value()}}function VOt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*UOt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var r0e={},kV={},IV=34,s2=10,RV=13;function b4e(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function HOt(e,t){var n=b4e(e);return function(r,i){return t(n(r),i,e)}}function i0e(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Bu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function qOt(e){return e<0?"-"+Bu(-e,6):e>9999?"+"+Bu(e,6):Bu(e,4)}function WOt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":qOt(e.getUTCFullYear())+"-"+Bu(e.getUTCMonth()+1,2)+"-"+Bu(e.getUTCDate(),2)+(i?"T"+Bu(t,2)+":"+Bu(n,2)+":"+Bu(r,2)+"."+Bu(i,3)+"Z":r?"T"+Bu(t,2)+":"+Bu(n,2)+":"+Bu(r,2)+"Z":n||t?"T"+Bu(t,2)+":"+Bu(n,2)+"Z":"")}function w4e(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,p,m=i(d,function(g,y){if(h)return h(g,y-1);p=g,h=f?HOt(g,f):b4e(g)});return m.columns=p||[],m}function i(d,f){var h=[],p=d.length,m=0,g=0,y,v=p<=0,b=!1;d.charCodeAt(p-1)===s2&&--p,d.charCodeAt(p-1)===RV&&--p;function _(){if(v)return kV;if(b)return b=!1,r0e;var S,T=m,A;if(d.charCodeAt(T)===IV){for(;m++<p&&d.charCodeAt(m)!==IV||d.charCodeAt(++m)===IV;);return(S=m)>=p?v=!0:(A=d.charCodeAt(m++))===s2?b=!0:A===RV&&(b=!0,d.charCodeAt(m)===s2&&++m),d.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=d.charCodeAt(S=m++))===s2)b=!0;else if(A===RV)b=!0,d.charCodeAt(m)===s2&&++m;else if(A!==n)continue;return d.slice(T,S)}return v=!0,d.slice(T,p)}for(;(y=_())!==kV;){for(var E=[];y!==r0e&&y!==kV;)E.push(y),y=_();f&&(E=f(E,g++))==null||h.push(E)}return h}function s(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function o(d,f){return f==null&&(f=i0e(d)),[f.map(c).join(e)].concat(s(d,f)).join(`
`)}function a(d,f){return f==null&&(f=i0e(d)),s(d,f).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?WOt(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}var GOt=w4e(","),YOt=GOt.parse;function KOt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function XOt(e,t){return fetch(e,t).then(KOt)}function QOt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),XOt(t,n).then(function(i){return e(i,r)})}}var JOt=QOt(YOt);function ZOt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function eNt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return x4e(this.cover(t,n),t,n,e)}function x4e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,d,f,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f;while((y=g<<1|m)===(v=(p>=f)<<1|h>=d));return i[v]=s,i[y]=o,e}function tNt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>d&&(d=s));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<r;++n)x4e(this,o[n],a[n],e[n]);return this}function nNt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function rNt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function iNt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ru(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function sNt(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,c=this._x1,d=this._y1,f=[],h=this._root,p,m;for(h&&f.push(new ru(h,i,s,c,d)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>d||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var g=(o+l)/2,y=(a+u)/2;f.push(new ru(h[3],g,y,l,u),new ru(h[2],o,y,g,u),new ru(h[1],g,a,l,y),new ru(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),_=v*v+b*b;if(_<n){var E=Math.sqrt(n=_);i=e-E,s=t-E,c=e+E,d=t+E,r=h.data}}return r}function oNt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,d,f,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(o+l)/2))?o=f:l=f,(m=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function aNt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function lNt(){return this._root}function uNt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function cNt(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new ru(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(i=r[3])&&t.push(new ru(i,u,c,a,l)),(i=r[2])&&t.push(new ru(i,s,c,u,l)),(i=r[1])&&t.push(new ru(i,u,o,a,c)),(i=r[0])&&t.push(new ru(i,s,o,u,c))}return this}function dNt(e){var t=[],n=[],r;for(this._root&&t.push(new ru(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,d=(a+u)/2;(s=i[0])&&t.push(new ru(s,o,a,c,d)),(s=i[1])&&t.push(new ru(s,c,a,l,d)),(s=i[2])&&t.push(new ru(s,o,d,c,u)),(s=i[3])&&t.push(new ru(s,c,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function fNt(e){return e[0]}function hNt(e){return arguments.length?(this._x=e,this):this._x}function pNt(e){return e[1]}function mNt(e){return arguments.length?(this._y=e,this):this._y}function une(e,t,n){var r=new cne(t??fNt,n??pNt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function cne(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function s0e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var _u=une.prototype=cne.prototype;_u.copy=function(){var e=new cne(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=s0e(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=s0e(r));return e};_u.add=eNt;_u.addAll=tNt;_u.cover=nNt;_u.data=rNt;_u.extent=iNt;_u.find=sNt;_u.remove=oNt;_u.removeAll=aNt;_u.root=lNt;_u.size=uNt;_u.visit=cNt;_u.visitAfter=dNt;_u.x=hNt;_u.y=mNt;function su(e){return function(){return e}}function $y(e){return(e()-.5)*1e-6}function gNt(e){return e.x+e.vx}function yNt(e){return e.y+e.vy}function vNt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=su(e==null?1:+e));function o(){for(var u,c=t.length,d,f,h,p,m,g,y=0;y<s;++y)for(d=une(t,gNt,yNt).visitAfter(a),u=0;u<c;++u)f=t[u],m=n[f.index],g=m*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(v);function v(b,_,E,S,T){var A=b.data,R=b.r,I=m+R;if(A){if(A.index>f.index){var P=h-A.x-A.vx,N=p-A.y-A.vy,M=P*P+N*N;M<I*I&&(P===0&&(P=$y(r),M+=P*P),N===0&&(N=$y(r),M+=N*N),M=(I-(M=Math.sqrt(M)))/M*i,f.vx+=(P*=M)*(I=(R*=R)/(g+R)),f.vy+=(N*=M)*I,A.vx-=P*(I=1-I),A.vy-=N*I)}return}return _>h+I||S<h-I||E>p+I||T<p-I}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return o.initialize=function(u,c){t=u,r=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:su(+u),l(),o):e},o}function bNt(e){return e.index}function o0e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function wNt(e){var t=bNt,n=d,r,i=su(30),s,o,a,l,u,c=1;e==null&&(e=[]);function d(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function f(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,_,E,S,T,A,R,I;b<v;++b)_=e[b],E=_.source,S=_.target,T=S.x+S.vx-E.x-E.vx||$y(u),A=S.y+S.vy-E.y-E.vy||$y(u),R=Math.sqrt(T*T+A*A),R=(R-s[b])/R*g*r[b],T*=R,A*=R,S.vx-=T*(I=l[b]),S.vy-=A*I,E.vx+=T*(I=1-I),E.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),_;for(g=0,a=new Array(y);g<v;++g)_=e[g],_.index=g,typeof _.source!="object"&&(_.source=o0e(b,_.source)),typeof _.target!="object"&&(_.target=o0e(b,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(g=0,l=new Array(v);g<v;++g)_=e[g],l[g]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return f.initialize=function(g,y){o=g,u=y,h()},f.links=function(g){return arguments.length?(e=g,h(),f):e},f.id=function(g){return arguments.length?(t=g,f):t},f.iterations=function(g){return arguments.length?(c=+g,f):c},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:su(+g),p(),f):n},f.distance=function(g){return arguments.length?(i=typeof g=="function"?g:su(+g),m(),f):i},f}const xNt=1664525,_Nt=1013904223,a0e=4294967296;function ENt(){let e=1;return()=>(e=(xNt*e+_Nt)%a0e)/a0e}function CNt(e){return e.x}function SNt(e){return e.y}var TNt=10,ANt=Math.PI*(3-Math.sqrt(5));function kNt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=rne(d),u=VL("tick","end"),c=ENt();e==null&&(e=[]);function d(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(_){_(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=TNt*Math.sqrt(.5+m),b=m*ANt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,_,E,S,T,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],_=m-T.x,E=g-T.y,S=_*_+E*E,S<y&&(A=T,y=S);return A},on:function(m,g){return arguments.length>1?(u.on(m,g),t):u.on(m)}}}function INt(){var e,t,n,r,i=su(-30),s,o=1,a=1/0,l=.81;function u(h){var p,m=e.length,g=une(e,CNt,SNt).visitAfter(d);for(r=h,p=0;p<m;++p)t=e[p],g.visit(f)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function d(h){var p=0,m,g,y=0,v,b,_;if(h.length){for(v=b=_=0;_<4;++_)(m=h[_])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function f(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,_=y*y+v*v;if(b*b/l<_)return _<a&&(y===0&&(y=$y(n),_+=y*y),v===0&&(v=$y(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)),t.vx+=y*h.value*r/_,t.vy+=v*h.value*r/_),!0;if(h.length||_>=a)return;(h.data!==t||h.next)&&(y===0&&(y=$y(n),_+=y*y),v===0&&(v=$y(n),_+=v*v),_<o&&(_=Math.sqrt(o*_)));do h.data!==t&&(b=s[h.data.index]*r/_,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:su(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function RNt(e){var t=su(.1),n,r,i;typeof e!="function"&&(e=su(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:su(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:su(+a),o(),s):e},s}function DNt(e){var t=su(.1),n,r,i;typeof e!="function"&&(e=su(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:su(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:su(+a),o(),s):e},s}function PNt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function o5(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function sC(e){return e=o5(Math.abs(e)),e?e[1]:NaN}function ONt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function NNt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var MNt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mw(e){if(!(t=MNt.exec(e)))throw new Error("invalid format: "+e);var t;return new dne({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}mw.prototype=dne.prototype;function dne(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}dne.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $Nt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _4e;function FNt(e,t){var n=o5(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_4e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+o5(e,Math.max(0,t+s-1))[0]}function l0e(e,t){var n=o5(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const u0e={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:PNt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>l0e(e*100,t),r:l0e,s:FNt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function c0e(e){return e}var d0e=Array.prototype.map,f0e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E4e(e){var t=e.grouping===void 0||e.thousands===void 0?c0e:ONt(d0e.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?c0e:NNt(d0e.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=mw(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,y=d.width,v=d.comma,b=d.precision,_=d.trim,E=d.type;E==="n"?(v=!0,E="g"):u0e[E]||(b===void 0&&(b=12),_=!0,E="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",A=u0e[E],R=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(P){var N=S,M=T,O,j,B;if(E==="c")M=A(P)+M,P="";else{P=+P;var H=P<0||1/P<0;if(P=isNaN(P)?l:A(Math.abs(P),b),_&&(P=$Nt(P)),H&&+P==0&&p!=="+"&&(H=!1),N=(H?p==="("?p:a:p==="-"||p==="("?"":p)+N,M=(E==="s"?f0e[8+_4e/3]:"")+M+(H&&p==="("?")":""),R){for(O=-1,j=P.length;++O<j;)if(B=P.charCodeAt(O),48>B||B>57){M=(B===46?i+P.slice(O+1):P.slice(O))+M,P=P.slice(0,O);break}}}v&&!g&&(P=t(P,1/0));var q=N.length+P.length+M.length,G=q<y?new Array(y-q+1).join(f):"";switch(v&&g&&(P=t(G+P,G.length?y-M.length:1/0),G=""),h){case"<":P=N+P+M+G;break;case"=":P=N+G+P+M;break;case"^":P=G.slice(0,q=G.length>>1)+N+P+M+G.slice(q);break;default:P=G+N+P+M;break}return s(P)}return I.toString=function(){return d+""},I}function c(d,f){var h=u((d=mw(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(sC(f)/3)))*3,m=Math.pow(10,-p),g=f0e[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var W3,AS,fne;LNt({thousands:",",grouping:[3],currency:["$",""]});function LNt(e){return W3=E4e(e),AS=W3.format,fne=W3.formatPrefix,W3}function C4e(e){return Math.max(0,-sC(Math.abs(e)))}function S4e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(sC(t)/3)))*3-sC(Math.abs(e)))}function T4e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,sC(t)-sC(e))+1}var Dn=1e-6,a5=1e-12,Ar=Math.PI,Ls=Ar/2,l5=Ar/4,gu=Ar*2,eo=180/Ar,_r=Ar/180,Br=Math.abs,kS=Math.atan,Qd=Math.atan2,Mn=Math.cos,G3=Math.ceil,A4e=Math.exp,TY=Math.hypot,u5=Math.log,DV=Math.pow,Sn=Math.sin,Md=Math.sign||function(e){return e>0?1:e<0?-1:0},yu=Math.sqrt,hne=Math.tan;function k4e(e){return e>1?0:e<-1?Ar:Math.acos(e)}function ic(e){return e>1?Ls:e<-1?-Ls:Math.asin(e)}function Ua(){}function c5(e,t){e&&p0e.hasOwnProperty(e.type)&&p0e[e.type](e,t)}var h0e={Feature:function(e,t){c5(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)c5(n[r].geometry,t)}},p0e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){AY(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)AY(n[r],t,0)},Polygon:function(e,t){m0e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)m0e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)c5(n[r],t)}};function AY(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function m0e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)AY(e[n],t,1);t.polygonEnd()}function cg(e,t){e&&h0e.hasOwnProperty(e.type)?h0e[e.type](e,t):c5(e,t)}var d5=new uu,f5=new uu,I4e,R4e,kY,IY,RY,nm={point:Ua,lineStart:Ua,lineEnd:Ua,polygonStart:function(){d5=new uu,nm.lineStart=jNt,nm.lineEnd=BNt},polygonEnd:function(){var e=+d5;f5.add(e<0?gu+e:e),this.lineStart=this.lineEnd=this.point=Ua},sphere:function(){f5.add(gu)}};function jNt(){nm.point=zNt}function BNt(){D4e(I4e,R4e)}function zNt(e,t){nm.point=D4e,I4e=e,R4e=t,e*=_r,t*=_r,kY=e,IY=Mn(t=t/2+l5),RY=Sn(t)}function D4e(e,t){e*=_r,t*=_r,t=t/2+l5;var n=e-kY,r=n>=0?1:-1,i=r*n,s=Mn(t),o=Sn(t),a=RY*o,l=IY*s+a*Mn(i),u=a*r*Sn(i);d5.add(Qd(u,l)),kY=e,IY=s,RY=o}function VNt(e){return f5=new uu,cg(e,nm),f5*2}function h5(e){return[Qd(e[1],e[0]),ic(e[2])]}function gw(e){var t=e[0],n=e[1],r=Mn(n);return[r*Mn(t),r*Sn(t),Sn(n)]}function Y3(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function oC(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function PV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function K3(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function p5(e){var t=yu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Es,qu,Ps,Pc,mb,P4e,O4e,CE,KA,gy,e0,og={point:DY,lineStart:g0e,lineEnd:y0e,polygonStart:function(){og.point=M4e,og.lineStart=UNt,og.lineEnd=HNt,KA=new uu,nm.polygonStart()},polygonEnd:function(){nm.polygonEnd(),og.point=DY,og.lineStart=g0e,og.lineEnd=y0e,d5<0?(Es=-(Ps=180),qu=-(Pc=90)):KA>Dn?Pc=90:KA<-Dn&&(qu=-90),e0[0]=Es,e0[1]=Ps},sphere:function(){Es=-(Ps=180),qu=-(Pc=90)}};function DY(e,t){gy.push(e0=[Es=e,Ps=e]),t<qu&&(qu=t),t>Pc&&(Pc=t)}function N4e(e,t){var n=gw([e*_r,t*_r]);if(CE){var r=oC(CE,n),i=[r[1],-r[0],0],s=oC(i,r);p5(s),s=h5(s);var o=e-mb,a=o>0?1:-1,l=s[0]*eo*a,u,c=Br(o)>180;c^(a*mb<l&&l<a*e)?(u=s[1]*eo,u>Pc&&(Pc=u)):(l=(l+360)%360-180,c^(a*mb<l&&l<a*e)?(u=-s[1]*eo,u<qu&&(qu=u)):(t<qu&&(qu=t),t>Pc&&(Pc=t))),c?e<mb?Rc(Es,e)>Rc(Es,Ps)&&(Ps=e):Rc(e,Ps)>Rc(Es,Ps)&&(Es=e):Ps>=Es?(e<Es&&(Es=e),e>Ps&&(Ps=e)):e>mb?Rc(Es,e)>Rc(Es,Ps)&&(Ps=e):Rc(e,Ps)>Rc(Es,Ps)&&(Es=e)}else gy.push(e0=[Es=e,Ps=e]);t<qu&&(qu=t),t>Pc&&(Pc=t),CE=n,mb=e}function g0e(){og.point=N4e}function y0e(){e0[0]=Es,e0[1]=Ps,og.point=DY,CE=null}function M4e(e,t){if(CE){var n=e-mb;KA.add(Br(n)>180?n+(n>0?360:-360):n)}else P4e=e,O4e=t;nm.point(e,t),N4e(e,t)}function UNt(){nm.lineStart()}function HNt(){M4e(P4e,O4e),nm.lineEnd(),Br(KA)>Dn&&(Es=-(Ps=180)),e0[0]=Es,e0[1]=Ps,CE=null}function Rc(e,t){return(t-=e)<0?t+360:t}function qNt(e,t){return e[0]-t[0]}function v0e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function WNt(e){var t,n,r,i,s,o,a;if(Pc=Ps=-(Es=qu=1/0),gy=[],cg(e,og),n=gy.length){for(gy.sort(qNt),t=1,r=gy[0],s=[r];t<n;++t)i=gy[t],v0e(r,i[0])||v0e(r,i[1])?(Rc(r[0],i[1])>Rc(r[0],r[1])&&(r[1]=i[1]),Rc(i[0],r[1])>Rc(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Rc(r[1],i[0]))>o&&(o=a,Es=i[0],Ps=r[1])}return gy=e0=null,Es===1/0||qu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Es,qu],[Ps,Pc]]}var nA,m5,g5,y5,v5,b5,w5,x5,PY,OY,NY,$4e,F4e,Jl,Zl,eu,Xf={sphere:Ua,point:pne,lineStart:b0e,lineEnd:w0e,polygonStart:function(){Xf.lineStart=KNt,Xf.lineEnd=XNt},polygonEnd:function(){Xf.lineStart=b0e,Xf.lineEnd=w0e}};function pne(e,t){e*=_r,t*=_r;var n=Mn(t);XR(n*Mn(e),n*Sn(e),Sn(t))}function XR(e,t,n){++nA,g5+=(e-g5)/nA,y5+=(t-y5)/nA,v5+=(n-v5)/nA}function b0e(){Xf.point=GNt}function GNt(e,t){e*=_r,t*=_r;var n=Mn(t);Jl=n*Mn(e),Zl=n*Sn(e),eu=Sn(t),Xf.point=YNt,XR(Jl,Zl,eu)}function YNt(e,t){e*=_r,t*=_r;var n=Mn(t),r=n*Mn(e),i=n*Sn(e),s=Sn(t),o=Qd(yu((o=Zl*s-eu*i)*o+(o=eu*r-Jl*s)*o+(o=Jl*i-Zl*r)*o),Jl*r+Zl*i+eu*s);m5+=o,b5+=o*(Jl+(Jl=r)),w5+=o*(Zl+(Zl=i)),x5+=o*(eu+(eu=s)),XR(Jl,Zl,eu)}function w0e(){Xf.point=pne}function KNt(){Xf.point=QNt}function XNt(){L4e($4e,F4e),Xf.point=pne}function QNt(e,t){$4e=e,F4e=t,e*=_r,t*=_r,Xf.point=L4e;var n=Mn(t);Jl=n*Mn(e),Zl=n*Sn(e),eu=Sn(t),XR(Jl,Zl,eu)}function L4e(e,t){e*=_r,t*=_r;var n=Mn(t),r=n*Mn(e),i=n*Sn(e),s=Sn(t),o=Zl*s-eu*i,a=eu*r-Jl*s,l=Jl*i-Zl*r,u=TY(o,a,l),c=ic(u),d=u&&-c/u;PY.add(d*o),OY.add(d*a),NY.add(d*l),m5+=c,b5+=c*(Jl+(Jl=r)),w5+=c*(Zl+(Zl=i)),x5+=c*(eu+(eu=s)),XR(Jl,Zl,eu)}function JNt(e){nA=m5=g5=y5=v5=b5=w5=x5=0,PY=new uu,OY=new uu,NY=new uu,cg(e,Xf);var t=+PY,n=+OY,r=+NY,i=TY(t,n,r);return i<a5&&(t=b5,n=w5,r=x5,m5<Dn&&(t=g5,n=y5,r=v5),i=TY(t,n,r),i<a5)?[NaN,NaN]:[Qd(n,t)*eo,ic(r/i)*eo]}function MY(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function $Y(e,t){return Br(e)>Ar&&(e-=Math.round(e/gu)*gu),[e,t]}$Y.invert=$Y;function j4e(e,t,n){return(e%=gu)?t||n?MY(_0e(e),E0e(t,n)):_0e(e):t||n?E0e(t,n):$Y}function x0e(e){return function(t,n){return t+=e,Br(t)>Ar&&(t-=Math.round(t/gu)*gu),[t,n]}}function _0e(e){var t=x0e(e);return t.invert=x0e(-e),t}function E0e(e,t){var n=Mn(e),r=Sn(e),i=Mn(t),s=Sn(t);function o(a,l){var u=Mn(l),c=Mn(a)*u,d=Sn(a)*u,f=Sn(l),h=f*n+c*r;return[Qd(d*i-h*s,c*n-f*r),ic(h*i+d*s)]}return o.invert=function(a,l){var u=Mn(l),c=Mn(a)*u,d=Sn(a)*u,f=Sn(l),h=f*i-d*s;return[Qd(d*i+f*s,c*n+h*r),ic(h*n-c*r)]},o}function ZNt(e){e=j4e(e[0]*_r,e[1]*_r,e.length>2?e[2]*_r:0);function t(n){return n=e(n[0]*_r,n[1]*_r),n[0]*=eo,n[1]*=eo,n}return t.invert=function(n){return n=e.invert(n[0]*_r,n[1]*_r),n[0]*=eo,n[1]*=eo,n},t}function e4t(e,t,n,r,i,s){if(n){var o=Mn(t),a=Sn(t),l=r*n;i==null?(i=t+r*gu,s=t-l/2):(i=C0e(o,i),s=C0e(o,s),(r>0?i<s:i>s)&&(i+=r*gu));for(var u,c=i;r>0?c>s:c<s;c-=l)u=h5([o,-a*Mn(c),-a*Sn(c)]),e.point(u[0],u[1])}}function C0e(e,t){t=gw(t),t[0]-=e,p5(t);var n=k4e(-t[1]);return((-t[2]<0?-n:n)+gu-Dn)%gu}function B4e(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ua,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function b4(e,t){return Br(e[0]-t[0])<Dn&&Br(e[1]-t[1])<Dn}function X3(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function z4e(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(b4(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Dn}s.push(v=new X3(g,p,null,!0)),o.push(v.o=new X3(g,null,v,!1)),s.push(v=new X3(y,p,null,!1)),o.push(v.o=new X3(y,null,v,!0))}}),!!s.length){for(o.sort(t),S0e(s),S0e(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,d;;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((d=c[a])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((d=c[a])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function S0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function OV(e){return Br(e[0])<=Ar?e[0]:Md(e[0])*((Br(e[0])+Ar)%gu-Ar)}function t4t(e,t){var n=OV(t),r=t[1],i=Sn(r),s=[Sn(n),-Mn(n),0],o=0,a=0,l=new uu;i===1?r=Ls+Dn:i===-1&&(r=-Ls-Dn);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=OV(h),m=h[1]/2+l5,g=Sn(m),y=Mn(m),v=0;v<f;++v,p=_,g=S,y=T,h=b){var b=d[v],_=OV(b),E=b[1]/2+l5,S=Sn(E),T=Mn(E),A=_-p,R=A>=0?1:-1,I=R*A,P=I>Ar,N=g*S;if(l.add(Qd(N*R*Sn(I),y*T+N*Mn(I))),o+=P?A+R*gu:A,P^p>=n^_>=n){var M=oC(gw(h),gw(b));p5(M);var O=oC(s,M);p5(O);var j=(P^A>=0?-1:1)*ic(O[2]);(r>j||r===j&&(M[0]||M[1]))&&(a+=P^A>=0?1:-1)}}return(o<-Dn||o<Dn&&l<-a5)^a&1}function V4e(e,t,n,r){return function(i){var s=t(i),o=B4e(),a=t(o),l=!1,u,c,d,f={point:h,lineStart:m,lineEnd:g,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=b,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=g,c=_Ne(c);var _=t4t(u,r);c.length?(l||(i.polygonStart(),l=!0),z4e(c,r4t,_,n,i)):_&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(_,E){e(_,E)&&i.point(_,E)}function p(_,E){s.point(_,E)}function m(){f.point=p,s.lineStart()}function g(){f.point=h,s.lineEnd()}function y(_,E){d.push([_,E]),a.point(_,E)}function v(){a.lineStart(),d=[]}function b(){y(d[0][0],d[0][1]),a.lineEnd();var _=a.clean(),E=o.result(),S,T=E.length,A,R,I;if(d.pop(),u.push(d),d=null,!!T){if(_&1){if(R=E[0],(A=R.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<A;++S)i.point((I=R[S])[0],I[1]);i.lineEnd()}return}T>1&&_&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(n4t))}}return f}}function n4t(e){return e.length>1}function r4t(e,t){return((e=e.x)[0]<0?e[1]-Ls-Dn:Ls-e[1])-((t=t.x)[0]<0?t[1]-Ls-Dn:Ls-t[1])}const T0e=V4e(function(){return!0},i4t,o4t,[-Ar,-Ls]);function i4t(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Ar:-Ar,l=Br(s-t);Br(l-Ar)<Dn?(e.point(t,n=(n+o)/2>0?Ls:-Ls),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Ar&&(Br(t-r)<Dn&&(t-=r*Dn),Br(s-a)<Dn&&(s-=a*Dn),n=s4t(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function s4t(e,t,n,r){var i,s,o=Sn(e-n);return Br(o)>Dn?kS((Sn(t)*(s=Mn(r))*Sn(n)-Sn(r)*(i=Mn(t))*Sn(e))/(i*s*o)):(t+r)/2}function o4t(e,t,n,r){var i;if(e==null)i=n*Ls,r.point(-Ar,i),r.point(0,i),r.point(Ar,i),r.point(Ar,0),r.point(Ar,-i),r.point(0,-i),r.point(-Ar,-i),r.point(-Ar,0),r.point(-Ar,i);else if(Br(e[0]-t[0])>Dn){var s=e[0]<t[0]?Ar:-Ar;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function a4t(e){var t=Mn(e),n=2*_r,r=t>0,i=Br(t)>Dn;function s(c,d,f,h){e4t(h,e,n,f,c,d)}function o(c,d){return Mn(c)*Mn(d)>t}function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,_=o(g,y),E=r?_?0:u(g,y):_?u(g+(g<0?Ar:-Ar),y):0;if(!d&&(p=h=_)&&c.lineStart(),_!==h&&(b=l(d,v),(!b||b4(d,b)||b4(v,b))&&(v[2]=1)),_!==h)m=0,_?(c.lineStart(),b=l(v,d),c.point(b[0],b[1])):(b=l(d,v),c.point(b[0],b[1],2),c.lineEnd()),d=b;else if(i&&d&&r^_){var S;!(E&f)&&(S=l(v,d,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}_&&(!d||!b4(d,v))&&c.point(v[0],v[1]),d=v,h=_,f=E},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function l(c,d,f){var h=gw(c),p=gw(d),m=[1,0,0],g=oC(h,p),y=Y3(g,g),v=g[0],b=y-v*v;if(!b)return!f&&c;var _=t*y/b,E=-t*v/b,S=oC(m,g),T=K3(m,_),A=K3(g,E);PV(T,A);var R=S,I=Y3(T,R),P=Y3(R,R),N=I*I-P*(Y3(T,T)-1);if(!(N<0)){var M=yu(N),O=K3(R,(-I-M)/P);if(PV(O,T),O=h5(O),!f)return O;var j=c[0],B=d[0],H=c[1],q=d[1],G;B<j&&(G=j,j=B,B=G);var U=B-j,L=Br(U-Ar)<Dn,z=L||U<Dn;if(!L&&q<H&&(G=H,H=q,q=G),z?L?H+q>0^O[1]<(Br(O[0]-j)<Dn?H:q):H<=O[1]&&O[1]<=q:U>Ar^(j<=O[0]&&O[0]<=B)){var V=K3(R,(-I+M)/P);return PV(V,T),[O,h5(V)]}}}function u(c,d){var f=r?e:Ar-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return V4e(o,a,s,r?[0,-e]:[-Ar,e-Ar])}function l4t(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],c=0,d=1,f=l-o,h=u-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*h),d<1&&(t[0]=o+d*f,t[1]=a+d*h),!0}}}}}var rA=1e9,Q3=-rA;function U4e(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function s(u,c,d,f){var h=0,p=0;if(u==null||(h=o(u,d))!==(p=o(c,d))||l(u,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function o(u,c){return Br(u[0]-e)<Dn?c>0?0:3:Br(u[0]-n)<Dn?c>0?2:1:Br(u[1]-t)<Dn?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=o(u,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=B4e(),f,h,p,m,g,y,v,b,_,E,S,T={point:A,lineStart:N,lineEnd:M,polygonStart:I,polygonEnd:P};function A(j,B){i(j,B)&&c.point(j,B)}function R(){for(var j=0,B=0,H=h.length;B<H;++B)for(var q=h[B],G=1,U=q.length,L=q[0],z,V,Y=L[0],Q=L[1];G<U;++G)z=Y,V=Q,L=q[G],Y=L[0],Q=L[1],V<=r?Q>r&&(Y-z)*(r-V)>(Q-V)*(e-z)&&++j:Q<=r&&(Y-z)*(r-V)<(Q-V)*(e-z)&&--j;return j}function I(){c=d,f=[],h=[],S=!0}function P(){var j=R(),B=S&&j,H=(f=_Ne(f)).length;(B||H)&&(u.polygonStart(),B&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),H&&z4e(f,a,j,s,u),u.polygonEnd()),c=u,f=h=p=null}function N(){T.point=O,h&&h.push(p=[]),E=!0,_=!1,v=b=NaN}function M(){f&&(O(m,g),y&&_&&d.rejoin(),f.push(d.result())),T.point=A,_&&c.lineEnd()}function O(j,B){var H=i(j,B);if(h&&p.push([j,B]),E)m=j,g=B,y=H,E=!1,H&&(c.lineStart(),c.point(j,B));else if(H&&_)c.point(j,B);else{var q=[v=Math.max(Q3,Math.min(rA,v)),b=Math.max(Q3,Math.min(rA,b))],G=[j=Math.max(Q3,Math.min(rA,j)),B=Math.max(Q3,Math.min(rA,B))];l4t(q,G,e,t,n,r)?(_||(c.lineStart(),c.point(q[0],q[1])),c.point(G[0],G[1]),H||c.lineEnd(),S=!1):H&&(c.lineStart(),c.point(j,B),S=!1)}v=j,b=B,_=H}return T}}function A0e(e,t,n){var r=Xu(e,t-Dn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function k0e(e,t,n){var r=Xu(e,t-Dn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function u4t(){var e,t,n,r,i,s,o,a,l=10,u=l,c=90,d=360,f,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Xu(G3(r/c)*c,n,c).map(p).concat(Xu(G3(a/d)*d,o,d).map(m)).concat(Xu(G3(t/l)*l,e,l).filter(function(b){return Br(b%c)>Dn}).map(f)).concat(Xu(G3(s/u)*u,i,u).filter(function(b){return Br(b%d)>Dn}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],d=+b[1],y):[c,d]},y.stepMinor=function(b){return arguments.length?(l=+b[0],u=+b[1],y):[l,u]},y.precision=function(b){return arguments.length?(g=+b,f=A0e(s,i,90),h=k0e(t,e,g),p=A0e(a,o,90),m=k0e(r,n,g),y):g},y.extentMajor([[-180,-90+Dn],[180,90-Dn]]).extentMinor([[-180,-80-Dn],[180,80+Dn]])}const uI=e=>e;var NV=new uu,FY=new uu,H4e,q4e,LY,jY,dg={point:Ua,lineStart:Ua,lineEnd:Ua,polygonStart:function(){dg.lineStart=c4t,dg.lineEnd=f4t},polygonEnd:function(){dg.lineStart=dg.lineEnd=dg.point=Ua,NV.add(Br(FY)),FY=new uu},result:function(){var e=NV/2;return NV=new uu,e}};function c4t(){dg.point=d4t}function d4t(e,t){dg.point=W4e,H4e=LY=e,q4e=jY=t}function W4e(e,t){FY.add(jY*e-LY*t),LY=e,jY=t}function f4t(){W4e(H4e,q4e)}var aC=1/0,_5=aC,cI=-aC,E5=cI,C5={point:h4t,lineStart:Ua,lineEnd:Ua,polygonStart:Ua,polygonEnd:Ua,result:function(){var e=[[aC,_5],[cI,E5]];return cI=E5=-(_5=aC=1/0),e}};function h4t(e,t){e<aC&&(aC=e),e>cI&&(cI=e),t<_5&&(_5=t),t>E5&&(E5=t)}var BY=0,zY=0,iA=0,S5=0,T5=0,tE=0,VY=0,UY=0,sA=0,G4e,Y4e,Sp,Tp,Dd={point:yw,lineStart:I0e,lineEnd:R0e,polygonStart:function(){Dd.lineStart=g4t,Dd.lineEnd=y4t},polygonEnd:function(){Dd.point=yw,Dd.lineStart=I0e,Dd.lineEnd=R0e},result:function(){var e=sA?[VY/sA,UY/sA]:tE?[S5/tE,T5/tE]:iA?[BY/iA,zY/iA]:[NaN,NaN];return BY=zY=iA=S5=T5=tE=VY=UY=sA=0,e}};function yw(e,t){BY+=e,zY+=t,++iA}function I0e(){Dd.point=p4t}function p4t(e,t){Dd.point=m4t,yw(Sp=e,Tp=t)}function m4t(e,t){var n=e-Sp,r=t-Tp,i=yu(n*n+r*r);S5+=i*(Sp+e)/2,T5+=i*(Tp+t)/2,tE+=i,yw(Sp=e,Tp=t)}function R0e(){Dd.point=yw}function g4t(){Dd.point=v4t}function y4t(){K4e(G4e,Y4e)}function v4t(e,t){Dd.point=K4e,yw(G4e=Sp=e,Y4e=Tp=t)}function K4e(e,t){var n=e-Sp,r=t-Tp,i=yu(n*n+r*r);S5+=i*(Sp+e)/2,T5+=i*(Tp+t)/2,tE+=i,i=Tp*e-Sp*t,VY+=i*(Sp+e),UY+=i*(Tp+t),sA+=i*3,yw(Sp=e,Tp=t)}function X4e(e){this._context=e}X4e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,gu);break}}},result:Ua};var HY=new uu,MV,Q4e,J4e,oA,aA,dI={point:Ua,lineStart:function(){dI.point=b4t},lineEnd:function(){MV&&Z4e(Q4e,J4e),dI.point=Ua},polygonStart:function(){MV=!0},polygonEnd:function(){MV=null},result:function(){var e=+HY;return HY=new uu,e}};function b4t(e,t){dI.point=Z4e,Q4e=oA=e,J4e=aA=t}function Z4e(e,t){oA-=e,aA-=t,HY.add(yu(oA*oA+aA*aA)),oA=e,aA=t}let D0e,A5,P0e,O0e;class N0e{constructor(t){this._append=t==null?eMe:w4t(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==P0e||this._append!==A5){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,P0e=r,A5=this._append,O0e=this._,this._=i}this._+=O0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function eMe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function w4t(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return eMe;if(t!==D0e){const n=10**t;D0e=t,A5=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return A5}function tMe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),cg(a,i(s))),s.result()}return o.area=function(a){return cg(a,i(dg)),dg.result()},o.measure=function(a){return cg(a,i(dI)),dI.result()},o.bounds=function(a){return cg(a,i(C5)),C5.result()},o.centroid=function(a){return cg(a,i(Dd)),Dd.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,uI):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new N0e(n)):new X4e(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new N0e(n)),o},o.projection(e).digits(n).context(t)}function QL(e){return function(t){var n=new qY;for(var r in e)n[r]=e[r];return n.stream=t,n}}function qY(){}qY.prototype={constructor:qY,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function mne(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),cg(n,e.stream(C5)),t(C5.result()),r!=null&&e.clipExtent(r),e}function JL(e,t,n){return mne(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function gne(e,t,n){return JL(e,[[0,0],t],n)}function yne(e,t,n){return mne(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function vne(e,t,n){return mne(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var M0e=16,x4t=Mn(30*_r);function $0e(e,t){return+t?E4t(e,t):_4t(e)}function _4t(e){return QL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function E4t(e,t){function n(r,i,s,o,a,l,u,c,d,f,h,p,m,g){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var _=o+f,E=a+h,S=l+p,T=yu(_*_+E*E+S*S),A=ic(S/=T),R=Br(Br(S)-1)<Dn||Br(s-d)<Dn?(s+d)/2:Qd(E,_),I=e(R,A),P=I[0],N=I[1],M=P-r,O=N-i,j=v*M-y*O;(j*j/b>t||Br((y*M+v*O)/b-.5)>.3||o*f+a*h+l*p<x4t)&&(n(r,i,s,o,a,l,P,N,R,_/=T,E/=T,S,m,g),g.point(P,N),n(P,N,R,_,E,S,u,c,d,f,h,p,m,g))}}return function(r){var i,s,o,a,l,u,c,d,f,h,p,m,g={point:y,lineStart:v,lineEnd:_,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,R){A=e(A,R),r.point(A[0],A[1])}function v(){d=NaN,g.point=b,r.lineStart()}function b(A,R){var I=gw([A,R]),P=e(A,R);n(d,f,c,h,p,m,d=P[0],f=P[1],c=A,h=I[0],p=I[1],m=I[2],M0e,r),r.point(d,f)}function _(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(A,R){b(i=A,R),s=d,o=f,a=h,l=p,u=m,g.point=b}function T(){n(d,f,c,h,p,m,s,o,i,a,l,u,M0e,r),g.lineEnd=_,_()}return g}}var C4t=QL({point:function(e,t){this.stream.point(e*_r,t*_r)}});function S4t(e){return QL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function T4t(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function F0e(e,t,n,r,i,s){if(!s)return T4t(e,t,n,r,i);var o=Mn(s),a=Sn(s),l=o*e,u=a*e,c=o/e,d=a/e,f=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[l*m-u*g+t,n-u*m-l*g]}return p.invert=function(m,g){return[r*(c*m-d*g+f),i*(h-d*m-c*g)]},p}function Sm(e){return nMe(function(){return e})()}function nMe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,c,d=0,f=1,h=1,p=null,m=T0e,g=null,y,v,b,_=uI,E=.5,S,T,A,R,I;function P(j){return A(j[0]*_r,j[1]*_r)}function N(j){return j=A.invert(j[0],j[1]),j&&[j[0]*eo,j[1]*eo]}P.stream=function(j){return R&&I===j?R:R=C4t(S4t(c)(m(S(_(I=j)))))},P.preclip=function(j){return arguments.length?(m=j,p=void 0,O()):m},P.postclip=function(j){return arguments.length?(_=j,g=y=v=b=null,O()):_},P.clipAngle=function(j){return arguments.length?(m=+j?a4t(p=j*_r):(p=null,T0e),O()):p*eo},P.clipExtent=function(j){return arguments.length?(_=j==null?(g=y=v=b=null,uI):U4e(g=+j[0][0],y=+j[0][1],v=+j[1][0],b=+j[1][1]),O()):g==null?null:[[g,y],[v,b]]},P.scale=function(j){return arguments.length?(n=+j,M()):n},P.translate=function(j){return arguments.length?(r=+j[0],i=+j[1],M()):[r,i]},P.center=function(j){return arguments.length?(s=j[0]%360*_r,o=j[1]%360*_r,M()):[s*eo,o*eo]},P.rotate=function(j){return arguments.length?(a=j[0]%360*_r,l=j[1]%360*_r,u=j.length>2?j[2]%360*_r:0,M()):[a*eo,l*eo,u*eo]},P.angle=function(j){return arguments.length?(d=j%360*_r,M()):d*eo},P.reflectX=function(j){return arguments.length?(f=j?-1:1,M()):f<0},P.reflectY=function(j){return arguments.length?(h=j?-1:1,M()):h<0},P.precision=function(j){return arguments.length?(S=$0e(T,E=j*j),O()):yu(E)},P.fitExtent=function(j,B){return JL(P,j,B)},P.fitSize=function(j,B){return gne(P,j,B)},P.fitWidth=function(j,B){return yne(P,j,B)},P.fitHeight=function(j,B){return vne(P,j,B)};function M(){var j=F0e(n,0,0,f,h,d).apply(null,t(s,o)),B=F0e(n,r-j[0],i-j[1],f,h,d);return c=j4e(a,l,u),T=MY(t,B),A=MY(c,T),S=$0e(T,E),O()}function O(){return R=I=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&N,M()}}function bne(e){var t=0,n=Ar/3,r=nMe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*_r,n=s[1]*_r):[t*eo,n*eo]},i}function A4t(e){var t=Mn(e);function n(r,i){return[r*t,Sn(i)/t]}return n.invert=function(r,i){return[r/t,ic(i*t)]},n}function k4t(e,t){var n=Sn(e),r=(n+Sn(t))/2;if(Br(r)<Dn)return A4t(e);var i=1+n*(2*r-n),s=yu(i)/r;function o(a,l){var u=yu(i-2*r*Sn(l))/r;return[u*Sn(a*=r),s-u*Mn(a)]}return o.invert=function(a,l){var u=s-l,c=Qd(a,Br(u))*Md(u);return u*r<0&&(c-=Ar*Md(a)*Md(u)),[c/r,ic((i-(a*a+u*u)*r*r)/(2*r))]},o}function k5(){return bne(k4t).scale(155.424).center([0,33.6442])}function rMe(){return k5().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function I4t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function R4t(){var e,t,n=rMe(),r,i=k5().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=k5().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,g=(f[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=I4t([n.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Dn,m+.12*h+Dn],[p-.214*h-Dn,m+.234*h-Dn]]).stream(u),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Dn,m+.166*h+Dn],[p-.115*h-Dn,m+.234*h-Dn]]).stream(u),d()},c.fitExtent=function(f,h){return JL(c,f,h)},c.fitSize=function(f,h){return gne(c,f,h)},c.fitWidth=function(f,h){return yne(c,f,h)},c.fitHeight=function(f,h){return vne(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function iMe(e){return function(t,n){var r=Mn(t),i=Mn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Sn(t),s*Sn(n)]}}function QR(e){return function(t,n){var r=yu(t*t+n*n),i=e(r),s=Sn(i),o=Mn(i);return[Qd(t*s,r*o),ic(r&&n*s/r)]}}var sMe=iMe(function(e){return yu(2/(1+e))});sMe.invert=QR(function(e){return 2*ic(e/2)});function D4t(){return Sm(sMe).scale(124.75).clipAngle(180-.001)}var oMe=iMe(function(e){return(e=k4e(e))&&e/Sn(e)});oMe.invert=QR(function(e){return e});function P4t(){return Sm(oMe).scale(79.4188).clipAngle(180-.001)}function ZL(e,t){return[e,u5(hne((Ls+t)/2))]}ZL.invert=function(e,t){return[e,2*kS(A4e(t))-Ls]};function O4t(){return aMe(ZL).scale(961/gu)}function aMe(e){var t=Sm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=a=l=u=null:(o=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var d=Ar*r(),f=t(ZNt(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===ZL?[[Math.max(f[0]-d,o),a],[Math.min(f[0]+d,l),u]]:[[o,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return c()}function J3(e){return hne((Ls+e)/2)}function N4t(e,t){var n=Mn(e),r=e===t?Sn(e):u5(n/Mn(t))/u5(J3(t)/J3(e)),i=n*DV(J3(e),r)/r;if(!r)return ZL;function s(o,a){i>0?a<-Ls+Dn&&(a=-Ls+Dn):a>Ls-Dn&&(a=Ls-Dn);var l=i/DV(J3(a),r);return[l*Sn(r*o),i-l*Mn(r*o)]}return s.invert=function(o,a){var l=i-a,u=Md(r)*yu(o*o+l*l),c=Qd(o,Br(l))*Md(l);return l*r<0&&(c-=Ar*Md(o)*Md(l)),[c/r,2*kS(DV(i/u,1/r))-Ls]},s}function M4t(){return bne(N4t).scale(109.5).parallels([30,30])}function I5(e,t){return[e,t]}I5.invert=I5;function $4t(){return Sm(I5).scale(152.63)}function F4t(e,t){var n=Mn(e),r=e===t?Sn(e):(n-Mn(t))/(t-e),i=n/r+e;if(Br(r)<Dn)return I5;function s(o,a){var l=i-a,u=r*o;return[l*Sn(u),i-l*Mn(u)]}return s.invert=function(o,a){var l=i-a,u=Qd(o,Br(l))*Md(l);return l*r<0&&(u-=Ar*Md(o)*Md(l)),[u/r,i-Md(r)*yu(o*o+l*l)]},s}function L4t(){return bne(F4t).scale(131.154).center([0,13.9389])}var XA=1.340264,QA=-.081106,JA=893e-6,ZA=.003796,R5=yu(3)/2,j4t=12;function lMe(e,t){var n=ic(R5*Sn(t)),r=n*n,i=r*r*r;return[e*Mn(n)/(R5*(XA+3*QA*r+i*(7*JA+9*ZA*r))),n*(XA+QA*r+i*(JA+ZA*r))]}lMe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<j4t&&(a=n*(XA+QA*r+i*(JA+ZA*r))-t,l=XA+3*QA*r+i*(7*JA+9*ZA*r),n-=o=a/l,r=n*n,i=r*r*r,!(Br(o)<a5));++s);return[R5*e*(XA+3*QA*r+i*(7*JA+9*ZA*r))/Mn(n),ic(Sn(n)/R5)]};function B4t(){return Sm(lMe).scale(177.158)}function uMe(e,t){var n=Mn(t),r=Mn(e)*n;return[n*Sn(e)/r,Sn(t)/r]}uMe.invert=QR(kS);function z4t(){return Sm(uMe).scale(144.049).clipAngle(60)}function V4t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,c,d,f=1,h=1,p=QL({point:function(_,E){var S=b([_,E]);this.stream.point(S[0],S[1])}}),m=uI,g,y;function v(){return f=e*r,h=e*i,g=y=null,b}function b(_){var E=_[0]*f,S=_[1]*h;if(s){var T=S*o-E*a;E=E*o+S*a,S=T}return[E+t,S+n]}return b.invert=function(_){var E=_[0]-t,S=_[1]-n;if(s){var T=S*o+E*a;E=E*o-S*a,S=T}return[E/f,S/h]},b.stream=function(_){return g&&y===_?g:g=p(m(y=_))},b.postclip=function(_){return arguments.length?(m=_,l=u=c=d=null,v()):m},b.clipExtent=function(_){return arguments.length?(m=_==null?(l=u=c=d=null,uI):U4e(l=+_[0][0],u=+_[0][1],c=+_[1][0],d=+_[1][1]),v()):l==null?null:[[l,u],[c,d]]},b.scale=function(_){return arguments.length?(e=+_,v()):e},b.translate=function(_){return arguments.length?(t=+_[0],n=+_[1],v()):[t,n]},b.angle=function(_){return arguments.length?(s=_%360*_r,a=Sn(s),o=Mn(s),v()):s*eo},b.reflectX=function(_){return arguments.length?(r=_?-1:1,v()):r<0},b.reflectY=function(_){return arguments.length?(i=_?-1:1,v()):i<0},b.fitExtent=function(_,E){return JL(b,_,E)},b.fitSize=function(_,E){return gne(b,_,E)},b.fitWidth=function(_,E){return yne(b,_,E)},b.fitHeight=function(_,E){return vne(b,_,E)},b}function cMe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}cMe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Br(i)>Dn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function U4t(){return Sm(cMe).scale(175.295)}function dMe(e,t){return[Mn(t)*Sn(e),Sn(t)]}dMe.invert=QR(ic);function H4t(){return Sm(dMe).scale(249.5).clipAngle(90+Dn)}function fMe(e,t){var n=Mn(t),r=1+Mn(e)*n;return[n*Sn(e)/r,Sn(t)/r]}fMe.invert=QR(function(e){return 2*kS(e)});function q4t(){return Sm(fMe).scale(250).clipAngle(142)}function hMe(e,t){return[u5(hne((Ls+t)/2)),-e]}hMe.invert=function(e,t){return[-t,2*kS(A4e(e))-Ls]};function W4t(){var e=aMe(hMe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function G4t(e,t){return e.parent===t.parent?1:2}function Y4t(e){return e.reduce(K4t,0)/e.length}function K4t(e,t){return e+t.x}function X4t(e){return 1+e.reduce(Q4t,0)}function Q4t(e,t){return Math.max(e,t.y)}function J4t(e){for(var t;t=e.children;)e=t[0];return e}function Z4t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function eMt(){var e=G4t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=Y4t(h),f.y=X4t(h)):(f.x=o?a+=e(f,o):0,f.y=0,o=f)});var l=J4t(s),u=Z4t(s),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*t,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function tMt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function nMt(){return this.eachAfter(tMt)}function rMt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function iMt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function sMt(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function oMt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function aMt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function lMt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function uMt(e){for(var t=this,n=cMt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function cMt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function dMt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function fMt(){return Array.from(this)}function hMt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function pMt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*mMt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function wne(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=vMt)):t===void 0&&(t=yMt);for(var n=new lC(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new lC(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(pMe)}function gMt(){return wne(this).eachBefore(bMt)}function yMt(e){return e.children}function vMt(e){return Array.isArray(e)?e[1]:null}function bMt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function pMe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function lC(e){this.data=e,this.depth=this.height=0,this.parent=null}lC.prototype=wne.prototype={constructor:lC,count:nMt,each:rMt,eachAfter:sMt,eachBefore:iMt,find:oMt,sum:aMt,sort:lMt,path:uMt,ancestors:dMt,descendants:fMt,leaves:hMt,links:pMt,copy:gMt,[Symbol.iterator]:mMt};function w4(e){return e==null?null:mMe(e)}function mMe(e){if(typeof e!="function")throw new Error;return e}function xb(){return 0}function V_(e){return function(){return e}}const wMt=1664525,xMt=1013904223,L0e=4294967296;function _Mt(){let e=1;return()=>(e=(wMt*e+xMt)%L0e)/L0e}function EMt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function CMt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function SMt(e,t){for(var n=0,r=(e=CMt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&gMe(o,s)?++n:(o=AMt(i=TMt(i,s)),n=0);return o}function TMt(e,t){var n,r;if($V(t,e))return[t];for(n=0;n<e.length;++n)if(Z3(t,e[n])&&$V(lA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(Z3(lA(e[n],e[r]),t)&&Z3(lA(e[n],t),e[r])&&Z3(lA(e[r],t),e[n])&&$V(yMe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function Z3(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function gMe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function $V(e,t){for(var n=0;n<t.length;++n)if(!gMe(e,t[n]))return!1;return!0}function AMt(e){switch(e.length){case 1:return kMt(e[0]);case 2:return lA(e[0],e[1]);case 3:return yMe(e[0],e[1],e[2])}}function kMt(e){return{x:e.x,y:e.y,r:e.r}}function lA(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,c=a-i,d=Math.sqrt(l*l+u*u);return{x:(n+s+l/d*c)/2,y:(r+o+u/d*c)/2,r:(d+i+a)/2}}function yMe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=r-o,h=r-u,p=i-a,m=i-c,g=l-s,y=d-s,v=r*r+i*i-s*s,b=v-o*o-a*a+l*l,_=v-u*u-c*c+d*d,E=h*p-f*m,S=(p*_-m*b)/(E*2)-r,T=(m*g-p*y)/E,A=(h*b-f*_)/(E*2)-i,R=(f*y-h*g)/E,I=T*T+R*R-1,P=2*(s+S*T+A*R),N=S*S+A*A-s*s,M=-(Math.abs(I)>1e-6?(P+Math.sqrt(P*P-4*I*N))/(2*I):N/P);return{x:r+S+T*M,y:i+A+R*M,r:M}}function j0e(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function B0e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function z0e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function eO(e){this._=e,this.next=null,this.previous=null}function IMt(e,t){if(!(s=(e=EMt(e)).length))return 0;var n,r,i,s,o,a,l,u,c,d,f;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;j0e(r,n,i=e[2]),n=new eO(n),r=new eO(r),i=new eO(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){j0e(n._,r._,i=e[l]),i=new eO(i),u=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(B0e(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(B0e(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=z0e(n);(i=i.next)!==r;)(a=z0e(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=SMt(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function RMt(e){return Math.sqrt(e.value)}function DMt(){var e=null,t=1,n=1,r=xb;function i(s){const o=_Mt();return s.x=t/2,s.y=n/2,e?s.eachBefore(V0e(e)).eachAfter(FV(r,.5,o)).eachBefore(U0e(1)):s.eachBefore(V0e(RMt)).eachAfter(FV(xb,1,o)).eachAfter(FV(r,s.r/Math.min(t,n),o)).eachBefore(U0e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=w4(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:V_(+s),i):r},i}function V0e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function FV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=IMt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function U0e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function vMe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function JR(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function PMt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(vMe),o}function s(o,a){return function(l){l.children&&JR(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var OMt={depth:-1},H0e={},LV={};function NMt(e){return e.id}function MMt(e){return e.parentId}function q0e(){var e=NMt,t=MMt,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,c,d,f,h,p,m,g=new Map;if(n!=null){const y=s.map((_,E)=>$Mt(n(_,E,i))),v=y.map(W0e),b=new Set(y).add("");for(const _ of v)b.has(_)||(b.add(_),y.push(_),v.push(W0e(_)),s.push(LV));o=(_,E)=>y[E],a=(_,E)=>v[E]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new lC(u),(p=o(u,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?H0e:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=s[c],p=h.parent){if(f=g.get(p),!f)throw new Error("missing: "+p);if(f===H0e)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===LV&&d.children.length===1;)d=d.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===LV);--y)h.data=null}if(d.parent=OMt,d.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(pMe),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=w4(i),r):e},r.parentId=function(i){return arguments.length?(t=w4(i),r):t},r.path=function(i){return arguments.length?(n=w4(i),r):n},r}function $Mt(e){e=`${e}`;let t=e.length;return WY(e,t-1)&&!WY(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function W0e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!WY(e,t););return e.slice(0,t)}function WY(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function FMt(e,t){return e.parent===t.parent?1:2}function jV(e){var t=e.children;return t?t[0]:e.t}function BV(e){var t=e.children;return t?t[t.length-1]:e.t}function LMt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function jMt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function BMt(e,t,n){return e.a.parent===t.parent?e.a:n}function x4(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}x4.prototype=Object.create(lC.prototype);function zMt(e){for(var t=new x4(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new x4(s[o],o)),i.parent=n;return(t.parent=new x4(null,0)).children=[t],t}function VMt(){var e=FMt,t=1,n=1,r=null;function i(u){var c=zMt(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(v){v.x<d.x&&(d=v),v.x>f.x&&(f=v),v.depth>h.depth&&(h=v)});var p=d===f?1:e(d,f)/2,m=p-d.x,g=t/(f.x+p+m),y=n/(h.depth||1);u.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return u}function s(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){jMt(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=a(u,f,u.parent.A||d[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,d){if(c){for(var f=u,h=u,p=c,m=f.parent.children[0],g=f.m,y=h.m,v=p.m,b=m.m,_;p=BV(p),f=jV(f),p&&f;)m=jV(m),h=BV(h),h.a=u,_=p.z+v-f.z-g+e(p._,f._),_>0&&(LMt(BMt(p,u,d),u,_),g+=_,y+=_),v+=p.m,g+=f.m,b+=m.m,y+=h.m;p&&!BV(h)&&(h.t=p,h.m+=v-y),f&&!jV(m)&&(m.t=f,m.m+=g-b,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function e8(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var bMe=(1+Math.sqrt(5))/2;function wMe(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,c=0,d=0,f=a.length,h,p,m=t.value,g,y,v,b,_,E,S;c<f;){h=i-n,p=s-r;do g=a[d++].value;while(!g&&d<f);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,_=Math.max(v/S,S/y);d<f;++d){if(g+=u=a[d].value,u<y&&(y=u),u>v&&(v=u),S=g*g*E,b=Math.max(v/S,S/y),b>_){g-=u;break}_=b}o.push(l={value:g,dice:h<p,children:a.slice(c,d)}),l.dice?JR(l,n,r,i,m?r+=p*g/m:s):e8(l,n,r,m?n+=h*g/m:i,s),m-=g,c=d}return o}const xMe=(function e(t){function n(r,i,s,o,a){wMe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n})(bMe);function UMt(){var e=xMe,t=!1,n=1,r=1,i=[0],s=xb,o=xb,a=xb,l=xb,u=xb;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(vMe),f}function d(f){var h=i[f.depth],p=f.x0+h,m=f.y0+h,g=f.x1-h,y=f.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),f.x0=p,f.y0=m,f.x1=g,f.y1=y,f.children&&(h=i[f.depth+1]=s(f)/2,p+=u(f)-h,m+=o(f)-h,g-=a(f)-h,y-=l(f)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(f,p,m,g,y))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=mMe(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:V_(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:V_(+f),c):o},c.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:V_(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:V_(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:V_(+f),c):u},c}function HMt(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,e.value,t,n,r,i);function c(d,f,h,p,m,g,y){if(d>=f-1){var v=s[d];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=u[d],_=h/2+b,E=d+1,S=f-1;E<S;){var T=E+S>>>1;u[T]<_?E=T+1:S=T}_-u[E-1]<u[E]-_&&d+1<E&&--E;var A=u[E]-b,R=h-A;if(g-p>y-m){var I=h?(p*R+g*A)/h:g;c(d,E,A,p,m,I,y),c(E,f,R,I,m,g,y)}else{var P=h?(m*R+y*A)/h:y;c(d,E,A,p,m,g,P),c(E,f,R,p,P,g,y)}}}function qMt(e,t,n,r,i){(e.depth&1?e8:JR)(e,t,n,r,i)}const WMt=(function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,d,f=-1,h,p=l.length,m=r.value;++f<p;){for(u=l[f],c=u.children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?JR(u,i,s,o,m?s+=(a-s)*u.value/m:a):e8(u,i,s,m?i+=(o-i)*u.value/m:o,a),m-=u.value}else r._squarify=l=wMe(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n})(bMe);function Oh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function u1(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const GY=Symbol("implicit");function IS(){var e=new Sge,t=[],n=[],r=GY;function i(s){let o=e.get(s);if(o===void 0){if(r!==GY)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Sge;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return IS(t,n).unknown(r)},Oh.apply(i,arguments),i}function _Me(){var e=IS().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,l=0,u=0,c=.5;delete e.unknown;function d(){var f=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,f-l+u*2),a&&(s=Math.floor(s)),p+=(m-p-s*(f-l))*c,o=s*(1-l),a&&(p=Math.round(p),o=Math.round(o));var g=Xu(f).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,a=!0,d()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(f){return arguments.length?(a=!!f,d()):a},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},e.copy=function(){return _Me(t(),[r,i]).round(a).paddingInner(l).paddingOuter(u).align(c)},Oh.apply(d(),arguments)}function GMt(e){return function(){return e}}function YY(e){return+e}var G0e=[0,1];function Qu(e){return e}function KY(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:GMt(isNaN(t)?NaN:.5)}function YMt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function KMt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=KY(i,r),s=n(o,s)):(r=KY(r,i),s=n(s,o)),function(a){return s(r(a))}}function XMt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=KY(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=Cv(e,a,1,r)-1;return s[l](i[l](a))}}function ZR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function t8(){var e=G0e,t=G0e,n=A0,r,i,s,o=Qu,a,l,u;function c(){var f=Math.min(e.length,t.length);return o!==Qu&&(o=YMt(e[0],e[f-1])),a=f>2?XMt:KMt,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((u||(u=a(t,e.map(r),kd)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,YY),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=YR,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Qu,c()):o!==Qu},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,c()}}function EMe(){return t8()(Qu,Qu)}function CMe(e,t,n,r){var i=Sv(e,t,n),s;switch(r=mw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=S4e(i,o))&&(r.precision=s),fne(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=T4e(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=C4e(i))&&(r.precision=s-(r.type==="%")*2);break}}return AS(r)}function ix(e){var t=e.domain;return e.ticks=function(n){var r=t();return aY(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return CMe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=lY(o,a,n),u===l)return r[i]=o,r[s]=a,t(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function sc(){var e=EMe();return e.copy=function(){return ZR(e,sc())},Oh.apply(e,arguments),ix(e)}function SMe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,YY),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return SMe(e).unknown(t)},e=arguments.length?Array.from(e,YY):[0,1],ix(n)}function TMe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Y0e(e){return Math.log(e)}function K0e(e){return Math.exp(e)}function QMt(e){return-Math.log(-e)}function JMt(e){return-Math.exp(-e)}function ZMt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function e6t(e){return e===10?ZMt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function t6t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function X0e(e){return(t,n)=>-e(-t,n)}function xne(e){const t=e(Y0e,K0e),n=t.domain;let r=10,i,s;function o(){return i=t6t(r),s=e6t(r),n()[0]<0?(i=X0e(i),s=X0e(s),e(QMt,JMt)):e(Y0e,K0e),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=aY(u,c,g))}else y=aY(f,h,Math.min(h-f,g)).map(s);return d?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=mw(l)).precision==null&&(l.trim=!0),l=AS(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},t.nice=()=>n(TMe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function AMe(){const e=xne(t8()).domain([1,10]);return e.copy=()=>ZR(e,AMe()).base(e.base()),Oh.apply(e,arguments),e}function Q0e(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function J0e(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _ne(e){var t=1,n=e(Q0e(t),J0e(t));return n.constant=function(r){return arguments.length?e(Q0e(t=+r),J0e(t)):t},ix(n)}function kMe(){var e=_ne(t8());return e.copy=function(){return ZR(e,kMe()).constant(e.constant())},Oh.apply(e,arguments)}function Z0e(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function n6t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function r6t(e){return e<0?-e*e:e*e}function Ene(e){var t=e(Qu,Qu),n=1;function r(){return n===1?e(Qu,Qu):n===.5?e(n6t,r6t):e(Z0e(n),Z0e(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ix(t)}function Cne(){var e=Ene(t8());return e.copy=function(){return ZR(e,Cne()).exponent(e.exponent())},Oh.apply(e,arguments),e}function i6t(){return Cne.apply(null,arguments).exponent(.5)}function IMe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=wNe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Cv(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Rg),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return IMe().domain(e).range(t).unknown(r)},Oh.apply(s,arguments)}function RMe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[Cv(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return RMe().domain([e,t]).range(i).unknown(s)},Oh.apply(ix(o),arguments)}function DMe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Cv(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return DMe().domain(e).range(t).unknown(n)},Oh.apply(i,arguments)}const zV=new Date,VV=new Date;function Jo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>Jo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(zV.setTime(+s),VV.setTime(+o),e(zV),e(VV),Math.floor(n(zV,VV))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const uC=Jo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);uC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Jo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):uC);uC.range;const gg=1e3,$d=gg*60,yg=$d*60,t0=yg*24,Sne=t0*7,eye=t0*30,UV=t0*365,vg=Jo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*gg)},(e,t)=>(t-e)/gg,e=>e.getUTCSeconds());vg.range;const n8=Jo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gg)},(e,t)=>{e.setTime(+e+t*$d)},(e,t)=>(t-e)/$d,e=>e.getMinutes());n8.range;const r8=Jo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$d)},(e,t)=>(t-e)/$d,e=>e.getUTCMinutes());r8.range;const i8=Jo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*gg-e.getMinutes()*$d)},(e,t)=>{e.setTime(+e+t*yg)},(e,t)=>(t-e)/yg,e=>e.getHours());i8.range;const s8=Jo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*yg)},(e,t)=>(t-e)/yg,e=>e.getUTCHours());s8.range;const Pg=Jo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$d)/t0,e=>e.getDate()-1);Pg.range;const tv=Jo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/t0,e=>e.getUTCDate()-1);tv.range;const PMe=Jo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/t0,e=>Math.floor(e/t0));PMe.range;function sx(e){return Jo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*$d)/Sne)}const RS=sx(0),D5=sx(1),s6t=sx(2),o6t=sx(3),cC=sx(4),a6t=sx(5),l6t=sx(6);RS.range;D5.range;s6t.range;o6t.range;cC.range;a6t.range;l6t.range;function ox(e){return Jo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Sne)}const DS=ox(0),P5=ox(1),u6t=ox(2),c6t=ox(3),dC=ox(4),d6t=ox(5),f6t=ox(6);DS.range;P5.range;u6t.range;c6t.range;dC.range;d6t.range;f6t.range;const fI=Jo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());fI.range;const hI=Jo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hI.range;const rm=Jo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());rm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});rm.range;const im=Jo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());im.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Jo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});im.range;function OMe(e,t,n,r,i,s){const o=[[vg,1,gg],[vg,5,5*gg],[vg,15,15*gg],[vg,30,30*gg],[s,1,$d],[s,5,5*$d],[s,15,15*$d],[s,30,30*$d],[i,1,yg],[i,3,3*yg],[i,6,6*yg],[i,12,12*yg],[r,1,t0],[r,2,2*t0],[n,1,Sne],[t,1,eye],[t,3,3*eye],[e,1,UV]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,d){const f=Math.abs(c-u)/d,h=SS(([,,g])=>g).right(o,f);if(h===o.length)return e.every(Sv(u/UV,c/UV,d));if(h===0)return uC.every(Math.max(Sv(u,c,d),1));const[p,m]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[h6t,p6t]=OMe(im,hI,DS,PMe,s8,r8),[m6t,g6t]=OMe(rm,fI,RS,Pg,i8,n8);function HV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function qV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o2(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function NMe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=a2(i),c=l2(i),d=a2(s),f=l2(s),h=a2(o),p=l2(o),m=a2(a),g=l2(a),y=a2(l),v=l2(l),b={a:H,A:q,b:G,B:U,c:null,d:oye,e:oye,f:j6t,g:K6t,G:Q6t,H:$6t,I:F6t,j:L6t,L:MMe,m:B6t,M:z6t,p:L,q:z,Q:uye,s:cye,S:V6t,u:U6t,U:H6t,V:q6t,w:W6t,W:G6t,x:null,X:null,y:Y6t,Y:X6t,Z:J6t,"%":lye},_={a:V,A:Y,b:Q,B:ne,c:null,d:aye,e:aye,f:n5t,g:f5t,G:p5t,H:Z6t,I:e5t,j:t5t,L:FMe,m:r5t,M:i5t,p:ue,q:se,Q:uye,s:cye,S:s5t,u:o5t,U:a5t,V:l5t,w:u5t,W:c5t,x:null,X:null,y:d5t,Y:h5t,Z:m5t,"%":lye},E={a:I,A:P,b:N,B:M,c:O,d:iye,e:iye,f:P6t,g:rye,G:nye,H:sye,I:sye,j:k6t,L:D6t,m:A6t,M:I6t,p:R,q:T6t,Q:N6t,s:M6t,S:R6t,u:x6t,U:_6t,V:E6t,w:w6t,W:C6t,x:j,X:B,y:rye,Y:nye,Z:S6t,"%":O6t};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),_.x=S(n,_),_.X=S(r,_),_.c=S(t,_);function S(ae,he){return function(ie){var le=[],Ce=-1,X=0,fe=ae.length,de,te,ee;for(ie instanceof Date||(ie=new Date(+ie));++Ce<fe;)ae.charCodeAt(Ce)===37&&(le.push(ae.slice(X,Ce)),(te=tye[de=ae.charAt(++Ce)])!=null?de=ae.charAt(++Ce):te=de==="e"?" ":"0",(ee=he[de])&&(de=ee(ie,te)),le.push(de),X=Ce+1);return le.push(ae.slice(X,Ce)),le.join("")}}function T(ae,he){return function(ie){var le=o2(1900,void 0,1),Ce=A(le,ae,ie+="",0),X,fe;if(Ce!=ie.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(he&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(X=qV(o2(le.y,0,1)),fe=X.getUTCDay(),X=fe>4||fe===0?P5.ceil(X):P5(X),X=tv.offset(X,(le.V-1)*7),le.y=X.getUTCFullYear(),le.m=X.getUTCMonth(),le.d=X.getUTCDate()+(le.w+6)%7):(X=HV(o2(le.y,0,1)),fe=X.getDay(),X=fe>4||fe===0?D5.ceil(X):D5(X),X=Pg.offset(X,(le.V-1)*7),le.y=X.getFullYear(),le.m=X.getMonth(),le.d=X.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),fe="Z"in le?qV(o2(le.y,0,1)).getUTCDay():HV(o2(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(fe+5)%7:le.w+le.U*7-(fe+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,qV(le)):HV(le)}}function A(ae,he,ie,le){for(var Ce=0,X=he.length,fe=ie.length,de,te;Ce<X;){if(le>=fe)return-1;if(de=he.charCodeAt(Ce++),de===37){if(de=he.charAt(Ce++),te=E[de in tye?he.charAt(Ce++):de],!te||(le=te(ae,ie,le))<0)return-1}else if(de!=ie.charCodeAt(le++))return-1}return le}function R(ae,he,ie){var le=u.exec(he.slice(ie));return le?(ae.p=c.get(le[0].toLowerCase()),ie+le[0].length):-1}function I(ae,he,ie){var le=h.exec(he.slice(ie));return le?(ae.w=p.get(le[0].toLowerCase()),ie+le[0].length):-1}function P(ae,he,ie){var le=d.exec(he.slice(ie));return le?(ae.w=f.get(le[0].toLowerCase()),ie+le[0].length):-1}function N(ae,he,ie){var le=y.exec(he.slice(ie));return le?(ae.m=v.get(le[0].toLowerCase()),ie+le[0].length):-1}function M(ae,he,ie){var le=m.exec(he.slice(ie));return le?(ae.m=g.get(le[0].toLowerCase()),ie+le[0].length):-1}function O(ae,he,ie){return A(ae,t,he,ie)}function j(ae,he,ie){return A(ae,n,he,ie)}function B(ae,he,ie){return A(ae,r,he,ie)}function H(ae){return o[ae.getDay()]}function q(ae){return s[ae.getDay()]}function G(ae){return l[ae.getMonth()]}function U(ae){return a[ae.getMonth()]}function L(ae){return i[+(ae.getHours()>=12)]}function z(ae){return 1+~~(ae.getMonth()/3)}function V(ae){return o[ae.getUTCDay()]}function Y(ae){return s[ae.getUTCDay()]}function Q(ae){return l[ae.getUTCMonth()]}function ne(ae){return a[ae.getUTCMonth()]}function ue(ae){return i[+(ae.getUTCHours()>=12)]}function se(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var he=S(ae+="",b);return he.toString=function(){return ae},he},parse:function(ae){var he=T(ae+="",!1);return he.toString=function(){return ae},he},utcFormat:function(ae){var he=S(ae+="",_);return he.toString=function(){return ae},he},utcParse:function(ae){var he=T(ae+="",!0);return he.toString=function(){return ae},he}}}var tye={"-":"",_:" ",0:"0"},_a=/^\s*\d+/,y6t=/^%/,v6t=/[\\^$*+?|[\]().{}]/g;function ui(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function b6t(e){return e.replace(v6t,"\\$&")}function a2(e){return new RegExp("^(?:"+e.map(b6t).join("|")+")","i")}function l2(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function w6t(e,t,n){var r=_a.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function x6t(e,t,n){var r=_a.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function _6t(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function E6t(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function C6t(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function nye(e,t,n){var r=_a.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function rye(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function S6t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function T6t(e,t,n){var r=_a.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function A6t(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function iye(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function k6t(e,t,n){var r=_a.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sye(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function I6t(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function R6t(e,t,n){var r=_a.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function D6t(e,t,n){var r=_a.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function P6t(e,t,n){var r=_a.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function O6t(e,t,n){var r=y6t.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function N6t(e,t,n){var r=_a.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function M6t(e,t,n){var r=_a.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function oye(e,t){return ui(e.getDate(),t,2)}function $6t(e,t){return ui(e.getHours(),t,2)}function F6t(e,t){return ui(e.getHours()%12||12,t,2)}function L6t(e,t){return ui(1+Pg.count(rm(e),e),t,3)}function MMe(e,t){return ui(e.getMilliseconds(),t,3)}function j6t(e,t){return MMe(e,t)+"000"}function B6t(e,t){return ui(e.getMonth()+1,t,2)}function z6t(e,t){return ui(e.getMinutes(),t,2)}function V6t(e,t){return ui(e.getSeconds(),t,2)}function U6t(e){var t=e.getDay();return t===0?7:t}function H6t(e,t){return ui(RS.count(rm(e)-1,e),t,2)}function $Me(e){var t=e.getDay();return t>=4||t===0?cC(e):cC.ceil(e)}function q6t(e,t){return e=$Me(e),ui(cC.count(rm(e),e)+(rm(e).getDay()===4),t,2)}function W6t(e){return e.getDay()}function G6t(e,t){return ui(D5.count(rm(e)-1,e),t,2)}function Y6t(e,t){return ui(e.getFullYear()%100,t,2)}function K6t(e,t){return e=$Me(e),ui(e.getFullYear()%100,t,2)}function X6t(e,t){return ui(e.getFullYear()%1e4,t,4)}function Q6t(e,t){var n=e.getDay();return e=n>=4||n===0?cC(e):cC.ceil(e),ui(e.getFullYear()%1e4,t,4)}function J6t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ui(t/60|0,"0",2)+ui(t%60,"0",2)}function aye(e,t){return ui(e.getUTCDate(),t,2)}function Z6t(e,t){return ui(e.getUTCHours(),t,2)}function e5t(e,t){return ui(e.getUTCHours()%12||12,t,2)}function t5t(e,t){return ui(1+tv.count(im(e),e),t,3)}function FMe(e,t){return ui(e.getUTCMilliseconds(),t,3)}function n5t(e,t){return FMe(e,t)+"000"}function r5t(e,t){return ui(e.getUTCMonth()+1,t,2)}function i5t(e,t){return ui(e.getUTCMinutes(),t,2)}function s5t(e,t){return ui(e.getUTCSeconds(),t,2)}function o5t(e){var t=e.getUTCDay();return t===0?7:t}function a5t(e,t){return ui(DS.count(im(e)-1,e),t,2)}function LMe(e){var t=e.getUTCDay();return t>=4||t===0?dC(e):dC.ceil(e)}function l5t(e,t){return e=LMe(e),ui(dC.count(im(e),e)+(im(e).getUTCDay()===4),t,2)}function u5t(e){return e.getUTCDay()}function c5t(e,t){return ui(P5.count(im(e)-1,e),t,2)}function d5t(e,t){return ui(e.getUTCFullYear()%100,t,2)}function f5t(e,t){return e=LMe(e),ui(e.getUTCFullYear()%100,t,2)}function h5t(e,t){return ui(e.getUTCFullYear()%1e4,t,4)}function p5t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?dC(e):dC.ceil(e),ui(e.getUTCFullYear()%1e4,t,4)}function m5t(){return"+0000"}function lye(){return"%"}function uye(e){return+e}function cye(e){return Math.floor(+e/1e3)}var y_,Tne,jMe,o8,BMe;g5t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function g5t(e){return y_=NMe(e),Tne=y_.format,jMe=y_.parse,o8=y_.utcFormat,BMe=y_.utcParse,y_}function y5t(e){return new Date(e)}function v5t(e){return e instanceof Date?+e:+new Date(+e)}function Ane(e,t,n,r,i,s,o,a,l,u){var c=EMe(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),_=u("%Y");function E(S){return(l(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:_)(S)}return c.invert=function(S){return new Date(d(S))},c.domain=function(S){return arguments.length?f(Array.from(S,v5t)):f().map(y5t)},c.ticks=function(S){var T=f();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:u(T)},c.nice=function(S){var T=f();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?f(TMe(T,S)):c},c.copy=function(){return ZR(c,Ane(e,t,n,r,i,s,o,a,l,u))},c}function zMe(){return Oh.apply(Ane(m6t,g6t,rm,fI,RS,Pg,i8,n8,vg,Tne).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function b5t(){return Oh.apply(Ane(h6t,p6t,im,hI,DS,tv,s8,r8,vg,o8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function a8(){var e=0,t=1,n,r,i,s,o=Qu,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),u):[o(0),o(1)]}}return u.range=c(A0),u.rangeRound=c(YR),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function c1(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kne(){var e=ix(a8()(Qu));return e.copy=function(){return c1(e,kne())},u1.apply(e,arguments)}function VMe(){var e=xne(a8()).domain([1,10]);return e.copy=function(){return c1(e,VMe()).base(e.base())},u1.apply(e,arguments)}function UMe(){var e=_ne(a8());return e.copy=function(){return c1(e,UMe()).constant(e.constant())},u1.apply(e,arguments)}function Ine(){var e=Ene(a8());return e.copy=function(){return c1(e,Ine()).exponent(e.exponent())},u1.apply(e,arguments)}function w5t(){return Ine.apply(null,arguments).exponent(.5)}function l8(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=Qu,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,u=nne(m,[y,v,b]),h):[u(0),u(.5),u(1)]}}return h.range=p(A0),h.rangeRound=p(YR),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function HMe(){var e=ix(l8()(Qu));return e.copy=function(){return c1(e,HMe())},u1.apply(e,arguments)}function qMe(){var e=xne(l8()).domain([.1,1,10]);return e.copy=function(){return c1(e,qMe()).base(e.base())},u1.apply(e,arguments)}function WMe(){var e=_ne(l8());return e.copy=function(){return c1(e,WMe()).constant(e.constant())},u1.apply(e,arguments)}function Rne(){var e=Ene(l8());return e.copy=function(){return c1(e,Rne()).exponent(e.exponent())},u1.apply(e,arguments)}function x5t(){return Rne.apply(null,arguments).exponent(.5)}function Nh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const _5t=Nh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),E5t=Nh("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),C5t=Nh("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),S5t=Nh("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),T5t=Nh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),A5t=Nh("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),k5t=Nh("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),I5t=Nh("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),R5t=Nh("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),D5t=Nh("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),GMe=Nh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function vi(e){return function(){return e}}const dye=Math.abs,ul=Math.atan2,W1=Math.cos,P5t=Math.max,WV=Math.min,up=Math.sin,Mb=Math.sqrt,hl=1e-12,fC=Math.PI,O5=fC/2,YMe=2*fC;function O5t(e){return e>1?0:e<-1?fC:Math.acos(e)}function fye(e){return e>=1?O5:e<=-1?-O5:Math.asin(e)}function u8(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new ane(t)}function N5t(e){return e.innerRadius}function M5t(e){return e.outerRadius}function $5t(e){return e.startAngle}function F5t(e){return e.endAngle}function L5t(e){return e&&e.padAngle}function j5t(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,c=o-i,d=a-s,f=d*l-c*u;if(!(f*f<hl))return f=(c*(t-s)-d*(e-i))/f,[e+f*l,t+f*u]}function tO(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/Mb(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,m=r+d,g=(f+p)/2,y=(h+m)/2,v=p-f,b=m-h,_=v*v+b*b,E=i-s,S=f*m-p*h,T=(b<0?-1:1)*Mb(P5t(0,E*E*_-S*S)),A=(S*b-v*T)/_,R=(-S*v-b*T)/_,I=(S*b+v*T)/_,P=(-S*v+b*T)/_,N=A-g,M=R-y,O=I-g,j=P-y;return N*N+M*M>O*O+j*j&&(A=I,R=P),{cx:A,cy:R,x01:-c,y01:-d,x11:A*(i/E-1),y11:R*(i/E-1)}}function B5t(){var e=N5t,t=M5t,n=vi(0),r=null,i=$5t,s=F5t,o=L5t,a=null,l=u8(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-O5,m=s.apply(this,arguments)-O5,g=dye(m-p),y=m>p;if(a||(a=c=l()),h<f&&(d=h,h=f,f=d),!(h>hl))a.moveTo(0,0);else if(g>YMe-hl)a.moveTo(h*W1(p),h*up(p)),a.arc(0,0,h,p,m,!y),f>hl&&(a.moveTo(f*W1(m),f*up(m)),a.arc(0,0,f,m,p,y));else{var v=p,b=m,_=p,E=m,S=g,T=g,A=o.apply(this,arguments)/2,R=A>hl&&(r?+r.apply(this,arguments):Mb(f*f+h*h)),I=WV(dye(h-f)/2,+n.apply(this,arguments)),P=I,N=I,M,O;if(R>hl){var j=fye(R/f*up(A)),B=fye(R/h*up(A));(S-=j*2)>hl?(j*=y?1:-1,_+=j,E-=j):(S=0,_=E=(p+m)/2),(T-=B*2)>hl?(B*=y?1:-1,v+=B,b-=B):(T=0,v=b=(p+m)/2)}var H=h*W1(v),q=h*up(v),G=f*W1(E),U=f*up(E);if(I>hl){var L=h*W1(b),z=h*up(b),V=f*W1(_),Y=f*up(_),Q;if(g<fC)if(Q=j5t(H,q,V,Y,L,z,G,U)){var ne=H-Q[0],ue=q-Q[1],se=L-Q[0],ae=z-Q[1],he=1/up(O5t((ne*se+ue*ae)/(Mb(ne*ne+ue*ue)*Mb(se*se+ae*ae)))/2),ie=Mb(Q[0]*Q[0]+Q[1]*Q[1]);P=WV(I,(f-ie)/(he-1)),N=WV(I,(h-ie)/(he+1))}else P=N=0}T>hl?N>hl?(M=tO(V,Y,H,q,h,N,y),O=tO(L,z,G,U,h,N,y),a.moveTo(M.cx+M.x01,M.cy+M.y01),N<I?a.arc(M.cx,M.cy,N,ul(M.y01,M.x01),ul(O.y01,O.x01),!y):(a.arc(M.cx,M.cy,N,ul(M.y01,M.x01),ul(M.y11,M.x11),!y),a.arc(0,0,h,ul(M.cy+M.y11,M.cx+M.x11),ul(O.cy+O.y11,O.cx+O.x11),!y),a.arc(O.cx,O.cy,N,ul(O.y11,O.x11),ul(O.y01,O.x01),!y))):(a.moveTo(H,q),a.arc(0,0,h,v,b,!y)):a.moveTo(H,q),!(f>hl)||!(S>hl)?a.lineTo(G,U):P>hl?(M=tO(G,U,L,z,f,-P,y),O=tO(H,q,V,Y,f,-P,y),a.lineTo(M.cx+M.x01,M.cy+M.y01),P<I?a.arc(M.cx,M.cy,P,ul(M.y01,M.x01),ul(O.y01,O.x01),!y):(a.arc(M.cx,M.cy,P,ul(M.y01,M.x01),ul(M.y11,M.x11),!y),a.arc(0,0,f,ul(M.cy+M.y11,M.cx+M.x11),ul(O.cy+O.y11,O.cx+O.x11),y),a.arc(O.cx,O.cy,P,ul(O.y11,O.x11),ul(O.y01,O.x01),!y))):a.arc(0,0,f,E,_,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-fC/2;return[W1(d)*c,up(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:vi(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:vi(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:vi(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:vi(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:vi(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:vi(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:vi(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function KMe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XMe(e){this._context=e}XMe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Dne(e){return new XMe(e)}function QMe(e){return e[0]}function JMe(e){return e[1]}function ZMe(e,t){var n=vi(!0),r=null,i=Dne,s=null,o=u8(a);e=typeof e=="function"?e:e===void 0?QMe:vi(e),t=typeof t=="function"?t:t===void 0?JMe:vi(t);function a(l){var u,c=(l=KMe(l)).length,d,f=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(d,u,l),+t(d,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:vi(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:vi(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:vi(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function e6e(e,t,n){var r=null,i=vi(!0),s=null,o=Dne,a=null,l=u8(u);e=typeof e=="function"?e:e===void 0?QMe:vi(+e),t=typeof t=="function"?t:vi(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?JMe:vi(+n);function u(d){var f,h,p,m=(d=KMe(d)).length,g,y=!1,v,b=new Array(m),_=new Array(m);for(s==null&&(a=o(v=l())),f=0;f<=m;++f){if(!(f<m&&i(g=d[f],f,d))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(b[p],_[p]);a.lineEnd(),a.areaEnd()}y&&(b[f]=+e(g,f,d),_[f]=+t(g,f,d),a.point(r?+r(g,f,d):b[f],n?+n(g,f,d):_[f]))}if(v)return a=null,v+""||null}function c(){return ZMe().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:vi(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:vi(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:vi(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:vi(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:vi(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:vi(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:vi(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}const z5t={draw(e,t){const n=Mb(t/fC);e.moveTo(n,0),e.arc(0,0,n,0,YMe)}};function V5t(e,t){let n=null,r=u8(i);e=typeof e=="function"?e:vi(e||z5t),t=typeof t=="function"?t:vi(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:vi(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:vi(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function Av(){}function N5(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function c8(e){this._context=e}c8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:N5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function U5t(e){return new c8(e)}function t6e(e){this._context=e}t6e.prototype={areaStart:Av,areaEnd:Av,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:N5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function H5t(e){return new t6e(e)}function n6e(e){this._context=e}n6e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:N5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q5t(e){return new n6e(e)}function r6e(e,t){this._basis=new c8(e),this._beta=t}r6e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const W5t=(function e(t){function n(r){return t===1?new c8(r):new r6e(r,t)}return n.beta=function(r){return e(+r)},n})(.85);function M5(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Pne(e,t){this._context=e,this._k=(1-t)/6}Pne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:M5(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:M5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const G5t=(function e(t){function n(r){return new Pne(r,t)}return n.tension=function(r){return e(+r)},n})(0);function One(e,t){this._context=e,this._k=(1-t)/6}One.prototype={areaStart:Av,areaEnd:Av,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:M5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Y5t=(function e(t){function n(r){return new One(r,t)}return n.tension=function(r){return e(+r)},n})(0);function Nne(e,t){this._context=e,this._k=(1-t)/6}Nne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:M5(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const K5t=(function e(t){function n(r){return new Nne(r,t)}return n.tension=function(r){return e(+r)},n})(0);function Mne(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>hl){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>hl){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function i6e(e,t){this._context=e,this._alpha=t}i6e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Mne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const X5t=(function e(t){function n(r){return t?new i6e(r,t):new Pne(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function s6e(e,t){this._context=e,this._alpha=t}s6e.prototype={areaStart:Av,areaEnd:Av,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Mne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Q5t=(function e(t){function n(r){return t?new s6e(r,t):new One(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function o6e(e,t){this._context=e,this._alpha=t}o6e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Mne(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const J5t=(function e(t){function n(r){return t?new o6e(r,t):new Nne(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function a6e(e){this._context=e}a6e.prototype={areaStart:Av,areaEnd:Av,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Z5t(e){return new a6e(e)}function hye(e){return e<0?-1:1}function pye(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(hye(s)+hye(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function mye(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function GV(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function $5(e){this._context=e}$5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GV(this,this._t0,mye(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,GV(this,mye(this,n=pye(this,e,t)),n);break;default:GV(this,this._t0,n=pye(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function l6e(e){this._context=new u6e(e)}(l6e.prototype=Object.create($5.prototype)).point=function(e,t){$5.prototype.point.call(this,t,e)};function u6e(e){this._context=e}u6e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function e$t(e){return new $5(e)}function t$t(e){return new l6e(e)}function c6e(e){this._context=e}c6e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=gye(e),i=gye(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function gye(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function n$t(e){return new c6e(e)}function d8(e,t){this._context=e,this._t=t}d8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function r$t(e){return new d8(e,.5)}function i$t(e){return new d8(e,0)}function s$t(e){return new d8(e,1)}function uA(e,t,n){this.k=e,this.x=t,this.y=n}uA.prototype={constructor:uA,scale:function(e){return e===1?this:new uA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new uA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};uA.prototype;var YV,yye;function o$t(){if(yye)return YV;yye=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof $i=="object"&&$i&&$i.Object===Object&&$i,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(E,S,T){var A,R,I,P,N,M,O=0,j=!1,B=!1,H=!0;if(typeof E!="function")throw new TypeError(e);S=_(S)||0,y(T)&&(j=!!T.leading,B="maxWait"in T,I=B?h(_(T.maxWait)||0,S):I,H="trailing"in T?!!T.trailing:H);function q(ue){var se=A,ae=R;return A=R=void 0,O=ue,P=E.apply(ae,se),P}function G(ue){return O=ue,N=setTimeout(z,S),j?q(ue):P}function U(ue){var se=ue-M,ae=ue-O,he=S-se;return B?p(he,I-ae):he}function L(ue){var se=ue-M,ae=ue-O;return M===void 0||se>=S||se<0||B&&ae>=I}function z(){var ue=m();if(L(ue))return V(ue);N=setTimeout(z,U(ue))}function V(ue){return N=void 0,H&&A?q(ue):(A=R=void 0,P)}function Y(){N!==void 0&&clearTimeout(N),O=0,A=M=R=N=void 0}function Q(){return N===void 0?P:V(m())}function ne(){var ue=m(),se=L(ue);if(A=arguments,R=this,M=ue,se){if(N===void 0)return G(M);if(B)return N=setTimeout(z,S),q(M)}return N===void 0&&(N=setTimeout(z,S)),P}return ne.cancel=Y,ne.flush=Q,ne}function y(E){var S=typeof E;return!!E&&(S=="object"||S=="function")}function v(E){return!!E&&typeof E=="object"}function b(E){return typeof E=="symbol"||v(E)&&f.call(E)==n}function _(E){if(typeof E=="number")return E;if(b(E))return t;if(y(E)){var S=typeof E.valueOf=="function"?E.valueOf():E;E=y(S)?S+"":S}if(typeof E!="string")return E===0?E:+E;E=E.replace(r,"");var T=s.test(E);return T||o.test(E)?a(E.slice(2),T?2:8):i.test(E)?t:+E}return YV=g,YV}var a$t=o$t();const _d=Ao(a$t);function $ne({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const l=k.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),u=k.useCallback(c=>(s?o8("%B"):AS(".2s"))(c),[s]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:w.jsx(Ko,{children:w.jsx(Pn,{gap:3,children:w.jsx(He,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?w.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:d})=>w.jsxs("g",{transform:`translate(${d}, ${n})`,children:[w.jsx("line",{y2:"6",stroke:"currentColor"}),o?w.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,w.jsx("foreignObject",{x:0-l/2,y:10,width:l,height:20,children:w.jsx(Ko,{children:w.jsx(bt,{withinPortal:!0,label:c,children:w.jsx(He,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:u(s?new Date(c):c)})})})})]},c))]})}const d6e=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:$ne},Symbol.toStringTag,{value:"Module"}));function f6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=k.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=k.useMemo(()=>AS(".2s"),[]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Ko,{children:w.jsx(Pn,{gap:3,children:w.jsx(He,{size:"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>w.jsxs("g",{transform:`translate(${n}, ${a})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),w.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const h6e=Object.freeze(Object.defineProperty({__proto__:null,YAxis:f6e},Symbol.toStringTag,{value:"Module"})),KV=15;function p6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,l]=k.useState([0,0]),[u,c]=k.useState(!1);return k.useEffect(()=>{const d=Lo("#scatterSvgBrushStudy");if(d){const f=d.node().getBoundingClientRect();d.on("mousemove",h=>{const p=[h.clientX-f.x,h.clientY-f.y];if(l(p),u){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<KV&&Math.abs(t(g[r.y])-p[1])<KV);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),d.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),d.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,u,o,r,n,e,t]),w.jsx("circle",{style:{cursor:u?"pointer":"default"},r:KV,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const m6e=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:p6e},Symbol.toStringTag,{value:"Module"})),cs={top:15,left:100,right:15,bottom:70};function XY({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:l,width:u}]=nh(),[c]=nh(),[d]=nh(),[f,h]=k.useState(!0),p=k.useMemo(()=>u-cs.left-cs.right,[u]),m=k.useMemo(()=>l-cs.top-cs.bottom,[l]),g=k.useMemo(()=>{const I=Array.from(new Set(s.map(P=>P[i.category])));return IS(GMe).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:_}=k.useMemo(()=>{const I=s.map(B=>+B[i.x]).filter(B=>B!==null),[P,N]=K6(I),M=s.map(B=>+B[i.y]).filter(B=>B!==null),[O,j]=K6(M);return{xMin:P,xMax:N,yMin:O,yMax:j}},[s,i.x,i.y]),E=k.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?zMe([cs.left,p+cs.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):sc([cs.left,p+cs.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=k.useMemo(()=>{const I=_-v;return m<=0?null:sc([m+cs.top,cs.top]).domain([v-I/10,_+I/10]).nice()},[m,_,v]),T=k.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const I=bOt().extent([[cs.left,cs.top+m-5],[cs.left+p,cs.top+m+5]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[N.selection[0],null],[N.selection[1],null]],E,S,N.mode)}),P=wOt().extent([[cs.left-5,cs.top],[cs.left+5,cs.top+m]]).on("brush end",N=>{N.sourceEvent!==void 0&&n([[null,N.selection[0]],[null,N.selection[1]]],E,S,N.mode)});return c.current&&d.current&&(Lo(d.current).call(P),Lo(c.current).call(I),t.hasBrush||(Lo(d.current).call(P.move,[S(_),S(v)]),Lo(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(_)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{Lo(d.current).call(P.move,[S(_),S(v)]),Lo(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(_)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const I=xOt().extent([[cs.left,cs.top],[cs.left+p,cs.top+m]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],E,S,P.mode)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(Lo(a.current).call(I.move,null),e(null))});return Lo(a.current).call(I),()=>{Lo(a.current).call(I.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(_)],[E(b),S(v)]],E,S,null),()=>n([[E(y),S(_)],[E(b),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(_)],[E(b),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,d,m,a,n,e,p,b,y,E,_,v,S]),A=k.useMemo(()=>o.length===0?null:new Set(o),[o]),R=k.useMemo(()=>!E||!S?null:s.map((I,P)=>{if(I[i.x]===null||I[i.y]===null)return null;const N=i.dataType==="date"?E(new Date(I[i.x])):E(I[i.x]);return w.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:N,cy:S(I[i.y])},P)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return k.useEffect(()=>{r==="Axis Selection"&&fPt(".handle").style("fill","darkgrey")},[t,r]),w.jsxs(Gn,{children:[w.jsxs(Pn,{children:[w.jsx(Yt,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T?.()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?w.jsx(ZF,{defaultChecked:!0,value:f?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),w.jsxs(Pn,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?w.jsxs("g",{children:[w.jsx(f6e,{yScale:S,label:i.y,horizontalPosition:cs.left,xRange:E.range()}),w.jsx($ne,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+cs.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:E(I)}))})]}):null,R,w.jsx("g",{id:"brushXRef",ref:c}),w.jsx("g",{id:"brushYRef",ref:d}),E&&S&&r==="Paintbrush Selection"?w.jsx(p6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:f,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?w.jsxs(Gn,{style:{flexGrow:1},gap:50,children:[w.jsxs(Gn,{gap:0,children:[w.jsx(He,{children:i.x}),w.jsx(Nk,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[E(I[0]),t.y1],[E(I[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(I=>({value:I,label:I})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),w.jsxs(Gn,{gap:0,children:[w.jsx(He,{children:i.y}),w.jsx(Nk,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const g6e=Object.freeze(Object.defineProperty({__proto__:null,Scatter:XY,default:XY},Symbol.toStringTag,{value:"Module"}));function y6e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=k.useMemo(()=>{const l=i.reduce((u,{value:c})=>{const{length:d}=`${c}`;return d>u?d:u},0);return l>10?60:l*6},[i]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(Ko,{children:w.jsx(Pn,{gap:3,children:w.jsx(He,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:l,offset:u})=>w.jsxs("g",{transform:`translate(${n}, ${u})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),s?w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,w.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:w.jsx("foreignObject",{width:a,height:20,children:w.jsx(Pn,{style:{width:"100%",height:"100%"},justify:"right",children:w.jsx(He,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:l})})})},l)]},l))]})}const v6e=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:y6e},Symbol.toStringTag,{value:"Module"})),vd={top:15,left:100,right:50,bottom:50};function QY({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=nh(),o=k.useMemo(()=>s-vd.left-vd.right,[s]),a=k.useMemo(()=>i-vd.top-vd.bottom,[i]),l=k.useMemo(()=>{const f=Array.from(new Set(n.map(h=>h[t.category])));return IS(GMe).domain(f)},[n,t.category]),u=k.useMemo(()=>e?sc([vd.left,o+vd.left]).domain([0,ev(e.objects().map(f=>f.count))]).nice():null,[e,o]),c=k.useMemo(()=>e?_Me([vd.top,a+vd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),d=k.useMemo(()=>!u||!c||!l||!e?null:e.objects().map((f,h)=>f[t.category]===null||f.count===null?null:w.jsxs("g",{children:[w.jsx("rect",{x:vd.left,y:c(f[t.category]),fill:l(f[t.category]),height:c.bandwidth(),width:u(f.count)-vd.left},h),w.jsx("text",{x:u(f.count)+5,y:c(f[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:f.count})]},h)),[e,l,t.category,u,c]);return c&&u?w.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx($ne,{xScale:u,yRange:c.range(),vertPosition:a+vd.top,showLines:!1,label:"Count",ticks:u.ticks(5).map(f=>({value:f.toString(),offset:u(f)}))}),c?w.jsx(y6e,{yScale:c,horizontalPosition:vd.left,xRange:u.range(),label:t.category,ticks:l.domain().map(f=>({value:f,offset:c(f)+c.bandwidth()/2}))}):null,d]}):w.jsx(td,{})}const b6e=Object.freeze(Object.defineProperty({__proto__:null,Bar:QY,default:QY},Symbol.toStringTag,{value:"Module"}));function JY({parameters:e,setAnswer:t,provenanceState:n,updateState:r=()=>null}){const[i,s]=k.useState(null),[o,a]=k.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});k.useEffect(()=>{a(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[l,u]=k.useState(null);k.useEffect(()=>{JOt(`./data/${e.dataset}.csv`).then(v=>{u(v)})},[e]);const c=k.useMemo(()=>l?wkt(l):null,[l]),{actions:d,trrack:f}=k.useMemo(()=>{const v=a1.create(),b=v.register("brush",(A,R)=>(A.all={brush:R},A)),_=v.register("brushMove",(A,R)=>(A.all={brush:R},A)),E=v.register("brushResize",(A,R)=>(A.all={brush:R},A)),S=v.register("brushClear",(A,R)=>(A.all={brush:R},A)),T=CS({registry:v,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:b,brushMove:_,brushResize:E,clearBrush:S},trrack:T}},[]),h=k.useCallback((v,b)=>{v==="drag"?f.apply("Move Brush",d.brushMove(b)):v==="handle"&&f.apply("Brush",d.brush(b))},[d,f]),p=k.useMemo(()=>_d(h,100,{maxWait:100}),[h]),m=k.useCallback((v,b,_,E,S)=>{if(!b||!_)return;const T=b.invert(v[0][0]||o.x1),A=b.invert(v[1][0]||o.x2),R=_.invert(v[1][1]||o.y2),I=_.invert(v[0][1]||o.y1);let P=null;if(E==="clear")P=c;else if(S){const M=new Set(S);P=c.filter(nV(O=>M.has(O[e.ids])))}else e.brushType==="Axis Selection"?P=c.filter(nV(M=>new Date(M[e.x])>=new Date(T)&&new Date(M[e.x])<=new Date(A)&&M[e.y]>=R&&M[e.y]<=I)):P=c.filter(nV(M=>M[e.x]>=T&&M[e.x]<=A&&M[e.y]>=R&&M[e.y]<=I));const N={x1:v[0][0]||o?.x1||0,x2:v[1][0]||o?.x2||0,y1:v[0][1]||o?.y1||0,y2:v[1][1]||o?.y2||0,hasBrush:E!=="clear",ids:E!=="clear"?P?.array("id"):[]};a(N),E==="drag"||E==="handle"?p(E,N):E==="clear"&&f.apply("Clear Brush",d.clearBrush(N)),s(P),r(N),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[o,c,e,f,t,p,d]),g=k.useMemo(()=>i?i?.groupby(e.category).count():c?c?.groupby(e.category).count():null,[i,c,e.category]),y=k.useCallback(v=>{s(v)},[]);return l?w.jsxs(Gn,{gap:"xs",children:[w.jsx(XY,{brushedPoints:o?.ids,data:l,params:e,brushType:e.brushType,setBrushedSpace:m,brushState:o,setFilteredTable:y}),w.jsx(QY,{data:l,parameters:e,barsTable:g})]}):w.jsx(td,{})}const w6e=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:JY,default:JY},Symbol.toStringTag,{value:"Module"}));function Fne({state:e,params:t,answers:n,onStateChange:r}){return w.jsx(JY,{parameters:t,setAnswer:()=>null,provenanceState:e?{all:e}:void 0,updateState:r||(()=>null),answers:n})}const x6e=Object.freeze(Object.defineProperty({__proto__:null,default:Fne},Symbol.toStringTag,{value:"Module"}));function l$t(){return w.jsx(Fne,{params:{dataset:"penguin",x:"Body Mass (g)",y:"Flipper Length (mm)",category:"Species",ids:"id",brushType:"Slider Selection"},answers:{}})}const _6e=Object.freeze(Object.defineProperty({__proto__:null,default:l$t},Symbol.toStringTag,{value:"Module"}));function u$t({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=k.useState(),{actions:s,trrack:o}=k.useMemo(()=>{const l=a1.create(),u=l.register("brush",(d,f)=>(d.brush=f,d)),c=CS({registry:l,initialState:{brush:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:u},trrack:c}},[]),a=k.useCallback(l=>{i(l),o.apply("Brush",s.brush(l)),t({answers:{},status:!0,provenanceGraph:o.graph.backend})},[s,t,o]);return w.jsx(Fne,{params:e,state:n||r,onStateChange:a,answers:{}})}const E6e=Object.freeze(Object.defineProperty({__proto__:null,default:u$t},Symbol.toStringTag,{value:"Module"})),c$t=e=>e.sort((n,r)=>parseInt(n.trialOrder.split("_").at(-1)||"0",10)-parseInt(r.trialOrder.split("_").at(-1)||"0",10)).at(-1);function d$t({answers:e}){const t=Object.values(e).filter(a=>a.componentName==="trial");if(t.length===0)return{component:"trial",parameters:{r1:.1,r2:.9},correctAnswer:[{id:"buttonsResponse",answer:"right"}]};if(t.length===9)return{component:null};const n=c$t(t),r=n.parameters.r2===.9,i=r?n.parameters.r1+.1:n.parameters.r2+.1;return{component:"trial",parameters:{r1:r?.9:i,r2:r?i:.9},correctAnswer:[{id:"buttonsResponse",answer:r?"left":"right"}]}}const C6e=Object.freeze(Object.defineProperty({__proto__:null,default:d$t},Symbol.toStringTag,{value:"Module"})),XV=300,nO=300;function ZY({r:e,datasetName:t}){const n=k.useRef(null),[r,i]=k.useState([]),[s,o]=k.useState(!1),a={left:0,top:20,right:20,bottom:20},l=nO-a.bottom,u=XV-a.left-a.right;k.useEffect(()=>{(async()=>{try{const f=`${as}tutorial/assets/datasets/size_100/${t}`,h=await fetch(f);if(!h.ok)throw new Error(`Failed to fetch dataset: ${f}`);const g=(await h.text()).trim().split(`
`).slice(1).map(y=>{const[v,b]=y.split(",").map(Number);return[v,b]});i(g)}catch(f){console.error("Error loading dataset:",f)}})()},[e]);const c=k.useCallback(()=>{if(r.length===0)return;const d=sc().domain([0,1]).range([0,u]),f=sc().domain([0,1]).range([l,0]),h=SNe(d).tickSize(0).tickFormat(()=>""),p=TNe(f).tickSize(0).tickFormat(()=>""),m=Lo(n.current).attr("width",XV).attr("height",nO);m.selectAll("*").remove(),m.append("g").attr("transform",`translate(${a.left}, ${nO-a.bottom+19})`).call(h),m.append("g").attr("transform",`translate(${a.left}, ${a.top})`).call(p),m.selectAll(".dot").data(r).enter().append("circle").attr("class","dot").attr("r",2).attr("cx",g=>d(g[0])+a.left).attr("cy",g=>f(g[1])+a.top).style("fill","black")},[r,u,l,a.left,a.top]);return k.useEffect(()=>{c()},[c]),w.jsxs("svg",{className:"d3-component",width:XV,height:nO,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[w.jsx("g",{id:"d3Stuff",ref:n}),w.jsx("rect",{x:0,y:20,width:u,height:l,cursor:"pointer",opacity:s?.2:0,fill:"cornflowerblue"})]})}const S6e=Object.freeze(Object.defineProperty({__proto__:null,Scatter:ZY},Symbol.toStringTag,{value:"Module"}));function f$t({parameters:e}){const{r1:t,r2:n}=e,r=`dataset_${t.toFixed(1)}_size_100.csv`,i=`dataset_${n.toFixed(1)}_size_100.csv`;return w.jsxs(Gn,{style:{width:"100%",height:"100%"},children:[w.jsx(He,{style:{textAlign:"center",paddingBottom:"0px",fontSize:"18px",fontWeight:"bold"},children:"Please select the visualization that appears to have a larger correlation."}),w.jsx(He,{style:{textAlign:"center",paddingBottom:"24px",fontSize:"18px",fontWeight:"bold"},children:"You can either click the buttons or use the left and right keys."}),w.jsx(Ko,{children:w.jsxs(Pn,{style:{gap:"40px"},mb:"md",children:[w.jsx(ZY,{r:t,datasetName:r}),w.jsx(ZY,{r:n,datasetName:i})]})})]})}const T6e=Object.freeze(Object.defineProperty({__proto__:null,default:f$t},Symbol.toStringTag,{value:"Module"})),A6e=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),k6e=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),QV=300,rO=300;function h$t({r:e,datasetName:t}){const n=k.useRef(null),[r,i]=k.useState([]),[s,o]=k.useState(!1),a={left:0,top:20,right:20,bottom:20},l=rO-a.bottom,u=QV-a.left-a.right;k.useEffect(()=>{(async()=>{try{const f=`${as}tutorial/assets/datasets/size_100/${t}`,h=await fetch(f);if(!h.ok)throw new Error(`Failed to fetch dataset: ${f}`);const g=(await h.text()).trim().split(`
`).slice(1).map(y=>{const[v,b]=y.split(",").map(Number);return[v,b]});i(g)}catch(f){console.error("Error loading dataset:",f)}})()},[e]);const c=k.useCallback(()=>{if(r.length===0)return;const d=sc().domain([0,1]).range([0,u]),f=sc().domain([0,1]).range([l,0]),h=SNe(d).tickSize(0).tickFormat(()=>""),p=TNe(f).tickSize(0).tickFormat(()=>""),m=Lo(n.current).attr("width",QV).attr("height",rO);m.selectAll("*").remove(),m.append("g").attr("transform",`translate(${a.left}, ${rO-a.bottom+19})`).call(h),m.append("g").attr("transform",`translate(${a.left}, ${a.top})`).call(p),m.selectAll(".dot").data(r).enter().append("circle").attr("class","dot").attr("r",2).attr("cx",g=>d(g[0])+a.left).attr("cy",g=>f(g[1])+a.top).style("fill","black")},[r,u,l,a.left,a.top]);return k.useEffect(()=>{c()},[c]),w.jsxs("svg",{className:"d3-component",width:QV,height:rO,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[w.jsx("g",{id:"d3Stuff",ref:n}),w.jsx("rect",{x:0,y:20,width:u,height:l,cursor:"pointer",opacity:s?.2:0,fill:"cornflowerblue"})]})}const I6e=Object.freeze(Object.defineProperty({__proto__:null,Scatter:h$t},Symbol.toStringTag,{value:"Module"})),R6e=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var _4={exports:{}};function bg(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var E4={exports:{}};const p$t={},m$t=Object.freeze(Object.defineProperty({__proto__:null,default:p$t},Symbol.toStringTag,{value:"Module"})),D6e=RYe(m$t);var g$t=E4.exports,vye;function Vr(){return vye||(vye=1,(function(e,t){(function(n,r){e.exports=r()})(g$t,function(){var n=n||(function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof $i<"u"&&$i.crypto&&(s=$i.crypto),!s&&typeof bg=="function")try{s=D6e}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||(function(){function v(){}return function(b){var _;return v.prototype=b,_=new v,v.prototype=null,_}})(),l={},u=l.lib={},c=u.Base=(function(){return{extend:function(v){var b=a(this);return v&&b.mixIn(v),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var b in v)v.hasOwnProperty(b)&&(this[b]=v[b]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),d=u.WordArray=c.extend({init:function(v,b){v=this.words=v||[],b!=i?this.sigBytes=b:this.sigBytes=v.length*4},toString:function(v){return(v||h).stringify(this)},concat:function(v){var b=this.words,_=v.words,E=this.sigBytes,S=v.sigBytes;if(this.clamp(),E%4)for(var T=0;T<S;T++){var A=_[T>>>2]>>>24-T%4*8&255;b[E+T>>>2]|=A<<24-(E+T)%4*8}else for(var R=0;R<S;R+=4)b[E+R>>>2]=_[R>>>2];return this.sigBytes+=S,this},clamp:function(){var v=this.words,b=this.sigBytes;v[b>>>2]&=4294967295<<32-b%4*8,v.length=r.ceil(b/4)},clone:function(){var v=c.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var b=[],_=0;_<v;_+=4)b.push(o());return new d.init(b,v)}}),f=l.enc={},h=f.Hex={stringify:function(v){for(var b=v.words,_=v.sigBytes,E=[],S=0;S<_;S++){var T=b[S>>>2]>>>24-S%4*8&255;E.push((T>>>4).toString(16)),E.push((T&15).toString(16))}return E.join("")},parse:function(v){for(var b=v.length,_=[],E=0;E<b;E+=2)_[E>>>3]|=parseInt(v.substr(E,2),16)<<24-E%8*4;return new d.init(_,b/2)}},p=f.Latin1={stringify:function(v){for(var b=v.words,_=v.sigBytes,E=[],S=0;S<_;S++){var T=b[S>>>2]>>>24-S%4*8&255;E.push(String.fromCharCode(T))}return E.join("")},parse:function(v){for(var b=v.length,_=[],E=0;E<b;E++)_[E>>>2]|=(v.charCodeAt(E)&255)<<24-E%4*8;return new d.init(_,b)}},m=f.Utf8={stringify:function(v){try{return decodeURIComponent(escape(p.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return p.parse(unescape(encodeURIComponent(v)))}},g=u.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=m.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var b,_=this._data,E=_.words,S=_.sigBytes,T=this.blockSize,A=T*4,R=S/A;v?R=r.ceil(R):R=r.max((R|0)-this._minBufferSize,0);var I=R*T,P=r.min(I*4,S);if(I){for(var N=0;N<I;N+=T)this._doProcessBlock(E,N);b=E.splice(0,I),_.sigBytes-=P}return new d.init(b,P)},clone:function(){var v=c.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});u.Hasher=g.extend({cfg:c.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){v&&this._append(v);var b=this._doFinalize();return b},blockSize:16,_createHelper:function(v){return function(b,_){return new v.init(_).finalize(b)}},_createHmacHelper:function(v){return function(b,_){return new y.HMAC.init(v,_).finalize(b)}}});var y=l.algo={};return l})(Math);return n})})(E4)),E4.exports}var C4={exports:{}},y$t=C4.exports,bye;function f8(){return bye||(bye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(y$t,function(n){return(function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=i.x64={};l.Word=o.extend({init:function(u,c){this.high=u,this.low=c}}),l.WordArray=o.extend({init:function(u,c){u=this.words=u||[],c!=r?this.sigBytes=c:this.sigBytes=u.length*8},toX32:function(){for(var u=this.words,c=u.length,d=[],f=0;f<c;f++){var h=u[f];d.push(h.high),d.push(h.low)}return a.create(d,this.sigBytes)},clone:function(){for(var u=o.clone.call(this),c=u.words=this.words.slice(0),d=c.length,f=0;f<d;f++)c[f]=c[f].clone();return u}})})(),n})})(C4)),C4.exports}var S4={exports:{}},v$t=S4.exports,wye;function b$t(){return wye||(wye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(v$t,function(n){return(function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(l){if(l instanceof ArrayBuffer&&(l=new Uint8Array(l)),(l instanceof Int8Array||typeof Uint8ClampedArray<"u"&&l instanceof Uint8ClampedArray||l instanceof Int16Array||l instanceof Uint16Array||l instanceof Int32Array||l instanceof Uint32Array||l instanceof Float32Array||l instanceof Float64Array)&&(l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength)),l instanceof Uint8Array){for(var u=l.byteLength,c=[],d=0;d<u;d++)c[d>>>2]|=l[d]<<24-d%4*8;o.call(this,c,u)}else o.apply(this,arguments)};a.prototype=s}})(),n.lib.WordArray})})(S4)),S4.exports}var T4={exports:{}},w$t=T4.exports,xye;function x$t(){return xye||(xye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(w$t,function(n){return(function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var h=u[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return s.create(c,u*2)}},o.Utf16LE={stringify:function(l){for(var u=l.words,c=l.sigBytes,d=[],f=0;f<c;f+=2){var h=a(u[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(l){for(var u=l.length,c=[],d=0;d<u;d++)c[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return s.create(c,u*2)}};function a(l){return l<<8&4278255360|l>>>8&16711935}})(),n.enc.Utf16})})(T4)),T4.exports}var A4={exports:{}},_$t=A4.exports,_ye;function ax(){return _ye||(_ye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(_$t,function(n){return(function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,d=this._map;l.clamp();for(var f=[],h=0;h<c;h+=3)for(var p=u[h>>>2]>>>24-h%4*8&255,m=u[h+1>>>2]>>>24-(h+1)%4*8&255,g=u[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,v=0;v<4&&h+v*.75<c;v++)f.push(d.charAt(y>>>6*(3-v)&63));var b=d.charAt(64);if(b)for(;f.length%4;)f.push(b);return f.join("")},parse:function(l){var u=l.length,c=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<c.length;f++)d[c.charCodeAt(f)]=f}var h=c.charAt(64);if(h){var p=l.indexOf(h);p!==-1&&(u=p)}return a(l,u,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,u,c){for(var d=[],f=0,h=0;h<u;h++)if(h%4){var p=c[l.charCodeAt(h-1)]<<h%4*2,m=c[l.charCodeAt(h)]>>>6-h%4*2,g=p|m;d[f>>>2]|=g<<24-f%4*8,f++}return s.create(d,f)}})(),n.enc.Base64})})(A4)),A4.exports}var k4={exports:{}},E$t=k4.exports,Eye;function C$t(){return Eye||(Eye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(E$t,function(n){return(function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(l,u){u===void 0&&(u=!0);var c=l.words,d=l.sigBytes,f=u?this._safe_map:this._map;l.clamp();for(var h=[],p=0;p<d;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,v=m<<16|g<<8|y,b=0;b<4&&p+b*.75<d;b++)h.push(f.charAt(v>>>6*(3-b)&63));var _=f.charAt(64);if(_)for(;h.length%4;)h.push(_);return h.join("")},parse:function(l,u){u===void 0&&(u=!0);var c=l.length,d=u?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var p=d.charAt(64);if(p){var m=l.indexOf(p);m!==-1&&(c=m)}return a(l,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,u,c){for(var d=[],f=0,h=0;h<u;h++)if(h%4){var p=c[l.charCodeAt(h-1)]<<h%4*2,m=c[l.charCodeAt(h)]>>>6-h%4*2,g=p|m;d[f>>>2]|=g<<24-f%4*8,f++}return s.create(d,f)}})(),n.enc.Base64url})})(k4)),k4.exports}var I4={exports:{}},S$t=I4.exports,Cye;function lx(){return Cye||(Cye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(S$t,function(n){return(function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,u=[];(function(){for(var m=0;m<64;m++)u[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=l.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var v=g+y,b=m[v];m[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var _=this._hash.words,E=m[g+0],S=m[g+1],T=m[g+2],A=m[g+3],R=m[g+4],I=m[g+5],P=m[g+6],N=m[g+7],M=m[g+8],O=m[g+9],j=m[g+10],B=m[g+11],H=m[g+12],q=m[g+13],G=m[g+14],U=m[g+15],L=_[0],z=_[1],V=_[2],Y=_[3];L=d(L,z,V,Y,E,7,u[0]),Y=d(Y,L,z,V,S,12,u[1]),V=d(V,Y,L,z,T,17,u[2]),z=d(z,V,Y,L,A,22,u[3]),L=d(L,z,V,Y,R,7,u[4]),Y=d(Y,L,z,V,I,12,u[5]),V=d(V,Y,L,z,P,17,u[6]),z=d(z,V,Y,L,N,22,u[7]),L=d(L,z,V,Y,M,7,u[8]),Y=d(Y,L,z,V,O,12,u[9]),V=d(V,Y,L,z,j,17,u[10]),z=d(z,V,Y,L,B,22,u[11]),L=d(L,z,V,Y,H,7,u[12]),Y=d(Y,L,z,V,q,12,u[13]),V=d(V,Y,L,z,G,17,u[14]),z=d(z,V,Y,L,U,22,u[15]),L=f(L,z,V,Y,S,5,u[16]),Y=f(Y,L,z,V,P,9,u[17]),V=f(V,Y,L,z,B,14,u[18]),z=f(z,V,Y,L,E,20,u[19]),L=f(L,z,V,Y,I,5,u[20]),Y=f(Y,L,z,V,j,9,u[21]),V=f(V,Y,L,z,U,14,u[22]),z=f(z,V,Y,L,R,20,u[23]),L=f(L,z,V,Y,O,5,u[24]),Y=f(Y,L,z,V,G,9,u[25]),V=f(V,Y,L,z,A,14,u[26]),z=f(z,V,Y,L,M,20,u[27]),L=f(L,z,V,Y,q,5,u[28]),Y=f(Y,L,z,V,T,9,u[29]),V=f(V,Y,L,z,N,14,u[30]),z=f(z,V,Y,L,H,20,u[31]),L=h(L,z,V,Y,I,4,u[32]),Y=h(Y,L,z,V,M,11,u[33]),V=h(V,Y,L,z,B,16,u[34]),z=h(z,V,Y,L,G,23,u[35]),L=h(L,z,V,Y,S,4,u[36]),Y=h(Y,L,z,V,R,11,u[37]),V=h(V,Y,L,z,N,16,u[38]),z=h(z,V,Y,L,j,23,u[39]),L=h(L,z,V,Y,q,4,u[40]),Y=h(Y,L,z,V,E,11,u[41]),V=h(V,Y,L,z,A,16,u[42]),z=h(z,V,Y,L,P,23,u[43]),L=h(L,z,V,Y,O,4,u[44]),Y=h(Y,L,z,V,H,11,u[45]),V=h(V,Y,L,z,U,16,u[46]),z=h(z,V,Y,L,T,23,u[47]),L=p(L,z,V,Y,E,6,u[48]),Y=p(Y,L,z,V,N,10,u[49]),V=p(V,Y,L,z,G,15,u[50]),z=p(z,V,Y,L,I,21,u[51]),L=p(L,z,V,Y,H,6,u[52]),Y=p(Y,L,z,V,A,10,u[53]),V=p(V,Y,L,z,j,15,u[54]),z=p(z,V,Y,L,S,21,u[55]),L=p(L,z,V,Y,M,6,u[56]),Y=p(Y,L,z,V,U,10,u[57]),V=p(V,Y,L,z,P,15,u[58]),z=p(z,V,Y,L,q,21,u[59]),L=p(L,z,V,Y,R,6,u[60]),Y=p(Y,L,z,V,B,10,u[61]),V=p(V,Y,L,z,T,15,u[62]),z=p(z,V,Y,L,O,21,u[63]),_[0]=_[0]+L|0,_[1]=_[1]+z|0,_[2]=_[2]+V|0,_[3]=_[3]+Y|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,v=m.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=r.floor(y/4294967296),_=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var E=this._hash,S=E.words,T=0;T<4;T++){var A=S[T];S[T]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}return E},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function d(m,g,y,v,b,_,E){var S=m+(g&y|~g&v)+b+E;return(S<<_|S>>>32-_)+g}function f(m,g,y,v,b,_,E){var S=m+(g&v|y&~v)+b+E;return(S<<_|S>>>32-_)+g}function h(m,g,y,v,b,_,E){var S=m+(g^y^v)+b+E;return(S<<_|S>>>32-_)+g}function p(m,g,y,v,b,_,E){var S=m+(y^(g|~v))+b+E;return(S<<_|S>>>32-_)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)})(Math),n.MD5})})(I4)),I4.exports}var R4={exports:{}},T$t=R4.exports,Sye;function P6e(){return Sye||(Sye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(T$t,function(n){return(function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,l=[],u=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,d){for(var f=this._hash.words,h=f[0],p=f[1],m=f[2],g=f[3],y=f[4],v=0;v<80;v++){if(v<16)l[v]=c[d+v]|0;else{var b=l[v-3]^l[v-8]^l[v-14]^l[v-16];l[v]=b<<1|b>>>31}var _=(h<<5|h>>>27)+y+l[v];v<20?_+=(p&m|~p&g)+1518500249:v<40?_+=(p^m^g)+1859775393:v<60?_+=(p&m|p&g|m&g)-1894007588:_+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=_}f[0]=f[0]+h|0,f[1]=f[1]+p|0,f[2]=f[2]+m|0,f[3]=f[3]+g|0,f[4]=f[4]+y|0},_doFinalize:function(){var c=this._data,d=c.words,f=this._nDataBytes*8,h=c.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,c.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(u),r.HmacSHA1=o._createHmacHelper(u)})(),n.SHA1})})(R4)),R4.exports}var D4={exports:{}},A$t=D4.exports,Tye;function Lne(){return Tye||(Tye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(A$t,function(n){return(function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,u=[],c=[];(function(){function h(y){for(var v=r.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(u[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var d=[],f=l.SHA256=a.extend({_doReset:function(){this._hash=new o.init(u.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],v=m[2],b=m[3],_=m[4],E=m[5],S=m[6],T=m[7],A=0;A<64;A++){if(A<16)d[A]=h[p+A]|0;else{var R=d[A-15],I=(R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3,P=d[A-2],N=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;d[A]=I+d[A-7]+N+d[A-16]}var M=_&E^~_&S,O=g&y^g&v^y&v,j=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),B=(_<<26|_>>>6)^(_<<21|_>>>11)^(_<<7|_>>>25),H=T+B+M+c[A]+d[A],q=j+O;T=S,S=E,E=_,_=b+H|0,b=v,v=y,y=g,g=H+q|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+v|0,m[3]=m[3]+b|0,m[4]=m[4]+_|0,m[5]=m[5]+E|0,m[6]=m[6]+S|0,m[7]=m[7]+T|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)})(Math),n.SHA256})})(D4)),D4.exports}var P4={exports:{}},k$t=P4.exports,Aye;function I$t(){return Aye||(Aye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Lne())})(k$t,function(n){return(function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,l=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var u=a._doFinalize.call(this);return u.sigBytes-=4,u}});r.SHA224=a._createHelper(l),r.HmacSHA224=a._createHmacHelper(l)})(),n.SHA224})})(P4)),P4.exports}var O4={exports:{}},R$t=O4.exports,kye;function O6e(){return kye||(kye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),f8())})(R$t,function(n){return(function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,l=o.WordArray,u=r.algo;function c(){return a.create.apply(a,arguments)}var d=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],f=[];(function(){for(var p=0;p<80;p++)f[p]=c()})();var h=u.SHA512=s.extend({_doReset:function(){this._hash=new l.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],_=g[3],E=g[4],S=g[5],T=g[6],A=g[7],R=y.high,I=y.low,P=v.high,N=v.low,M=b.high,O=b.low,j=_.high,B=_.low,H=E.high,q=E.low,G=S.high,U=S.low,L=T.high,z=T.low,V=A.high,Y=A.low,Q=R,ne=I,ue=P,se=N,ae=M,he=O,ie=j,le=B,Ce=H,X=q,fe=G,de=U,te=L,ee=z,me=V,Ie=Y,Te=0;Te<80;Te++){var we,Me,ke=f[Te];if(Te<16)Me=ke.high=p[m+Te*2]|0,we=ke.low=p[m+Te*2+1]|0;else{var Oe=f[Te-15],xe=Oe.high,je=Oe.low,Ve=(xe>>>1|je<<31)^(xe>>>8|je<<24)^xe>>>7,nt=(je>>>1|xe<<31)^(je>>>8|xe<<24)^(je>>>7|xe<<25),it=f[Te-2],_t=it.high,rn=it.low,en=(_t>>>19|rn<<13)^(_t<<3|rn>>>29)^_t>>>6,zn=(rn>>>19|_t<<13)^(rn<<3|_t>>>29)^(rn>>>6|_t<<26),zt=f[Te-7],wn=zt.high,nr=zt.low,Yn=f[Te-16],Ur=Yn.high,or=Yn.low;we=nt+nr,Me=Ve+wn+(we>>>0<nt>>>0?1:0),we=we+zn,Me=Me+en+(we>>>0<zn>>>0?1:0),we=we+or,Me=Me+Ur+(we>>>0<or>>>0?1:0),ke.high=Me,ke.low=we}var Ir=Ce&fe^~Ce&te,On=X&de^~X&ee,gn=Q&ue^Q&ae^ue&ae,cr=ne&se^ne&he^se&he,xi=(Q>>>28|ne<<4)^(Q<<30|ne>>>2)^(Q<<25|ne>>>7),Rr=(ne>>>28|Q<<4)^(ne<<30|Q>>>2)^(ne<<25|Q>>>7),Nn=(Ce>>>14|X<<18)^(Ce>>>18|X<<14)^(Ce<<23|X>>>9),mt=(X>>>14|Ce<<18)^(X>>>18|Ce<<14)^(X<<23|Ce>>>9),Cr=d[Te],Xt=Cr.high,dr=Cr.low,vn=Ie+mt,ar=me+Nn+(vn>>>0<Ie>>>0?1:0),vn=vn+On,ar=ar+Ir+(vn>>>0<On>>>0?1:0),vn=vn+dr,ar=ar+Xt+(vn>>>0<dr>>>0?1:0),vn=vn+we,ar=ar+Me+(vn>>>0<we>>>0?1:0),Or=Rr+cr,Hr=xi+gn+(Or>>>0<Rr>>>0?1:0);me=te,Ie=ee,te=fe,ee=de,fe=Ce,de=X,X=le+vn|0,Ce=ie+ar+(X>>>0<le>>>0?1:0)|0,ie=ae,le=he,ae=ue,he=se,ue=Q,se=ne,ne=vn+Or|0,Q=ar+Hr+(ne>>>0<vn>>>0?1:0)|0}I=y.low=I+ne,y.high=R+Q+(I>>>0<ne>>>0?1:0),N=v.low=N+se,v.high=P+ue+(N>>>0<se>>>0?1:0),O=b.low=O+he,b.high=M+ae+(O>>>0<he>>>0?1:0),B=_.low=B+le,_.high=j+ie+(B>>>0<le>>>0?1:0),q=E.low=q+X,E.high=H+Ce+(q>>>0<X>>>0?1:0),U=S.low=U+de,S.high=G+fe+(U>>>0<de>>>0?1:0),z=T.low=z+ee,T.high=L+te+(z>>>0<ee>>>0?1:0),Y=A.low=Y+Ie,A.high=V+me+(Y>>>0<Ie>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var v=this._hash.toX32();return v},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)})(),n.SHA512})})(O4)),O4.exports}var N4={exports:{}},D$t=N4.exports,Iye;function P$t(){return Iye||(Iye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),f8(),O6e())})(D$t,function(n){return(function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,l=a.SHA512,u=a.SHA384=l.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=l._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=l._createHelper(u),r.HmacSHA384=l._createHmacHelper(u)})(),n.SHA384})})(N4)),N4.exports}var M4={exports:{}},O$t=M4.exports,Rye;function N$t(){return Rye||(Rye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),f8())})(O$t,function(n){return(function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.x64,u=l.Word,c=i.algo,d=[],f=[],h=[];(function(){for(var g=1,y=0,v=0;v<24;v++){d[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,_=(2*g+3*y)%5;g=b,y=_}for(var g=0;g<5;g++)for(var y=0;y<5;y++)f[g+5*y]=y+(2*g+3*y)%5*5;for(var E=1,S=0;S<24;S++){for(var T=0,A=0,R=0;R<7;R++){if(E&1){var I=(1<<R)-1;I<32?A^=1<<I:T^=1<<I-32}E&128?E=E<<1^113:E<<=1}h[S]=u.create(T,A)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=u.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new u.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var v=this._state,b=this.blockSize/2,_=0;_<b;_++){var E=g[y+2*_],S=g[y+2*_+1];E=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;var T=v[_];T.high^=S,T.low^=E}for(var A=0;A<24;A++){for(var R=0;R<5;R++){for(var I=0,P=0,N=0;N<5;N++){var T=v[R+5*N];I^=T.high,P^=T.low}var M=p[R];M.high=I,M.low=P}for(var R=0;R<5;R++)for(var O=p[(R+4)%5],j=p[(R+1)%5],B=j.high,H=j.low,I=O.high^(B<<1|H>>>31),P=O.low^(H<<1|B>>>31),N=0;N<5;N++){var T=v[R+5*N];T.high^=I,T.low^=P}for(var q=1;q<25;q++){var I,P,T=v[q],G=T.high,U=T.low,L=d[q];L<32?(I=G<<L|U>>>32-L,P=U<<L|G>>>32-L):(I=U<<L-32|G>>>64-L,P=G<<L-32|U>>>64-L);var z=p[f[q]];z.high=I,z.low=P}var V=p[0],Y=v[0];V.high=Y.high,V.low=Y.low;for(var R=0;R<5;R++)for(var N=0;N<5;N++){var q=R+5*N,T=v[q],Q=p[q],ne=p[(R+1)%5+5*N],ue=p[(R+2)%5+5*N];T.high=Q.high^~ne.high&ue.high,T.low=Q.low^~ne.low&ue.low}var T=v[0],se=h[A];T.high^=se.high,T.low^=se.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var v=g.sigBytes*8,b=this.blockSize*32;y[v>>>5]|=1<<24-v%32,y[(r.ceil((v+1)/b)*b>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,E=this.cfg.outputLength/8,S=E/8,T=[],A=0;A<S;A++){var R=_[A],I=R.high,P=R.low;I=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,T.push(P),T.push(I)}return new o.init(T,E)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)})(Math),n.SHA3})})(M4)),M4.exports}var $4={exports:{}},M$t=$4.exports,Dye;function $$t(){return Dye||(Dye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(M$t,function(n){return(function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,l=i.algo,u=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=l.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(S,T){for(var A=0;A<16;A++){var R=T+A,I=S[R];S[R]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}var P=this._hash.words,N=h.words,M=p.words,O=u.words,j=c.words,B=d.words,H=f.words,q,G,U,L,z,V,Y,Q,ne,ue;V=q=P[0],Y=G=P[1],Q=U=P[2],ne=L=P[3],ue=z=P[4];for(var se,A=0;A<80;A+=1)se=q+S[T+O[A]]|0,A<16?se+=g(G,U,L)+N[0]:A<32?se+=y(G,U,L)+N[1]:A<48?se+=v(G,U,L)+N[2]:A<64?se+=b(G,U,L)+N[3]:se+=_(G,U,L)+N[4],se=se|0,se=E(se,B[A]),se=se+z|0,q=z,z=L,L=E(U,10),U=G,G=se,se=V+S[T+j[A]]|0,A<16?se+=_(Y,Q,ne)+M[0]:A<32?se+=b(Y,Q,ne)+M[1]:A<48?se+=v(Y,Q,ne)+M[2]:A<64?se+=y(Y,Q,ne)+M[3]:se+=g(Y,Q,ne)+M[4],se=se|0,se=E(se,H[A]),se=se+ue|0,V=ue,ue=ne,ne=E(Q,10),Q=Y,Y=se;se=P[1]+U+ne|0,P[1]=P[2]+L+ue|0,P[2]=P[3]+z+V|0,P[3]=P[4]+q+Y|0,P[4]=P[0]+G+Q|0,P[0]=se},_doFinalize:function(){var S=this._data,T=S.words,A=this._nDataBytes*8,R=S.sigBytes*8;T[R>>>5]|=128<<24-R%32,T[(R+64>>>9<<4)+14]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,S.sigBytes=(T.length+1)*4,this._process();for(var I=this._hash,P=I.words,N=0;N<5;N++){var M=P[N];P[N]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return I},clone:function(){var S=a.clone.call(this);return S._hash=this._hash.clone(),S}});function g(S,T,A){return S^T^A}function y(S,T,A){return S&T|~S&A}function v(S,T,A){return(S|~T)^A}function b(S,T,A){return S&A|T&~A}function _(S,T,A){return S^(T|~A)}function E(S,T){return S<<T|S>>>32-T}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)})(),n.RIPEMD160})})($4)),$4.exports}var F4={exports:{}},F$t=F4.exports,Pye;function jne(){return Pye||(Pye=1,(function(e,t){(function(n,r){e.exports=r(Vr())})(F$t,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,l=r.algo;l.HMAC=s.extend({init:function(u,c){u=this._hasher=new u.init,typeof c=="string"&&(c=a.parse(c));var d=u.blockSize,f=d*4;c.sigBytes>f&&(c=u.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<d;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=f,this.reset()},reset:function(){var u=this._hasher;u.reset(),u.update(this._iKey)},update:function(u){return this._hasher.update(u),this},finalize:function(u){var c=this._hasher,d=c.finalize(u);c.reset();var f=c.finalize(this._oKey.clone().concat(d));return f}})})()})})(F4)),F4.exports}var L4={exports:{}},L$t=L4.exports,Oye;function j$t(){return Oye||(Oye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Lne(),jne())})(L$t,function(n){return(function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.SHA256,u=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,p=u.create(h.hasher,d),m=o.create(),g=o.create([1]),y=m.words,v=g.words,b=h.keySize,_=h.iterations;y.length<b;){var E=p.update(f).finalize(g);p.reset();for(var S=E.words,T=S.length,A=E,R=1;R<_;R++){A=p.finalize(A),p.reset();for(var I=A.words,P=0;P<T;P++)S[P]^=I[P]}m.concat(E),v[0]++}return m.sigBytes=b*4,m}});r.PBKDF2=function(d,f,h){return c.create(h).compute(d,f)}})(),n.PBKDF2})})(L4)),L4.exports}var j4={exports:{}},B$t=j4.exports,Nye;function d1(){return Nye||(Nye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),P6e(),jne())})(B$t,function(n){return(function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,l=a.MD5,u=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:l,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,d){for(var f,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,v=h.iterations;g.length<y;){f&&p.update(f),f=p.update(c).finalize(d),p.reset();for(var b=1;b<v;b++)f=p.finalize(f),p.reset();m.concat(f)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,d,f){return u.create(f).compute(c,d)}})(),n.EvpKDF})})(j4)),j4.exports}var B4={exports:{}},z$t=B4.exports,Mye;function Ea(){return Mye||(Mye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),d1())})(z$t,function(n){n.lib.Cipher||(function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,l=s.BufferedBlockAlgorithm,u=i.enc;u.Utf8;var c=u.Base64,d=i.algo,f=d.EvpKDF,h=s.Cipher=l.extend({cfg:o.extend(),createEncryptor:function(I,P){return this.create(this._ENC_XFORM_MODE,I,P)},createDecryptor:function(I,P){return this.create(this._DEC_XFORM_MODE,I,P)},init:function(I,P,N){this.cfg=this.cfg.extend(N),this._xformMode=I,this._key=P,this.reset()},reset:function(){l.reset.call(this),this._doReset()},process:function(I){return this._append(I),this._process()},finalize:function(I){I&&this._append(I);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:(function(){function I(P){return typeof P=="string"?R:S}return function(P){return{encrypt:function(N,M,O){return I(M).encrypt(P,N,M,O)},decrypt:function(N,M,O){return I(M).decrypt(P,N,M,O)}}}})()});s.StreamCipher=h.extend({_doFinalize:function(){var I=this._process(!0);return I},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(I,P){return this.Encryptor.create(I,P)},createDecryptor:function(I,P){return this.Decryptor.create(I,P)},init:function(I,P){this._cipher=I,this._iv=P}}),g=p.CBC=(function(){var I=m.extend();I.Encryptor=I.extend({processBlock:function(N,M){var O=this._cipher,j=O.blockSize;P.call(this,N,M,j),O.encryptBlock(N,M),this._prevBlock=N.slice(M,M+j)}}),I.Decryptor=I.extend({processBlock:function(N,M){var O=this._cipher,j=O.blockSize,B=N.slice(M,M+j);O.decryptBlock(N,M),P.call(this,N,M,j),this._prevBlock=B}});function P(N,M,O){var j,B=this._iv;B?(j=B,this._iv=r):j=this._prevBlock;for(var H=0;H<O;H++)N[M+H]^=j[H]}return I})(),y=i.pad={},v=y.Pkcs7={pad:function(I,P){for(var N=P*4,M=N-I.sigBytes%N,O=M<<24|M<<16|M<<8|M,j=[],B=0;B<M;B+=4)j.push(O);var H=a.create(j,M);I.concat(H)},unpad:function(I){var P=I.words[I.sigBytes-1>>>2]&255;I.sigBytes-=P}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:v}),reset:function(){var I;h.reset.call(this);var P=this.cfg,N=P.iv,M=P.mode;this._xformMode==this._ENC_XFORM_MODE?I=M.createEncryptor:(I=M.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==I?this._mode.init(this,N&&N.words):(this._mode=I.call(M,this,N&&N.words),this._mode.__creator=I)},_doProcessBlock:function(I,P){this._mode.processBlock(I,P)},_doFinalize:function(){var I,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),I=this._process(!0)):(I=this._process(!0),P.unpad(I)),I},blockSize:128/32});var b=s.CipherParams=o.extend({init:function(I){this.mixIn(I)},toString:function(I){return(I||this.formatter).stringify(this)}}),_=i.format={},E=_.OpenSSL={stringify:function(I){var P,N=I.ciphertext,M=I.salt;return M?P=a.create([1398893684,1701076831]).concat(M).concat(N):P=N,P.toString(c)},parse:function(I){var P,N=c.parse(I),M=N.words;return M[0]==1398893684&&M[1]==1701076831&&(P=a.create(M.slice(2,4)),M.splice(0,4),N.sigBytes-=16),b.create({ciphertext:N,salt:P})}},S=s.SerializableCipher=o.extend({cfg:o.extend({format:E}),encrypt:function(I,P,N,M){M=this.cfg.extend(M);var O=I.createEncryptor(N,M),j=O.finalize(P),B=O.cfg;return b.create({ciphertext:j,key:N,iv:B.iv,algorithm:I,mode:B.mode,padding:B.padding,blockSize:I.blockSize,formatter:M.format})},decrypt:function(I,P,N,M){M=this.cfg.extend(M),P=this._parse(P,M.format);var O=I.createDecryptor(N,M).finalize(P.ciphertext);return O},_parse:function(I,P){return typeof I=="string"?P.parse(I,this):I}}),T=i.kdf={},A=T.OpenSSL={execute:function(I,P,N,M,O){if(M||(M=a.random(64/8)),O)var j=f.create({keySize:P+N,hasher:O}).compute(I,M);else var j=f.create({keySize:P+N}).compute(I,M);var B=a.create(j.words.slice(P),N*4);return j.sigBytes=P*4,b.create({key:j,iv:B,salt:M})}},R=s.PasswordBasedCipher=S.extend({cfg:S.cfg.extend({kdf:A}),encrypt:function(I,P,N,M){M=this.cfg.extend(M);var O=M.kdf.execute(N,I.keySize,I.ivSize,M.salt,M.hasher);M.iv=O.iv;var j=S.encrypt.call(this,I,P,O.key,M);return j.mixIn(O),j},decrypt:function(I,P,N,M){M=this.cfg.extend(M),P=this._parse(P,M.format);var O=M.kdf.execute(N,I.keySize,I.ivSize,P.salt,M.hasher);M.iv=O.iv;var j=S.decrypt.call(this,I,P,O.key,M);return j}})})()})})(B4)),B4.exports}var z4={exports:{}},V$t=z4.exports,$ye;function U$t(){return $ye||($ye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(V$t,function(n){return n.mode.CFB=(function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize;i.call(this,s,o,l,a),this._prevBlock=s.slice(o,o+l)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,u=s.slice(o,o+l);i.call(this,s,o,l,a),this._prevBlock=u}});function i(s,o,a,l){var u,c=this._iv;c?(u=c.slice(0),this._iv=void 0):u=this._prevBlock,l.encryptBlock(u,0);for(var d=0;d<a;d++)s[o+d]^=u[d]}return r})(),n.mode.CFB})})(z4)),z4.exports}var V4={exports:{}},H$t=V4.exports,Fye;function q$t(){return Fye||(Fye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(H$t,function(n){return n.mode.CTR=(function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,u=this._iv,c=this._counter;u&&(c=this._counter=u.slice(0),this._iv=void 0);var d=c.slice(0);a.encryptBlock(d,0),c[l-1]=c[l-1]+1|0;for(var f=0;f<l;f++)s[o+f]^=d[f]}});return r.Decryptor=i,r})(),n.mode.CTR})})(V4)),V4.exports}var U4={exports:{}},W$t=U4.exports,Lye;function G$t(){return Lye||(Lye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(W$t,function(n){return n.mode.CTRGladman=(function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var l=a>>16&255,u=a>>8&255,c=a&255;l===255?(l=0,u===255?(u=0,c===255?c=0:++c):++u):++l,a=0,a+=l<<16,a+=u<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,l){var u=this._cipher,c=u.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),s(f);var h=f.slice(0);u.encryptBlock(h,0);for(var p=0;p<c;p++)a[l+p]^=h[p]}});return r.Decryptor=o,r})(),n.mode.CTRGladman})})(U4)),U4.exports}var H4={exports:{}},Y$t=H4.exports,jye;function K$t(){return jye||(jye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(Y$t,function(n){return n.mode.OFB=(function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,l=a.blockSize,u=this._iv,c=this._keystream;u&&(c=this._keystream=u.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var d=0;d<l;d++)s[o+d]^=c[d]}});return r.Decryptor=i,r})(),n.mode.OFB})})(H4)),H4.exports}var q4={exports:{}},X$t=q4.exports,Bye;function Q$t(){return Bye||(Bye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(X$t,function(n){return n.mode.ECB=(function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r})(),n.mode.ECB})})(q4)),q4.exports}var W4={exports:{}},J$t=W4.exports,zye;function Z$t(){return zye||(zye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(J$t,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,l=s+a-1;r.clamp(),r.words[l>>>2]|=a<<24-l%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})})(W4)),W4.exports}var G4={exports:{}},eFt=G4.exports,Vye;function tFt(){return Vye||(Vye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(eFt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})})(G4)),G4.exports}var Y4={exports:{}},nFt=Y4.exports,Uye;function rFt(){return Uye||(Uye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(nFt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})})(Y4)),Y4.exports}var K4={exports:{}},iFt=K4.exports,Hye;function sFt(){return Hye||(Hye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(iFt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})})(K4)),K4.exports}var X4={exports:{}},oFt=X4.exports,qye;function aFt(){return qye||(qye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(oFt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})})(X4)),X4.exports}var Q4={exports:{}},lFt=Q4.exports,Wye;function uFt(){return Wye||(Wye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),Ea())})(lFt,function(n){return(function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,l=a.Hex,u=i.format;u.Hex={stringify:function(c){return c.ciphertext.toString(l)},parse:function(c){var d=l.parse(c);return o.create({ciphertext:d})}}})(),n.format.Hex})})(Q4)),Q4.exports}var J4={exports:{}},cFt=J4.exports,Gye;function dFt(){return Gye||(Gye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),ax(),lx(),d1(),Ea())})(cFt,function(n){return(function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],l=[],u=[],c=[],d=[],f=[],h=[],p=[],m=[],g=[];(function(){for(var b=[],_=0;_<256;_++)_<128?b[_]=_<<1:b[_]=_<<1^283;for(var E=0,S=0,_=0;_<256;_++){var T=S^S<<1^S<<2^S<<3^S<<4;T=T>>>8^T&255^99,a[E]=T,l[T]=E;var A=b[E],R=b[A],I=b[R],P=b[T]*257^T*16843008;u[E]=P<<24|P>>>8,c[E]=P<<16|P>>>16,d[E]=P<<8|P>>>24,f[E]=P;var P=I*16843009^R*65537^A*257^E*16843008;h[T]=P<<24|P>>>8,p[T]=P<<16|P>>>16,m[T]=P<<8|P>>>24,g[T]=P,E?(E=A^b[b[b[I^A]]],S^=b[b[S]]):E=S=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=o.AES=s.extend({_doReset:function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var _=this._keyPriorReset=this._key,E=_.words,S=_.sigBytes/4,T=this._nRounds=S+6,A=(T+1)*4,R=this._keySchedule=[],I=0;I<A;I++)I<S?R[I]=E[I]:(b=R[I-1],I%S?S>6&&I%S==4&&(b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255]):(b=b<<8|b>>>24,b=a[b>>>24]<<24|a[b>>>16&255]<<16|a[b>>>8&255]<<8|a[b&255],b^=y[I/S|0]<<24),R[I]=R[I-S]^b);for(var P=this._invKeySchedule=[],N=0;N<A;N++){var I=A-N;if(N%4)var b=R[I];else var b=R[I-4];N<4||I<=4?P[N]=b:P[N]=h[a[b>>>24]]^p[a[b>>>16&255]]^m[a[b>>>8&255]]^g[a[b&255]]}}},encryptBlock:function(b,_){this._doCryptBlock(b,_,this._keySchedule,u,c,d,f,a)},decryptBlock:function(b,_){var E=b[_+1];b[_+1]=b[_+3],b[_+3]=E,this._doCryptBlock(b,_,this._invKeySchedule,h,p,m,g,l);var E=b[_+1];b[_+1]=b[_+3],b[_+3]=E},_doCryptBlock:function(b,_,E,S,T,A,R,I){for(var P=this._nRounds,N=b[_]^E[0],M=b[_+1]^E[1],O=b[_+2]^E[2],j=b[_+3]^E[3],B=4,H=1;H<P;H++){var q=S[N>>>24]^T[M>>>16&255]^A[O>>>8&255]^R[j&255]^E[B++],G=S[M>>>24]^T[O>>>16&255]^A[j>>>8&255]^R[N&255]^E[B++],U=S[O>>>24]^T[j>>>16&255]^A[N>>>8&255]^R[M&255]^E[B++],L=S[j>>>24]^T[N>>>16&255]^A[M>>>8&255]^R[O&255]^E[B++];N=q,M=G,O=U,j=L}var q=(I[N>>>24]<<24|I[M>>>16&255]<<16|I[O>>>8&255]<<8|I[j&255])^E[B++],G=(I[M>>>24]<<24|I[O>>>16&255]<<16|I[j>>>8&255]<<8|I[N&255])^E[B++],U=(I[O>>>24]<<24|I[j>>>16&255]<<16|I[N>>>8&255]<<8|I[M&255])^E[B++],L=(I[j>>>24]<<24|I[N>>>16&255]<<16|I[M>>>8&255]<<8|I[O&255])^E[B++];b[_]=q,b[_+1]=G,b[_+2]=U,b[_+3]=L},keySize:256/32});r.AES=s._createHelper(v)})(),n.AES})})(J4)),J4.exports}var Z4={exports:{}},fFt=Z4.exports,Yye;function hFt(){return Yye||(Yye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),ax(),lx(),d1(),Ea())})(fFt,function(n){return(function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],u=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,v=y.words,b=[],_=0;_<56;_++){var E=l[_]-1;b[_]=v[E>>>5]>>>31-E%32&1}for(var S=this._subKeys=[],T=0;T<16;T++){for(var A=S[T]=[],R=c[T],_=0;_<24;_++)A[_/6|0]|=b[(u[_]-1+R)%28]<<31-_%6,A[4+(_/6|0)]|=b[28+(u[_+24]-1+R)%28]<<31-_%6;A[0]=A[0]<<1|A[0]>>>31;for(var _=1;_<7;_++)A[_]=A[_]>>>(_-1)*4+3;A[7]=A[7]<<5|A[7]>>>27}for(var I=this._invSubKeys=[],_=0;_<16;_++)I[_]=S[15-_]},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._subKeys)},decryptBlock:function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},_doCryptBlock:function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var _=0;_<16;_++){for(var E=b[_],S=this._lBlock,T=this._rBlock,A=0,R=0;R<8;R++)A|=d[R][((T^E[R])&f[R])>>>0];this._lBlock=T,this._rBlock=S^A}var I=this._lBlock;this._lBlock=this._rBlock,this._rBlock=I,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}function m(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),_=v.length<4?v.slice(0,2):v.slice(2,4),E=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=h.createEncryptor(s.create(b)),this._des2=h.createEncryptor(s.create(_)),this._des3=h.createEncryptor(s.create(E))},encryptBlock:function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},decryptBlock:function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)})(),n.TripleDES})})(Z4)),Z4.exports}var eM={exports:{}},pFt=eM.exports,Kye;function mFt(){return Kye||(Kye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),ax(),lx(),d1(),Ea())})(pFt,function(n){return(function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,d=c.words,f=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%f,y=d[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var v=h[p];h[p]=h[m],h[m]=v}this._i=this._j=0},_doProcessBlock:function(c,d){c[d]^=l.call(this)},keySize:256/32,ivSize:0});function l(){for(var c=this._S,d=this._i,f=this._j,h=0,p=0;p<4;p++){d=(d+1)%256,f=(f+c[d])%256;var m=c[d];c[d]=c[f],c[f]=m,h|=c[(c[d]+c[f])%256]<<24-p*8}return this._i=d,this._j=f,h}r.RC4=s._createHelper(a);var u=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)l.call(this)}});r.RC4Drop=s._createHelper(u)})(),n.RC4})})(eM)),eM.exports}var tM={exports:{}},gFt=tM.exports,Xye;function yFt(){return Xye||(Xye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),ax(),lx(),d1(),Ea())})(gFt,function(n){return(function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],u=[],c=o.Rabbit=s.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,p=0;p<4;p++)f[p]=(f[p]<<8|f[p]>>>24)&16711935|(f[p]<<24|f[p]>>>8)&4278255360;var m=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var p=0;p<4;p++)d.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|E&4294901760,T=E<<16|_&65535;g[0]^=_,g[1]^=S,g[2]^=E,g[3]^=T,g[4]^=_,g[5]^=S,g[6]^=E,g[7]^=T;for(var p=0;p<4;p++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,f[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)l[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var m=f[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);u[p]=v^b}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.Rabbit=s._createHelper(c)})(),n.Rabbit})})(tM)),tM.exports}var nM={exports:{}},vFt=nM.exports,Qye;function bFt(){return Qye||(Qye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),ax(),lx(),d1(),Ea())})(vFt,function(n){return(function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],l=[],u=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],m=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var g=0;g<4;g++)d.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,v=y[0],b=y[1],_=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=_>>>16|E&4294901760,T=E<<16|_&65535;m[0]^=_,m[1]^=S,m[2]^=E,m[3]^=T,m[4]^=_,m[5]^=S,m[6]^=E,m[7]^=T;for(var g=0;g<4;g++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,f[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)l[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<l[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<l[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<l[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<l[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<l[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<l[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<l[6]>>>0?1:0)|0,this._b=h[7]>>>0<l[7]>>>0?1:0;for(var p=0;p<8;p++){var m=f[p]+h[p],g=m&65535,y=m>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((m&4294901760)*m|0)+((m&65535)*m|0);u[p]=v^b}f[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,f[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,f[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,f[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,f[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,f[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,f[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,f[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}r.RabbitLegacy=s._createHelper(c)})(),n.RabbitLegacy})})(nM)),nM.exports}var rM={exports:{}},wFt=rM.exports,Jye;function xFt(){return Jye||(Jye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),ax(),lx(),d1(),Ea())})(wFt,function(n){return(function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,l=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],u=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function d(g,y){let v=y>>24&255,b=y>>16&255,_=y>>8&255,E=y&255,S=g.sbox[0][v]+g.sbox[1][b];return S=S^g.sbox[2][_],S=S+g.sbox[3][E],S}function f(g,y,v){let b=y,_=v,E;for(let S=0;S<a;++S)b=b^g.pbox[S],_=d(g,b)^_,E=b,b=_,_=E;return E=b,b=_,_=E,_=_^g.pbox[a],b=b^g.pbox[a+1],{left:b,right:_}}function h(g,y,v){let b=y,_=v,E;for(let S=a+1;S>1;--S)b=b^g.pbox[S],_=d(g,b)^_,E=b,b=_,_=E;return E=b,b=_,_=E,_=_^g.pbox[1],b=b^g.pbox[0],{left:b,right:_}}function p(g,y,v){for(let T=0;T<4;T++){g.sbox[T]=[];for(let A=0;A<256;A++)g.sbox[T][A]=u[T][A]}let b=0;for(let T=0;T<a+2;T++)g.pbox[T]=l[T]^y[b],b++,b>=v&&(b=0);let _=0,E=0,S=0;for(let T=0;T<a+2;T+=2)S=f(g,_,E),_=S.left,E=S.right,g.pbox[T]=_,g.pbox[T+1]=E;for(let T=0;T<4;T++)for(let A=0;A<256;A+=2)S=f(g,_,E),_=S.left,E=S.right,g.sbox[T][A]=_,g.sbox[T][A+1]=E;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;p(c,y,v)}},encryptBlock:function(g,y){var v=f(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},decryptBlock:function(g,y){var v=h(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)})(),n.Blowfish})})(rM)),rM.exports}var _Ft=_4.exports,Zye;function EFt(){return Zye||(Zye=1,(function(e,t){(function(n,r,i){e.exports=r(Vr(),f8(),b$t(),x$t(),ax(),C$t(),lx(),P6e(),Lne(),I$t(),O6e(),P$t(),N$t(),$$t(),jne(),j$t(),d1(),Ea(),U$t(),q$t(),G$t(),K$t(),Q$t(),Z$t(),tFt(),rFt(),sFt(),aFt(),uFt(),dFt(),hFt(),mFt(),yFt(),bFt(),xFt())})(_Ft,function(n){return n})})(_4)),_4.exports}var SE=EFt();const N6e=SE.enc.Hex.parse("000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f");function js(e){const t=SE.AES.encrypt(e.toString(),N6e,{mode:SE.mode.ECB}).toString();return btoa(t)}function oh(e){const t=SE.AES.decrypt(atob(e),N6e,{mode:SE.mode.ECB}).toString(SE.enc.Utf8);return parseInt(t,10)}function Mh(){const{studyId:e}=So();return`${e}`}function id(){const{index:e}=So();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:oh(e)}const eve=Object.assign({"../public/libraries/adaptive-vlat/assets/VlatTrial.tsx":NDe,"../public/libraries/adaptive-vlat/assets/dynamic.tsx":FDe,"../public/libraries/adaptive-vlat/assets/utils.ts":$De,"../public/libraries/adaptive-vlat/assets/vlatQ.tsx":ODe,"../public/libraries/berlin-num/assets/dynamic.tsx":LDe,"../public/libraries/mic-check/assets/AudioTest.tsx":jDe,"../public/libraries/screen-recording/assets/ScreenRecording.tsx":aPe,"../public/libraries/test/assets/test.tsx":lPe,"../public/libraries/virtual-chinrest/assets/ViewingDistanceCalibration.tsx":uPe,"../public/libraries/virtual-chinrest/assets/VirtualChinrestCalibration.tsx":cPe,"../public/tutorial/assets/BrushPlotWrapper.tsx":x6e,"../public/tutorial/assets/ReactExample.tsx":_6e,"../public/tutorial/assets/_answers/ReactExample.tsx":E6e,"../public/tutorial/assets/_answers/replication/JNDDynamic.tsx":C6e,"../public/tutorial/assets/_answers/replication/Scatter.tsx":S6e,"../public/tutorial/assets/_answers/replication/ScatterWrapper.tsx":T6e,"../public/tutorial/assets/brush-components/assets/Bar.tsx":b6e,"../public/tutorial/assets/brush-components/assets/BrushPlot.tsx":w6e,"../public/tutorial/assets/brush-components/assets/Paintbrush.tsx":m6e,"../public/tutorial/assets/brush-components/assets/Scatter.tsx":g6e,"../public/tutorial/assets/brush-components/assets/XAxisBar.tsx":d6e,"../public/tutorial/assets/brush-components/assets/YAxis.tsx":h6e,"../public/tutorial/assets/brush-components/assets/YAxisBar.tsx":v6e,"../public/tutorial/assets/brush-components/assets/types.ts":A6e,"../public/tutorial/assets/replication/JNDDynamic.tsx":k6e,"../public/tutorial/assets/replication/Scatter.tsx":I6e,"../public/tutorial/assets/replication/ScatterWrapper.tsx":R6e});function $h(){const{funcIndex:e}=So(),t=gr(m=>m.answers),n=pc(),r=id(),i=n1(),s=$l(),o=Mh(),a=Us(),{pushToFuncSequence:l}=ls(),[u,c]=k.useState(null),d=k.useMemo(()=>typeof r=="number"?hme(i[r],n):r.includes("reviewer-")||r.startsWith("__")?r:null,[r,i,n]),[f,h]=k.useState("__dynamicLoading"),p=k.useMemo(()=>{if(typeof r=="number"&&!d){const m=AG(i[r],n.sequence);if(!m)return null;const g=`../public/${m.functionPath}`;return g in eve?eve[g].default:null}return null},[d,r,i,n.sequence]);return k.useEffect(()=>{!e&&p&&typeof r=="number"&&s(`/${o}/${js(r)}/${js(0)}${window.location.search}`)},[r,e,s,p,o]),k.useEffect(()=>{if(typeof r=="number"){const m=hme(i[r],n),g=i[r],y=e?oh(e):0,v=Object.entries(t).find(([_,E])=>_.startsWith(`${g}_${r}_`)&&_.endsWith(`${y}`)),b=v?v[1].componentName:null;if(b!==null){h(b),c(y);return}if(!m&&p!==null){const{component:_,parameters:E,correctAnswer:S}=p({answers:t,customParameters:AG(i[r],n.sequence)?.parameters,currentStep:r,currentBlock:i[r]});_!==null?e&&(h(_),c(y),a(l({component:_,funcName:g,index:r,funcIndex:y,parameters:E||void 0,correctAnswer:S||void 0}))):(h("__dynamicLoading"),c(null),s(`/${o}/${js(r+1)}${window.location.search}`))}}},[r,e]),typeof r=="number"&&i[r]==="end"?"end":d?typeof r=="number"?i[r]:r.replace("reviewer-",""):u!==null&&e&&oh(e)===u?f:"__dynamicLoading"}function n0(){const e=id(),t=n1(),n=$h(),{funcIndex:r}=So();return k.useMemo(()=>r&&typeof e=="number"?`${t[e]}_${e}_${n}_${oh(r)}`:`${n}_${e}`,[n,e,r,t])}function f1(){const{funcIndex:e}=So(),t=n1(),n=id(),r=$h(),i=e&&typeof n=="number"?`${t[n]}_${n}_${r}_${oh(e)}`:`${r}_${n}`;return gr(o=>o.answers[i])}const M6e=k.createContext(null);function CFt(){const e=k.useContext(M6e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function k0(){const[e]=nd();return!!e.get("participantId")}var cA={exports:{}};cA.exports;var tve;function SFt(){return tve||(tve=1,(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Promise]",_="[object Proxy]",E="[object RegExp]",S="[object Set]",T="[object String]",A="[object Symbol]",R="[object Undefined]",I="[object WeakMap]",P="[object ArrayBuffer]",N="[object DataView]",M="[object Float32Array]",O="[object Float64Array]",j="[object Int8Array]",B="[object Int16Array]",H="[object Int32Array]",q="[object Uint8Array]",G="[object Uint8ClampedArray]",U="[object Uint16Array]",L="[object Uint32Array]",z=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,Y=/^(?:0|[1-9]\d*)$/,Q={};Q[M]=Q[O]=Q[j]=Q[B]=Q[H]=Q[q]=Q[G]=Q[U]=Q[L]=!0,Q[a]=Q[l]=Q[P]=Q[c]=Q[N]=Q[d]=Q[f]=Q[h]=Q[m]=Q[g]=Q[v]=Q[E]=Q[S]=Q[T]=Q[I]=!1;var ne=typeof $i=="object"&&$i&&$i.Object===Object&&$i,ue=typeof self=="object"&&self&&self.Object===Object&&self,se=ne||ue||Function("return this")(),ae=t&&!t.nodeType&&t,he=ae&&!0&&e&&!e.nodeType&&e,ie=he&&he.exports===ae,le=ie&&ne.process,Ce=(function(){try{return le&&le.binding&&le.binding("util")}catch{}})(),X=Ce&&Ce.isTypedArray;function fe(Se,oe){for(var ve=-1,$e=Se==null?0:Se.length,It=0,Ft=[];++ve<$e;){var xn=Se[ve];oe(xn,ve,Se)&&(Ft[It++]=xn)}return Ft}function de(Se,oe){for(var ve=-1,$e=oe.length,It=Se.length;++ve<$e;)Se[It+ve]=oe[ve];return Se}function te(Se,oe){for(var ve=-1,$e=Se==null?0:Se.length;++ve<$e;)if(oe(Se[ve],ve,Se))return!0;return!1}function ee(Se,oe){for(var ve=-1,$e=Array(Se);++ve<Se;)$e[ve]=oe(ve);return $e}function me(Se){return function(oe){return Se(oe)}}function Ie(Se,oe){return Se.has(oe)}function Te(Se,oe){return Se?.[oe]}function we(Se){var oe=-1,ve=Array(Se.size);return Se.forEach(function($e,It){ve[++oe]=[It,$e]}),ve}function Me(Se,oe){return function(ve){return Se(oe(ve))}}function ke(Se){var oe=-1,ve=Array(Se.size);return Se.forEach(function($e){ve[++oe]=$e}),ve}var Oe=Array.prototype,xe=Function.prototype,je=Object.prototype,Ve=se["__core-js_shared__"],nt=xe.toString,it=je.hasOwnProperty,_t=(function(){var Se=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return Se?"Symbol(src)_1."+Se:""})(),rn=je.toString,en=RegExp("^"+nt.call(it).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zn=ie?se.Buffer:void 0,zt=se.Symbol,wn=se.Uint8Array,nr=je.propertyIsEnumerable,Yn=Oe.splice,Ur=zt?zt.toStringTag:void 0,or=Object.getOwnPropertySymbols,Ir=zn?zn.isBuffer:void 0,On=Me(Object.keys,Object),gn=vr(se,"DataView"),cr=vr(se,"Map"),xi=vr(se,"Promise"),Rr=vr(se,"Set"),Nn=vr(se,"WeakMap"),mt=vr(Object,"create"),Cr=Ui(gn),Xt=Ui(cr),dr=Ui(xi),vn=Ui(Rr),ar=Ui(Nn),Or=zt?zt.prototype:void 0,Hr=Or?Or.valueOf:void 0;function qr(Se){var oe=-1,ve=Se==null?0:Se.length;for(this.clear();++oe<ve;){var $e=Se[oe];this.set($e[0],$e[1])}}function ko(){this.__data__=mt?mt(null):{},this.size=0}function Ja(Se){var oe=this.has(Se)&&delete this.__data__[Se];return this.size-=oe?1:0,oe}function Tu(Se){var oe=this.__data__;if(mt){var ve=oe[Se];return ve===r?void 0:ve}return it.call(oe,Se)?oe[Se]:void 0}function yc(Se){var oe=this.__data__;return mt?oe[Se]!==void 0:it.call(oe,Se)}function Kn(Se,oe){var ve=this.__data__;return this.size+=this.has(Se)?0:1,ve[Se]=mt&&oe===void 0?r:oe,this}qr.prototype.clear=ko,qr.prototype.delete=Ja,qr.prototype.get=Tu,qr.prototype.has=yc,qr.prototype.set=Kn;function Ji(Se){var oe=-1,ve=Se==null?0:Se.length;for(this.clear();++oe<ve;){var $e=Se[oe];this.set($e[0],$e[1])}}function Io(){this.__data__=[],this.size=0}function Xh(Se){var oe=this.__data__,ve=_e(oe,Se);if(ve<0)return!1;var $e=oe.length-1;return ve==$e?oe.pop():Yn.call(oe,ve,1),--this.size,!0}function wf(Se){var oe=this.__data__,ve=_e(oe,Se);return ve<0?void 0:oe[ve][1]}function sd(Se){return _e(this.__data__,Se)>-1}function od(Se,oe){var ve=this.__data__,$e=_e(ve,Se);return $e<0?(++this.size,ve.push([Se,oe])):ve[$e][1]=oe,this}Ji.prototype.clear=Io,Ji.prototype.delete=Xh,Ji.prototype.get=wf,Ji.prototype.has=sd,Ji.prototype.set=od;function Ro(Se){var oe=-1,ve=Se==null?0:Se.length;for(this.clear();++oe<ve;){var $e=Se[oe];this.set($e[0],$e[1])}}function Qh(){this.size=0,this.__data__={hash:new qr,map:new(cr||Ji),string:new qr}}function vc(Se){var oe=sn(this,Se).delete(Se);return this.size-=oe?1:0,oe}function Sr(Se){return sn(this,Se).get(Se)}function xf(Se){return sn(this,Se).has(Se)}function qs(Se,oe){var ve=sn(this,Se),$e=ve.size;return ve.set(Se,oe),this.size+=ve.size==$e?0:1,this}Ro.prototype.clear=Qh,Ro.prototype.delete=vc,Ro.prototype.get=Sr,Ro.prototype.has=xf,Ro.prototype.set=qs;function ea(Se){var oe=-1,ve=Se==null?0:Se.length;for(this.__data__=new Ro;++oe<ve;)this.add(Se[oe])}function Ws(Se){return this.__data__.set(Se,r),this}function bc(Se){return this.__data__.has(Se)}ea.prototype.add=ea.prototype.push=Ws,ea.prototype.has=bc;function Sa(Se){var oe=this.__data__=new Ji(Se);this.size=oe.size}function Au(){this.__data__=new Ji,this.size=0}function Gs(Se){var oe=this.__data__,ve=oe.delete(Se);return this.size=oe.size,ve}function Jh(Se){return this.__data__.get(Se)}function Ys(Se){return this.__data__.has(Se)}function ge(Se,oe){var ve=this.__data__;if(ve instanceof Ji){var $e=ve.__data__;if(!cr||$e.length<n-1)return $e.push([Se,oe]),this.size=++ve.size,this;ve=this.__data__=new Ro($e)}return ve.set(Se,oe),this.size=ve.size,this}Sa.prototype.clear=Au,Sa.prototype.delete=Gs,Sa.prototype.get=Jh,Sa.prototype.has=Ys,Sa.prototype.set=ge;function Ne(Se,oe){var ve=mo(Se),$e=!ve&&ld(Se),It=!ve&&!$e&&tp(Se),Ft=!ve&&!$e&&!It&&wc(Se),xn=ve||$e||It||Ft,Hn=xn?ee(Se.length,String):[],ln=Hn.length;for(var Tn in Se)it.call(Se,Tn)&&!(xn&&(Tn=="length"||It&&(Tn=="offset"||Tn=="parent")||Ft&&(Tn=="buffer"||Tn=="byteLength"||Tn=="byteOffset")||Zh(Tn,ln)))&&Hn.push(Tn);return Hn}function _e(Se,oe){for(var ve=Se.length;ve--;)if(ta(Se[ve][0],oe))return ve;return-1}function Be(Se,oe,ve){var $e=oe(Se);return mo(Se)?$e:de($e,ve(Se))}function Ue(Se){return Se==null?Se===void 0?R:y:Ur&&Ur in Object(Se)?Ks(Se):Zi(Se)}function Le(Se){return Ta(Se)&&Ue(Se)==a}function rt(Se,oe,ve,$e,It){return Se===oe?!0:Se==null||oe==null||!Ta(Se)&&!Ta(oe)?Se!==Se&&oe!==oe:ft(Se,oe,ve,$e,rt,It)}function ft(Se,oe,ve,$e,It,Ft){var xn=mo(Se),Hn=mo(oe),ln=xn?l:Xs(Se),Tn=Hn?l:Xs(oe);ln=ln==a?v:ln,Tn=Tn==a?v:Tn;var yr=ln==v,hi=Tn==v,_i=ln==Tn;if(_i&&tp(Se)){if(!tp(oe))return!1;xn=!0,yr=!1}if(_i&&!yr)return Ft||(Ft=new Sa),xn||wc(Se)?Gt(Se,oe,ve,$e,It,Ft):Vn(Se,oe,ln,ve,$e,It,Ft);if(!(ve&i)){var Mi=yr&&it.call(Se,"__wrapped__"),Rs=hi&&it.call(oe,"__wrapped__");if(Mi||Rs){var Ei=Mi?Se.value():Se,Qs=Rs?oe.value():oe;return Ft||(Ft=new Sa),It(Ei,Qs,ve,$e,Ft)}}return _i?(Ft||(Ft=new Sa),cn(Se,oe,ve,$e,It,Ft)):!1}function gt(Se){if(!np(Se)||ep(Se))return!1;var oe=ws(Se)?en:V;return oe.test(Ui(Se))}function ht(Se){return Ta(Se)&&L0(Se.length)&&!!Q[Ue(Se)]}function Tt(Se){if(!Do(Se))return On(Se);var oe=[];for(var ve in Object(Se))it.call(Se,ve)&&ve!="constructor"&&oe.push(ve);return oe}function Gt(Se,oe,ve,$e,It,Ft){var xn=ve&i,Hn=Se.length,ln=oe.length;if(Hn!=ln&&!(xn&&ln>Hn))return!1;var Tn=Ft.get(Se);if(Tn&&Ft.get(oe))return Tn==oe;var yr=-1,hi=!0,_i=ve&s?new ea:void 0;for(Ft.set(Se,oe),Ft.set(oe,Se);++yr<Hn;){var Mi=Se[yr],Rs=oe[yr];if($e)var Ei=xn?$e(Rs,Mi,yr,oe,Se,Ft):$e(Mi,Rs,yr,Se,oe,Ft);if(Ei!==void 0){if(Ei)continue;hi=!1;break}if(_i){if(!te(oe,function(Qs,Iu){if(!Ie(_i,Iu)&&(Mi===Qs||It(Mi,Qs,ve,$e,Ft)))return _i.push(Iu)})){hi=!1;break}}else if(!(Mi===Rs||It(Mi,Rs,ve,$e,Ft))){hi=!1;break}}return Ft.delete(Se),Ft.delete(oe),hi}function Vn(Se,oe,ve,$e,It,Ft,xn){switch(ve){case N:if(Se.byteLength!=oe.byteLength||Se.byteOffset!=oe.byteOffset)return!1;Se=Se.buffer,oe=oe.buffer;case P:return!(Se.byteLength!=oe.byteLength||!Ft(new wn(Se),new wn(oe)));case c:case d:case g:return ta(+Se,+oe);case f:return Se.name==oe.name&&Se.message==oe.message;case E:case T:return Se==oe+"";case m:var Hn=we;case S:var ln=$e&i;if(Hn||(Hn=ke),Se.size!=oe.size&&!ln)return!1;var Tn=xn.get(Se);if(Tn)return Tn==oe;$e|=s,xn.set(Se,oe);var yr=Gt(Hn(Se),Hn(oe),$e,It,Ft,xn);return xn.delete(Se),yr;case A:if(Hr)return Hr.call(Se)==Hr.call(oe)}return!1}function cn(Se,oe,ve,$e,It,Ft){var xn=ve&i,Hn=lr(Se),ln=Hn.length,Tn=lr(oe),yr=Tn.length;if(ln!=yr&&!xn)return!1;for(var hi=ln;hi--;){var _i=Hn[hi];if(!(xn?_i in oe:it.call(oe,_i)))return!1}var Mi=Ft.get(Se);if(Mi&&Ft.get(oe))return Mi==oe;var Rs=!0;Ft.set(Se,oe),Ft.set(oe,Se);for(var Ei=xn;++hi<ln;){_i=Hn[hi];var Qs=Se[_i],Iu=oe[_i];if($e)var xc=xn?$e(Iu,Qs,_i,oe,Se,Ft):$e(Qs,Iu,_i,Se,oe,Ft);if(!(xc===void 0?Qs===Iu||It(Qs,Iu,ve,$e,Ft):xc)){Rs=!1;break}Ei||(Ei=_i=="constructor")}if(Rs&&!Ei){var B0=Se.constructor,_f=oe.constructor;B0!=_f&&"constructor"in Se&&"constructor"in oe&&!(typeof B0=="function"&&B0 instanceof B0&&typeof _f=="function"&&_f instanceof _f)&&(Rs=!1)}return Ft.delete(Se),Ft.delete(oe),Rs}function lr(Se){return Be(Se,j0,Za)}function sn(Se,oe){var ve=Se.__data__;return ad(oe)?ve[typeof oe=="string"?"string":"hash"]:ve.map}function vr(Se,oe){var ve=Te(Se,oe);return gt(ve)?ve:void 0}function Ks(Se){var oe=it.call(Se,Ur),ve=Se[Ur];try{Se[Ur]=void 0;var $e=!0}catch{}var It=rn.call(Se);return $e&&(oe?Se[Ur]=ve:delete Se[Ur]),It}var Za=or?function(Se){return Se==null?[]:(Se=Object(Se),fe(or(Se),function(oe){return nr.call(Se,oe)}))}:jl,Xs=Ue;(gn&&Xs(new gn(new ArrayBuffer(1)))!=N||cr&&Xs(new cr)!=m||xi&&Xs(xi.resolve())!=b||Rr&&Xs(new Rr)!=S||Nn&&Xs(new Nn)!=I)&&(Xs=function(Se){var oe=Ue(Se),ve=oe==v?Se.constructor:void 0,$e=ve?Ui(ve):"";if($e)switch($e){case Cr:return N;case Xt:return m;case dr:return b;case vn:return S;case ar:return I}return oe});function Zh(Se,oe){return oe=oe??o,!!oe&&(typeof Se=="number"||Y.test(Se))&&Se>-1&&Se%1==0&&Se<oe}function ad(Se){var oe=typeof Se;return oe=="string"||oe=="number"||oe=="symbol"||oe=="boolean"?Se!=="__proto__":Se===null}function ep(Se){return!!_t&&_t in Se}function Do(Se){var oe=Se&&Se.constructor,ve=typeof oe=="function"&&oe.prototype||je;return Se===ve}function Zi(Se){return rn.call(Se)}function Ui(Se){if(Se!=null){try{return nt.call(Se)}catch{}try{return Se+""}catch{}}return""}function ta(Se,oe){return Se===oe||Se!==Se&&oe!==oe}var ld=Le((function(){return arguments})())?Le:function(Se){return Ta(Se)&&it.call(Se,"callee")&&!nr.call(Se,"callee")},mo=Array.isArray;function el(Se){return Se!=null&&L0(Se.length)&&!ws(Se)}var tp=Ir||tl;function ku(Se,oe){return rt(Se,oe)}function ws(Se){if(!np(Se))return!1;var oe=Ue(Se);return oe==h||oe==p||oe==u||oe==_}function L0(Se){return typeof Se=="number"&&Se>-1&&Se%1==0&&Se<=o}function np(Se){var oe=typeof Se;return Se!=null&&(oe=="object"||oe=="function")}function Ta(Se){return Se!=null&&typeof Se=="object"}var wc=X?me(X):ht;function j0(Se){return el(Se)?Ne(Se):Tt(Se)}function jl(){return[]}function tl(){return!1}e.exports=ku})(cA,cA.exports)),cA.exports}var TFt=SFt();const eK=Ao(TFt);function Bne(e,t){if((typeof e=="number"||typeof e=="string")&&(typeof t=="string"||typeof t=="number"))return String(e)===String(t);if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return eK(n,r)}if(typeof e=="object"){const n=Object.values(e);return n.length!==t.length?!1:Array.isArray(t[0])?n.every((i,s)=>{const o=t[s];if(!Array.isArray(o))return!1;const a=typeof i=="string"?i===""?[]:i.split("|"):[];if(a.length!==o.length)return!1;const l=[...a].sort(),u=[...o].sort();return l.every((c,d)=>c===u[d])}):n.every((i,s)=>String(i)===String(t[s]))}return eK(e,t)}function ux(e,t){let n=!0;return(t||[]).forEach(r=>{const i=e[r.id];(i===void 0||!Bne(i,r.answer))&&(n=!1)}),n}function nve(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?ux(e,o.correctAnswer):!0}function AFt(){const e=id(),t=n1(),n=gr(P=>P.trialValidation),r=gr(P=>P.sequence),i=gr(P=>P.answers),s=gr(P=>P.modes),o=gr(P=>P.clickedPrevious),a=pc(),{funcIndex:l}=So(),u=n0(),c=Us(),{saveTrialAnswer:d,setReactiveAnswers:f,setMatrixAnswersRadio:h,setMatrixAnswersCheckbox:p,setRankingAnswers:m}=ls(),{storageEngine:g}=Vi(),y=Mh(),v=k.useMemo(()=>s.dataCollectionEnabled,[s]),b=qwt(u),_=k0(),E=typeof e!="number"||_||!b,S=f1(),T=$l(),A=k.useMemo(()=>Date.now(),[l,e]),R=CFt(),I=k.useCallback((P=!0)=>{if(typeof e!="number")return;const N=structuredClone(n[u]),M=N?Object.values(N).reduce((z,V)=>Object.hasOwn(V,"values")?{...z,...V.values}:z,{}):{},{provenanceGraph:O}=N||{},j=Date.now(),{componentName:B}=S,H=R&&"current"in R&&R.current?R.current.splice(0,R.current.length):[];if(v&&(S.endTime===-1||o)){const z={...S,answer:P?M:{},startTime:A,endTime:j,provenanceGraph:O,windowEvents:H,timedOut:!P};c(d({...z})),g&&g.saveAnswers({...i,[u]:z}),c(f({})),c(p(null)),c(h(null)),c(m(null))}let q=e+1;const G=nPe(r,e),U=G!==null&&G.some(z=>Object.hasOwn(z.currentBlock,"skip")&&z.currentBlock.skip!==void 0),L={...i,[u]:{answer:M,startTime:A,endTime:j,provenanceGraph:O,windowEvents:H}};U&&[...G.flatMap(V=>V.currentBlock.skip?V.currentBlock.skip.map(Y=>({...Y,firstIndex:V.firstIndex,lastIndex:V.lastIndex})):[])].some(V=>{let Y=!1;const Q=Object.fromEntries(Object.entries(L).filter(([ue])=>{const se=parseInt(ue.slice(ue.lastIndexOf("_")+1),10);return se>=V.firstIndex&&se<=e})),ne=V.check!=="block"?Object.entries(Q).filter(([ue])=>ue.slice(0,ue.lastIndexOf("_"))===V.name):Object.entries(Q);if(ne.length===0)return!1;if(ne.some(([ue,se])=>!se))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(V,null,2)}`);if(V.check==="response"||V.check==="responses"){const[ue,se]=ne[0];V.check==="response"?Y=V.comparison==="equal"?V.value===se.answer[V.responseId]:V.value!==se.answer[V.responseId]:Y=!nve(se.answer,ue,a.components[ue.slice(0,ue.lastIndexOf("_"))],a)}else if(V.check==="block"||V.check==="repeatedComponent"){if(ne.length<V.value)return!1;const ue=ne.map(([he,ie])=>nve(ie.answer,he,a.components[B.slice(0,B.lastIndexOf("_"))],a)),se=ue.filter(he=>he).length,ae=ue.length-se;Y=V.condition==="numCorrect"&&se===V.value||V.condition==="numIncorrect"&&ae===V.value}if(Y){const ue=t.indexOf(V.to),se=ue===-1?Vwt(r,V.to):-1;return q=ue===-1?se:ue,!0}return!1}),T(l?`/${y}/${js(e)}/${js(oh(l)+1)}${window.location.search}`:`/${y}/${js(q)}${window.location.search}`)},[e,n,u,S,R,v,o,r,i,A,l,c,d,g,f,p,h,m,a,t,T,y]);return{isNextDisabled:E,goToNextStep:I}}function kFt(){const e=id(),{funcIndex:t}=So(),n=Mh(),r=$l(),i=k0(),s=pc(),o=Us(),{deleteDynamicBlockAnswers:a}=ls(),l=gr(d=>d.answers),u=typeof e!="number"||i||e<=0,c=k.useCallback(()=>{if(typeof e!="number")return;const d=e-1,f=Kd(s.sequence);if(t&&(o(a({currentStep:e,funcIndex:oh(t),funcName:f[e]})),oh(t)!==0)){r(`/${n}/${js(e)}/${js(oh(t)-1)}${window.location.search}`);return}const h=f[d];if(AG(h,s.sequence)){const g=Object.keys(l).filter(y=>y.startsWith(`${h}_${d}_`)).length-1;r(`/${n}/${js(d)}/${js(g)}${window.location.search}`)}else r(`/${n}/${js(d)}${window.location.search}`)},[e,t,r,n,s,o,a,l]);return{isPreviousDisabled:u,goToPreviousStep:c}}function IFt({label:e="Previous",px:t}){const{isPreviousDisabled:n,goToPreviousStep:r}=kFt(),i=Us(),{setClickedPrevious:s}=ls(),o=k.useCallback(()=>{i(s(!0)),r()},[r,s,i]);return w.jsx(Yt,{type:"submit",disabled:n,onClick:o,px:t,children:e})}function RFt({label:e="Next",disabled:t=!1,config:n,location:r,checkAnswer:i}){const{isNextDisabled:s,goToNextStep:o}=AFt(),a=pc(),l=$l(),u=k.useMemo(()=>n?.nextButtonDisableTime??a.uiConfig.nextButtonDisableTime,[n,a]),c=k.useMemo(()=>n?.nextButtonEnableTime??a.uiConfig.nextButtonEnableTime??0,[n,a]),[d,f]=k.useState(void 0);k.useEffect(()=>{let y=0;const v=setInterval(()=>{y+=100,f(y)},100);return()=>{clearInterval(v)}},[]),k.useEffect(()=>{d&&u&&d>=u&&a.uiConfig.timeoutReject&&l("./../__timedOut")},[u,d,l,a.uiConfig.timeoutReject]);const h=k.useMemo(()=>{const y=u&&d?d<=u:!0,v=d?d>=c:!0;return y&&v},[u,c,d]),p=k.useMemo(()=>n?.nextOnEnter??a.uiConfig.nextOnEnter,[n,a]);k.useEffect(()=>{const y=v=>{v.key==="Enter"&&!t&&!s&&h&&o()};return p?(window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}):()=>{}},[t,s,h,o,p]);const m=k.useMemo(()=>t||s||!h,[t,s,h]),g=k.useMemo(()=>n?.previousButtonText??a.uiConfig.previousButtonText??"Previous",[n,a]);return w.jsxs(w.Fragment,{children:[w.jsxs(Pn,{justify:"right",gap:"xs",mt:"sm",children:[n?.previousButton&&w.jsx(IFt,{label:g,px:r==="sidebar"&&i?8:void 0}),i,w.jsx(Yt,{type:"submit",disabled:m,onClick:()=>o(),px:r==="sidebar"&&i?8:void 0,children:e})]}),d&&w.jsxs(w.Fragment,{children:[c>0&&d<c&&w.jsxs(Bd,{mt:"md",title:"Please wait",color:"blue",icon:w.jsx(qg,{}),children:["The next button will be enabled in"," ",Math.ceil((c-d)/1e3)," ","seconds."]}),u&&d&&u-d<1e4&&(u-d>0?w.jsxs(Bd,{mt:"md",title:"Next button disables soon",color:"yellow",icon:w.jsx(Vd,{}),children:["The next button disables in"," ",Math.ceil((u-d)/1e3)," ","seconds."]}):!a.uiConfig.timeoutReject&&w.jsxs(Bd,{mt:"md",title:"Next button disabled",color:"red",icon:w.jsx(Vd,{}),children:["The next button has timed out and is now disabled.",w.jsx(Pn,{justify:"right",mt:"sm",children:w.jsx(Yt,{onClick:()=>o(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})]})}function DFt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const PFt=typeof window<"u"?k.useLayoutEffect:k.useEffect;function Ia(e,t){PFt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function OFt(e,t){e&&DFt(e),Ia(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Ia(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Ia(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Ia(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Ia(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Ia(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Ia(`mantine-form:${e}:clear-errors`,t.clearErrors),Ia(`mantine-form:${e}:reset`,t.reset),Ia(`mantine-form:${e}:validate`,t.validate),Ia(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Ia(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Ia(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Ia(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Ia(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Ia(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Ia(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Ia(`mantine-form:${e}:reset-touched`,t.resetTouched)}function NFt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function tK(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function MFt(e){const[t,n]=k.useState(tK(e)),r=k.useRef(t),i=k.useCallback(l=>{n(u=>{const c=tK(typeof l=="function"?l(u):l);return r.current=c,c})},[]),s=k.useCallback(()=>i({}),[]),o=k.useCallback(l=>{r.current[l]!==void 0&&i(u=>{const c={...u};return delete c[l],c})},[t]),a=k.useCallback((l,u)=>{u==null||u===!1?o(l):r.current[l]!==u&&i(c=>({...c,[l]:u}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function nK(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function rve(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function ive(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=nK(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([l])=>{if(!l.startsWith(`${i}.`))return!1;const u=rve(l,i);return Number.isNaN(u)?!1:u>=t}).forEach(([l,u])=>{const c=rve(l,i),d=l.replace(`${i}.${c}`,`${i}.${c+r}`);o[d]=u,a.add(d),a.has(l)||delete o[l]}),o}function $Ft(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r},a=new Set;return Object.keys(r).forEach(l=>{if(a.has(l))return;let u,c;if(l.startsWith(i)?(u=l,c=l.replace(i,s)):l.startsWith(s)&&(u=l.replace(s,i),c=l),u&&c){const d=o[u],f=o[c];f===void 0?delete o[u]:o[u]=f,d===void 0?delete o[c]:o[c]=d,a.add(u),a.add(c)}}),o}function sve(e,t,n){typeof n.value=="object"&&(n.value=nE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function nE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(nE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(nE(a),nE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(nE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)sve(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||sve(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function $6e(e){return typeof e!="string"?[]:e.split(".")}function Ba(e,t){const n=$6e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function eD(e,t,n){const r=$6e(e);if(r.length===0)return n;const i=nE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function FFt(e,{from:t,to:n},r){const i=Ba(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),eD(e,s,r)}function LFt(e,t,n,r){const i=Ba(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),eD(e,s,r)}function jFt(e,t,n){const r=Ba(e,n);return Array.isArray(r)?eD(e,r.filter((i,s)=>s!==t),n):n}function BFt(e,t,n,r){const i=Ba(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,eD(e,s,r)}function zFt({$values:e,$errors:t,$status:n}){const r=k.useCallback((a,l)=>{n.clearFieldDirty(a),t.setErrors(u=>$Ft(a,l,u)),e.setValues({values:FFt(a,l,e.refValues.current),updateState:!0})},[]),i=k.useCallback((a,l)=>{n.clearFieldDirty(a),t.setErrors(u=>ive(a,l,u,-1)),e.setValues({values:jFt(a,l,e.refValues.current),updateState:!0})},[]),s=k.useCallback((a,l,u)=>{n.clearFieldDirty(a),t.setErrors(c=>ive(a,u,c,1)),e.setValues({values:LFt(a,l,u,e.refValues.current),updateState:!0})},[]),o=k.useCallback((a,l,u)=>{n.clearFieldDirty(a),e.setValues({values:BFt(a,u,l,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var JV,ove;function zne(){return ove||(ove=1,JV=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),JV}var VFt=zne();const dA=Ao(VFt);function u2(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function UFt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=k.useState(t),[o,a]=k.useState(e),l=k.useRef(t),u=k.useRef(e),c=k.useCallback(S=>{const T=typeof S=="function"?S(l.current):S;l.current=T,n==="controlled"&&s(T)},[]),d=k.useCallback((S,T=!1)=>{const A=typeof S=="function"?S(u.current):S;u.current=A,(n==="controlled"||T)&&a(A)},[]),f=k.useCallback(()=>c({}),[]),h=k.useCallback(S=>{const T=S?{...r.refValues.current,...S}:r.refValues.current;r.setValuesSnapshot(T),d({})},[]),p=k.useCallback((S,T)=>{c(A=>u2(A,S)===T?A:{...A,[S]:T})},[]),m=k.useCallback((S,T,A)=>{d(R=>u2(R,S)===T?R:{...R,[S]:T},A)},[]),g=k.useCallback((S,T)=>{const A=u2(u.current,S),R=!dA(Ba(S,r.getValuesSnapshot()),T),I=nK(S,u.current);I[S]=R,d(I,A!==R)},[]),y=k.useCallback(S=>u2(l.current,S),[]),v=k.useCallback(S=>d(T=>{if(typeof S!="string")return T;const A=nK(S,T);return delete A[S],dA(A,T)?T:A}),[]),b=k.useCallback(S=>{if(S){const A=Ba(S,u.current);if(typeof A=="boolean")return A;const R=Ba(S,r.refValues.current),I=Ba(S,r.valuesSnapshot.current);return!dA(R,I)}return Object.keys(u.current).length>0?u2(u.current):!dA(r.refValues.current,r.valuesSnapshot.current)},[]),_=k.useCallback(()=>u.current,[]),E=k.useCallback(()=>l.current,[]);return{touchedState:i,dirtyState:o,touchedRef:l,dirtyRef:u,setTouched:c,setDirty:d,resetDirty:h,resetTouched:f,isTouched:y,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:v,isDirty:b,getDirty:_,getTouched:E,setCalculatedFieldDirty:g}}function HFt({initialValues:e,onValuesChange:t,mode:n}){const r=k.useRef(!1),[i,s]=k.useState(e||{}),o=k.useRef(i),a=k.useRef(i),l=k.useCallback(({values:m,subscribers:g,updateState:y=!0,mergeWithPreviousValues:v=!0})=>{const b=o.current,_=m instanceof Function?m(o.current):m,E=v?{...b,..._}:_;o.current=E,y&&s(E),t?.(E,b),g?.filter(Boolean).forEach(S=>S({updatedValues:E,previousValues:b}))},[t]),u=k.useCallback(m=>{const g=Ba(m.path,o.current),y=m.value instanceof Function?m.value(g):m.value;if(g!==y){const v=o.current,b=eD(m.path,y,o.current);l({values:b,updateState:m.updateState}),m.subscribers?.filter(Boolean).forEach(_=>_({path:m.path,updatedValues:b,previousValues:v}))}},[l]),c=k.useCallback(m=>{a.current=m},[]),d=k.useCallback((m,g)=>{r.current||(r.current=!0,l({values:m,updateState:n==="controlled"}),c(m),g())},[l]),f=k.useCallback(()=>{l({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[l]),h=k.useCallback(()=>o.current,[]),p=k.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:l,setFieldValue:u,resetValues:f,setValuesSnapshot:c,initialize:d,getValues:h,getValuesSnapshot:p}}function qFt({$status:e}){const t=k.useRef({}),n=k.useCallback((i,s)=>{k.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=k.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Ba(i,o.previousValues),value:Ba(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function ave(e,t){return e?`${e}-${t.toString()}`:t.toString()}const iO=Symbol("root-rule");function lve(e){const t=tK(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function rK(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,l=Ba(a,t);let u=!1;return typeof o=="function"&&(i[a]=o(l,t,a)),typeof o=="object"&&Array.isArray(l)&&(u=!0,l.forEach((c,d)=>rK(o,t,`${a}.${d}`,i)),iO in o&&(i[a]=o[iO](l,t,a))),typeof o=="object"&&typeof l=="object"&&l!==null&&(u||rK(o,t,a,i),iO in o&&(i[a]=o[iO](l,t,a))),i},r)}function iK(e,t){return lve(typeof e=="function"?e(t):rK(e,t))}function sO(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=iK(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const WFt="__MANTINE_FORM_INDEX__";function uve(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${WFt}`)):!1:!1}function F6e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:l=!1,onValuesChange:u,transformValues:c=m=>m,enhanceGetInputProps:d,validate:f,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=MFt(r),g=HFt({initialValues:n,onValuesChange:u,mode:t}),y=UFt({initialDirty:i,initialTouched:s,$values:g,mode:t}),v=zFt({$values:g,$errors:m,$status:y}),b=qFt({$status:y}),[_,E]=k.useState(0),[S,T]=k.useState({}),[A,R]=k.useState(!1),I=k.useCallback(()=>{g.resetValues(),m.clearErrors(),y.resetDirty(),y.resetTouched(),t==="uncontrolled"&&E(Q=>Q+1)},[]),P=k.useCallback(Q=>{o&&m.clearErrors(),t==="uncontrolled"&&E(ne=>ne+1),Object.keys(b.subscribers.current).forEach(ne=>{const ue=Ba(ne,g.refValues.current),se=Ba(ne,Q);ue!==se&&b.getFieldSubscribers(ne).forEach(ae=>ae({previousValues:Q,updatedValues:g.refValues.current}))})},[o]),N=k.useCallback(Q=>{const ne=g.refValues.current;g.initialize(Q,()=>t==="uncontrolled"&&E(ue=>ue+1)),P(ne)},[P]),M=k.useCallback((Q,ne,ue)=>{const se=uve(Q,a),ae=ne instanceof Function?ne(Ba(Q,g.refValues.current)):ne;y.setCalculatedFieldDirty(Q,ae),p==="change"&&y.setFieldTouched(Q,!0),!se&&o&&m.clearFieldError(Q),g.setFieldValue({path:Q,value:ne,updateState:t==="controlled",subscribers:[...b.getFieldSubscribers(Q),se?he=>{const ie=sO(Q,f,he.updatedValues);ie.hasError?m.setFieldError(Q,ie.error):m.clearFieldError(Q)}:null,ue?.forceUpdate!==!1&&t!=="controlled"?()=>T(he=>({...he,[Q]:(he[Q]||0)+1})):null]})},[u,f]),O=k.useCallback(Q=>{const ne=g.refValues.current;g.setValues({values:Q,updateState:t==="controlled"}),P(ne)},[u,P]),j=k.useCallback(()=>{const Q=iK(f,g.refValues.current);return m.setErrors(Q.errors),Q},[f]),B=k.useCallback(Q=>{const ne=sO(Q,f,g.refValues.current);return ne.hasError?m.setFieldError(Q,ne.error):m.clearFieldError(Q),ne},[f]),H=(Q,{type:ne="input",withError:ue=!0,withFocus:se=!0,...ae}={})=>{const ie={onChange:NFt(le=>M(Q,le,{forceUpdate:!1})),"data-path":ave(e,Q)};return ue&&(ie.error=m.errorsState[Q]),ne==="checkbox"?ie[t==="controlled"?"checked":"defaultChecked"]=Ba(Q,g.refValues.current):ie[t==="controlled"?"value":"defaultValue"]=Ba(Q,g.refValues.current),se&&(ie.onFocus=()=>y.setFieldTouched(Q,!0),ie.onBlur=()=>{if(uve(Q,l)){const le=sO(Q,f,g.refValues.current);le.hasError?m.setFieldError(Q,le.error):m.clearFieldError(Q)}}),Object.assign(ie,d?.({inputProps:ie,field:Q,options:{type:ne,withError:ue,withFocus:se,...ae},form:Y}))},q=(Q,ne)=>ue=>{h==="always"&&ue?.preventDefault();const se=j();if(se.hasErrors)h==="validation-failed"&&ue?.preventDefault(),ne?.(se.errors,g.refValues.current,ue);else{const ae=Q?.(c(g.refValues.current),ue);ae instanceof Promise&&(R(!0),ae.finally(()=>R(!1)))}},G=Q=>c(Q||g.refValues.current),U=k.useCallback(Q=>{Q.preventDefault(),I()},[]),L=k.useCallback(Q=>Q?!sO(Q,f,g.refValues.current).hasError:!iK(f,g.refValues.current).hasErrors,[f]),z=Q=>`${_}-${Q}-${S[Q]||0}`,V=k.useCallback(Q=>document.querySelector(`[data-path="${ave(e,Q)}"]`),[]),Y={watch:b.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,getInitialValues:g.getValuesSnapshot,setInitialValues:g.setValuesSnapshot,initialize:N,setValues:O,setFieldValue:M,submitting:A,setSubmitting:R,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:y.resetDirty,setTouched:y.setTouched,setDirty:y.setDirty,isTouched:y.isTouched,resetTouched:y.resetTouched,isDirty:y.isDirty,getTouched:y.getTouched,getDirty:y.getDirty,reorderListItem:v.reorderListItem,insertListItem:v.insertListItem,removeListItem:v.removeListItem,replaceListItem:v.replaceListItem,reset:I,validate:j,validateField:B,getInputProps:H,onSubmit:q,onReset:U,isValid:L,getTransformedValues:G,key:z,getInputNode:V};return OFt(e,Y),Y}function GFt(e,t){const n=t;return r=>typeof r!="string"?n:e.test(r)?null:n}function YFt(e){return GFt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function L6e(e,t){const n=e.minSelections&&t.length<e.minSelections,r=e.maxSelections&&t.length>e.maxSelections;return n?`Please select at least ${e.minSelections} options`:r?`Please select at most ${e.maxSelections} options`:null}function j6e(e,t){const n=e.minSelections&&t.length<e.minSelections,r=e.maxSelections&&t.length>e.maxSelections;return n&&r?`Please select between ${e.minSelections} and ${e.maxSelections} options`:n?`Please select at least ${e.minSelections} options`:r?`Please select at most ${e.maxSelections} options`:null}function sK(e,t){const n=typeof t=="string"?parseFloat(t):t,{min:r,max:i}=e;return r!==void 0&&i!==void 0&&(n<r||n>i)?`Please enter a value between ${r} and ${i}`:r!==void 0&&n<r?`Please enter a value of ${r} or greater`:i!==void 0&&n>i?`Please enter a value of ${i} or less`:null}function B6e(e,t){return Object.values(t).some(r=>r==="")?"Please answer all questions in the matrix to continue.":null}const KFt=new URLSearchParams(window.location.search),z6e=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{},s=t&&t[`${r.id}-dontKnow`]!==void 0?t[`${r.id}-dontKnow`]:!1,o=r.withDontKnow?{[`${r.id}-dontKnow`]:s}:{},a=t&&t[`${r.id}-other`]!==void 0?t[`${r.id}-other`]:"",l=r.withOther?{[`${r.id}-other`]:a}:{};if(i)n={...n,[r.id]:i,...o,...l};else{let u="";r.paramCapture?u=KFt.get(r.paramCapture):r.type==="reactive"||r.type==="ranking-sublist"||r.type==="ranking-categorical"||r.type==="ranking-pairwise"?u=[]:r.type==="matrix-radio"||r.type==="matrix-checkbox"?u=Object.fromEntries(r.questionOptions.map(c=>[c,""])):r.type==="slider"&&r.startingValue&&(u=r.startingValue.toString()),n={...n,[r.id]:u,...o,...l}}}),{...n}},XFt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return n.type==="matrix-checkbox"||n.type==="matrix-radio"?B6e(n,r):n.type==="ranking-sublist"||n.type==="ranking-categorical"||n.type==="ranking-pairwise"?Object.keys(r).length>0?null:"Empty Input":Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,l)=>a===o[l])?null:"Incorrect input"}return n.type==="checkbox"?j6e(n,r):n.type==="dropdown"?L6e(n,r):r.length===0?"Empty input":null}if(n.required&&n.requiredValue!=null&&r!=null)return r.toString()!==n.requiredValue.toString()?"Incorrect input":null;if(n.required){if((r==null||r==="")&&!i[`${n.id}-dontKnow`])return"Empty input";if(n.type==="numerical")return sK(n,r)}return r===null?"Empty input":null}})}),t};function QFt(e,t,n){const[r,i]=k.useState(null),s=F6e({initialValues:z6e(e,n),validate:XFt(e)});return k.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function sm(e,t,n){const{requiredValue:r,requiredLabel:i}=e;let s="";if(t.checked&&Array.isArray(r))s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null;else if(t.checked&&e.required&&e.type==="checkbox")s=j6e(e,t.checked);else if(t.value&&e.type==="dropdown")s=L6e(e,t.value);else if(t.value&&typeof t.value=="number"&&e.type==="numerical"&&sK(e,t.value))s=sK(e,t.value);else{if(t.value&&typeof t.value=="object"&&!Array.isArray(t.value)&&(e.type==="matrix-radio"||e.type==="matrix-checkbox"))return B6e(e,t.value);s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?n.find(o=>o.value===r)?.label:r.toString())} to continue.`:null}return s}function V6e({horizontal:e,children:t,style:n}){return e?w.jsx(Pn,{mt:Ye(4),gap:"lg",style:n,children:t}):w.jsx(Gn,{gap:"md",style:n,children:t})}const JFt="_fixDisabled_1k5ri_1",ZFt="_fixDisabledIcon_1k5ri_16",eLt="_fixDisabledLabel_1k5ri_20",Bf={fixDisabled:JFt,fixDisabledIcon:ZFt,fixDisabledLabel:eLt},tLt="_fixDisabled_d4mus_1",r0={fixDisabled:tLt};function Jd({prompt:e,required:t,index:n,enumerateQuestions:r,infoText:i}){return w.jsxs(Rt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&w.jsx(De,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(Zp,{text:e,required:t})}),i&&w.jsx(bt,{label:i,multiline:!0,maw:400,position:"bottom",children:w.jsx(qg,{size:16,opacity:.5,style:{marginTop:6}})})]})}function nLt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,otherValue:s}){const{prompt:o,required:a,secondaryText:l,horizontal:u,withOther:c,options:d,infoText:f}=e,h=f1(),p=k.useMemo(()=>h?h.optionOrders:{},[h]),m=k.useMemo(()=>p[e.id]||d.map(b=>typeof b=="string"?{label:b,value:b}:b),[p,d,e.id]),[g,y]=k.useState(!1),v=k.useMemo(()=>sm(e,n,m),[e,n,m]);return w.jsxs(_l.Group,{label:o.length>0&&w.jsx(Jd,{prompt:o,required:a,index:r,enumerateQuestions:i,infoText:f}),description:l,...n,error:v,errorProps:{c:a?"red":"orange"},style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[w.jsx(De,{mt:"xs",children:w.jsxs(V6e,{horizontal:!!u,style:{flexGrow:1},children:[m.map(b=>w.jsx(_l,{disabled:t,value:b.value,label:b.label,classNames:{input:Bf.fixDisabled,label:Bf.fixDisabledLabel,icon:Bf.fixDisabledIcon}},b.value)),c&&w.jsx(_l,{disabled:t,value:"__other",checked:g,onClick:b=>y(b.currentTarget.checked),label:u?"Other":w.jsx(Qr,{mt:-8,placeholder:"Other",disabled:!g,...s,classNames:{input:r0.fixDisabled}}),classNames:{input:Bf.fixDisabled,label:Bf.fixDisabledLabel,icon:Bf.fixDisabledIcon}},"__other")]})}),u&&c&&w.jsx(Qr,{mt:"sm",placeholder:"Other",disabled:!g,...s,w:216,classNames:{input:r0.fixDisabled}})]})}function rLt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:l,secondaryText:u,infoText:c}=e,d=l.map(h=>typeof h=="string"?{value:h,label:h}:h);return e.minSelections&&e.minSelections>=1||e.maxSelections&&e.maxSelections>1?w.jsx(tS,{disabled:t,label:o.length>0&&w.jsx(Jd,{prompt:o,required:a,index:r,enumerateQuestions:i,infoText:c}),description:u,placeholder:n.value.length===0?s:void 0,data:d,radius:"md",size:"md",...n,value:n.value===""?[]:Array.isArray(n.value)?n.value:[n.value],error:sm(e,n,d),withErrorStyles:a,errorProps:{c:a?"red":"orange"},classNames:{input:r0.fixDisabled},maxDropdownHeight:200,clearable:!0,searchable:!0}):w.jsx(Ug,{disabled:t,label:o.length>0&&w.jsx(Jd,{prompt:o,required:a,index:r,enumerateQuestions:i,infoText:c}),description:u,placeholder:s,data:d,radius:"md",size:"md",...n,value:n.value===""?null:n.value,error:sm(e,n,d),withErrorStyles:a,errorProps:{c:a?"red":"orange"},classNames:{input:r0.fixDisabled},maxDropdownHeight:200})}function iLt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o,infoText:a}=e;return w.jsx(Qr.Wrapper,{label:i.length>0&&w.jsx(Jd,{prompt:i,required:s,index:n,enumerateQuestions:r,infoText:a}),description:o,size:"md",children:t.value&&w.jsx(wl,{children:Array.isArray(t.value)?t.value.map(l=>w.jsx(wl.Item,{children:l},l)):w.jsx(wl.Item,{children:t.value})})})}const sLt="_fixDisabled_14ab8_1",oLt="_fixDisabledIcon_14ab8_16",aLt="_fixDisabledLabel_14ab8_20",yy={fixDisabled:sLt,fixDisabledIcon:oLt,fixDisabledLabel:aLt};function U6e({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s,otherValue:o}){const{prompt:a,required:l,leftLabel:u,rightLabel:c,secondaryText:d,infoText:f,horizontal:h,withOther:p,options:m}=e,g=f1(),y=k.useMemo(()=>g?g.optionOrders:{},[g]),v=k.useMemo(()=>y[e.id]||m.map(S=>typeof S=="string"?{label:S,value:S}:S),[y,m,e.id]),[b,_]=k.useState(!1),E=k.useMemo(()=>sm(e,n,v),[e,n,v]);return w.jsxs(Tl.Group,{name:`radioInput${e.id}`,label:a.length>0&&w.jsx(Jd,{prompt:a,required:l,index:r,enumerateQuestions:i,infoText:f}),description:d,...n,error:E,errorProps:{c:l?"red":"orange"},style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[w.jsxs(Pn,{gap:"lg",align:"flex-end",mt:h?0:"sm",children:[u?w.jsx(He,{children:u}):null,w.jsxs(V6e,{horizontal:!!h,style:{flexGrow:1},children:[v.map(S=>w.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",gap:h?"unset":Ye(12),flex:s?1:"unset",alignItems:"center"},children:[h&&w.jsx(Zp,{text:S.label}),w.jsx(Tl,{disabled:t,value:S.value,label:S.label,styles:{label:{display:h?"none":"initial"}},onChange:()=>_(!1),classNames:{radio:yy.fixDisabled,label:yy.fixDisabledLabel,icon:yy.fixDisabledIcon}})]},`${S.value}-${e.id}`)),p&&w.jsxs("div",{style:{display:"flex",flexDirection:h?"column":"row",gap:h?"unset":Ye(12),flex:s?1:"unset",alignItems:"center"},children:[h&&w.jsx(He,{size:"sm",children:"Other"}),w.jsx(Tl,{disabled:t,value:"other",checked:b,onClick:S=>_(S.currentTarget.checked),label:!h&&w.jsx(Qr,{mt:-8,placeholder:"Other",disabled:!b,...o,classNames:{input:r0.fixDisabled}}),mt:0,classNames:{radio:yy.fixDisabled,label:yy.fixDisabledLabel,icon:yy.fixDisabledIcon}})]})]}),w.jsx(He,{children:c})]}),h&&p&&w.jsx(Qr,{mt:"sm",placeholder:"Other",disabled:!b,...o,w:216,classNames:{input:r0.fixDisabled}})]},e.id)}function lLt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s,start:o,spacing:a}=e,l=[],u=o??1,c=a??1;for(let f=0;f<+s;f+=1){const h=u+f*c;l.push({label:`${h}`,value:`${h}`})}const d={...e,type:"radio",options:l,horizontal:!0};return w.jsx(U6e,{disabled:t,response:d,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function uLt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,placeholder:a,secondaryText:l,infoText:u}=e;return w.jsx(kZ,{disabled:t,placeholder:a,label:s.length>0&&w.jsx(Jd,{prompt:s,required:o,index:r,enumerateQuestions:i,infoText:u}),description:l,radius:"md",size:"md",...n,error:sm(e,n),withErrorStyles:o,errorProps:{c:o?"red":"orange"},classNames:{input:r0.fixDisabled}})}function cLt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const h8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function PS(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Vne(e){return"nodeType"in e}function Eu(e){var t,n;return e?PS(e)?e:Vne(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Une(e){const{Document:t}=Eu(e);return e instanceof t}function tD(e){return PS(e)?!1:e instanceof Eu(e).HTMLElement}function H6e(e){return e instanceof Eu(e).SVGElement}function OS(e){return e?PS(e)?e.document:Vne(e)?Une(e)?e:tD(e)||H6e(e)?e.ownerDocument:document:document:document}const gh=h8?k.useLayoutEffect:k.useEffect;function p8(e){const t=k.useRef(e);return gh(()=>{t.current=e}),k.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function dLt(){const e=k.useRef(null),t=k.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=k.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function pI(e,t){t===void 0&&(t=[e]);const n=k.useRef(e);return gh(()=>{n.current!==e&&(n.current=e)},t),n}function nD(e,t){const n=k.useRef();return k.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function F5(e){const t=p8(e),n=k.useRef(null),r=k.useCallback(i=>{i!==n.current&&t?.(i,n.current),n.current=i},[]);return[n,r]}function L5(e){const t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current}let ZV={};function rD(e,t){return k.useMemo(()=>{if(t)return t;const n=ZV[e]==null?0:ZV[e]+1;return ZV[e]=n,e+"-"+n},[e,t])}function q6e(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,u]of a){const c=s[l];c!=null&&(s[l]=c+e*u)}return s},{...t})}}const TE=q6e(1),j5=q6e(-1);function fLt(e){return"clientX"in e&&"clientY"in e}function m8(e){if(!e)return!1;const{KeyboardEvent:t}=Eu(e.target);return t&&e instanceof t}function hLt(e){if(!e)return!1;const{TouchEvent:t}=Eu(e.target);return t&&e instanceof t}function B5(e){if(hLt(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return fLt(e)?{x:e.clientX,y:e.clientY}:null}const kv=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[kv.Translate.toString(e),kv.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),cve="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pLt(e){return e.matches(cve)?e:e.querySelector(cve)}const mLt={display:"none"};function gLt(e){let{id:t,value:n}=e;return bn.createElement("div",{id:t,style:mLt},n)}function yLt(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return bn.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function vLt(){const[e,t]=k.useState("");return{announce:k.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const W6e=k.createContext(null);function bLt(e){const t=k.useContext(W6e);k.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function wLt(){const[e]=k.useState(()=>new Set),t=k.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[k.useCallback(r=>{let{type:i,event:s}=r;e.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[e]),t]}const xLt={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_Lt={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ELt(e){let{announcements:t=_Lt,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=xLt}=e;const{announce:s,announcement:o}=vLt(),a=rD("DndLiveRegion"),[l,u]=k.useState(!1);if(k.useEffect(()=>{u(!0)},[]),bLt(k.useMemo(()=>({onDragStart(d){let{active:f}=d;s(t.onDragStart({active:f}))},onDragMove(d){let{active:f,over:h}=d;t.onDragMove&&s(t.onDragMove({active:f,over:h}))},onDragOver(d){let{active:f,over:h}=d;s(t.onDragOver({active:f,over:h}))},onDragEnd(d){let{active:f,over:h}=d;s(t.onDragEnd({active:f,over:h}))},onDragCancel(d){let{active:f,over:h}=d;s(t.onDragCancel({active:f,over:h}))}}),[s,t])),!l)return null;const c=bn.createElement(bn.Fragment,null,bn.createElement(gLt,{id:r,value:i.draggable}),bn.createElement(yLt,{id:a,announcement:o}));return n?Ip.createPortal(c,n):c}var jo;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(jo||(jo={}));function z5(){}function dve(e,t){return k.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function CLt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return k.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const yh=Object.freeze({x:0,y:0});function SLt(e,t){const n=B5(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function TLt(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ALt(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function kLt(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),o=i-r,a=s-n;if(r<i&&n<s){const l=t.width*t.height,u=e.width*e.height,c=o*a,d=c/(l+u-c);return Number(d.toFixed(4))}return 0}const g8=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=kLt(a,t);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(TLt)};function ILt(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function G6e(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:yh}function RLt(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+e*a.y,bottom:o.bottom+e*a.y,left:o.left+e*a.x,right:o.right+e*a.x}),{...n})}}const DLt=RLt(1);function Y6e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function PLt(e,t,n){const r=Y6e(t);if(!r)return e;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=e.left-o-(1-i)*parseFloat(n),u=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),c=i?e.width/i:e.width,d=s?e.height/s:e.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}const OLt={ignoreTransform:!1};function NS(e,t){t===void 0&&(t=OLt);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:c}=Eu(e).getComputedStyle(e);u&&(n=PLt(n,u,c))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function fve(e){return NS(e,{ignoreTransform:!0})}function NLt(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function MLt(e,t){return t===void 0&&(t=Eu(e).getComputedStyle(e)),t.position==="fixed"}function $Lt(e,t){t===void 0&&(t=Eu(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function Hne(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Une(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!tD(i)||H6e(i)||n.includes(i))return n;const s=Eu(e).getComputedStyle(i);return i!==e&&$Lt(i,s)&&n.push(i),MLt(i,s)?n:r(i.parentNode)}return e?r(e):n}function K6e(e){const[t]=Hne(e,1);return t??null}function eU(e){return!h8||!e?null:PS(e)?e:Vne(e)?Une(e)||e===OS(e).scrollingElement?window:tD(e)?e:null:null}function X6e(e){return PS(e)?e.scrollX:e.scrollLeft}function Q6e(e){return PS(e)?e.scrollY:e.scrollTop}function oK(e){return{x:X6e(e),y:Q6e(e)}}var ua;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ua||(ua={}));function J6e(e){return!h8||!e?!1:e===document.scrollingElement}function Z6e(e){const t={x:0,y:0},n=J6e(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:t}}const FLt={x:.2,y:.2};function LLt(e,t,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=FLt);const{isTop:u,isBottom:c,isLeft:d,isRight:f}=Z6e(e),h={x:0,y:0},p={x:0,y:0},m={height:t.height*i.y,width:t.width*i.x};return!u&&s<=t.top+m.height?(h.y=ua.Backward,p.y=r*Math.abs((t.top+m.height-s)/m.height)):!c&&l>=t.bottom-m.height&&(h.y=ua.Forward,p.y=r*Math.abs((t.bottom-m.height-l)/m.height)),!f&&a>=t.right-m.width?(h.x=ua.Forward,p.x=r*Math.abs((t.right-m.width-a)/m.width)):!d&&o<=t.left+m.width&&(h.x=ua.Backward,p.x=r*Math.abs((t.left+m.width-o)/m.width)),{direction:h,speed:p}}function jLt(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function e5e(e){return e.reduce((t,n)=>TE(t,oK(n)),yh)}function BLt(e){return e.reduce((t,n)=>t+X6e(n),0)}function zLt(e){return e.reduce((t,n)=>t+Q6e(n),0)}function t5e(e,t){if(t===void 0&&(t=NS),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);K6e(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const VLt=[["x",["left","right"],BLt],["y",["top","bottom"],zLt]];class qne{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Hne(n),i=e5e(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,o,a]of VLt)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),c=i[s]-u;return this.rect[l]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}let ek=class{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}};function ULt(e){const{EventTarget:t}=Eu(e);return e instanceof t?e:OS(e)}function tU(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Sd;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Sd||(Sd={}));function hve(e){e.preventDefault()}function HLt(e){e.stopPropagation()}var mi;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(mi||(mi={}));const n5e={start:[mi.Space,mi.Enter],cancel:[mi.Esc],end:[mi.Space,mi.Enter,mi.Tab]},qLt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case mi.Right:return{...n,x:n.x+25};case mi.Left:return{...n,x:n.x-25};case mi.Down:return{...n,y:n.y+25};case mi.Up:return{...n,y:n.y-25}}};class Wne{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ek(OS(n)),this.windowListeners=new ek(Eu(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Sd.Resize,this.handleCancel),this.windowListeners.add(Sd.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Sd.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&t5e(r),n(yh)}handleKeyDown(t){if(m8(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=n5e,coordinateGetter:o=qLt,scrollBehavior:a="smooth"}=i,{code:l}=t;if(s.end.includes(l)){this.handleEnd(t);return}if(s.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,c=u?{x:u.left,y:u.top}:yh;this.referenceCoordinates||(this.referenceCoordinates=c);const d=o(t,{active:n,context:r.current,currentCoordinates:c});if(d){const f=j5(d,c),h={x:0,y:0},{scrollableAncestors:p}=r.current;for(const m of p){const g=t.code,{isTop:y,isRight:v,isLeft:b,isBottom:_,maxScroll:E,minScroll:S}=Z6e(m),T=jLt(m),A={x:Math.min(g===mi.Right?T.right-T.width/2:T.right,Math.max(g===mi.Right?T.left:T.left+T.width/2,d.x)),y:Math.min(g===mi.Down?T.bottom-T.height/2:T.bottom,Math.max(g===mi.Down?T.top:T.top+T.height/2,d.y))},R=g===mi.Right&&!v||g===mi.Left&&!b,I=g===mi.Down&&!_||g===mi.Up&&!y;if(R&&A.x!==d.x){const P=m.scrollLeft+f.x,N=g===mi.Right&&P<=E.x||g===mi.Left&&P>=S.x;if(N&&!f.y){m.scrollTo({left:P,behavior:a});return}N?h.x=m.scrollLeft-P:h.x=g===mi.Right?m.scrollLeft-E.x:m.scrollLeft-S.x,h.x&&m.scrollBy({left:-h.x,behavior:a});break}else if(I&&A.y!==d.y){const P=m.scrollTop+f.y,N=g===mi.Down&&P<=E.y||g===mi.Up&&P>=S.y;if(N&&!f.x){m.scrollTo({top:P,behavior:a});return}N?h.y=m.scrollTop-P:h.y=g===mi.Down?m.scrollTop-E.y:m.scrollTop-S.y,h.y&&m.scrollBy({top:-h.y,behavior:a});break}}this.handleMove(t,TE(j5(d,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Wne.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=n5e,onActivation:i}=t,{active:s}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function pve(e){return!!(e&&"distance"in e)}function mve(e){return!!(e&&"delay"in e)}class Gne{constructor(t,n,r){var i;r===void 0&&(r=ULt(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:o}=s;this.props=t,this.events=n,this.document=OS(o),this.documentListeners=new ek(this.document),this.listeners=new ek(r),this.windowListeners=new ek(Eu(o)),this.initialCoordinates=(i=B5(s))!=null?i:yh,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Sd.Resize,this.handleCancel),this.windowListeners.add(Sd.DragStart,hve),this.windowListeners.add(Sd.VisibilityChange,this.handleCancel),this.windowListeners.add(Sd.ContextMenu,hve),this.documentListeners.add(Sd.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mve(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(pve(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Sd.Click,HLt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Sd.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=B5(t))!=null?n:yh,u=j5(i,l);if(!r&&a){if(pve(a)){if(a.tolerance!=null&&tU(u,a.tolerance))return this.handleCancel();if(tU(u,a.distance))return this.handleStart()}if(mve(a)&&tU(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}t.cancelable&&t.preventDefault(),o(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===mi.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const WLt={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Yne extends Gne{constructor(t){const{event:n}=t,r=OS(n.target);super(t,WLt,r)}}Yne.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const GLt={move:{name:"mousemove"},end:{name:"mouseup"}};var aK;(function(e){e[e.RightClick=2]="RightClick"})(aK||(aK={}));class YLt extends Gne{constructor(t){super(t,GLt,OS(t.event.target))}}YLt.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===aK.RightClick?!1:(r?.({event:n}),!0)}}];const nU={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class KLt extends Gne{constructor(t){super(t,nU)}static setup(){return window.addEventListener(nU.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(nU.move.name,t)};function t(){}}}KLt.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var tk;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(tk||(tk={}));var V5;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(V5||(V5={}));function XLt(e){let{acceleration:t,activator:n=tk.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=V5.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:d,threshold:f}=e;const h=JLt({delta:d,disabled:!s}),[p,m]=dLt(),g=k.useRef({x:0,y:0}),y=k.useRef({x:0,y:0}),v=k.useMemo(()=>{switch(n){case tk.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case tk.DraggableRect:return i}},[n,i,l]),b=k.useRef(null),_=k.useCallback(()=>{const S=b.current;if(!S)return;const T=g.current.x*y.current.x,A=g.current.y*y.current.y;S.scrollBy(T,A)},[]),E=k.useMemo(()=>a===V5.TreeOrder?[...u].reverse():u,[a,u]);k.useEffect(()=>{if(!s||!u.length||!v){m();return}for(const S of E){if(r?.(S)===!1)continue;const T=u.indexOf(S),A=c[T];if(!A)continue;const{direction:R,speed:I}=LLt(S,A,v,t,f);for(const P of["x","y"])h[P][R[P]]||(I[P]=0,R[P]=0);if(I.x>0||I.y>0){m(),b.current=S,p(_,o),g.current=I,y.current=R;return}}g.current={x:0,y:0},y.current={x:0,y:0},m()},[t,_,r,m,s,o,JSON.stringify(v),JSON.stringify(h),p,u,E,c,JSON.stringify(f)])}const QLt={x:{[ua.Backward]:!1,[ua.Forward]:!1},y:{[ua.Backward]:!1,[ua.Forward]:!1}};function JLt(e){let{delta:t,disabled:n}=e;const r=L5(t);return nD(i=>{if(n||!r||!i)return QLt;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[ua.Backward]:i.x[ua.Backward]||s.x===-1,[ua.Forward]:i.x[ua.Forward]||s.x===1},y:{[ua.Backward]:i.y[ua.Backward]||s.y===-1,[ua.Forward]:i.y[ua.Forward]||s.y===1}}},[n,t,r])}function ZLt(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return nD(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function e8t(e,t){return k.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...s]},[]),[e,t])}var mI;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mI||(mI={}));var lK;(function(e){e.Optimized="optimized"})(lK||(lK={}));const gve=new Map;function t8t(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,o]=k.useState(null),{frequency:a,measure:l,strategy:u}=i,c=k.useRef(e),d=g(),f=pI(d),h=k.useCallback(function(y){y===void 0&&(y=[]),!f.current&&o(v=>v===null?y:v.concat(y.filter(b=>!v.includes(b))))},[f]),p=k.useRef(null),m=nD(y=>{if(d&&!n)return gve;if(!y||y===gve||c.current!==e||s!=null){const v=new Map;for(let b of e){if(!b)continue;if(s&&s.length>0&&!s.includes(b.id)&&b.rect.current){v.set(b.id,b.rect.current);continue}const _=b.node.current,E=_?new qne(l(_),_):null;b.rect.current=E,E&&v.set(b.id,E)}return v}return y},[e,s,n,d,l]);return k.useEffect(()=>{c.current=e},[e]),k.useEffect(()=>{d||h()},[n,d]),k.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),k.useEffect(()=>{d||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{h(),p.current=null},a))},[a,d,h,...r]),{droppableRects:m,measureDroppableContainers:h,measuringScheduled:s!=null};function g(){switch(u){case mI.Always:return!1;case mI.BeforeDragging:return n;default:return!n}}}function Kne(e,t){return nD(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function n8t(e,t){return Kne(e,t)}function r8t(e){let{callback:t,disabled:n}=e;const r=p8(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return k.useEffect(()=>()=>i?.disconnect(),[i]),i}function y8(e){let{callback:t,disabled:n}=e;const r=p8(t),i=k.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return k.useEffect(()=>()=>i?.disconnect(),[i]),i}function i8t(e){return new qne(NS(e),e)}function yve(e,t,n){t===void 0&&(t=i8t);const[r,i]=k.useState(null);function s(){i(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const c=t(e);return JSON.stringify(l)===JSON.stringify(c)?l:c})}const o=r8t({callback(l){if(e)for(const u of l){const{type:c,target:d}=u;if(c==="childList"&&d instanceof HTMLElement&&d.contains(e)){s();break}}}}),a=y8({callback:s});return gh(()=>{s(),e?(a?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),o?.disconnect())},[e]),r}function s8t(e){const t=Kne(e);return G6e(e,t)}const vve=[];function o8t(e){const t=k.useRef(e),n=nD(r=>e?r&&r!==vve&&e&&t.current&&e.parentNode===t.current.parentNode?r:Hne(e):vve,[e]);return k.useEffect(()=>{t.current=e},[e]),n}function a8t(e){const[t,n]=k.useState(null),r=k.useRef(e),i=k.useCallback(s=>{const o=eU(s.target);o&&n(a=>a?(a.set(o,oK(o)),new Map(a)):null)},[]);return k.useEffect(()=>{const s=r.current;if(e!==s){o(s);const a=e.map(l=>{const u=eU(l);return u?(u.addEventListener("scroll",i,{passive:!0}),[u,oK(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=e}return()=>{o(e),o(s)};function o(a){a.forEach(l=>{const u=eU(l);u?.removeEventListener("scroll",i)})}},[i,e]),k.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,o)=>TE(s,o),yh):e5e(e):yh,[e,t])}function bve(e,t){t===void 0&&(t=[]);const n=k.useRef(null);return k.useEffect(()=>{n.current=null},t),k.useEffect(()=>{const r=e!==yh;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?j5(e,n.current):yh}function l8t(e){k.useEffect(()=>{if(!h8)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function u8t(e,t){return k.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,t)},n},{}),[e,t])}function r5e(e){return k.useMemo(()=>e?NLt(e):null,[e])}const wve=[];function c8t(e,t){t===void 0&&(t=NS);const[n]=e,r=r5e(n?Eu(n):null),[i,s]=k.useState(wve);function o(){s(()=>e.length?e.map(l=>J6e(l)?r:new qne(t(l),l)):wve)}const a=y8({callback:o});return gh(()=>{a?.disconnect(),o(),e.forEach(l=>a?.observe(l))},[e]),i}function i5e(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return tD(t)?t:e}function d8t(e){let{measure:t}=e;const[n,r]=k.useState(null),i=k.useCallback(u=>{for(const{target:c}of u)if(tD(c)){r(d=>{const f=t(c);return d?{...d,width:f.width,height:f.height}:f});break}},[t]),s=y8({callback:i}),o=k.useCallback(u=>{const c=i5e(u);s?.disconnect(),c&&s?.observe(c),r(c?t(c):null)},[t,s]),[a,l]=F5(o);return k.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const f8t=[{sensor:Yne,options:{}},{sensor:Wne,options:{}}],h8t={current:{}},iM={draggable:{measure:fve},droppable:{measure:fve,strategy:mI.WhileDragging,frequency:lK.Optimized},dragOverlay:{measure:NS}};class nk extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const p8t={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nk,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:z5},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:iM,measureDroppableContainers:z5,windowRect:null,measuringScheduled:!1},s5e={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:z5,draggableNodes:new Map,over:null,measureDroppableContainers:z5},iD=k.createContext(s5e),o5e=k.createContext(p8t);function m8t(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nk}}}function g8t(e,t){switch(t.type){case jo.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case jo.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case jo.DragEnd:case jo.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case jo.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new nk(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case jo.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const o=new nk(e.droppable.containers);return o.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case jo.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new nk(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function y8t(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=k.useContext(iD),s=L5(r),o=L5(n?.id);return k.useEffect(()=>{if(!t&&!r&&s&&o!=null){if(!m8(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const d=pLt(c);if(d){d.focus();break}}})}},[r,t,i,o,s]),null}function a5e(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function v8t(e){return k.useMemo(()=>({draggable:{...iM.draggable,...e?.draggable},droppable:{...iM.droppable,...e?.droppable},dragOverlay:{...iM.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function b8t(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=k.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;gh(()=>{if(!o&&!a||!t){s.current=!1;return}if(s.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const c=n(u),d=G6e(c,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=K6e(u);f&&f.scrollBy({top:d.y,left:d.x})}},[t,o,a,r,n])}const v8=k.createContext({...yh,scaleX:1,scaleY:1});var vy;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(vy||(vy={}));const Xne=k.memo(function(t){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:c=f8t,collisionDetection:d=g8,measuring:f,modifiers:h,...p}=t;const m=k.useReducer(g8t,void 0,m8t),[g,y]=m,[v,b]=wLt(),[_,E]=k.useState(vy.Uninitialized),S=_===vy.Initialized,{draggable:{active:T,nodes:A,translate:R},droppable:{containers:I}}=g,P=T!=null?A.get(T):null,N=k.useRef({initial:null,translated:null}),M=k.useMemo(()=>{var On;return T!=null?{id:T,data:(On=P?.data)!=null?On:h8t,rect:N}:null},[T,P]),O=k.useRef(null),[j,B]=k.useState(null),[H,q]=k.useState(null),G=pI(p,Object.values(p)),U=rD("DndDescribedBy",o),L=k.useMemo(()=>I.getEnabled(),[I]),z=v8t(f),{droppableRects:V,measureDroppableContainers:Y,measuringScheduled:Q}=t8t(L,{dragging:S,dependencies:[R.x,R.y],config:z.droppable}),ne=ZLt(A,T),ue=k.useMemo(()=>H?B5(H):null,[H]),se=Ir(),ae=n8t(ne,z.draggable.measure);b8t({activeNode:T!=null?A.get(T):null,config:se.layoutShiftCompensation,initialRect:ae,measure:z.draggable.measure});const he=yve(ne,z.draggable.measure,ae),ie=yve(ne?ne.parentElement:null),le=k.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ce=I.getNodeFor((n=le.current.over)==null?void 0:n.id),X=d8t({measure:z.dragOverlay.measure}),fe=(r=X.nodeRef.current)!=null?r:ne,de=S?(i=X.rect)!=null?i:he:null,te=!!(X.nodeRef.current&&X.rect),ee=s8t(te?null:he),me=r5e(fe?Eu(fe):null),Ie=o8t(S?Ce??ne:null),Te=c8t(Ie),we=a5e(h,{transform:{x:R.x-ee.x,y:R.y-ee.y,scaleX:1,scaleY:1},activatorEvent:H,active:M,activeNodeRect:he,containerNodeRect:ie,draggingNodeRect:de,over:le.current.over,overlayNodeRect:X.rect,scrollableAncestors:Ie,scrollableAncestorRects:Te,windowRect:me}),Me=ue?TE(ue,R):null,ke=a8t(Ie),Oe=bve(ke),xe=bve(ke,[he]),je=TE(we,Oe),Ve=de?DLt(de,we):null,nt=M&&Ve?d({active:M,collisionRect:Ve,droppableRects:V,droppableContainers:L,pointerCoordinates:Me}):null,it=ALt(nt,"id"),[_t,rn]=k.useState(null),en=te?we:TE(we,xe),zn=ILt(en,(s=_t?.rect)!=null?s:null,he),zt=k.useRef(null),wn=k.useCallback((On,gn)=>{let{sensor:cr,options:xi}=gn;if(O.current==null)return;const Rr=A.get(O.current);if(!Rr)return;const Nn=On.nativeEvent,mt=new cr({active:O.current,activeNode:Rr,event:Nn,options:xi,context:le,onAbort(Xt){if(!A.get(Xt))return;const{onDragAbort:vn}=G.current,ar={id:Xt};vn?.(ar),v({type:"onDragAbort",event:ar})},onPending(Xt,dr,vn,ar){if(!A.get(Xt))return;const{onDragPending:Hr}=G.current,qr={id:Xt,constraint:dr,initialCoordinates:vn,offset:ar};Hr?.(qr),v({type:"onDragPending",event:qr})},onStart(Xt){const dr=O.current;if(dr==null)return;const vn=A.get(dr);if(!vn)return;const{onDragStart:ar}=G.current,Or={activatorEvent:Nn,active:{id:dr,data:vn.data,rect:N}};Ip.unstable_batchedUpdates(()=>{ar?.(Or),E(vy.Initializing),y({type:jo.DragStart,initialCoordinates:Xt,active:dr}),v({type:"onDragStart",event:Or}),B(zt.current),q(Nn)})},onMove(Xt){y({type:jo.DragMove,coordinates:Xt})},onEnd:Cr(jo.DragEnd),onCancel:Cr(jo.DragCancel)});zt.current=mt;function Cr(Xt){return async function(){const{active:vn,collisions:ar,over:Or,scrollAdjustedTranslate:Hr}=le.current;let qr=null;if(vn&&Hr){const{cancelDrop:ko}=G.current;qr={activatorEvent:Nn,active:vn,collisions:ar,delta:Hr,over:Or},Xt===jo.DragEnd&&typeof ko=="function"&&await Promise.resolve(ko(qr))&&(Xt=jo.DragCancel)}O.current=null,Ip.unstable_batchedUpdates(()=>{y({type:Xt}),E(vy.Uninitialized),rn(null),B(null),q(null),zt.current=null;const ko=Xt===jo.DragEnd?"onDragEnd":"onDragCancel";if(qr){const Ja=G.current[ko];Ja?.(qr),v({type:ko,event:qr})}})}}},[A]),nr=k.useCallback((On,gn)=>(cr,xi)=>{const Rr=cr.nativeEvent,Nn=A.get(xi);if(O.current!==null||!Nn||Rr.dndKit||Rr.defaultPrevented)return;const mt={active:Nn};On(cr,gn.options,mt)===!0&&(Rr.dndKit={capturedBy:gn.sensor},O.current=xi,wn(cr,gn))},[A,wn]),Yn=e8t(c,nr);l8t(c),gh(()=>{he&&_===vy.Initializing&&E(vy.Initialized)},[he,_]),k.useEffect(()=>{const{onDragMove:On}=G.current,{active:gn,activatorEvent:cr,collisions:xi,over:Rr}=le.current;if(!gn||!cr)return;const Nn={active:gn,activatorEvent:cr,collisions:xi,delta:{x:je.x,y:je.y},over:Rr};Ip.unstable_batchedUpdates(()=>{On?.(Nn),v({type:"onDragMove",event:Nn})})},[je.x,je.y]),k.useEffect(()=>{const{active:On,activatorEvent:gn,collisions:cr,droppableContainers:xi,scrollAdjustedTranslate:Rr}=le.current;if(!On||O.current==null||!gn||!Rr)return;const{onDragOver:Nn}=G.current,mt=xi.get(it),Cr=mt&&mt.rect.current?{id:mt.id,rect:mt.rect.current,data:mt.data,disabled:mt.disabled}:null,Xt={active:On,activatorEvent:gn,collisions:cr,delta:{x:Rr.x,y:Rr.y},over:Cr};Ip.unstable_batchedUpdates(()=>{rn(Cr),Nn?.(Xt),v({type:"onDragOver",event:Xt})})},[it]),gh(()=>{le.current={activatorEvent:H,active:M,activeNode:ne,collisionRect:Ve,collisions:nt,droppableRects:V,draggableNodes:A,draggingNode:fe,draggingNodeRect:de,droppableContainers:I,over:_t,scrollableAncestors:Ie,scrollAdjustedTranslate:je},N.current={initial:de,translated:Ve}},[M,ne,nt,Ve,A,fe,de,V,I,_t,Ie,je]),XLt({...se,delta:R,draggingRect:Ve,pointerCoordinates:Me,scrollableAncestors:Ie,scrollableAncestorRects:Te});const Ur=k.useMemo(()=>({active:M,activeNode:ne,activeNodeRect:he,activatorEvent:H,collisions:nt,containerNodeRect:ie,dragOverlay:X,draggableNodes:A,droppableContainers:I,droppableRects:V,over:_t,measureDroppableContainers:Y,scrollableAncestors:Ie,scrollableAncestorRects:Te,measuringConfiguration:z,measuringScheduled:Q,windowRect:me}),[M,ne,he,H,nt,ie,X,A,I,V,_t,Y,Ie,Te,z,Q,me]),or=k.useMemo(()=>({activatorEvent:H,activators:Yn,active:M,activeNodeRect:he,ariaDescribedById:{draggable:U},dispatch:y,draggableNodes:A,over:_t,measureDroppableContainers:Y}),[H,Yn,M,he,y,U,A,_t,Y]);return bn.createElement(W6e.Provider,{value:b},bn.createElement(iD.Provider,{value:or},bn.createElement(o5e.Provider,{value:Ur},bn.createElement(v8.Provider,{value:zn},u)),bn.createElement(y8t,{disabled:a?.restoreFocus===!1})),bn.createElement(ELt,{...a,hiddenTextDescribedById:U}));function Ir(){const On=j?.autoScrollEnabled===!1,gn=typeof l=="object"?l.enabled===!1:l===!1,cr=S&&!On&&!gn;return typeof l=="object"?{...l,enabled:cr}:{enabled:cr}}}),w8t=k.createContext(null),xve="button",x8t="Draggable";function _8t(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=rD(x8t),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:f}=k.useContext(iD),{role:h=xve,roleDescription:p="draggable",tabIndex:m=0}=i??{},g=l?.id===t,y=k.useContext(g?v8:w8t),[v,b]=F5(),[_,E]=F5(),S=u8t(o,t),T=pI(n);gh(()=>(d.set(t,{id:t,key:s,node:v,activatorNode:_,data:T}),()=>{const R=d.get(t);R&&R.key===s&&d.delete(t)}),[d,t]);const A=k.useMemo(()=>({role:h,tabIndex:m,"aria-disabled":r,"aria-pressed":g&&h===xve?!0:void 0,"aria-roledescription":p,"aria-describedby":c.draggable}),[r,h,m,g,p,c.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:A,isDragging:g,listeners:r?void 0:S,node:v,over:f,setNodeRef:b,setActivatorNodeRef:E,transform:y}}function l5e(){return k.useContext(o5e)}const E8t="Droppable",C8t={timeout:25};function u5e(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=rD(E8t),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=k.useContext(iD),c=k.useRef({disabled:n}),d=k.useRef(!1),f=k.useRef(null),h=k.useRef(null),{disabled:p,updateMeasurementsFor:m,timeout:g}={...C8t,...i},y=pI(m??r),v=k.useCallback(()=>{if(!d.current){d.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),h.current=null},g)},[g]),b=y8({callback:v,disabled:p||!o}),_=k.useCallback((A,R)=>{b&&(R&&(b.unobserve(R),d.current=!1),A&&b.observe(A))},[b]),[E,S]=F5(_),T=pI(t);return k.useEffect(()=>{!b||!E.current||(b.disconnect(),d.current=!1,b.observe(E.current))},[E,b]),k.useEffect(()=>(a({type:jo.RegisterDroppable,element:{id:r,key:s,disabled:n,node:E,rect:f,data:T}}),()=>a({type:jo.UnregisterDroppable,key:s,id:r})),[r]),k.useEffect(()=>{n!==c.current.disabled&&(a({type:jo.SetDroppableDisabled,id:r,key:s,disabled:n}),c.current.disabled=n)},[r,s,n,a]),{active:o,rect:f,isOver:l?.id===r,node:E,over:l,setNodeRef:S}}function S8t(e){let{animation:t,children:n}=e;const[r,i]=k.useState(null),[s,o]=k.useState(null),a=L5(n);return!n&&!r&&a&&i(a),gh(()=>{if(!s)return;const l=r?.key,u=r?.props.id;if(l==null||u==null){i(null);return}Promise.resolve(t(u,s)).then(()=>{i(null)})},[t,r,s]),bn.createElement(bn.Fragment,null,n,r?k.cloneElement(r,{ref:o}):null)}const T8t={x:0,y:0,scaleX:1,scaleY:1};function A8t(e){let{children:t}=e;return bn.createElement(iD.Provider,{value:s5e},bn.createElement(v8.Provider,{value:T8t},t))}const k8t={position:"fixed",touchAction:"none"},I8t=e=>m8(e)?"transform 250ms ease":void 0,R8t=k.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:o,rect:a,style:l,transform:u,transition:c=I8t}=e;if(!a)return null;const d=i?u:{...u,scaleX:1,scaleY:1},f={...k8t,width:a.width,height:a.height,top:a.top,left:a.left,transform:kv.Transform.toString(d),transformOrigin:i&&r?SLt(r,a):void 0,transition:typeof c=="function"?c(r):c,...l};return bn.createElement(n,{className:o,style:f,ref:t},s)}),D8t=e=>t=>{let{active:n,dragOverlay:r}=t;const i={},{styles:s,className:o}=e;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,u]of Object.entries(i))n.node.style.setProperty(l,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},P8t=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:kv.Transform.toString(t)},{transform:kv.Transform.toString(n)}]},O8t={duration:250,easing:"ease",keyframes:P8t,sideEffects:D8t({styles:{active:{opacity:"0"}}})};function N8t(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=e;return p8((s,o)=>{if(t===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const u=i5e(o);if(!u)return;const{transform:c}=Eu(o).getComputedStyle(o),d=Y6e(c);if(!d)return;const f=typeof t=="function"?t:M8t(t);return t5e(l,i.draggable.measure),f({active:{id:s,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function M8t(e){const{duration:t,easing:n,sideEffects:r,keyframes:i}={...O8t,...e};return s=>{let{active:o,dragOverlay:a,transform:l,...u}=s;if(!t)return;const c={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},f={x:l.x-c.x,y:l.y-c.y,...d},h=i({...u,active:o,dragOverlay:a,transform:{initial:l,final:f}}),[p]=h,m=h[h.length-1];if(JSON.stringify(p)===JSON.stringify(m))return;const g=r?.({active:o,dragOverlay:a,...u}),y=a.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(v=>{y.onfinish=()=>{g?.(),v()}})}}let _ve=0;function $8t(e){return k.useMemo(()=>{if(e!=null)return _ve++,_ve},[e])}const Qne=bn.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:a="div",className:l,zIndex:u=999}=e;const{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:h,draggableNodes:p,droppableContainers:m,dragOverlay:g,over:y,measuringConfiguration:v,scrollableAncestors:b,scrollableAncestorRects:_,windowRect:E}=l5e(),S=k.useContext(v8),T=$8t(d?.id),A=a5e(o,{activatorEvent:c,active:d,activeNodeRect:f,containerNodeRect:h,draggingNodeRect:g.rect,over:y,overlayNodeRect:g.rect,scrollableAncestors:b,scrollableAncestorRects:_,transform:S,windowRect:E}),R=Kne(f),I=N8t({config:r,draggableNodes:p,droppableContainers:m,measuringConfiguration:v}),P=R?g.setRef:void 0;return bn.createElement(A8t,null,bn.createElement(S8t,{animation:I},d&&T?bn.createElement(R8t,{key:T,id:d.id,ref:P,as:a,activatorEvent:c,adjustScale:t,className:l,transition:s,rect:R,style:{zIndex:u,...i},transform:A},n):null))});function Jne(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function F8t(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function oO(e){return e!==null&&e>=0}function L8t(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function j8t(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const c5e=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=Jne(t,r,n),o=t[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},aO={scaleX:1,scaleY:1},gI=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=e;const a=(t=s[n])!=null?t:r;if(!a)return null;if(i===n){const u=s[o];return u?{x:0,y:n<o?u.top+u.height-(a.top+a.height):u.top-a.top,...aO}:null}const l=B8t(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...aO}:i<n&&i>=o?{x:0,y:a.height+l,...aO}:{x:0,y:0,...aO}};function B8t(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const d5e="Sortable",f5e=bn.createContext({activeIndex:-1,containerId:d5e,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:c5e,disabled:{draggable:!1,droppable:!1}});function yI(e){let{children:t,id:n,items:r,strategy:i=c5e,disabled:s=!1}=e;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:c}=l5e(),d=rD(d5e,n),f=a.rect!==null,h=k.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),p=o!=null,m=o?h.indexOf(o.id):-1,g=u?h.indexOf(u.id):-1,y=k.useRef(h),v=!L8t(h,y.current),b=g!==-1&&m===-1||v,_=j8t(s);gh(()=>{v&&p&&c(h)},[v,h,p,c]),k.useEffect(()=>{y.current=h},[h]);const E=k.useMemo(()=>({activeIndex:m,containerId:d,disabled:_,disableTransforms:b,items:h,overIndex:g,useDragOverlay:f,sortedRects:F8t(h,l),strategy:i}),[m,d,_.draggable,_.droppable,b,h,g,l,f,i]);return bn.createElement(f5e.Provider,{value:E},t)}const z8t=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Jne(n,r,i).indexOf(t)},V8t=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=e;return!u||!r||a!==s&&i===o?!1:n?!0:o!==i&&t===l},U8t={duration:200,easing:"ease"},h5e="transform",H8t=kv.Transition.toString({property:h5e,duration:0,easing:"linear"}),q8t={roleDescription:"sortable"};function W8t(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,o]=k.useState(null),a=k.useRef(n);return gh(()=>{if(!t&&n!==a.current&&r.current){const l=i.current;if(l){const u=NS(r.current,{ignoreTransform:!0}),c={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(c.x||c.y)&&o(c)}}n!==a.current&&(a.current=n)},[t,n,r,i]),k.useEffect(()=>{s&&o(null)},[s]),s}function G8t(e){let{animateLayoutChanges:t=V8t,attributes:n,disabled:r,data:i,getNewIndex:s=z8t,id:o,strategy:a,resizeObserverConfig:l,transition:u=U8t}=e;const{items:c,containerId:d,activeIndex:f,disabled:h,disableTransforms:p,sortedRects:m,overIndex:g,useDragOverlay:y,strategy:v}=k.useContext(f5e),b=Y8t(r,h),_=c.indexOf(o),E=k.useMemo(()=>({sortable:{containerId:d,index:_,items:c},...i}),[d,i,_,c]),S=k.useMemo(()=>c.slice(c.indexOf(o)),[c,o]),{rect:T,node:A,isOver:R,setNodeRef:I}=u5e({id:o,data:E,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...l}}),{active:P,activatorEvent:N,activeNodeRect:M,attributes:O,setNodeRef:j,listeners:B,isDragging:H,over:q,setActivatorNodeRef:G,transform:U}=_8t({id:o,data:E,attributes:{...q8t,...n},disabled:b.draggable}),L=cLt(I,j),z=!!P,V=z&&!p&&oO(f)&&oO(g),Y=!y&&H,Q=Y&&V?U:null,ue=V?Q??(a??v)({rects:m,activeNodeRect:M,activeIndex:f,overIndex:g,index:_}):null,se=oO(f)&&oO(g)?s({id:o,items:c,activeIndex:f,overIndex:g}):_,ae=P?.id,he=k.useRef({activeId:ae,items:c,newIndex:se,containerId:d}),ie=c!==he.current.items,le=t({active:P,containerId:d,isDragging:H,isSorting:z,id:o,index:_,items:c,newIndex:he.current.newIndex,previousItems:he.current.items,previousContainerId:he.current.containerId,transition:u,wasDragging:he.current.activeId!=null}),Ce=W8t({disabled:!le,index:_,node:A,rect:T});return k.useEffect(()=>{z&&he.current.newIndex!==se&&(he.current.newIndex=se),d!==he.current.containerId&&(he.current.containerId=d),c!==he.current.items&&(he.current.items=c)},[z,se,d,c]),k.useEffect(()=>{if(ae===he.current.activeId)return;if(ae!=null&&he.current.activeId==null){he.current.activeId=ae;return}const fe=setTimeout(()=>{he.current.activeId=ae},50);return()=>clearTimeout(fe)},[ae]),{active:P,activeIndex:f,attributes:O,data:E,rect:T,index:_,newIndex:se,items:c,isOver:R,isSorting:z,isDragging:H,listeners:B,node:A,overIndex:g,over:q,setNodeRef:L,setActivatorNodeRef:G,setDroppableNodeRef:I,setDraggableNodeRef:j,transform:Ce??ue,transition:X()};function X(){if(Ce||ie&&he.current.newIndex===_)return H8t;if(!(Y&&!m8(N)||!u)&&(z||le))return kv.Transition.toString({...u,property:h5e})}}function Y8t(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}mi.Down,mi.Right,mi.Up,mi.Left;const K8t="_item_11oxa_1",X8t="_itemDragging_11oxa_11",Eve={item:K8t,itemDragging:X8t};function nv({item:e,index:t}){const{attributes:n,listeners:r,setNodeRef:i,transform:s,transition:o,isDragging:a}=G8t({id:e.symbol}),l={transform:kv.Transform.toString(s),transition:o};return w.jsxs(lf,{ref:i,style:{...l,margin:"0 auto",minWidth:"200px"},className:Bt(Eve.item,{[Eve.itemDragging]:a}),...n,...r,withBorder:!0,p:"sm",children:[t!==void 0&&w.jsx(He,{c:"dimmed",mr:"sm",children:t}),w.jsx(He,{children:e.label})]})}function vI({id:e,title:t,children:n}){const{setNodeRef:r,isOver:i}=u5e({id:e});return w.jsxs(lf,{ref:r,style:{backgroundColor:i?"#f0f8ff":void 0,borderColor:i?"#4dabf7":void 0,maxWidth:"600px"},withBorder:!0,p:"sm",children:[w.jsx(He,{fw:500,ta:"center",mb:"sm",children:t}),n]})}const Zne=e=>e.map(t=>({id:typeof t=="string"?t:t.value,label:typeof t=="string"?t:t.label,symbol:typeof t=="string"?t:t.value})),ere=(e,t)=>{const{setRankingAnswers:n}=ls(),r=Us();return{sensors:CLt(dve(Yne,{activationConstraint:{distance:5}}),dve(Wne)),updateAnswer:o=>{t?.(o),r(n({responseId:e,values:o}))}}};function Q8t({options:e,responseId:t,answer:n,disabled:r,numItems:i,setError:s}){const{onChange:o}=n,{sensors:a,updateAnswer:l}=ere(t,o),u=k.useMemo(()=>Zne(e),[e]),[c,d]=k.useState(null),f=k.useMemo(()=>{let v=[];return n?.value&&Object.keys(n.value).length>0&&(v=Object.entries(n.value).sort((_,E)=>parseInt(_[1],10)-parseInt(E[1],10)).map(([_])=>u.find(E=>E.id===_)).filter(Boolean),i&&i>0&&(v=v.slice(0,i))),{selected:v,unassigned:u.filter(b=>!v.find(_=>_.id===b.id))}},[u,n,i]),[h,p]=k.useState(f);k.useEffect(()=>{p(f)},[f]);const m=v=>{d(v.active.id)},g=v=>{if(d(null),r||!v.over)return;const b=v.active.id,_=v.over.id,E=h.selected.find(P=>P.symbol===b),S=h.unassigned.find(P=>P.symbol===b),T=_==="selected"||h.selected.find(P=>P.symbol===_),A=_==="unassigned",R={...h};if(E&&T){const P=h.selected.findIndex(M=>M.symbol===b),N=_==="selected"?h.selected.length-1:h.selected.findIndex(M=>M.symbol===_);R.selected=Jne(h.selected,P,N)}else if(S&&T){if(i&&h.selected.length>=i){s?.(`You can only add up to ${i} items.`);return}R.unassigned=h.unassigned.filter(P=>P.symbol!==b),R.selected=[...h.selected,S]}else if(E&&A)R.selected=h.selected.filter(P=>P.symbol!==b),R.unassigned=[...h.unassigned,E];else return;s?.(null),p(R);const I={};R.selected.forEach((P,N)=>{I[P.id]=N.toString()}),l(I)},y=c?u.find(v=>v.symbol===c):null;return w.jsxs(Xne,{sensors:a,collisionDetection:g8,onDragStart:m,onDragEnd:g,children:[w.jsxs(Gn,{gap:"md",w:"600px",mx:"auto",children:[w.jsxs(vI,{id:"selected",title:"",children:[w.jsx(He,{size:"md",fw:500,ta:"center",mb:"sm",children:"HIGH"}),w.jsx(yI,{items:h.selected.map(v=>v.symbol),strategy:gI,children:w.jsx(Gn,{children:h.selected.map((v,b)=>w.jsx(nv,{item:v,index:b+1},v.symbol))})}),w.jsx(He,{size:"md",fw:500,ta:"center",mt:"sm",children:"LOW"})]}),w.jsx(vI,{id:"unassigned",title:"Available Items",children:w.jsx(yI,{items:h.unassigned.map(v=>v.symbol),strategy:gI,children:w.jsx(Gn,{children:h.unassigned.map(v=>w.jsx(nv,{item:v},v.symbol))})})})]}),w.jsx(Qne,{children:y?w.jsx(nv,{item:y}):void 0})]})}function J8t({options:e,disabled:t,answer:n,responseId:r,numItems:i,setError:s}){const{onChange:o}=n,{sensors:a,updateAnswer:l}=ere(r,o),u=k.useMemo(()=>Zne(e),[e]),[c,d]=k.useState(null),f=k.useMemo(()=>{const v={unassigned:[...u],HIGH:[],MEDIUM:[],LOW:[]};return n?.value&&Object.entries(n.value).forEach(([b,_])=>{const E=u.find(S=>S.id===b);E&&["HIGH","MEDIUM","LOW"].includes(_)&&(v[_].push(E),v.unassigned=v.unassigned.filter(S=>S.id!==b))}),v},[u,n]),[h,p]=k.useState(f);k.useEffect(()=>{p(f)},[f]);const m=v=>{d(v.active.id)},g=v=>{if(d(null),t||!v.over)return;const b=v.active.id,_=v.over.id,E=Object.keys(h).find(S=>h[S].find(T=>T.id===b));!E||E===_||["unassigned","HIGH","MEDIUM","LOW"].includes(_)&&p(S=>{const T=S[E].find(I=>I.id===b);if(!T)return S;if(_!=="unassigned"&&i&&S[_].length>=i)return s?.(`You can only add up to ${i} items.`),S;s?.(null);const A={...S};A[E]=A[E].filter(I=>I.id!==b),A[_]=[...A[_],T];const R={};return["HIGH","MEDIUM","LOW"].forEach(I=>{A[I].forEach(P=>{R[P.id]=I})}),l(R),A})},y=c?u.find(v=>v.id===c):null;return w.jsxs(Xne,{sensors:a,collisionDetection:g8,onDragStart:m,onDragEnd:g,children:[w.jsx(Gn,{gap:"md",w:"600px",mx:"auto",children:["HIGH","MEDIUM","LOW","unassigned"].map(v=>w.jsx(vI,{id:v,title:v==="unassigned"?"Available Items":v,children:w.jsx(yI,{items:h[v].map(b=>b.symbol),strategy:gI,children:w.jsx(Gn,{children:h[v].map(b=>w.jsx(nv,{item:b},b.symbol))})})},v))}),w.jsx(Qne,{children:y?w.jsx(nv,{item:y}):void 0})]})}function Z8t(e,t){const n={};Object.entries(e).forEach(([i,s])=>{const o=s.match(/^pair-(\d+)-(high|low)$/);if(o){const a=o[1],l=i.split("_")[0];n[a]||(n[a]=new Set),n[a].add(l)}});const r=[...n[t]||[]].sort().join("|");return r?Object.entries(n).some(([i,s])=>i!==t&&[...s].sort().join("|")===r):!1}function ejt({options:e,disabled:t,answer:n,responseId:r,setError:i}){const{onChange:s}=n,{sensors:o,updateAnswer:a}=ere(r,s),l=k.useMemo(()=>Zne(e),[e]),[u,c]=k.useState(["0"]),[d,f]=k.useState(null),[h,p]=k.useState(0),[m,g]=k.useState(1),{pairs:y,unassigned:v}=k.useMemo(()=>{const T={};return Object.entries(n?.value||{}).forEach(([A,R])=>{const I=R.match(/^pair-(\d+)-(high|low)$/);if(I){const[,P,N]=I;T[P]||(T[P]={high:[],low:[]}),T[P][N].push(A)}}),u.forEach(A=>{T[A]||(T[A]={high:[],low:[]})}),{pairs:T,unassigned:l}},[l,n,u]),b=T=>{f(T.active.id)},_=T=>{if(f(null),t||!T.over)return;const A=T.active.id,R=T.over.id,I={...n.value};if(R==="unassigned"){delete I[A],i?.(null),a(I);return}const P=!A.includes("_"),N=P?A:A.split("_")[0],M=R.match(/^pair-(\d+)-(high|low)$/);if(M){const[,O,j]=M;if(Object.entries(I).filter(([U,L])=>L===R&&U!==A).length>=1){i?.("You can only place one item in each box.");return}const q=`pair-${O}-${j==="high"?"low":"high"}`;if(Object.entries(I).some(([U,L])=>{const z=U.split("_")[0];return L===q&&z===N})){const U=l.find(L=>L.id===N)?.label;i?.(`Item "${U}" cannot be in both HIGH and LOW.`);return}if(P){const U={...I,[`${A}_temp`]:R};if(Z8t(U,O)){i?.("This would create a duplicate pair.");return}}}P?(I[`${A}_${h}`]=R,p(O=>O+1)):(delete I[A],I[A]=R),i?.(null),a(I)},E=k.useMemo(()=>{if(!d)return null;const T=d.includes("_")?d.split("_")[0]:d;return l.find(A=>A.id===T)||null},[d,l]),S=T=>{if(t)return;const A={...n.value};Object.keys(A).forEach(R=>{A[R].startsWith(`pair-${T}-`)&&delete A[R]}),c(R=>R.filter(I=>I!==T)),i?.(null),a(A)};return w.jsxs(Xne,{sensors:o,collisionDetection:g8,onDragStart:b,onDragEnd:_,children:[w.jsx(Rt,{justify:"flex-end",mb:"md",children:w.jsx(Yt,{variant:"outline",onClick:()=>{t||(c(T=>[...T,m.toString()]),g(T=>T+1))},children:"Add New Pair"})}),w.jsxs(Gn,{gap:"md",w:"650px",mx:"auto",children:[Object.entries(y).map(([T,A])=>w.jsxs(Pn,{justify:"center",wrap:"nowrap",align:"flex",children:[["high","low"].map(R=>w.jsx(De,{style:{width:"300px"},children:w.jsx(vI,{id:`pair-${T}-${R}`,title:R.toUpperCase(),children:w.jsx(yI,{items:A[R],strategy:gI,children:w.jsx(Gn,{children:A[R].map(I=>{const P=I.split("_")[0],N=l.find(M=>M.id===P);return N?w.jsx(nv,{item:{...N,id:P,symbol:I}},I):null})})})})},R)),w.jsx(Yt,{variant:"white",color:"red",size:"xs",onClick:()=>S(T),disabled:t,children:"X"})]},T)),w.jsx(vI,{id:"unassigned",title:"Available Items",children:w.jsx(yI,{items:v.map(T=>T.id),strategy:gI,children:w.jsx(Gn,{children:v.map(T=>w.jsx(nv,{item:T},T.id))})})})]}),w.jsx(Qne,{children:E?w.jsx(nv,{item:E}):void 0})]})}function tjt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l,infoText:u,numItems:c}=e,[d,f]=k.useState(null),h={disabled:r,options:a,answer:t,responseId:e.id,numItems:c};return w.jsxs(De,{children:[s.length>0&&w.jsx(Jd,{prompt:s,required:o,index:n,enumerateQuestions:i,infoText:u}),l&&w.jsx(He,{c:"dimmed",size:"sm",mt:0,children:l}),d&&w.jsx(He,{c:o?"red":"orange",size:"sm",mt:"xs",children:d}),w.jsxs(De,{mt:"md",children:[e.type==="ranking-sublist"&&w.jsx(Q8t,{...h,setError:f}),e.type==="ranking-categorical"&&w.jsx(J8t,{...h,setError:f}),e.type==="ranking-pairwise"&&w.jsx(ejt,{...h,setError:f})]})]})}const njt="_track_w59g7_1",rjt="_fixDisabled_w59g7_11",Cve={track:njt,fixDisabled:rjt};function ijt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l,infoText:u,snap:c,step:d,withBar:f,tlxStyle:h,smeqStyle:p,spacing:m}=e,[g,y]=k.useMemo(()=>[Math.min(...a.map(P=>P.value)),Math.max(...a.map(P=>P.value))],[a]),v=a.some(P=>P.label!==""),b=sm(e,n),_=k.useMemo(()=>{const P=m??10**Math.floor(Math.log10((y-g)/10)),N=Math.ceil(g/P)*P,M=Math.floor((y-N)/P)+1;return Array.from({length:M},(O,j)=>N+j*P)},[g,y,m]),[E,S]=k.useState(n.value??(g+y)/2),T=(E-g)/(y-g),[A,R]=k.useState(!1),{ref:I}=lR(({y:P})=>{const N=Math.max(g,Math.min(y,g+(1-P)*(y-g))),M=d??(c?.001:(y-g)/100),O=Math.round((N-g)/M)*M+g;S(O),n?.onChange?.(O)});return w.jsx(Qr.Wrapper,{label:s.length>0&&w.jsx(Jd,{prompt:s,required:o,index:r,enumerateQuestions:i,infoText:u}),description:l,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},errorProps:{c:o?"red":"orange"},children:p?w.jsx(De,{style:{overflow:"hidden"},children:w.jsxs(Rt,{direction:"row",align:"flex-start",gap:"sm",m:"md",justify:"center",wrap:"nowrap",children:[w.jsx(De,{style:{height:450,position:"relative",minWidth:30,textAlign:"right",flexShrink:0},children:_.map(P=>{const N=(P-g)/(y-g)*100;return w.jsx(De,{style:{position:"absolute",bottom:`${N}%`,fontSize:"var(--mantine-font-size-xs)",color:"var(--mantine-color-gray-7)",right:0,transform:"translateY(50%)"},children:P},P)})}),w.jsxs(De,{ref:I,style:{width:22,height:450,position:"relative",flexShrink:0},onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),children:[w.jsx(De,{style:{position:"absolute",left:20,top:0,width:2,height:"100%",backgroundColor:"var(--mantine-color-gray-5)"}}),_.map(P=>{const N=(P-g)/(y-g)*100;return w.jsx(De,{style:{position:"absolute",bottom:`${N}%`,left:2,width:20,height:1,backgroundColor:"var(--mantine-color-gray-7)",transform:"translateY(50%)"}},P)}),a.map(P=>{const N=(P.value-g)/(y-g)*100;return w.jsx(De,{style:{position:"absolute",bottom:`${N}%`,left:P.label!==""?20:2,width:(P.label!=="",20),height:1,backgroundColor:"var(--mantine-color-gray-7)",transform:"translateY(50%)"}},P.value)}),w.jsx(De,{style:{backgroundColor:"var(--mantine-color-red-6)",width:20,height:1,border:"1px solid var(--mantine-color-red-6)",position:"absolute",bottom:`calc(${T*100}% - 1px)`},children:A&&w.jsx(De,{style:{position:"absolute",left:40,top:-10,transform:"translateX(-50%)",background:"var(--mantine-color-gray-8)",color:"white",fontSize:12,padding:"2px 6px",borderRadius:4},children:Math.round(E)})})]}),w.jsx(De,{style:{height:450,position:"relative",minWidth:200},children:a.map(P=>{if(!P.label)return null;const N=(P.value-g)/(y-g)*100;return w.jsx(De,{style:{fontSize:"var(--mantine-font-size-xs)",color:"var(--mantine-color-gray-7)",position:"absolute",bottom:`${N}%`,transform:"translateY(50%)",left:20},children:P.label},P.value)})})]})}):w.jsx(nL,{disabled:t,marks:[..._.map(P=>({value:P})),...a],min:g,max:y,step:d??(c?.001:(y-g)/100),h:v?40:void 0,...n,classNames:{track:h?Cve.track:"",bar:Cve.fixDisabled},restrictToMarks:c,label:P=>c?null:P,styles:P=>({mark:{...h?{height:20,width:1,marginTop:-6,marginLeft:2,borderRadius:0}:{},...f===!1?{borderColor:"var(--mantine-color-gray-2)"}:{}},bar:f===!1||h?{display:"none"}:{},markLabel:{fontSize:P.fontSizes.sm,color:P.colors.gray[7],transform:"translate(calc((var(--mark-offset) * -1) + (var(--slider-size) / 2)), calc(var(--mantine-spacing-xs) / 2)"},thumb:{...h?{borderColor:"var(--mantine-color-red-6)",width:1,borderWidth:1,height:22,borderRadius:0,backgroundColor:"var(--mantine-color-red-6)",transform:"translate(-50%, -62%)"}:{}}}),flex:1,mt:h?"sm":"xs"})})}function sjt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l,infoText:u}=e;return w.jsx(iu,{disabled:t,placeholder:s,label:o.length>0&&w.jsx(Jd,{prompt:o,required:a,index:r,enumerateQuestions:i,infoText:u}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:sm(e,n),withErrorStyles:a,errorProps:{c:a?"red":"orange"},classNames:{input:r0.fixDisabled}})}function ojt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l,infoText:u}=e;return w.jsx(Dk,{disabled:t,placeholder:s,label:o.length>0&&w.jsx(Jd,{prompt:o,required:a,index:r,enumerateQuestions:i,infoText:u}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:sm(e,n),withErrorStyles:a,errorProps:{c:a?"red":"orange"},classNames:{input:r0.fixDisabled}})}function ajt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return w.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>w.jsx(_l,{disabled:o,checked:i.value[r].split("|").includes(a.value),onChange:l=>s(l,r,a),value:a.value,classNames:{input:Bf.fixDisabled,icon:Bf.fixDisabledIcon}},`${a.label}-${n}`))})}function ljt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return w.jsx(Tl.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:l=>o(l,r),value:s.value[r],children:w.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(l=>w.jsx(Tl,{disabled:a,value:l.value,classNames:{radio:yy.fixDisabled,icon:yy.fixDisabledIcon}},`${l.label}-${n}`))})},`${i.id}-${n}`)}function ujt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=ls(),a=Us(),{answerOptions:l,prompt:u,secondaryText:c,required:d,infoText:f}=e,p=typeof l=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[l].map(S=>({value:S,label:S})):l.map(S=>typeof S=="string"?{value:S,label:S}:S),{questionOrders:m}=f1(),g=k.useMemo(()=>m[e.id],[m,e.id]),y=(S,T)=>{const A={type:"radio",questionKey:T,val:S,responseId:e.id};a(s(A))},v=(S,T,A)=>{const R=S.target.checked,I={questionKey:T,responseId:e.id,value:A.value,label:A.label,isChecked:R,choiceOptions:p};a(o(I))},b=sm(e,t),_=p.length,E=g.length;return w.jsxs(w.Fragment,{children:[u.length>0&&w.jsx(Jd,{prompt:u,required:d,index:n,enumerateQuestions:i,infoText:f}),w.jsx(He,{c:"dimmed",size:"sm",mt:0,children:c}),w.jsxs(De,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[w.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),w.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${_}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((S,T)=>w.jsx(He,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:S.label},`choice-${T}-label`))}),w.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${E}, 1fr)`},children:g.map((S,T)=>w.jsx(He,{style:{height:"80px",width:"100%",display:"flex",alignItems:"safe center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"auto"},ta:"right",p:"sm",miw:140,maw:400,children:S},`question-${T}-label`))}),w.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${E},1fr)`},children:g.map((S,T)=>w.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?w.jsx(ljt,{disabled:r,idx:T,question:S,answer:t,_choices:p,_n:_,onChange:y,response:e}):w.jsx(ajt,{disabled:r,idx:T,question:S,answer:t,_choices:p,_n:_,onChange:v})},`question-${T}`))})]}),b&&w.jsx(He,{c:d?"red":"orange",size:"sm",mt:"xs",children:b})]})}const cjt="_root_152zr_1",djt={root:cjt};function fjt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,secondaryText:a,options:l,infoText:u}=e,c=f1(),d=k.useMemo(()=>c?c.optionOrders:{},[c]),f=k.useMemo(()=>d[e.id]||l,[d,l,e.id]),h=k.useMemo(()=>sm(e,n,f),[e,n,f]);return w.jsx(dR,{children:w.jsx(Tl.Group,{name:`radioInput${e.id}`,label:s.length>0&&w.jsx(Jd,{prompt:s,required:o,index:r,enumerateQuestions:i,infoText:u}),description:a,...n,error:h,errorProps:{c:o?"red":"orange"},style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsx(Rt,{justify:"space-between",align:"center",gap:"xl",mt:"xs",children:f.map((p,m)=>w.jsx(Tl.Card,{value:p.value,disabled:t,ta:"center",className:djt.root,p:"xs",children:w.jsx(He,{children:p.label})},`radio-${m}`))})},e.id)})}function hjt({response:e}){const{prompt:t}=e;return w.jsx(Rt,{direction:"row",wrap:"nowrap",gap:4,children:w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(Zp,{text:t,required:!1})})})}const tre=e=>{k.useEffect(()=>{if(!e)return()=>{};const t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.href=`${as}${e}`,t.dataset.stylesheetPath=e,document.head.appendChild(t),()=>{t.parentNode&&t.parentNode.removeChild(t)}},[e])};function pjt({response:e,form:t,storedAnswer:n,index:r,config:i,dontKnowCheckbox:s,otherInput:o,disabled:a}){const l=pc(),u=k0(),c=gr(I=>I.sequence),d=k.useMemo(()=>Kd(c),[c]),f=id(),h=k.useMemo(()=>typeof f=="number"?d[f+1]:void 0,[f,d]),p=k.useMemo(()=>h?l.components[h]:void 0,[h,l]),m=gr(I=>I.completed),g=k.useMemo(()=>(u||Object.keys(n||{}).length>0&&!p?.previousButton||m?{value:n[e.id]}:t)||{value:void 0},[u,n,e.id,t,p?.previousButton,m]),y=(Object.keys(n||{}).length>0?{checked:n[`${e.id}-dontKnow`]}:s)||{checked:void 0},v=(Object.keys(n||{}).length>0?{value:n[`${e.id}-other`]}:o)||{value:void 0},b=Object.keys(n||{}).length>0||a||m,[_]=nd(),E=k.useMemo(()=>i?.enumerateQuestions??l.uiConfig.enumerateQuestions??!1,[i,l]);tre(e.stylesheetPath);const S=k.useMemo(()=>{if(m)return!0;if(typeof f=="number"){const I=d[f];for(let P=0;P<c.components.length;P+=1){const N=c.components[P];if(typeof N=="string"&&N===I){if(P+1<c.components.length&&typeof c.components[P+1]!="string")return!1;break}}}if(typeof f=="number"&&f+1<d.length&&p?.previousButton)return!1;if(e.paramCapture){const I=_.get(e.paramCapture);return b||!!I}return b||a},[m,f,d,e.paramCapture,b,a,c.components,p?.previousButton,_]),T=k.useMemo(()=>e.paramCapture?_.get(e.paramCapture)||"":e.type==="reactive"||e.type==="checkbox"?[]:e.type==="matrix-radio"||e.type==="matrix-checkbox"?Object.fromEntries(e.questionOptions.map(I=>[I,""])):e.type==="slider"&&e.startingValue?e.startingValue.toString():"",[e.paramCapture,e.questionOptions,e.startingValue,e.type,_]),A=e.style||{},R=k.useMemo(()=>e.withDivider??i?.responseDividers??l.uiConfig.responseDividers,[e,i,l]);return w.jsxs(De,{mb:R?"xl":"lg",className:"response",id:e.id,style:A,children:[e.type==="numerical"&&w.jsx(uLt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="shortText"&&w.jsx(sjt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="longText"&&w.jsx(ojt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="likert"&&w.jsx(lLt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="dropdown"&&w.jsx(rLt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="slider"&&w.jsx(ijt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="radio"&&w.jsx(U6e,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E,otherValue:v}),e.type==="checkbox"&&w.jsx(nLt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E,otherValue:v}),(e.type==="ranking-sublist"||e.type==="ranking-categorical"||e.type==="ranking-pairwise")&&w.jsx(tjt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="reactive"&&w.jsx(iLt,{response:e,answer:g,index:r,enumerateQuestions:E}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&w.jsx(ujt,{disabled:S||s?.checked,response:e,answer:g,index:r,enumerateQuestions:E}),e.type==="buttons"&&w.jsx(fjt,{response:e,disabled:S||s?.checked,answer:g,index:r,enumerateQuestions:E}),e.type==="textOnly"&&w.jsx(hjt,{response:e}),e.withDontKnow&&w.jsx(_l,{mt:"xs",disabled:S,label:"I don't know",classNames:{input:Bf.fixDisabled,label:Bf.fixDisabledLabel,icon:Bf.fixDisabledIcon},...s,checked:y.checked,onChange:I=>{s?.onChange(I.currentTarget.checked),t.onChange(T)}}),(e.type==="divider"||R)&&w.jsx(JC,{mt:"xl",mb:"xs"})]})}function Sve({response:e,correctAnswer:t,alertConfig:n,identifier:r,attemptsUsed:i,trainingAttempts:s}){const o=Us(),{toggleShowHelpText:a,incrementHelpCounter:l}=ls();return n[e.id]?.visible?w.jsxs(Bd,{mb:"md",title:n[e.id].title,color:n[e.id].color,children:[n[e.id].message,n[e.id].message.includes("Please try again")&&w.jsxs(w.Fragment,{children:[w.jsx("br",{}),w.jsx("br",{}),"If you're unsure"," ",w.jsx(Ww,{style:{fontSize:14},onClick:()=>{o(a()),o(l({identifier:r}))},children:"review the help text."})," "]}),w.jsx("br",{}),w.jsx("br",{}),i>=s&&s>=0&&t&&` The correct answer was: ${t}.`]}):null}function mjt(e,t){const n=[];for(const r of e)t.includes(r)&&n.push(r);return n}function uK({config:e,location:t,status:n,style:r}){const{storageEngine:i}=Vi(),s=Us(),{updateResponseBlockValidation:o,saveIncorrectAnswer:a}=ls(),l=id(),u=gr(ie=>ie.analysisProvState[t]),c=k.useMemo(()=>u?.form||n?.answer,[u,n]),d=f1(),f=k.useMemo(()=>d?.formOrder||{},[d]),h=$l(),p=k.useMemo(()=>f?.response?f.response.map(ie=>e?.response?.find(le=>le.id===ie)).filter(ie=>ie!==void 0):[],[e?.response,f]),m=k.useMemo(()=>p.filter(ie=>ie.location?ie.location===t:t==="belowStimulus"),[p,t]),g=k.useMemo(()=>m.map(ie=>ie.type!=="textOnly"&&ie.type!=="divider"?{...ie,required:ie.required===void 0?!0:ie.required}:ie),[m]),y=k.useMemo(()=>p.map(ie=>ie.type!=="textOnly"&&ie.type!=="divider"?{...ie,required:ie.required===void 0?!0:ie.required}:ie),[p]),{actions:v,trrack:b}=k.useMemo(()=>{const ie=a1.create(),le=ie.register("update",(X,fe)=>(X.form=fe,X)),Ce=CS({registry:ie,initialState:{form:null}});return{actions:{updateFormAction:le},trrack:Ce}},[]),_=gr(ie=>ie.reactiveAnswers),E=gr(ie=>ie.matrixAnswers),S=gr(ie=>ie.rankingAnswers),T=gr(ie=>ie.trialValidation),A=pc(),I=k.useMemo(()=>e?.provideFeedback??A.uiConfig.provideFeedback,[e,A])&&(e?.correctAnswer?.length||0)>0,P=k.useMemo(()=>e?.allowFailedTraining??A.uiConfig.allowFailedTraining??!0,[e,A]),[N,M]=k.useState(0),O=k.useMemo(()=>e?.trainingAttempts??A.uiConfig.trainingAttempts??2,[e,A]),[j,B]=k.useState(!1),[H,q]=k.useState(!1),U=N>=O&&O>=0||H,L=k.useMemo(()=>t===(e?.nextButtonLocation??A.uiConfig.nextButtonLocation??"belowStimulus"),[e,A,t]),z=n0(),V=QFt(g,l,c||{});k.useEffect(()=>{c&&(V.setInitialValues(z6e(m,c)),V.reset(),o({location:t,identifier:z,status:V.isValid(),values:structuredClone(V.values),provenanceGraph:b.graph.backend}))},[m,c]),k.useEffect(()=>{const ie=g.find(le=>le.type==="reactive");if(_&&ie){const le=ie.id;V.setValues({...V.values,[le]:_[le]})}},[_]),k.useEffect(()=>{const ie=g.filter(X=>X.type==="matrix-radio"||X.type==="matrix-checkbox"),le=g.filter(X=>X.type==="ranking-sublist"||X.type==="ranking-categorical"||X.type==="ranking-pairwise"),Ce={...V.values};ie.forEach(X=>{const{id:fe}=X;Ce[fe]={...V.getInputProps(fe).value,...E[fe]}}),le.forEach(X=>{const{id:fe}=X;Ce[fe]={...V.getInputProps(fe).value,...S[fe]}}),V.setValues(Ce)},[E,S]),k.useEffect(()=>{b.apply("update",v.updateFormAction(structuredClone(V.values))),s(o({location:t,identifier:z,status:V.isValid(),values:structuredClone(V.values),provenanceGraph:b.graph.backend}))},[V.values,z,t,s,o]);const[Y,Q]=k.useState(Object.fromEntries(y.map(ie=>[ie.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),ne=(ie,le,Ce,X,fe)=>{Q(de=>({...de,[ie]:{visible:le,title:Ce,message:X,color:fe}}))},ue=k.useCallback(()=>{const ie=N+1;M(ie);const le=structuredClone(T[z]),Ce=le?Object.values(le).reduce((fe,de)=>Object.hasOwn(de,"values")?{...fe,...de.values}:fe,{}):{},X=Object.fromEntries(y.map(fe=>{const de=e?.correctAnswer?.find(ee=>ee.id===fe.id)?.answer,te=Ce[fe.id];return[fe.id,Bne(te,de)]}));I&&(y.forEach(fe=>{if(X[fe.id]&&!Y[fe.id]?.message.includes("You've failed to answer this question correctly"))ne(fe.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(a({question:z,identifier:fe.id,answer:Ce[fe.id]}));let de="";if(O===-1?de="Please try again.":ie>=O?(de=`You didn't answer this question correctly after ${O} attempts. ${P?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!P&&i&&i.rejectCurrentParticipant("Failed training").then(()=>{setTimeout(()=>{h("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{h("./../__trainingFailed")},5e3)})):O-ie===1?de="Please try again. You have 1 attempt left.":de=`Please try again. You have ${O-ie} attempts left.`,fe.type==="checkbox"){const te=e?.correctAnswer?.find(Te=>Te.id===fe.id)?.answer,ee=Ce[fe.id],me=mjt(ee,te),Ie=te.length===me.length&&ee.length>te.length?"However, you have selected too many boxes. ":"";de=`You have successfully checked ${me.length}/${te.length} correct boxes. ${Ie}${de}`}ne(fe.id,!0,"Incorrect Answer",de,"red")}}),q(Object.values(X).every(fe=>fe)),B(P&&ie>=O||Object.values(X).every(fe=>fe)&&ie<=O))},[N,y,e,I,O,P,i,h,z,s,Y,a,T]),se=e?.nextOnEnter??A.uiConfig.nextOnEnter;k.useEffect(()=>{if(se){const ie=le=>{le.key==="Enter"&&ue()};return window.addEventListener("keydown",ie),()=>{window.removeEventListener("keydown",ie)}}return()=>{}},[ue,se]);const ae=k.useMemo(()=>e?.nextButtonText??A.uiConfig.nextButtonText??"Next",[e,A]);let he=0;return w.jsxs(w.Fragment,{children:[w.jsx(De,{className:`responseBlock responseBlock-${t}`,style:r,children:y.map(ie=>{const le=e.correctAnswer?.find(fe=>fe.id===ie.id)?.answer,Ce=Array.isArray(le)&&le.length>0?JSON.stringify(le):le,X=m.some(fe=>fe.id===ie.id);return X&&(ie.type!=="textOnly"?he+=1:ie.restartEnumeration&&(he=0)),w.jsx(bn.Fragment,{children:X?ie.hidden?"":w.jsxs(w.Fragment,{children:[w.jsx(pjt,{storedAnswer:c,form:{...V.getInputProps(ie.id,{type:ie.type==="checkbox"?"checkbox":"input"})},dontKnowCheckbox:{...V.getInputProps(`${ie.id}-dontKnow`,{type:"checkbox"})},otherInput:{...V.getInputProps(`${ie.id}-other`)},response:ie,index:he,config:e,disabled:U}),w.jsx(Sve,{response:ie,correctAnswer:Ce,alertConfig:Y,identifier:z,attemptsUsed:N,trainingAttempts:O})]}):w.jsx(Sve,{response:ie,correctAnswer:Ce,alertConfig:Y,identifier:z,attemptsUsed:N,trainingAttempts:O})},`${ie.id}-${l}`)})}),L&&w.jsx(RFt,{disabled:I&&!j||!V.isValid(),label:ae,config:e,location:t,checkAnswer:L&&I?w.jsx(Yt,{disabled:H||N>=O&&O>=0,onClick:()=>ue(),px:t==="sidebar"?8:void 0,children:"Check Answer"}):null})]})}const c2="@REVISIT_COMMS";function gjt({currentConfig:e,provState:t,answers:n}){const{setReactiveAnswers:r,updateResponseBlockValidation:i}=ls(),s=Us(),o=PDe(),a=n0(),l=k.useRef(null),u=k.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),c=$h(),d=k.useCallback((f,h)=>{l.current?.contentWindow?.postMessage({error:!1,type:`${c2}/${f}`,iframeId:u,message:h},"*")},[l,u]);return k.useEffect(()=>{t&&d("PROVENANCE",t)},[t,d]),k.useEffect(()=>{n&&d("ANSWERS",n)},[n,d]),k.useEffect(()=>{const f=h=>{const{data:p}=h;if(typeof p=="object"&&u===p.iframeId)switch(p.type){case`${c2}/WINDOW_READY`:e.parameters&&d("STUDY_DATA",e.parameters);break;case`${c2}/READY`:break;case`${c2}/ANSWERS`:s(r(p.message)),s(i({location:"stimulus",identifier:a,status:!0,values:p.message}));break;case`${c2}/PROVENANCE`:s(i({location:"stimulus",identifier:a,values:{},status:!0,provenanceGraph:p.message}));break}};return window.addEventListener("message",f),()=>window.removeEventListener("message",f)},[s,o,u,e,d,r,i,a]),w.jsx("iframe",{ref:l,style:{width:"100%",flexGrow:1,border:0},src:e.path.startsWith("http")?e.path:`${as}${e.path}?trialid=${c}&id=${u}`})}async function b8(e){const n=await(await fetch(e)).text();if(!n.includes("<title>ReVISit</title>"))return n}async function yjt(e){const t=await fetch(`${as}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function i0({email:e,path:t}){const n=hf();return w.jsxs(w0,{fluid:!0,my:50,maw:800,mx:"auto",children:[w.jsx(ri,{order:2,children:w.jsx(He,{span:!0,c:"orange",children:"404"})}),w.jsxs(He,{children:[w.jsx(He,{span:!0,fw:700,children:t||n.pathname})," ","not found."]}),w.jsx(zd,{h:"lg"}),w.jsxs(wl,{children:[w.jsx(wl.Item,{children:w.jsx(He,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),w.jsx(wl.Item,{children:w.jsxs(He,{children:["If you're a participant, please contact the study administrator"," ",e&&w.jsxs(w.Fragment,{children:["at"," ",w.jsxs(Ww,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}function vjt({currentConfig:e}){const t=k.useMemo(()=>e.path.startsWith("http")?e.path:`${as}${e.path}`,[e.path]),[n,r]=k.useState(!0),[i,s]=k.useState(!1);return k.useEffect(()=>{async function o(){let a=await b8(t);a=a?.includes("File not found")?void 0:a,s(!!a),r(!1)}o()},[t]),n||i?w.jsx(x0,{mx:"auto",src:t}):w.jsx(i0,{path:e.path})}class bjt extends bn.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?w.jsx(He,{children:this.state.error.toString()}):this.props.children}}const Tve=Object.assign({"../public/libraries/adaptive-vlat/assets/VlatTrial.tsx":NDe,"../public/libraries/adaptive-vlat/assets/dynamic.tsx":FDe,"../public/libraries/adaptive-vlat/assets/utils.ts":$De,"../public/libraries/adaptive-vlat/assets/vlatQ.tsx":ODe,"../public/libraries/berlin-num/assets/dynamic.tsx":LDe,"../public/libraries/mic-check/assets/AudioTest.tsx":jDe,"../public/libraries/screen-recording/assets/ScreenRecording.tsx":aPe,"../public/libraries/test/assets/test.tsx":lPe,"../public/libraries/virtual-chinrest/assets/ViewingDistanceCalibration.tsx":uPe,"../public/libraries/virtual-chinrest/assets/VirtualChinrestCalibration.tsx":cPe,"../public/tutorial/assets/BrushPlotWrapper.tsx":x6e,"../public/tutorial/assets/ReactExample.tsx":_6e,"../public/tutorial/assets/_answers/ReactExample.tsx":E6e,"../public/tutorial/assets/_answers/replication/JNDDynamic.tsx":C6e,"../public/tutorial/assets/_answers/replication/Scatter.tsx":S6e,"../public/tutorial/assets/_answers/replication/ScatterWrapper.tsx":T6e,"../public/tutorial/assets/brush-components/assets/Bar.tsx":b6e,"../public/tutorial/assets/brush-components/assets/BrushPlot.tsx":w6e,"../public/tutorial/assets/brush-components/assets/Paintbrush.tsx":m6e,"../public/tutorial/assets/brush-components/assets/Scatter.tsx":g6e,"../public/tutorial/assets/brush-components/assets/XAxisBar.tsx":d6e,"../public/tutorial/assets/brush-components/assets/YAxis.tsx":h6e,"../public/tutorial/assets/brush-components/assets/YAxisBar.tsx":v6e,"../public/tutorial/assets/brush-components/assets/types.ts":A6e,"../public/tutorial/assets/replication/JNDDynamic.tsx":k6e,"../public/tutorial/assets/replication/Scatter.tsx":I6e,"../public/tutorial/assets/replication/ScatterWrapper.tsx":R6e});function wjt({currentConfig:e,provState:t,answers:n}){const r=`../public/${e.path}`,i=r in Tve?Tve[r].default:null,s=n0(),o=Us(),{updateResponseBlockValidation:a,setReactiveAnswers:l}=ls(),u=k.useCallback(({status:c,provenanceGraph:d,answers:f})=>{o(a({location:"stimulus",identifier:s,status:c,values:f,provenanceGraph:d})),o(l(f))},[l,o,a,s]);return w.jsx(k.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:i?w.jsx(bjt,{children:w.jsx(i,{parameters:e.parameters,setAnswer:u,answers:n,provenanceState:t})}):w.jsx(i0,{path:e.path})})}function xjt({currentConfig:e}){const[t,n]=k.useState(!0),[r,i]=k.useState(""),[s,o]=k.useState(!0);return k.useEffect(()=>{async function a(){const l=await b8(`${as}${e.path}`);l!==void 0?i(l):n(!1),o(!1)}a()},[e.path]),s||t?w.jsx(Zp,{text:r}):w.jsx(i0,{path:e.path})}function p5e(){const e=id(),{setAlertModal:t}=ls(),n=Us();k.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study.",title:"Prohibited"}))}},[e,t,n])}var Ave=Object.prototype.hasOwnProperty;function kve(e,t,n){for(n of e.keys())if(rk(n,t))return n}function rk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&rk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=kve(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=kve(t,i),!i)||!rk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Ave.call(e,n)&&++r&&!Ave.call(t,n)||!(n in t)||!rk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function _jt(e){var t=k.useRef(e),n=k.useRef(0);return rk(e,t.current)||(t.current=e,n.current+=1),k.useMemo(function(){return t.current},[n.current])}function Ejt(e,t){return k.useEffect(e,_jt(t))}const Qf=(e,t=null)=>{const[n,r]=k.useState("idle"),[i,s]=k.useState(null),[o,a]=k.useState(null),l=k.useRef(null),u=k.useRef(!1);k.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const c=k.useCallback((...d)=>{r("pending"),a(null);const f=Promise.resolve(e(...d)).then(h=>(u.current&&f===l.current&&(s(h),r("success")),h)).catch(h=>{throw u.current&&f===l.current&&(s(null),a(h),r("error")),h});return l.current=f,f},[e]);return Ejt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function nre(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,l])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const Cjt="_root_1spq0_1",Sjt="_description_1spq0_9",Tjt="_title_1spq0_10",Ajt="_closeButton_1spq0_14",kjt={root:Cjt,description:Sjt,title:Tjt,closeButton:Ajt},bI=e=>{const{title:t,message:n,color:r}=e;Xw.show({title:t,message:n,position:"top-center",classNames:kjt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},Ijt=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","duration","cleanedDuration","meta","startTime","endTime","responseMin","responseMax","configHash"],m5e=["participantId","trialId","trialOrder","responseId"];function rre(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Rjt(e,t,n){const r=(Object.entries(e.answers).filter(([s,o])=>o.endTime!==-1).length/Object.entries(e.answers).length*100).toFixed(2),i=new Set;return[[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.values(e.answers).map(s=>{const o=s.componentName,{trialOrder:a}=s,l=n.components[o],u=lu(l,n),c=s.endTime===-1?void 0:s.endTime-s.startTime,d=nre(s),f=Object.keys(s.answer).length===0?{"":void 0}:s.answer,h=Object.entries(f).map(([m,g])=>{const y={participantId:e.participantId,trialId:o,trialOrder:a,responseId:m};Object.entries(s.parameters).forEach(([b,_])=>{y[`parameters_${b}`]=_,i.add(`parameters_${b}`)});const v=u.response.find(b=>b.id===m);if(t.includes("status")&&(y.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(y.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(y.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(y.configHash=e.participantConfigHash),t.includes("percentComplete")&&(y.percentComplete=r),t.includes("description")&&(y.description=u.description),t.includes("instruction")&&(y.instruction=u.instruction),t.includes("responsePrompt")&&(y.responsePrompt=v?.prompt),t.includes("answer")&&(y.answer=typeof g=="object"?JSON.stringify(g):g),t.includes("correctAnswer")){const b=u.correctAnswer?.find(S=>S.id===m)?.answer,E=s.correctAnswer.find(S=>S.id===m)?.answer||b;y.correctAnswer=typeof E=="object"?JSON.stringify(E):E}return t.includes("startTime")&&(y.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(y.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(y.duration=c),t.includes("cleanedDuration")&&(y.cleanedDuration=d),t.includes("meta")&&(y.meta=JSON.stringify(u.meta,null,2)),t.includes("responseMin")&&(y.responseMin=v?.type==="numerical"?v.min:void 0),t.includes("responseMax")&&(y.responseMax=v?.type==="numerical"?v.max:void 0),y}).flat(),p={focus:s.windowEvents.filter(m=>m[1]==="focus").length,input:s.windowEvents.filter(m=>m[1]==="input").length,keydown:s.windowEvents.filter(m=>m[1]==="keydown").length,keyup:s.windowEvents.filter(m=>m[1]==="keyup").length,mousemove:s.windowEvents.filter(m=>m[1]==="mousemove").length,mousedown:s.windowEvents.filter(m=>m[1]==="mousedown").length,mouseup:s.windowEvents.filter(m=>m[1]==="mouseup").length,resize:s.windowEvents.filter(m=>m[1]==="resize").length,scroll:s.windowEvents.filter(m=>m[1]==="scroll").length,visibility:s.windowEvents.filter(m=>m[1]==="visibility").length};return h.push({participantId:e.participantId,trialId:o,trialOrder:a,responseId:"windowEvents",answer:JSON.stringify(p)}),h}).flat()],Array.from(i)]}async function Djt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...m5e,...e],s=[...new Set(t.map(f=>f.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=await Promise.all(t.map(async f=>await Rjt(f,i,o[f.participantConfigHash]))),u=l.map(f=>f[0]),c=new Set(l.map(f=>f[1]).flat()),d=u.flat().sort((f,h)=>f!==h?f.participantId.localeCompare(h.participantId):f.trialOrder-h.trialOrder);return{header:[...a,...c],rows:d}}function Pjt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=k.useState(["status","rejectReason","description","rejectTime","percentComplete","instruction","responsePrompt","answer","correctAnswer","duration","cleanedDuration"]),a=Vi(),{value:l,status:u,error:c}=Qf(Djt,[s,r,a.storageEngine,i]),d=k.useCallback(()=>{if(!l)return;const p=[l.header.join(","),...l.rows.map(m=>l.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);rre(p,n)},[n,l]),f=k.useCallback(()=>{l&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:l},"*"),bI({title:"Success",message:"Data sent to python notebook",color:"green"}))},[l]),h=k.useMemo(()=>{if(!l)return"";const p=l.rows.length>5?5:l.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${l.rows.length} row${m}.`},[l]);return w.jsxs(Fi,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[w.jsxs(De,{children:[w.jsx(He,{size:"sm",fw:500,mb:"xs",children:w.jsxs(Rt,{align:"center",gap:"xs",children:[w.jsx(Uut,{size:16}),"Optional columns:"]})}),w.jsx(Rt,{wrap:"wrap",gap:"4px",children:Ijt.map(p=>{const m=s.includes(p);return w.jsx(Yt,{variant:m?"light":"white",color:m?"blue":"gray",size:"xs",onClick:()=>{o(m?s.filter(y=>y!==p):[...s,p])},styles:{root:{fontSize:"14px",height:"auto",padding:"4px 8px",borderRadius:"6px"}},children:p},p)})})]}),w.jsx(zd,{h:"md"}),w.jsxs(De,{h:400,style:{width:"100%",overflow:"scroll"},children:[u==="success"&&l?w.jsxs(In,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[w.jsx(In.Thead,{children:w.jsx(In.Tr,{children:l.header.map(p=>w.jsx(In.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:w.jsxs(Rt,{direction:"row",justify:"space-between",align:"center",children:[p,!m5e.includes(p)&&w.jsx(Rn,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:w.jsx(Wg,{size:16})})]})},p))})}),w.jsx(In.Tbody,{children:l.rows.slice(0,5).map((p,m)=>w.jsx(In.Tr,{children:l.header.map(g=>w.jsx(In.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):u==="error"&&c?w.jsx(Bd,{variant:"light",children:c.message}):null,w.jsx(hu,{visible:u==="pending"||u==="idle"})]}),w.jsx(zd,{h:"sm"}),w.jsx(Rt,{justify:"center",fz:"sm",c:"dimmed",children:w.jsx(He,{children:h})}),w.jsx(zd,{h:"md"}),w.jsxs(Pn,{justify:"right",children:[w.jsx(Yt,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),w.jsx(Yt,{leftSection:w.jsx(TIe,{}),onClick:d,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&w.jsx(Yt,{onClick:f,children:w.jsx(Tlt,{})})]})]})}function Ojt(){const e=pc(),{storageEngine:t}=Vi(),n=Us(),{setParticipantCompleted:r}=ls(),i=k0(),[s,o]=k.useState(!1);k.useEffect(()=>{if(i){o(!0);return}n(r(!0));const E=setInterval(async()=>{await t.verifyCompletion()&&(o(!0),clearInterval(E))},2e3)},[]),p5e();const[a,l]=k.useState(),[u,c]=k.useState(""),d=e.studyMetadata.title.replace(" ","_");k.useEffect(()=>{async function E(){if(t){const S=await t.getCurrentParticipantId(),T=await t.getParticipantData();c(S),l(T)}}E()},[t]);const f=k.useCallback(async()=>{rre(JSON.stringify(a,null,2),`${d}_${u}.json`)},[d,a,u]),h=e.uiConfig.autoDownloadStudy||!1,p=h&&e.uiConfig.autoDownloadTime||-1,[m,g]=k.useState(Math.floor(p/1e3));k.useEffect(()=>{if(s){const E=setInterval(()=>{g(S=>S-1)},1e3);return m<=0?(h&&f(),clearInterval(E),()=>clearInterval(E)):()=>clearInterval(E)}return()=>{}},[h,s,m,f]);const y=Mh(),[v,b]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){const S=await t.getModes(y);b(S.dataCollectionEnabled)}})()},[t,y]);const _=k.useMemo(()=>{const{studyEndMsg:E,urlParticipantIdParam:S}=e.uiConfig;return!S||!E?.includes("{PARTICIPANT_ID}")?E:E.replace(/\{PARTICIPANT_ID\}/g,()=>u)},[e,u]);return w.jsx(Ko,{style:{height:"100%"},children:w.jsx(Rt,{direction:"column",children:s||!v?_?w.jsx(Zp,{text:_}):w.jsx(He,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):w.jsxs(w.Fragment,{children:[w.jsx(He,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),w.jsx(zd,{h:"lg"}),w.jsx(Ko,{children:w.jsx(td,{color:"blue"})})]})})})}function Njt(){return w.jsx(He,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function Mjt(){return w.jsx(He,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Ive={};function cK(e,t){e===void 0&&(e=Ive),t===void 0&&(t=Ive);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}var $jt=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Fjt=Object.prototype.hasOwnProperty;function dK(e,t){return Fjt.call(e,t)}function fK(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)dK(e,i)&&r.push(i);return r}function Mc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function hK(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function gb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function g5e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function pK(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(pK(e[t]))return!0}else if(typeof e=="object"){for(var r=fK(e),i=r.length,s=0;s<i;s++)if(pK(e[r[s]]))return!0}}return!1}function Rve(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var y5e=(function(e){$jt(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,Rve(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=Rve(n,{name:r,index:i,operation:s,tree:o}),l}return t})(Error),Ns=y5e,Ljt=Mc,rE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=U5(n,this.path);r&&(r=Mc(r));var i=Gb(n,{op:"remove",path:this.from}).removed;return Gb(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=U5(n,this.from);return Gb(n,{op:"add",path:this.path,value:Mc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:wI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},jjt={add:function(e,t,n){return hK(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:rE.move,copy:rE.copy,test:rE.test,_get:rE._get};function U5(e,t){if(t=="")return e;var n={op:"_get",path:t};return Gb(e,n),n.value}function Gb(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):H5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=U5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=wI(e,t.value),o.test===!1)throw new Ns("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ns("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Mc(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=H5;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=g5e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!hK(h))throw new Ns("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);hK(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new Ns("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=jjt[t.op].call(t,u,h,e);if(o.test===!1)throw new Ns("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=rE[t.op].call(t,u,h,e);if(o.test===!1)throw new Ns("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new Ns("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function w8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ns("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Mc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Gb(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Bjt(e,t,n){var r=Gb(e,t);if(r.test===!1)throw new Ns("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function H5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ns("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(rE[e.op]){if(typeof e.path!="string")throw new Ns("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ns('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ns("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ns("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&pK(e.value))throw new Ns("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ns("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ns("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=v5e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ns("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ns("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function v5e(e,t,n){try{if(!Array.isArray(e))throw new Ns("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)w8(Mc(t),Mc(e),n||!0);else{n=n||H5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ns)return i;throw i}}function wI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!wI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!wI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const zjt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ns,_areEquals:wI,applyOperation:Gb,applyPatch:w8,applyReducer:Bjt,deepClone:Ljt,getValueByPointer:U5,validate:v5e,validator:H5},Symbol.toStringTag,{value:"Module"}));var ire=new WeakMap,Vjt=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),Ujt=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function Hjt(e){return ire.get(e)}function qjt(e,t){return e.observers.get(t)}function Wjt(e,t){e.observers.delete(t.callback)}function Gjt(e,t){t.unobserve()}function Yjt(e,t){var n=[],r,i=Hjt(e);if(!i)i=new Vjt(e),ire.set(e,i);else{var s=qjt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Mc(e),t){r.callback=t,r.next=null;var o=function(){mK(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){mK(r),clearTimeout(r.next),Wjt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Ujt(t,r)),r}function mK(e,t){t===void 0&&(t=!1);var n=ire.get(e.object);sre(n.value,e.object,e.patches,"",t),e.patches.length&&w8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function sre(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=fK(t),o=fK(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(dK(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?sre(c,d,n,r+"/"+gb(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+gb(u),value:Mc(c)}),n.push({op:"replace",path:r+"/"+gb(u),value:Mc(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+gb(u),value:Mc(c)}),n.push({op:"remove",path:r+"/"+gb(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!dK(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+gb(u),value:Mc(t[u])})}}}function Kjt(e,t,n){n===void 0&&(n=!1);var r=[];return sre(e,t,r,"",n),r}const Xjt=Object.freeze(Object.defineProperty({__proto__:null,compare:Kjt,generate:mK,observe:Yjt,unobserve:Gjt},Symbol.toStringTag,{value:"Module"}));Object.assign({},zjt,Xjt,{JsonPatchError:y5e,deepClone:Mc,escapePathComponent:gb,unescapePathComponent:g5e});var rU,Dve;function Qjt(){if(Dve)return rU;Dve=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return rU=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,(function a(l,u,c){var d,f,h,p,m,g,y,v,b,_,E,S;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),E=JSON.stringify(l,o),E===void 0)return E;if(y=s-u.length-c,E.length<=y&&(b=E.replace(e,function(T,A){return A||T+" "}),b.length<=y))return b;if(o!=null&&(l=JSON.parse(E),o=void 0),typeof l=="object"&&l!==null){if(v=u+i,h=[],f=0,Array.isArray(l))for(_="[",d="]",y=l.length;f<y;f++)h.push(a(l[f],v,f===y-1?0:1)||"null");else for(_="{",d="}",g=Object.keys(l),y=g.length;f<y;f++)p=g[f],m=JSON.stringify(p)+": ",S=a(l[p],v,m.length+(f===y-1?0:1)),S!==void 0&&h.push(m+S);if(h.length>0)return[_,i+h.join(`,
`+v),d].join(`
`+u)}return E})(n,"",0)},rU}var Jjt=Qjt();const iU=Ao(Jjt);var lO={exports:{}},sU,Pve;function x8(){if(Pve)return sU;Pve=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return sU={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},sU}var oU,Ove;function _8(){if(Ove)return oU;Ove=1;var e={};return oU=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},oU}var Nve;function sD(){return Nve||(Nve=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=x8(),s=_8();t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={};let d=0;const f="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",i],[f,r]],p=g=>{for(const[y,v]of h)g=g.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return g},m=(g,y,v)=>{const b=p(y),_=d++;s(g,_,y),c[g]=_,l[_]=y,u[_]=b,o[_]=new RegExp(y,v?"g":void 0),a[_]=new RegExp(b,v?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),m("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${f}+`),m("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),m("FULL",`^${l[c.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),m("LOOSE",`^${l[c.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),m("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),m("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",l[c.COERCE],!0),m("COERCERTLFULL",l[c.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(lO,lO.exports)),lO.exports}var aU,Mve;function ore(){if(Mve)return aU;Mve=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return aU=r=>r?typeof r!="object"?e:r:t,aU}var lU,$ve;function b5e(){if($ve)return lU;$ve=1;const e=/^[0-9]+$/,t=(r,i)=>{const s=e.test(r),o=e.test(i);return s&&o&&(r=+r,i=+i),r===i?0:s&&!o?-1:o&&!s?1:r<i?-1:1};return lU={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},lU}var uU,Fve;function Cu(){if(Fve)return uU;Fve=1;const e=_8(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=x8(),{safeRe:r,t:i}=sD(),s=ore(),{compareIdentifiers:o}=b5e();class a{constructor(u,c){if(c=s(c),u instanceof a){if(u.loose===!!c.loose&&u.includePrerelease===!!c.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const d=u.trim().match(c.loose?r[i.LOOSE]:r[i.FULL]);if(!d)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const h=+f;if(h>=0&&h<n)return h}return f}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof a)){if(typeof u=="string"&&u===this.version)return 0;u=new a(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof a||(u=new a(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof a||(u=new a(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let c=0;do{const d=this.prerelease[c],f=u.prerelease[c];if(e("prerelease compare",c,d,f),d===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(d===void 0)return-1;if(d===f)continue;return o(d,f)}while(++c)}compareBuild(u){u instanceof a||(u=new a(u,this.options));let c=0;do{const d=this.build[c],f=u.build[c];if(e("build compare",c,d,f),d===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(d===void 0)return-1;if(d===f)continue;return o(d,f)}while(++c)}inc(u,c,d){if(u.startsWith("pre")){if(!c&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(c){const f=`-${c}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!f||f[1]!==c)throw new Error(`invalid identifier: ${c}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,d),this.inc("pre",c,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,d),this.inc("pre",c,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[f];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(c===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(c){let h=[c,f];d===!1&&(h=[c]),o(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return uU=a,uU}var cU,Lve;function MS(){if(Lve)return cU;Lve=1;const e=Cu();return cU=(n,r,i=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(s){if(!i)return null;throw s}},cU}var dU,jve;function Zjt(){if(jve)return dU;jve=1;const e=MS();return dU=(n,r)=>{const i=e(n,r);return i?i.version:null},dU}var fU,Bve;function eBt(){if(Bve)return fU;Bve=1;const e=MS();return fU=(n,r)=>{const i=e(n.trim().replace(/^[=v]+/,""),r);return i?i.version:null},fU}var hU,zve;function tBt(){if(zve)return hU;zve=1;const e=Cu();return hU=(n,r,i,s,o)=>{typeof i=="string"&&(o=s,s=i,i=void 0);try{return new e(n instanceof e?n.version:n,i).inc(r,s,o).version}catch{return null}},hU}var pU,Vve;function nBt(){if(Vve)return pU;Vve=1;const e=MS();return pU=(n,r)=>{const i=e(n,null,!0),s=e(r,null,!0),o=i.compare(s);if(o===0)return null;const a=o>0,l=a?i:s,u=a?s:i,c=!!l.prerelease.length;if(!!u.prerelease.length&&!c){if(!u.patch&&!u.minor)return"major";if(u.compareMain(l)===0)return u.minor&&!u.patch?"minor":"patch"}const f=c?"pre":"";return i.major!==s.major?f+"major":i.minor!==s.minor?f+"minor":i.patch!==s.patch?f+"patch":"prerelease"},pU}var mU,Uve;function rBt(){if(Uve)return mU;Uve=1;const e=Cu();return mU=(n,r)=>new e(n,r).major,mU}var gU,Hve;function iBt(){if(Hve)return gU;Hve=1;const e=Cu();return gU=(n,r)=>new e(n,r).minor,gU}var yU,qve;function sBt(){if(qve)return yU;qve=1;const e=Cu();return yU=(n,r)=>new e(n,r).patch,yU}var vU,Wve;function oBt(){if(Wve)return vU;Wve=1;const e=MS();return vU=(n,r)=>{const i=e(n,r);return i&&i.prerelease.length?i.prerelease:null},vU}var bU,Gve;function Fh(){if(Gve)return bU;Gve=1;const e=Cu();return bU=(n,r,i)=>new e(n,i).compare(new e(r,i)),bU}var wU,Yve;function aBt(){if(Yve)return wU;Yve=1;const e=Fh();return wU=(n,r,i)=>e(r,n,i),wU}var xU,Kve;function lBt(){if(Kve)return xU;Kve=1;const e=Fh();return xU=(n,r)=>e(n,r,!0),xU}var _U,Xve;function are(){if(Xve)return _U;Xve=1;const e=Cu();return _U=(n,r,i)=>{const s=new e(n,i),o=new e(r,i);return s.compare(o)||s.compareBuild(o)},_U}var EU,Qve;function uBt(){if(Qve)return EU;Qve=1;const e=are();return EU=(n,r)=>n.sort((i,s)=>e(i,s,r)),EU}var CU,Jve;function cBt(){if(Jve)return CU;Jve=1;const e=are();return CU=(n,r)=>n.sort((i,s)=>e(s,i,r)),CU}var SU,Zve;function E8(){if(Zve)return SU;Zve=1;const e=Fh();return SU=(n,r,i)=>e(n,r,i)>0,SU}var TU,e1e;function lre(){if(e1e)return TU;e1e=1;const e=Fh();return TU=(n,r,i)=>e(n,r,i)<0,TU}var AU,t1e;function w5e(){if(t1e)return AU;t1e=1;const e=Fh();return AU=(n,r,i)=>e(n,r,i)===0,AU}var kU,n1e;function x5e(){if(n1e)return kU;n1e=1;const e=Fh();return kU=(n,r,i)=>e(n,r,i)!==0,kU}var IU,r1e;function ure(){if(r1e)return IU;r1e=1;const e=Fh();return IU=(n,r,i)=>e(n,r,i)>=0,IU}var RU,i1e;function cre(){if(i1e)return RU;i1e=1;const e=Fh();return RU=(n,r,i)=>e(n,r,i)<=0,RU}var DU,s1e;function _5e(){if(s1e)return DU;s1e=1;const e=w5e(),t=x5e(),n=E8(),r=ure(),i=lre(),s=cre();return DU=(a,l,u,c)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a===u;case"!==":return typeof a=="object"&&(a=a.version),typeof u=="object"&&(u=u.version),a!==u;case"":case"=":case"==":return e(a,u,c);case"!=":return t(a,u,c);case">":return n(a,u,c);case">=":return r(a,u,c);case"<":return i(a,u,c);case"<=":return s(a,u,c);default:throw new TypeError(`Invalid operator: ${l}`)}},DU}var PU,o1e;function dBt(){if(o1e)return PU;o1e=1;const e=Cu(),t=MS(),{safeRe:n,t:r}=sD();return PU=(s,o)=>{if(s instanceof e)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let a=null;if(!o.rtl)a=s.match(o.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const h=o.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let p;for(;(p=h.exec(s))&&(!a||a.index+a[0].length!==s.length);)(!a||p.index+p[0].length!==a.index+a[0].length)&&(a=p),h.lastIndex=p.index+p[1].length+p[2].length;h.lastIndex=-1}if(a===null)return null;const l=a[2],u=a[3]||"0",c=a[4]||"0",d=o.includePrerelease&&a[5]?`-${a[5]}`:"",f=o.includePrerelease&&a[6]?`+${a[6]}`:"";return t(`${l}.${u}.${c}${d}${f}`,o)},PU}var OU,a1e;function fBt(){if(a1e)return OU;a1e=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(n,r)}return this}}return OU=e,OU}var NU,l1e;function Lh(){if(l1e)return NU;l1e=1;const e=/\s+/g;class t{constructor(j,B){if(B=i(B),j instanceof t)return j.loose===!!B.loose&&j.includePrerelease===!!B.includePrerelease?j:new t(j.raw,B);if(j instanceof s)return this.raw=j.value,this.set=[[j]],this.formatted=void 0,this;if(this.options=B,this.loose=!!B.loose,this.includePrerelease=!!B.includePrerelease,this.raw=j.trim().replace(e," "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(q=>!m(q[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&g(q[0])){this.set=[q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let j=0;j<this.set.length;j++){j>0&&(this.formatted+="||");const B=this.set[j];for(let H=0;H<B.length;H++)H>0&&(this.formatted+=" "),this.formatted+=B[H].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(j){const H=((this.options.includePrerelease&&h)|(this.options.loose&&p))+":"+j,q=r.get(H);if(q)return q;const G=this.options.loose,U=G?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];j=j.replace(U,N(this.options.includePrerelease)),o("hyphen replace",j),j=j.replace(l[u.COMPARATORTRIM],c),o("comparator trim",j),j=j.replace(l[u.TILDETRIM],d),o("tilde trim",j),j=j.replace(l[u.CARETTRIM],f),o("caret trim",j);let L=j.split(" ").map(Q=>v(Q,this.options)).join(" ").split(/\s+/).map(Q=>P(Q,this.options));G&&(L=L.filter(Q=>(o("loose invalid filter",Q,this.options),!!Q.match(l[u.COMPARATORLOOSE])))),o("range list",L);const z=new Map,V=L.map(Q=>new s(Q,this.options));for(const Q of V){if(m(Q))return[Q];z.set(Q.value,Q)}z.size>1&&z.has("")&&z.delete("");const Y=[...z.values()];return r.set(H,Y),Y}intersects(j,B){if(!(j instanceof t))throw new TypeError("a Range is required");return this.set.some(H=>y(H,B)&&j.set.some(q=>y(q,B)&&H.every(G=>q.every(U=>G.intersects(U,B)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new a(j,this.options)}catch{return!1}for(let B=0;B<this.set.length;B++)if(M(this.set[B],j,this.options))return!0;return!1}}NU=t;const n=fBt(),r=new n,i=ore(),s=C8(),o=_8(),a=Cu(),{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:f}=sD(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:p}=x8(),m=O=>O.value==="<0.0.0-0",g=O=>O.value==="",y=(O,j)=>{let B=!0;const H=O.slice();let q=H.pop();for(;B&&H.length;)B=H.every(G=>q.intersects(G,j)),q=H.pop();return B},v=(O,j)=>(o("comp",O,j),O=S(O,j),o("caret",O),O=_(O,j),o("tildes",O),O=A(O,j),o("xrange",O),O=I(O,j),o("stars",O),O),b=O=>!O||O.toLowerCase()==="x"||O==="*",_=(O,j)=>O.trim().split(/\s+/).map(B=>E(B,j)).join(" "),E=(O,j)=>{const B=j.loose?l[u.TILDELOOSE]:l[u.TILDE];return O.replace(B,(H,q,G,U,L)=>{o("tilde",O,H,q,G,U,L);let z;return b(q)?z="":b(G)?z=`>=${q}.0.0 <${+q+1}.0.0-0`:b(U)?z=`>=${q}.${G}.0 <${q}.${+G+1}.0-0`:L?(o("replaceTilde pr",L),z=`>=${q}.${G}.${U}-${L} <${q}.${+G+1}.0-0`):z=`>=${q}.${G}.${U} <${q}.${+G+1}.0-0`,o("tilde return",z),z})},S=(O,j)=>O.trim().split(/\s+/).map(B=>T(B,j)).join(" "),T=(O,j)=>{o("caret",O,j);const B=j.loose?l[u.CARETLOOSE]:l[u.CARET],H=j.includePrerelease?"-0":"";return O.replace(B,(q,G,U,L,z)=>{o("caret",O,q,G,U,L,z);let V;return b(G)?V="":b(U)?V=`>=${G}.0.0${H} <${+G+1}.0.0-0`:b(L)?G==="0"?V=`>=${G}.${U}.0${H} <${G}.${+U+1}.0-0`:V=`>=${G}.${U}.0${H} <${+G+1}.0.0-0`:z?(o("replaceCaret pr",z),G==="0"?U==="0"?V=`>=${G}.${U}.${L}-${z} <${G}.${U}.${+L+1}-0`:V=`>=${G}.${U}.${L}-${z} <${G}.${+U+1}.0-0`:V=`>=${G}.${U}.${L}-${z} <${+G+1}.0.0-0`):(o("no pr"),G==="0"?U==="0"?V=`>=${G}.${U}.${L}${H} <${G}.${U}.${+L+1}-0`:V=`>=${G}.${U}.${L}${H} <${G}.${+U+1}.0-0`:V=`>=${G}.${U}.${L} <${+G+1}.0.0-0`),o("caret return",V),V})},A=(O,j)=>(o("replaceXRanges",O,j),O.split(/\s+/).map(B=>R(B,j)).join(" ")),R=(O,j)=>{O=O.trim();const B=j.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return O.replace(B,(H,q,G,U,L,z)=>{o("xRange",O,H,q,G,U,L,z);const V=b(G),Y=V||b(U),Q=Y||b(L),ne=Q;return q==="="&&ne&&(q=""),z=j.includePrerelease?"-0":"",V?q===">"||q==="<"?H="<0.0.0-0":H="*":q&&ne?(Y&&(U=0),L=0,q===">"?(q=">=",Y?(G=+G+1,U=0,L=0):(U=+U+1,L=0)):q==="<="&&(q="<",Y?G=+G+1:U=+U+1),q==="<"&&(z="-0"),H=`${q+G}.${U}.${L}${z}`):Y?H=`>=${G}.0.0${z} <${+G+1}.0.0-0`:Q&&(H=`>=${G}.${U}.0${z} <${G}.${+U+1}.0-0`),o("xRange return",H),H})},I=(O,j)=>(o("replaceStars",O,j),O.trim().replace(l[u.STAR],"")),P=(O,j)=>(o("replaceGTE0",O,j),O.trim().replace(l[j.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=O=>(j,B,H,q,G,U,L,z,V,Y,Q,ne)=>(b(H)?B="":b(q)?B=`>=${H}.0.0${O?"-0":""}`:b(G)?B=`>=${H}.${q}.0${O?"-0":""}`:U?B=`>=${B}`:B=`>=${B}${O?"-0":""}`,b(V)?z="":b(Y)?z=`<${+V+1}.0.0-0`:b(Q)?z=`<${V}.${+Y+1}.0-0`:ne?z=`<=${V}.${Y}.${Q}-${ne}`:O?z=`<${V}.${Y}.${+Q+1}-0`:z=`<=${z}`,`${B} ${z}`.trim()),M=(O,j,B)=>{for(let H=0;H<O.length;H++)if(!O[H].test(j))return!1;if(j.prerelease.length&&!B.includePrerelease){for(let H=0;H<O.length;H++)if(o(O[H].semver),O[H].semver!==s.ANY&&O[H].semver.prerelease.length>0){const q=O[H].semver;if(q.major===j.major&&q.minor===j.minor&&q.patch===j.patch)return!0}return!1}return!0};return NU}var MU,u1e;function C8(){if(u1e)return MU;u1e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}MU=t;const n=ore(),{safeRe:r,t:i}=sD(),s=_5e(),o=_8(),a=Cu(),l=Lh();return MU}var $U,c1e;function S8(){if(c1e)return $U;c1e=1;const e=Lh();return $U=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},$U}var FU,d1e;function hBt(){if(d1e)return FU;d1e=1;const e=Lh();return FU=(n,r)=>new e(n,r).set.map(i=>i.map(s=>s.value).join(" ").trim().split(" ")),FU}var LU,f1e;function pBt(){if(f1e)return LU;f1e=1;const e=Cu(),t=Lh();return LU=(r,i,s)=>{let o=null,a=null,l=null;try{l=new t(i,s)}catch{return null}return r.forEach(u=>{l.test(u)&&(!o||a.compare(u)===-1)&&(o=u,a=new e(o,s))}),o},LU}var jU,h1e;function mBt(){if(h1e)return jU;h1e=1;const e=Cu(),t=Lh();return jU=(r,i,s)=>{let o=null,a=null,l=null;try{l=new t(i,s)}catch{return null}return r.forEach(u=>{l.test(u)&&(!o||a.compare(u)===1)&&(o=u,a=new e(o,s))}),o},jU}var BU,p1e;function gBt(){if(p1e)return BU;p1e=1;const e=Cu(),t=Lh(),n=E8();return BU=(i,s)=>{i=new t(i,s);let o=new e("0.0.0");if(i.test(o)||(o=new e("0.0.0-0"),i.test(o)))return o;o=null;for(let a=0;a<i.set.length;++a){const l=i.set[a];let u=null;l.forEach(c=>{const d=new e(c.semver.version);switch(c.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!u||n(d,u))&&(u=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),u&&(!o||n(o,u))&&(o=u)}return o&&i.test(o)?o:null},BU}var zU,m1e;function yBt(){if(m1e)return zU;m1e=1;const e=Lh();return zU=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},zU}var VU,g1e;function dre(){if(g1e)return VU;g1e=1;const e=Cu(),t=C8(),{ANY:n}=t,r=Lh(),i=S8(),s=E8(),o=lre(),a=cre(),l=ure();return VU=(c,d,f,h)=>{c=new e(c,h),d=new r(d,h);let p,m,g,y,v;switch(f){case">":p=s,m=a,g=o,y=">",v=">=";break;case"<":p=o,m=l,g=s,y="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(c,d,h))return!1;for(let b=0;b<d.set.length;++b){const _=d.set[b];let E=null,S=null;if(_.forEach(T=>{T.semver===n&&(T=new t(">=0.0.0")),E=E||T,S=S||T,p(T.semver,E.semver,h)?E=T:g(T.semver,S.semver,h)&&(S=T)}),E.operator===y||E.operator===v||(!S.operator||S.operator===y)&&m(c,S.semver))return!1;if(S.operator===v&&g(c,S.semver))return!1}return!0},VU}var UU,y1e;function vBt(){if(y1e)return UU;y1e=1;const e=dre();return UU=(n,r,i)=>e(n,r,">",i),UU}var HU,v1e;function bBt(){if(v1e)return HU;v1e=1;const e=dre();return HU=(n,r,i)=>e(n,r,"<",i),HU}var qU,b1e;function wBt(){if(b1e)return qU;b1e=1;const e=Lh();return qU=(n,r,i)=>(n=new e(n,i),r=new e(r,i),n.intersects(r,i)),qU}var WU,w1e;function xBt(){if(w1e)return WU;w1e=1;const e=S8(),t=Fh();return WU=(n,r,i)=>{const s=[];let o=null,a=null;const l=n.sort((f,h)=>t(f,h,i));for(const f of l)e(f,r,i)?(a=f,o||(o=f)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const u=[];for(const[f,h]of s)f===h?u.push(f):!h&&f===l[0]?u.push("*"):h?f===l[0]?u.push(`<=${h}`):u.push(`${f} - ${h}`):u.push(`>=${f}`);const c=u.join(" || "),d=typeof r.raw=="string"?r.raw:String(r);return c.length<d.length?c:r},WU}var GU,x1e;function _Bt(){if(x1e)return GU;x1e=1;const e=Lh(),t=C8(),{ANY:n}=t,r=S8(),i=Fh(),s=(d,f,h={})=>{if(d===f)return!0;d=new e(d,h),f=new e(f,h);let p=!1;e:for(const m of d.set){for(const g of f.set){const y=l(m,g,h);if(p=p||y!==null,y)continue e}if(p)return!1}return!0},o=[new t(">=0.0.0-0")],a=[new t(">=0.0.0")],l=(d,f,h)=>{if(d===f)return!0;if(d.length===1&&d[0].semver===n){if(f.length===1&&f[0].semver===n)return!0;h.includePrerelease?d=o:d=a}if(f.length===1&&f[0].semver===n){if(h.includePrerelease)return!0;f=a}const p=new Set;let m,g;for(const A of d)A.operator===">"||A.operator===">="?m=u(m,A,h):A.operator==="<"||A.operator==="<="?g=c(g,A,h):p.add(A.semver);if(p.size>1)return null;let y;if(m&&g){if(y=i(m.semver,g.semver,h),y>0)return null;if(y===0&&(m.operator!==">="||g.operator!=="<="))return null}for(const A of p){if(m&&!r(A,String(m),h)||g&&!r(A,String(g),h))return null;for(const R of f)if(!r(A,String(R),h))return!1;return!0}let v,b,_,E,S=g&&!h.includePrerelease&&g.semver.prerelease.length?g.semver:!1,T=m&&!h.includePrerelease&&m.semver.prerelease.length?m.semver:!1;S&&S.prerelease.length===1&&g.operator==="<"&&S.prerelease[0]===0&&(S=!1);for(const A of f){if(E=E||A.operator===">"||A.operator===">=",_=_||A.operator==="<"||A.operator==="<=",m){if(T&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===T.major&&A.semver.minor===T.minor&&A.semver.patch===T.patch&&(T=!1),A.operator===">"||A.operator===">="){if(v=u(m,A,h),v===A&&v!==m)return!1}else if(m.operator===">="&&!r(m.semver,String(A),h))return!1}if(g){if(S&&A.semver.prerelease&&A.semver.prerelease.length&&A.semver.major===S.major&&A.semver.minor===S.minor&&A.semver.patch===S.patch&&(S=!1),A.operator==="<"||A.operator==="<="){if(b=c(g,A,h),b===A&&b!==g)return!1}else if(g.operator==="<="&&!r(g.semver,String(A),h))return!1}if(!A.operator&&(g||m)&&y!==0)return!1}return!(m&&_&&!g&&y!==0||g&&E&&!m&&y!==0||T||S)},u=(d,f,h)=>{if(!d)return f;const p=i(d.semver,f.semver,h);return p>0?d:p<0||f.operator===">"&&d.operator===">="?f:d},c=(d,f,h)=>{if(!d)return f;const p=i(d.semver,f.semver,h);return p<0?d:p>0||f.operator==="<"&&d.operator==="<="?f:d};return GU=s,GU}var YU,_1e;function EBt(){if(_1e)return YU;_1e=1;const e=sD(),t=x8(),n=Cu(),r=b5e(),i=MS(),s=Zjt(),o=eBt(),a=tBt(),l=nBt(),u=rBt(),c=iBt(),d=sBt(),f=oBt(),h=Fh(),p=aBt(),m=lBt(),g=are(),y=uBt(),v=cBt(),b=E8(),_=lre(),E=w5e(),S=x5e(),T=ure(),A=cre(),R=_5e(),I=dBt(),P=C8(),N=Lh(),M=S8(),O=hBt(),j=pBt(),B=mBt(),H=gBt(),q=yBt(),G=dre(),U=vBt(),L=bBt(),z=wBt(),V=xBt(),Y=_Bt();return YU={parse:i,valid:s,clean:o,inc:a,diff:l,major:u,minor:c,patch:d,prerelease:f,compare:h,rcompare:p,compareLoose:m,compareBuild:g,sort:y,rsort:v,gt:b,lt:_,eq:E,neq:S,gte:T,lte:A,cmp:R,coerce:I,Comparator:P,Range:N,satisfies:M,toComparators:O,maxSatisfying:j,minSatisfying:B,minVersion:H,validRange:q,outside:G,gtr:U,ltr:L,intersects:z,simplifyRange:V,subset:Y,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},YU}var E5e=EBt();function mc(e,t,n){return e.fields=t||[],e.fname=n,e}function Bs(e){return e==null?null:e.fname}function Al(e){return e==null?null:e.fields}function C5e(e){return e.length===1?CBt(e[0]):SBt(e)}const CBt=e=>function(t){return t[e]},SBt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function at(e){throw Error(e)}function Tm(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||at("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&at("Access path missing closing bracket: "+e),r&&at("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function Zd(e,t,n){const r=Tm(e);return e=r.length===1?r[0]:e,mc((n&&n.get||C5e)(r),[e],t||e)}const oD=Zd("id"),Ol=mc(e=>e,[],"identity"),Ay=mc(()=>0,[],"zero"),$S=mc(()=>1,[],"one"),ef=mc(()=>!0,[],"true"),fy=mc(()=>!1,[],"false");function TBt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const S5e=0,fre=1,hre=2,T5e=3,A5e=4;function pre(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TBt,r=e||S5e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=fre&&n(t||"error","ERROR",arguments),this},warn(){return r>=hre&&n(t||"warn","WARN",arguments),this},info(){return r>=T5e&&n(t||"log","INFO",arguments),this},debug(){return r>=A5e&&n(t||"log","DEBUG",arguments),this}}}var ut=Array.isArray;function qt(e){return e===Object(e)}const E1e=e=>e!=="__proto__";function FS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=ABt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;LS(r,s,i[s],o)}return r},{})}function LS(e,t,n,r){if(!E1e(t))return;let i,s;if(qt(n)&&!ut(n)){s=qt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?LS(s,i,n[i]):E1e(i)&&(s[i]=n[i])}else e[t]=n}function ABt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function zr(e){return e[e.length-1]}function Cl(e){return e==null||e===""?null:+e}const k5e=e=>t=>e*Math.exp(t),I5e=e=>t=>Math.log(e*t),R5e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),D5e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,q5=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function T8(e,t,n,r){const i=n(e[0]),s=n(zr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function P5e(e,t){return T8(e,t,Cl,Ol)}function O5e(e,t){var n=Math.sign(e[0]);return T8(e,t,I5e(n),k5e(n))}function N5e(e,t,n){return T8(e,t,q5(n),q5(1/n))}function M5e(e,t,n){return T8(e,t,R5e(n),D5e(n))}function A8(e,t,n,r,i){const s=r(e[0]),o=r(zr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function mre(e,t,n){return A8(e,t,n,Cl,Ol)}function gre(e,t,n){const r=Math.sign(e[0]);return A8(e,t,n,I5e(r),k5e(r))}function W5(e,t,n,r){return A8(e,t,n,q5(r),q5(1/r))}function yre(e,t,n,r){return A8(e,t,n,R5e(r),D5e(r))}function $5e(e){return 1+~~(new Date(e).getMonth()/3)}function F5e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ht(e){return e!=null?ut(e)?e:[e]:[]}function L5e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function pr(e){return typeof e=="function"}const kBt="descending";function vre(e,t,n){n=n||{},t=Ht(t)||[];const r=[],i=[],s={},o=n.comparator||IBt;return Ht(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===kBt?-1:1),i.push(a=pr(a)?a:Zd(a,null,n)),(Al(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:mc(o(i,r),Object.keys(s))}const aD=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),IBt=(e,t)=>e.length===1?RBt(e[0],t[0]):DBt(e,t,e.length),RBt=(e,t)=>function(n,r){return aD(e(n),e(r))*t},DBt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=aD(s(r),s(i));return o*t[a]});function Nl(e){return pr(e)?e:()=>e}function bre(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function hr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function om(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function j5e(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}function Qt(e,t){return Object.hasOwn(e,t)}const uO={};function jS(e){let t={},n;function r(s){return Qt(t,s)&&t[s]!==uO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===uO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=uO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==uO&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function B5e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=zr(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=o?r:c<=o?i:s}function $t(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),hr(r,n)}function iE(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function h1(e){return typeof e=="boolean"}function rv(e){return Object.prototype.toString.call(e)==="[object Date]"}function z5e(e){return e&&pr(e[Symbol.iterator])}function ci(e){return typeof e=="number"}function wre(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Wt(e){return typeof e=="string"}function xre(e,t,n){e&&(e=t?Ht(e).map(a=>a.replace(/\\(.)/g,"$1")):Ht(e));const r=e&&e.length,i=n&&n.get||C5e,s=a=>i(t?[a]:Tm(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return mc(o,e,"key")}function V5e(e,t){const n=e[0],r=zr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const PBt=1e4;function U5e(e){e=+e||PBt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Qt(t,o)||Qt(n,o),get:o=>Qt(t,o)?t[o]:Qt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Qt(t,o)?t[o]=a:s(o,a)}}function H5e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function fA(e,t){let n="";for(;--t>=0;)n+=e;return n}function q5e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?fA(i,o)+s:r==="center"?fA(i,~~(o/2))+s+fA(i,Math.ceil(o/2)):s+fA(i,o)}function lD(e){return e&&zr(e)-e[0]||0}function Ot(e){return ut(e)?"["+e.map(Ot)+"]":qt(e)||Wt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function _re(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const OBt=e=>ci(e)||rv(e)?e:Date.parse(e);function Ere(e,t){return t=t||OBt,e==null||e===""?null:t(e)}function Cre(e){return e==null||e===""?null:e+""}function vh(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function W5e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function by(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function NBt(e){return e}function MBt(e){if(e==null)return NBt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*r+s,d[1]=(n+=a[1])*i+o;u<c;)d[u]=a[u],++u;return d}}function $Bt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function FBt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return C1e(e,n)})}:C1e(e,t)}function C1e(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=G5e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function G5e(e,t){var n=MBt(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&$Bt(d,p)}function s(c){return n(c)}function o(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}function u(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=s(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(s);break;case"LineString":f=o(c.arcs);break;case"MultiLineString":f=c.arcs.map(o);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}return u(t)}function LBt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++o],t[o]=u,t[c]=f)}),t.forEach(function(u){var c=a(u),d=c[0],f=c[1],h,p;if(h=i[d])if(delete i[h.end],h.push(u),h.end=f,p=r[f]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(u),h.start=d,p=i[d]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=d]=i[h.end=f]=h});function a(u){var c=e.arcs[u<0?~u:u],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function jBt(e){return G5e(e,BBt.apply(this,arguments))}function BBt(e,t,n){var r,i,s;if(arguments.length>1)r=zBt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:LBt(e,r)}}function zBt(e,t,n){var r=[],i=[],s;function o(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const Wa="year",oc="quarter",kl="month",Ho="week",ac="date",xl="day",am="dayofyear",Xc="hours",Qc="minutes",tf="seconds",bh="milliseconds",Sre=[Wa,oc,kl,Ho,ac,xl,am,Xc,Qc,tf,bh],KU=Sre.reduce((e,t,n)=>(e[t]=1+n,e),{});function Tre(e){const t=Ht(e).slice(),n={};return t.length||at("Missing time unit."),t.forEach(i=>{Qt(KU,i)?n[i]=1:at(`Invalid time unit: ${i}.`)}),(n[Ho]||n[xl]?1:0)+(n[oc]||n[kl]||n[ac]?1:0)+(n[am]?1:0)>1&&at(`Incompatible time units: ${e}`),t.sort((i,s)=>KU[i]-KU[s]),t}const VBt={[Wa]:"%Y ",[oc]:"Q%q ",[kl]:"%b ",[ac]:"%d ",[Ho]:"W%U ",[xl]:"%a ",[am]:"%j ",[Xc]:"%H:00",[Qc]:"00:%M",[tf]:":%S",[bh]:".%L",[`${Wa}-${kl}`]:"%Y-%m ",[`${Wa}-${kl}-${ac}`]:"%Y-%m-%d ",[`${Xc}-${Qc}`]:"%H:%M"};function Y5e(e,t){const n=hr({},VBt,t),r=Tre(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const _b=new Date;function Are(e){return _b.setFullYear(e),_b.setMonth(0),_b.setDate(1),_b.setHours(0,0,0,0),_b}function K5e(e){return Q5e(new Date(e))}function X5e(e){return gK(new Date(e))}function Q5e(e){return Pg.count(Are(e.getFullYear())-1,e)}function gK(e){return RS.count(Are(e.getFullYear())-1,e)}function yK(e){return Are(e).getDay()}function UBt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function J5e(e){return e$e(new Date(e))}function Z5e(e){return vK(new Date(e))}function e$e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return tv.count(t-1,e)}function vK(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return DS.count(t-1,e)}function bK(e){return _b.setTime(Date.UTC(e,0,1)),_b.getUTCDay()}function HBt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function t$e(e,t,n,r,i){const s=t||1,o=zr(e),a=(y,v,b)=>(b=b||y,qBt(n[b],r[b],y===o&&s,v)),l=new Date,u=vh(e),c=u[Wa]?a(Wa):Nl(2012),d=u[kl]?a(kl):u[oc]?a(oc):Ay,f=u[Ho]&&u[xl]?a(xl,1,Ho+xl):u[Ho]?a(Ho,1):u[xl]?a(xl,1):u[ac]?a(ac,1):u[am]?a(am,1):$S,h=u[Xc]?a(Xc):Ay,p=u[Qc]?a(Qc):Ay,m=u[tf]?a(tf):Ay,g=u[bh]?a(bh):Ay;return function(y){l.setTime(+y);const v=c(l);return i(v,d(l),f(l,v),h(l),p(l),m(l),g(l))}}function qBt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function hC(e,t,n){return t+e*7-(n+6)%7}const WBt={[Wa]:e=>e.getFullYear(),[oc]:e=>Math.floor(e.getMonth()/3),[kl]:e=>e.getMonth(),[ac]:e=>e.getDate(),[Xc]:e=>e.getHours(),[Qc]:e=>e.getMinutes(),[tf]:e=>e.getSeconds(),[bh]:e=>e.getMilliseconds(),[am]:e=>Q5e(e),[Ho]:e=>gK(e),[Ho+xl]:(e,t)=>hC(gK(e),e.getDay(),yK(t)),[xl]:(e,t)=>hC(1,e.getDay(),yK(t))},GBt={[oc]:e=>3*e,[Ho]:(e,t)=>hC(e,0,yK(t))};function n$e(e,t){return t$e(e,t||1,WBt,GBt,UBt)}const YBt={[Wa]:e=>e.getUTCFullYear(),[oc]:e=>Math.floor(e.getUTCMonth()/3),[kl]:e=>e.getUTCMonth(),[ac]:e=>e.getUTCDate(),[Xc]:e=>e.getUTCHours(),[Qc]:e=>e.getUTCMinutes(),[tf]:e=>e.getUTCSeconds(),[bh]:e=>e.getUTCMilliseconds(),[am]:e=>e$e(e),[Ho]:e=>vK(e),[xl]:(e,t)=>hC(1,e.getUTCDay(),bK(t)),[Ho+xl]:(e,t)=>hC(vK(e),e.getUTCDay(),bK(t))},KBt={[oc]:e=>3*e,[Ho]:(e,t)=>hC(e,0,bK(t))};function r$e(e,t){return t$e(e,t||1,YBt,KBt,HBt)}const XBt={[Wa]:rm,[oc]:fI.every(3),[kl]:fI,[Ho]:RS,[ac]:Pg,[xl]:Pg,[am]:Pg,[Xc]:i8,[Qc]:n8,[tf]:vg,[bh]:uC},QBt={[Wa]:im,[oc]:hI.every(3),[kl]:hI,[Ho]:DS,[ac]:tv,[xl]:tv,[am]:tv,[Xc]:s8,[Qc]:r8,[tf]:vg,[bh]:uC};function BS(e){return XBt[e]}function zS(e){return QBt[e]}function i$e(e,t,n){return e?e.offset(t,n):void 0}function s$e(e,t,n){return i$e(BS(e),t,n)}function o$e(e,t,n){return i$e(zS(e),t,n)}function a$e(e,t,n,r){return e?e.range(t,n,r):void 0}function l$e(e,t,n,r){return a$e(BS(e),t,n,r)}function u$e(e,t,n,r){return a$e(zS(e),t,n,r)}const hA=1e3,pA=hA*60,mA=pA*60,k8=mA*24,JBt=k8*7,S1e=k8*30,wK=k8*365,c$e=[Wa,kl,ac,Xc,Qc,tf,bh],gA=c$e.slice(0,-1),yA=gA.slice(0,-1),vA=yA.slice(0,-1),ZBt=vA.slice(0,-1),e9t=[Wa,Ho],T1e=[Wa,kl],d$e=[Wa],d2=[[gA,1,hA],[gA,5,5*hA],[gA,15,15*hA],[gA,30,30*hA],[yA,1,pA],[yA,5,5*pA],[yA,15,15*pA],[yA,30,30*pA],[vA,1,mA],[vA,3,3*mA],[vA,6,6*mA],[vA,12,12*mA],[ZBt,1,k8],[e9t,1,JBt],[T1e,1,S1e],[T1e,3,3*S1e],[d$e,1,wK]];function f$e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(lD(t))/n;let i=SS(a=>a[2]).right(d2,r),s,o;return i===d2.length?(s=d$e,o=Sv(t[0]/wK,t[1]/wK,n)):i?(i=d2[r/d2[i-1][2]<d2[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=c$e,o=Math.max(Sv(t[0],t[1],n),1)),{units:s,step:o}}function bA(e){const t={};return n=>t[n]||(t[n]=e(n))}function t9t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=n9t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function n9t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function h$e(e){const t=bA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=mw(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return t9t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=mw(o??",f");const a=Sv(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=S4e(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=T4e(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=C4e(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let xK;p$e();function p$e(){return xK=h$e({format:AS,formatPrefix:fne})}function m$e(e){return h$e(E4e(e))}function G5(e){return arguments.length?xK=m$e(e):xK}function A1e(e,t,n){n=n||{},qt(n)||at(`Invalid time multi-format specifier: ${n}`);const r=t(tf),i=t(Qc),s=t(Xc),o=t(ac),a=t(Ho),l=t(kl),u=t(oc),c=t(Wa),d=e(n[bh]||".%L"),f=e(n[tf]||":%S"),h=e(n[Qc]||"%I:%M"),p=e(n[Xc]||"%I %p"),m=e(n[ac]||n[xl]||"%a %d"),g=e(n[Ho]||"%b %d"),y=e(n[kl]||"%B"),v=e(n[oc]||"%B"),b=e(n[Wa]||"%Y");return _=>(r(_)<_?d:i(_)<_?f:s(_)<_?h:o(_)<_?p:l(_)<_?a(_)<_?m:g:c(_)<_?u(_)<_?y:v:b)(_)}function g$e(e){const t=bA(e.format),n=bA(e.utcFormat);return{timeFormat:r=>Wt(r)?t(r):A1e(t,BS,r),utcFormat:r=>Wt(r)?n(r):A1e(n,zS,r),timeParse:bA(e.parse),utcParse:bA(e.utcParse)}}let _K;y$e();function y$e(){return _K=g$e({format:Tne,parse:jMe,utcFormat:o8,utcParse:BMe})}function v$e(e){return g$e(NMe(e))}function xI(e){return arguments.length?_K=v$e(e):_K}const EK=(e,t)=>hr({},e,t);function b$e(e,t){const n=e?m$e(e):G5(),r=t?v$e(t):xI();return EK(n,r)}function kre(e,t){const n=arguments.length;return n&&n!==2&&at("defaultLocale expects either zero or two arguments."),n?EK(G5(e),xI(t)):EK(G5(),xI())}function r9t(){return p$e(),y$e(),kre()}const i9t=/^(data:|([A-Za-z]+:)?\/\/)/,s9t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,o9t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,k1e="file://";function a9t(e,t){return n=>({options:n||{},sanitize:u9t,load:l9t,fileAccess:!1,file:c9t(t),http:f9t(e)})}async function l9t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function u9t(e,t){t=hr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=s9t.test(e.replace(o9t,""));(e==null||typeof e!="string"||!a)&&at("Sanitize failure, invalid URI: "+Ot(e));const l=i9t.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(k1e))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(k1e.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function c9t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):d9t}async function d9t(){at("No file system access.")}function f9t(e){return e?async function(t,n){const r=hr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?pr(s[i])?s[i]():s.text():at(s.status+""+s.statusText)}:h9t}async function h9t(){at("No HTTP fetch method available.")}const p9t=e=>e!=null&&e===e,m9t=e=>e==="true"||e==="false"||e===!0||e===!1,g9t=e=>!Number.isNaN(Date.parse(e)),w$e=e=>!Number.isNaN(+e)&&!(e instanceof Date),y9t=e=>w$e(e)&&Number.isInteger(+e),CK={boolean:_re,integer:Cl,number:Cl,date:Ere,string:Cre,unknown:Ol},cO=[m9t,y9t,w$e,g9t],v9t=["boolean","integer","number","date"];function x$e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=cO.length,i=cO.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&p9t(l)&&!cO[a](l)&&(i[a]=0,++o,o===cO.length))return"string";return v9t[i.reduce((s,o)=>s===0?o:s,0)-1]}function _$e(e,t){return t.reduce((n,r)=>(n[r]=x$e(e,r),n),{})}function I1e(e){const t=function(n,r){const i={delimiter:e};return Ire(n,r?hr(r,i):i)};return t.responseType="text",t}function Ire(e,t){return t.header&&(e=t.header.map(Ot).join(t.delimiter)+`
`+e),w4e(t.delimiter).parse(e+"")}Ire.responseType="text";function b9t(e){return typeof Buffer=="function"&&pr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Rre(e,t){const n=t&&t.property?Zd(t.property):Ol;return qt(e)&&!b9t(e)?w9t(n(e),t):n(JSON.parse(e))}Rre.responseType="json";function w9t(e,t){return!ut(e)&&z5e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const x9t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function E$e(e,t){let n,r,i,s;return e=Rre(e,t),t&&t.feature?(n=FBt,i=t.feature):t&&t.mesh?(n=jBt,i=t.mesh,s=x9t[t.filter]):at("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):at("Invalid TopoJSON object: "+i),r&&r.features||[r]}E$e.responseType="json";const sM={dsv:Ire,csv:I1e(","),tsv:I1e("	"),json:Rre,topojson:E$e};function Dre(e,t){return arguments.length>1?(sM[e]=t,this):Qt(sM,e)?sM[e]:null}function C$e(e){const t=Dre(e);return t&&t.responseType||"text"}function S$e(e,t,n,r){t=t||{};const i=Dre(t.type||"json");return i||at("Unknown data format type: "+t.type),e=i(e,t),t.parse&&_9t(e,t.parse,n,r),Qt(e,"columns")&&delete e.columns,e}function _9t(e,t,n,r){if(!e.length)return;const i=xI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,c,d;t==="auto"&&(t=_$e(e,s)),s=Object.keys(t);const f=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!CK[p])throw Error("Illegal format pattern: "+h+":"+p);return CK[p]});for(l=0,c=e.length,d=s.length;l<c;++l)for(o=e[l],u=0;u<d;++u)a=s[u],o[a]=f[u](o[a])}const I8=a9t(typeof fetch<"u"&&fetch,null);function R8(e){const t=e||Ol,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function oM(e,t){try{await t(e)}catch(n){e.error(n)}}const T$e=Symbol("vega_id");let E9t=1;function D8(e){return!!(e&&Cn(e))}function Cn(e){return e[T$e]}function A$e(e,t){return e[T$e]=t,e}function yi(e){const t=e===Object(e)?e:{data:e};return Cn(t)?t:A$e(t,E9t++)}function Pre(e){return P8(e,yi({}))}function P8(e,t){for(const n in e)t[n]=e[n];return t}function k$e(e,t){return A$e(t,Cn(e))}function cx(e,t){return e?t?(n,r)=>e(n,r)||Cn(t(n))-Cn(t(r)):(n,r)=>e(n,r)||Cn(n)-Cn(r):null}function I$e(e){return e&&e.constructor===dx}function dx(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:dx,insert(a){const l=Ht(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=pr(a)?r:t,u=Ht(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:Nl(u)};return pr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return pr(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,m,g;for(d=0,f=l.length;d<f;++d)u[Cn(l[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],u[Cn(m)]=-1;for(d=0,f=r.length;d<f;++d)p=r[d],l.forEach(v=>{p(v)&&(u[Cn(v)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],g=Cn(m),u[g]?u[g]=1:a.add.push(yi(e[d]));for(d=0,f=l.length;d<f;++d)m=l[d],u[Cn(m)]<0&&a.rem.push(m);function y(v,b,_){_?v[b]=_(v):a.encode=b,o||(c[Cn(v)]=v)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,g=u[Cn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(d=0,f=i.length;d<f;++d)h=i[d],p=h.filter,l.forEach(v=>{p(v)&&u[Cn(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(v=>u[Cn(v)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const aM="_:mod:_";function O8(){Object.defineProperty(this,aM,{writable:!0,value:{}})}O8.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[aM];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=ut(n)?1+n.length:-1),i},modified(e,t){const n=this[aM];if(arguments.length){if(ut(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[aM]={},this}};let C9t=0;const S9t="pulse",T9t=new O8,A9t=1,k9t=2;function Li(e,t,n,r){this.id=++C9t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function R1e(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Li.prototype={targets(){return this._targets||(this._targets=R8(oD))},set(e){return this.value!==e?(this.value=e,1):0},skip:R1e(A9t),modified:R1e(k9t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new O8,i=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(d,f,h)=>{h instanceof Li?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(o in e)if(a=e[o],o===S9t)Ht(a).forEach(d=>{d instanceof Li?d!==this&&(d.targets().add(this),s.push(d)):at("Pulse parameters must be operator instances.")}),this.source=a;else if(ut(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||T9t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function I9t(e,t,n,r){let i=1,s;return e instanceof Li?s=e:e&&e.prototype instanceof Li?s=new e:pr(e)?s=new Li(null,e):(i=0,s=new Li(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function R9t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let D9t=0;function N8(e,t,n){this.id=++D9t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function hy(e,t,n){return new N8(e,t,n)}N8.prototype={_filter:ef,_apply:Ol,targets(){return this._targets||(this._targets=R8(oD))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=hy(e);return this.targets().add(t),t},apply(e){const t=hy(null,e);return this.targets().add(t),t},merge(){const e=hy();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=hy();return this.targets().add(hy(null,null,bre(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(hy(null,null,()=>n=!0)),t.targets().add(hy(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ef,this._targets=null}};function P9t(e,t,n,r){const i=this,s=hy(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Ht(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function O9t(e,t){const n=this.locale();return S$e(e,t,n.timeParse,n.utcParse)}function N9t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function M9t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:C$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function $9t(e,t,n){const r=this,i=r._pending||F9t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(ef).insert(s.data||[])),i.done(),s}function F9t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const L9t={skip:!0};function j9t(e,t,n,r,i){return(e instanceof Li?z9t:B9t)(this,e,t,n,r,i),this}function B9t(e,t,n,r,i,s){const o=hr({},s,L9t);let a,l;pr(n)||(n=Nl(n)),r===void 0?a=u=>e.touch(n(u)):pr(r)?(l=new Li(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;I$e(d)?e.pulse(c,d,s):e.update(c,d,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function z9t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Li(null,V9t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function V9t(e,t){return t=pr(t)?t:Nl(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function U9t(e){e.rank=++this._rank}function H9t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&at("Cycle detected in dataflow graph.")}const Y5={},vp=1,wy=2,ig=4,q9t=vp|wy,D1e=vp|ig,v_=vp|wy|ig,P1e=8,f2=16,O1e=32,N1e=64;function iv(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function XU(e,t){const n=[];return by(e,t,r=>n.push(r)),n}function M1e(e,t){const n={};return e.visit(t,r=>{n[Cn(r)]=1}),r=>n[Cn(r)]?null:r}function dO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}iv.prototype={StopPropagation:Y5,ADD:vp,REM:wy,MOD:ig,ADD_REM:q9t,ADD_MOD:D1e,ALL:v_,REFLOW:P1e,SOURCE:f2,NO_SOURCE:O1e,NO_FIELDS:N1e,fork(e){return new iv(this.dataflow).init(this,e)},clone(){const e=this.fork(v_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(v_|f2)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new iv(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&N1e)&&(n.fields=e.fields),t&vp?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&wy?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ig?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&O1e?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||v_;return t&vp&&this.add.length||t&wy&&this.rem.length||t&ig&&this.mod.length},reflow(e){if(e)return this.fork(v_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ig,M1e(this,vp))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ut(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ut(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&vp&&(n.addF=dO(n.addF,t)),e&wy&&(n.remF=dO(n.remF,t)),e&ig&&(n.modF=dO(n.modF,t)),e&f2&&(n.srcF=dO(n.srcF,t)),n},materialize(e){e=e||v_;const t=this;return e&vp&&t.addF&&(t.add=XU(t.add,t.addF),t.addF=null),e&wy&&t.remF&&(t.rem=XU(t.rem,t.remF),t.remF=null),e&ig&&t.modF&&(t.mod=XU(t.mod,t.modF),t.modF=null),e&f2&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&f2)return by(n.source,n.srcF,r),n;e&vp&&by(n.add,n.addF,r),e&wy&&by(n.rem,n.remF,r),e&ig&&by(n.mod,n.modF,r);const i=n.source;if(e&P1e&&i){const s=n.add.length+n.mod.length;s===i.length||(s?by(i,M1e(n,D1e),r):by(i,n.srcF,r))}return n}};function Ore(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}$t(Ore,iv,{fork(e){const t=new iv(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ut(e)?e.some(r=>n[r]):n[e]:0},filter(){at("MultiPulse does not support filtering.")},materialize(){at("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function W9t(e,t,n){const r=this,i=[];if(r._pulse)return R$e(r);if(r._pending&&await r._pending,t&&await oM(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new iv(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=R8(oD);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=Y5),l!==Y5&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await oM(r,c[d].callback)}return n&&await oM(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function G9t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function Y9t(e,t,n){return this._pulse?R$e(this):(this.evaluate(e,t,n),this)}function K9t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function R$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function X9t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function Q9t(e,t){const n=e.source,r=this._clock;return n&&ut(n)?new Ore(this,r,n.map(i=>i.pulse),t):this._input[e.id]||J9t(this._pulse,n&&n.pulse)}function J9t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Y5&&(e.source=t.source),e)}const Nre={skip:!1,force:!1};function Z9t(e,t){const n=t||Nre;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function e7t(e,t,n){const r=n||Nre;return(e.set(t)||r.force)&&this.touch(e,r),this}function t7t(e,t,n){this.touch(e,n||Nre);const r=new iv(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function n7t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),D$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,r7t(t,0,e)):r=n,r}}}function D$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function r7t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,D$e(e,r,t,n)}function AE(){this.logger(pre()),this.logLevel(fre),this._clock=0,this._rank=0,this._locale=kre();try{this._loader=I8()}catch{}this._touched=R8(oD),this._input={},this._pulse=null,this._heap=n7t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function h2(e){return function(){return this._log[e].apply(this,arguments)}}AE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:h2("error"),warn:h2("warn"),info:h2("info"),debug:h2("debug"),logLevel:h2("level"),cleanThreshold:1e4,add:I9t,connect:R9t,rank:U9t,rerank:H9t,pulse:t7t,touch:Z9t,update:e7t,changeset:dx,ingest:N9t,parse:O9t,preload:$9t,request:M9t,events:P9t,on:j9t,evaluate:W9t,run:Y9t,runAsync:G9t,runAfter:K9t,_enqueue:X9t,_getPulse:Q9t};function et(e,t){Li.call(this,e,null,t)}$t(et,Li,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const pC={};function P$e(e){const t=O$e(e);return t&&t.Definition||null}function O$e(e){return e=e&&e.toLowerCase(),Qt(pC,e)?pC[e]:null}function*N$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Mre(e,t,n){const r=Float64Array.from(N$e(e,n));return r.sort(Rg),t.map(i=>wNe(r,i))}function $re(e,t){return Mre(e,[.25,.5,.75],t)}function Fre(e,t){const n=e.length,r=pRt(e,t),i=$re(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function M$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,c,d,f;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=i.length;d<f;++d)c=a/i[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var nf=Math.random;function i7t(e){nf=e}function $$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(N$e(e,r)),s=i.length,o=t;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(nf()*s)];c[u]=a/s}return c.sort(Rg),[cY(c,n/2),cY(c,1-n/2)]}function F$e(e,t,n,r){r=r||(f=>f);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,c=l+t,d;for(;a<i;++a){if(d=r(e[a]),d>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?s7t(s,t+t/4):s}function s7t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function o7t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function a7t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*nf())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const L$e=Math.sqrt(2*Math.PI),l7t=Math.SQRT2;let p2=NaN;function M8(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(p2===p2)n=p2,p2=NaN;else{do n=nf()*2-1,r=nf()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,p2=r*s}return e+n*t}function Lre(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*L$e)}function $8(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function F8(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*l7t*u7t(2*e-1)}function u7t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function jre(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>M8(n,r),pdf:s=>Lre(s,n,r),cdf:s=>$8(s,n,r),icdf:s=>F8(s,n,r)};return i.mean(e).stdev(t)}function Bre(e,t){const n=jre();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Fre(e)),i):t},sample(){return e[~~(nf()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function zre(e,t){return e=e||0,t=t??1,Math.exp(e+M8()*t)}function Vre(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*L$e*e)}function Ure(e,t,n){return $8(Math.log(e),t,n)}function Hre(e,t,n){return Math.exp(F8(e,t,n))}function j$e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>zre(n,r),pdf:s=>Vre(s,n,r),cdf:s=>Ure(s,n,r),icdf:s=>Hre(s,n,r)};return i.mean(e).stdev(t)}function B$e(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=nf();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function qre(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*nf()}function Wre(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Gre(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Yre(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function z$e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>qre(n,r),pdf:s=>Wre(s,n,r),cdf:s=>Gre(s,n,r),icdf:s=>Yre(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Kre(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function uD(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function L8(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,c,d,f;for(f of e)s[a]=c=+t(f),o[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function cD(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function VS(e,t,n,r,i){let s=0,o=0;return cD(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;s+=u*u,o+=c*c}),1-s/o}function Xre(e,t,n){let r=0,i=0,s=0,o=0,a=0;cD(e,t,n,(c,d)=>{++a,r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=uD(r,i,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:VS(e,t,n,i,u)}}function V$e(e,t,n){let r=0,i=0,s=0,o=0,a=0;cD(e,t,n,(c,d)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=uD(r,i,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:VS(e,t,n,i,u)}}function U$e(e,t,n){const[r,i,s,o]=L8(e,t,n);let a=0,l=0,u=0,c=0,d=0,f,h,p;cD(e,t,n,(v,b)=>{f=r[d++],h=Math.log(b),p=f*b,a+=(b*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[m,g]=uD(l/o,a/o,u/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:VS(e,t,n,o,y)}}function H$e(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;cD(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(f-a)/l});const u=uD(r,i,s,o),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:VS(e,t,n,a,c)}}function Qre(e,t,n){const[r,i,s,o]=L8(e,t,n),a=r.length;let l=0,u=0,c=0,d=0,f=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,l+=(g-l)/h,u+=(g*p-u)/h,c+=(g*g-c)/h,d+=(p*m-d)/h,f+=(g*m-f)/h;const y=c-l*l,v=l*y-u*u,b=(f*l-d*u)/v,_=(d*y-f*u)/v,E=-b*l,S=T=>(T=T-s,b*T*T+_*T+E+o);return{coef:[E-_*s+b*s*s+o,_-2*b*s,b],predict:S,rSquared:VS(e,t,n,o,S)}}function q$e(e,t,n,r){if(r===0)return Kre(e,t,n);if(r===1)return Xre(e,t,n);if(r===2)return Qre(e,t,n);const[i,s,o,a]=L8(e,t,n),l=i.length,u=[],c=[],d=r+1;let f,h,p,m,g;for(f=0;f<d;++f){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f)*s[p];for(u.push(m),g=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f+h);g[h]=m}c.push(g)}c.push(u);const y=d7t(c),v=b=>{b-=o;let _=a+y[0]+y[1]*b+y[2]*b*b;for(f=3;f<d;++f)_+=y[f]*Math.pow(b,f);return _};return{coef:c7t(d,y,-o,a),predict:v,rSquared:VS(e,t,n,a,v)}}function c7t(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function d7t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const $1e=2,F1e=1e-12;function W$e(e,t,n,r){const[i,s,o,a]=L8(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=$1e;){const p=[0,u-1];for(let g=0;g<l;++g){const y=i[g],v=p[0],b=p[1],_=y-i[v]>i[b]-y?v:b;let E=0,S=0,T=0,A=0,R=0;const I=1/Math.abs(i[_]-y||1);for(let M=v;M<=b;++M){const O=i[M],j=s[M],B=f7t(Math.abs(y-O)*I)*f[M],H=O*B;E+=B,S+=H,T+=j*B,A+=j*H,R+=O*H}const[P,N]=uD(S/E,T/E,A/E,R/E);c[g]=P+N*y,d[g]=Math.abs(s[g]-c[g]),h7t(i,g+1,p)}if(h===$1e)break;const m=xNe(d);if(Math.abs(m)<F1e)break;for(let g=0,y,v;g<l;++g)y=d[g]/(6*m),f[g]=y>=1?F1e:(v=1-y*y)*v}return p7t(i,c,o,a)}function f7t(e){return(e=1-e*e*e)*e*e}function h7t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function p7t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const m7t=.5*Math.PI/180;function j8(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)u.push(i(s+m/n*a));return u.push(i(o)),u}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let d=u[0],f=c[c.length-1];const h=1/a,p=g7t(d[1],c);for(;f;){const m=i((d[0]+f[0])/2);m[0]-d[0]>=l&&y7t(d,m,f,h,p)>m7t?c.push(m):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function g7t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function y7t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function v7t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function SK(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:v7t(e)}function G$e(e,t,n){return n||e+(t?"_"+t:"")}const QU=()=>{},b7t={init:QU,add:QU,rem:QU,idx:0},_I={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},dD=Object.keys(_I).filter(e=>e!=="__count__");function w7t(e,t){return(n,r)=>hr({name:e,aggregate_param:r,out:n||e},b7t,t)}[...dD,"__count__"].forEach(e=>{_I[e]=w7t(e,_I[e])});function Y$e(e,t,n){return _I[e](n,t)}function K$e(e,t){return e.idx-t.idx}function x7t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=_I[i]())})};return e.forEach(n),Object.values(t).sort(K$e)}function _7t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function E7t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function C7t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function S7t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function X$e(e,t){const n=t||Ol,r=x7t(e),i=e.slice().sort(K$e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=_7t,s.prototype.add=E7t,s.prototype.rem=C7t,s.prototype.set=S7t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Jre(e){this._key=e?Zd(e):Cn,this.reset()}const Qa=Jre.prototype;Qa.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Qa.add=function(e){this._add.push(e)};Qa.rem=function(e){this._rem.push(e)};Qa.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};Qa.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Qt(n,s)||(n[s]=1,++i);return i};Qa.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=j5e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Qa.argmin=function(e){return this.extent(e)[0]||{}};Qa.argmax=function(e){return this.extent(e)[1]||{}};Qa.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Qa.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Qa.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=$re(this.values(),e),this._get=e),this._q};Qa.q1=function(e){return this.quartile(e)[0]};Qa.q2=function(e){return this.quartile(e)[1]};Qa.q3=function(e){return this.quartile(e)[2]};Qa.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=$$e(this.values(),1e3,.05,e),this._get=e),this._ci};Qa.ci0=function(e){return this.ci(e)[0]};Qa.ci1=function(e){return this.ci(e)[1]};function Iv(e){et.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Iv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:dD},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};$t(Iv,et,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][d=c[n[u]]]=d}s(e._prev),s(t);function o(a,l,u){const c=n[u],d=r[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=Ht(Al(v)),_=b.length;let E=0,S;for(;E<_;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=Ht(e.groupby),this._dnames=this._dims.map(v=>{const b=Bs(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:SK(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,c={};let d,f,h,p,m,g,y;for(u!==o.length&&at("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(d=s[y],f=o[y],h=a[y]||null,d==null&&f!=="count"&&at("Null aggregate field specified."),m=Bs(d),g=G$e(f,m,l[y]),n.push(g),f==="count"){this._counts.push(g);continue}p=c[m],p||(i(d),p=c[m]=[],p.field=d,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(Y$e(f,h,g))}return this._measures=this._measures.map(v=>X$e(v,v.field)),Object.create(null)},cellkey:SK(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Jre),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?k$e(t.tuple,s):yi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,c,d;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&i?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const T7t=1e-14;function Zre(e){et.call(this,null,e)}Zre.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};$t(Zre,et,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Al(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=r(c);c[a]=d,c[l]=d==null?null:i+s*(1+(d-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=M$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let c=Cl(t(u));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(T7t+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=mc(l,Al(t),e.name||"bin_"+Bs(t))}});function Q$e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?H5e(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function eie(e){et.call(this,[],e)}eie.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};$t(eie,et,{transform(e,t){const n=t.fork(t.ALL),r=Q$e(Cn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(cx(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function J$e(e){Li.call(this,null,A7t,e)}$t(J$e,Li);function A7t(e){return this.value&&!e.modified()?this.value:vre(e.fields,e.orders)}function tie(e){et.call(this,null,e)}tie.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function k7t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}$t(tie,et,{transform(e,t){const n=d=>f=>{for(var h=k7t(a(f),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||d(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=yi({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function nie(e){et.call(this,null,e)}nie.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};$t(nie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=I7t(a,i,s,e.filter||ef)):n.mod=a,n.source=this.value,n.modifies(r)}});function I7t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push(yi(s)),s={},s[t]=u);return i}const L1e={kde:Bre,mixture:B$e,normal:jre,lognormal:j$e,uniform:z$e},R7t="distributions",j1e="function",D7t="field";function Z$e(e,t){const n=e[j1e];Qt(L1e,n)||at("Unknown distribution function: "+n);const r=L1e[n]();for(const i in e)i===D7t?r.data((e.from||t()).map(e[i])):i===R7t?r[i](e[i].map(s=>Z$e(s,t))):typeof r[i]===j1e&&r[i](e[i]);return r}function rie(e){et.call(this,null,e)}const eFe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],P7t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:eFe},{name:"weights",type:"number",array:!0}]};rie.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:eFe.concat(P7t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};$t(rie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Z$e(e.distribution,O7t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&at("Invalid density method: "+o),!e.extent&&!r.data&&at("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||om(r.data()),u=j8(o,l,i,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],yi(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function O7t(e){return()=>e.materialize(e.SOURCE).source}function tFe(e,t){return e?e.map((n,r)=>t[r]||Bs(n)):null}function iie(e,t,n){const r=[],i=d=>d(l);let s,o,a,l,u,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const nFe="bin";function sie(e){et.call(this,null,e)}sie.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:nFe}]};const N7t=(e,t)=>lD(om(e,t))/30;$t(sie,et,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=iie(t.source,e.groupby,Ol),i=e.smooth||!1,s=e.field,o=e.step||N7t(n,s),a=cx((p,m)=>s(p)-s(m)),l=e.as||nFe,u=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<u;++f){const p=r[f].sort(a);h=-1;for(const m of F$e(p,o,i,s))m<c&&(c=m),m>d&&(d=m),p[++h][l]=m}return this.value={start:c,stop:d,step:o},t.reflow(!0).modifies(l)}});function rFe(e){Li.call(this,null,M7t,e),this.modified(!0)}$t(rFe,Li);function M7t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:mc(n=>t(n,e),Al(t),Bs(t))}function oie(e){et.call(this,[void 0,void 0],e)}oie.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};$t(oie,et,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Cl(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Bs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function aie(e,t){Li.call(this,e),this.parent=t,this.count=0}$t(aie,Li,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function B8(e){et.call(this,{},e),this._keys=jS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}$t(B8,et,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Qt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new aie(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Cn(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(Cn(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Cn(l),c=s.get(u),d=r(l);c===d?a(d).mod(l):(s.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get(Cn(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=Cn(l),c=s.get(u),d=r(l);c!==d&&(s.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function iFe(e){Li.call(this,null,$7t,e)}$t(iFe,Li);function $7t(e){return this.value&&!e.modified()?this.value:ut(e.name)?Ht(e.name).map(t=>Zd(t)):Zd(e.name,e.as)}function lie(e){et.call(this,jS(),e)}lie.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};$t(lie,et,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const f=Cn(d);r.has(f)?r.delete(f):o.push(d)}),t.visit(t.ADD,d=>{l(d,e)?s.push(d):r.set(Cn(d),1)});function c(d){const f=Cn(d),h=l(d,e),p=r.get(f);h&&p?(r.delete(f),s.push(d)):!h&&!p?(r.set(f,1),o.push(d)):u&&h&&!p&&a.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function uie(e){et.call(this,[],e)}uie.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};$t(uie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=tFe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,m)=>Math.max(p,m.length),0);let c=0,d,f,h;for(;c<u;++c){for(f=Pre(a),d=0;d<o;++d)f[i[d]]=(h=l[d][c])==null?null:h;s&&(f[s]=c),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function cie(e){et.call(this,[],e)}cie.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};$t(cie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Bs),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=Pre(u),d[o]=i[c],d[a]=r[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function die(e){et.call(this,null,e)}die.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};$t(die,et,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function sFe(e){et.call(this,[],e)}$t(sFe,et,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=yi(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const fO={value:"value",median:xNe,mean:wRt,min:uY,max:ev},F7t=[];function fie(e){et.call(this,[],e)}fie.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function L7t(e){var t=e.method||fO.value,n;if(fO[t]==null)at("Unrecognized imputation method: "+t);else return t===fO.value?(n=e.value!==void 0?e.value:0,()=>n):fO[t]}function j7t(e){const t=e.field;return n=>n?t(n):NaN}$t(fie,et,{transform(e,t){var n=t.fork(t.ALL),r=L7t(e),i=j7t(e),s=Bs(e.field),o=Bs(e.key),a=(e.groupby||[]).map(Bs),l=B7t(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,f,h,p,m,g,y,v,b,_,E;for(g=0,b=l.length;g<b;++g)for(f=l[g],p=f.values,h=NaN,v=0;v<d;++v)if(f[v]==null){for(m=l.domain[v],E={_impute:!0},y=0,_=p.length;y<_;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(f,i):h,u.push(yi(E))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function B7t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},l={},u,c,d,f,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),f=0,m=e.length;f<m;++f)g=e[f],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(u=t?t.map(i):F7t)+"",(d=l[c])||(d=l[c]=[],s.push(d),d.values=u),d[h-1]=g;return s.domain=o,s}function hie(e){Iv.call(this,e)}hie.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:dD},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};$t(hie,Iv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{hr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function pie(e){et.call(this,null,e)}pie.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};$t(pie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=iie(r,e.groupby,e.field),s=(e.groupby||[]).map(Bs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&at("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=om(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const p=Bre(h,o)[a],m=e.counts?h.length:1,g=c||om(h);j8(p,g,d,f).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[l[0]]=y[0],v[l[1]]=y[1]*m,u.push(yi(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function oFe(e){Li.call(this,null,z7t,e)}$t(oFe,Li);function z7t(e){return this.value&&!e.modified()?this.value:xre(e.fields,e.flat)}function aFe(e){et.call(this,[],e),this._pending=null}$t(aFe,et,{transform(e,t){const n=t.dataflow;return this._pending?JU(this,t,this._pending):V7t(e)?t.StopPropagation:e.values?JU(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Ht(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>JU(this,t,Ht(r.data)))}});function V7t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function JU(e,t,n){n.forEach(yi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function mie(e){et.call(this,{},e)}mie.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};$t(mie,et,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,c=e.as,d,f,h;return i?(f=i.length,a>1&&!c&&at('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&at('The "as" parameter has too few output field names.'),c=c||i.map(Bs),d=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<f;++y,++g)p[c[g]]=s;else for(y=0;y<f;++y,++g)p[c[g]]=i[y](v)}):(c||at("Missing output field names."),d=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}});function lFe(e){Li.call(this,null,U7t,e)}$t(lFe,Li);function U7t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function uFe(e){Li.call(this,null,H7t,e)}$t(uFe,Li);function H7t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function cFe(e){et.call(this,null,e)}$t(cFe,et,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function gie(e){Iv.call(this,e)}gie.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:dD,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};$t(gie,Iv,{_transform:Iv.prototype.transform,transform(e,t){return this._transform(q7t(e,t),t)}});function q7t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Al(n).concat(Al(r)),o=G7t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>W7t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function W7t(e,t,n,r){return mc(i=>t(i)===e?n(i):NaN,r,e+"")}function G7t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(aD),t?i.slice(0,t):i}function dFe(e){B8.call(this,e)}$t(dFe,B8,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Cn(s),n,t,s);return(e.modified("field")||r&&t.modified(Al(r)))&&at("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(yi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function yie(e){et.call(this,null,e)}yie.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};$t(yie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=tFe(e.fields,e.as||[]),s=r?(a,l)=>Y7t(a,l,r,i):P8;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=Cn(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,yi({}));o[Cn(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Cn(a)]))}),n}});function Y7t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function fFe(e){et.call(this,null,e)}$t(fFe,et,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vie(e){et.call(this,null,e)}vie.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const K7t=1e-14;$t(vie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=iie(i,e.groupby,e.field),o=(e.groupby||[]).map(Bs),a=[],l=e.step||.01,u=e.probs||Xu(l/2,1-K7t,l),c=u.length;return s.forEach(d=>{const f=Mre(d,u);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=d.dims[m];p[r[0]]=u[h],p[r[1]]=f[h],a.push(yi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function hFe(e){et.call(this,null,e)}$t(hFe,et,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Cn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Pre(i);r[Cn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Cn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function bie(e){et.call(this,[],e),this.count=0}bie.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};$t(bie,et,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,d)=>(c[Cn(d)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let d,f;o.length<i?o.push(c):(f=~~((a+1)*nf()),f<o.length&&f>=l&&(d=o[f],s[Cn(d)]&&n.rem.push(d),o[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=Cn(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Cn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,c=>{s[Cn(c)]||u(c)}),l=-1),r&&o.length>i){const c=o.length-i;for(let d=0;d<c;++d)s[Cn(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Cn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(c=>!s[Cn(c)])),this.count=a,this.value=n.source=o,n}});function wie(e){et.call(this,null,e)}wie.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};$t(wie,et,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Xu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,yi(s)}),n.add=t.add.concat(this.value),n}});function pFe(e){et.call(this,null,e),this.modified(!0)}$t(pFe,et,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function xie(e){et.call(this,null,e)}const mFe=["unit0","unit1"];xie.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Sre,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:mFe}]};$t(xie,et,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?zS:BS)(s.unit).offset,a=e.as||mFe,l=a[0],u=a[1],c=s.step;let d=s.start||1/0,f=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Al(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[l]=null,r&&(p[u]=null)):(p[l]=g=y=s(m),r&&(p[u]=y=o(g,c)),g<d&&(d=g),y>f&&(f=y))}),s.start=d,s.stop=f,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:f$e({extent:e.extent||om(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Tre(r),o=this.value||{},a=(n?r$e:n$e)(s,i);return a.unit=zr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function gFe(e){et.call(this,jS(),e)}$t(gFe,et,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function yFe(e){et.call(this,null,e)}$t(yFe,et,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(cx(e.sort)):t.source).map(e.field))}});function X7t(e,t,n,r){const i=EI[e](t,n);return{init:i.init||Ay,update:function(s,o){o[r]=i.next(s)}}}const EI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=EI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||at("ntile num must be greater than zero.");const n=EI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||at("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Q7t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Q7t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const J7t=Object.keys(EI);function vFe(e){const t=Ht(e.ops),n=Ht(e.fields),r=Ht(e.params),i=Ht(e.aggregate_params),s=Ht(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},c=[],d=[];let f=!0;function h(p){Ht(Al(p)).forEach(m=>l[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Bs(g),_=G$e(p,b,s[m]);if(h(g),o.push(_),Qt(EI,p))a.push(X7t(p,g,y,_));else{if(g==null&&p!=="count"&&at("Null aggregate field specified."),p==="count"){c.push(_);return}f=!1;let E=u[b];E||(E=u[b]=[],E.field=g,d.push(E)),E.push(Y$e(p,v,_))}}),(c.length||d.length)&&(this.cell=Z7t(d,c,f)),this.inputs=Object.keys(l)}const bFe=vFe.prototype;bFe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};bFe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function Z7t(e,t,n){e=e.map(l=>X$e(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Jre;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function _ie(e){et.call(this,{},e),this._mlen=0,this._mods=[]}_ie.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:J7t.concat(dD)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};$t(_ie,et,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=cx(e.sort),i=SK(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new vFe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)ezt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Q$e(Cn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function ezt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?SS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Nl(-1)};t.init();for(let d=0;d<l;++d)tzt(c,o,d,l),s&&nzt(c,u),t.update(c,a[d])}function tzt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function nzt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const rzt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Iv,bin:Zre,collect:eie,compare:J$e,countpattern:tie,cross:nie,density:rie,dotbin:sie,expression:rFe,extent:oie,facet:B8,field:iFe,filter:lie,flatten:uie,fold:cie,formula:die,generate:sFe,impute:fie,joinaggregate:hie,kde:pie,key:oFe,load:aFe,lookup:mie,multiextent:lFe,multivalues:uFe,params:cFe,pivot:gie,prefacet:dFe,project:yie,proxy:fFe,quantile:vie,relay:hFe,sample:bie,sequence:wie,sieve:pFe,subflow:aie,timeunit:xie,tupleindex:gFe,values:yFe,window:_ie},Symbol.toStringTag,{value:"Module"}));function sv(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const izt=()=>typeof Image<"u"?Image:null;function Eie(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const szt="identity",mC="linear",s0="log",fD="pow",hD="sqrt",z8="symlog",vw="time",bw="utc",Vp="sequential",US="diverging",gC="quantile",V8="quantize",U8="threshold",Cie="ordinal",TK="point",wFe="band",Sie="bin-ordinal",Zo="continuous",pD="discrete",mD="discretizing",gf="interpolating",Tie="temporal";function ozt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function azt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Aie(){const e=IS().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],p=Eie(d,a,l);let m=r[f-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(d-a))*u,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Xu(d).map(y=>m+i*y);return n(f?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let m=+d[0],g=+d[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-f])))return y=Math.max(0,Cv(h,m)-1),v=m===g?y:Cv(h,g)-1,m-h[y]>s+1e-10&&++y,f&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return Aie().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function xFe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return xFe(t())},e}function lzt(){return xFe(Aie().paddingInner(1))}var uzt=Array.prototype.map;function czt(e){return uzt.call(e,Cl)}const dzt=Array.prototype.slice;function _Fe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Cv(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=czt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=dzt.call(r),n):t.slice()},n.tickFormat=function(r,i){return CMe(e[0],zr(e),r??10,i)},n.copy=function(){return _Fe().domain(n.domain()).range(n.range())},n}const K5=new Map,EFe=Symbol("vega_scale");function CFe(e){return e[EFe]=!0,e}function B1e(e){return e&&e[EFe]===!0}function fzt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?ozt(s):s.invertExtent?azt(s):void 0),s.type=e,CFe(s)};return r.metadata=vh(Ht(n)),r}function di(e,t,n){return arguments.length>1?(K5.set(e,fzt(e,t,n)),this):SFe(e)?K5.get(e):void 0}di(szt,SMe);di(mC,sc,Zo);di(s0,AMe,[Zo,s0]);di(fD,Cne,Zo);di(hD,i6t,Zo);di(z8,kMe,Zo);di(vw,zMe,[Zo,Tie]);di(bw,b5t,[Zo,Tie]);di(Vp,kne,[Zo,gf]);di(`${Vp}-${mC}`,kne,[Zo,gf]);di(`${Vp}-${s0}`,VMe,[Zo,gf,s0]);di(`${Vp}-${fD}`,Ine,[Zo,gf]);di(`${Vp}-${hD}`,w5t,[Zo,gf]);di(`${Vp}-${z8}`,UMe,[Zo,gf]);di(`${US}-${mC}`,HMe,[Zo,gf]);di(`${US}-${s0}`,qMe,[Zo,gf,s0]);di(`${US}-${fD}`,Rne,[Zo,gf]);di(`${US}-${hD}`,x5t,[Zo,gf]);di(`${US}-${z8}`,WMe,[Zo,gf]);di(gC,IMe,[mD,gC]);di(V8,RMe,mD);di(U8,DMe,mD);di(Sie,_Fe,[pD,mD]);di(Cie,IS,pD);di(wFe,Aie,pD);di(TK,lzt,pD);function SFe(e){return K5.has(e)}function fx(e,t){const n=K5.get(e);return n&&n.metadata[t]}function kie(e){return fx(e,Zo)}function yC(e){return fx(e,pD)}function AK(e){return fx(e,mD)}function TFe(e){return fx(e,s0)}function hzt(e){return fx(e,Tie)}function AFe(e){return fx(e,gf)}function kFe(e){return fx(e,gC)}const pzt=["clamp","base","constant","exponent"];function IFe(e,t){const n=t[0],r=zr(t)-n;return function(i){return e(n+i*r)}}function H8(e,t,n){return nne(Iie(t||"rgb",n),e)}function RFe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function DFe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Nl(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=di(s)().domain([t,n]).range([0,1]),pzt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Iie(e,t){const n=QPt[mzt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function mzt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const gzt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},yzt={accent:E5t,category10:_5t,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:C5t,observable10:S5t,paired:T5t,pastel1:A5t,pastel2:k5t,set1:I5t,set2:R5t,set3:D5t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function PFe(e){if(ut(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function OFe(e,t){for(const n in e)Rie(n,t(e[n]))}const z1e={};OFe(yzt,PFe);OFe(gzt,e=>H8(PFe(e)));function Rie(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(z1e[e]=t,this):z1e[e]}const lM="symbol",vzt="discrete",bzt="gradient",wzt=e=>ut(e)?e.map(t=>String(t)):String(e),xzt=(e,t)=>e[1]-t[1],_zt=(e,t)=>t[1]-e[1];function Die(e,t,n){let r;return ci(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(lD(e.domain())/n||1)+1))),qt(t)&&(r=t.step,t=t.interval),Wt(t)&&(t=e.type===vw?BS(t):e.type==bw?zS(t):at("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function NFe(e,t,n){let r=e.range(),i=r[0],s=zr(r),o=xzt;if(i>s&&(r=s,s=i,i=r,o=_zt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],zr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function Pie(e,t){return e.bins?NFe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function MFe(e,t,n,r,i,s){const o=t.type;let a=wzt;if(o===vw||i===vw)a=e.timeFormat(r);else if(o===bw||i===bw)a=e.utcFormat(r);else if(TFe(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=$Fe(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function $Fe(e,t,n){const r=Pie(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const kK={[gC]:"quantiles",[V8]:"thresholds",[U8]:"domain"},FFe={[gC]:"quantiles",[V8]:"domain"};function LFe(e,t){return e.bins?Szt(e.bins):e.type===s0?$Fe(e,t,!0):kK[e.type]?Czt(e[kK[e.type]]()):Pie(e,t)}function Ezt(e,t,n){const r=t[FFe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,30,n)}function Czt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Szt(e){const t=e.slice(0,-1);return t.max=zr(e),t}const Tzt=e=>kK[e.type]||e.bins;function jFe(e,t,n,r,i,s,o){const a=FFe[t.type]&&s!==vw&&s!==bw?Ezt(e,t,i):MFe(e,t,n,i,s,o);return r===lM&&Tzt(t)?Azt(a):r===vzt?kzt(a):Izt(a)}const Azt=e=>(t,n,r)=>{const i=V1e(r[n+1],V1e(r.max,1/0)),s=U1e(t,e),o=U1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},V1e=(e,t)=>e??t,kzt=e=>(t,n)=>n?e(t):null,Izt=e=>t=>e(t),U1e=(e,t)=>Number.isFinite(e)?t(e):null;function Rzt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+zr(t),s=i-r;if(e.type===U8){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Dzt(e,t,n,r){const i=r||t.type;return Wt(n)&&hzt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===vw?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===bw?e.utcFormat("%A, %d %B %Y, %X UTC"):jFe(e,t,5,null,n,r,!0)}function BFe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Dzt(e,t,n.format,n.formatType);if(AK(t.type)){const s=LFe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(yC(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(zr(s))}`}}let zFe=0;function Pzt(){zFe=0}const X5="p_";function Oie(e){return e&&e.gradient}function VFe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?X5:"";return i||(i=e.id="gradient_"+zFe++,r==="radial"?(e.x1=cp(e.x1,.5),e.y1=cp(e.y1,.5),e.r1=cp(e.r1,0),e.x2=cp(e.x2,.5),e.y2=cp(e.y2,.5),e.r2=cp(e.r2,.5),s=X5):(e.x1=cp(e.x1,0),e.y1=cp(e.y1,0),e.x2=cp(e.x2,1),e.y2=cp(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function cp(e,t){return e??t}function UFe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const H1e={basis:{curve:U5t},"basis-closed":{curve:H5t},"basis-open":{curve:q5t},bundle:{curve:W5t,tension:"beta",value:.85},cardinal:{curve:G5t,tension:"tension",value:0},"cardinal-open":{curve:K5t,tension:"tension",value:0},"cardinal-closed":{curve:Y5t,tension:"tension",value:0},"catmull-rom":{curve:X5t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Q5t,tension:"alpha",value:.5},"catmull-rom-open":{curve:J5t,tension:"alpha",value:.5},linear:{curve:Dne},"linear-closed":{curve:Z5t},monotone:{horizontal:t$t,vertical:e$t},natural:{curve:n$t},step:{curve:r$t},"step-after":{curve:s$t},"step-before":{curve:i$t}};function Nie(e,t,n){var r=Qt(H1e,e)&&H1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Ozt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Nzt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Mzt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,$zt=/^((\s+,?\s*)|(,\s*))/,Fzt=/^[01]/;function vC(e){const t=[];return(e.match(Nzt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Ozt[s],a=Lzt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function Lzt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Fzt:Mzt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match($zt);l!==null&&(i+=l[0].length)}return r}const Rv=Math.PI/180,jzt=1e-14,Eb=Math.PI/2,Ap=Math.PI*2,b_=Math.sqrt(3)/2;var ZU={},eH={},HFe=[].join;function Bzt(e,t,n,r,i,s,o,a,l){const u=HFe.call(arguments);if(ZU[u])return ZU[u];const c=o*Rv,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=f/n,y=d/n,v=-d/r,b=f/r,_=g*a+y*l,E=v*a+b*l,S=g*e+y*t,T=v*e+b*t;let R=1/((S-_)*(S-_)+(T-E)*(T-E))-.25;R<0&&(R=0);let I=Math.sqrt(R);s==i&&(I=-I);const P=.5*(_+S)-I*(T-E),N=.5*(E+T)+I*(S-_),M=Math.atan2(E-N,_-P);let j=Math.atan2(T-N,S-P)-M;j<0&&s===1?j+=Ap:j>0&&s===0&&(j-=Ap);const B=Math.ceil(Math.abs(j/(Eb+.001))),H=[];for(let q=0;q<B;++q){const G=M+q*j/B,U=M+(q+1)*j/B;H[q]=[P,N,G,U,n,r,d,f]}return ZU[u]=H}function zzt(e){const t=HFe.call(e);if(eH[t])return eH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const c=u*o,d=-l*a,f=l*o,h=u*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),_=8/3*b*b/Math.sin(v),E=n+p-_*m,S=r+m+_*p,T=n+g,A=r+y,R=T+_*y,I=A-_*g;return eH[t]=[c*E+d*S,f*E+h*S,c*R+d*I,f*R+h*I,c*T+d*A,f*T+h*A]}const bd=["l",0,0,0,0,0,0,0];function Vzt(e,t,n){const r=bd[0]=e[0];if(r==="a"||r==="A")bd[1]=t*e[1],bd[2]=n*e[2],bd[3]=e[3],bd[4]=e[4],bd[5]=e[5],bd[6]=t*e[6],bd[7]=n*e[7];else if(r==="h"||r==="H")bd[1]=t*e[1];else if(r==="v"||r==="V")bd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)bd[i]=(i%2==1?t:n)*e[i];return bd}function CI(e,t,n,r,i,s){var o,a=null,l=0,u=0,c=0,d=0,f,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=Vzt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"c":f=l+o[5],h=u+o[6],c=l+o[3],d=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,c+n,d+r,f+n,h+r),l=f,u=h;break;case"C":l=o[5],u=o[6],c=o[3],d=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,d+r,l+n,u+r);break;case"s":f=l+o[3],h=u+o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,l+o[1]+n,u+o[2]+r,f+n,h+r),c=l+o[1],d=u+o[2],l=f,u=h;break;case"S":f=o[3],h=o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"q":f=l+o[3],h=u+o[4],c=l+o[1],d=u+o[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"Q":f=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"t":f=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,d=u):a[0]==="t"?(c=2*l-p,d=2*u-m):a[0]==="q"&&(c=2*l-c,d=2*u-d),p=c,m=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h,c=l+o[1],d=u+o[2];break;case"T":f=o[1],h=o[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"a":q1e(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":q1e(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=g,u=y,e.closePath();break}a=o}}function q1e(e,t,n,r){const i=Bzt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=zzt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const W1e=.5773502691896257,G1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ap)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=b_*n,i=r-n*W1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=b_*n,i=r-n*W1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=b_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=b_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=b_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=b_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function qFe(e){return Qt(G1e,e)?G1e[e]:Uzt(e)}var tH={};function Uzt(e){if(!Qt(tH,e)){const t=vC(e);tH[e]={draw:function(n,r){CI(n,t,0,0,Math.sqrt(r)/2)}}}return tH[e]}const iy=.448084975506;function Hzt(e){return e.x}function qzt(e){return e.y}function Wzt(e){return e.width}function Gzt(e){return e.height}function Qm(e){return typeof e=="function"?e:()=>+e}function hO(e,t,n){return Math.max(t,Math.min(e,n))}function WFe(){var e=Hzt,t=qzt,n=Wzt,r=Gzt,i=Qm(0),s=i,o=i,a=i,l=null;function u(c,d,f){var h,p=d??+e.call(this,c),m=f??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=hO(+i.call(this,c),0,v),_=hO(+s.call(this,c),0,v),E=hO(+o.call(this,c),0,v),S=hO(+a.call(this,c),0,v);if(l||(l=h=XL()),b<=0&&_<=0&&E<=0&&S<=0)l.rect(p,m,g,y);else{var T=p+g,A=m+y;l.moveTo(p+b,m),l.lineTo(T-_,m),l.bezierCurveTo(T-iy*_,m,T,m+iy*_,T,m+_),l.lineTo(T,A-S),l.bezierCurveTo(T,A-iy*S,T-iy*S,A,T-S,A),l.lineTo(p+E,A),l.bezierCurveTo(p+iy*E,A,p,A-iy*E,p,A-E),l.lineTo(p,m+b),l.bezierCurveTo(p,m+iy*b,p+iy*b,m,p+b,m),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=Qm(c),u):e},u.y=function(c){return arguments.length?(t=Qm(c),u):t},u.width=function(c){return arguments.length?(n=Qm(c),u):n},u.height=function(c){return arguments.length?(r=Qm(c),u):r},u.cornerRadius=function(c,d,f,h){return arguments.length?(i=Qm(c),s=d!=null?Qm(d):i,a=f!=null?Qm(f):i,o=h!=null?Qm(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function GFe(){var e,t,n,r,i=null,s,o,a,l;function u(d,f,h){const p=h/2;if(s){var m=a-f,g=d-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*l,b=(g/=y)*l,_=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(d-m*p,f-g*p),i.arc(d,f,p,_-Math.PI,_),i.lineTo(o+v,a+b),i.arc(o,a,l,_,_+Math.PI)}else i.arc(d,f,p,0,Ap);i.closePath()}else s=1;o=d,a=f,l=p}function c(d){var f,h=d.length,p,m=!1,g;for(i==null&&(i=g=XL()),f=0;f<=h;++f)!(f<h&&r(p=d[f],f,d))===m&&(m=!m)&&(s=0),m&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(g)return i=null,g+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function gD(e,t){return e??t}const yD=e=>e.x||0,vD=e=>e.y||0,Yzt=e=>e.width||0,Kzt=e=>e.height||0,Xzt=e=>(e.x||0)+(e.width||0),Qzt=e=>(e.y||0)+(e.height||0),Jzt=e=>e.startAngle||0,Zzt=e=>e.endAngle||0,eVt=e=>e.padAngle||0,tVt=e=>e.innerRadius||0,nVt=e=>e.outerRadius||0,rVt=e=>e.cornerRadius||0,iVt=e=>gD(e.cornerRadiusTopLeft,e.cornerRadius)||0,sVt=e=>gD(e.cornerRadiusTopRight,e.cornerRadius)||0,oVt=e=>gD(e.cornerRadiusBottomRight,e.cornerRadius)||0,aVt=e=>gD(e.cornerRadiusBottomLeft,e.cornerRadius)||0,lVt=e=>gD(e.size,64),uVt=e=>e.size||1,q8=e=>e.defined!==!1,cVt=e=>qFe(e.shape||"circle"),dVt=B5t().startAngle(Jzt).endAngle(Zzt).padAngle(eVt).innerRadius(tVt).outerRadius(nVt).cornerRadius(rVt),fVt=e6e().x(yD).y1(vD).y0(Qzt).defined(q8),hVt=e6e().y(vD).x1(yD).x0(Xzt).defined(q8),pVt=ZMe().x(yD).y(vD).defined(q8),mVt=WFe().x(yD).y(vD).width(Yzt).height(Kzt).cornerRadius(iVt,sVt,oVt,aVt),gVt=V5t().type(cVt).size(lVt),yVt=GFe().x(yD).y(vD).defined(q8).size(uVt);function Mie(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function vVt(e,t){return dVt.context(e)(t)}function bVt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?hVt:fVt).curve(Nie(r,n.orient,n.tension)).context(e)(t)}function wVt(e,t){const n=t[0],r=n.interpolate||"linear";return pVt.curve(Nie(r,n.orient,n.tension)).context(e)(t)}function HS(e,t,n,r){return mVt.context(e)(t,n,r)}function xVt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function _Vt(e,t){return gVt.context(e)(t)}function EVt(e,t){return yVt.context(e)(t)}var YFe=1;function KFe(){YFe=1}function $ie(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+YFe++),o=i.clipping[s]||(i.clipping[s]={id:s});return pr(r)?o.path=r(null):Mie(n)?o.path=HS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function To(e){this.clear(),e&&this.union(e)}To.prototype={clone(){return new To(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*o+u,l*r+a*o+c,a*s-l*i+u,l*s+a*i+c,a*s-l*o+u,l*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function W8(e){this.mark=e,this.bounds=this.bounds||new To}function G8(e){W8.call(this,e),this.items=this.items||[]}$t(G8,W8);class XFe{constructor(t){this._pending=0,this._loader=t||I8()}pending(){return this._pending}sanitizeURL(t){const n=this;return Y1e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(m2(n),r)).catch(()=>(m2(n),null))}loadImage(t){const n=this,r=izt();return Y1e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Qt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>m2(n),o.onerror=()=>m2(n),o.src=s,o}).catch(i=>(m2(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Y1e(e){e._pending+=1}function m2(e){e._pending-=1}function I0(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?CVt(t,r):0))}return e}function CVt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const SVt=Ap-1e-8;let Y8,uM,cM,$b,IK,dM,RK,DK;const Fy=(e,t)=>Y8.add(e,t),fM=(e,t)=>Fy(uM=e,cM=t),K1e=e=>Fy(e,Y8.y1),X1e=e=>Fy(Y8.x1,e),Cb=(e,t)=>IK*e+RK*t,Sb=(e,t)=>dM*e+DK*t,nH=(e,t)=>Fy(Cb(e,t),Sb(e,t)),rH=(e,t)=>fM(Cb(e,t),Sb(e,t));function bD(e,t){return Y8=e,t?($b=t*Rv,IK=DK=Math.cos($b),dM=Math.sin($b),RK=-dM):(IK=DK=1,$b=dM=RK=0),TVt}const TVt={beginPath(){},closePath(){},moveTo:rH,lineTo:rH,rect(e,t,n,r){$b?(nH(e+n,t),nH(e+n,t+r),nH(e,t+r),rH(e,t)):(Fy(e+n,t+r),fM(e,t))},quadraticCurveTo(e,t,n,r){const i=Cb(e,t),s=Sb(e,t),o=Cb(n,r),a=Sb(n,r);Q1e(uM,i,o,K1e),Q1e(cM,s,a,X1e),fM(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Cb(e,t),a=Sb(e,t),l=Cb(n,r),u=Sb(n,r),c=Cb(i,s),d=Sb(i,s);J1e(uM,o,l,c,K1e),J1e(cM,a,u,d,X1e),fM(c,d)},arc(e,t,n,r,i,s){if(r+=$b,i+=$b,uM=n*Math.cos(i)+e,cM=n*Math.sin(i)+t,Math.abs(i-r)>SVt)Fy(e-n,t-n),Fy(e+n,t+n);else{const o=u=>Fy(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%Ap,r<0&&(r+=Ap),i=i%Ap,i<0&&(i+=Ap),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Ap,a=r-r%Eb,l=0;l<4&&a>i;++l,a-=Eb)o(a);else for(a=r-r%Eb+Eb,l=0;l<4&&a<i;++l,a=a+Eb)o(a)}}};function Q1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function J1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(s)>jzt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&i(Z1e(l,e,t,n,r)),0<u&&u<1&&i(Z1e(u,e,t,n,r))}function Z1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var ov=(ov=sv(1,1))?ov.getContext("2d"):null;const PK=new To;function Fie(e){return function(t,n){if(!ov)return!0;e(ov,t),PK.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=PK;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(ov.isPointInPath(l,a))return!0;return!1}}function Lie(e,t){return t.contains(e.x||0,e.y||0)}function QFe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(PK.set(n,r,n+i,r+s))}function JFe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return sE(t,n,r,i,s)}function sE(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,c=i-n;let d=0,f=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-u,p=-(s-t)),g===1&&(h=u,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function bC(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Of(e,t){return e??t}function ebe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function AVt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Of(t.x1,.5)*r,n.y1+Of(t.y1,.5)*i,Math.max(r,i)*Of(t.r1,0),n.x1+Of(t.x2,.5)*r,n.y1+Of(t.y2,.5)*i,Math.max(r,i)*Of(t.r2,.5));else{const o=Of(t.x1,0),a=Of(t.y1,0),l=Of(t.x2,1),u=Of(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=sv(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=ebe(d.createLinearGradient(o,a,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return ebe(s,t.stops)}function ZFe(e,t,n){return Oie(n)?AVt(e,n,t.bounds):n}function Q5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=ZFe(e,t,t.fill),!0):!1}var kVt=[];function wC(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=ZFe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||kVt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function IVt(e,t){return e.zindex-t.zindex||e.index-t.index}function jie(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(IVt)}function wh(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=jie(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function J5(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=jie(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Bie(e){return function(t,n,r){wh(n,i=>{(!r||r.intersects(i.bounds))&&eLe(e,t,i,i)})}}function RVt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&eLe(e,t,n.items[0],n.items)}}function eLe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(bC(t,n),n.fill&&Q5(t,n,i)&&t.fill(),n.stroke&&wC(t,n,i)&&t.stroke()))}function K8(e){return e=e||ef,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,J5(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function wD(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function zie(e){return K8(wD(e))}function Yb(e,t){return"translate("+e+","+t+")"}function Vie(e){return"rotate("+e+")"}function DVt(e,t){return"scale("+e+","+t+")"}function tLe(e){return Yb(e.x||0,e.y||0)}function PVt(e){return Yb(e.x||0,e.y||0)+(e.angle?" "+Vie(e.angle):"")}function OVt(e){return Yb(e.x||0,e.y||0)+(e.angle?" "+Vie(e.angle):"")+(e.scaleX||e.scaleY?" "+DVt(e.scaleX||1,e.scaleY||1):"")}function Uie(e,t,n){function r(o,a){o("transform",PVt(a)),o("d",t(null,a))}function i(o,a){return t(bD(o,a.angle),a),I0(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=Rv),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Bie(s),pick:zie(s),isect:n||Fie(s)}}var NVt=Uie("arc",vVt);function MVt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function $Vt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function FVt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Hie(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(bD(l),c),I0(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=wD(s);function a(l,u,c,d,f,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:(c*=l.pixelRatio,d*=l.pixelRatio,o(l,p,c,d)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:RVt(s),pick:a,isect:Lie,tip:n}}var LVt=Hie("area",bVt,MVt);function jVt(e,t){var n=t.clip;e.save(),pr(n)?(e.beginPath(),n(e),e.clip()):nLe(e,t.group)}function nLe(e,t){e.beginPath(),Mie(t)?HS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function rLe(e){const t=Of(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function BVt(e,t){e("transform",tLe(t))}function iLe(e,t){const n=rLe(t);e("d",HS(null,t,n,n))}function zVt(e,t){e("class","background"),e("aria-hidden",!0),iLe(e,t)}function VVt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?iLe(e,t):e("d","")}function UVt(e,t,n){const r=t.clip?$ie(n,t,t):null;e("clip-path",r)}function HVt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),I0(e,t),e.translate(t.x||0,t.y||0)}function SI(e,t,n,r){const i=rLe(t);e.beginPath(),HS(e,t,(n||0)+i,(r||0)+i)}const qVt=wD(SI),WVt=wD(SI,!1),GVt=wD(SI,!0);function YVt(e,t,n,r){wh(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(SI(e,i,s,o),bC(e,i),i.fill&&Q5(e,i,l)&&e.fill(),i.stroke&&!a&&wC(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&nLe(e,i),n&&n.translate(-s,-o),wh(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(SI(e,i,s,o),bC(e,i),wC(e,i,l)&&e.stroke())})}function KVt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return J5(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(i,s))return;c=l.x||0,d=l.y||0;const h=c+(l.width||0),p=d+(l.height||0),m=l.clip;if(m&&(i<c||i>h||s<d||s>p))return;if(e.save(),e.translate(c,d),c=i-c,d=s-d,m&&Mie(l)&&!GVt(e,l,o,a))return e.restore(),null;const g=l.strokeForeground,y=t.interactive!==!1;return y&&g&&l.stroke&&WVt(e,l,o,a)?(e.restore(),l):(u=J5(l,v=>XVt(v,c,d)?this.pick(v,n,r,c,d):null),!u&&y&&(l.fill||!g&&l.stroke)&&qVt(e,l,o,a)&&(u=l),e.restore(),u||null)})}function XVt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var QVt={type:"group",tag:"g",nested:!1,attr:BVt,bound:HVt,draw:YVt,pick:KVt,isect:QFe,content:UVt,background:zVt,foreground:VVt},TI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function qie(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Wie(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Gie(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function X8(e,t){return e==="center"?t/2:e==="right"?t:0}function Q8(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function JVt(e,t,n){const r=qie(t,n),i=Wie(t,r),s=Gie(t,r),o=(t.x||0)-X8(t.align,i),a=(t.y||0)-Q8(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,TI["xmlns:xlink"],"xlink:href"),e("transform",Yb(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function ZVt(e,t){const n=t.image,r=Wie(t,n),i=Gie(t,n),s=(t.x||0)-X8(t.align,r),o=(t.y||0)-Q8(t.baseline,i);return e.set(s,o,s+r,o+i)}function eUt(e,t,n){wh(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=qie(r,this);let s=Wie(r,i),o=Gie(r,i);if(s===0||o===0)return;let a=(r.x||0)-X8(r.align,s),l=(r.y||0)-Q8(r.baseline,o),u,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=s/c,l+=(o-f)/2,o=f):(f=o*c,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(bC(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var tUt={type:"image",tag:"image",nested:!1,attr:JVt,bound:ZVt,draw:eUt,pick:K8(),isect:ef,get:qie,xOffset:X8,yOffset:Q8},nUt=Hie("line",wVt,$Vt);function rUt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",OVt(t)),e("d",t.path)}function hM(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Rv,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=vC(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),CI(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):CI(e,l,r,i,s,o)}function iUt(e,t){return hM(bD(e,t.angle),t)?e.set(0,0,0,0):I0(e,t,!0)}var sUt={type:"path",tag:"path",nested:!1,attr:rUt,bound:iUt,draw:Bie(hM),pick:zie(hM),isect:Fie(hM)};function oUt(e,t){e("d",HS(null,t))}function aUt(e,t){var n,r;return I0(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function tbe(e,t){e.beginPath(),HS(e,t)}var lUt={type:"rect",tag:"path",nested:!1,attr:oUt,bound:aUt,draw:Bie(tbe),pick:zie(tbe),isect:QFe};function uUt(e,t){e("transform",tLe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function cUt(e,t){var n,r;return I0(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function sLe(e,t,n){var r,i,s,o;return t.stroke&&wC(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function dUt(e,t,n){wh(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&sLe(e,r,i)&&(bC(e,r),e.stroke())}})}function fUt(e,t,n,r){return e.isPointInStroke?sLe(e,t,1)&&e.isPointInStroke(n,r):!1}var hUt={type:"rule",tag:"line",nested:!1,attr:uUt,bound:cUt,draw:dUt,pick:K8(fUt),isect:JFe},pUt=Uie("shape",xVt),mUt=Uie("symbol",_Vt,Lie);const nbe=U5e();var jc={height:Am,measureWidth:Yie,estimateWidth:Z5,width:Z5,canvas:oLe};oLe(!0);function oLe(e){jc.width=e&&ov?Yie:Z5}function Z5(e,t){return aLe(Pv(e,t),Am(e))}function aLe(e,t){return~~(.8*e.length*t)}function Yie(e,t){return Am(e)<=0||!(t=Pv(e,t))?0:lLe(t,J8(e))}function lLe(e,t){const n=`(${t}) ${e}`;let r=nbe.get(n);return r===void 0&&(ov.font=t,r=ov.measureText(e).width,nbe.set(n,r)),r}function Am(e){return e.fontSize!=null?+e.fontSize||0:11}function Dv(e){return e.lineHeight!=null?e.lineHeight:Am(e)+2}function gUt(e){return ut(e)?e.length>1?e:e[0]:e}function xD(e){return gUt(e.lineBreak&&e.text&&!ut(e.text)?e.text.split(e.lineBreak):e.text)}function Kie(e){const t=xD(e);return(ut(t)?t.length-1:0)*Dv(e)}function Pv(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?vUt(e,n):n}function yUt(e){if(jc.width===Yie){const t=J8(e);return n=>lLe(n,t)}else if(jc.width===Z5){const t=Am(e);return n=>aLe(n,t)}else return t=>jc.width(e,t)}function vUt(e,t){var n=+e.limit,r=yUt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function _D(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function J8(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Am(e)+"px "+_D(e,t)}function Xie(e){var t=e.baseline,n=Am(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Dv(e):t==="line-bottom"?.29*n-.5*Dv(e):0)}const bUt={left:"start",center:"middle",right:"end"},ik=new To;function Z8(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Eb,t+=r*Math.cos(i),n+=r*Math.sin(i)),ik.x1=t,ik.y1=n,ik}function wUt(e,t){var n=t.dx||0,r=(t.dy||0)+Xie(t),i=Z8(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",bUt[t.align]||"start"),a?(l=Yb(s,o)+" "+Vie(a),(n||r)&&(l+=" "+Yb(n,r))):l=Yb(s+n,o+r),e("transform",l)}function Qie(e,t,n){var r=jc.height(t),i=t.align,s=Z8(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+Xie(t)-Math.round(.8*r),c=xD(t),d;if(ut(c)?(r+=Dv(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,jc.width(t,h)),0)):d=jc.width(t,c),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=o,u+=a,l+d,u+r),t.angle&&!n)e.rotate(t.angle*Rv,o,a);else if(n===2)return e.rotatedPoints(t.angle*Rv,o,a);return e}function xUt(e,t,n){wh(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=J8(r),e.textAlign=r.align||"left",s=Z8(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Rv),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Xie(r),c=xD(r),bC(e,r),ut(c))for(u=Dv(r),l=0;l<c.length;++l)d=Pv(r,c[l]),r.fill&&Q5(e,r,i)&&e.fillText(d,o,a),r.stroke&&wC(e,r,i)&&e.strokeText(d,o,a),a+=u;else d=Pv(r,c),r.fill&&Q5(e,r,i)&&e.fillText(d,o,a),r.stroke&&wC(e,r,i)&&e.strokeText(d,o,a);r.angle&&e.restore()}})}function _Ut(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Z8(t),a=o.x1,l=o.y1,u=Qie(ik,t,1),c=-t.angle*Rv,d=Math.cos(c),f=Math.sin(c),h=d*i-f*s+(a-d*a+f*l),p=f*i+d*s+(l-f*a-d*l);return u.contains(h,p)}function EUt(e,t){const n=Qie(ik,e,2);return sE(t,n[0],n[1],n[2],n[3])||sE(t,n[0],n[1],n[4],n[5])||sE(t,n[4],n[5],n[6],n[7])||sE(t,n[2],n[3],n[6],n[7])}var CUt={type:"text",tag:"text",nested:!1,attr:wUt,bound:Qie,draw:xUt,pick:K8(_Ut),isect:EUt},SUt=Hie("trail",EVt,FVt),Jc={arc:NVt,area:LVt,group:QVt,image:tUt,line:nUt,path:sUt,rect:lUt,rule:hUt,shape:pUt,symbol:mUt,text:CUt,trail:SUt};function OK(e,t,n){var r=Jc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new To),e,n)}var rbe={mark:null};function uLe(e,t,n){var r=Jc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,c;if(r.nested)return o?u=s[0]:(rbe.mark=e,u=rbe),c=OK(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new To,o)for(a=0,l=s.length;a<l;++a)t.union(OK(s[a],i,n));return e.bounds=t}const TUt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function cLe(e,t){return JSON.stringify(e,TUt,t)}function dLe(e){const t=typeof e=="string"?JSON.parse(e):e;return fLe(t)}function fLe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&fLe(n[i]);return t&&uLe(e),e}class hLe{constructor(t){arguments.length?this.root=dLe(t):(this.root=ibe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new G8(this.root)])}toJSON(t){return cLe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=ibe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function ibe(e,t){const n={bounds:new To,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Ly(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Jie(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Vo(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Ly(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Id(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function pLe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function ej(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function AUt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Jc[i.marktype]).tip){for(o=ej(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Zie=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||I8(),this._tooltip=n||kUt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Ly(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=AUt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function kUt(e,t,n,r){e.element().setAttribute("title",r||"")}class ED{constructor(t){this._el=null,this._bgcolor=null,this._loader=new XFe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const IUt="keydown",RUt="keypress",DUt="keyup",mLe="dragenter",pM="dragleave",gLe="dragover",NK="pointerdown",PUt="pointerup",e$="pointermove",mM="pointerout",yLe="pointerover",MK="mousedown",OUt="mouseup",vLe="mousemove",t$="mouseout",bLe="mouseover",n$="click",NUt="dblclick",MUt="wheel",wLe="mousewheel",r$="touchstart",i$="touchmove",s$="touchend",$Ut=[IUt,RUt,DUt,mLe,pM,gLe,NK,PUt,e$,mM,yLe,MK,OUt,vLe,t$,bLe,n$,NUt,MUt,wLe,r$,i$,s$],$K=e$,sk=t$,FK=n$;class CD extends Zie{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=$Ut,this.pointermove=obe([e$,vLe],[yLe,bLe],[mM,t$]),this.dragover=obe([gLe],[mLe],[pM]),this.pointerout=abe([mM,t$]),this.dragleave=abe([pM])}initialize(t,n,r){return this._canvas=t&&Jie(t,"canvas"),[n$,MK,NK,e$,mM,pM].forEach(i=>sbe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(wLe,t)}pointerdown(t){this._down=this._active,this.fire(NK,t)}mousedown(t){this._down=this._active,this.fire(MK,t)}click(t){this._down===this._active&&(this.fire(n$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(r$,t,!0)}touchmove(t){this.fire(i$,t,!0)}touchend(t){this.fire(s$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===FK&&i&&i.href?this.handleHref(n,i,i.href):(t===$K||t===sk)&&this.handleTooltip(n,i,t!==sk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(sbe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=ej(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Jc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const FUt=e=>e===r$||e===i$||e===s$?[r$,i$,s$]:[e];function sbe(e,t){FUt(t).forEach(n=>LUt(e,n))}function LUt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function wA(e,t,n){t.forEach(r=>e.fire(r,n))}function obe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?wA(this,e,r):((!i||!i.exit)&&wA(this,n,r),this._active=s,wA(this,t,r),wA(this,e,r))}}function abe(e){return function(t){wA(this,e,t),this._active=null}}function jUt(){return typeof window<"u"&&window.devicePixelRatio||1}function BUt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?jUt():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class o$ extends ED{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new To,this._tempb=new To}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:sv(1,1,this._options.type),t&&this._canvas&&(Id(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)BUt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||at("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=zUt(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):VUt(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Jc[n.marktype];n.clip&&jVt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const zUt=(e,t,n)=>new To().set(0,0,t,n).translate(-e[0],-e[1]);function VUt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class xLe extends Zie{constructor(t,n){super(t,n);const r=this;r._hrefHandler=iH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=iH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==sk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(FK,this._hrefHandler),i.removeEventListener($K,this._tooltipHandler),i.removeEventListener(sk,this._tooltipHandler)),this._svg=i=t&&Jie(t,"svg"),i&&(i.addEventListener(FK,this._hrefHandler),i.addEventListener($K,this._tooltipHandler),i.addEventListener(sk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:iH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const iH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},_Le="aria-hidden",ese="aria-label",tse="role",nse="aria-roledescription",ELe="graphics-object",rse="graphics-symbol",CLe=(e,t,n)=>({[tse]:e,[nse]:t,[ese]:n||void 0}),UUt=vh(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),lbe={axis:{desc:"axis",caption:WUt},legend:{desc:"legend",caption:GUt},"title-text":{desc:"title",caption:e=>`Title text '${cbe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${cbe(e)}'`}},ube={ariaRole:tse,ariaRoleDescription:nse,description:ese};function SLe(e,t){const n=t.aria===!1;if(e(_Le,n||void 0),n||t.description==null)for(const r in ube)e(ube[r],void 0);else{const r=t.mark.marktype;e(ese,t.description),e(tse,t.ariaRole||(r==="group"?ELe:rse)),e(nse,t.ariaRoleDescription||`${r} mark`)}}function TLe(e){return e.aria===!1?{[_Le]:!0}:UUt[e.role]?null:lbe[e.role]?qUt(e,lbe[e.role]):HUt(e)}function HUt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return CLe(n?ELe:rse,`${t} mark container`,e.description)}function qUt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return CLe(t.role||rse,t.desc,n.description||r(n))}catch{return null}}function cbe(e){return Ht(e.text).join(" ")}function WUt(e){const t=e.datum,n=e.orient,r=t.title?ALe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${yC(a)?"discrete":a} scale with ${BFe(o,s,e)}`}function GUt(e){const t=e.datum,n=t.title?ALe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return KUt(r)+(n?` titled '${n}'`:"")+` for ${YUt(s)} with ${BFe(l,a,e)}`}function ALe(e){try{return Ht(zr(e.items).items[0].text).join(" ")}catch{return null}}function YUt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+zr(e)}function KUt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const kLe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),XUt=e=>kLe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function ise(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${XUt(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)o(h,f[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=kLe(l),a),toString:()=>e};return a}const ILe=e=>RLe(ise(),e)+"";function RLe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):RLe(e,r)}return e.close()}const a$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},l$={blend:"mix-blend-mode"},DLe={fill:"none","stroke-miterlimit":10},g2=0,dbe="http://www.w3.org/2000/xmlns/",Bo=TI.xmlns;class sse extends ED{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Vo(t,0,"svg",Bo),this._svg.setAttributeNS(dbe,"xmlns",Bo),this._svg.setAttributeNS(dbe,"xmlns:xlink",TI["xmlns:xlink"]),this._svg.setAttribute("version",TI.version),this._svg.setAttribute("class","marks"),Id(t,1),this._root=Vo(this._svg,g2,"g",Bo),jy(this._root,DLe),Id(this._svg,g2+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(jy(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Vo(t,g2,"rect",Bo),jy(r,{width:this._width,height:this._height,fill:n}));const i=ILe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Id(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Jc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,fbe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,fbe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Jc[o],l=n.interactive===!1?"none":null,u=a.tag==="g",c=hbe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Id(c,0),n._svg;c.setAttribute("class",pLe(n));const d=TLe(n);for(const m in d)Yl(c,m,d[m]);u||Yl(c,"pointer-events",l),Yl(c,"clip-path",n.clip?$ie(this,n,n.group):null);let f=null,h=0;const p=m=>{const g=this.isDirty(m),y=hbe(m,c,f,a.tag,s);g&&(this._update(a,y,m),u&&ZUt(this,y,m,i)),f=y,++h};return a.nested?n.items.length&&p(n.items[0]):wh(n,p),Id(c,h),c}_update(t,n,r){wg=n,gl=n.__values__,SLe(ok,r),t.attr(ok,r,this);const i=tHt[t.type];i&&i.call(this,t,n,r),wg&&this.style(wg,r)}style(t,n){if(n!=null){for(const r in a$){let i=r==="font"?_D(n):n[r];if(i===gl[r])continue;const s=a$[r];i==null?t.removeAttribute(s):(Oie(i)&&(i=VFe(i,this._defs.gradient,PLe())),t.setAttribute(s,i+"")),gl[r]=i}for(const r in l$)gM(t,l$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Vo(t,g2+1,"defs",Bo)),i=QUt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Vo(t,g2+1,"defs",Bo)),i=JUt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Id(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function fbe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function QUt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Vo(e,n++,"pattern",Bo);jy(o,{id:X5+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Vo(o,0,"rect",Bo),jy(o,{width:1,height:1,fill:`url(${PLe()}#${t.id})`}),e=Vo(e,n++,"radialGradient",Bo),jy(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Vo(e,n++,"linearGradient",Bo),jy(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Vo(e,r,"stop",Bo),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Id(e,r),n}function JUt(e,t,n){let r;return e=Vo(e,n,"clipPath",Bo),e.setAttribute("id",t.id),t.path?(r=Vo(e,0,"path",Bo),r.setAttribute("d",t.path)):(r=Vo(e,0,"rect",Bo),jy(r,{x:0,y:0,width:t.width,height:t.height})),Id(e,1),n+1}function ZUt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;wh(n,o=>{i=e.mark(t,o,i,r),++s}),Id(t,1+s)}function hbe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Ly(o,r,Bo),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Ly(o,"path",Bo);s.appendChild(a),a.__data__=e;const l=Ly(o,"g",Bo);s.appendChild(l),l.__data__=e;const u=Ly(o,"path",Bo);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||eHt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function eHt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let wg=null,gl=null;const tHt={group(e,t,n){const r=wg=t.childNodes[2];gl=r.__values__,e.foreground(ok,n,this),gl=t.__values__,wg=t.childNodes[1],e.content(ok,n,this);const i=wg=t.childNodes[0];e.background(ok,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==gl.events&&(Yl(r,"pointer-events",s),Yl(i,"pointer-events",s),gl.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Yl(r,"display",null),this.style(i,n),Yl(i,"stroke",null),o&&(n.fill=null),gl=r.__values__,this.style(r,n),o&&(n.fill=o),wg=null}else Yl(r,"display","none")},image(e,t,n){n.smooth===!1?(gM(t,"image-rendering","optimizeSpeed"),gM(t,"image-rendering","pixelated")):gM(t,"image-rendering",null)},text(e,t,n){const r=xD(n);let i,s,o,a;ut(r)?(s=r.map(l=>Pv(n,l)),i=s.join(`
`),i!==gl.text&&(Id(t,0),o=t.ownerDocument,a=Dv(n),s.forEach((l,u)=>{const c=Ly(o,"tspan",Bo);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),gl.text=i)):(s=Pv(n,r),s!==gl.text&&(t.textContent=s,gl.text=s)),Yl(t,"font-family",_D(n)),Yl(t,"font-size",Am(n)+"px"),Yl(t,"font-style",n.fontStyle),Yl(t,"font-variant",n.fontVariant),Yl(t,"font-weight",n.fontWeight)}};function ok(e,t,n){t!==gl[e]&&(n?nHt(wg,e,t,n):Yl(wg,e,t),gl[e]=t)}function gM(e,t,n){n!==gl[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),gl[t]=n)}function jy(e,t){for(const n in t)Yl(e,n,t[n])}function Yl(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function nHt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function PLe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class OLe extends ED{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=ise();n.open("svg",hr({},TI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",DLe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Jc[n.marktype],i=r.tag,s=[SLe,r.attr];t.open("g",{class:pLe(n),"clip-path":n.clip?$ie(this,n,n.group):null},TLe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=xD(a);if(ut(u)){const c={x:0,dy:Dv(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?c:null).text(Pv(a,u[d])).close()}else t.text(Pv(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),wh(a,f=>this.mark(t,f)),t.close(),u&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):wh(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,c)=>{s[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&rHt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:X5+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function rHt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=_D(t),e["font-size"]=Am(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in a$){let a=t[o];const l=a$[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(Oie(a)&&(a=VFe(a,i.gradient,"")),e[l]=a)}for(const o in l$){const a=t[o];a!=null&&(s=s||[],s.push(`${l$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Ff={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function iHt(e){Ff.svgMarkTypes=e.svgMarkTypes??["text"],Ff.svgOnTop=e.svgOnTop??!0,Ff.debug=e.debug??!1}class LK extends ED{constructor(t){super(t),this._svgRenderer=new sse(t),this._canvasRenderer=new o$(t)}initialize(t,n,r,i,s){this._root_el=Vo(t,0,"div");const o=Vo(this._root_el,0,"div"),a=Vo(this._root_el,1,"div");return this._root_el.style.position="relative",Ff.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Ff.svgOnTop?a:o,this._canvasEl=Ff.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Ff.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Ff.svgMarkTypes.includes(s));this._svgRenderer.render(t,Ff.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Ff.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class NLe extends CD{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Vo(Vo(t,0,"div"),Ff.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const MLe="canvas",$Le="hybrid",FLe="png",LLe="svg",jLe="none",By={Canvas:MLe,PNG:FLe,SVG:LLe,Hybrid:$Le,None:jLe},ww={};ww[MLe]=ww[FLe]={renderer:o$,headless:o$,handler:CD};ww[LLe]={renderer:sse,headless:OLe,handler:xLe};ww[$Le]={renderer:LK,headless:LK,handler:NLe};ww[jLe]={};function tj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(ww[e]=t,this):ww[e]}function BLe(e,t,n){const r=[],i=new To().union(t),s=e.marktype;return s?zLe(e,i,n,r):s==="group"?VLe(e,i,n,r):at("Intersect scene must be mark node or group item.")}function zLe(e,t,n,r){if(sHt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)VLe(i[a],t,n,r);else for(const l=Jc[s].isect;a<o;++a){const u=i[a];ULe(u,t,l)&&r.push(u)}}return r}function sHt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function VLe(e,t,n,r){n&&n(e.mark)&&ULe(e,t,Jc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)zLe(i[l],t,n,r);t.translate(o,a)}return r}function ULe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const sH=new To;function HLe(e){const t=e.clip;if(pr(t))t(bD(sH.clear()));else if(t)sH.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(sH)}const oHt=1e-9;function ose(e,t,n){return e===t?!0:n==="path"?qLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:ci(e)&&ci(t)?Math.abs(e-t)<=oHt:!e||!t||!qt(e)&&!qt(t)?e==t:aHt(e,t)}function qLe(e,t){return ose(vC(e),vC(t))}function aHt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!ose(e[i],t[i],i))return!1;return typeof e==typeof t}function lHt(){KFe(),Pzt()}const xC="top",qf="left",Jf="right",Ov="bottom",uHt="top-left",cHt="top-right",dHt="bottom-left",fHt="bottom-right",ase="start",jK="middle",Ql="end",hHt="x",pHt="y",nj="group",lse="axis",use="title",mHt="frame",gHt="scope",cse="legend",WLe="row-header",GLe="row-footer",YLe="row-title",KLe="column-header",XLe="column-footer",QLe="column-title",yHt="padding",vHt="symbol",JLe="fit",ZLe="fit-x",e8e="fit-y",bHt="pad",dse="none",pO="all",BK="each",fse="flush",zy="column",Vy="row";function t8e(e){et.call(this,null,e)}$t(t8e,et,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Jc[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=mO(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===nj||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(mO(u,o))),r.role){case lse:case cse:case use:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(mO(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(mO(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return HLe(r),t.modifies("bounds")}});function mO(e,t,n){return t(e.bounds.clear(),e,n)}const pbe=":vega_identifier:";function hse(e){et.call(this,0,e)}hse.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};$t(hse,et,{transform(e,t){const n=wHt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function wHt(e){return e._signals[pbe]||(e._signals[pbe]=e.add(0))}function n8e(e){et.call(this,null,e)}$t(n8e,et,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,xHt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===nj?G8:W8;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function xHt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function r8e(e){et.call(this,null,e)}const mbe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!i8e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},i8e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),gbe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(i8e(i,s=e[n].bounds,t))return!0},_Ht=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},EHt=(e,t,n)=>{var r=e.range(),i=new To;return t===xC||t===Ov?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},ybe=e=>(e.forEach(t=>t.opacity=1),e),vbe=(e,t)=>e.reflow(t.modified()).modifies("opacity");$t(r8e,et,{transform(e,t){const n=mbe[e.method]||mbe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(ybe(i),t=vbe(t,e)),t;if(i=i.filter(_Ht),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=ybe(i),t=vbe(t,e),s.length>=3&&gbe(s,r)){do s=n(s,r);while(s.length>=3&&gbe(s,r));s.length<3&&!zr(i).opacity&&(s.length>1&&(zr(s).opacity=0),zr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=EHt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function s8e(e){et.call(this,null,e)}$t(s8e,et,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const pl=new To;function oE(e,t,n){return e[t]===n?0:(e[t]=n,1)}function CHt(e){var t=e.items[0].orient;return t===qf||t===Jf}function SHt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function THt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=SHt(s),u=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Kie(p),v=0,b=0,_,E;switch(pl.clear().union(g),g.clear(),(_=l[0])>-1&&g.union(i.items[_].bounds),(_=l[1])>-1&&g.union(i.items[_].bounds),a){case xC:v=d||0,b=-c,E=Math.max(f,Math.min(h,-g.y1)),g.add(0,-E).add(u,0),p&&gO(e,p,E,m,y,0,-1,g);break;case qf:v=-c,b=d||0,E=Math.max(f,Math.min(h,-g.x1)),g.add(-E,0).add(0,u),p&&gO(e,p,E,m,y,1,-1,g);break;case Jf:v=n+c,b=d||0,E=Math.max(f,Math.min(h,g.x2)),g.add(0,0).add(E,u),p&&gO(e,p,E,m,y,1,1,g);break;case Ov:v=d||0,b=r+c,E=Math.max(f,Math.min(h,g.y2)),g.add(0,0).add(u,E),p&&gO(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return I0(g.translate(v,b),i),oE(i,"x",v+o)|oE(i,"y",b+o)&&(i.bounds=pl,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function gO(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let c=0,d=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const bbe=(e,t)=>Math.floor(Math.min(e,t)),wbe=(e,t)=>Math.ceil(Math.max(e,t));function AHt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===nj)switch(i.role){case lse:case cse:case use:break;case WLe:o.rowheaders.push(...s);break;case GLe:o.rowfooters.push(...s);break;case KLe:o.colheaders.push(...s);break;case XLe:o.colfooters.push(...s);break;case YLe:o.rowtitle=s[0];break;case QLe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function kHt(e){return new To().set(0,0,e.width||0,e.height||0)}function IHt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function fs(e,t,n){const r=qt(e)?e[t]:e;return r??(n!==void 0?n:0)}function xbe(e){return e<0?Math.ceil(-e):0}function o8e(e,t,n){var r=!n.nodirty,i=n.bounds===fse?kHt:IHt,s=pl.set(0,0,0,0),o=fs(n.align,zy),a=fs(n.align,Vy),l=fs(n.padding,zy),u=fs(n.padding,Vy),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,g=Array(f),y=Array(d),v=0,b=Array(f),_=Array(f),E=Array(f),S,T,A,R,I,P,N,M,O,j,B;for(T=0;T<c;++T)p[T]=0;for(T=0;T<d;++T)y[T]=0;for(T=0;T<f;++T)P=t[T],I=E[T]=i(P),P.x=P.x||0,b[T]=0,P.y=P.y||0,_[T]=0,A=T%c,R=~~(T/c),m=Math.max(m,N=Math.ceil(I.x2)),v=Math.max(v,M=Math.ceil(I.y2)),p[A]=Math.max(p[A],N),y[R]=Math.max(y[R],M),h[T]=l+xbe(I.x1),g[T]=u+xbe(I.y1),r&&e.dirty(t[T]);for(T=0;T<f;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===BK)for(A=1;A<c;++A){for(B=0,T=A;T<f;T+=c)B<h[T]&&(B=h[T]);for(T=A;T<f;T+=c)h[T]=B+p[A-1]}else if(o===pO){for(B=0,T=0;T<f;++T)T%c&&B<h[T]&&(B=h[T]);for(T=0;T<f;++T)T%c&&(h[T]=B+m)}else for(o=!1,A=1;A<c;++A)for(T=A;T<f;T+=c)h[T]+=p[A-1];if(a===BK)for(R=1;R<d;++R){for(B=0,T=R*c,S=T+c;T<S;++T)B<g[T]&&(B=g[T]);for(T=R*c;T<S;++T)g[T]=B+y[R-1]}else if(a===pO){for(B=0,T=c;T<f;++T)B<g[T]&&(B=g[T]);for(T=c;T<f;++T)g[T]=B+v}else for(a=!1,R=1;R<d;++R)for(T=R*c,S=T+c;T<S;++T)g[T]+=y[R-1];for(O=0,T=0;T<f;++T)O=h[T]+(T%c?O:0),b[T]+=O-t[T].x;for(A=0;A<c;++A)for(j=0,T=A;T<f;T+=c)j+=g[T],_[T]+=j-t[T].y;if(o&&fs(n.center,zy)&&d>1)for(T=0;T<f;++T)I=o===pO?m:p[T%c],O=I-E[T].x2-t[T].x-b[T],O>0&&(b[T]+=O/2);if(a&&fs(n.center,Vy)&&c!==1)for(T=0;T<f;++T)I=a===pO?v:y[~~(T/c)],j=I-E[T].y2-t[T].y-_[T],j>0&&(_[T]+=j/2);for(T=0;T<f;++T)s.union(E[T].translate(b[T],_[T]));switch(O=fs(n.anchor,hHt),j=fs(n.anchor,pHt),fs(n.anchor,zy)){case Ql:O-=s.width();break;case jK:O-=s.width()/2}switch(fs(n.anchor,Vy)){case Ql:j-=s.height();break;case jK:j-=s.height()/2}for(O=Math.round(O),j=Math.round(j),s.clear(),T=0;T<f;++T)t[T].mark.bounds.clear();for(T=0;T<f;++T)P=t[T],P.x+=b[T]+=O,P.y+=_[T]+=j,s.union(P.mark.bounds.union(P.bounds.translate(b[T],_[T]))),r&&e.dirty(P);return s}function RHt(e,t,n){var r=AHt(t),i=r.marks,s=n.bounds===fse?DHt:PHt,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,d,f,h,p,m,g;const y=o8e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=fs(n.headerBand,Vy,null),c=yO(e,r.rowheaders,i,a,l,-fs(o,"rowHeader"),bbe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=fs(n.headerBand,zy,null),d=yO(e,r.colheaders,i,a,a,-fs(o,"columnHeader"),bbe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=fs(n.footerBand,Vy,null),f=yO(e,r.rowfooters,i,a,l,fs(o,"rowFooter"),wbe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=fs(n.footerBand,zy,null),h=yO(e,r.colfooters,i,a,a,fs(o,"columnFooter"),wbe,1,s,"y2",u-a,1,a,m)),r.rowtitle&&(p=fs(n.titleAnchor,Vy),g=fs(o,"rowTitle"),g=p===Ql?f+g:c-g,m=fs(n.titleBand,Vy,.5),_be(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=fs(n.titleAnchor,zy),g=fs(o,"columnTitle"),g=p===Ql?h+g:d-g,m=fs(n.titleBand,zy,.5),_be(e,r.coltitle,g,1,y,m))}function DHt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function PHt(e,t){return e.bounds[t]}function yO(e,t,n,r,i,s,o,a,l,u,c,d,f,h){var p=n.length,m=0,g=0,y,v,b,_,E,S,T,A,R;if(!p)return m;for(y=c;y<p;y+=d)n[y]&&(m=o(m,l(n[y],u)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,_=t.length;v<_;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,_=t.length;v<_;++v,y+=d){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=f);a?(A=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),R=m):(A=m,R=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(A-(S.x||0),R-(S.y||0))),S.x=A,S.y=R,e.dirty(S),g=o(g,E[u])}return g}function _be(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function OHt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function NHt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function MHt(e,t,n,r,i,s,o){const a=OHt(n,t),l=NHt(e,a("offset",0)),u=a("anchor",ase),c=u===Ql?1:u===jK?.5:0,d={align:BK,bounds:a("bounds",fse),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case qf:d.anchor={x:Math.floor(r.x1)-l,column:Ql,y:c*(o||r.height()+2*r.y1),row:u};break;case Jf:d.anchor={x:Math.ceil(r.x2)+l,y:c*(o||r.height()+2*r.y1),row:u};break;case xC:d.anchor={y:Math.floor(i.y1)-l,row:Ql,x:c*(s||i.width()+2*i.x1),column:u};break;case Ov:d.anchor={y:Math.ceil(i.y2)+l,x:c*(s||i.width()+2*i.x1),column:u};break;case uHt:d.anchor={x:l,y:l};break;case cHt:d.anchor={x:s-l,y:l,column:Ql};break;case dHt:d.anchor={x:l,y:o-l,row:Ql};break;case fHt:d.anchor={x:s-l,y:o-l,column:Ql,row:Ql};break}return d}function $Ht(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),LHt(e,n,n.items[0].items[0]),s=FHt(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===vHt&&jHt(n.items[0].items[0].items[0].items),i!==dse&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,I0(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function FHt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function LHt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&y2(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,c=r-o.y;switch(o.orient){case qf:i+=Math.ceil(o.bounds.width())+l;break;case Jf:case Ov:break;default:s+=o.bounds.height()+l}switch((i||s)&&y2(e,n,i,s),o.orient){case qf:c+=w_(t,n,o,a,1,1);break;case Jf:u+=w_(t,n,o,Ql,0,0)+l,c+=w_(t,n,o,a,1,1);break;case Ov:u+=w_(t,n,o,a,0,0),c+=w_(t,n,o,Ql,-1,0,1)+l;break;default:u+=w_(t,n,o,a,0,0)}(u||c)&&y2(e,o,u,c),(u=Math.round(o.bounds.x1-r))<0&&(y2(e,n,-u,0),y2(e,o,-u,0))}}function w_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,d=l&&s?c:0,f=l&&s?0:c,h=i<=0?0:Kie(n);return Math.round(r===ase?d:r===Ql?f-h:.5*(c-h))}function y2(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function jHt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function BHt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,d=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===qf||a===Jf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==nj?a===qf?(p=i.y2,h=i.y1):a===Jf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===qf&&(p=r,h=0),b=l===ase?p:l===Ql?h:(p+h)/2,f&&f.text){switch(a){case xC:case Ov:v=d.bounds.height()+c;break;case qf:y=d.bounds.width()+c;break;case Jf:y=-d.bounds.width()-c;break}pl.clear().union(f.bounds),pl.translate(y-(f.x||0),v-(f.y||0)),oE(f,"x",y)|oE(f,"y",v)&&(e.dirty(f),f.bounds.clear().union(pl),f.mark.bounds.clear().union(pl),e.dirty(f)),pl.clear().union(f.bounds)}else pl.clear();switch(pl.union(d.bounds),a){case xC:m=b,g=i.y1-pl.height()-u;break;case qf:m=i.x1-pl.width()-u,g=b;break;case Jf:m=i.x2+pl.width()+u,g=b;break;case Ov:m=b,g=i.y2+u;break;default:m=s.x,g=s.y}return oE(s,"x",m)|oE(s,"y",g)&&(pl.translate(m,g),e.dirty(s),s.bounds.clear().union(pl),t.bounds.clear().union(pl),e.dirty(s)),s.bounds}function a8e(e){et.call(this,null,e)}$t(a8e,et,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&RHt(n,r,e.layout),VHt(n,r,e)}),zHt(e.mark.group)?t.reflow():t}});function zHt(e){return e&&e.mark.role!=="legend-entry"}function VHt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new To().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],c,d,f,h,p,m;for(p=0,m=r.length;p<m;++p)switch(d=r[p],d.role){case lse:h=CHt(d)?a:l,h.union(THt(e,d,i,s));break;case use:c=d;break;case cse:u.push($Ht(e,d));break;case mHt:case gHt:case WLe:case GLe:case YLe:case KLe:case XLe:case QLe:a.union(d.bounds),l.union(d.bounds);break;default:o.union(d.bounds)}if(u.length){const g={};u.forEach(y=>{f=y.orient||Jf,f!==dse&&(g[f]||(g[f]=[])).push(y)});for(const y in g){const v=g[y];o8e(e,v,MHt(v,y,n.legends,a,l,i,s))}u.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===JLe||n.autosize.type===ZLe||n.autosize.type===e8e))switch(y.orient){case qf:case Jf:o.add(v.x1,0).add(v.x2,0);break;case xC:case Ov:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(l),c&&o.union(BHt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),UHt(e,t,o,n)}function UHt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===yHt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===dse?(u=0,d=0,l=o,c=a):s===JLe?(l=Math.max(0,o-u-f),c=Math.max(0,a-d-h)):s===ZLe?(l=Math.max(0,o-u-f),a=c+d+h):s===e8e?(o=l+u+f,c=Math.max(0,a-d-h)):s===bHt&&(o=l+u+f,a=c+d+h),e._resizeView(o,a,l,c,[u,d],i.resize)}const HHt=Object.freeze(Object.defineProperty({__proto__:null,bound:t8e,identifier:hse,mark:n8e,overlap:r8e,render:s8e,viewlayout:a8e},Symbol.toStringTag,{value:"Module"}));function l8e(e){et.call(this,null,e)}$t(l8e,et,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Die(s,o,e.minstep),l=e.format||MFe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?NFe(s,e.values,a):Pie(s,a);return i&&(r.rem=i),i=u.map((c,d)=>yi({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push(yi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function u8e(e){et.call(this,null,e)}function qHt(){return yi({})}function WHt(e){const t=jS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}$t(u8e,et,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||qHt,s=e.key||Cn,o=this.value;return ut(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&at("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=WHt(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function c8e(e){et.call(this,null,e)}$t(c8e,et,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(ut(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||fy,l=i.enter||fy,u=i.exit||fy,c=(s&&!o?i[s]:a)||fy;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==fy&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==fy&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),o||c!==fy){const d=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(d,f=>{const h=l(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function d8e(e){et.call(this,[],e)}$t(d8e,et,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||lM,o=e.scale,a=+e.limit,l=Die(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===lM,c=e.format||jFe(n,o,l,s,e.formatSpecifier,e.formatType,u),d=e.values||LFe(o,l),f,h,p,m,g;return i&&(r.rem=i),s===lM?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),g=!0):i=d,pr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Nl(m=p||8),i=i.map((y,v)=>yi({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=d[i.length],i.push(yi({index:i.length,label:`${d.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===bzt?(f=o.domain(),h=DFe(o,f[0],zr(f)),d.length<3&&!e.values&&f[0]!==zr(f)&&(d=[f[0],zr(f)]),i=d.map((y,v)=>yi({index:v,label:c(y,v,d),value:y,perc:h(y)}))):(p=d.length-1,h=Rzt(o),i=d.map((y,v)=>yi({index:v,label:c(y,v,d),value:y,perc:v?h(y):0,perc2:v===p?1:h(d[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const GHt=e=>e.source.x,YHt=e=>e.source.y,KHt=e=>e.target.x,XHt=e=>e.target.y;function pse(e){et.call(this,{},e)}pse.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};$t(pse,et,{transform(e,t){var n=e.sourceX||GHt,r=e.sourceY||YHt,i=e.targetX||KHt,s=e.targetY||XHt,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=Ebe.get(l+"-"+a)||Ebe.get(l);return u||at("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=u(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const f8e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,QHt=(e,t,n,r)=>f8e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),h8e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},JHt=(e,t,n,r)=>h8e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),p8e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},ZHt=(e,t,n,r)=>p8e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),eqt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,tqt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,nqt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},rqt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},iqt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},sqt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},Ebe=jS({line:f8e,"line-radial":QHt,arc:h8e,"arc-radial":JHt,curve:p8e,"curve-radial":ZHt,"orthogonal-horizontal":eqt,"orthogonal-vertical":tqt,"orthogonal-radial":nqt,"diagonal-horizontal":rqt,"diagonal-vertical":iqt,"diagonal-radial":sqt});function mse(e){et.call(this,null,e)}mse.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};$t(mse,et,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||$S,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,d=o,f=(a-o)/ENe(u),h=Xu(c),p,m,g;for(e.sort&&h.sort((y,v)=>u[y]-u[v]),p=0;p<c;++p)g=u[h[p]],m=l[h[p]],m[r]=d,m[i]=d+=g*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const oqt=5;function aqt(e){const t=e.type;return!e.bins&&(t===mC||t===fD||t===hD)}function m8e(e){return kie(e)&&e!==Vp}const lqt=vh(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function g8e(e){et.call(this,null,e),this.modified(!0)}$t(g8e,et,{transform(e,t){var n=t.dataflow,r=this.value,i=uqt(e);(!r||i!==r.type)&&(this.value=r=di(i)());for(i in e)if(!lqt[i]){if(i==="padding"&&m8e(r.type))continue;pr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return mqt(r,e,pqt(r,e,dqt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uqt(e){var t=e.type,n="",r;return t===Vp?Vp+"-"+mC:(cqt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Vp+"-":r===3?US+"-":""),(n+t||mC).toLowerCase())}function cqt(e){const t=e.type;return kie(t)&&t!==vw&&t!==bw&&(e.scheme||e.range&&e.range.length&&e.range.every(Wt))}function dqt(e,t,n){const r=fqt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&aqt(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return m8e(s)&&t.padding&&i[0]!==zr(i)&&(i=hqt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(y8e(s,i,n)),s===Cie&&e.unknown(t.domainImplicit?GY:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Die(e,t.nice)||null),i.length}function fqt(e,t,n){return t?(e.domain(y8e(e.type,t,n)),t.length):-1}function hqt(e,t,n,r,i,s){var o=Math.abs(zr(n)-n[0]),a=o/(o-2*r),l=e===s0?gre(t,null,a):e===hD?W5(t,null,a,.5):e===fD?W5(t,null,a,i||1):e===z8?yre(t,null,a,s||1):mre(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function y8e(e,t,n){if(TFe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Ot(t))}return t}function pqt(e,t,n){let r=t.bins;if(r&&!ut(r)){const i=e.domain(),s=i[0],o=zr(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||at("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=Xu(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Sie&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function mqt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=gqt(r,t,n);else if(t.scheme&&(s=yqt(r,t,n),pr(s))){if(e.interpolator)return e.interpolator(s);at(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&AFe(r))return e.interpolator(H8(zK(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Iie(t.interpolate,t.interpolateGamma)):pr(e.round)?e.round(i):pr(e.rangeRound)&&e.interpolate(i?YR:A0),s&&e.range(zK(s,t.reverse))}function gqt(e,t,n){e!==wFe&&e!==TK&&at("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===TK?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Eie(n,i,r)]}function yqt(e,t,n){var r=t.schemeExtent,i,s;return ut(t.scheme)?s=H8(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Rie(i),s||at(`Unrecognized scheme name: ${t.scheme}`)),n=e===U8?n+1:e===Sie?n-1:e===gC||e===V8?+t.schemeCount||oqt:n,AFe(e)?Cbe(s,r,t.reverse):pr(s)?RFe(Cbe(s,r),n):e===Cie?s:s.slice(0,n)}function Cbe(e,t,n){return pr(e)&&(t||n)?IFe(e,zK(t||[0,1],n)):e}function zK(e,t){return t?e.slice().reverse():e}function v8e(e){et.call(this,null,e)}$t(v8e,et,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(cx(e.sort)),this.modified(n),t}});const Sbe="zero",b8e="center",w8e="normalize",x8e=["y0","y1"];function gse(e){et.call(this,null,e)}gse.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Sbe,values:[Sbe,b8e,w8e]},{name:"as",type:"string",array:!0,length:2,default:x8e}]};$t(gse,et,{transform(e,t){var n=e.as||x8e,r=n[0],i=n[1],s=cx(e.sort),o=e.field||$S,a=e.offset===b8e?vqt:e.offset===w8e?bqt:wqt,l,u,c,d;for(l=xqt(t.source,e.groupby,s,o),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,o,r,i);return t.reflow(e.modified()).modifies(n)}});function vqt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function bqt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=o,c[i]=o=s*(u+=Math.abs(n(c)))}function wqt(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=o,c[i]=o+=u):(c[r]=s,c[i]=s+=u)}function xqt(e,t,n,r){var i=[],s=m=>m(c),o,a,l,u,c,d,f,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)c=e[a],d=t.map(s),f=o[d],f||(o[d]=f=[],i.push(f)),f.push(c);for(d=0,p=0,u=i.length;d<u;++d){for(f=i[d],a=0,h=0,l=f.length;a<l;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const _qt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:l8e,datajoin:u8e,encode:c8e,legendentries:d8e,linkpath:pse,pie:mse,scale:g8e,sortitems:v8e,stack:gse},Symbol.toStringTag,{value:"Module"}));var Eqt=Math.abs,VK=Math.cos,u$=Math.sin,Cqt=1e-6,_8e=Math.PI,UK=_8e/2,Tbe=Sqt(2);function Abe(e){return e>1?UK:e<-1?-UK:Math.asin(e)}function Sqt(e){return e>0?Math.sqrt(e):0}function Tqt(e,t){var n=e*u$(t),r=30,i;do t-=i=(t+u$(t)-n)/(1+VK(t));while(Eqt(i)>Cqt&&--r>0);return t/2}function Aqt(e,t,n){function r(i,s){return[e*i*VK(s=Tqt(n,s)),t*u$(s)]}return r.invert=function(i,s){return s=Abe(s/t),[i/(e*VK(s)),Abe((2*s+u$(2*s))/n)]},r}var kqt=Aqt(Tbe/UK,Tbe,_8e);function Iqt(){return Sm(kqt).scale(169.529)}const Rqt=tMe(),HK=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Dqt(e,t){return function n(){const r=t();return r.type=e,r.path=tMe().projection(r),r.copy=r.copy||function(){const i=n();return HK.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},CFe(r)}}function yse(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(c$[e]=Dqt(e,t),this):c$[e]||null}function E8e(e){return e&&e.path||Rqt}const c$={albers:rMe,albersusa:R4t,azimuthalequalarea:D4t,azimuthalequidistant:P4t,conicconformal:M4t,conicequalarea:k5,conicequidistant:L4t,equalEarth:B4t,equirectangular:$4t,gnomonic:z4t,identity:V4t,mercator:O4t,mollweide:Iqt,naturalEarth1:U4t,orthographic:H4t,stereographic:q4t,transversemercator:W4t};for(const e in c$)yse(e,c$[e]);function Pqt(){}const Jm=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function C8e(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],d=[];return s(l,u,f=>{n(f,l,u),Oqt(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,p=c.length,m;h<p;++h)if(Nqt((m=c[h])[0],f)!==-1){m.push(f);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var d=[],f=[],h,p,m,g,y,v;for(h=p=-1,g=l[0]>=u,Jm[g<<1].forEach(b);++h<e-1;)m=g,g=l[h+1]>=u,Jm[m|g<<1].forEach(b);for(Jm[g<<0].forEach(b);++p<t-1;){for(h=-1,g=l[p*e+e]>=u,y=l[p*e]>=u,Jm[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=l[p*e+e+h+1]>=u,v=y,y=l[p*e+h+1]>=u,Jm[m|g<<1|y<<2|v<<3].forEach(b);Jm[g|y<<3].forEach(b)}for(h=-1,y=l[p*e]>=u,Jm[y<<2].forEach(b);++h<e-1;)v=y,y=l[p*e+h+1]>=u,Jm[y<<2|v<<3].forEach(b);Jm[y<<3].forEach(b);function b(_){var E=[_[0][0]+h,_[0][1]+p],S=[_[1][0]+h,_[1][1]+p],T=o(E),A=o(S),R,I;(R=f[T])?(I=d[A])?(delete f[R.end],delete d[I.start],R===I?(R.ring.push(S),c(R.ring)):d[R.start]=f[I.end]={start:R.start,end:I.end,ring:R.ring.concat(I.ring)}):(delete f[R.end],R.ring.push(S),f[R.end=A]=R):(R=d[A])?(I=f[T])?(delete d[R.start],delete f[I.end],R===I?(R.ring.push(S),c(R.ring)):d[I.start]=f[R.end]={start:I.start,end:R.end,ring:I.ring.concat(R.ring)}):(delete d[R.start],R.ring.unshift(E),d[R.start=T]=R):d[T]=f[A]={start:T,end:A,ring:[E,S]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var f=d[0],h=d[1],p=f|0,m=h|0,g,y=u[m*e+p];f>0&&f<e&&p===f&&(g=u[m*e+p-1],d[0]=f+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=u[(m-1)*e+p],d[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||at("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:Pqt,r):n===a},r}function Oqt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Nqt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=Mqt(e,t[n]))return i;return 0}function Mqt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if($qt(l,d,t))return 0;c>r!=h>r&&n<(f-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function $qt(e,t,n){var r;return Fqt(e,t,n)&&Lqt(e[r=+(e[0]===t[0])],n[r],t[r])}function Fqt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Lqt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function S8e(e,t,n){return function(r){var i=om(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?Sv(s,o,e):a/(e+1);return Xu(s+l,o,l)}}function vse(e){et.call(this,null,e)}vse.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};$t(vse,et,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ol,s=C8e().smooth(e.smooth!==!1),o=e.thresholds||jqt(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),d=s.size([c.width,c.height])(c.values,ut(o)?o:o(c.values));Bqt(d,c,u,e),d.forEach(f=>{l.push(P8(u,yi(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function jqt(e,t,n){const r=S8e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>ev(t(i).values)))}function Bqt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(pr(i)&&(i=i(n,r)),pr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ci(i)?i:i[0])||1,a=(ci(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(T8e(t,o,a,l,u))}function T8e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*t+r,d[1]=(d[1]-o)*n+i}return function(d){return d.coordinates.forEach(l),d}}function kbe(e,t,n){const r=e>=0?e:Fre(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function oH(e){return pr(e)?e:Nl(+e)}function A8e(){var e=l=>l[0],t=l=>l[1],n=$S,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const c=kbe(r[0],l,e)>>o,d=kbe(r[1],l,t)>>o,f=c?c+2:0,h=d?d+2:0,p=2*f+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;l.forEach(_=>{const E=f+(+e(_)>>o),S=h+(+t(_)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(_))}),c>0&&d>0?(x_(p,m,g,y,c),__(p,m,y,g,d),x_(p,m,g,y,c),__(p,m,y,g,d),x_(p,m,g,y,c),__(p,m,y,g,d)):c>0?(x_(p,m,g,y,c),x_(p,m,y,g,c),x_(p,m,g,y,c),v=y):d>0&&(__(p,m,g,y,d),__(p,m,y,g,d),__(p,m,g,y,d),v=y);const b=u?Math.pow(2,-2*o):1/ENe(v);for(let _=0,E=p*m;_<E;++_)v[_]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=oH(l),a):e},a.y=function(l){return arguments.length?(t=oH(l),a):t},a.weight=function(l){return arguments.length?(n=oH(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||at("invalid size"),i=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||at("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=Ht(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&at("invalid bandwidth"),r=l,a):r},a}function x_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function __(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function bse(e){et.call(this,null,e)}bse.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const zqt=["x","y","weight","size","cellSize","bandwidth"];function k8e(e,t){return zqt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}$t(bse,et,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Vqt(r,e.groupby),s=(e.groupby||[]).map(Bs),o=k8e(A8e(),e),a=e.as||"grid",l=[];function u(c,d){for(let f=0;f<s.length;++f)c[s[f]]=d[f];return c}return l=i.map(c=>yi(u({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Vqt(e,t){var n=[],r=c=>c(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function wse(e){et.call(this,null,e)}wse.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};$t(wse,et,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=C8e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||S8e(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=k8e(A8e(),e)(i,!0),l=T8e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=ut(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(yi),n}});const qK="Feature",xse="FeatureCollection",Uqt="MultiPoint";function _se(e){et.call(this,null,e)}_se.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};$t(_se,et,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ol,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Al(a))||s&&t.modified(Al(s))||o&&t.modified(Al(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),s&&o&&(t.visit(l,c=>{var d=s(c),f=o(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:qK,geometry:{type:Uqt,coordinates:r}})),this.value={type:xse,features:n}}});function Ese(e){et.call(this,null,e)}Ese.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};$t(Ese,et,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ol,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=E8e(e.projection),n.materialize().reflow()):o=i===Ol||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Hqt(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function Hqt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Cse(e){et.call(this,null,e)}Cse.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};$t(Cse,et,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(c){const d=n([r(c),i(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function Sse(e){et.call(this,null,e)}Sse.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};$t(Sse,et,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=qqt(E8e(e.projection),e.field||Zd("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function qqt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Tse(e){et.call(this,[],e),this.generator=u4t()}Tse.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};$t(Tse,et,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)pr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(k$e(n[0],i)):t.add.push(yi(i)),n[0]=i,t}});function Ase(e){et.call(this,null,e)}Ase.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};$t(Ase,et,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ol,s=Gqt(e.opacity,e),o=Wqt(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?ev(n.map(u=>ev(i(u).values))):0};return n.forEach(u=>{const c=i(u),d=hr({},u,l);r||(d.$max=ev(c.values||[])),u[a]=Yqt(c,d,o.dep?o:Nl(o(d)),s.dep?s:Nl(s(d)))}),t.reflow(!0).modifies(a)}});function Wqt(e,t){let n;return pr(e)?(n=r=>Tv(e(r,t)),n.dep=I8e(e)):n=Nl(Tv(e||"#888")),n}function Gqt(e,t){let n;return pr(e)?(n=r=>e(r,t),n.dep=I8e(e)):e?n=Nl(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function I8e(e){if(!pr(e))return!1;const t=vh(Al(e));return t.$x||t.$y||t.$value||t.$max}function Yqt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,c=e.values,d=c?g=>c[g]:Ay,f=sv(l-o,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),m=p.data;for(let g=a,y=0;g<u;++g){t.$y=g-a;for(let v=o,b=g*i;v<l;++v,y+=4){t.$x=v-o,t.$value=d(v+b);const _=n(t);m[y+0]=_.r,m[y+1]=_.g,m[y+2]=_.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),f}function R8e(e){et.call(this,null,e),this.modified(!0)}$t(R8e,et,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Xqt(e.type),HK.forEach(r=>{e[r]!=null&&Ibe(n,r,e[r])})):HK.forEach(r=>{e.modified(r)&&Ibe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Kqt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Kqt(e,t){const n=Qqt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function Xqt(e){const t=yse((e||"mercator").toLowerCase());return t||at("Unrecognized projection type: "+e),t()}function Ibe(e,t,n){pr(e[t])&&e[t](n)}function Qqt(e){return e=Ht(e),e.length===1?e[0]:{type:xse,features:e.reduce((t,n)=>t.concat(Jqt(n)),[])}}function Jqt(e){return e.type===xse?e.features:Ht(e).filter(t=>t!=null).map(t=>t.type===qK?t:{type:qK,geometry:t})}const Zqt=Object.freeze(Object.defineProperty({__proto__:null,contour:wse,geojson:_se,geopath:Ese,geopoint:Cse,geoshape:Sse,graticule:Tse,heatmap:Ase,isocontour:vse,kde2d:bse,projection:R8e},Symbol.toStringTag,{value:"Module"})),Rbe={center:ZOt,collide:vNt,nbody:INt,link:wNt,x:RNt,y:DNt},xA="forces",WK=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],eWt=["static","iterations"],D8e=["x","y","vx","vy"];function kse(e){et.call(this,null,e)}kse.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:D8e}]};$t(kse,et,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(WK),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&P8e(n,e,0,t)):(this.value=n=nWt(t.source,e),n.on("tick",tWt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(eWt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==xA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(D8e)}});function tWt(e,t){return()=>e.touch(t).run()}function nWt(e,t){const n=kNt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),P8e(n,t,!0).on("end",()=>s=!0)}function P8e(e,t,n,r){var i=Ht(t.forces),s,o,a,l;for(s=0,o=WK.length;s<o;++s)a=WK[s],a!==xA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=xA+s,a=n||t.modified(xA,s)?iWt(i[s]):r&&rWt(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(xA+s,null);return e.numForces=i.length,e}function rWt(e,t){var n,r;for(n in e)if(pr(r=e[n])&&t.modified(Al(r)))return 1;return 0}function iWt(e){var t,n;Qt(Rbe,e.force)||at("Unrecognized force: "+e.force),t=Rbe[e.force]();for(n in e)pr(t[n])&&sWt(t[n],e[n],e);return t}function sWt(e,t,n){e(pr(t)?r=>t(r,n):t)}const oWt=Object.freeze(Object.defineProperty({__proto__:null,force:kse},Symbol.toStringTag,{value:"Module"}));function GK(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Ise(e){et.call(this,null,e)}Ise.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const aWt=e=>e.values;$t(Ise,et,{transform(e,t){t.source||at("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&D8(o.data)&&i.rem.push(o.data)}),this.value=s=wne({values:Ht(e.keys).reduce((o,a)=>(o.key(a),o),lWt()).entries(i.source)},aWt),n&&s.each(o=>{o.children&&(o=yi(o.data),i.add.push(o),i.source.push(o))}),GK(s,Cn,Cn)),i.source.root=s,i}});function lWt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let c=-1,d,f,h;for(;++c<o;)d=a(f=i[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function R0(e){et.call(this,null,e)}const uWt=(e,t)=>e.parent===t.parent?1:2;$t(R0,et,{transform(e,t){(!t.source||!t.source.root)&&at(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(cx(e.sort,o=>o.data)),cWt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?uWt:$S);try{this.value=n(i)}catch(o){at(o)}return i.each(o=>dWt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function cWt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function dWt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const YK=["x","y","r","depth","children"];function Rse(e){R0.call(this,e)}Rse.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:YK.length,default:YK}]};$t(Rse,R0,{layout:DMt,params:["radius","size","padding"],fields:YK});const KK=["x0","y0","x1","y1","depth","children"];function Dse(e){R0.call(this,e)}Dse.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:KK.length,default:KK}]};$t(Dse,R0,{layout:PMt,params:["size","round","padding"],fields:KK});function Pse(e){et.call(this,null,e)}Pse.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};$t(Pse,et,{transform(e,t){t.source||at("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?GK(q0e().id(e.key).parentId(e.parentKey)(i.source),e.key,ef):GK(q0e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Dbe={tidy:VMt,cluster:eMt},XK=["x","y","depth","children"];function Ose(e){R0.call(this,e)}Ose.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:XK.length,default:XK}]};$t(Ose,R0,{layout(e){const t=e||"tidy";if(Qt(Dbe,t))return Dbe[t]();at("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:XK});function Nse(e){et.call(this,[],e)}Nse.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};$t(Nse,et,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||at("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Cn(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[Cn(a)]&&s[Cn(l)]&&i.add.push(yi({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Cn(o)]=1),n.forEach(o=>{(s[Cn(o.source)]||s[Cn(o.target)])&&i.mod.push(o)})),i}});const Pbe={binary:HMt,dice:JR,slice:e8,slicedice:qMt,squarify:xMe,resquarify:WMt},QK=["x0","y0","x1","y1","depth","children"];function Mse(e){R0.call(this,e)}Mse.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:QK.length,default:QK}]};$t(Mse,R0,{layout(){const e=UMt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Qt(Pbe,t)?e.tile(Pbe[t]):at("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:QK});const fWt=Object.freeze(Object.defineProperty({__proto__:null,nest:Ise,pack:Rse,partition:Dse,stratify:Pse,tree:Ose,treelinks:Nse,treemap:Mse},Symbol.toStringTag,{value:"Module"})),aH=4278190080;function hWt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function pWt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=sv(s,o).getContext("2d"),u=sv(s,o).getContext("2d"),c=a&&sv(s,o).getContext("2d");n.forEach(A=>yM(l,A,!1)),yM(u,t,!1),a&&yM(c,t,!0);const d=lH(l,s,o),f=lH(u,s,o),h=a&&lH(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,_,E,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)_=y*s+g,E=d[_]&aH,T=f[_]&aH,S=a&&h[_]&aH,(E||S||T)&&(v=e(g),b=e(y),!i&&(E||T)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function lH(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function yM(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>yM(e,s.items,n))}):Jc[r].draw(e,{items:n?t.map(mWt):t})}function mWt(e){const t=P8(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Zm=5,ql=31,AI=32,xy=new Uint32Array(AI+1),zf=new Uint32Array(AI+1);zf[0]=0;xy[0]=~zf[0];for(let e=1;e<=AI;++e)zf[e]=zf[e-1]<<1|1,xy[e]=~zf[e];function gWt(e,t){const n=new Uint32Array(~~((e*t+AI)/AI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Zm]&1<<(a&ql)},set:(s,o)=>{const a=o*e+s;r(a>>>Zm,1<<(a&ql))},clear:(s,o)=>{const a=o*e+s;i(a>>>Zm,~(1<<(a&ql)))},getRange:(s,o,a,l)=>{let u=l,c,d,f,h;for(;u>=o;--u)if(c=u*e+s,d=u*e+a,f=c>>>Zm,h=d>>>Zm,f===h){if(n[f]&xy[c&ql]&zf[(d&ql)+1])return!0}else{if(n[f]&xy[c&ql]||n[h]&zf[(d&ql)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Zm,f=c>>>Zm,d===f)r(d,xy[u&ql]&zf[(c&ql)+1]);else for(r(d,xy[u&ql]),r(f,zf[(c&ql)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Zm,f=c>>>Zm,d===f)i(d,zf[u&ql]|xy[(c&ql)+1]);else for(i(d,zf[u&ql]),i(f,xy[(c&ql)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function yWt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>gWt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function vWt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,c=jc.width(o.datum,o.datum.text);let d=0,f,h,p,m,g,y,v;for(let b=0;b<l;++b)f=a[b].x,p=a[b].y,h=a[b].x2===void 0?f:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(f+h)/2,y=(p+m)/2,v=Math.abs(h-f+m-p),v>=d&&(d=v,o.x=g,o.y=y);return g=c/2,y=u/2,f=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function d$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Uy(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),c=e(t+l),d=e(n-(s=s/2)),f=e(n+s);return o.outOfBounds(u,d,c,f)||o.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}function bWt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,c,d,f,h){const p=e.invert(u),m=e.invert(c);let g=d,y=s,v;if(!d$(p,m,f,h,i,s)&&!Uy(e,p,m,h,f,g,o,a)&&!Uy(e,p,m,h,f,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Uy(e,p,m,h,f,v,o,a)?y=v:g=v;if(g>d)return[p,m,g,!0]}}return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=jc.width(u.datum,u.datum.text);let p=n?f:0,m=!1,g=!1,y=0,v,b,_,E,S,T,A,R,I,P,N,M,O,j,B,H,q;for(let G=0;G<d;++G){for(v=c[G].x,_=c[G].y,b=c[G].x2===void 0?v:c[G].x2,E=c[G].y2===void 0?_:c[G].y2,v>b&&(q=v,v=b,b=q),_>E&&(q=_,_=E,E=q),I=e(v),N=e(b),P=~~((I+N)/2),M=e(_),j=e(E),O=~~((M+j)/2),A=P;A>=I;--A)for(R=O;R>=M;--R)H=l(A,R,p,h,f),H&&([u.x,u.y,p,m]=H);for(A=P;A<=N;++A)for(R=O;R<=j;++R)H=l(A,R,p,h,f),H&&([u.x,u.y,p,m]=H);!m&&!n&&(B=Math.abs(b-v+E-_),S=(v+b)/2,T=(_+E)/2,B>=y&&!d$(S,T,h,f,i,s)&&!Uy(e,S,T,f,h,f,o,null)&&(y=B,u.x=S,u.y=T,g=!0))}return m||g?(S=h/2,T=f/2,o.setRange(e(u.x-S),e(u.y-T),e(u.x+S),e(u.y+T)),u.align="center",u.baseline="middle",!0):!1}}const wWt=[-1,-1,1,1],xWt=[-1,1,-1,1];function _Wt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=jc.width(u.datum,u.datum.text),p=[];let m=n?f:0,g=!1,y=!1,v=0,b,_,E,S,T,A,R,I,P,N,M,O;for(let j=0;j<d;++j){for(b=c[j].x,E=c[j].y,_=c[j].x2===void 0?b:c[j].x2,S=c[j].y2===void 0?E:c[j].y2,p.push([e((b+_)/2),e((E+S)/2)]);p.length;)if([R,I]=p.pop(),!(o.get(R,I)||a.get(R,I)||l.get(R,I))){l.set(R,I);for(let B=0;B<4;++B)T=R+wWt[B],A=I+xWt[B],l.outOfBounds(T,A,T,A)||p.push([T,A]);if(T=e.invert(R),A=e.invert(I),P=m,N=s,!d$(T,A,h,f,i,s)&&!Uy(e,T,A,f,h,P,o,a)&&!Uy(e,T,A,f,h,f,o,null)){for(;N-P>=1;)M=(P+N)/2,Uy(e,T,A,f,h,M,o,a)?N=M:P=M;P>m&&(u.x=T,u.y=A,m=P,g=!0)}}!g&&!n&&(O=Math.abs(_-b+S-E),T=(b+_)/2,A=(E+S)/2,O>=v&&!d$(T,A,h,f,i,s)&&!Uy(e,T,A,f,h,f,o,null)&&(v=O,u.x=T,u.y=A,y=!0))}return g||y?(T=h/2,A=f/2,o.setRange(e(u.x-T),e(u.y-A),e(u.x+T),e(u.y+A)),u.align="center",u.baseline="middle",!0):!1}}const EWt=["right","center","left"],CWt=["bottom","middle","top"];function SWt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let f=u.textWidth??0,h,p,m,g,y,v,b,_,E,S,T,A,R,I,P;for(let N=0;N<l;++N){if(h=(n[N]&3)-1,p=(n[N]>>>2&3)-1,m=h===0&&p===0||r[N]<0,g=h&&p?Math.SQRT1_2:1,y=r[N]<0?-1:1,v=c[1+h]+r[N]*h*g,T=c[4+p]+y*d*p/2+r[N]*p*g,_=T-d/2,E=T+d/2,A=e(v),I=e(_),P=e(E),!f)if(Obe(A,A,I,P,o,a,v,v,_,E,c,m))f=jc.width(u.datum,u.datum.text);else continue;if(S=v+y*f*h/2,v=S-f/2,b=S+f/2,A=e(v),R=e(b),Obe(A,R,I,P,o,a,v,b,_,E,c,m))return u.x=h?h*y<0?b:v:S,u.y=p?p*y<0?E:_:T,u.align=EWt[h*y+1],u.baseline=CWt[p*y+1],o.setRange(A,I,R,P),!0}return!1}}function Obe(e,t,n,r,i,s,o,a,l,u,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&s||i).getRange(e,n,t,r))}const uH=0,cH=4,dH=8,fH=0,hH=1,pH=2,TWt={"top-left":uH+fH,top:uH+hH,"top-right":uH+pH,left:cH+fH,middle:cH+hH,right:cH+pH,"bottom-left":dH+fH,bottom:dH+hH,"bottom-right":dH+pH},AWt={naive:vWt,"reduced-search":bWt,floodfill:_Wt};function kWt(e,t,n,r,i,s,o,a,l,u,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=IWt(r,d),h=RWt(i,d),p=DWt(e[0].datum),m=p==="group"&&e[0].datum.items[l].marktype,g=m==="area",y=PWt(p,m,a,l),v=u===null||u===1/0,b=g&&c==="naive";let _=-1,E=-1;const S=e.map(I=>{const P=v?jc.width(I,I.text):void 0;return _=Math.max(_,P),E=Math.max(E,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:P}});u=u===null||u===1/0?Math.max(_,E)+Math.max(...r):u;const T=yWt(t[0],t[1],u);let A;if(!b){n&&S.sort((N,M)=>n(N.datum,M.datum));let I=!1;for(let N=0;N<h.length&&!I;++N)I=h[N]===5||f[N]<0;const P=(p&&o||g)&&e.map(N=>N.datum);A=s.length||P?pWt(T,P||[],s,I,g):hWt(T,o&&S)}const R=g?AWt[c](T,A,o,l):SWt(T,A,h,f);return S.forEach(I=>I.opacity=+R(I)),S}function IWt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function RWt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=TWt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function DWt(e){return e&&e.mark&&e.mark.marktype}function PWt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const JK=["x","y","opacity","align","baseline"],O8e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function $se(e){et.call(this,null,e)}$se.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:O8e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:JK.length,default:JK}]};$t($se,et,{transform(e,t){function n(s){const o=e[s];return pr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&at("Size parameter should be specified as a [width, height] array.");const i=e.as||JK;return kWt(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ht(e.offset==null?1:e.offset),Ht(e.anchor||O8e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const OWt=Object.freeze(Object.defineProperty({__proto__:null,label:$se},Symbol.toStringTag,{value:"Module"}));function N8e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function Fse(e){et.call(this,null,e)}Fse.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};$t(Fse,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=N8e(r,e.groupby),s=(e.groupby||[]).map(Bs),o=s.length,a=e.as||[Bs(e.x),Bs(e.y)],l=[];i.forEach(u=>{W$e(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<o;++f)d[s[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push(yi(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const ZK={constant:Kre,linear:Xre,log:V$e,exp:U$e,pow:H$e,quad:Qre,poly:q$e},NWt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Lse(e){et.call(this,null,e)}Lse.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(ZK)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};$t(Lse,et,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=N8e(r,e.groupby),s=(e.groupby||[]).map(Bs),o=e.method||"linear",a=e.order==null?3:e.order,l=NWt(o,a),u=e.as||[Bs(e.x),Bs(e.y)],c=ZK[o],d=[];let f=e.extent;Qt(ZK,o)||at("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){d.push(yi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=f||om(h,e.x),y=v=>{const b={};for(let _=0;_<s.length;++_)b[s[_]]=h.dims[_];b[u[0]]=v[0],b[u[1]]=v[1],d.push(yi(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):j8(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const MWt=Object.freeze(Object.defineProperty({__proto__:null,loess:Fse,regression:Lse},Symbol.toStringTag,{value:"Module"}));function jse(e){et.call(this,null,e)}jse.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const $Wt=[-1e5,-1e5,1e5,1e5];$t(jse,et,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:$Wt;const s=this.value=lne.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!LWt(l)?FWt(l):null}return t.reflow(e.modified()).modifies(n)}});function FWt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function LWt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const jWt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:jse},Symbol.toStringTag,{value:"Module"}));var mH=Math.PI/180,_A=64,vM=2048;function BWt(){var e=[256,256],t,n,r,i,s,o,a,l=M8e,u=[],c=Math.random,d={};d.layout=function(){for(var p=f(sv()),m=WWt((e[0]>>5)*e[1]),g=null,y=u.length,v=-1,b=[],_=u.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=_[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,zWt(p,E,_,v),E.hasText&&h(m,E,g)&&(b.push(E),g?UWt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(_A<<5)/m,p.height=vM/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.hypot(e[0],e[1]),_=l(e),E=c()<.5?1:-1,S=-E,T,A,R;(T=_(S+=E))&&(A=~~T[0],R=~~T[1],!(Math.min(Math.abs(A),Math.abs(R))>=b));)if(m.x=y+A,m.y=v+R,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!VWt(m,p,e[0]))&&(!g||HWt(m,g))){for(var I=m.sprite,P=m.width>>5,N=e[0]>>5,M=m.x-(P<<4),O=M&127,j=32-O,B=m.y1-m.y0,H=(m.y+m.y0)*N+(M>>5),q,G=0;G<B;G++){q=0;for(var U=0;U<=P;U++)p[H+U]|=q<<j|(U<P?(q=I[G*P+U])>>>O:0);H+=N}return m.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=G1(p),d):n},d.fontStyle=function(p){return arguments.length?(i=G1(p),d):i},d.fontWeight=function(p){return arguments.length?(s=G1(p),d):s},d.rotate=function(p){return arguments.length?(o=G1(p),d):o},d.text=function(p){return arguments.length?(t=G1(p),d):t},d.spiral=function(p){return arguments.length?(l=GWt[p]||p,d):l},d.fontSize=function(p){return arguments.length?(r=G1(p),d):r},d.padding=function(p){return arguments.length?(a=G1(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function zWt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(_A<<5)/s,vM/s);var o=0,a=0,l=0,u=n.length,c,d,f,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*mH),g=Math.cos(t.rotate*mH),y=c*g,v=c*m,b=f*g,_=f*m;c=Math.max(Math.abs(y+_),Math.abs(y-_))+31>>5<<5,f=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=_A<<5&&(o=0,a+=l,l=0),a+f>=vM)break;i.translate((o+(c>>1))/s,(a+(f>>1))/s),t.rotate&&i.rotate(t.rotate*mH),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(_A<<5)/s,vM/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,A=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var R=d*p+(h>>5),I=E[(a+p)*(_A<<5)+(o+h)<<2]?1<<31-h%32:0;S[R]|=I,T|=I}T?A=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*d)}}}function VWt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,d=0;d<l;d++){c=0;for(var f=0;f<=i;f++)if((c<<a|(f<i?(c=r[d*i+f])>>>o:0))&t[u+f])return!0;u+=n}return!1}function UWt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function HWt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function M8e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function qWt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function WWt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function G1(e){return typeof e=="function"?e:function(){return e}}var GWt={archimedean:M8e,rectangular:qWt};const $8e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],YWt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Bse(e){et.call(this,BWt(),e)}Bse.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:$8e}]};$t(Bse,et,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&at("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return pr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||YWt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||$8e;let a=e.fontSize||14,l;if(pr(a)?l=e.fontSizeRange:a=Nl(a),l){const p=a,m=di("sqrt")().domain(om(i,p)).range(l);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(nf).layout(),c=s.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let p=0,m,g;p<h;++p)m=u[p],g=m.datum,g[o[0]]=m.x+d,g[o[1]]=m.y+f,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const KWt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Bse},Symbol.toStringTag,{value:"Module"})),XWt=e=>new Uint8Array(e),QWt=e=>new Uint16Array(e),ak=e=>new Uint32Array(e);function JWt(){let e=8,t=[],n=ak(0),r=vO(0,e),i=vO(0,e);return{data:()=>t,seen:()=>n=ZWt(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let c,d,f;for(d=0;!o[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],o[d]?u[d]=-1:(u[d]=f,r[f]=r[d],i[f]=i[d],l[f]=c,c._index=f++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=vO(s,e,r),i=vO(s,e))}}}function ZWt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function vO(e,t,n){const r=(t<257?XWt:t<65537?QWt:ak)(e);return n&&r.set(n),r}function Nbe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)s[l[f]]|=r;for(f=c;f<d;++f)s[l[f]]|=r;return o}}}function Mbe(){let e=ak(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=ak(d);let h=Array(d),p,m,g;for(g=0;g<d;++g)h[g]=a(l[g]),f[g]=g;if(h=eGt(h,f),c)p=t,m=e,t=Array(c+d),e=ak(c+d),tGt(u,p,m,c,h,f,d,t,e);else{if(u>0)for(g=0;g<d;++g)f[g]+=u;t=h,e=f}return n=c+d,{index:f,value:h}}function i(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[fRt(l,a[0],0,u),Cv(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function eGt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),mRt(e,t)}function tGt(e,t,n,r,i,s,o,a,l){let u=0,c=0,d;for(d=0;u<r&&c<o;++d)t[u]<i[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=i[c],l[d]=s[c++]+e);for(;u<r;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<o;++c,++d)a[d]=i[c],l[d]=s[c]+e}function zse(e){et.call(this,JWt(),e),this._indices=null,this._dims=null}zse.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};$t(zse,et,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=Mbe()),s.push(Nbe(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=i.length,p={};let m,g,y,v,b,_,E,S,T;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(_={},v=t.mod,E=0,S=v.length;E<S;++E)_[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=Mbe(),p[y]=m=g.insert(T,t.source,0)),o[E]=Nbe(g,E,i[E]).onAdd(m,l));for(E=0,S=a.data().length;E<S;++E)b[E]||(u[E]!==l[E]?d.push(E):_[E]&&l[E]!==c&&f.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,d=s.length;let f=i.size(),h,p,m;i.resize(c,d),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<d;++h)p=a[h].fname,m=l[p]||(l[p]=o[p].insert(a[h],r,f)),s[h].onAdd(m,g);for(;f<c;++f)y[f]=v,g[f]!==v&&u.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],m=e.one;let g,y,v;if(d<h)for(g=d,y=Math.min(h,f);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d>h)for(g=h,y=Math.min(d,p);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(f>p)for(g=Math.max(d,p),y=f;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f<p)for(g=Math.max(h,f),y=p;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,m,g;if(u<d)for(p=u,m=Math.min(d,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(u>d)for(p=d,m=Math.min(u,f);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>f)for(p=Math.max(u,f),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Vse(e){et.call(this,null,e)}Vse.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};$t(Vse,et,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const nGt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:zse,resolvefilter:Vse},Symbol.toStringTag,{value:"Module"})),rGt="RawCode",xw="Literal",iGt="Property",sGt="Identifier",oGt="ArrayExpression",aGt="BinaryExpression",F8e="CallExpression",lGt="ConditionalExpression",uGt="LogicalExpression",cGt="MemberExpression",dGt="ObjectExpression",fGt="UnaryExpression";function jh(e){this.type=e}jh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=hGt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function hGt(e){switch(e.type){case oGt:return e.elements;case aGt:case uGt:return[e.left,e.right];case F8e:return[e.callee].concat(e.arguments);case lGt:return[e.test,e.consequent,e.alternate];case cGt:return[e.object,e.property];case dGt:return e.properties;case iGt:return[e.key,e.value];case fGt:return[e.argument];case sGt:case xw:case rGt:default:return[]}}var km,fn,st,Il,Ai,rj=1,SD=2,_w=3,p1=4,ij=5,hx=6,Uu=7,TD=8,pGt=9;km={};km[rj]="Boolean";km[SD]="<end>";km[_w]="Identifier";km[p1]="Keyword";km[ij]="Null";km[hx]="Numeric";km[Uu]="Punctuator";km[TD]="String";km[pGt]="RegularExpression";var mGt="ArrayExpression",gGt="BinaryExpression",yGt="CallExpression",vGt="ConditionalExpression",L8e="Identifier",bGt="Literal",wGt="LogicalExpression",xGt="MemberExpression",_Gt="ObjectExpression",EGt="Property",CGt="UnaryExpression",ga="Unexpected token %0",SGt="Unexpected number",TGt="Unexpected string",AGt="Unexpected identifier",kGt="Unexpected reserved word",IGt="Unexpected end of input",eX="Invalid regular expression",gH="Invalid regular expression: missing /",j8e="Octal literals are not allowed in strict mode.",RGt="Duplicate data property in object literal not allowed in strict mode",Ha="ILLEGAL",kI="Disabled.",DGt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),PGt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function sj(e,t){if(!e)throw new Error("ASSERT: "+t)}function ag(e){return e>=48&&e<=57}function Use(e){return"0123456789abcdefABCDEF".includes(e)}function lk(e){return"01234567".includes(e)}function OGt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function II(e){return e===10||e===13||e===8232||e===8233}function AD(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&DGt.test(String.fromCharCode(e))}function f$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&PGt.test(String.fromCharCode(e))}const NGt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function B8e(){for(;st<Il;){const e=fn.charCodeAt(st);if(OGt(e)||II(e))++st;else break}}function tX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)st<Il&&Use(fn[st])?(r=fn[st++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):oi({},ga,Ha);return String.fromCharCode(i)}function MGt(){var e,t,n,r;for(e=fn[st],t=0,e==="}"&&oi({},ga,Ha);st<Il&&(e=fn[st++],!!Use(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&oi({},ga,Ha),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function z8e(){var e,t;for(e=fn.charCodeAt(st++),t=String.fromCharCode(e),e===92&&(fn.charCodeAt(st)!==117&&oi({},ga,Ha),++st,e=tX("u"),(!e||e==="\\"||!AD(e.charCodeAt(0)))&&oi({},ga,Ha),t=e);st<Il&&(e=fn.charCodeAt(st),!!f$(e));)++st,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),fn.charCodeAt(st)!==117&&oi({},ga,Ha),++st,e=tX("u"),(!e||e==="\\"||!f$(e.charCodeAt(0)))&&oi({},ga,Ha),t+=e);return t}function $Gt(){var e,t;for(e=st++;st<Il;){if(t=fn.charCodeAt(st),t===92)return st=e,z8e();if(f$(t))++st;else break}return fn.slice(e,st)}function FGt(){var e,t,n;return e=st,t=fn.charCodeAt(st)===92?z8e():$Gt(),t.length===1?n=_w:NGt.hasOwnProperty(t)?n=p1:t==="null"?n=ij:t==="true"||t==="false"?n=rj:n=_w,{type:n,value:t,start:e,end:st}}function yH(){var e=st,t=fn.charCodeAt(st),n,r=fn[st],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++st,{type:Uu,value:String.fromCharCode(t),start:e,end:st};default:if(n=fn.charCodeAt(st+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return st+=2,{type:Uu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:st};case 33:case 61:return st+=2,fn.charCodeAt(st)===61&&++st,{type:Uu,value:fn.slice(e,st),start:e,end:st}}}if(o=fn.substr(st,4),o===">>>=")return st+=4,{type:Uu,value:o,start:e,end:st};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return st+=3,{type:Uu,value:s,start:e,end:st};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return st+=2,{type:Uu,value:i,start:e,end:st};if(i==="//"&&oi({},ga,Ha),"<>=!+-*%&|^/".includes(r))return++st,{type:Uu,value:r,start:e,end:st};oi({},ga,Ha)}function LGt(e){let t="";for(;st<Il&&Use(fn[st]);)t+=fn[st++];return t.length===0&&oi({},ga,Ha),AD(fn.charCodeAt(st))&&oi({},ga,Ha),{type:hx,value:parseInt("0x"+t,16),start:e,end:st}}function jGt(e){let t="0"+fn[st++];for(;st<Il&&lk(fn[st]);)t+=fn[st++];return(AD(fn.charCodeAt(st))||ag(fn.charCodeAt(st)))&&oi({},ga,Ha),{type:hx,value:parseInt(t,8),octal:!0,start:e,end:st}}function $be(){var e,t,n;if(n=fn[st],sj(ag(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=st,e="",n!=="."){if(e=fn[st++],n=fn[st],e==="0"){if(n==="x"||n==="X")return++st,LGt(t);if(lk(n))return jGt(t);n&&ag(n.charCodeAt(0))&&oi({},ga,Ha)}for(;ag(fn.charCodeAt(st));)e+=fn[st++];n=fn[st]}if(n==="."){for(e+=fn[st++];ag(fn.charCodeAt(st));)e+=fn[st++];n=fn[st]}if(n==="e"||n==="E")if(e+=fn[st++],n=fn[st],(n==="+"||n==="-")&&(e+=fn[st++]),ag(fn.charCodeAt(st)))for(;ag(fn.charCodeAt(st));)e+=fn[st++];else oi({},ga,Ha);return AD(fn.charCodeAt(st))&&oi({},ga,Ha),{type:hx,value:parseFloat(e),start:t,end:st}}function BGt(){var e="",t,n,r,i,s=!1;for(t=fn[st],sj(t==="'"||t==='"',"String literal must starts with a quote"),n=st,++st;st<Il;)if(r=fn[st++],r===t){t="";break}else if(r==="\\")if(r=fn[st++],!r||!II(r.charCodeAt(0)))switch(r){case"u":case"x":fn[st]==="{"?(++st,e+=MGt()):e+=tX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:lk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),st<Il&&lk(fn[st])&&(s=!0,i=i*8+"01234567".indexOf(fn[st++]),"0123".includes(r)&&st<Il&&lk(fn[st])&&(i=i*8+"01234567".indexOf(fn[st++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&fn[st]===`
`&&++st;else{if(II(r.charCodeAt(0)))break;e+=r}return t!==""&&oi({},ga,Ha),{type:TD,value:e,octal:s,start:n,end:st}}function zGt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";oi({},eX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{oi({},eX)}try{return new RegExp(e,t)}catch{return null}}function VGt(){var e,t,n,r,i;for(e=fn[st],sj(e==="/","Regular expression literal must start with a slash"),t=fn[st++],n=!1,r=!1;st<Il;)if(e=fn[st++],t+=e,e==="\\")e=fn[st++],II(e.charCodeAt(0))&&oi({},gH),t+=e;else if(II(e.charCodeAt(0)))oi({},gH);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||oi({},gH),i=t.substr(1,t.length-2),{value:i,literal:t}}function UGt(){var e,t,n;for(t="",n="";st<Il&&(e=fn[st],!!f$(e.charCodeAt(0)));)++st,e==="\\"&&st<Il?oi({},ga,Ha):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&oi({},eX,n),{value:n,literal:t}}function HGt(){var e,t,n,r;return Ai=null,B8e(),e=st,t=VGt(),n=UGt(),r=zGt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:st}}function qGt(e){return e.type===_w||e.type===p1||e.type===rj||e.type===ij}function V8e(){if(B8e(),st>=Il)return{type:SD,start:st,end:st};const e=fn.charCodeAt(st);return AD(e)?FGt():e===40||e===41||e===59?yH():e===39||e===34?BGt():e===46?ag(fn.charCodeAt(st+1))?$be():yH():ag(e)?$be():yH()}function Wu(){const e=Ai;return st=e.end,Ai=V8e(),st=e.end,e}function U8e(){const e=st;Ai=V8e(),st=e}function WGt(e){const t=new jh(mGt);return t.elements=e,t}function Fbe(e,t,n){const r=new jh(e==="||"||e==="&&"?wGt:gGt);return r.operator=e,r.left=t,r.right=n,r}function GGt(e,t){const n=new jh(yGt);return n.callee=e,n.arguments=t,n}function YGt(e,t,n){const r=new jh(vGt);return r.test=e,r.consequent=t,r.alternate=n,r}function Hse(e){const t=new jh(L8e);return t.name=e,t}function EA(e){const t=new jh(bGt);return t.value=e.value,t.raw=fn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Lbe(e,t,n){const r=new jh(xGt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function KGt(e){const t=new jh(_Gt);return t.properties=e,t}function jbe(e,t,n){const r=new jh(EGt);return r.key=t,r.value=n,r.kind=e,r}function XGt(e,t){const n=new jh(CGt);return n.operator=e,n.argument=t,n.prefix=!0,n}function oi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(sj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=st,n.description=i,n}function oj(e){e.type===SD&&oi(e,IGt),e.type===hx&&oi(e,SGt),e.type===TD&&oi(e,TGt),e.type===_w&&oi(e,AGt),e.type===p1&&oi(e,kGt),oi(e,ga,e.value)}function Rl(e){const t=Wu();(t.type!==Uu||t.value!==e)&&oj(t)}function rs(e){return Ai.type===Uu&&Ai.value===e}function vH(e){return Ai.type===p1&&Ai.value===e}function QGt(){const e=[];for(st=Ai.start,Rl("[");!rs("]");)rs(",")?(Wu(),e.push(null)):(e.push(Ew()),rs("]")||Rl(","));return Wu(),WGt(e)}function Bbe(){st=Ai.start;const e=Wu();return e.type===TD||e.type===hx?(e.octal&&oi(e,j8e),EA(e)):Hse(e.value)}function JGt(){var e,t,n,r;if(st=Ai.start,e=Ai,e.type===_w)return n=Bbe(),Rl(":"),r=Ew(),jbe("init",n,r);if(e.type===SD||e.type===Uu)oj(e);else return t=Bbe(),Rl(":"),r=Ew(),jbe("init",t,r)}function ZGt(){var e=[],t,n,r,i={},s=String;for(st=Ai.start,Rl("{");!rs("}");)t=JGt(),t.key.type===L8e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?oi({},RGt):i[r]=!0,e.push(t),rs("}")||Rl(",");return Rl("}"),KGt(e)}function eYt(){Rl("(");const e=qse();return Rl(")"),e}const tYt={if:1};function nYt(){var e,t,n;if(rs("("))return eYt();if(rs("["))return QGt();if(rs("{"))return ZGt();if(e=Ai.type,st=Ai.start,e===_w||tYt[Ai.value])n=Hse(Wu().value);else if(e===TD||e===hx)Ai.octal&&oi(Ai,j8e),n=EA(Wu());else{if(e===p1)throw new Error(kI);e===rj?(t=Wu(),t.value=t.value==="true",n=EA(t)):e===ij?(t=Wu(),t.value=null,n=EA(t)):rs("/")||rs("/=")?(n=EA(HGt()),U8e()):oj(Wu())}return n}function rYt(){const e=[];if(Rl("("),!rs(")"))for(;st<Il&&(e.push(Ew()),!rs(")"));)Rl(",");return Rl(")"),e}function iYt(){st=Ai.start;const e=Wu();return qGt(e)||oj(e),Hse(e.value)}function sYt(){return Rl("."),iYt()}function oYt(){Rl("[");const e=qse();return Rl("]"),e}function aYt(){var e,t,n;for(e=nYt();;)if(rs("."))n=sYt(),e=Lbe(".",e,n);else if(rs("("))t=rYt(),e=GGt(e,t);else if(rs("["))n=oYt(),e=Lbe("[",e,n);else break;return e}function zbe(){const e=aYt();if(Ai.type===Uu&&(rs("++")||rs("--")))throw new Error(kI);return e}function bM(){var e,t;if(Ai.type!==Uu&&Ai.type!==p1)t=zbe();else{if(rs("++")||rs("--"))throw new Error(kI);if(rs("+")||rs("-")||rs("~")||rs("!"))e=Wu(),t=bM(),t=XGt(e.value,t);else{if(vH("delete")||vH("void")||vH("typeof"))throw new Error(kI);t=zbe()}}return t}function Vbe(e){let t=0;if(e.type!==Uu&&e.type!==p1)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function lYt(){var e,t,n,r,i,s,o,a,l,u;if(e=Ai,l=bM(),r=Ai,i=Vbe(r),i===0)return l;for(r.prec=i,Wu(),t=[e,Ai],o=bM(),s=[l,r,o];(i=Vbe(Ai))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=Fbe(a,l,o),s.push(n);r=Wu(),r.prec=i,s.push(r),t.push(Ai),n=bM(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=Fbe(s[u-1].value,s[u-2],n),u-=2;return n}function Ew(){var e,t,n;return e=lYt(),rs("?")&&(Wu(),t=Ew(),Rl(":"),n=Ew(),e=YGt(e,t,n)),e}function qse(){const e=Ew();if(rs(","))throw new Error(kI);return e}function H8e(e){fn=e,st=0,Il=fn.length,Ai=null,U8e();const t=qse();if(Ai.type!==SD)throw new Error("Unexpect token after expression.");return t}var q8e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function W8e(e){function t(o,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&at("Missing arguments to clamp function."),o.length>3&&at("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:s,test:n("test",s),if:function(o){o.length<3&&at("Missing arguments to if function."),o.length>3&&at("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function uYt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function G8e(e){e=e||{};const t=e.allowed?vh(e.allowed):{},n=e.forbidden?vh(e.forbidden):{},r=e.constants||q8e,i=(e.functions||W8e)(d),s=e.globalvar,o=e.fieldvar,a=pr(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function d(p){if(Wt(p))return p;const m=f[p.type];return m==null&&at("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Qt(n,m)?at("Illegal identifier: "+m):Qt(r,m)?r[m]:Qt(t,m)?m:(l[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=d(p.object);m&&(c+=1);const y=d(p.property);return g===o&&(u[uYt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&at("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Qt(i,m)&&i[m];return y||at("Unrecognized function: "+m),pr(y)?y(g):y+"("+g.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=i,h.constants=r,h}const Ube=Symbol("vega_selection_getter");function Y8e(e){return(!e.getter||!e.getter[Ube])&&(e.getter=Zd(e.field),e.getter[Ube]=!0),e.getter}const Wse="intersect",Hbe="union",cYt="vlMulti",dYt="vlPoint",qbe="or",fYt="and",_p="_vgsid_",RI=Zd(_p),hYt="E",pYt="R",mYt="R-E",gYt="R-LE",yYt="R-RE",vYt="E-LT",bYt="E-LTE",wYt="E-GT",xYt="E-GTE",_Yt="E-VALID",EYt="E-ONE",h$="index:unit";function Wbe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=Y8e(a)(e),rv(o)&&(o=Cl(o)),rv(r[s])&&(r[s]=Cl(r[s])),ut(r[s])&&rv(r[s][0])&&(r[s]=r[s].map(Cl)),a.type===hYt){if(ut(r[s])?!r[s].includes(o):o!==r[s])return!1}else if(a.type===pYt){if(!iE(o,r[s]))return!1}else if(a.type===yYt){if(!iE(o,r[s],!0,!1))return!1}else if(a.type===mYt){if(!iE(o,r[s],!1,!1))return!1}else if(a.type===gYt){if(!iE(o,r[s],!1,!0))return!1}else if(a.type===vYt){if(o>=r[s])return!1}else if(a.type===bYt){if(o>r[s])return!1}else if(a.type===wYt){if(o<=r[s])return!1}else if(a.type===xYt){if(o<r[s])return!1}else if(a.type===_Yt){if(o===null||isNaN(o))return!1}else if(a.type===EYt&&r[s].indexOf(o)===-1)return!1;return!0}function CYt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[h$]&&r[h$].value:void 0,o=n===Wse,a=i.length,l=0,u,c,d,f,h;l<a;++l)if(u=i[l],s&&o){if(c=c||{},d=c[f=u.unit]||0,d===-1)continue;if(h=Wbe(t,u),c[f]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(f).count)return!1}else if(h=Wbe(t,u),o^h)return h;return a&&o}const K8e=SS(RI),SYt=K8e.left,TYt=K8e.right;function AYt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[h$]&&r[h$].value:void 0,o=n===Wse,a=RI(t),l=SYt(i,a);if(l===i.length||RI(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(TYt(i,a)-l<s.size)return!1}return!0}function kYt(e,t){return e.map(n=>hr(t.fields?{values:t.fields.map(r=>Y8e(r)(n.datum))}:{[_p]:RI(n.datum)},t))}function IYt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,c,d,f,h,p,m,g,y,v,b=s.length,_=0,E,S;_<b;++_)if(u=s[_],f=u.unit,c=u.fields,d=u.values,c&&d){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[f]||(m[f]=[]),l[h.field]=y=h.type.charAt(0),v=bH[`${y}_union`],m[f]=v(g,Ht(d[E]));n&&(g=a[f]||(a[f]=[]),g.push(Ht(d).reduce((T,A,R)=>(T[c[R].field]=A,T),{})))}else h=_p,p=RI(u),m=o[h]||(o[h]={}),g=m[f]||(m[f]=[]),g.push(p),n&&(g=a[f]||(a[f]=[]),g.push({[_p]:p}));if(t=t||Hbe,o[_p]?o[_p]=bH[`${_p}_${t}`](...Object.values(o[_p])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(A=>o[T][A]).reduce((A,R)=>A===void 0?R:bH[`${l[T]}_${t}`](A,R))}),s=Object.keys(a),n&&s.length){const T=r?dYt:cYt;o[T]=t===Hbe?{[qbe]:s.reduce((A,R)=>(A.push(...a[R]),A),[])}:{[fYt]:s.map(A=>({[qbe]:a[A]}))}}return o}var bH={[`${_p}_union`]:CRt,[`${_p}_intersect`]:_Rt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Cl(t[0]),r=Cl(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Cl(t[0]),r=Cl(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const RYt=":",DYt="@";function Gse(e,t,n,r){t[0].type!==xw&&at("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&zr(t).value,o="unit",a=DYt+o,l=RYt+i;s===Wse&&!Qt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Qt(r,l)||(r[l]=n.getData(i).tuplesRef())}function X8e(e){const t=this.context.data[e];return t?t.values.value:[]}function PYt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function OYt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ef).insert(t)),1}function NYt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const kD=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},MYt=kD("format"),Q8e=kD("timeFormat"),$Yt=kD("utcFormat"),FYt=kD("timeParse"),LYt=kD("utcParse"),bO=new Date(2e3,0,1);function aj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(bO.setYear(2e3),bO.setMonth(e),bO.setDate(t),Q8e.call(this,bO,n))}function jYt(e){return aj.call(this,e,1,"%B")}function BYt(e){return aj.call(this,e,1,"%b")}function zYt(e){return aj.call(this,0,2+e,"%A")}function VYt(e){return aj.call(this,0,2+e,"%a")}const UYt=":",HYt="@",nX="%",J8e="$";function Yse(e,t,n,r){t[0].type!==xw&&at("First argument to data functions must be a string literal.");const i=t[0].value,s=UYt+i;if(!Qt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function qYt(e,t,n,r){t[0].type!==xw&&at("First argument to indata must be a string literal."),t[1].type!==xw&&at("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=HYt+s;Qt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function cu(e,t,n,r){if(t[0].type===xw)Gbe(n,r,t[0].value);else for(e in n.scales)Gbe(n,r,e)}function Gbe(e,t,n){const r=nX+n;if(!Qt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Im(e,t){if(Wt(e)){const n=t.scales[e];return n&&B1e(n.value)?n.value:void 0}else if(pr(e))return B1e(e)?e:void 0}function WYt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=cu,n._range=cu,n._scale=cu;const r=i=>"_["+(i.type===xw?Ot(nX+i.value):Ot(nX)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Kse(e,t){return function(n,r,i){if(n){const s=Im(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const GYt=Kse("area",VNt),YYt=Kse("bounds",WNt),KYt=Kse("centroid",JNt);function XYt(e,t){const n=Im(e,(t||this).context);return n&&n.scale()}function QYt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Xse(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function JYt(){return Xse(this.context.dataflow,"warn",arguments)}function ZYt(){return Xse(this.context.dataflow,"info",arguments)}function eKt(){return Xse(this.context.dataflow,"debug",arguments)}function wH(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function rX(e){const t=Tv(e),n=wH(t.r),r=wH(t.g),i=wH(t.b);return .2126*n+.7152*r+.0722*i}function tKt(e,t){const n=rX(e),r=rX(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function nKt(){const e=[].slice.call(arguments);return e.unshift({}),hr(...e)}function Z8e(e,t){return e===t||e!==e&&t!==t?!0:ut(e)?ut(t)&&e.length===t.length?rKt(e,t):!1:qt(e)&&qt(t)?eje(e,t):!1}function rKt(e,t){for(let n=0,r=e.length;n<r;++n)if(!Z8e(e[n],t[n]))return!1;return!0}function eje(e,t){for(const n in e)if(!Z8e(e[n],t[n]))return!1;return!0}function Ybe(e){return t=>eje(e,t)}function iKt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(d=n===!0?ef:ut(n)||D8(n)?n:Ybe(n),c.remove(d)),t&&c.insert(t),r&&(d=Ybe(r),l.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function sKt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function oKt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Kbe={};function aKt(e,t){const n=Kbe[t]||(Kbe[t]=Zd(t));return ut(e)?e.map(n):n(e)}function lj(e){return ut(e)||ArrayBuffer.isView(e)?e:null}function Qse(e){return lj(e)||(Wt(e)?e:null)}function lKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return lj(e).join(...n)}function uKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qse(e).indexOf(...n)}function cKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qse(e).lastIndexOf(...n)}function dKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qse(e).slice(...n)}function fKt(e,t,n){return pr(n)&&at("Function argument passed to replace."),!Wt(t)&&!wre(t)&&at("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function hKt(e){return lj(e).slice().reverse()}function pKt(e){return lj(e).slice().sort(aD)}function mKt(e,t,n){return Eie(e||0,t||0,n||0)}function gKt(e,t){const n=Im(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function yKt(e,t){const n=Im(e,(t||this).context);return n?n.copy():void 0}function vKt(e,t){const n=Im(e,(t||this).context);return n?n.domain():[]}function bKt(e,t,n){const r=Im(e,(n||this).context);return r?ut(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function wKt(e,t){const n=Im(e,(t||this).context);return n&&n.range?n.range():[]}function xKt(e,t,n){const r=Im(e,(n||this).context);return r?r(t):void 0}function _Kt(e,t,n,r,i){e=Im(e,(i||this).context);const s=UFe(t,n);let o=e.domain(),a=o[0],l=zr(o),u=Ol;return l-a?u=DFe(e,a,l):e=(e.interpolator?di("sequential")().interpolator(e.interpolator()):di("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==zr(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),e(c))),s}function EKt(e,t,n){const r=Im(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function CKt(e){let t=null;return function(n){return n?CI(n,t=t||vC(e)):e}}const tje=e=>e.data;function nje(e,t){const n=X8e.call(t,e);return n.root&&n.root.lookup||{}}function SKt(e,t,n){const r=nje(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(tje):void 0}function TKt(e,t){const n=nje(e,this)[t];return n?n.ancestors().map(tje):void 0}const rje=()=>typeof window<"u"&&window||null;function AKt(){const e=rje();return e?e.screen:{}}function kKt(){const e=rje();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function IKt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function ije(e,t,n){if(!e)return[];const[r,i]=e,s=new To().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return BLe(o,s,RKt(t))}function RKt(e){let t=null;if(e){const n=Ht(e.marktype),r=Ht(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function DKt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ht(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function PKt(e){return Ht(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function OKt(e,t,n){const{x:r,y:i,mark:s}=n,o=new To().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),ije([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>NKt(l.x,l.y,t))}function NKt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const DI={random(){return nf()},cumulativeNormal:$8,cumulativeLogNormal:Ure,cumulativeUniform:Gre,densityNormal:Lre,densityLogNormal:Vre,densityUniform:Wre,quantileNormal:F8,quantileLogNormal:Hre,quantileUniform:Yre,sampleNormal:M8,sampleLogNormal:zre,sampleUniform:qre,isArray:ut,isBoolean:h1,isDate:rv,isDefined(e){return e!==void 0},isNumber:ci,isObject:qt,isRegExp:wre,isString:Wt,isTuple:D8,isValid(e){return e!=null&&e===e},toBoolean:_re,toDate(e){return Ere(e)},toNumber:Cl,toString:Cre,indexof:uKt,join:lKt,lastindexof:cKt,replace:fKt,reverse:hKt,sort:pKt,slice:dKt,flush:B5e,lerp:V5e,merge:nKt,pad:q5e,peek:zr,pluck:aKt,span:lD,inrange:iE,truncate:W5e,rgb:Tv,lab:t5,hcl:n5,hsl:rI,luminance:rX,contrast:tKt,sequence:Xu,format:MYt,utcFormat:$Yt,utcParse:LYt,utcOffset:o$e,utcSequence:u$e,timeFormat:Q8e,timeParse:FYt,timeOffset:s$e,timeSequence:l$e,timeUnitSpecifier:Y5e,monthFormat:jYt,monthAbbrevFormat:BYt,dayFormat:zYt,dayAbbrevFormat:VYt,quarter:$5e,utcquarter:F5e,week:X5e,utcweek:Z5e,dayofyear:K5e,utcdayofyear:J5e,warn:JYt,info:ZYt,debug:eKt,extent(e){return om(e)},inScope:QYt,intersect:ije,clampRange:L5e,pinchDistance:sKt,pinchAngle:oKt,screen:AKt,containerSize:IKt,windowSize:kKt,bandspace:mKt,setdata:OYt,pathShape:CKt,panLinear:P5e,panLog:O5e,panPow:N5e,panSymlog:M5e,zoomLinear:mre,zoomLog:gre,zoomPow:W5,zoomSymlog:yre,encode:NYt,modify:iKt,lassoAppend:DKt,lassoPath:PKt,intersectLasso:OKt},MKt=["view","item","group","xy","x","y"],$Kt="event.vega.",sje="this.",Jse={},oje={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Ot(J8e+e)}]`,functions:FKt,constants:q8e,visitors:Jse},iX=G8e(oje);function FKt(e){const t=W8e(e);MKt.forEach(n=>t[n]=$Kt+n);for(const n in DI)t[n]=sje+n;return hr(t,WYt(e,DI,Jse)),t}function po(e,t,n){return arguments.length===1?DI[e]:(DI[e]=t,n&&(Jse[e]=n),iX&&(iX.functions[e]=sje+e),this)}po("bandwidth",gKt,cu);po("copy",yKt,cu);po("domain",vKt,cu);po("range",wKt,cu);po("invert",bKt,cu);po("scale",xKt,cu);po("gradient",_Kt,cu);po("geoArea",GYt,cu);po("geoBounds",YYt,cu);po("geoCentroid",KYt,cu);po("geoShape",EKt,cu);po("geoScale",XYt,cu);po("indata",PYt,qYt);po("data",X8e,Yse);po("treePath",SKt,Yse);po("treeAncestors",TKt,Yse);po("vlSelectionTest",CYt,Gse);po("vlSelectionIdTest",AYt,Gse);po("vlSelectionResolve",IYt,Gse);po("vlSelectionTuples",kYt);function lm(e,t){const n={};let r;try{e=Wt(e)?e:Ot(e)+"",r=H8e(e)}catch{at("Expression parse error: "+e)}r.visit(s=>{if(s.type!==F8e)return;const o=s.callee.name,a=oje.visitors[o];a&&a(o,s.arguments,t,n)});const i=iX(r);return i.globals.forEach(s=>{const o=J8e+s;!Qt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:hr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function LKt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const jKt=vh(["rule"]),Xbe=vh(["group","image","rect"]);function BKt(e,t){let n="";return jKt[t]||(e.x2&&(e.x?(Xbe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Xbe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Zse(e){return(e+"").toLowerCase()}function zKt(e){return Zse(e)==="operator"}function VKt(e){return Zse(e)==="collect"}function v2(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function UKt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var HKt={operator:(e,t)=>v2(e,["_"],t.code),parameter:(e,t)=>v2(e,["datum","_"],t.code),event:(e,t)=>v2(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return v2(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Ot(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=BKt(r,n),i+="return m;",v2(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Ot).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),UKt(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function qKt(e){const t=this;zKt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function WKt(e){const t=this;if(e.params){const n=t.get(e.id);n||at("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function GKt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ut(i)?i.map(s=>Qbe(s,n,t)):Qbe(i,n,t)}return t}function Qbe(e,t,n){if(!e||!qt(e))return e;for(let r=0,i=Jbe.length,s;r<i;++r)if(s=Jbe[r],Qt(e,s.key))return s.parse(e,t,n);return e}var Jbe=[{key:"$ref",parse:YKt},{key:"$key",parse:XKt},{key:"$expr",parse:KKt},{key:"$field",parse:QKt},{key:"$encode",parse:ZKt},{key:"$compare",parse:JKt},{key:"$context",parse:eXt},{key:"$subflow",parse:tXt},{key:"$tupleid",parse:nXt}];function YKt(e,t){return t.get(e.$ref)||at("Operator not defined: "+e.$ref)}function KKt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=mc(t.parameterExpression(e.$expr),e.$fields))}function XKt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=xre(e.$key,e.$flat,t.expr.codegen))}function QKt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Zd(e.$field,e.$name,t.expr.codegen))}function JKt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Ht(e.$compare).map(i=>i&&i.$tupleid?Cn:i);return t.fn[n]||(t.fn[n]=vre(r,e.$order,t.expr.codegen))}function ZKt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=mc(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function eXt(e,t){return t}function tXt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function nXt(){return Cn}function rXt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&at("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function iXt(e){var t=this,n=qt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||at("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const sXt={skip:!0};function oXt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function aXt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],sXt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(ef).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function aje(e,t,n,r){return new lje(e,t,n,r)}function lje(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||HKt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Zbe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}lje.prototype=Zbe.prototype={fork(){const e=new Zbe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),VKt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Zse(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:LKt,parseOperator:qKt,parseOperatorParameters:WKt,parseParameters:GKt,parseStream:rXt,parseUpdate:iXt,getState:oXt,setState:aXt};function lXt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),uje(t,e.description()))}function uje(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function uXt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const xH="default";function cXt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:xH,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Wt(i)?i:i.user:xH,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Wt(r)||(i=r.item,r=r.user),sX(e,r&&r!==xH?r:i||r),i},{cursor:t})}function sX(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function p$(e,t){var n=e._runtime.data;return Qt(n,t)||at("Unrecognized data set: "+t),n[t]}function dXt(e,t){return arguments.length<2?p$(this,e).values.value:uj.call(this,e,dx().remove(ef).insert(t))}function uj(e,t){I$e(t)||at("Second argument to changes must be a changeset.");const n=p$(this,e);return n.modified=!0,this.pulse(n.input,t)}function fXt(e,t){return uj.call(this,e,dx().insert(t))}function hXt(e,t){return uj.call(this,e,dx().remove(t))}function cje(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function dje(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function cj(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function pXt(e){var t=cj(e),n=cje(e),r=dje(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function mXt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=cj(e),o=t.changedTouches?t.changedTouches[0]:t,s=ej(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=gXt(e,n,s),t}function gXt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Wt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Nl(e),item:Nl(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const ewe="view",yXt="timer",vXt="window",bXt={trap:!1};function wXt(e){const t=hr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{ut(r[s])&&(r[s]=vh(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function fje(e,t,n,r){e._eventListeners.push({type:n,sources:Ht(t),handler:r})}function xXt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function wO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||qt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function _Xt(e,t,n){var r=this,i=new N8(n),s=function(u,c){r.runAsync(null,()=>{e===ewe&&xXt(r,t)&&u.preventDefault(),i.receive(mXt(r,u,c))})},o;if(e===yXt)wO(r,"timer",t)&&r.timer(s,t);else if(e===ewe)wO(r,"view",t)&&r.addEventListener(t,s,bXt);else if(e===vXt?wO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&wO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);fje(r,o,t,s)}return i}function twe(e){return e.item}function nwe(e){return e.item.mark.source}function rwe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function EXt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",twe),nwe,rwe(e)),this.on(this.events("view","pointerout",twe),nwe,rwe(t)),this}function CXt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Bc(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const SXt="vega-bind",TXt="vega-bind-name",AXt="vega-bind-radio";function kXt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=bre(r.debounce,i.update))),(r.input==null&&r.element?IXt:DXt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function IXt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),fje(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(RXt(i))}}function RXt(e){return typeof Event<"u"?new Event(e):{type:e}}function DXt(e,t,n,r){const i=r.signal(n.signal),s=Bc("div",{class:SXt}),o=n.input==="radio"?s:s.appendChild(Bc("label"));o.appendChild(Bc("span",{class:TXt},n.name||n.signal)),t.appendChild(s);let a=PXt;switch(n.input){case"checkbox":a=OXt;break;case"select":a=NXt;break;case"radio":a=MXt;break;case"range":a=$Xt;break}a(e,o,n,i)}function PXt(e,t,n,r){const i=Bc("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function OXt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Bc("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function NXt(e,t,n,r){const i=Bc("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};m$(o,r)&&(l.selected=!0),i.appendChild(Bc("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(m$(n.options[a],o)){i.selectedIndex=a;return}}}function MXt(e,t,n,r){const i=Bc("span",{class:AXt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};m$(o,r)&&(l.checked=!0);const u=Bc("input",l);u.addEventListener("change",()=>e.update(o));const c=Bc("label",{},(s[a]||o)+"");return c.prepend(u),i.appendChild(c),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)m$(a[u].value,o)&&(a[u].checked=!0)}}function $Xt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Sv(s,i,100),a=Bc("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=Bc("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function m$(e,t){return e===t||e+""==t+""}function hje(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,cje(e),dje(e),cj(e),i,s).background(e.background())}function eoe(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function FXt(e,t,n,r){const i=new r(e.loader(),eoe(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,cj(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function LXt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=tj(r);e=n._el=e?_H(n,e,!0):null,lXt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||CD,a=e?s.renderer:s.headless;return n._renderer=a?hje(n,n._renderer,e,a):null,n._handler=FXt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=_H(n,t,!0):e.appendChild(Bc("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=_H(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{kXt(n,l.element||t,l)})),n}function _H(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const b2=e=>+e||0,jXt=e=>({top:e,bottom:e,left:e,right:e});function iwe(e){return qt(e)?{top:b2(e.top),bottom:b2(e.bottom),left:b2(e.left),right:b2(e.right)}:jXt(b2(e))}async function toe(e,t,n,r){const i=tj(t),s=i&&i.headless;return s||at("Unrecognized renderer type: "+t),await e.runAsync(),hje(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function BXt(e,t){e!==By.Canvas&&e!==By.SVG&&e!==By.PNG&&at("Unrecognized image type: "+e);const n=await toe(this,e,t);return e===By.SVG?zXt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function zXt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function VXt(e,t){return(await toe(this,By.Canvas,e,t)).canvas()}async function UXt(e){return(await toe(this,By.SVG,e)).svg()}function HXt(e,t,n){return aje(e,pC,DI,n).parse(t)}function qXt(e){var t=this._runtime.scales;return Qt(t,e)||at("Unrecognized scale or projection: "+e),t[e].value}var pje="width",mje="height",noe="padding",swe={skip:!0};function gje(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===noe?r.left+r.right:0)}function yje(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===noe?r.top+r.bottom:0)}function WXt(e){var t=e._signals,n=t[pje],r=t[mje],i=t[noe];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=gje(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=yje(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function GXt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(pje,n,swe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(mje,r,swe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function YXt(e){return this._runtime.getState(e||{data:KXt,signals:XXt,recurse:!0})}function KXt(e,t){return t.modified&&ut(t.input.value)&&!e.startsWith("_:vega:_")}function XXt(e,t){return!(e==="parent"||t instanceof pC.proxy)}function QXt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function JXt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(n3t(n,t))}function ZXt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",eQt(r))}function eQt(e){return e==null?"":ut(e)?vje(e):qt(e)&&!rv(e)?tQt(e):e+""}function tQt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ut(n)?vje(n):bje(n))}).join(`
`)}function vje(e){return"["+e.map(bje).join(", ")+"]"}function bje(e){return ut(e)?"[]":qt(e)&&!rv(e)?"{}":e}function nQt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function wje(e,t){const n=this;if(t=t||{},AE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=hr({},e.locale,t.locale);n.locale(b$e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||By.Canvas,n._scenegraph=new hLe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||ZXt,n._redraw=!0,n._handler=new CD().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=wXt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=HXt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:hr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=gje(n,n._width),n._viewHeight=yje(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,WXt(n),uXt(n),cXt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function xO(e,t){return Qt(e._signals,t)?e._signals[t]:at("Unrecognized signal name: "+Ot(t))}function xje(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function owe(e,t,n,r){let i=xje(n,r);return i||(i=eoe(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function awe(e,t,n){const r=xje(t,n);return r&&t._targets.remove(r),e}$t(wje,AE,{async evaluate(e,t,n){if(await AE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,pXt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&oM(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&uje(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=xO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",iwe(e)):iwe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(tj(e)||at("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(AE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(xO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:GXt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=eoe(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return owe(this,e,xO(this,e),t)},removeSignalListener(e,t){return awe(this,xO(this,e),t)},addDataListener(e,t){return owe(this,e,p$(this,e).values,t)},removeDataListener(e,t){return awe(this,p$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=sX(this,null);this._globalCursor=!!e,t&&sX(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:JXt,events:_Xt,finalize:CXt,hover:EXt,data:dXt,change:uj,insert:fXt,remove:hXt,scale:qXt,initialize:LXt,toImageURL:BXt,toCanvas:VXt,toSVG:UXt,getState:YXt,setState:QXt,_watchPixelRatio:nQt});const rQt="view",g$="[",y$="]",_je="{",Eje="}",iQt=":",Cje=",",sQt="@",oQt=">",aQt=/[[\]{}]/,lQt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Sje,Tje;function m1(e,t,n){return Sje=t||rQt,Tje=n||lQt,Aje(e.trim()).map(oX)}function uQt(e){return Tje[e]}function uk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Aje(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=uk(e,i,Cje,g$+_je,y$+Eje),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function oX(e){return e[0]==="["?cQt(e):dQt(e)}function cQt(e){const t=e.length;let n=1,r;if(n=uk(e,n,y$,g$,y$),n===t)throw"Empty between selector: "+e;if(r=Aje(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==oQt)throw"Expected '>' after between selector: "+e;r=r.map(oX);const i=oX(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function dQt(e){const t={source:Sje},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===Eje){if(a=e.lastIndexOf(_je),a>=0){try{r=fQt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===sQt&&(i=++a),l=uk(e,a,iQt),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=uk(e,a,g$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=uk(e,a,y$),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==g$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||aQt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):uQt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function fQt(e){const t=e.split(Cje);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function hQt(e){return qt(e)?e:{type:e||"pad"}}const w2=e=>+e||0,pQt=e=>({top:e,bottom:e,left:e,right:e});function mQt(e){return qt(e)?e.signal?e:{top:w2(e.top),bottom:w2(e.bottom),left:w2(e.left),right:w2(e.right)}:pQt(w2(e))}const ya=e=>qt(e)&&!ut(e)?hr({},e):{value:e};function lwe(e,t,n,r){return n!=null?(qt(n)&&!ut(n)||ut(n)&&n.length&&qt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Ya(e,t,n){for(const r in t)lwe(e,r,t[r]);for(const r in n)lwe(e,r,n[r],"update")}function qS(e,t,n){for(const r in t)n&&Qt(n,r)||(e[r]=hr(e[r]||{},t[r]));return e}function U_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const roe="mark",ioe="frame",soe="scope",gQt="axis",yQt="axis-domain",vQt="axis-grid",bQt="axis-label",wQt="axis-tick",xQt="axis-title",_Qt="legend",EQt="legend-band",CQt="legend-entry",SQt="legend-gradient",kje="legend-label",TQt="legend-symbol",AQt="legend-title",kQt="title",IQt="title-text",RQt="title-subtitle";function DQt(e,t,n,r,i){const s={},o={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!U_(l,e)&&EH(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===ioe?i.group:n===roe?hr({},i.mark,i[t]):null;for(l in c)u=U_(l,e)||(l==="fill"||l==="stroke")&&(U_("fill",e)||U_("stroke",e)),u||EH(s,l,c[l]);Ht(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)U_(h,e)||EH(s,h,f[h])}),e=hr({},e);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return e.enter=hr(o,e.enter),a&&(e.update=hr(a,e.update)),e}function EH(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Ije=e=>Wt(e)?Ot(e):e.signal?`(${e.signal})`:Rje(e);function dj(e){if(e.gradient!=null)return OQt(e);let t=e.signal?`(${e.signal})`:e.color?PQt(e.color):e.field!=null?Rje(e.field):e.value!==void 0?Ot(e.value):void 0;return e.scale!=null&&(t=NQt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${wM(e.exponent)})`),e.mult!=null&&(t+=`*${wM(e.mult)}`),e.offset!=null&&(t+=`+${wM(e.offset)}`),e.round&&(t=`round(${t})`),t}const _O=(e,t,n,r)=>`(${e}(${[t,n,r].map(dj).join(",")})+'')`;function PQt(e){return e.c?_O("hcl",e.h,e.c,e.l):e.h||e.s?_O("hsl",e.h,e.s,e.l):e.l||e.a?_O("lab",e.l,e.a,e.b):e.r||e.g||e.b?_O("rgb",e.r,e.g,e.b):null}function OQt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Ot(n));for(;t.length&&zr(t)==null;)t.pop();return t.unshift(Ije(e.gradient)),`gradient(${t.join(",")})`}function wM(e){return qt(e)?"("+dj(e)+")":e}function Rje(e){return Dje(qt(e)?e:{datum:e})}function Dje(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):at("Invalid field reference: "+Ot(e));return e.signal||(r=Wt(r)?Tm(r).map(Ot).join("]["):Dje(r)),t+"["+r+"]"}function NQt(e,t){const n=Ije(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+wM(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function MQt(e){let t="";return e.forEach(n=>{const r=dj(n);t+=n.test?`(${n.test})?${r}:`:r}),zr(t)===":"&&(t+="null"),t}function Pje(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=DQt(e,t,n,r,i.config);for(const a in e)o[a]=$Qt(e[a],t,s,i);return s}function $Qt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=LQt(FQt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function FQt(e){return ut(e)?MQt(e):dj(e)}function LQt(e,t,n,r){const i=lm(e,t);return i.$fields.forEach(s=>r[s]=1),hr(n,i.$params),i.$expr}const jQt="outer",BQt=["value","update","init","react","bind"];function uwe(e,t){at(e+' for "outer" push: '+Ot(t))}function Oje(e,t){const n=e.name;if(e.push===jQt)t.signals[n]||uwe("No prior signal definition",n),BQt.forEach(r=>{e[r]!==void 0&&uwe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function aX(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function fj(e,t,n,r){return new aX(e,t,n,r)}function v$(e,t){return fj("operator",e,t)}function En(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function PI(e,t){return t?{$field:e,$name:t}:{$field:e}}const lX=PI("key");function cwe(e,t){return{$compare:e,$order:t}}function zQt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const VQt="ascending",UQt="descending";function HQt(e){return qt(e)?(e.order===UQt?"-":"+")+hj(e.op,e.field):""}function hj(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const ooe="scope",uX="view";function Wo(e){return e&&e.signal}function qQt(e){return e&&e.expr}function xM(e){if(Wo(e))return!0;if(qt(e)){for(const t in e)if(xM(e[t]))return!0}return!1}function Lf(e,t){return e??t}function Kb(e){return e&&e.signal||e}const dwe="timer";function OI(e,t){return(e.merge?GQt:e.stream?YQt:e.type?KQt:at("Invalid stream specification: "+Ot(e)))(e,t)}function WQt(e){return e===ooe?uX:e||uX}function GQt(e,t){const n=e.merge.map(i=>OI(i,t)),r=aoe({merge:n},e,t);return t.addStream(r).id}function YQt(e,t){const n=OI(e.stream,t),r=aoe({stream:n},e,t);return t.addStream(r).id}function KQt(e,t){let n;e.type===dwe?(n=t.event(dwe,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(WQt(e.source),e.type);const r=aoe({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function aoe(e,t,n){let r=t.between;return r&&(r.length!==2&&at('Stream "between" parameter must have 2 entries: '+Ot(t)),e.between=[OI(r[0],n),OI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(XQt(t.marktype,t.markname,t.markrole)),t.source===ooe&&r.push("inScope(event.item)"),r.length&&(e.filter=lm("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function XQt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const QQt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function JQt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||at("Signal update missing events specification."),Wt(s)&&(s=m1(s,t.isSubscope()?ooe:uX)),s=Ht(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[eJt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&at("Signal encode and update are mutually exclusive."),o="encode(item(),"+Ot(r)+")"),i.update=Wt(o)?lm(o,t):o.expr!=null?lm(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:QQt,$params:{$value:t.signalRef(o.signal)}}:at("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(hr(ZQt(l,t),i)))}function ZQt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):OI(e,t)}}function eJt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function tJt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?at("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=lm(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>JQt(i,t,n.id))}const Ni=e=>(t,n,r)=>fj(e,n,t||void 0,r),Nje=Ni("aggregate"),nJt=Ni("axisticks"),Mje=Ni("bound"),Bh=Ni("collect"),fwe=Ni("compare"),rJt=Ni("datajoin"),$je=Ni("encode"),iJt=Ni("expression"),sJt=Ni("facet"),oJt=Ni("field"),aJt=Ni("key"),lJt=Ni("legendentries"),uJt=Ni("load"),cJt=Ni("mark"),dJt=Ni("multiextent"),fJt=Ni("multivalues"),hJt=Ni("overlap"),pJt=Ni("params"),Fje=Ni("prefacet"),mJt=Ni("projection"),gJt=Ni("proxy"),yJt=Ni("relay"),Lje=Ni("render"),vJt=Ni("scale"),px=Ni("sieve"),bJt=Ni("sortitems"),jje=Ni("viewlayout"),wJt=Ni("values");let xJt=0;const Bje={min:"min",max:"max",count:"sum"};function _Jt(e,t){const n=e.type||"linear";SFe(n)||at("Unrecognized scale type: "+Ot(n)),t.addScale(e.name,{type:n,domain:void 0})}function EJt(e,t){const n=t.getScale(e.name).params;let r;n.domain=zje(e.domain,e,t),e.range!=null&&(n.range=Uje(e,t,n)),e.interpolate!=null&&OJt(e.interpolate,n),e.nice!=null&&(n.nice=PJt(e.nice,t)),e.bins!=null&&(n.bins=DJt(e.bins,t));for(r in e)Qt(n,r)||r==="name"||(n[r]=Fd(e[r],t))}function Fd(e,t){return qt(e)?e.signal?t.signalRef(e.signal):at("Unsupported object: "+Ot(e)):e}function _M(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Fd(n,t))}function pj(e){at("Can not find data set: "+Ot(e))}function zje(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&at("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ut(e)?CJt:e.fields?TJt:SJt)(e,t,n)}function CJt(e,t,n){return e.map(r=>Fd(r,n))}function SJt(e,t,n){const r=n.getData(e.data);return r||pj(e.data),yC(t.type)?r.valuesRef(n,e.field,Vje(e.sort,!1)):kFe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function TJt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Wt(o)?{data:r,field:o}:ut(o)||o.signal?AJt(o,n):o,s.push(o),s),[]);return(yC(t.type)?kJt:kFe(t.type)?IJt:RJt)(e,n,i)}function AJt(e,t){const n="_:vega:_"+xJt++,r=Bh({});if(ut(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Ot(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,px({})]),{data:n,field:"data"}}function kJt(e,t,n){const r=Vje(e.sort,!0);let i,s;const o=n.map(u=>{const c=t.getData(u.data);return c||pj(u.data),c.countsRef(t,u.field,r)}),a={groupby:lX,pulse:o};r&&(i=r.op||"count",s=r.field?hj(i,r.field):"count",a.ops=[Bje[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(Nje(a));const l=t.add(Bh({pulse:En(i)}));return s=t.add(wJt({field:lX,sort:t.sortRef(r),pulse:En(l)})),En(s)}function Vje(e,t){return e&&(!e.field&&!e.op?qt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?at("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Bje[e.op]&&at("Multiple domain scales can not be sorted using "+e.op)),e}function IJt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||pj(i.data),s.domainRef(t,i.field)});return En(t.add(fJt({values:r})))}function RJt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||pj(i.data),s.extentRef(t,i.field)});return En(t.add(dJt({extents:r})))}function DJt(e,t){return e.signal||ut(e)?_M(e,t):t.objectProperty(e)}function PJt(e,t){return e.signal?t.signalRef(e.signal):qt(e)?{interval:Fd(e.interval),step:Fd(e.step)}:Fd(e)}function OJt(e,t){t.interpolate=Fd(e.type||e),e.gamma!=null&&(t.interpolateGamma=Fd(e.gamma))}function Uje(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Wt(i)){if(r&&Qt(r,i))return e=hr({},e,{range:r[i]}),Uje(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=yC(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:at("Unrecognized scale range value: "+Ot(i))}else if(i.scheme){n.scheme=ut(i.scheme)?_M(i.scheme,t):Fd(i.scheme,t),i.extent&&(n.schemeExtent=_M(i.extent,t)),i.count&&(n.schemeCount=Fd(i.count,t));return}else if(i.step){n.rangeStep=Fd(i.step,t);return}else{if(yC(e.type)&&!ut(i))return zje(i,e,t);ut(i)||at("Unsupported range type: "+Ot(i))}return i.map(s=>(ut(s)?_M:Fd)(s,t))}function NJt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=cX(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=cX(n[i],i,t));t.addProjection(e.name,r)}function cX(e,t,n){return ut(e)?e.map(r=>cX(r,t,n)):qt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:at("Unsupported parameter object: "+Ot(e)):e}const zh="top",WS="left",GS="right",Nv="bottom",Hje="center",MJt="vertical",$Jt="start",FJt="middle",LJt="end",dX="index",loe="label",jJt="offset",_C="perc",BJt="perc2",Ud="value",ID="guide-label",uoe="guide-title",zJt="group-title",VJt="group-subtitle",hwe="symbol",EM="gradient",fX="discrete",hX="size",UJt="shape",HJt="fill",qJt="stroke",WJt="strokeWidth",GJt="strokeDash",YJt="opacity",coe=[hX,UJt,HJt,qJt,WJt,GJt,YJt],RD={name:1,style:1,interactive:1},Kr={value:0},Hd={value:1},mj="group",qje="rect",doe="rule",KJt="symbol",mx="text";function NI(e){return e.type=mj,e.interactive=e.interactive||!1,e}function gc(e,t){const n=(r,i)=>Lf(e[r],Lf(t[r],i));return n.isVertical=r=>MJt===Lf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Lf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Lf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Lf(e.columns,Lf(t.columns,+n.isVertical(!0))),n}function Wje(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function XJt(e,t,n){const r=t.config.style[n];return r&&r[e]}function gj(e,t,n){return`item.anchor === '${$Jt}' ? ${e} : item.anchor === '${LJt}' ? ${t} : ${n}`}const foe=gj(Ot(WS),Ot(GS),Ot(Hje));function QJt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},qt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function Gje(e,t){return t?e?qt(e)?Object.assign({},e,{offset:Gje(e.offset,t)}):{value:e,offset:t}:t:e}function Zc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=qS(e.encode,t,RD)):e.interactive=!1,e}function JJt(e,t,n,r){const i=gc(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,c,d,f;s?(u=[0,1],c=[0,0],d=o,f=a):(u=[0,0],c=[1,0],d=a,f=o);const h={enter:l={opacity:Kr,x:Kr,y:Kr,width:ya(d),height:ya(f)},update:hr({},l,{opacity:Hd,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Kr}};return Ya(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Zc({type:qje,role:SQt,encode:h},r)}function ZJt(e,t,n,r,i){const s=gc(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,d,f,h="";o?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:Kr,fill:{scale:t,field:Ud}};p[u]={signal:h+"datum."+_C,mult:l},p[c]=Kr,p[d]={signal:h+"datum."+BJt,mult:l},p[f]=ya(a);const m={enter:p,update:hr({},p,{opacity:Hd}),exit:{opacity:Kr}};return Ya(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Zc({type:qje,role:EQt,key:Ud,from:i,encode:m},r)}const eZt=`datum.${_C}<=0?"${WS}":datum.${_C}>=1?"${GS}":"${Hje}"`,tZt=`datum.${_C}<=0?"${Nv}":datum.${_C}>=1?"${zh}":"${FJt}"`;function pwe(e,t,n,r){const i=gc(e,t),s=i.isVertical(),o=ya(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,d,f,h="";const p={enter:u={opacity:Kr},update:c={opacity:Hd,text:{field:loe}},exit:{opacity:Kr}};return Ya(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Lf(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:tZt},d="y",f="x",h="1-"):(u.align=c.align={signal:eZt},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum."+_C,mult:a},u[f]=c[f]=o,o.offset=Lf(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+dX}:void 0,Zc({type:mx,role:kje,style:ID,key:Ud,from:r,encode:p,overlap:l},n)}function nZt(e,t,n,r,i){const s=gc(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${jJt} : datum.${hX}`,h=u?ya(u):{field:hX},p=`datum.${dX}`,m=`max(1, ${i})`;let g,y,v,b,_;h.mult=.5,g={enter:y={opacity:Kr,x:{signal:f,mult:.5,offset:c},y:h},update:v={opacity:Hd,x:y.x,y:y.y},exit:{opacity:Kr}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Ya(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),coe.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:Ud})});const T=Zc({type:KJt,role:TQt,key:Ud,from:d,clip:u?!0:void 0,encode:g},n.symbols),A=ya(c);A.offset=s("labelOffset"),g={enter:y={opacity:Kr,x:{signal:f,offset:A},y:h},update:v={opacity:Hd,text:{field:loe},x:y.x,y:y.y},exit:{opacity:Kr}},Ya(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const R=Zc({type:mx,role:kje,style:ID,key:Ud,from:d,encode:g},n.labels);return g={enter:{noBound:{value:!u},width:Kr,height:u?ya(u):Kr,opacity:Kr},exit:{opacity:Kr},update:v={opacity:Hd,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,_={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,_={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:dX}},NI({role:soe,from:r,encode:qS(g,o,RD),marks:[T,R],name:l,interactive:a,sort:_})}function rZt(e,t){const n=gc(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const hoe='item.orient === "left"',poe='item.orient === "right"',yj=`(${hoe} || ${poe})`,iZt=`datum.vgrad && ${yj}`,sZt=gj('"top"','"bottom"','"middle"'),oZt=gj('"right"','"left"','"center"'),aZt=`datum.vgrad && ${poe} ? (${oZt}) : (${yj} && !(datum.vgrad && ${hoe})) ? "left" : ${foe}`,lZt=`item._anchor || (${yj} ? "middle" : "start")`,uZt=`${iZt} ? (${hoe} ? -90 : 90) : 0`,cZt=`${yj} ? (datum.vgrad ? (${poe} ? "bottom" : "top") : ${sZt}) : "top"`;function dZt(e,t,n,r){const i=gc(e,t),s={enter:{opacity:Kr},update:{opacity:Hd,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Kr}};return Ya(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:lZt},angle:{signal:uZt},align:{signal:aZt},baseline:{signal:cZt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Zc({type:mx,role:AQt,style:uoe,from:r,encode:s},n)}function fZt(e,t){let n;return qt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+mwe(e.path)+")":e.sphere&&(n="geoShape("+mwe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function mwe(e){return qt(e)&&e.signal?e.signal:Ot(e)}function Yje(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===mj?soe:t||roe}function hZt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Yje(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function pZt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function moe(e,t){const n=P$e(e.type);n||at("Unrecognized transform type: "+Ot(e.type));const r=fj(n.type.toLowerCase(),null,Kje(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function Kje(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=mZt(o,t,n)}return r}function mZt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return gZt(e,t,n);if(i===void 0){e.required&&at("Missing required "+Ot(t.type)+" parameter: "+Ot(e.name));return}else{if(r==="param")return yZt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Wo(i)?i.map(s=>gwe(e,s,n)):gwe(e,i,n)}function gwe(e,t,n){const r=e.type;if(Wo(t))return vwe(r)?at("Expression references can not be signals."):CH(r)?n.fieldRef(t):bwe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||CH(r);return i&&vZt(t)?n.exprRef(t.expr,t.as):i&&bZt(t)?PI(t.field,t.as):vwe(r)?lm(t,n):wZt(r)?En(n.getData(t).values):CH(r)?PI(t):bwe(r)?n.compareRef(t):t}}function gZt(e,t,n){return Wt(t.from)||at('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function yZt(e,t,n){const r=t[e.name];return e.array?(ut(r)||at("Expected an array of sub-parameters. Instead: "+Ot(r)),r.map(i=>ywe(e,i,n))):ywe(e,r,n)}function ywe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||at("Unsupported parameter: "+Ot(t));const s=hr(Kje(i,t,n),i.key);return En(n.add(pJt(s)))}const vZt=e=>e&&e.expr,bZt=e=>e&&e.field,wZt=e=>e==="data",vwe=e=>e==="expr",CH=e=>e==="field",bwe=e=>e==="compare";function xZt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||at("Only group marks can be faceted."),r.field!=null?o=a=CM(r,n):(e.data?a=En(n.getData(e.data).aggregate):(s=moe(hr({type:"aggregate",groupby:Ht(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=CM(r,n),o=a=En(n.add(s))),i=n.keyRef(r.groupby,!0))):o=En(n.add(Bh(null,[{}]))),o||(o=CM(e,n)),{key:i,pulse:o,parent:a}}function CM(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:En(t.getData(e.data).output)}function Cw(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Cw.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=En(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Cw(e,s,i,r,o)};function Xje(e){return Wt(e)?e:null}function wwe(e,t,n){const r=hj(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function x2(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=HQt(s);let u=Xje(i),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const f=s?{field:lX,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:En(t.output)};l&&(f.sort=e.sortRef(s)),d=e.add(fj(r,void 0,f)),o&&(t.index[i]=d),c=En(d),u!=null&&(a[u]=c)}return c}Cw.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=Xje(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&wwe(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:En(r.output)},n&&n.field&&wwe(e,l,n),a=e.add(Nje(l)),o=e.add(Bh({pulse:En(a)})),o={agg:a,ref:En(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return En(this.values)},extentRef(e,t){return x2(e,this,"extent","extent",t,!1)},domainRef(e,t){return x2(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return x2(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return x2(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return x2(e,this,"indata","tupleindex",t,!0,!0)}};function _Zt(e,t,n){const r=e.from.facet,i=r.name,s=CM(r,t);let o;r.name||at("Facet must have a name: "+Ot(r)),r.data||at("Facet must reference a data set: "+Ot(r)),r.field?o=t.add(Fje({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(sJt({key:t.keyRef(r.groupby),group:En(t.proxy(n.parent)),pulse:s})):at("Facet must specify groupby or field: "+Ot(r));const a=t.fork(),l=a.add(Bh()),u=a.add(px({pulse:En(l)}));a.addData(i,new Cw(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function EZt(e,t,n){const r=t.add(Fje({pulse:n.pulse})),i=t.fork();i.add(px()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Qje(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(v$()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(d=>d??"null").join(",")+"),0)",c=lm(u,t);l.update=c.$expr,l.params=c.$params}function vj(e,t){const n=Yje(e),r=e.type===mj,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===soe||n===ioe,a,l,u,c,d,f,h;const p=n===roe||o||i,m=xZt(e.from,r,t);l=t.add(rJt({key:m.key||(e.key?PI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=En(l);l=u=t.add(Bh({pulse:g})),l=t.add(cJt({markdef:hZt(e),interactive:pZt(e.interactive,t),clip:fZt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:En(l)}));const y=En(l);l=c=t.add($je(Pje(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=moe(S,t),A=T.metadata;(A.generates||A.changes)&&at("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),T.params.pulse=En(l),t.add(l=T)}),e.sort&&(l=t.add(bJt({sort:t.compareRef(e.sort),pulse:En(l)})));const v=En(l);(i||o)&&(o=t.add(jje({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=En(o));const b=t.add(Mje({mark:y,pulse:f||v}));h=En(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,f||h,g),i?_Zt(e,t,m):p?EZt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=CZt(s,h,t));const _=t.add(Lje({pulse:h})),E=t.add(px({pulse:En(_)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new Cw(t,u,_,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&at("Marks only support modify triggers."),Qje(S,t,d)}))}function CZt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Wo(s)?n.signalRef(s.signal):s,method:Wo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Wo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return En(n.add(hJt(o)))}function SZt(e,t){const n=t.config.legend,r=e.encode||{},i=gc(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,d,f,h;coe.forEach(b=>e[b]?(u[b]=e[b],c=c||e[b]):0),c||at("Missing valid scale for legend.");const p=TZt(e,t.scaleType(c)),m={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=En(t.add(Bh(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=En(t.add(lJt(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===EM?(h=[JJt(e,c,n,r.gradient),pwe(e,n,r.labels,v)],f.count=f.count||t.signalRef(`max(2,2*floor((${Kb(i.gradientLength())})/100))`)):p===fX?h=[ZJt(e,c,n,r.gradient,v),pwe(e,n,r.labels,v)]:(d=rZt(e,n),h=[nZt(e,n,r,v,Kb(d.columns))],f.size=IZt(e,t,h[0].marks)),h=[NI({role:CQt,from:g,encode:y,marks:h,layout:d,interactive:a})],m.title&&h.push(dZt(e,n,r.title,g)),vj(NI({role:_Qt,from:g,encode:qS(kZt(i,e,n),s,RD),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function TZt(e,t){let n=e.type||hwe;return!e.type&&AZt(e)===1&&(e.fill||e.stroke)&&(n=kie(t)?EM:AK(t)?fX:hwe),n!==EM?n:AK(t)?fX:EM}function AZt(e){return coe.reduce((t,n)=>t+(e[n]?1:0),0)}function kZt(e,t,n){const r={enter:{},update:{}};return Ya(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function IZt(e,t,n){const r=Kb(xwe("size",e,n)),i=Kb(xwe("strokeWidth",e,n)),s=Kb(RZt(n[1].encode,t,ID));return lm(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function xwe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Wje(e,n[0].encode)}function RZt(e,t,n){return Wje("fontSize",e)||XJt("fontSize",t,n)}const DZt=`item.orient==="${WS}"?-90:item.orient==="${GS}"?90:0`;function PZt(e,t){e=Wt(e)?{text:e}:e;const n=gc(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},c=En(t.add(Bh(null,[u])));return l.push(MZt(e,n,OZt(e),c)),e.subtitle&&l.push($Zt(e,n,r.subtitle,c)),vj(NI({role:kQt,from:c,encode:NZt(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function OZt(e){const t=e.encode;return t&&t.title||hr({name:e.name,interactive:e.interactive,style:e.style},t)}function NZt(e,t){const n={enter:{},update:{}};return Ya(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:foe},angle:{signal:DZt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),qS(n,t,RD)}function MZt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ya(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Zc({type:mx,role:IQt,style:zJt,from:r,encode:o},n)}function $Zt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Ya(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Zc({type:mx,role:RQt,style:VJt,from:r,encode:o},n)}function FZt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(moe(r,t))}),e.on&&e.on.forEach(r=>{Qje(r,t,e.name)}),t.addDataPipeline(e.name,LZt(e,t,n))}function LZt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,c,d;for(e.values?Wo(e.values)||xM(e.format)?(r.push(_we(t,e)),r.push(i=Y1())):r.push(i=Y1({$ingest:e.values,$format:e.format})):e.url?xM(e.url)||xM(e.format)?(r.push(_we(t,e)),r.push(i=Y1())):r.push(i=Y1({$request:e.url,$format:e.format})):e.source&&(i=a=Ht(e.source).map(f=>En(t.getData(f).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!i&&!d.source&&r.push(i=Y1()),r.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?i=c:d.changes&&(i=null);return a&&(u=a.length-1,r[0]=yJt({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,Y1())),i||r.push(Y1()),r.push(px({})),r}function Y1(e){const t=Bh({},e);return t.metadata={source:!0},t}function _we(e,t){return uJt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Jje=e=>e===Nv||e===zh,bj=(e,t,n)=>Wo(e)?VZt(e.signal,t,n):e===WS||e===zh?t:n,va=(e,t,n)=>Wo(e)?BZt(e.signal,t,n):Jje(e)?t:n,ah=(e,t,n)=>Wo(e)?zZt(e.signal,t,n):Jje(e)?n:t,Zje=(e,t,n)=>Wo(e)?UZt(e.signal,t,n):e===zh?{value:t}:{value:n},jZt=(e,t,n)=>Wo(e)?HZt(e.signal,t,n):e===GS?{value:t}:{value:n},BZt=(e,t,n)=>eBe(`${e} === '${zh}' || ${e} === '${Nv}'`,t,n),zZt=(e,t,n)=>eBe(`${e} !== '${zh}' && ${e} !== '${Nv}'`,t,n),VZt=(e,t,n)=>goe(`${e} === '${WS}' || ${e} === '${zh}'`,t,n),UZt=(e,t,n)=>goe(`${e} === '${zh}'`,t,n),HZt=(e,t,n)=>goe(`${e} === '${GS}'`,t,n),eBe=(e,t,n)=>(t=t!=null?ya(t):t,n=n!=null?ya(n):n,Ewe(t)&&Ewe(n)?(t=t?t.signal||Ot(t.value):null,n=n?n.signal||Ot(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[hr({test:e},t)].concat(n||[])),Ewe=e=>e==null||Object.keys(e).length===1,goe=(e,t,n)=>({signal:`${e} ? (${aE(t)}) : (${aE(n)})`}),qZt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${WS}' ? (${aE(r)}) : `:"")+(n!=null?`${e} === '${Nv}' ? (${aE(n)}) : `:"")+(i!=null?`${e} === '${GS}' ? (${aE(i)}) : `:"")+(t!=null?`${e} === '${zh}' ? (${aE(t)}) : `:"")+"(null)"}),aE=e=>Wo(e)?e.signal:e==null?null:Ot(e),WZt=(e,t)=>t===0?0:Wo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},kE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function E_(e,t,n,r){let i;if(t&&Qt(t,e))return t[e];if(Qt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[uoe][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[ID][i]}return null}function Cwe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function GZt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(Wo(o)){const d=Cwe([n.axisX,n.axisY]),f=Cwe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of d)a[u]=va(o,E_(u,n.axisX,i,r),E_(u,n.axisY,i,r));l={};for(u of f)l[u]=qZt(o.signal,E_(u,n.axisTop,i,r),E_(u,n.axisBottom,i,r),E_(u,n.axisLeft,i,r),E_(u,n.axisRight,i,r))}else a=o===zh||o===Nv?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?hr({},i,a,l,s):i}function YZt(e,t,n,r){const i=gc(e,t),s=e.orient;let o,a;const l={enter:o={opacity:Kr},update:a={opacity:Hd},exit:{opacity:Kr}};Ya(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Swe(e,0),c=Swe(e,1);return o.x=a.x=va(s,u,Kr),o.x2=a.x2=va(s,c),o.y=a.y=ah(s,u,Kr),o.y2=a.y2=ah(s,c),Zc({type:doe,role:yQt,from:r,encode:l},n)}function Swe(e,t){return{scale:e.scale,range:t}}function KZt(e,t,n,r,i){const s=gc(e,t),o=e.orient,a=e.gridScale,l=bj(o,1,-1),u=XZt(e.offset,l);let c,d,f;const h={enter:c={opacity:Kr},update:f={opacity:Hd},exit:d={opacity:Kr}};Ya(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Ud,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=va(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:hr(m,{mult:l,offset:u});return c.x=f.x=va(o,p,g),c.y=f.y=ah(o,p,g),c.x2=f.x2=ah(o,y),c.y2=f.y2=va(o,y),d.x=va(o,p),d.y=ah(o,p),Zc({type:doe,role:vQt,key:Ud,from:r,encode:h},n)}function XZt(e,t){if(t!==1)if(!qt(e))e=Wo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=hr({},e);for(;n.mult!=null;)if(qt(n.mult))n=n.mult=hr({},n.mult);else return n.mult=Wo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function QZt(e,t,n,r,i,s){const o=gc(e,t),a=e.orient,l=bj(a,-1,1);let u,c,d;const f={enter:u={opacity:Kr},update:d={opacity:Hd},exit:c={opacity:Kr}};Ya(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ya(i);h.mult=l;const p={scale:e.scale,field:Ud,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=u.y=va(a,Kr,p),d.y2=u.y2=va(a,h),c.x=va(a,p),d.x=u.x=ah(a,Kr,p),d.x2=u.x2=ah(a,h),c.y=ah(a,p),Zc({type:doe,role:wQt,key:Ud,from:r,encode:f},n)}function SH(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function JZt(e,t,n,r,i,s){const o=gc(e,t),a=e.orient,l=e.scale,u=bj(a,-1,1),c=Kb(o("labelFlush")),d=Kb(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ya(i);g.mult=u,g.offset=ya(o("labelPadding")||0),g.offset.mult=u;const y={scale:l,field:Ud,band:.5,offset:Gje(s.offset,o("labelOffset"))},v=va(a,p?SH(l,c,'"left"','"right"','"center"'):{value:"center"},jZt(a,"left","right")),b=va(a,Zje(a,"bottom","top"),p?SH(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),_=SH(l,c,`-(${d})`,d,0);p=p&&d;const E={opacity:Kr,x:va(a,y,g),y:ah(a,y,g)},S={enter:E,update:m={opacity:Hd,text:{field:loe},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:Kr,x:E.x,y:E.y}};Ya(S,{dx:!f&&p?va(a,_):null,dy:!h&&p?ah(a,_):null}),Ya(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const T=o("labelBound");let A=o("labelOverlap");return A=A||T?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:T?{scale:l,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=kE(m.align,v)),m.baseline!==b&&(m.baseline=kE(m.baseline,b)),Zc({type:mx,role:bQt,style:ID,key:Ud,from:r,encode:S,overlap:A},n)}function ZZt(e,t,n,r){const i=gc(e,t),s=e.orient,o=bj(s,-1,1);let a,l;const u={enter:a={opacity:Kr,anchor:ya(i("titleAnchor",null)),align:{signal:foe}},update:l=hr({},a,{opacity:Hd,text:ya(e.title)}),exit:{opacity:Kr}},c={signal:`lerp(range("${e.scale}"), ${gj(0,1,.5)})`};return l.x=va(s,c),l.y=ah(s,c),a.angle=va(s,Kr,WZt(o,90)),a.baseline=va(s,Zje(s,Nv,zh),{value:Nv}),l.angle=a.angle,l.baseline=a.baseline,Ya(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),een(i,s,u,n),u.update.align=kE(u.update.align,a.align),u.update.angle=kE(u.update.angle,a.angle),u.update.baseline=kE(u.update.baseline,a.baseline),Zc({type:mx,role:xQt,style:uoe,from:r,encode:u},n)}function een(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=kE(ya(a),n.update[l]),!1):!U_(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ya(o):va(t,ya(o),ya(s))}function ten(e,t){const n=GZt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=gc(e,n),u=QJt(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=En(t.add(Bh({},[c]))),f=En(t.add(nJt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(KZt(e,n,r.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(QZt(e,n,r.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(JZt(e,n,r.labels,f,p,u))),c.domain&&h.push(YZt(e,n,r.domain,d)),c.title&&h.push(ZZt(e,n,r.title,d)),vj(NI({role:gQt,from:d,encode:qS(nen(l,e),i,RD),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function nen(e,t){const n={enter:{},update:{}};return Ya(n,{orient:e("orient"),offset:e("offset")||0,position:Lf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function tBe(e,t,n){const r=Ht(e.signals),i=Ht(e.scales);return n||r.forEach(s=>Oje(s,t)),Ht(e.projections).forEach(s=>NJt(s,t)),i.forEach(s=>_Jt(s,t)),Ht(e.data).forEach(s=>FZt(s,t)),i.forEach(s=>EJt(s,t)),(n||r).forEach(s=>tJt(s,t)),Ht(e.axes).forEach(s=>ten(s,t)),Ht(e.marks).forEach(s=>vj(s,t)),Ht(e.legends).forEach(s=>SZt(s,t)),e.title&&PZt(e.title,t),t.parseLambdas(),t}const ren=e=>qS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function ien(e,t){const n=t.config,r=En(t.root=t.add(v$())),i=sen(e,n);i.forEach(u=>Oje(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Bh()),o=t.add($je(Pje(ren(e.encode),mj,ioe,e.style,t,{pulse:En(s)}))),a=t.add(jje({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:En(o)}));t.operators.pop(),t.pushState(En(o),En(a),null),tBe(e,t,i),t.operators.push(a);let l=t.add(Mje({mark:r,pulse:En(a)}));return l=t.add(Lje({pulse:En(l)})),l=t.add(px({pulse:En(l)})),t.addData("root",new Cw(t,s,s,l)),t}function _2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function sen(e,t){const n=o=>Lf(e[o],t[o]),r=[_2("background",n("background")),_2("autosize",hQt(n("autosize"))),_2("padding",mQt(n("padding"))),_2("width",n("width")||0),_2("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Ht(e.signals).forEach(o=>{Qt(i,o.name)?o=hr(i[o.name],o):r.push(o),s[o.name]=o}),Ht(t.signals).forEach(o=>{!Qt(s,o.name)&&!Qt(i,o.name)&&r.push(o)}),r}function nBe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Twe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}nBe.prototype=Twe.prototype={parse(e){return tBe(e,this)},fork(){return new Twe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof aX?En(e):e;return this.add(gJt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(En(this.add(px({pulse:e})))),this._parent.push(t),this._lookup.push(n?En(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return zr(this._parent)},encode(){return zr(this._encode)},lookup(){return zr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Wt(e))return PI(e,t);e.signal||at("Unsupported field reference: "+Ot(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=En(this.add(oJt(i)))}return r},compareRef(e){let t=!1;const n=s=>Wo(s)?(t=!0,this.signalRef(s.signal)):qQt(s)?(t=!0,this.exprRef(s.expr)):s,r=Ht(e.field).map(n),i=Ht(e.order).map(n);return t?En(this.add(fwe({fields:r,orders:i}))):cwe(r,i)},keyRef(e,t){let n=!1;const r=s=>Wo(s)?(n=!0,En(i[s.signal])):s,i=this.signals;return e=Ht(e).map(r),n?En(this.add(aJt({fields:e,flat:t}))):zQt(e,t)},sortRef(e){if(!e)return e;const t=hj(e.op,e.field),n=e.order||VQt;return n.signal?En(this.add(fwe({fields:t,orders:this.signalRef(n.signal)}))):cwe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Qt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&at("Duplicate signal name: "+Ot(e));const n=t instanceof aX?t:this.add(v$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||at("Unrecognized signal name: "+Ot(e)),this.signals[e]},signalRef(e){return this.signals[e]?En(this.signals[e]):(Qt(this.lambdas,e)||(this.lambdas[e]=this.add(v$(null))),En(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=lm(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!qt(e)?e:this.signalRef(e.signal||yoe(e))},exprRef(e,t){const n={expr:lm(e,this)};return t&&(n.expr.$name=t),En(this.add(iJt(n)))},addBinding(e,t){this.bindings||at("Nested signals do not support binding: "+Ot(e)),this.bindings.push(hr({signal:e},t))},addScaleProj(e,t){Qt(this.scales,e)&&at("Duplicate scale or projection name: "+Ot(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,vJt(t))},addProjection(e,t){this.addScaleProj(e,mJt(t))},getScale(e){return this.scales[e]||at("Unrecognized scale name: "+Ot(e)),this.scales[e]},scaleRef(e){return En(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Qt(this.data,e)&&at("Duplicate data set name: "+Ot(e)),this.data[e]=t},getData(e){return this.data[e]||at("Undefined data set name: "+Ot(e)),this.data[e]},addDataPipeline(e,t){return Qt(this.data,e)&&at("Duplicate data set name: "+Ot(e)),this.addData(e,Cw.fromEntries(this,t))}};function yoe(e){return(ut(e)?oen:aen)(e)}function oen(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(qt(i)?i.signal||yoe(i):Ot(i))}return n+"]"}function aen(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Ot(r)+":"+(qt(i)?i.signal||yoe(i):Ot(i));return t+"}"}function len(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function uen(e,t,n){return qt(e)||at("Input Vega specification must be an object."),t=FS(len(),t,e.config),ien(e,new nBe(t,n)).toRuntime()}var cen="5.33.0";hr(pC,rzt,HHt,_qt,Zqt,oWt,OWt,fWt,MWt,jWt,KWt,nGt);const den=Object.freeze(Object.defineProperty({__proto__:null,Bounds:To,CanvasHandler:CD,CanvasRenderer:o$,DATE:ac,DAY:xl,DAYOFYEAR:am,Dataflow:AE,Debug:A5e,Error:fre,EventStream:N8,Gradient:UFe,GroupItem:G8,HOURS:Xc,Handler:Zie,HybridHandler:NLe,HybridRenderer:LK,Info:T5e,Item:W8,MILLISECONDS:bh,MINUTES:Qc,MONTH:kl,Marks:Jc,MultiPulse:Ore,None:S5e,Operator:Li,Parameters:O8,Pulse:iv,QUARTER:oc,RenderType:By,Renderer:ED,ResourceLoader:XFe,SECONDS:tf,SVGHandler:xLe,SVGRenderer:sse,SVGStringRenderer:OLe,Scenegraph:hLe,TIME_UNITS:Sre,Transform:et,View:wje,WEEK:Ho,Warn:hre,YEAR:Wa,accessor:mc,accessorFields:Al,accessorName:Bs,array:Ht,ascending:aD,bandwidthNRD:Fre,bin:M$e,bootstrapCI:$$e,boundClip:HLe,boundContext:bD,boundItem:OK,boundMark:uLe,boundStroke:I0,changeset:dx,clampRange:L5e,codegenExpression:G8e,compare:vre,constant:Nl,cumulativeLogNormal:Ure,cumulativeNormal:$8,cumulativeUniform:Gre,dayofyear:K5e,debounce:bre,defaultLocale:kre,definition:P$e,densityLogNormal:Vre,densityNormal:Lre,densityUniform:Wre,domChild:Vo,domClear:Id,domCreate:Ly,domFind:Jie,dotbin:F$e,error:at,expressionFunction:po,extend:hr,extent:om,extentIndex:j5e,falsy:fy,fastmap:jS,field:Zd,flush:B5e,font:J8,fontFamily:_D,fontSize:Am,format:sM,formatLocale:G5,formats:Dre,hasOwnProperty:Qt,id:oD,identity:Ol,inferType:x$e,inferTypes:_$e,ingest:yi,inherits:$t,inrange:iE,interpolate:Iie,interpolateColors:H8,interpolateRange:IFe,intersect:BLe,intersectBoxLine:sE,intersectPath:Fie,intersectPoint:Lie,intersectRule:JFe,isArray:ut,isBoolean:h1,isDate:rv,isFunction:pr,isIterable:z5e,isNumber:ci,isObject:qt,isRegExp:wre,isString:Wt,isTuple:D8,key:xre,lerp:V5e,lineHeight:Dv,loader:I8,locale:b$e,logger:pre,lruCache:U5e,markup:ise,merge:H5e,mergeConfig:FS,multiLineOffset:Kie,one:$S,pad:q5e,panLinear:P5e,panLog:O5e,panPow:N5e,panSymlog:M5e,parse:uen,parseExpression:H8e,parseSelector:m1,path:XL,pathCurves:Nie,pathEqual:qLe,pathParse:vC,pathRectangle:WFe,pathRender:CI,pathSymbols:qFe,pathTrail:GFe,peek:zr,point:ej,projection:yse,quantileLogNormal:Hre,quantileNormal:F8,quantileUniform:Yre,quantiles:Mre,quantizeInterpolator:RFe,quarter:$5e,quartiles:$re,get random(){return nf},randomInteger:a7t,randomKDE:Bre,randomLCG:o7t,randomLogNormal:j$e,randomMixture:B$e,randomNormal:jre,randomUniform:z$e,read:S$e,regressionConstant:Kre,regressionExp:U$e,regressionLinear:Xre,regressionLoess:W$e,regressionLog:V$e,regressionPoly:q$e,regressionPow:H$e,regressionQuad:Qre,renderModule:tj,repeat:fA,resetDefaultLocale:r9t,resetSVGClipId:KFe,resetSVGDefIds:lHt,responseType:C$e,runtimeContext:aje,sampleCurve:j8,sampleLogNormal:zre,sampleNormal:M8,sampleUniform:qre,scale:di,sceneEqual:ose,sceneFromJSON:dLe,scenePickVisit:J5,sceneToJSON:cLe,sceneVisit:wh,sceneZOrder:jie,scheme:Rie,serializeXML:ILe,setHybridRendererOptions:iHt,setRandom:i7t,span:lD,splitAccessPath:Tm,stringValue:Ot,textMetrics:jc,timeBin:f$e,timeFloor:n$e,timeFormatLocale:xI,timeInterval:BS,timeOffset:s$e,timeSequence:l$e,timeUnitSpecifier:Y5e,timeUnits:Tre,toBoolean:_re,toDate:Ere,toNumber:Cl,toSet:vh,toString:Cre,transform:O$e,transforms:pC,truncate:W5e,truthy:ef,tupleid:Cn,typeParsers:CK,utcFloor:r$e,utcInterval:zS,utcOffset:o$e,utcSequence:u$e,utcdayofyear:J5e,utcquarter:F5e,utcweek:Z5e,version:cen,visitArray:by,week:X5e,writeConfig:LS,zero:Ay,zoomLinear:mre,zoomLog:gre,zoomPow:W5,zoomSymlog:yre},Symbol.toStringTag,{value:"Module"})),fen="5.23.0",hen={version:fen};function voe(e){return xt(e,"or")}function boe(e){return xt(e,"and")}function woe(e){return xt(e,"not")}function SM(e,t){if(woe(e))SM(e.not,t);else if(boe(e))for(const n of e.and)SM(n,t);else if(voe(e))for(const n of e.or)SM(n,t);else t(e)}function IE(e,t){return woe(e)?{not:IE(e.not,t)}:boe(e)?{and:e.and.map(n=>IE(n,t))}:voe(e)?{or:e.or.map(n=>IE(n,t))}:t(e)}const er=structuredClone;function rBe(e){throw new Error(e)}function EC(e,t){const n={};for(const r of t)Qt(e,r)&&(n[r]=e[r]);return n}function ec(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Oi(e)).join(",")})`};function $r(e){if(ci(e))return e;const t=Wt(e)?e:Oi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function pX(e){return e===!1||e===null}function kr(e,t){return e.includes(t)}function CC(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function xoe(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function iBe(e,...t){for(const n of t)pen(e,n??{});return e}function pen(e,t){for(const n of wt(t))LS(e,n,t[n],!0)}function Dp(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function men(e,t){const n=wt(e),r=wt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function sBe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function _oe(e,t){for(const n of e)if(t.has(n))return!0;return!1}function mX(e){const t=new Set;for(const n of e){const i=Tm(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Eoe(e,t){return e===void 0||t===void 0?!0:_oe(mX(e),mX(t))}function Pi(e){return wt(e).length===0}const wt=Object.keys,Ga=Object.values,Mv=Object.entries;function MI(e){return e===!0||e===!1}function gs(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ck(e,t){return woe(e)?`!(${ck(e.not,t)})`:boe(e)?`(${e.and.map(n=>ck(n,t)).join(") && (")})`:voe(e)?`(${e.or.map(n=>ck(n,t)).join(") || (")})`:t(e)}function b$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&b$(e[n],t)&&delete e[n],Pi(e)}function DD(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Coe(e,t="datum"){const n=Tm(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Ot).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function oBe(e,t="datum"){return`${t}[${Ot(Tm(e).join("."))}]`}function Ti(e){return`datum['${e.replaceAll("'","\\'")}']`}function gen(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function rf(e){return`${Tm(e).map(gen).join("\\.")}`}function Sw(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function YS(e){return`${Tm(e).join(".")}`}function SC(e){return e?Tm(e).length:0}function ao(...e){return e.find(t=>t!==void 0)}let aBe=42;function lBe(e){const t=++aBe;return e?String(e)+t:t}function yen(){aBe=42}function uBe(e){return cBe(e)?e:`__${e}`}function cBe(e){return e.startsWith("__")}function $I(e){if(e!==void 0)return(e%360+360)%360}function wj(e){return ci(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Awe=Object.getPrototypeOf(structuredClone({}));function $c(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!$c(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!$c(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Awe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Awe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!$c(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Oi(e){const t=[];return(function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`})(e)}function xt(e,t){return qt(e)&&Qt(e,t)&&e[t]!==void 0}const Og="row",Ng="column",xj="facet",vs="x",Ca="y",Vh="x2",Rm="y2",g1="xOffset",KS="yOffset",Uh="radius",D0="radius2",yf="theta",P0="theta2",Hh="latitude",qh="longitude",Wh="latitude2",sf="longitude2",y1="time",lc="color",Dm="fill",Pm="stroke",uc="shape",O0="size",gx="angle",N0="opacity",v1="fillOpacity",b1="strokeOpacity",w1="strokeWidth",x1="strokeDash",PD="text",TC="order",OD="detail",_j="key",Tw="tooltip",Ej="href",Cj="url",Sj="description",ven={x:1,y:1,x2:1,y2:1},dBe={theta:1,theta2:1,radius:1,radius2:1};function fBe(e){return Qt(dBe,e)}const Soe={longitude:1,longitude2:1,latitude:1,latitude2:1};function hBe(e){switch(e){case Hh:return"y";case Wh:return"y2";case qh:return"x";case sf:return"x2"}}function pBe(e){return Qt(Soe,e)}const ben=wt(Soe),Toe={...ven,...dBe,...Soe,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function RE(e){return e===lc||e===Dm||e===Pm}const mBe={row:1,column:1,facet:1},Ld=wt(mBe),Aoe={...Toe,...mBe},wen=wt(Aoe),{order:FAn,detail:LAn,tooltip:jAn,...xen}=Aoe,{row:BAn,column:zAn,facet:VAn,..._en}=xen;function Een(e){return Qt(_en,e)}function gBe(e){return Qt(Aoe,e)}const Cen=[Vh,Rm,Wh,sf,P0,D0];function yBe(e){return yx(e)!==e}function yx(e){switch(e){case Vh:return vs;case Rm:return Ca;case Wh:return Hh;case sf:return qh;case P0:return yf;case D0:return Uh}return e}function $v(e){if(fBe(e))switch(e){case yf:return"startAngle";case P0:return"endAngle";case Uh:return"outerRadius";case D0:return"innerRadius"}return e}function Om(e){switch(e){case vs:return Vh;case Ca:return Rm;case Hh:return Wh;case qh:return sf;case yf:return P0;case Uh:return D0}}function cc(e){switch(e){case vs:case Vh:return"width";case Ca:case Rm:return"height"}}function vBe(e){switch(e){case vs:return"xOffset";case Ca:return"yOffset";case Vh:return"x2Offset";case Rm:return"y2Offset";case yf:return"thetaOffset";case Uh:return"radiusOffset";case P0:return"theta2Offset";case D0:return"radius2Offset"}}function koe(e){switch(e){case vs:return"xOffset";case Ca:return"yOffset"}}function Sen(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Ten=wt(Toe),{x:UAn,y:HAn,x2:qAn,y2:WAn,xOffset:GAn,yOffset:YAn,latitude:KAn,longitude:XAn,latitude2:QAn,longitude2:JAn,theta:ZAn,theta2:ekn,radius:tkn,radius2:nkn,...Ioe}=Toe,Aen=wt(Ioe),Roe={x:1,y:1},M0=wt(Roe);function lo(e){return Qt(Roe,e)}const Doe={theta:1,radius:1},ken=wt(Doe);function Tj(e){return e==="width"?vs:Ca}const bBe={xOffset:1,yOffset:1};function ND(e){return Qt(bBe,e)}const Ien={time:1};function TH(e){return e in Ien}const{text:rkn,tooltip:ikn,href:skn,url:okn,description:akn,detail:lkn,key:ukn,order:ckn,...wBe}=Ioe,Ren=wt(wBe);function Den(e){return Qt(Ioe,e)}function Pen(e){switch(e){case lc:case Dm:case Pm:case O0:case uc:case N0:case w1:case x1:return!0;case v1:case b1:case gx:case y1:return!1}}const xBe={...Roe,...Doe,...bBe,...wBe},Poe=wt(xBe);function Nm(e){return Qt(xBe,e)}function Oen(e,t){return Men(e)[t]}const _Be={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:dkn,...Nen}=_Be;function Men(e){switch(e){case lc:case Dm:case Pm:case Sj:case OD:case _j:case Tw:case Ej:case TC:case N0:case v1:case b1:case w1:case xj:case Og:case Ng:return _Be;case vs:case Ca:case g1:case KS:case Hh:case qh:case y1:return Nen;case Vh:case Rm:case Wh:case sf:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case O0:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case x1:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case uc:return{point:"always",geoshape:"always"};case PD:return{text:"always"};case gx:return{point:"always",square:"always",text:"always"};case Cj:return{image:"always"};case yf:return{text:"always",arc:"always"};case Uh:return{text:"always",arc:"always"};case P0:case D0:return{arc:"always"}}}function AH(e){switch(e){case vs:case Ca:case yf:case Uh:case g1:case KS:case O0:case gx:case w1:case N0:case v1:case b1:case y1:case Vh:case Rm:case P0:case D0:return;case xj:case Og:case Ng:case uc:case x1:case PD:case Tw:case Ej:case Cj:case Sj:return"discrete";case lc:case Dm:case Pm:return"flexible";case Hh:case qh:case Wh:case sf:case OD:case _j:case TC:return}}const $en={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Fen={count:1,min:1,max:1};function o0(e){return xt(e,"argmin")}function _1(e){return xt(e,"argmax")}function Ooe(e){return Wt(e)&&Qt($en,e)}const Len=new Set(["count","valid","missing","distinct"]);function Aj(e){return Wt(e)&&Len.has(e)}function jen(e){return Wt(e)&&kr(["min","max"],e)}const Ben=new Set(["count","sum","distinct","valid","missing"]),zen=new Set(["mean","average","median","q1","q3","min","max"]);function EBe(e){return h1(e)&&(e=jj(e,void 0)),"bin"+wt(e).map(t=>kj(e[t])?gs(`_${t}_${Mv(e[t])}`):gs(`_${t}_${e[t]}`)).join("")}function Xi(e){return e===!0||vx(e)&&!e.binned}function $a(e){return e==="binned"||vx(e)&&e.binned===!0}function vx(e){return qt(e)}function kj(e){return xt(e,"param")}function kwe(e){switch(e){case Og:case Ng:case O0:case lc:case Dm:case Pm:case w1:case N0:case v1:case b1:case uc:return 6;case x1:return 4;default:return 10}}function MD(e){return xt(e,"expr")}function La(e,{level:t}={level:0}){const n=wt(e||{}),r={};for(const i of n)r[i]=t===0?Oc(e[i]):La(e[i],{level:t-1});return r}function CBe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=EC(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function _y(e){return Wt(e)||ut(e)&&Wt(e[0])}function mn(e){return xt(e,"signal")}function bx(e){return xt(e,"step")}function Ven(e){return ut(e)?!1:xt(e,"fields")&&!xt(e,"data")}function Uen(e){return ut(e)?!1:xt(e,"fields")&&xt(e,"data")}function xg(e){return ut(e)?!1:xt(e,"field")&&xt(e,"data")}const Hen={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},qen=wt(Hen),Wen={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},gX=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function SBe(e){const t=ut(e.condition)?e.condition.map(Iwe):Iwe(e.condition);return{...Oc(e),condition:t}}function Oc(e){if(MD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Iwe(e){if(MD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function is(e){if(MD(e)){const{expr:t,...n}=e;return{signal:t,...n}}return mn(e)?e:e!==void 0?{value:e}:void 0}function Gen(e){return mn(e)?e.signal:Ot(e)}function Rwe(e){return mn(e)?e.signal:Ot(e.value)}function Zf(e){return mn(e)?e.signal:e==null?null:Ot(e)}function Yen(e,t,n){for(const r of n){const i=um(r,t.markDef,t.config);i!==void 0&&(e[r]=is(i))}return e}function TBe(e){return[].concat(e.type,e.style??[])}function Di(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&xt(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:um(e,t,n,r)}function um(e,t,n,{vgChannel:r}={}){const i=yX(e,t,n.style);return ao(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function yX(e,t,n){return ABe(e,TBe(t),n)}function ABe(e,t,n){t=Ht(t);let r;for(const i of t){const s=n[i];xt(s,e)&&(r=s[e])}return r}function kBe(e,t){return Ht(e).reduce((n,r)=>(n.field.push(jt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function IBe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if($c(i,r))return;n.push(r)}),n}function RBe(e,t){return $c(e,t)||!t?e:e?[...Ht(e),...Ht(t)].join(", "):t}function DBe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((_y(n)||mn(n))&&(_y(r)||mn(r)))return{explicit:e.explicit,value:RBe(n,r)};if(_y(n)||mn(n))return{explicit:e.explicit,value:n};if(_y(r)||mn(r))return{explicit:e.explicit,value:r};if(!_y(n)&&!mn(n)&&!_y(r)&&!mn(r))return{explicit:e.explicit,value:IBe(n,r)};throw new Error("It should never reach here")}function Noe(e){return`Invalid specification ${Oi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Ken='Autosize "fit" only works for single views and layered views.';function Dwe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Pwe(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Owe(e){return e?`Dropping "fit-${e}" because spec has discrete ${cc(e)}.`:'Dropping "fit" because spec has discrete size.'}function Moe(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Nwe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Xen(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Qen(e){return`The "nearest" transform is not supported for ${e} marks.`}function PBe(e){return`Selection not supported for ${e} yet.`}function Jen(e){return`Cannot find a selection named "${e}".`}const Zen="Scale bindings are currently only supported for scales with unbinned, continuous domains.",etn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",ttn="Legend bindings are only supported for selections over an individual field or encoding channel.";function ntn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function rtn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const itn="The same selection must be used to override scale domains in a layered view.",stn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function otn(e){return`Unknown repeated value "${e}".`}function Mwe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const atn="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",$oe="Animation involving facet, layer, or concat is currently unsupported.";function ltn(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Ot(e)}.`}function utn(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${Ot(t)} encoding found for selection ${Ot(n.param)}. Using "field": ${Ot(r)}.`}const ctn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function dtn(e){return`Unrecognized parse "${e}".`}function $we(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const ftn="Attempt to add the same child twice.";function htn(e){return`Ignoring an invalid transform: ${Oi(e)}.`}const ptn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Fwe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function mtn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Oi(t)} is overridden by a child projection ${Oi(n)}.`}const gtn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ytn(e){return`${e}Offset dropped because ${e} is continuous`}function vtn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Oi(n)}}.`}function OBe(e){return`Invalid field type "${e}".`}function btn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function wtn(e){return`Invalid aggregation operator "${e}".`}function NBe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function xtn(e){return`Position range does not support relative band size for ${e}.`}function vX(e,t){return`Dropping ${Oi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const _tn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ij(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Etn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Ctn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Stn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Ttn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function kH(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Atn(e){return`The ${e} for range marks cannot be an expression`}function ktn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Itn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Rtn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Dtn(e){return`Cannot use the relative band size with ${e} scale.`}function Ptn(e){return`Using unaggregated domain with raw field has no effect (${Oi(e)}).`}function Otn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Ntn(e){return`Unaggregated domain is currently unsupported for log scale (${Oi(e)}).`}function Mtn(e){return`Cannot apply size to non-oriented mark "${e}".`}function $tn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Ftn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function MBe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function $Be(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function Ltn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Oi(n)} and ${Oi(r)}). Using ${Oi(n)}.`}function jtn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Oi(n)} and ${Oi(r)}). Using the union of the two domains.`}function Btn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ztn(e){return`Dropping sort property ${Oi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Lwe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Vtn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Utn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Htn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function qtn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Wtn(e){return`Stack is applied to a non-linear scale (${e}).`}function Gtn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function w$(e,t){return`Invalid ${e}: ${Oi(t)}.`}function Ytn(e){return`Dropping day from datetime ${Oi(e)} as day cannot be combined with other units.`}function Ktn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Xtn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Qtn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function jwe(e){return`1D error band does not support ${e}.`}function FBe(e){return`Channel ${e} is required for "binned" bin.`}function Jtn(e){return`Channel ${e} should not be used with "binned" bin.`}function Ztn(e){return`Domain for ${e} is required for threshold scale.`}const LBe=pre(hre);let Aw=LBe;function enn(e){return Aw=e,Aw}function tnn(){return Aw=LBe,Aw}function Foe(...e){Aw.error(...e)}function St(...e){Aw.warn(...e)}function nnn(...e){Aw.debug(...e)}function wx(e){if(e&&qt(e)){for(const t of joe)if(xt(e,t))return!0}return!1}const jBe=["january","february","march","april","may","june","july","august","september","october","november","december"],rnn=jBe.map(e=>e.substr(0,3)),BBe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],inn=BBe.map(e=>e.substr(0,3));function snn(e){if(wj(e)&&(e=+e),ci(e))return e>4&&St(w$("quarter",e)),e-1;throw new Error(w$("quarter",e))}function onn(e){if(wj(e)&&(e=+e),ci(e))return e-1;{const t=e.toLowerCase(),n=jBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=rnn.indexOf(r);if(i!==-1)return i;throw new Error(w$("month",e))}}function ann(e){if(wj(e)&&(e=+e),ci(e))return e%7;{const t=e.toLowerCase(),n=BBe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=inn.indexOf(r);if(i!==-1)return i;throw new Error(w$("day",e))}}function Loe(e,t){const n=[];if(t&&e.day!==void 0&&wt(e).length>1&&(St(Ytn(e)),e=er(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?onn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?snn(e.quarter):e.quarter;n.push(ci(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?ann(e.day):e.day;n.push(ci(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function kw(e){const n=Loe(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function lnn(e){const n=Loe(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function unn(e){const t=Loe(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const zBe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},joe=wt(zBe);function cnn(e){return Qt(zBe,e)}function xx(e){return qt(e)?e.binned:VBe(e)}function VBe(e){return e&&e.startsWith("binned")}function Boe(e){return e.startsWith("utc")}function dnn(e){return e.substring(3)}const fnn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Rj(e){return joe.filter(t=>HBe(e,t))}function UBe(e){const t=Rj(e);return t[t.length-1]}function HBe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function hnn(e,t,{end:n}={end:!1}){const r=Coe(t),i=Boe(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of joe)HBe(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),lnn(a)}function qBe(e){if(!e)return;const t=Rj(e);return`timeUnitSpecifier(${Oi(t)}, ${Oi(fnn)})`}function pnn(e,t,n){if(!e)return;const r=qBe(e);return`${n||Boe(e)?"utc":"time"}Format(${t}, ${r})`}function wa(e){if(!e)return;let t;return Wt(e)?VBe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:qt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Boe(t.unit)&&(t.utc=!0,t.unit=dnn(t.unit)),t}function mnn(e){const{utc:t,...n}=wa(e);return n.unit?(t?"utc":"")+wt(n).map(r=>gs(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+wt(n).map(r=>gs(`_${r}_${n[r]}`)).join("")}function WBe(e,t=n=>n){const n=wa(e),r=UBe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=GBe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(kw(a))} - ${t(kw(i))}`}}const gnn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function ynn(e){return Qt(gnn,e)}function GBe(e,t=1){if(ynn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function vnn(e){return xt(e,"param")}function zoe(e){return!!e?.field&&e.equal!==void 0}function Voe(e){return!!e?.field&&e.lt!==void 0}function Uoe(e){return!!e?.field&&e.lte!==void 0}function Hoe(e){return!!e?.field&&e.gt!==void 0}function qoe(e){return!!e?.field&&e.gte!==void 0}function Woe(e){if(e?.field){if(ut(e.range)&&e.range.length===2)return!0;if(mn(e.range))return!0}return!1}function Goe(e){return!!e?.field&&(ut(e.oneOf)||ut(e.in))}function bnn(e){return!!e?.field&&e.valid!==void 0}function YBe(e){return Goe(e)||zoe(e)||Woe(e)||Voe(e)||Hoe(e)||Uoe(e)||qoe(e)}function fp(e,t){return Bj(e,{timeUnit:t,wrapTime:!0})}function wnn(e,t){return e.map(n=>fp(n,t))}function KBe(e,t=!0){const{field:n}=e,r=wa(e.timeUnit),{unit:i,binned:s}=r||{},o=jt(e,{expr:"datum"}),a=i?`time(${s?o:hnn(i,n)})`:o;if(zoe(e))return`${a}===${fp(e.equal,i)}`;if(Voe(e)){const l=e.lt;return`${a}<${fp(l,i)}`}else if(Hoe(e)){const l=e.gt;return`${a}>${fp(l,i)}`}else if(Uoe(e)){const l=e.lte;return`${a}<=${fp(l,i)}`}else if(qoe(e)){const l=e.gte;return`${a}>=${fp(l,i)}`}else{if(Goe(e))return`indexof([${wnn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(bnn(e))return Dj(a,e.valid);if(Woe(e)){const{range:l}=La(e),u=mn(l)?{signal:`${l.signal}[0]`}:l[0],c=mn(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+fp(u,i)+", "+fp(c,i)+"])";const d=[];return u!==null&&d.push(`${a} >= ${fp(u,i)}`),c!==null&&d.push(`${a} <= ${fp(c,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Oi(e)}`)}function Dj(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function xnn(e){return YBe(e)&&e.timeUnit?{...e,timeUnit:wa(e.timeUnit)}:e}const $D={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function _nn(e){return e==="quantitative"||e==="temporal"}function XBe(e){return e==="ordinal"||e==="nominal"}const Iw=$D.quantitative,Yoe=$D.ordinal,AC=$D.temporal,Koe=$D.nominal,XS=$D.geojson;function Enn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Iw:return"quantitative";case"t":case AC:return"temporal";case"o":case Yoe:return"ordinal";case"n":case Koe:return"nominal";case XS:return"geojson"}}const ja={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},bX={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Cnn(e,t){const n=bX[e],r=bX[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Snn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Bwe(e){return Snn[e]}const QBe=new Set(["linear","log","pow","sqrt","symlog"]),JBe=new Set([...QBe,"time","utc"]);function ZBe(e){return QBe.has(e)}const e9e=new Set(["quantile","quantize","threshold"]),Tnn=new Set([...JBe,...e9e,"sequential","identity"]),Ann=new Set(["ordinal","bin-ordinal","point","band"]);function xa(e){return Ann.has(e)}function xh(e){return Tnn.has(e)}function Pp(e){return JBe.has(e)}function kC(e){return e9e.has(e)}const knn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Inn(e){return!Wt(e)&&xt(e,"name")}function t9e(e){return xt(e,"param")}function Rnn(e){return xt(e,"unionWith")}function Dnn(e){return qt(e)&&"field"in e}const Pnn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:fkn,domain:hkn,range:pkn,rangeMax:mkn,rangeMin:gkn,scheme:ykn,...Onn}=Pnn,Nnn=wt(Onn);function wX(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Pp(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Pp(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Pp(e);case"nice":return Pp(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return xh(e)&&!kr(["log","time","utc","threshold","quantile"],e)}}function n9e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return RE(e)?void 0:Rtn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Mnn(e,t){return kr([Yoe,Koe],t)?e===void 0||xa(e):t===AC?kr([ja.TIME,ja.UTC,void 0],e):t===Iw?ZBe(e)||kC(e)||e===void 0:!0}function $nn(e,t,n=!1){if(!Nm(e))return!1;switch(e){case vs:case Ca:case g1:case KS:case yf:case Uh:return Pp(t)||t==="band"?!0:t==="point"?!n:!1;case y1:return kr(["linear","band"],t);case O0:case w1:case N0:case v1:case b1:case gx:return Pp(t)||kC(t)||kr(["band","point","ordinal"],t);case lc:case Dm:case Pm:return t!=="band";case x1:case uc:return t==="ordinal"||kC(t)}}function Fnn(e){return qt(e)&&"value"in e}const Su={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},r9e=Su.arc,Pj=Su.area,Oj=Su.bar,Lnn=Su.image,Nj=Su.line,Mj=Su.point,jnn=Su.rect,x$=Su.rule,i9e=Su.text,Xoe=Su.tick,Bnn=Su.trail,Qoe=Su.circle,Joe=Su.square,s9e=Su.geoshape;function E1(e){return["line","area","trail"].includes(e)}function FI(e){return["rect","bar","image","arc","tick"].includes(e)}const znn=new Set(wt(Su));function cm(e){return xt(e,"type")}const Vnn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Unn=["fill","fillOpacity"],Hnn=[...Vnn,...Unn],qnn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},zwe=wt(qnn),IH=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Wnn={area:["line","point"],bar:IH,rect:IH,line:["point"],tick:["bandSize","thickness",...IH]},Gnn={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Ynn={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},o9e=wt(Ynn);function Rw(e){return xt(e,"band")}const Knn={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Xnn=5,Zoe={binSpacing:0,continuousBandSize:Xnn,minBandSize:.25,timeUnitBandPosition:.5},Qnn={...Zoe,binSpacing:1},Jnn={...Zoe,thickness:1};function Znn(e){return cm(e)?e.type:e}function a9e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function eae({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){if(!r||!xh(r)||i)return"always-valid";const s=a9e(Di("invalid",e,t),{isPath:E1(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":s}function ern(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function l9e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function u9e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){const o=n?.get("type"),a=Eh(t),l=Aj(a?.aggregate),u=eae({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const c=s.scale.invalid?.[e]??"zero-or-min";return{test:Dj(jt(a,{expr:"datum"}),!1),...trn(c,n,r)}}}function trn(e,t,n){if(Fnn(e)){const{value:r}=e;return mn(r)?{signal:r.signal}:{value:r}}return l9e({scale:t,scaleName:n,mode:"zeroOrMin"})}function tae(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=yx(t),l=nae(e),u=u9e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function nrn(e){const{datum:t}=e;return wx(t)?kw(t):`${Oi(t)}`}function Xb(e,t,n,r){const i={};if(t&&(i.scale=t),Mm(e)){const{datum:s}=e;wx(s)?i.signal=kw(s):mn(s)?i.signal=s.signal:MD(s)?i.signal=s.expr:i.value=s}else i.field=jt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function _$({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!mn(o)&&0<o&&o<1?"datum":void 0,l=jt(t,{expr:a,suffix:i}),u=n!==void 0?jt(n,{expr:a}):jt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const d=o===0?l:u;c.field=d}else{const d=mn(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;c.signal=`scale("${e}", ${d})`}return r&&(c.offset=r),c}function rrn({scaleName:e,fieldDef:t}){const n=jt(t,{expr:"datum"}),r=jt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function nae({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(rr(t)){const d=o?.get("type");if(vu(t)){c??(c=Fv({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=t;if(Xi(f)||c&&h&&p===AC)return a?.impute?Xb(t,s,{binSuffix:"mid"},{offset:l}):c&&!xa(d)?_$({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:l}):Xb(t,s,zD(t,e)?{binSuffix:"range"}:{},{offset:l});if($a(f)){if(kt(n))return _$({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});St(FBe(e===vs?Vh:Rm))}}return Xb(t,s,xa(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(_h(t)){const d=t.value,f=l?{offset:l}:{};return{...dk(e,d),...f}}}return pr(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function dk(e,t){return kr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:kr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:is(t)}function Dw(e){return e&&e!=="number"&&e!=="time"}function c9e(e,t,n){return`${e}(${t}${n?`, ${Oi(n)}`:""})`}const irn="  ";function rae({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){if(Dw(n))return eh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=d9e(e,r,i),a=IC(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return eh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return eh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&kt(e)&&e.timeUnit===void 0)return eh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(DC(e)){const l=orn({field:o,timeUnit:kt(e)?wa(e.timeUnit)?.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:_x(e)&&e.scale?.type===ja.UTC});return l?{signal:l}:void 0}if(t=xX({type:a,specifiedFormat:t,config:s,normalizeStack:i}),kt(e)&&Xi(e.bin)){const l=jt(e,{expr:r,binSuffix:"end"});return{signal:FD(o,l,t,n,s)}}else return t||IC(e)==="quantitative"?{signal:`${p9e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function d9e(e,t,n){return kt(e)?n?`${jt(e,{expr:t,suffix:"end"})}-${jt(e,{expr:t,suffix:"start"})}`:jt(e,{expr:t}):nrn(e)}function eh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=d9e(e,r,i)),o!=="datum.value"&&kt(e)&&Xi(e.bin)){const a=jt(e,{expr:r,binSuffix:"end"});return{signal:FD(o,a,t,n,s)}}return{signal:c9e(n,o,t)}}function f9e(e,t,n,r,i,s){if(!(Wt(r)&&Dw(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&IC(e)==="quantitative"&&(i.normalizedNumberFormatType&&RC(e)&&e.stack==="normalize"||i.numberFormatType))){if(RC(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return xX({type:"quantitative",config:i,normalizeStack:!0});if(DC(e)){const o=kt(e)?wa(e.timeUnit)?.unit:void 0;return o===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:srn({specifiedFormat:n,timeUnit:o,config:i,omitTimeFormatConfig:s})}return xX({type:t,specifiedFormat:n,config:i})}}function h9e(e,t,n){if(e&&(mn(e)||e==="number"||e==="time"))return e;if(DC(t)&&n!=="time"&&n!=="utc")return kt(t)&&wa(t?.timeUnit)?.utc?"utc":"time"}function xX({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Wt(t))return t;if(e===Iw)return r?n.normalizedNumberFormat:n.numberFormat}function srn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:qBe(t)}:r?void 0:n.timeFormat)}function p9e(e,t){return`format(${e}, "${t||""}")`}function Vwe(e,t,n,r){return Dw(n)?c9e(n,e,t):p9e(e,(Wt(t)?t:void 0)??r.numberFormat)}function FD(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return FD(e,t,i.numberFormat,i.numberFormatType,i);const s=Vwe(e,n,r,i),o=Vwe(t,n,r,i);return`${Dj(e,!1)} ? "null" : ${s} + "${irn}" + ${o}`}function orn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Wt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):pnn(t,e,s)}const $j="min",arn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Uwe(e){return Qt(arn,e)}function lrn(e){return xt(e,"encoding")}function Mg(e){return e&&(e.op==="count"||xt(e,"field"))}function m9e(e){return e&&ut(e)}function LD(e){return xt(e,"row")||xt(e,"column")}function iae(e){return xt(e,"header")}function Fj(e){return xt(e,"facet")}function urn(e){return xt(e,"param")}function crn(e){return!Wt(e)&&xt(e,"repeat")}function Hwe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function sae(e){return xt(e,"sort")}function Fv({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(rr(e)&&e.bandPosition!==void 0)return e.bandPosition;if(kt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return um("timeUnitBandPosition",n,r);if(Xi(s))return .5}}function g9e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){const a=cc(e),l=Di(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(kt(t)){const{timeUnit:u,bin:c}=t;if(u&&!n)return{band:um("timeUnitBandSize",r,i)};if(Xi(c)&&!xa(s))return{band:1}}if(FI(r.type))return s?xa(s)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function y9e(e,t,n,r){return Xi(e.bin)||e.timeUnit&&vu(e)&&e.type==="temporal"?Fv({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function v9e(e){return xt(e,"sort")&&!xt(e,"field")}function jD(e){return xt(e,"condition")}function Lj(e){const t=e?.condition;return!!t&&!ut(t)&&kt(t)}function BD(e){const t=e?.condition;return!!t&&!ut(t)&&rr(t)}function drn(e){const t=e?.condition;return!!t&&(ut(t)||_h(t))}function kt(e){return xt(e,"field")||e?.aggregate==="count"}function IC(e){return e?.type}function Mm(e){return xt(e,"datum")}function Hy(e){return vu(e)&&!C$(e)||E$(e)}function qwe(e){return vu(e)&&e.type==="quantitative"&&!e.bin||E$(e)}function E$(e){return Mm(e)&&ci(e.datum)}function rr(e){return kt(e)||Mm(e)}function vu(e){return e&&(xt(e,"field")||e.aggregate==="count")&&xt(e,"type")}function _h(e){return xt(e,"value")}function _x(e){return xt(e,"scale")||xt(e,"sort")}function RC(e){return xt(e,"axis")||xt(e,"stack")||xt(e,"impute")}function b9e(e){return xt(e,"legend")}function w9e(e){return xt(e,"format")||xt(e,"formatType")}function frn(e){return ec(e,["legend","axis","header","scale"])}function hrn(e){return xt(e,"op")}function jt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(mrn(e))n=uBe("count");else{let o;if(!t.nofn)if(hrn(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;Xi(a)?(o=EBe(a),i=(t.binSuffix??"")+(t.suffix??"")):l?_1(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):o0(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!xx(u)&&(o=mnn(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?YS(n):t.expr?oBe(n,t.expr)+s:rf(n)+s}function C$(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return kt(e)&&!!e.bin;case"temporal":return!1}throw new Error(OBe(e.type))}function prn(e){return _x(e)&&kC(e.scale?.type)}function mrn(e){return e.aggregate==="count"}function grn(e,t){const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Xi(r))return`${n} (binned)`;if(i&&!xx(i)){const o=wa(i)?.unit;if(o)return`${n} (${Rj(o).join("-")})`}else if(s)return _1(s)?`${n} for max ${s.argmax}`:o0(s)?`${n} for min ${s.argmin}`:`${DD(s)} of ${n}`;return n}function yrn(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(_1(t))return`${i} for argmax(${t.argmax})`;if(o0(t))return`${i} for argmin(${t.argmin})`;const s=r&&!xx(r)?wa(r):void 0,o=t||s?.unit||s?.maxbins&&"timeunit"||Xi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const x9e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return yrn(e);default:return grn(e,t)}};let _9e=x9e;function E9e(e){_9e=e}function vrn(){E9e(x9e)}function DE(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=oae(e)?.title;if(!kt(e))return i??e.title;const s=e,o=r?aae(s,t):void 0;return n?ao(i,s.title,o):i??s.title??o}function oae(e){if(RC(e)&&e.axis)return e.axis;if(b9e(e)&&e.legend)return e.legend;if(iae(e)&&e.header)return e.header}function aae(e,t){return _9e(e,t)}function S$(e){if(w9e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=oae(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function brn(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(sae(e)&&ut(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!_1(n)&&!o0(n))return"quantitative";if(_x(e)&&e.scale?.type)switch(bX[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Eh(e){if(kt(e))return e;if(Lj(e))return e.condition}function qo(e){if(rr(e))return e;if(BD(e))return e.condition}function C9e(e,t,n,r={}){if(Wt(e)||ci(e)||h1(e)){const i=Wt(e)?"string":ci(e)?"number":"boolean";return St(vtn(t,i,e)),{value:e}}return rr(e)?T$(e,t,n,r):BD(e)?{...e,condition:T$(e.condition,t,n,r)}:e}function T$(e,t,n,r){if(w9e(e)){const{format:i,formatType:s,...o}=e;if(Dw(s)&&!n.customFormatTypes)return St(Fwe(t)),T$(o,t,n,r)}else{const i=RC(e)?"axis":b9e(e)?"legend":iae(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Dw(o)&&!n.customFormatTypes)return St(Fwe(t)),T$({...e,[i]:a},t,n,r)}}return kt(e)?lae(e,t,r):wrn(e)}function wrn(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ci(n)?"quantitative":Wt(n)?"nominal":wx(n)?"temporal":void 0,{...e,type:t}}function lae(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Ooe(r)&&!_1(r)&&!o0(r)&&(St(wtn(r)),delete a.aggregate),i&&(a.timeUnit=wa(i)),o&&(a.field=`${o}`),Xi(s)&&(a.bin=jj(s,t)),$a(s)&&!lo(t)&&St(Jtn(t)),vu(a)){const{type:l}=a,u=Enn(l);l!==u&&(a.type=u),l!=="quantitative"&&Aj(r)&&(St(btn(l,r)),a.type="quantitative")}else if(!yBe(t)){const l=brn(a,t);a.type=l}if(vu(a)){const{compatible:l,warning:u}=xrn(a,t)||{};l===!1&&St(u)}if(sae(a)&&Wt(a.sort)){const{sort:l}=a;if(Uwe(l))return{...a,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&Uwe(u))return{...a,sort:{encoding:u,order:"descending"}}}if(iae(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function jj(e,t){return h1(e)?{maxbins:kwe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:kwe(t)}:e}const C_={compatible:!0};function xrn(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Og:case Ng:case xj:return C$(e)?C_:{compatible:!1,warning:Ctn(t)};case vs:case Ca:case g1:case KS:case lc:case Dm:case Pm:case PD:case OD:case _j:case Tw:case Ej:case Cj:case gx:case yf:case Uh:case Sj:return C_;case qh:case sf:case Hh:case Wh:return n!==Iw?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:C_;case N0:case v1:case b1:case w1:case O0:case P0:case D0:case Vh:case Rm:case y1:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:C_;case uc:case x1:return!C$(e)&&!prn(e)?{compatible:!1,warning:Stn(t)}:C_;case TC:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:C_}}function DC(e){const{formatType:t}=S$(e);return t==="time"||!t&&_rn(e)}function _rn(e){return e&&(e.type==="temporal"||kt(e)&&!!e.timeUnit)}function Bj(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const s=t&&wa(t)?.unit;let o=s||n==="temporal",a;return MD(e)?a=e.expr:mn(e)?a=e.signal:wx(e)?(o=!0,a=kw(e)):(Wt(e)||ci(e))&&o&&(a=`datetime(${Oi(e)})`,cnn(s)&&(ci(e)&&e<1e4||Wt(e)&&isNaN(Date.parse(e)))&&(a=kw({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Oi(e)}function S9e(e,t){const{type:n}=e;return t.map(r=>{const i=kt(e)&&!xx(e.timeUnit)?e.timeUnit:void 0,s=Bj(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function zD(e,t){return Xi(e.bin)?Nm(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Wwe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function VD(e){return e?.condition}const T9e=["domain","grid","labels","ticks","title"],Ern={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},A9e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Crn={...A9e,style:1,labelExpr:1,encoding:1};function Gwe(e){return Qt(Crn,e)}const Srn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},k9e=wt(Srn);function $0(e){return xt(e,"mark")}class zj{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return $0(t)?Znn(t.mark)===this.name:!1}}function Qb(e,t){const n=e&&e[t];return n?ut(n)?CC(n,r=>!!r.field):kt(n)||Lj(n):!1}function I9e(e,t){const n=e&&e[t];return n?ut(n)?CC(n,r=>!!r.field):kt(n)||Mm(n)||BD(n):!1}function R9e(e,t){if(lo(t)){const n=e[t];if((kt(n)||Mm(n))&&(XBe(n.type)||kt(n)&&n.timeUnit)){const r=koe(t);return I9e(e,r)}}return!1}function D9e(e){return CC(wen,t=>{if(Qb(e,t)){const n=e[t];if(ut(n))return CC(n,r=>!!r.aggregate);{const r=Eh(n);return r&&!!r.aggregate}}return!1})}function P9e(e,t){const n=[],r=[],i=[],s=[],o={};return uae(e,(a,l)=>{if(kt(a)){const{field:u,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const m=oae(a)?.title;let g=jt(a,{forAs:!0});const y={...m?[]:{title:DE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(_1(c)?(v="argmax",g=jt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${u}`):o0(c)?(v="argmin",g=jt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};u&&(b.field=u),s.push(b)}}else if(n.push(g),vu(a)&&Xi(d)){if(r.push({bin:d,field:u,as:g}),n.push(jt(a,{binSuffix:"end"})),zD(a,l)&&n.push(jt(a,{binSuffix:"range"})),lo(l)){const v={field:`${g}_end`};o[`${l}2`]=v}y.bin="binned",yBe(l)||(y.type=Iw)}else if(f&&!xx(f)){i.push({timeUnit:f,field:u,as:g});const v=vu(a)&&a.type!==AC&&"time";v&&(l===PD||l===Tw?y.formatType=v:Den(l)?y.legend={formatType:v,...y.legend}:lo(l)&&(y.axis={formatType:v,...y.axis}))}o[l]=y}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Trn(e,t,n){const r=Oen(t,n);if(r){if(r==="binned"){const i=e[t===Vh?vs:Ca];return!!(kt(i)&&kt(e[t])&&$a(i.bin))}}else return!1;return!0}function Arn(e,t,n,r){const i={};for(const s of wt(e))gBe(s)||St(Etn(s));for(let s of Ten){if(!e[s])continue;const o=e[s];if(ND(s)){const a=Sen(s),l=i[a];if(kt(l)&&_nn(l.type)&&kt(o)&&!l.timeUnit){St(ytn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(St(gtn),s=yf),!Trn(e,s,t)){St(Ij(s,t));continue}if(s===O0&&t==="line"&&Eh(e[s])?.aggregate){St(_tn);continue}if(s===lc&&(n?"fill"in e:"stroke"in e)){St(NBe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===OD||s===TC&&!ut(o)&&!_h(o)||s===Tw&&ut(o)){if(o){if(s===TC){const a=e[s];if(v9e(a)){i[s]=a;continue}}i[s]=Ht(o).reduce((a,l)=>(kt(l)?a.push(lae(l,s)):St(vX(l,s)),a),[])}}else{if(s===Tw&&o===null)i[s]=null;else if(!kt(o)&&!Mm(o)&&!_h(o)&&!jD(o)&&!mn(o)){St(vX(o,s));continue}i[s]=C9e(o,s,r)}}return i}function Vj(e,t){const n={};for(const r of wt(e)){const i=C9e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function krn(e){const t=[];for(const n of wt(e))if(Qb(e,n)){const r=e[n],i=Ht(r);for(const s of i)kt(s)?t.push(s):Lj(s)&&t.push(s.condition)}return t}function uae(e,t,n){if(e)for(const r of wt(e)){const i=e[r];if(ut(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Irn(e,t,n,r){return e?wt(e).reduce((i,s)=>{const o=e[s];return ut(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function O9e(e,t){return wt(t).reduce((n,r)=>{switch(r){case vs:case Ca:case Ej:case Sj:case Cj:case Vh:case Rm:case g1:case KS:case yf:case P0:case Uh:case D0:case y1:case Hh:case qh:case Wh:case sf:case PD:case uc:case gx:case Tw:return n;case TC:if(e==="line"||e==="trail")return n;case OD:case _j:{const i=t[r];if(ut(i)||kt(i))for(const s of Ht(i))s.aggregate||n.push(jt(s,{}));return n}case O0:if(e==="trail")return n;case lc:case Dm:case Pm:case N0:case v1:case b1:case x1:case w1:{const i=Eh(t[r]);return i&&!i.aggregate&&n.push(jt(i,{})),n}}},[])}function Rrn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ut(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ut(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function _X(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${cae(t)}`:"";return{field:o+t.field,type:t.type,title:mn(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=krn(n).map(frn);return{tooltip:[...i,...Dp(s,$r)]}}function cae(e){const{title:t,field:n}=e;return ao(t,n)}function dae(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=cae(n);return N9e(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Wt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function N9e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...cm(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...h1(e[t])?{}:e[t]}}]:[]}function M9e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:EO(s,n),continuousAxisChannelDef2:EO(o,n),continuousAxisChannelDefError:EO(a,n),continuousAxisChannelDefError2:EO(l,n),continuousAxis:i}}function EO(e,t){if(e?.aggregate){const{aggregate:n,...r}=e;return n!==t&&St(Qtn(n,t)),r}else return e}function $9e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(cm(n)&&n.orient)return n.orient;if(Hy(i)){if(Hy(s)){const o=kt(i)&&i.aggregate,a=kt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return DC(s)&&!DC(i)?"horizontal":"vertical"}return"horizontal"}else{if(Hy(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const A$="boxplot",Drn=["box","median","outliers","rule","ticks"],Prn=new zj(A$,L9e);function F9e(e){return ci(e)?"tukey":e}function L9e(e,{config:t}){e={...e,encoding:Vj(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=cm(n)?n:{type:n};i&&St(PBe("boxplot"));const l=a.extent??t.boxplot.extent,u=Di("size",a,t),c=a.invalid,d=F9e(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:E,customTooltipWithoutAggregatedField:S}=Orn(e,l,t),T=YS(m.field),{color:A,size:R,...I}=b,P=ee=>dae(a,g,m,ee,t.boxplot),N=P(I),M=P(b),O=(qt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",j=P({...I,...R?{size:R}:{},color:{condition:{test:`${Ti(`lower_box_${m.field}`)} >= ${Ti(`upper_box_${m.field}`)}`,...A||{value:O}}}}),B=_X([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),H={type:"tick",color:"black",opacity:1,orient:_,invalid:c,aria:!1},q=d==="min-max"?B:_X([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),G=[...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:q}),...N({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:q}),...N({partName:"ticks",mark:H,positionPrefix:"lower_whisker",extraEncoding:q}),...N({partName:"ticks",mark:H,positionPrefix:"upper_whisker",extraEncoding:q})],U=[...d!=="tukey"?G:[],...M({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:B}),...j({partName:"median",mark:{type:"tick",invalid:c,...qt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:B})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:U};const L=Ti(`lower_box_${m.field}`),z=Ti(`upper_box_${m.field}`),V=`(${z} - ${L})`,Y=`${L} - ${l} * ${V}`,Q=`${z} + ${l} * ${V}`,ne=Ti(m.field),ue={joinaggregate:j9e(m.field),groupby:y},se={transform:[{filter:`(${Y} <= ${ne}) && (${ne} <= ${Q})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:G},{tooltip:ae,...he}=I,{scale:ie,axis:le}=m,Ce=cae(m),X=ec(le,["title"]),fe=N9e(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${Y}) || (${ne} > ${Q})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ce!==void 0?{title:Ce}:{},...ie!==void 0?{scale:ie}:{},...Pi(X)?{}:{axis:X}},...he,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let de;const te=[...f,...h,ue];return fe?de={transform:te,layer:[fe,se]}:(de=se,de.transform.unshift(...te)),{...o,layer:[de,{transform:p,layer:U}]}}function j9e(e){const t=YS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Orn(e,t,n){const r=$9e(e,A$),{continuousAxisChannelDef:i,continuousAxis:s}=M9e(e,r,A$),o=i.field,a=YS(o),l=F9e(t),u=[...j9e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`${Ti(`upper_box_${a}`)} - ${Ti(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${Ti(`upper_box_${a}`)} + ${Ti(`iqr_${a}`)} * ${t}, ${Ti(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${Ti(`lower_box_${a}`)} - ${Ti(`iqr_${a}`)} * ${t}, ${Ti(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=Rrn(f),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=P9e(p,n),_=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...u],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:_,boxOrient:E,customTooltipWithoutAggregatedField:h}}const fae="errorbar",Nrn=["ticks","rule"],Mrn=new zj(fae,B9e);function B9e(e,{config:t}){e={...e,encoding:Vj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=z9e(e,fae,t);delete s.size;const c=dae(a,i,r,s,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...f!==void 0?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function $rn(e,t){const{encoding:n}=e;if(Frn(n))return{orient:$9e(e,t),inputType:"raw"};const r=Lrn(n),i=jrn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(rr(a)&&rr(l))throw new Error(`${t} cannot have both x2 and y2`);if(rr(a)){if(Hy(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(rr(l)){if(Hy(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(rr(l)&&!rr(a))throw new Error(`${t} cannot have xError2 without xError`);if(rr(c)&&!rr(u))throw new Error(`${t} cannot have yError2 without yError`);if(rr(a)&&rr(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(rr(a)){if(Hy(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(rr(u)){if(Hy(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Frn(e){return(rr(e.x)||rr(e.y))&&!rr(e.x2)&&!rr(e.y2)&&!rr(e.xError)&&!rr(e.xError2)&&!rr(e.yError)&&!rr(e.yError2)}function Lrn(e){return rr(e.x2)||rr(e.y2)}function jrn(e){return rr(e.xError)||rr(e.xError2)||rr(e.yError)||rr(e.yError2)}function z9e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=cm(r)?r:{type:r};s&&St(PBe(t));const{orient:u,inputType:c}=$rn(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=M9e(e,u,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=Brn(l,d,f,h,p,c,t,n),{[m]:_,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...A}=i,{bins:R,timeUnits:I,aggregate:P,groupby:N,encoding:M}=P9e(A,n),O=[...P,...g],j=c!=="raw"?[]:N,B=_X(v,d,M,b);return{transform:[...a.transform??[],...R,...I,...O.length===0?[]:[{aggregate:O,groupby:j}],...y],groupby:j,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:B}}function Brn(e,t,n,r,i,s,o,a){let l=[],u=[];const c=t.field;let d,f=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&St(Xtn(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`${Ti(`center_${c}`)} + ${Ti(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Ti(`center_${c}`)} - ${Ti(`extent_${c}`)}`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:DD(h)},{fieldPrefix:"upper_",titlePrefix:Ywe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Ywe(h,p,"-")}],f=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),l=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:DE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:DE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:DE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&St(Ktn(e.center,e.extent)),s==="aggregated-upper-lower"?(d=[],u=[{calculate:Ti(n.field),as:`upper_${c}`},{calculate:Ti(c),as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`${Ti(c)} + ${Ti(r.field)}`,as:`upper_${c}`}],i?u.push({calculate:`${Ti(c)} + ${Ti(i.field)}`,as:`lower_${c}`}):u.push({calculate:`${Ti(c)} - ${Ti(r.field)}`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Sw(Sw(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}function Ywe(e,t,n){return`${DD(e)} ${n} ${t}`}const hae="errorband",zrn=["band","borders"],Vrn=new zj(hae,V9e);function V9e(e,{config:t}){e={...e,encoding:Vj(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=z9e(e,hae,t),u=o,c=dae(u,i,r,s,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?St(jwe("interpolate")):u.tension&&St(jwe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const U9e={};function pae(e,t,n){const r=new zj(e,t);U9e[e]={normalizer:r,parts:n}}function Urn(){return wt(U9e)}pae(A$,L9e,Drn);pae(fae,B9e,Nrn);pae(hae,V9e,zrn);const Hrn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],H9e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},q9e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},qrn=wt(H9e),Wrn=wt(q9e),Grn={header:1,headerRow:1,headerColumn:1,headerFacet:1},W9e=wt(Grn),G9e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Yrn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Krn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ch="_vgsid_",Xrn={point:{on:"click",fields:[Ch],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function mae(e){return e==="legend"||!!e?.legend}function RH(e){return mae(e)&&qt(e)}function gae(e){return!!e?.select}function Y9e(e){const t=[];for(const n of e||[]){if(gae(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function Qrn(e){return Uj(e)||vae(e)||yae(e)}function yae(e){return xt(e,"concat")}function Uj(e){return xt(e,"vconcat")}function vae(e){return xt(e,"hconcat")}function K9e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function dm(e){return xt(e,"step")}function Kwe(e){return xt(e,"view")||xt(e,"width")||xt(e,"height")}const Xwe=20,Jrn={align:1,bounds:1,center:1,columns:1,spacing:1},Zrn=wt(Jrn);function ein(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(Fj(e)&&!LD(e.facet)||yae(e))&&(i.columns=o),Uj(e)&&(i.columns=1);for(const a of Zrn)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=ci(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function EX(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function CX(e,t){const n=k$(e,t);return dm(n)?n.step:X9e}function k$(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ao(n,{step:e.step})}const X9e=20,tin={continuousWidth:200,continuousHeight:200,step:X9e},nin={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:tin,mark:Gnn,arc:{},area:{},bar:Qnn,circle:{},geoshape:{},image:{},line:{},point:{},rect:Zoe,rule:{color:"black"},square:{},text:{color:"black"},tick:Jnn,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:knn,projection:{},legend:Yrn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Xrn,style:{},title:{},facet:{spacing:Xwe},concat:{spacing:Xwe},normalizedNumberFormat:".0%"},eg=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Qwe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Jwe={blue:eg[0],orange:eg[1],red:eg[2],teal:eg[3],green:eg[4],yellow:eg[5],purple:eg[6],pink:eg[7],brown:eg[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function rin(e={}){return{signals:[{name:"color",value:qt(e)?{...Jwe,...e}:Jwe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function iin(e){return{signals:[{name:"fontSize",value:qt(e)?{...Qwe,...e}:Qwe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function sin(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function Q9e(e){const t=wt(e||{}),n={};for(const r of t){const i=e[r];n[r]=VD(i)?SBe(i):Oc(i)}return n}function oin(e){const t=wt(e),n={};for(const r of t)n[r]=Q9e(e[r]);return n}const ain=[...o9e,...k9e,...W9e,"background","padding","legend","lineBreak","scale","style","title","view"];function J9e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=FS({},er(nin),n?sin(n):{},t?rin(t):{},r?iin(r):{},s||{});i&&LS(o,"selection",i,!0);const a=ec(o,ain);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=Oc(o[l]));for(const l of o9e)o[l]&&(a[l]=La(o[l]));for(const l of k9e)o[l]&&(a[l]=Q9e(o[l]));for(const l of W9e)o[l]&&(a[l]=La(o[l]));if(o.legend&&(a.legend=La(o.legend)),o.scale){const{invalid:l,...u}=o.scale,c=La(l,{level:1});a.scale={...La(u),...wt(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=oin(o.style)),o.title&&(a.title=La(o.title)),o.view&&(a.view=La(o.view)),a}const lin=new Set(["view",...znn]),uin=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],cin={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Wnn};function din(e){e=er(e);for(const t of uin)delete e[t];if(e.axis)for(const t in e.axis)VD(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Hrn)delete e.legend[t];if(e.mark){for(const t of zwe)delete e.mark[t];e.mark.tooltip&&qt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Y9e(e.params)),delete e.params);for(const t of lin){for(const r of zwe)delete e[t][r];const n=cin[t];if(n)for(const r of n)delete e[t][r];hin(e,t)}for(const t of Urn())delete e[t];fin(e);for(const t in e)qt(e[t])&&Pi(e[t])&&delete e[t];return Pi(e)?void 0:e}function fin(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=CBe(e.title);Pi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Pi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Pi(r)?delete e.title:e.title=r}function hin(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Pi(s)||(e.style[n??t]=s),delete e[t]}function Hj(e){return xt(e,"layer")}function pin(e){return xt(e,"repeat")}function min(e){return!ut(e.repeat)&&xt(e.repeat,"layer")}class bae{map(t,n){return Fj(t)?this.mapFacet(t,n):pin(t)?this.mapRepeat(t,n):vae(t)?this.mapHConcat(t,n):Uj(t)?this.mapVConcat(t,n):yae(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Hj(t))return this.mapLayer(t,n);if($0(t))return this.mapUnit(t,n);throw new Error(Noe(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const gin={zero:1,center:1,normalize:1};function yin(e){return Qt(gin,e)}const vin=new Set([r9e,Oj,Pj,x$,Mj,Qoe,Joe,Nj,i9e,Xoe]),bin=new Set([Oj,Pj,r9e]);function S_(e){return kt(e)&&IC(e)==="quantitative"&&!e.bin}function Zwe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(kt(o)&&kt(a))if(S_(o)&&S_(a)){if(o.stack)return t;if(a.stack)return i;const l=kt(o)&&!!o.aggregate,u=kt(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(S_(o))return t;if(S_(a))return i}else{if(S_(o))return s&&n==="vertical"?void 0:t;if(S_(a))return s&&n==="horizontal"?void 0:i}}function win(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function Z9e(e,t){const n=cm(e)?e:{type:e},r=n.type;if(!vin.has(r))return null;const i=Zwe(t,"x",n)||Zwe(t,"theta",n);if(!i)return null;const s=t[i],o=kt(s)?jt(s,{}):void 0,a=win(i),l=[],u=new Set;if(t[a]){const m=t[a],g=kt(m)?jt(m,{}):void 0;g&&g!==o&&(l.push(a),u.add(g))}const c=a==="x"?"xOffset":"yOffset",d=t[c],f=kt(d)?jt(d,{}):void 0;f&&f!==o&&(l.push(c),u.add(f));const h=Aen.reduce((m,g)=>{if(g!=="tooltip"&&Qb(t,g)){const y=t[g];for(const v of Ht(y)){const b=Eh(v);if(b.aggregate)continue;const _=jt(b,{});(!_||!u.has(_))&&m.push({channel:g,fieldDef:b})}}return m},[]);let p;return s.stack!==void 0?h1(s.stack)?p=s.stack?"zero":null:p=s.stack:bin.has(r)&&(p="zero"),!p||!yin(p)||D9e(t)&&h.length===0?null:(s?.scale?.type&&s?.scale?.type!==ja.LINEAR&&s?.stack&&St(Wtn(s.scale.type)),rr(t[Om(i)])?(s.stack!==void 0&&St(qtn(i)),null):(kt(s)&&s.aggregate&&!Ben.has(s.aggregate)&&St(Gtn(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:E1(r),stackBy:h,offset:p}))}function e7e(e,t,n){const r=La(e),i=Di("orient",r,n);if(r.orient=Cin(r.type,t,i),i!==void 0&&i!==r.orient&&St(Itn(r.orient,i)),r.type==="bar"&&r.orient){const l=Di("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Knn[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Di("opacity",r,n),o=Di("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=_in(r.type,t)),Di("cursor",r,n)===void 0&&(r.cursor=xin(r,t,n)),r}function xin(e,t,n){return t.href||e.href||Di("href",e,n)?"pointer":e.cursor}function _in(e,t){if(kr([Mj,Xoe,Qoe,Joe],e)&&!D9e(t))return .7}function Ein(e,t,{graticule:n}){if(n)return!1;const r=um("filled",e,t),i=e.type;return ao(r,i!==Mj&&i!==Nj&&i!==x$)}function Cin(e,t,n){switch(e){case Mj:case Qoe:case Joe:case i9e:case jnn:case Lnn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case Oj:if(kt(r)&&($a(r.bin)||kt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(kt(i)&&($a(i.bin)||kt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(kt(r)&&r.type===Iw&&!Xi(r.bin)||E$(r))&&kt(i)&&$a(i.bin)?"horizontal":"vertical";if(!o)return(kt(i)&&i.type===Iw&&!Xi(i.bin)||E$(i))&&kt(r)&&$a(r.bin)?"vertical":"horizontal"}case x$:if(s&&!(kt(r)&&$a(r.bin))&&o&&!(kt(i)&&$a(i.bin)))return;case Pj:if(o)return kt(i)&&$a(i.bin)?"horizontal":"vertical";if(s)return kt(r)&&$a(r.bin)?"vertical":"horizontal";if(e===x$){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Nj:case Xoe:{const a=qwe(r),l=qwe(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=vu(r)&&r.type===AC,c=vu(i)&&i.type===AC;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function Sin(e){const{point:t,line:n,...r}=e;return wt(r).length>1?r:r.type}function Tin(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ec(e[t],["point","line"])});return e}function DH(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?qt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?qt(t.point)?t.point:{}:void 0}function exe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Ain{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if($0(t)){const{mark:r,encoding:i}=t,s=cm(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!DH(s,n[s.type],i);case"area":return!!DH(s,n[s.type],i)||!!exe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=t,d=Vj(u,i),f=cm(a)?a:{type:a},h=DH(f,i[f.type],d),p=f.type==="area"&&exe(f,i[f.type]),m=[{name:l,...s?{params:s}:{},mark:Sin({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:ec(d,["shape"])}],g=Z9e(e7e(f,d,i),d);let y=d;if(g){const{fieldChannel:v,offset:b}=g;y={...d,[v]:{...d[v],...b?{stack:b}:{}}}}return y=ec(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...EC(f,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...EC(f,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Tin(i)})}}function kin(e,t){return t?LD(e)?n7e(e,t):t7e(e,t):e}function PH(e,t){return t?n7e(e,t):e}function SX(e,t,n){const r=t[e];if(crn(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};St(otn(r.repeat));return}return t}function t7e(e,t){if(e=SX("field",e,t),e!==void 0){if(e===null)return null;if(sae(e)&&Mg(e.sort)){const n=SX("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function txe(e,t){if(kt(e))return t7e(e,t);{const n=SX("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function nxe(e,t){if(rr(e)){const n=txe(e,t);if(n)return n;if(jD(e))return{condition:e.condition}}else{if(BD(e)){const n=txe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function n7e(e,t){const n={};for(const r in e)if(xt(e,r)){const i=e[r];if(ut(i))n[r]=i.map(s=>nxe(s,t)).filter(s=>s);else{const s=nxe(i,t);s!==void 0&&(n[r]=s)}}return n}class Iin{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if($0(t)){const{encoding:n,mark:r}=t;if(r==="line"||cm(r)&&r.type==="line")for(const i of Cen){const s=yx(i),o=n[s];if(n[i]&&(kt(o)&&!$a(o.bin)||Mm(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return St(ktn(!!i.x2,!!i.y2)),r({...t,mark:qt(s)?{...s,type:"rule"}:"rule"},n)}}class Rin extends bae{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Prn,Mrn,Vrn,new Ain,new Iin]}map(t,n){if($0(t)){const r=Qb(t.encoding,Og),i=Qb(t.encoding,Ng),s=Qb(t.encoding,xj);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=PH(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return min(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(d=>{const f={...u,layer:d},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${gs(d)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!ut(r)&&t.columns&&(t=ec(t,["columns"]),St(Mwe("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!ut(r)&&r.row||[l?l.row:null],d=!ut(r)&&r.column||[l?l.column:null],f=ut(r)&&r||[l?l.repeat:null];for(const p of f)for(const m of c)for(const g of d){const y={repeat:p,row:m,column:g,layer:l.layer},v=(i.name?`${i.name}_`:"")+u+"child__"+(ut(r)?`${gs(p)}`:(r.row?`row_${gs(m)}`:"")+(r.column?`column_${gs(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(ec(b,["data"]))}const h=ut(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return LD(r)&&t.columns&&(t=ec(t,["columns"]),St(Mwe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=ixe({parentProjection:o,projection:i}),u=rxe({parentEncoding:s,encoding:PH(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=PH(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:y,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&St(Ttn([...r?[Og]:[],...i?[Ng]:[]]));const o={},a={};for(const l of[Og,Ng]){const u=t[l];if(u){const{align:c,center:d,spacing:f,columns:h,...p}=u;o[l]=p;for(const m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:kin(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:rxe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:ixe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function rxe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...wt(e),...wt(t)]);for(const s of i){const o=t[s],a=e[s];if(rr(o)){const l={...a,...o};r[s]=l}else BD(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||_h(a)||mn(a)||rr(a)||ut(a))&&(r[s]=a)}}else r=t;return!r||Pi(r)?void 0:r}function ixe(e){const{parentProjection:t,projection:n}=e;return t&&n&&St(mtn({parentProjection:t,projection:n})),n??t}function wae(e){return xt(e,"filter")}function Din(e){return xt(e,"stop")}function r7e(e){return xt(e,"lookup")}function Pin(e){return xt(e,"data")}function Oin(e){return xt(e,"param")}function Nin(e){return xt(e,"pivot")}function Min(e){return xt(e,"density")}function $in(e){return xt(e,"quantile")}function Fin(e){return xt(e,"regression")}function Lin(e){return xt(e,"loess")}function jin(e){return xt(e,"sample")}function Bin(e){return xt(e,"window")}function zin(e){return xt(e,"joinaggregate")}function Vin(e){return xt(e,"flatten")}function Uin(e){return xt(e,"calculate")}function i7e(e){return xt(e,"bin")}function Hin(e){return xt(e,"impute")}function qin(e){return xt(e,"timeUnit")}function Win(e){return xt(e,"aggregate")}function Gin(e){return xt(e,"stack")}function Yin(e){return xt(e,"fold")}function Kin(e){return xt(e,"extent")&&!xt(e,"density")&&!xt(e,"regression")}function Xin(e){return e.map(t=>wae(t)?{filter:IE(t.filter,xnn)}:t)}class Qin extends bae{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=sxe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=sxe(t,n),t.encoding){const r={};for(const[i,s]of Mv(t.encoding))r[i]=s7e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Mv(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=u!=="none";for(const d of Ga(n.selectionPredicates[s]??{}))d.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:t}}function sxe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(wae(s))return{filter:TX(s,t)};if(i7e(s)&&vx(s.bin))return{...s,bin:o7e(s.bin)};if(r7e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function s7e(e,t){const n=er(e);if(kt(n)&&vx(n.bin)&&(n.bin=o7e(n.bin)),_x(n)&&n.scale?.domain?.selection){const{selection:r,...i}=n.scale.domain;n.scale.domain={...i,...r?{param:r}:{}}}if(jD(n))if(ut(n.condition))n.condition=n.condition.map(r=>{const{selection:i,param:s,test:o,...a}=r;return s?r:{...a,test:TX(r,t)}});else{const{selection:r,param:i,test:s,...o}=s7e(n.condition,t);n.condition=i?n.condition:{...o,test:TX(n.condition,t)}}return n}function o7e(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function TX(e,t){const n=r=>IE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):IE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class AX extends bae{map(t,n){const r=n.selections??[];if(t.params&&!$0(t)){const i=[];for(const s of t.params)gae(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Wt(a)&&(a===t.name||i.includes(a))||ut(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=AX.prototype[e];AX.prototype[e]=function(n,r){return t.call(this,n,Jin(n,r))}}function Jin(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function a7e(e,t){t===void 0&&(t=J9e(e.config));const n=nsn(e,t),{width:r,height:i}=e,s=rsn(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Zin=new Rin,esn=new Qin,tsn=new AX;function nsn(e,t={}){const n={config:t};return tsn.map(Zin.map(esn.map(e,n),n),n)}function oxe(e){return Wt(e)?{type:e}:e??{}}function rsn(e,t,n){let{width:r,height:i}=t;const s=$0(e)||Hj(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(St(Dwe("width")),r=void 0),i=="container"&&(St(Dwe("height")),i=void 0));const a={type:"pad",...o,...n?oxe(n.autosize):{},...oxe(e.autosize)};if(a.type==="fit"&&!s&&(St(Ken),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&St(Pwe("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&St(Pwe("height")),!$c(a,{type:"pad"}))return a}function isn(e){return["fit","fit-x","fit-y"].includes(e)}function ssn(e){return e?`fit-${Tj(e)}`:"fit"}const osn=["background","padding"];function axe(e,t){const n={};for(const r of osn)e&&e[r]!==void 0&&(n[r]=Oc(e[r]));return t&&(n.params=e.params),n}class F0{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new F0(er(this.explicit),er(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ao(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of wt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function bp(e){return{explicit:!0,value:e}}function Ic(e){return{explicit:!1,value:e}}function l7e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:qj(t,n,r,i)}}function qj(e,t,n,r){return e.explicit&&t.explicit&&St(Ltn(n,r,e.value,t.value)),e}function Lv(e,t,n,r,i=qj){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:$c(e.value,t.value)?e:i(e,t,n,r)}class asn extends F0{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function PC(e){return xt(e,"url")}function LI(e){return xt(e,"values")}function u7e(e){return xt(e,"name")&&!PC(e)&&!LI(e)&&!av(e)}function av(e){return e&&(c7e(e)||d7e(e)||xae(e))}function c7e(e){return xt(e,"sequence")}function d7e(e){return xt(e,"sphere")}function xae(e){return xt(e,"graticule")}var Ts;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Ts||(Ts={}));function f7e({invalid:e,isPath:t}){switch(a9e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function lsn(e){const{marks:t,scales:n}=f7e(e);return t===n?Ts.Main:n==="include-invalid-values"?Ts.PreFilterInvalid:Ts.PostFilterInvalid}class Ii{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){St(ftn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class tc extends Ii{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${lBe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function OH(e){return e.as!==void 0}function lxe(e){return`${e}_end`}class Up extends Ii{clone(){return new Up(null,er(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(xx(l)){if(Cs(n)){const{mark:c,markDef:d,config:f}=n,h=Fv({fieldDef:s,markDef:d,config:f});(FI(c)||h)&&(u={timeUnit:wa(l),field:a})}}else u={as:jt(s,{forAs:!0}),field:a,timeUnit:l};if(Cs(n)){const{mark:c,markDef:d,config:f}=n,h=Fv({fieldDef:s,markDef:d,config:f});FI(c)&&lo(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[$r(u)]=u)}return i},{});return Pi(r)?null:new Up(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=wa(r),o={...i,timeUnit:s};return new Up(t,{[$r(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Mv(this.timeUnits)){const s=OH(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ga(this.timeUnits).map(t=>OH(t)?t.as:lxe(t.field)))}dependentFields(){return new Set(Ga(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${$r(this.timeUnits)}`}assemble(){const t=[];for(const n of Ga(this.timeUnits)){const{rectBandPosition:r}=n,i=wa(n.timeUnit);if(OH(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,c=[o,`${o}_end`];t.push({field:rf(s),type:"timeunit",...a?{units:Rj(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...uxe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=h7e({timeUnit:i,field:o}),l=lxe(o);t.push({type:"formula",expr:a,as:l}),t.push(...uxe([o,l],r,i))}}return t}}const Wj="offsetted_rect_start",Gj="offsetted_rect_end";function h7e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=UBe(r),{part:o,step:a}=GBe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${Ti(t)}, ${n?-a:a})`}function uxe([e,t],n,r){if(n!==void 0&&n!==.5){const i=Ti(e),s=Ti(t);return[{type:"formula",expr:cxe([h7e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Wj}`},{type:"formula",expr:cxe([i,s],n+.5),as:`${e}_${Gj}`}]}return[]}function cxe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const UD="_tuple_fields";class usn{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const csn={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new usn),s={},o={},a=new Set,l=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=gs(`${r}_${g}`);for(let v=1;a.has(y);v++)y=gs(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?Ht(n.value):null;let{fields:f,encodings:h}=qt(n.select)?n.select:{};if(!f&&!h&&d){for(const p of d)if(qt(p))for(const m of wt(p))Een(m)?(h||(h=[])).push(m):u==="interval"?(St(stn),h=c.encodings):(f??(f=[])).push(m)}!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){St(Xen(p,m.aggregate));continue}else if(!g){St(Nwe(p));continue}if(m.timeUnit&&!xx(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[$r(y)]=y}if(!s[g]){const y=u==="interval"&&Nm(p)&&xh(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...l(v,"data"),...l(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Ch,pBe(p)?(v.geoChannel=p,v.channel=hBe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else St(Nwe(p))}for(const p of f??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...l(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Ch}d&&(t.init=d.map(p=>i.items.map(m=>qt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Pi(o)||(i.timeUnit=new Up(null,o))},signals:(e,t,n)=>{const r=t.name+UD;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(y7e)})}},p7e="_curr",TM="anim_value",H_="anim_clock",kX="eased_anim_clock",m7e="min_extent",g7e="max_range_extent",NH="last_tick_at",MH="is_playing",dsn=1/60*1e3,fsn=(e,t)=>[{name:kX,update:H_},{name:`${e}_domain`,init:`domain('${t}')`},{name:m7e,init:`extent(${e}_domain)[0]`},{name:g7e,init:`extent(range('${t}'))[1]`},{name:TM,update:`invert('${t}', ${kX})`}],hsn={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Hp(t)&&(n=n.concat([{name:H_,init:"0",on:[{events:{type:"timer",throttle:dsn},update:`${MH} ? (${H_} + (now() - ${NH}) > ${g7e} ? 0 : ${H_} + (now() - ${NH})) : ${H_}`}]},{name:NH,init:"now()",on:[{events:[{signal:H_},{signal:MH}],update:"now()"}]},{name:MH,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+UD,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ga(e.component.selection??{}).reduce((c,d)=>d.type==="interval"?c.concat(d.name+PE):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${Jb(e)}, `;if(t.project.hasSelectionId)u+=`${Ch}: ${o}[${Ot(Ch)}]`;else if(Hp(t))u+=`fields: ${i}, values: [${TM} ? ${TM} : ${m7e}]`;else{const c=s.items.map(d=>e.fieldDef(d.channel)?.bin?`[${o}[${Ot(e.vgField(d.channel,{}))}], ${o}[${Ot(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Ot(d.field)}]`).join(", ");u+=`fields: ${i}, values: [${c}]`}if(Hp(t))return n.concat(fsn(t.name,e.scaleName(y1)),[{name:r+l0,on:[{events:[{signal:kX},{signal:TM}],update:`{${u}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+l0,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function y7e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=rf(i.field),i}function Pw(e,t=!0,n=Ol){if(ut(e)){const r=e.map(i=>Pw(i,t,n));return t?`[${r.join(", ")}]`:r}else if(wx(e))return n(t?kw(e):unn(e));return t?n(Oi(e)):e}function psn(e,t){for(const n of Ga(e.component.selection??{})){const r=n.name;let i=`${r}${l0}, ${n.resolve==="global"?"true":`{unit: ${Jb(e)}}`}`;for(const s of Kj)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+zsn,on:[{events:{signal:n.name+l0},update:`modify(${Ot(n.name+Ow)}, ${i})`}]})}return _ae(t)}function msn(e,t){if(e.component.selection&&wt(e.component.selection).length){const n=Ot(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:m1("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return _ae(t)}function gsn(e,t){let n=!1;for(const r of Ga(e.component.selection??{})){const i=r.name,s=Ot(i+Ow);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${N7e}(${s}, ${Ot(a)}${l}`})}n=!0;for(const a of Kj)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),_ae(t)}function ysn(e,t){const n=[],r=[],i=Jb(e,{escape:!1});for(const s of Ga(e.component.selection??{})){const o={name:s.name+Ow};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ch}}]),s.init){const l=s.project.items.map(y7e);o.values=s.project.hasSelectionId?s.init.map(u=>({unit:i,[Ch]:Pw(u,!1)[0]})):s.init.map(u=>({unit:i,fields:l,values:Pw(u,!1)}))}if([...n,...t].filter(l=>l.name===s.name+Ow).length||n.push(o),Hp(s)&&t.length){const l=e.lookupDataSource(e.getDataName(Ts.Main)),u=t.find(d=>d.name===l),c=u.transform.find(d=>d.type==="filter"&&d.expr.includes("vlSelectionTest"));if(c){u.transform=u.transform.filter(f=>f!==c);const d={name:u.name+p7e,source:u.name,transform:[c]};r.push(d)}}}return n.concat(t,r)}function v7e(e,t){for(const n of Ga(e.component.selection??{}))for(const r of Kj)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function vsn(e,t){for(const n of e.children)Cs(n)&&(t=v7e(n,t));return t}function bsn(e,t,n,r){const i=q7e(e,t.param,t);return{signal:xh(n.get("type"))&&ut(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function _ae(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const $g={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Nm(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&St(etn),!s||!xh(o)){St(Zen);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||RX(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(N7e))i.update=`{${r.map(o=>`${Ot(rf(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Ot(rf(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!RX(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function IX(e,t){return`domain(${Ot(e.scaleName(t))})`}function RX(e){return e.parent&&tT(e.parent)&&(!e.parent.parent||RX(e.parent.parent))}const PE="_brush",b7e="_scale_trigger",E2="geo_interval_init_tick",w7e="_init",wsn="_center",xsn={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...qt(n.select)?n.select:{}};i.fields=[Ch],i.encodings||(i.encodings=n.value?wt(n.value):[qh,Hh]),n.select={type:"interval",...i}}if(t.translate&&!$g.defined(t)){const i=`!event.item || event.item.mark.name !== ${Ot(t.name+PE)}`;for(const s of t.events){if(!s.between){St(`${s} is not an ordered event stream for interval selections.`);continue}const o=Ht((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+l0,s=Ga(t.project.hasChannel).filter(a=>a.channel===vs||a.channel===Ca),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(_sn(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=Ot(e.projectionName()),l=e.projectionName()+wsn,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=c?o&&o[c.index]:`${l}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;o&&(n.unshift({name:r+w7e,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(S=>S.name===l)||n.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Ot(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${Jb(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,_=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:E2}]:[]],update:b}]})}else{if(!$g.defined(t)){const u=r+b7e,c=s.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,m=Ot(e.scaleName(f)),g=e.getScaleComponent(f).get("type"),y=xh(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:s.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${Jb(e)}, fields: ${r+UD}, values`;return n.concat({name:i,...o?{init:`{${l}: ${Pw(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Cs(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===E2).length||n.unshift({name:E2,value:null,on:[{events:"timer{1}",update:`${E2} === null ? {} : ${E2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i?.signals.visual,a=s?.signals.visual,l=`data(${Ot(t.name+Ow)})`;if($g.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of wt(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${Jb(e)}`,...u[g]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=wt(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=f??(t.translate?"move":null);return[{name:`${r+PE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:r+PE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function _sn(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Ot(i?e.scaleName(s):e.projectionName()),l=f=>`scale(${a}, ${f})`,u=e.getSizeSignalRef(s===vs?"width":"height").signal,c=`${s}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const f=n.signals.data,h=$g.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Pw(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+b7e},update:xh(m)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...g,on:d},{name:f,...r?{init:Pw(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===vs?0:1,h=t.name+w7e,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:d}]}}function QS({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=jD(t)&&t.condition;let o=[];s&&(o=Ht(s).map(u=>{const c=i(u);if(urn(u)){const{param:d,empty:f}=u;return{test:H7e(e,{param:d,empty:f}),...c}}else return{test:P$(e,u.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function Eae(e,t="text"){const n=e.encoding[t];return QS({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>Yj(r,e.config),invalidValueRef:void 0})}function Yj(e,t,n="datum"){if(e){if(_h(e))return is(e.value);if(rr(e)){const{format:r,formatType:i}=S$(e);return rae({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function x7e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(ut(o))return{tooltip:dxe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return QS({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const c=Yj(u,i,a);if(c)return c;if(u===null)return;let d=Di("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),Wt(d))return{value:d};if(qt(d))return mn(d)?d:d.content==="encoding"?dxe(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function _7e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function l(c,d){const f=yx(d),h=vu(c)?c:{...c,type:e[f].type},p=h.title||aae(h,i),m=Ht(p).join(", ").replaceAll(/"/g,'\\"');let g;if(lo(d)){const y=d==="x"?"x2":"y2",v=Eh(e[y]);if($a(h.bin)&&v){const b=jt(h,{expr:o}),_=jt(v,{expr:o}),{format:E,formatType:S}=S$(h);g=FD(b,_,E,S,i),s.add(y)}}if((lo(d)||d===yf||d===Uh)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:y,formatType:v}=S$(h);g=rae({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=Yj(h,i,o).signal),a.push({channel:d,key:m,value:g})}uae(e,(c,d)=>{kt(c)?l(c,d):Lj(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:f}of a)!s.has(c)&&!u[d]&&(u[d]=f);return u}function dxe(e,t,n,{reactiveGeom:r}={}){const i=_7e(e,t,n,{reactiveGeom:r}),s=Mv(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Esn(e){const{markDef:t,config:n}=e,r=Di("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Csn(e),...Ssn(e)}}function Csn(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Di("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Qt(Wen,t)?{}:{ariaRoleDescription:{value:t}}}function Ssn(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return QS({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>Yj(l,e.config),invalidValueRef:void 0});const o=Di("description",n,r);if(o!=null)return{description:is(o)};if(r.aria===!1)return{};const a=_7e(t,i,r);if(!Pi(a))return{description:{signal:Mv(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function za(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;const u=i[e];a===void 0&&(l??(l=Di(e,r,s,{vgChannel:o,ignoreVgConfig:!jD(u)})),l!==void 0&&(a=is(l)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=u9e({...c,scaleChannel:e,channelDef:u});return QS({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:d,mainRefFn:h=>nae({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function E7e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Di("filled",n,i),a=kr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Di(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=Di(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...l?{fill:is(l)}:{},...u?{stroke:is(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&St(NBe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...za("color",e,{vgChannel:c,defaultValue:o?l:u}),...za("fill",e,{defaultValue:r.fill?l:void 0}),...za("stroke",e,{defaultValue:r.stroke?u:void 0})}}function Tsn(e){const{encoding:t,mark:n}=e,r=t.order;return!E1(n)&&_h(r)?QS({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>is(i.value),invalidValueRef:void 0}):{}}function OC({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:nae({channel:s,channelDef:a,markDef:t,config:r?.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:is(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function ou(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[Om(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=OC({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Cae({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!l&&lo(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Asn({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Asn(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(rr(n)&&i&&t===i.fieldChannel){if(kt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return _$({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Xb(n,r,{suffix:"end"},{offset:s})}return tae(e)}function Cae({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=yx(n),l=$v(n),u=Di(n,s,o,{vgChannel:l});if(u!==void 0)return dk(n,u);switch(t){case"zeroOrMin":return fxe({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return fxe({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[cc(n)],mult:.5}}}}function fxe({mainChannel:e,config:t,...n}){const r=l9e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const ksn={left:"x",center:"xc",right:"x2"},Isn={top:"y",middle:"yc",bottom:"y2"};function C7e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return $v(e);const i=e==="x"?"align":"baseline",s=Di(i,t,n);let o;return mn(s)?(St(Atn(i)),o=void 0):o=s,e==="x"?ksn[o||(r==="top"?"left":"center")]:Isn[o||r]}function I$(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?S7e(e,t,{defaultPos:n,defaultPos2:r}):ou(e,t,{defaultPos:n})}function S7e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Om(e),a=cc(e),l=Rsn(t,r,o),u=l[a]?C7e(e,i,s):$v(e);return{...ou(e,t,{defaultPos:n,vgChannel:u}),...l}}function Rsn(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=yx(n),u=cc(n),c=$v(n),d=r[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?OC({channel:n,markDef:s,encoding:r,model:e}):OC({channel:l,markDef:s,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=cc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Dsn({channel:n,channelDef:d,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:CO(n,s)||CO(n,{[n]:yX(n,s,a.style),[u]:yX(u,s,a.style)})||CO(n,a[i])||CO(n,a.mark)||{[c]:Cae({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function Dsn({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return rr(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Xb(t,s,{suffix:"start"},{offset:l}):tae({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function CO(e,t){const n=cc(e),r=$v(e);if(t[r]!==void 0)return{[r]:dk(e,t[r])};if(t[e]!==void 0)return{[r]:dk(e,t[e])};if(t[n]){const i=t[n];if(Rw(i))St(xtn(n));else return{[n]:dk(e,i)}}}function a0(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Om(t),a=cc(t),l=r[t],u=r[o],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,h=r[a]??r.size??Di("size",i,n,{vgChannel:a}),p=vBe(t),m=s==="bar"&&(t==="x"?f==="vertical":f==="horizontal")||s==="tick"&&(t==="y"?f==="vertical":f==="horizontal");return kt(l)&&(Xi(l.bin)||$a(l.bin)||l.timeUnit&&!u)&&!(h&&!Rw(h))&&!r[p]&&!xa(d)?Nsn({fieldDef:l,fieldDef2:u,channel:t,model:e}):(rr(l)&&xa(d)||m)&&!u?Osn(l,t,e):S7e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Psn(e,t,n,r,i,s,o){if(Rw(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=um("minBandSize",{type:o},r);return{signal:c?`max(${Zf(c)}, ${u})`:u}}else i.band!==1&&(St(Dtn(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(mn(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(bx(l)&&ci(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:d}=r.scale,f=ao(l,o==="tick"?d:o==="bar"?u:c);if(mn(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ci(f))return{signal:`${1-f} * ${e}`}}return{value:CX(r.view,e)-2}}function Osn(e,t,n){const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=cc(t),d=Om(t),f=vBe(t),h=n.scaleName(f),p=n.getScaleComponent(koe(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=za("size",n,{vgChannel:c,defaultRef:is(r.size)}):St(Mtn(r.type)));const y=!!g,v=g9e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(u||p)?.get("type"),useVlSizeChannel:m});g=g||{[c]:Psn(c,h||l,p||u,s,v,!!e,r.type)};const b=(u||p)?.get("type")==="band"&&Rw(v)&&!y?"top":"middle",_=C7e(t,r,s,b),E=_==="xc"||_==="yc",{offset:S,offsetType:T}=OC({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=tae({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:S,defaultRef:Cae({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:E?T==="encoding"?0:.5:mn(v)?{signal:`(1-${v})/2`}:Rw(v)?(1-v.band)/2:0});if(c)return{[_]:A,...g};{const R=$v(d),I=g[c],P=S?{...I,offset:S}:I;return{[_]:A,[R]:ut(A)?[A[0],{...A[1],offset:P}]:{...A,offset:P}}}}function hxe(e,t,n,r,i,s,o){if(fBe(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(mn(n)||mn(i)||mn(r)||s){const u=Zf(n),c=Zf(i),d=Zf(r),f=Zf(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${l})`:l,m=d?`${d} + `:"",g=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-l:+i+l)}function Nsn({fieldDef:e,fieldDef2:t,channel:n,model:r}){const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=g9e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),h=r.component.axes[n]?.[0]?.get("translate")??.5,p=lo(n)?Di("binSpacing",s,i)??0:0,m=Om(n),g=$v(n),y=$v(m),v=um("minBandSize",s,i),{offset:b}=OC({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:_}=OC({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=rrn({fieldDef:e,scaleName:l}),S=hxe(n,p,c,h,b,v,E),T=hxe(m,p,c,h,_??b,v,E),A=mn(d)?{signal:`(1-${d.signal})/2`}:Rw(d)?(1-d.band)/2:.5,R=Fv({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Xi(e.bin)||e.timeUnit){const I=e.timeUnit&&R!==.5;return{[y]:pxe({fieldDef:e,scaleName:l,bandPosition:A,offset:T,useRectOffsetField:I}),[g]:pxe({fieldDef:e,scaleName:l,bandPosition:mn(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:I})}}else if($a(e.bin)){const I=Xb(e,l,{},{offset:T});if(kt(t))return{[y]:I,[g]:Xb(t,l,{},{offset:S})};if(vx(e.bin)&&e.bin.step)return{[y]:I,[g]:{signal:`scale("${l}", ${jt(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}St(FBe(m))}function pxe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return _$({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Wj,endSuffix:Gj}:{}})}const Msn=new Set(["aria","width","height"]);function vf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?E7e(e):{};return{...$sn(e.markDef,t),...mxe("fill",n),...mxe("stroke",r),...za("opacity",e),...za("fillOpacity",e),...za("strokeOpacity",e),...za("strokeWidth",e),...za("strokeDash",e),...Tsn(e),...x7e(e),...Eae(e,"href"),...Esn(e)}}function mxe(e,t){return t?{[e]:t}:{}}function $sn(e,t){return qen.reduce((n,r)=>(!Msn.has(r)&&xt(e,r)&&t[r]!=="ignore"&&(n[r]=is(e[r])),n),{})}function Sae(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{let o;if(!Nm(s)||!(o=e.getScaleType(s)))return;const a=Aj(i.aggregate),l=eae({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(ern(l)){const u=e.vgField(s,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});u&&r.add(u)}}),r.size>0)return{defined:{signal:[...r].map(s=>Dj(s,!0)).join(" && ")}}}function gxe(e,t){if(t!==void 0)return{[e]:is(t)}}const $H="voronoi",T7e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName($H)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(E1(s))return St(Qen(s)),n;const o={name:e.getName($H),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...x7e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?a=c:d.includes($H)&&(l=!0)}),l||n.splice(a+1,0,o),n}},A7e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!mae(e.bind),parse:(e,t,n)=>M7e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=T7e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=gs(`${r}_${l.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...o?{init:Pw(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Ot(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(u=>u.name===r+l0),o=r+UD,a=i.items.map(u=>gs(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},R$="_toggle",k7e={defined:e=>e.type==="point"&&!Hp(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+R$,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+l0,r=t.name+R$;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Jb(e)}}, `)+`${r} ? ${n} : null`}},Fsn={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Hp(e),parse:(e,t)=>{t.clear&&(t.clear=Wt(t.clear)?m1(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(A7e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===gs(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+l0);r(i,"null"),k7e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+R$),r(i,"false"))}return n}},I7e={defined:e=>{const t=e.resolve==="global"&&e.bind&&mae(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ch;return t&&!n&&St(ttn),t&&n},parse:(e,t,n)=>{const r=er(n);if(r.select=Wt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},M7e(t,r),qt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Ht(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=RH(t.bind)?t.bind.legend:"click",s=Wt(i)?m1(i,"view"):Ht(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=RH(t.bind)&&t.bind.legend,s=o=>a=>{const l=er(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${gs(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(f=>f.name===r+l0),o=r+UD,a=i.items.filter(f=>f.hasLegend).map(f=>gs(`${r}_${gs(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(f=>f.name===r+R$),d=RH(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function Lsn(e,t,n){const r=e.fieldDef(t)?.field;for(const i of Ga(e.component.selection??{})){const s=i.project.hasField[r]??i.project.hasChannel[t];if(s&&I7e.defined(i)){const o=n.get("selections")??[];o.push(i.name),n.set("selections",o,!1),s.hasLegend=!0}}}const R7e="_translate_anchor",D7e="_translate_delta",jsn={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=$g.defined(t),s=r+R7e,{x:o,y:a}=t.project.hasChannel;let l=m1(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+PE,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?IX(e,vs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?IX(e,Ca):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+D7e,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&yxe(e,t,o,"width",n),a!==void 0&&yxe(e,t,a,"height",n),n}};function yxe(e,t,n,r,i){const s=t.name,o=s+R7e,a=s+D7e,l=n.channel,u=$g.defined(t),c=i.find(E=>E.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=u?l===vs?p?"":"-":p?"-":"":"",g=`${o}.extent_${l}`,y=`${m}${a}.${l} / ${u?`${d}`:`span(${g})`}`,v=!u||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=u?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",_=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:u?_:`clampRange(${_}, 0, ${d})`})}const P7e="_zoom_anchor",O7e="_zoom_delta",Bsn={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=$g.defined(t),s=r+O7e,{x:o,y:a}=t.project.hasChannel,l=Ot(e.scaleName(vs)),u=Ot(e.scaleName(Ca));let c=m1(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+PE,d))),n.push({name:r+P7e,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&vxe(e,t,o,"width",n),a!==void 0&&vxe(e,t,a,"height",n),n}};function vxe(e,t,n,r,i){const s=t.name,o=n.channel,a=$g.defined(t),l=i.find(v=>v.name===n.signals[a?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),d=c&&c.get("type"),f=a?IX(e,o):l.name,h=s+O7e,p=`${s}${P7e}.${o}`,m=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",g=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${f}, ${p}, ${h}${g})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const Ow="_store",l0="_tuple",zsn="_modify",N7e="vlSelectionResolve",Kj=[hsn,xsn,csn,k7e,A7e,$g,I7e,Fsn,jsn,Bsn,T7e];function Vsn(e){let t=e.parent;for(;t&&!zc(t);)t=t.parent;return t}function Jb(e,{escape:t}={escape:!0}){let n=t?Ot(e.name):e.name;const r=Vsn(e);if(r){const{facet:i}=r;for(const s of Ld)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Ot(r.vgField(s))}])`)}return n}function Tae(e){return Ga(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function M7e(e,t){(Wt(t.select)||!t.select.on)&&delete e.events,(Wt(t.select)||!t.select.clear)&&delete e.clear,(Wt(t.select)||!t.select.toggle)&&delete e.toggle}function Hp(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}const Usn="RawCode",Hsn="Literal",qsn="Property",Wsn="Identifier",Gsn="ArrayExpression",Ysn="BinaryExpression",Ksn="CallExpression",Xsn="ConditionalExpression",Qsn="LogicalExpression",Jsn="MemberExpression",Zsn="ObjectExpression",eon="UnaryExpression";function Gh(e){this.type=e}Gh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=ton(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function ton(e){switch(e.type){case Gsn:return e.elements;case Ysn:case Qsn:return[e.left,e.right];case Ksn:return[e.callee].concat(e.arguments);case Xsn:return[e.test,e.consequent,e.alternate];case Jsn:return[e.object,e.property];case Zsn:return e.properties;case qsn:return[e.key,e.value];case eon:return[e.argument];case Wsn:case Hsn:case Usn:default:return[]}}var $m,hn,ot,Dl,ki,Xj=1,HD=2,Nw=3,C1=4,Qj=5,Ex=6,Hu=7,qD=8,non=9;$m={};$m[Xj]="Boolean";$m[HD]="<end>";$m[Nw]="Identifier";$m[C1]="Keyword";$m[Qj]="Null";$m[Ex]="Numeric";$m[Hu]="Punctuator";$m[qD]="String";$m[non]="RegularExpression";var ron="ArrayExpression",ion="BinaryExpression",son="CallExpression",oon="ConditionalExpression",$7e="Identifier",aon="Literal",lon="LogicalExpression",uon="MemberExpression",con="ObjectExpression",don="Property",fon="UnaryExpression",ba="Unexpected token %0",hon="Unexpected number",pon="Unexpected string",mon="Unexpected identifier",gon="Unexpected reserved word",yon="Unexpected end of input",DX="Invalid regular expression",FH="Invalid regular expression: missing /",F7e="Octal literals are not allowed in strict mode.",von="Duplicate data property in object literal not allowed in strict mode",qa="ILLEGAL",jI="Disabled.",bon=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),won=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Jj(e,t){if(!e)throw new Error("ASSERT: "+t)}function lg(e){return e>=48&&e<=57}function Aae(e){return"0123456789abcdefABCDEF".includes(e)}function fk(e){return"01234567".includes(e)}function xon(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function BI(e){return e===10||e===13||e===8232||e===8233}function WD(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&bon.test(String.fromCharCode(e))}function D$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&won.test(String.fromCharCode(e))}const _on={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function L7e(){for(;ot<Dl;){const e=hn.charCodeAt(ot);if(xon(e)||BI(e))++ot;else break}}function PX(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ot<Dl&&Aae(hn[ot])?(r=hn[ot++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ai({},ba,qa);return String.fromCharCode(i)}function Eon(){var e,t,n,r;for(e=hn[ot],t=0,e==="}"&&ai({},ba,qa);ot<Dl&&(e=hn[ot++],!!Aae(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ai({},ba,qa),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function j7e(){var e,t;for(e=hn.charCodeAt(ot++),t=String.fromCharCode(e),e===92&&(hn.charCodeAt(ot)!==117&&ai({},ba,qa),++ot,e=PX("u"),(!e||e==="\\"||!WD(e.charCodeAt(0)))&&ai({},ba,qa),t=e);ot<Dl&&(e=hn.charCodeAt(ot),!!D$(e));)++ot,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),hn.charCodeAt(ot)!==117&&ai({},ba,qa),++ot,e=PX("u"),(!e||e==="\\"||!D$(e.charCodeAt(0)))&&ai({},ba,qa),t+=e);return t}function Con(){var e,t;for(e=ot++;ot<Dl;){if(t=hn.charCodeAt(ot),t===92)return ot=e,j7e();if(D$(t))++ot;else break}return hn.slice(e,ot)}function Son(){var e,t,n;return e=ot,t=hn.charCodeAt(ot)===92?j7e():Con(),t.length===1?n=Nw:_on.hasOwnProperty(t)?n=C1:t==="null"?n=Qj:t==="true"||t==="false"?n=Xj:n=Nw,{type:n,value:t,start:e,end:ot}}function LH(){var e=ot,t=hn.charCodeAt(ot),n,r=hn[ot],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ot,{type:Hu,value:String.fromCharCode(t),start:e,end:ot};default:if(n=hn.charCodeAt(ot+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ot+=2,{type:Hu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ot};case 33:case 61:return ot+=2,hn.charCodeAt(ot)===61&&++ot,{type:Hu,value:hn.slice(e,ot),start:e,end:ot}}}if(o=hn.substr(ot,4),o===">>>=")return ot+=4,{type:Hu,value:o,start:e,end:ot};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ot+=3,{type:Hu,value:s,start:e,end:ot};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ot+=2,{type:Hu,value:i,start:e,end:ot};if(i==="//"&&ai({},ba,qa),"<>=!+-*%&|^/".includes(r))return++ot,{type:Hu,value:r,start:e,end:ot};ai({},ba,qa)}function Ton(e){let t="";for(;ot<Dl&&Aae(hn[ot]);)t+=hn[ot++];return t.length===0&&ai({},ba,qa),WD(hn.charCodeAt(ot))&&ai({},ba,qa),{type:Ex,value:parseInt("0x"+t,16),start:e,end:ot}}function Aon(e){let t="0"+hn[ot++];for(;ot<Dl&&fk(hn[ot]);)t+=hn[ot++];return(WD(hn.charCodeAt(ot))||lg(hn.charCodeAt(ot)))&&ai({},ba,qa),{type:Ex,value:parseInt(t,8),octal:!0,start:e,end:ot}}function bxe(){var e,t,n;if(n=hn[ot],Jj(lg(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ot,e="",n!=="."){if(e=hn[ot++],n=hn[ot],e==="0"){if(n==="x"||n==="X")return++ot,Ton(t);if(fk(n))return Aon(t);n&&lg(n.charCodeAt(0))&&ai({},ba,qa)}for(;lg(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="."){for(e+=hn[ot++];lg(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="e"||n==="E")if(e+=hn[ot++],n=hn[ot],(n==="+"||n==="-")&&(e+=hn[ot++]),lg(hn.charCodeAt(ot)))for(;lg(hn.charCodeAt(ot));)e+=hn[ot++];else ai({},ba,qa);return WD(hn.charCodeAt(ot))&&ai({},ba,qa),{type:Ex,value:parseFloat(e),start:t,end:ot}}function kon(){var e="",t,n,r,i,s=!1;for(t=hn[ot],Jj(t==="'"||t==='"',"String literal must starts with a quote"),n=ot,++ot;ot<Dl;)if(r=hn[ot++],r===t){t="";break}else if(r==="\\")if(r=hn[ot++],!r||!BI(r.charCodeAt(0)))switch(r){case"u":case"x":hn[ot]==="{"?(++ot,e+=Eon()):e+=PX(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:fk(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ot<Dl&&fk(hn[ot])&&(s=!0,i=i*8+"01234567".indexOf(hn[ot++]),"0123".includes(r)&&ot<Dl&&fk(hn[ot])&&(i=i*8+"01234567".indexOf(hn[ot++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&hn[ot]===`
`&&++ot;else{if(BI(r.charCodeAt(0)))break;e+=r}return t!==""&&ai({},ba,qa),{type:qD,value:e,octal:s,start:n,end:ot}}function Ion(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ai({},DX)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ai({},DX)}try{return new RegExp(e,t)}catch{return null}}function Ron(){var e,t,n,r,i;for(e=hn[ot],Jj(e==="/","Regular expression literal must start with a slash"),t=hn[ot++],n=!1,r=!1;ot<Dl;)if(e=hn[ot++],t+=e,e==="\\")e=hn[ot++],BI(e.charCodeAt(0))&&ai({},FH),t+=e;else if(BI(e.charCodeAt(0)))ai({},FH);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ai({},FH),i=t.substr(1,t.length-2),{value:i,literal:t}}function Don(){var e,t,n;for(t="",n="";ot<Dl&&(e=hn[ot],!!D$(e.charCodeAt(0)));)++ot,e==="\\"&&ot<Dl?ai({},ba,qa):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ai({},DX,n),{value:n,literal:t}}function Pon(){var e,t,n,r;return ki=null,L7e(),e=ot,t=Ron(),n=Don(),r=Ion(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ot}}function Oon(e){return e.type===Nw||e.type===C1||e.type===Xj||e.type===Qj}function B7e(){if(L7e(),ot>=Dl)return{type:HD,start:ot,end:ot};const e=hn.charCodeAt(ot);return WD(e)?Son():e===40||e===41||e===59?LH():e===39||e===34?kon():e===46?lg(hn.charCodeAt(ot+1))?bxe():LH():lg(e)?bxe():LH()}function Gu(){const e=ki;return ot=e.end,ki=B7e(),ot=e.end,e}function z7e(){const e=ot;ki=B7e(),ot=e}function Non(e){const t=new Gh(ron);return t.elements=e,t}function wxe(e,t,n){const r=new Gh(e==="||"||e==="&&"?lon:ion);return r.operator=e,r.left=t,r.right=n,r}function Mon(e,t){const n=new Gh(son);return n.callee=e,n.arguments=t,n}function $on(e,t,n){const r=new Gh(oon);return r.test=e,r.consequent=t,r.alternate=n,r}function kae(e){const t=new Gh($7e);return t.name=e,t}function CA(e){const t=new Gh(aon);return t.value=e.value,t.raw=hn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function xxe(e,t,n){const r=new Gh(uon);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Fon(e){const t=new Gh(con);return t.properties=e,t}function _xe(e,t,n){const r=new Gh(don);return r.key=t,r.value=n,r.kind=e,r}function Lon(e,t){const n=new Gh(fon);return n.operator=e,n.argument=t,n.prefix=!0,n}function ai(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Jj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=ot,n.description=i,n}function Zj(e){e.type===HD&&ai(e,yon),e.type===Ex&&ai(e,hon),e.type===qD&&ai(e,pon),e.type===Nw&&ai(e,mon),e.type===C1&&ai(e,gon),ai(e,ba,e.value)}function Pl(e){const t=Gu();(t.type!==Hu||t.value!==e)&&Zj(t)}function ss(e){return ki.type===Hu&&ki.value===e}function jH(e){return ki.type===C1&&ki.value===e}function jon(){const e=[];for(ot=ki.start,Pl("[");!ss("]");)ss(",")?(Gu(),e.push(null)):(e.push(Mw()),ss("]")||Pl(","));return Gu(),Non(e)}function Exe(){ot=ki.start;const e=Gu();return e.type===qD||e.type===Ex?(e.octal&&ai(e,F7e),CA(e)):kae(e.value)}function Bon(){var e,t,n,r;if(ot=ki.start,e=ki,e.type===Nw)return n=Exe(),Pl(":"),r=Mw(),_xe("init",n,r);if(e.type===HD||e.type===Hu)Zj(e);else return t=Exe(),Pl(":"),r=Mw(),_xe("init",t,r)}function zon(){var e=[],t,n,r,i={},s=String;for(ot=ki.start,Pl("{");!ss("}");)t=Bon(),t.key.type===$7e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ai({},von):i[r]=!0,e.push(t),ss("}")||Pl(",");return Pl("}"),Fon(e)}function Von(){Pl("(");const e=Iae();return Pl(")"),e}const Uon={if:1};function Hon(){var e,t,n;if(ss("("))return Von();if(ss("["))return jon();if(ss("{"))return zon();if(e=ki.type,ot=ki.start,e===Nw||Uon[ki.value])n=kae(Gu().value);else if(e===qD||e===Ex)ki.octal&&ai(ki,F7e),n=CA(Gu());else{if(e===C1)throw new Error(jI);e===Xj?(t=Gu(),t.value=t.value==="true",n=CA(t)):e===Qj?(t=Gu(),t.value=null,n=CA(t)):ss("/")||ss("/=")?(n=CA(Pon()),z7e()):Zj(Gu())}return n}function qon(){const e=[];if(Pl("("),!ss(")"))for(;ot<Dl&&(e.push(Mw()),!ss(")"));)Pl(",");return Pl(")"),e}function Won(){ot=ki.start;const e=Gu();return Oon(e)||Zj(e),kae(e.value)}function Gon(){return Pl("."),Won()}function Yon(){Pl("[");const e=Iae();return Pl("]"),e}function Kon(){var e,t,n;for(e=Hon();;)if(ss("."))n=Gon(),e=xxe(".",e,n);else if(ss("("))t=qon(),e=Mon(e,t);else if(ss("["))n=Yon(),e=xxe("[",e,n);else break;return e}function Cxe(){const e=Kon();if(ki.type===Hu&&(ss("++")||ss("--")))throw new Error(jI);return e}function AM(){var e,t;if(ki.type!==Hu&&ki.type!==C1)t=Cxe();else{if(ss("++")||ss("--"))throw new Error(jI);if(ss("+")||ss("-")||ss("~")||ss("!"))e=Gu(),t=AM(),t=Lon(e.value,t);else{if(jH("delete")||jH("void")||jH("typeof"))throw new Error(jI);t=Cxe()}}return t}function Sxe(e){let t=0;if(e.type!==Hu&&e.type!==C1)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Xon(){var e,t,n,r,i,s,o,a,l,u;if(e=ki,l=AM(),r=ki,i=Sxe(r),i===0)return l;for(r.prec=i,Gu(),t=[e,ki],o=AM(),s=[l,r,o];(i=Sxe(ki))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=wxe(a,l,o),s.push(n);r=Gu(),r.prec=i,s.push(r),t.push(ki),n=AM(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=wxe(s[u-1].value,s[u-2],n),u-=2;return n}function Mw(){var e,t,n;return e=Xon(),ss("?")&&(Gu(),t=Mw(),Pl(":"),n=Mw(),e=$on(e,t,n)),e}function Iae(){const e=Mw();if(ss(","))throw new Error(jI);return e}function Qon(e){hn=e,ot=0,Dl=hn.length,ki=null,z7e();const t=Iae();if(ki.type!==HD)throw new Error("Unexpect token after expression.");return t}function OX(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...OX(e.object)),t.push(...OX(e.property))),t)}function V7e(e){return e.object.type==="MemberExpression"?V7e(e.object):e.object.name==="datum"}function U7e(e){const t=Qon(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&V7e(r)&&n.add(OX(r).slice(1).join("."))}),n}class JS extends Ii{clone(){return new JS(null,this.model,er(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=P$(this.model,this.filter,this),this._dependentFields=U7e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Jon(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=gs(s.name),a=s.select,l=Wt(a)?a:a.type,u=qt(a)?er(a):{type:l},c=r[l];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(u.mark={...c.mark,...u.mark}),(u[h]===void 0||u[h]===!0)&&(u[h]=er(c[h]??u[h])));const d=n[o]={...u,name:o,type:l,init:s.value,bind:s.bind,events:Wt(u.on)?m1(u.on,"scope"):Ht(er(u.on))};if(Hp(d)&&(i++,i>1)){delete n[o];continue}const f=er(s);for(const h of Kj)h.defined(d)&&h.parse&&h.parse(e,d,f)}return i>1&&St(atn),n}function H7e(e,t,n,r="datum"){const i=Wt(t)?t:t.param,s=gs(i),o=Ot(s+Ow);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Ot(a.resolve)})`,c=`${l}${o}, ${r}${u}`,d=`length(data(${o}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function q7e(e,t,n){const r=gs(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&St(ltn(s));else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,St(utn(a,i,n,s))):s=a[0].field}return`${o.name}[${Ot(rf(s))}]`}function Zon(e,t){for(const[n,r]of Mv(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new tc(new JS(t,e,{param:n}),i,Ts.Lookup,e.component.data.outputNodeRefCounts)}}function P$(e,t,n){return ck(t,r=>Wt(r)?r:vnn(r)?H7e(e,r,n):KBe(r))}function ean(e,t){if(e)return ut(e)&&!_y(e)?e.map(n=>aae(n,t)).join(", "):e}function BH(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function SA(e,t,n,r={header:!1}){const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const d in c){const f=d,h=Ern[f],p=c[f];if(h&&h!==t&&h!=="both")delete c[f];else if(VD(p)){const{condition:m,...g}=p,y=Ht(m),v=Wwe[f];if(v){const{vgProp:b,part:_}=v,E=[...y.map(S=>{const{test:T,...A}=S;return{test:P$(null,T),...A}}),g];BH(c,_,b,E),delete c[f]}else if(v===null){const b={signal:y.map(_=>{const{test:E,...S}=_;return`${P$(null,E)} ? ${Rwe(S)} : `}).join("")+Rwe(g)};c[f]=b}}else if(mn(p)){const m=Wwe[f];if(m){const{vgProp:g,part:y}=m;BH(c,y,g,p),delete c[f]}}kr(["labelAlign","labelBaseline"],f)&&c[f]===null&&delete c[f]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:d}=c.encode;c.encode={...d?{grid:d}:{}},Pi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ao(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let f=a;c.encode?.labels?.update&&mn(c.encode.labels.update.text)&&(f=Sw(a,"datum.label",c.encode.labels.update.text.signal)),BH(c,"labels","text",{signal:f})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const f of T9e)e.hasAxisPart(f)||delete c.encode[f];Pi(c.encode)&&delete c.encode}const d=ean(l,n);return{scale:o,orient:s,grid:!1,...d?{title:d}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ao(u,0)}}}}function W7e(e){const{axes:t}=e.component,n=[];for(const r of M0)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function tan(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>SA(i,"grid",t)),...r.map(i=>SA(i,"grid",t)),...n.map(i=>SA(i,"main",t)),...r.map(i=>SA(i,"main",t))].filter(i=>i)}function Txe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...wt(o),...wt(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${Zf(o[c])} : ${Zf(a[c])}`};return u}return t[i]})])}function nan(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:ZBe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=mn(n)?"axisOrient":`axis${DD(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:Txe(a,r,e,n),vgAxisConfig:Txe(l,r,e,n),axisConfigStyle:ran([...l,...a],r)}}function ran(e,t){const n=[{}];for(const r of e){let i=t[r]?.style;if(i){i=Ht(i);for(const s of i)n.push(t.style[s])}}return Object.assign.apply(null,n)}function NX(e,t,n,r={}){const i=ABe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[s]?.[e]!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const Axe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??ian(n,e),gridScale:({model:e,channel:t})=>san(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Y7e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||G7e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??aan(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??lan(t.type,n,kt(t)&&!!t.timeUnit,kt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??can({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:dan,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=K7e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return IBe(i?[Hwe(i)]:[],kt(o)?[Hwe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>fan(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??han(n,t)};function ian(e,t){return!xa(e)&&kt(t)&&!Xi(t?.bin)&&!$a(t?.bin)}function san(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function oan(e,t,n,r,i){const s=t?.labelAngle;if(s!==void 0)return mn(s)?s:$I(s);{const{configValue:o}=NX("labelAngle",r,t?.style,i);return o!==void 0?$I(o):n===vs&&kr([Koe,Yoe],e.type)&&!(kt(e)&&e.timeUnit)?270:void 0}}function MX(e){return`(((${e.signal} % 360) + 360) % 360)`}function G7e(e,t,n,r){if(e!==void 0)if(n==="x"){if(mn(e)){const i=MX(e),s=mn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(mn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(mn(e)){const i=MX(e),s=mn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(mn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Y7e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(mn(e)){const o=MX(e),a=mn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(mn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function aan(e,t){if(t==="x"&&kr(["quantitative","temporal"],e))return!0}function lan(e,t,n,r){if(n&&!qt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function uan(e){return e==="x"?"bottom":"left"}function can({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!xa(t)&&t!=="log"){if(kt(e)){if(Xi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&kr(["month","hours","day","quarter"],wa(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function dan({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(kt(t)){const{timeUnit:n}=t;if(n){const r=WBe(n);if(r)return{signal:r}}}}function K7e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return RBe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function fan(e,t){const n=e.values;if(ut(n))return S9e(t,n);if(mn(n))return n}function han(e,t){return e==="rect"&&C$(t)?1:0}class NC extends Ii{clone(){return new NC(null,er(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=U7e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(_x(r)&&m9e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,c)=>`${KBe({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;t=new NC(t,{calculate:l,as:MC(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${$r(this.transform)}`}}function MC(e,t,n){return jt(e,{prefix:t,suffix:"sort_index",...n})}function eB(e,t){return kr(["top","bottom"],t)?"column":kr(["left","right"],t)||e==="row"?"row":"column"}function $C(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ao((t||{})[e],i[e],n.header[e])}function tB(e,t,n,r){const i={};for(const s of e){const o=$C(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Rae=["row","column"],Dae=["header","footer"];function pan(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=tB(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=eB(t,a),u=$I(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Q7e(u,l),...X7e(l,u,s),...J7e(r,i,t,qrn,H9e)}}}function X7e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Y7e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Q7e(e,t){const n=G7e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function man(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Dae)if(n[i])for(const s of n[i]){const o=yan(e,t,i,n,s);o!=null&&r.push(o)}return r}function gan(e,t){const{sort:n}=e;return Mg(n)?{field:jt(n,{expr:"datum"}),order:n.order??"ascending"}:ut(n)?{field:MC(e,t,{expr:"datum"}),order:"ascending"}:{field:jt(e,{expr:"datum"}),order:n??"ascending"}}function $X(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=tB(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=rae({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=eB(t,a);return{text:{signal:l?Sw(Sw(l,"datum.label",u),"datum.value",jt(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Q7e(s,c),...X7e(c,s,o),...J7e(n,e,t,Wrn,q9e)}}function yan(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:d}=tB(["labelOrient"],o.header,a,t);(t==="row"&&!kr(["top","bottom"],d)||t==="column"&&!kr(["left","right"],d))&&(s=$X(o,t,a))}const l=zc(e)&&!LD(e.facet),u=i.axes,c=u?.length>0;if(s||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:gan(o,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const van={column:{start:0,end:1},row:{start:1,end:0}};function ban(e,t){return van[t][e]}function wan(e,t){const n={};for(const r of Ld){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:s,titleOrient:o}=tB(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=eB(r,o),l=ban(s,a);l!==void 0&&(n[a]=l)}}return Pi(n)?void 0:n}function J7e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=$C(o,t?.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Pae(e){return[...SO(e,"width"),...SO(e,"height"),...SO(e,"childWidth"),...SO(e,"childHeight")]}function SO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(xa(o)&&bx(a)){const l=e.scaleName(n);return zc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[kxe(l,a)]:[kxe(l,a),{name:i,update:Z7e(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=EX(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function kxe(e,t){const n=`${e}_step`;return mn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Z7e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ao(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Zf(o)}, ${Zf(s)}) * ${e}_step`}function eze(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function tze(e,t){return wt(e).reduce((n,r)=>({...n,...QS({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>is(i.value),invalidValueRef:void 0})}),{})}function nze(e,t){if(zc(t))return e==="theta"?"independent":"shared";if(tT(t))return"shared";if(jae(t))return lo(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Oae(e,t){const n=e.scale[t],r=lo(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&St(Btn(t)),"independent"):e[r][t]||"shared"}const xan={...Krn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},rze=wt(xan);class _an extends F0{}const Ixe={symbols:Ean,gradient:Can,labels:San,entries:Tan};function Ean(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,c=o.filled&&u!=="trail";let d={...Yen({},n,Hnn),...E7e(n,{filled:c})};const f=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=f===void 0?ize(a.opacity)??o.opacity:void 0;if(d.fill){if(r==="fill"||c&&r===lc)delete d.fill;else if(xt(d.fill,"field"))h?delete d.fill:(d.fill=is(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=is(m??1));else if(ut(d.fill)){const g=FX(a.fill??a.color)??o.fill??(c&&o.color);g&&(d.fill=is(g))}}if(d.stroke){if(r==="stroke"||!c&&r===lc)delete d.stroke;else if(xt(d.stroke,"field")||p)delete d.stroke;else if(ut(d.stroke)){const g=ao(FX(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(d.stroke={value:g})}}if(r!==N0){const g=kt(t)&&oze(n,i,t);g?d.opacity=[{test:g,...is(m??1)},is(l.legend.unselectedOpacity)]:m&&(d.opacity=is(m))}return d={...d,...e},Pi(d)?void 0:d}function Can(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?ize(o.opacity)||s.opacity:void 0;return u&&(a.opacity=is(u)),a={...a,...e},Pi(a)?void 0:a}function San(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=kt(t)?oze(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s;let d;Dw(c)?d=eh({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?d=eh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&kt(t)&&t.timeUnit===void 0&&(d=eh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return Pi(f)?void 0:f}function Tan(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function ize(e){return sze(e,(t,n)=>Math.max(t,n.value))}function FX(e){return sze(e,(t,n)=>ao(t,n.value))}function sze(e,t){if(drn(e))return Ht(e.condition).reduce(t,e.value);if(_h(e))return e.value}function oze(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=Ot(n.field);return r.map(s=>`(!length(data(${Ot(gs(s)+Ow)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Rxe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return f9e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return h9e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Oan(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Nan(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??kan(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>DE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(RE(n)&&Pp(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Aan(t,e)};function Aan(e,t){const n=e.values;if(ut(n))return S9e(t,n);if(mn(n))return n}function kan(e,t,n,r){if(t!=="shape"){const i=FX(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Ian(e){const{legend:t}=e;return ao(t.type,Ran(e))}function Ran({channel:e,timeUnit:t,scaleType:n}){if(RE(e)){if(kr(["quarter","month","day"],t))return"symbol";if(Pp(n))return"gradient"}return"symbol"}function Dan({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Pan(n,t)}function Pan(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Oan({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Pp(i))return n==="horizontal"?r==="top"||r==="bottom"?Dxe(t,"width",o,s):o:Dxe(t,"height",l,a)}function Dxe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Nan(e){if(kr(["quantile","threshold","log","symlog"],e))return"greedy"}function aze(e){const t=Cs(e)?Man(e):jan(e);return e.component.legends=t,t}function Man(e){const{encoding:t}=e,n={};for(const r of[lc,...G9e]){const i=qo(t[r]);!i||!e.getScaleComponent(r)||r===uc&&kt(i)&&i.type===XS||(n[r]=Lan(e,r))}return n}function $an(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Fan(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function Lan(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new _an({},$an(e,t));Lsn(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=qo(i[t]),d=kt(c)?wa(c.timeUnit)?.unit:void 0,f=n.orient||s.legend.orient||"right",h=Ian({legend:n,channel:t,timeUnit:d,scaleType:u}),p=Dan({legend:n,legendType:h,orient:f,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:f,legendType:h,direction:p};for(const _ of rze){if(h==="gradient"&&_.startsWith("symbol")||h==="symbol"&&_.startsWith("gradient"))continue;const E=_ in Rxe?Rxe[_](m):n[_];if(E!==void 0){const S=Fan(E,_,n,e.fieldDef(t));(S||s.legend[_]===void 0)&&a.set(_,E,S)}}const g=n?.encoding??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const E=tze(g[_]??{},e),S=_ in Ixe?Ixe[_](E,b):E;S!==void 0&&!Pi(S)&&(v[_]={...y?.length&&kt(c)?{name:`${gs(c.field)}_legend_${_}`}:{},...y?.length?{interactive:!!y}:{},update:S})}return Pi(v)||a.set("encode",v,!!n?.encoding),a}function jan(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){aze(r);for(const i of wt(r.component.legends))n.legend[i]=Oae(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=lze(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of wt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function lze(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const s of rze){const o=Lv(e.getWithExplicit(s),t.getWithExplicit(s),s,"legend",(a,l)=>{switch(s){case"symbolType":return Ban(a,l);case"title":return DBe(a,l);case"type":return i=!0,Ic("symbol")}return qj(a,l,s,"legend")});e.setWithExplicit(s,o)}return i&&(e.implicit?.encode?.gradient&&b$(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&b$(e.explicit,["encode","gradient"])),e}function Ban(e,t){return t.value==="circle"?t:e}function zan(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function uze(e){const t=e.component.legends,n={};for(const i of wt(t)){const s=e.getScaleComponent(i),o=Oi(s.get("domains"));if(n[o])for(const a of n[o])lze(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ga(n).flat().map(i=>Van(i,e.config)).filter(i=>i!==void 0)}function Van(e,t){const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),s.encode?.symbols){const o=s.encode.symbols.update;o.fill&&o.fill.value!=="transparent"&&!o.stroke&&!s.stroke&&(o.stroke={value:"transparent"});for(const a of G9e)s[a]&&delete o[a]}if(s.title||delete s.title,r!==void 0){let o=r;s.encode?.labels?.update&&mn(s.encode.labels.update.text)&&(o=Sw(r,"datum.label",s.encode.labels.update.text.signal)),zan(s,"labels","text",{signal:o})}return s}}function Uan(e){return tT(e)||jae(e)?Han(e):cze(e)}function Han(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),cze(e))}function cze(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=mn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return kr(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const qan=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class dze extends F0{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function fze(e){e.component.projection=Cs(e)?Wan(e):Kan(e)}function Wan(e){if(e.hasProjection){const t=La(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Gan(e):void 0,s=new dze(e.projectionName(!0),{...La(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Gan(e){const t=[],{encoding:n}=e;for(const r of[[qh,Hh],[sf,Wh]])(qo(n[r[0]])||qo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(uc)&&e.typedFieldDef(uc).type===XS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ts.Main)),t}function Yan(e,t){const n=xoe(qan,i=>!!(!Qt(e.explicit,i)&&!Qt(t.explicit,i)||Qt(e.explicit,i)&&Qt(t.explicit,i)&&$c(e.get(i),t.get(i))));if($c(e.size,t.size)){if(n)return e;if($c(e.explicit,{}))return t;if($c(t.explicit,{}))return e}return null}function Kan(e){if(e.children.length===0)return;let t;for(const r of e.children)fze(r);const n=xoe(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Yan(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new dze(r,t.specifiedProjection,t.size,er(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Xan(e,t,n,r){if(zD(t,n)){const i=Cs(e)?e.axis(n)??e.legend(n)??{}:{},s=jt(t,{expr:"datum"}),o=jt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:jt(t,{binSuffix:"range",forAs:!0}),formula:FD(s,o,i.format,i.formatType,r)}}return{}}function hze(e,t){return`${EBe(e)}_${t}`}function Qan(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Nae(e,t,n){const r=jj(n,void 0)??{},i=hze(r,t);return e.getName(`${i}_bins`)}function Jan(e){return"as"in e}function Pxe(e,t,n){let r,i;Jan(e)?r=Wt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[jt(e,{forAs:!0}),jt(e,{binSuffix:"end",forAs:!0})];const s={...jj(t,void 0)},o=hze(s,e.field),{signal:a,extentSignal:l}=Qan(n,o);if(kj(s.extent)){const c=s.extent;i=q7e(n,c.param,c),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class qp extends Ii{clone(){return new qp(null,er(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(vu(s)&&Xi(s.bin)){const{key:a,binComponent:l}=Pxe(s,s.bin,n);i[a]={...l,...i[a],...Xan(n,s,o,n.config)}}return i},{});return Pi(r)?null:new qp(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Pxe(n,n.bin,r);return new qp(t,{[i]:s})}merge(t,n){for(const r of wt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Dp([...this.bins[r].as,...t.bins[r].as],$r)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ga(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ga(this.bins).map(t=>t.field))}hash(){return`Bin ${$r(this.bins)}`}assemble(){return Ga(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:rf(t.field),as:r,signal:t.signal,...kj(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:rf(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:jt({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Zan(e,t,n,r){const i=Cs(r)?r.encoding[Om(t)]:void 0;if(vu(n)&&Cs(r)&&y9e(n,i,r.markDef,r.config)){e.add(jt(n,{})),e.add(jt(n,{suffix:"end"}));const{mark:s,markDef:o,config:a}=r,l=Fv({fieldDef:n,markDef:o,config:a});FI(s)&&l!==.5&&lo(t)&&(e.add(jt(n,{suffix:Wj})),e.add(jt(n,{suffix:Gj}))),n.bin&&zD(n,t)&&e.add(jt(n,{binSuffix:"range"}))}else if(pBe(t)){const s=hBe(t);e.add(r.getName(s))}else e.add(jt(n));return _x(n)&&Dnn(n.scale?.range)&&e.add(n.scale.range.field),e}function eln(e,t){for(const n of wt(t)){const r=t[n];for(const i of wt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class lh extends Ii{clone(){return new lh(null,new Set(this.dimensions),er(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([jt(o,{forAs:!0})]);else{if(o0(l)||_1(l)){const c=o0(l)?"argmin":"argmax",d=l[c];i[d]??(i[d]={}),i[d][c]=new Set([jt({op:c,field:d},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([jt(o,{forAs:!0})]);Nm(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([jt({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([jt({field:u,aggregate:"max"},{forAs:!0})]))}else Zan(s,a,o,n)}),s.size+wt(i).length===0)?null:new lh(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:l,as:u}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([u||jt(o,{forAs:!0})])):(s[l]??(s[l]={}),(r=s[l])[a]??(r[a]=new Set),s[l][a].add(u||jt(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+wt(s).length===0?null:new lh(t,i,s)}merge(t){return sBe(this.dimensions,t.dimensions)?(eln(this.measures,t.measures),!0):(nnn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...wt(this.measures)])}producedFields(){const t=new Set;for(const n of wt(this.measures))for(const r of wt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${$r({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of wt(this.measures))for(const o of wt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:rf(s));return{type:"aggregate",groupby:[...this.dimensions].map(rf),ops:t,fields:n,as:r}}}class ZS extends Ii{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Ld){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[jt(o),...Xi(a)?[jt(o,{binSuffix:"end"})]:[]],...Mg(l)?{sortField:l}:ut(l)?{sortIndexField:MC(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Ld)this[n]&&(t+=` ${n.charAt(0)}:${$r(this[n])}`);return t}get fields(){const t=[];for(const n of Ld)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Ld)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of M0){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(xa(i)&&bx(s)){const o=nB(this.childModel,n),a=Lae(o);a?t[n]=a:St(Moe(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=$j,field:d}=l;s.push(d),o.push(c),a.push(jt(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Rae){for(const u of Dae){const c=(r[l]&&r[l][u])??[];for(const d of c)if(d.axes?.length>0){s[l]=!0;break}}if(s[l]){const u=`length(data("${this.facet.name}"))`,c=l==="row"?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:c}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Ng,Og])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Oxe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function tln(e,t){const n=Coe(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Oxe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Oxe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return St(dtn(t)),null}function nln(e){const t={};return SM(e.filter,n=>{if(YBe(n)){let r=null;zoe(n)?r=Oc(n.equal):Uoe(n)?r=Oc(n.lte):Voe(n)?r=Oc(n.lt):Hoe(n)?r=Oc(n.gt):qoe(n)?r=Oc(n.gte):Woe(n)?r=n.range[0]:Goe(n)&&(r=(n.oneOf??n.in)[0]),r&&(wx(r)?t[n.field]="date":ci(r)?t[n.field]="number":Wt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function rln(e){const t={};function n(r){DC(r)?t[r.field]="date":r.type==="quantitative"&&jen(r.aggregate)?t[r.field]="number":SC(r.field)>1?r.field in t||(t[r.field]="flatten"):_x(r)&&Mg(r.sort)&&SC(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Cs(e)||zc(e))&&e.forEachFieldDef((r,i)=>{if(vu(r))n(r);else{const s=yx(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Cs(e)){const{mark:r,markDef:i,encoding:s}=e;if(E1(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];kt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function iln(e){const t={};if(Cs(e)&&e.component.selection)for(const n of wt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&SC(i.field)>1&&(t[i.field]="flatten")}return t}class Sl extends Ii{clone(){return new Sl(null,er(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${$r(this._parse)}`}static makeExplicit(t,n,r){let i={};const s=n.data;return!av(s)&&s?.format?.parse&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of wt(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:St($we(a,r[a],l.value)))}for(const a of wt(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:St($we(a,n[a],l)))}const s=new F0(n,r);i.copyAll(s);const o={};for(const a of wt(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return wt(o).length===0||i.parseNothing?null:new Sl(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of wt(this._parse)){const r=this._parse[n];SC(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(wt(this._parse))}dependentFields(){return new Set(wt(this._parse))}assembleTransforms(t=!1){return wt(this._parse).filter(n=>t?SC(n)>1:!0).map(n=>{const r=tln(n,this._parse[n]);return r?{type:"formula",expr:r,as:YS(n)}:null}).filter(n=>n!==null)}}class jv extends Ii{clone(){return new jv(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ch])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ch}}}class GD extends Ii{clone(){return new GD(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${$r(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class YD extends Ii{clone(){return new YD(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${$r(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class $w extends Ii{constructor(t){super(null),t??(t={name:"source"});let n;if(av(t)||(n=t.format?{...ec(t.format,["parse"])}:{}),LI(t))this._data={values:t.values};else if(PC(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];kr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else d7e(t)?this._data={values:[{type:"Sphere"}]}:(u7e(t)||av(t))&&(this._data={});this._generator=av(t),t.name&&(this._name=t.name),n&&!Pi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Nxe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},sln=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},TA;function Mae(e){return e instanceof $w||e instanceof GD||e instanceof YD}class $ae{constructor(){TA.set(this,void 0),Nxe(this,TA,!1,"f")}setModified(){Nxe(this,TA,!0,"f")}get modifiedFlag(){return sln(this,TA,"f")}}TA=new WeakMap;class Cx extends $ae{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Fae extends $ae{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class oln extends Fae{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of wt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class aln extends Fae{constructor(t){super(),this.requiresSelectionId=t&&Tae(t)}run(t){t instanceof jv&&(this.requiresSelectionId&&(Mae(t.parent)||t.parent instanceof lh||t.parent instanceof Sl)||(this.setModified(),t.remove()))}}class lln extends $ae{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Up&&(r=t.producedFields(),_oe(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class uln extends Fae{constructor(){super()}run(t){t instanceof tc&&!t.isRequired()&&(this.setModified(),t.remove())}}class cln extends Cx{run(t){if(!Mae(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Sl)if(t instanceof Sl)this.setModified(),t.merge(n);else{if(Eoe(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class dln extends Cx{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Sl);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of wt(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!Pi(i)){this.setModified();const o=new Sl(t,i);for(const a of n){if(a instanceof Sl)for(const l of wt(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof Sl&&wt(a.parse).length===0&&a.remove()}}}}}class fln extends Cx{run(t){t instanceof tc||t.numChildren()>0||t instanceof ZS||t instanceof $w||(this.setModified(),t.remove())}}class hln extends Cx{run(t){const n=t.children.filter(i=>i instanceof Up),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class pln extends Cx{run(t){const n=t.children.filter(i=>i instanceof lh),r={};for(const i of n){const s=$r(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of wt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class mln extends Cx{constructor(t){super(),this.model=t}run(t){const n=!(Mae(t)||t instanceof JS||t instanceof Sl||t instanceof jv),r=[],i=[];for(const s of t.children)s instanceof qp&&(n&&!Eoe(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof qp?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class gln extends Cx{run(t){const n=[...t.children];if(!CC(n,o=>o instanceof tc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof tc){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof tc)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Sx extends Ii{clone(){return new Sx(null,er(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Dp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??jt(t)}hash(){return`JoinAggregateTransform ${$r(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class FC extends Ii{clone(){return new FC(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,d)=>{const f=Nm(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,m=eae({scaleChannel:d,markDef:s,config:i,scaleType:h,isCountAggregate:Aj(p)});m!=="show"&&m!=="always-valid"&&(u[c.field]=c)}return u},{});return wt(l).length?new FC(t,l):null}dependentFields(){return new Set(wt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${$r(this.filter)}`}assemble(){const t=wt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=jt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${LX(s)}))`):i.type==="quantitative"&&n.push(LX(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function LX(e){return`isValid(${e}) && isFinite(+${e})`}function yln(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=jt(r);return i&&t.push(i),t},[])}function vln(e){return ut(e)&&e.every(t=>Wt(t))&&e.length>1}class Fg extends Ii{clone(){return new Fg(null,er(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),l.push(ao(d.order,"ascending"));const u={field:a,order:l};let c;return vln(s)?c=s:Wt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Fg(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return Eh(p)}).filter(h=>!!h),c=yln(n),d=n.encoding.order;let f;if(ut(d)||kt(d))f=kBe(d);else{const h=v9e(d)?d.sort:o==="y"?"descending":"ascending";f=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Fg(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${$r(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[jt(i,{binSuffix:"mid"})]:[jt(i,{}),jt(i,{binSuffix:"end"})]:[jt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=jt(c,{expr:"datum"}),p=jt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${LX(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:jt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:jt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class eT extends Ii{clone(){return new eT(null,er(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Dp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??jt(t)}hash(){return`WindowTransform ${$r(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>Ooe(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function bln(e){function t(n){if(!(n instanceof ZS)){const r=n.clone();if(r instanceof tc){const i=BX+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof lh||r instanceof Fg||r instanceof eT||r instanceof Sx)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function jX(e){if(e instanceof ZS)if(e.numChildren()===1&&!(e.children[0]instanceof tc)){const t=e.children[0];(t instanceof lh||t instanceof Fg||t instanceof eT||t instanceof Sx)&&t.addDimensions(e.fields),t.swapWithParent(),jX(e)}else{const t=e.model.component.data.main;pze(t);const n=bln(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(jX)}function pze(e){if(e instanceof tc&&e.type===Ts.Main&&e.numChildren()===1){const t=e.children[0];t instanceof ZS||(t.swapWithParent(),pze(e))}}const BX="scale_",TO=5;function zX(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!zX(t.children))return!1}return!0}function If(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Mxe(e,t,n){let r=e.sources,i=!1;return i=If(new uln,r)||i,i=If(new aln(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=If(new fln,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=If(new cln,r)||i,i=If(new mln(t),r)||i,i=If(new lln,r)||i,i=If(new dln,r)||i,i=If(new pln,r)||i,i=If(new hln,r)||i,i=If(new oln,r)||i,i=If(new gln,r)||i),e.sources=r,i}function wln(e,t){zX(e.sources);let n=0,r=0;for(let i=0;i<TO&&Mxe(e,t,!0);i++)n++;e.sources.map(jX);for(let i=0;i<TO&&Mxe(e,t,!1);i++)r++;zX(e.sources),Math.max(n,r)===TO&&St(`Maximum optimization runs(${TO}) reached.`)}class da{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new da(()=>t(n))}}function mze(e){Cs(e)?xln(e):_ln(e)}function xln(e){const t=e.component.scales;for(const n of wt(t)){const r=Cln(e,n);if(t[n].setWithExplicit("domains",r),Tln(e,n),e.component.data.isFaceted){let s=e;for(;!zc(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)xg(a)&&(a.data=BX+a.data.replace(BX,""))}}}function _ln(e){for(const n of e.children)mze(n);const t=e.component.scales;for(const n of wt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Lv(r,o.getWithExplicit("domains"),"domains","scale",VX);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&St(itn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Eln(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=$xe(t,n);if(!i){St(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=$xe(t,n);if(i)return"unaggregated"}return e}function Cln(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Eln(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&qo(r.x2)?qo(r.x)?Lv(py(n,i,e,"x"),py(n,i,e,"x2"),"domain","scale",VX):py(n,i,e,"x2"):t==="y"&&qo(r.y2)?qo(r.y)?Lv(py(n,i,e,"y"),py(n,i,e,"y2"),"domain","scale",VX):py(n,i,e,"y2"):py(n,i,e,t)}function Sln(e,t,n){return e.map(r=>({signal:`{data: ${Bj(r,{timeUnit:n,type:t})}}`}))}function zH(e,t,n){const r=wa(n)?.unit;return t==="temporal"||r?Sln(e,t,r):[e]}function py(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=qo(i[r]),{type:c}=u,d=u.timeUnit,f=lsn({invalid:um("invalid",s,a),isPath:E1(o)});if(Rnn(t)){const m=py(e,void 0,n,r),g=zH(t.unionWith,c,d);return bp([...g,...m.value])}else{if(mn(t))return bp([t]);if(t&&t!=="unaggregated"&&!t9e(t))return bp(zH(t,c,d))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Ic([[0,1]]);const m=n.requestDataName(f);return Ic([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=Nm(r)&&kt(u)?Aln(n,r,e):void 0;if(Mm(u)){const m=zH([u.datum],c,d);return Ic(m)}const p=u;if(t==="unaggregated"){const{field:m}=u;return Ic([{data:n.requestDataName(f),field:jt({field:m,aggregate:"min"})},{data:n.requestDataName(f),field:jt({field:m,aggregate:"max"})}])}else if(Xi(p.bin)){if(xa(e))return Ic(e==="bin-ordinal"?[]:[{data:MI(h)?n.requestDataName(f):n.requestDataName(Ts.Raw),field:n.vgField(r,zD(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!qt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(Xi(m)){const g=Nae(n,p.field,m);return Ic([new da(()=>{const y=n.getSignalName(g);return`[${y}.start, ${y}.stop]`})])}else return Ic([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&kr(["time","utc"],e)){const m=i[Om(r)];if(y9e(p,m,s,a)){const g=n.requestDataName(f),y=Fv({fieldDef:p,fieldDef2:m,markDef:s,config:a}),v=FI(o)&&y!==.5&&lo(r);return Ic([{data:g,field:n.vgField(r,v?{suffix:Wj}:{})},{data:g,field:n.vgField(r,{suffix:v?Gj:"end"})}])}}return Ic(h?[{data:MI(h)?n.requestDataName(f):n.requestDataName(Ts.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function VH(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":$j),...r?{field:rf(r)}:{},...i?{order:i}:{}}}function Tln(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,s=t9e(r)?r:void 0,o=vx(i)&&kj(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function Aln(e,t,n){if(!xa(n))return;const r=e.fieldDef(t),i=r.sort;if(m9e(i))return{op:"min",field:MC(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Mg(i)){const a=s&&!o.has(i.field);return VH(i,a)}else if(lrn(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=s&&!o.has(d);if(o0(c)||_1(c))return VH({field:jt(u),order:l},f);if(Ooe(c)||!c)return VH({op:c,field:d,order:l},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(kr(["ascending",void 0],i))return!0}}function $xe(e,t){const{aggregate:n,type:r}=e;return n?Wt(n)&&!zen.has(n)?{valid:!1,reason:Otn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:Ntn(e)}:{valid:!0}:{valid:!1,reason:Ptn(e)}}function VX(e,t,n,r){return e.explicit&&t.explicit&&St(jtn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function kln(e){const t=Dp(e.map(o=>{if(xg(o)){const{sort:a,...l}=o;return l}return o}),$r),n=Dp(e.map(o=>{if(xg(o)){const a=o.sort;return a!==void 0&&!MI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),$r);if(t.length===0)return;if(t.length===1){const o=e[0];if(xg(o)&&n.length>0){let a=n[0];if(n.length>1){St(Lwe);const l=n.filter(u=>qt(u)&&"op"in u&&u.op!=="min");n.every(u=>qt(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(qt(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Dp(n.map(o=>MI(o)||!("op"in o)||Wt(o.op)&&Qt(Fen,o.op)?o:(St(ztn(o)),!0)),$r);let i;r.length===1?i=r[0]:r.length>1&&(St(Lwe),i=!0);const s=Dp(e.map(o=>xg(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Lae(e){if(xg(e)&&Wt(e.field))return e.field;if(Ven(e)){let t;for(const n of e.fields)if(xg(n)&&Wt(n.field)){if(!t)t=n.field;else if(t!==n.field)return St(Vtn),t}return St(Utn),t}else if(Uen(e)){St(Htn);const t=e.fields[0];return Wt(t)?t:void 0}}function nB(e,t){const r=e.component.scales[t].get("domains").map(i=>(xg(i)&&(i.data=e.lookupDataSource(i.data)),i));return kln(r)}function gze(e){return tT(e)||jae(e)?e.children.reduce((t,n)=>t.concat(gze(n)),Fxe(e)):Fxe(e)}function Fxe(e){return wt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...d}=i,f=Iln(i.range,s,n,e),h=nB(e,n),p=a?bsn(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...c!==void 0?{reverse:c}:{},...d}),t},[])}function Iln(e,t,n,r){if(lo(n)){if(bx(e))return{step:{signal:`${t}_step`}}}else if(qt(e)&&xg(e))return{...e,data:r.lookupDataSource(e.data)};return e}class yze extends F0{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(kr([ja.LOG,ja.TIME,ja.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&kr([ja.LINEAR,ja.SQRT,ja.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(ut(a)){const l=a[0],u=a[a.length-1];if(ci(l)&&ci(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const Rln=["range","scheme"];function Dln(e){const t=e.component.scales;for(const n of Poe){const r=t[n];if(!r)continue;const i=Pln(n,e);r.setWithExplicit("range",i)}}function Lxe(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,s=cc(t),o=e.getName(s);if(qt(r)&&r.binned&&r.step!==void 0)return new da(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(Xi(r)){const a=Nae(e,i,r);return new da(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function Pln(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const d of Rln)if(n[d]!==void 0){const f=wX(s,d),h=n9e(e,d);if(!f)St(MBe(s,d,e));else if(h)St(h);else switch(d){case"range":{const p=n.range;if(ut(p)){if(lo(e))return bp(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return da.fromName(y,g)}return m}))}else if(qt(p))return bp({data:t.requestDataName(Ts.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return bp(p)}case"scheme":return bp(Oln(n[d]))}}const o=e===vs||e==="xOffset"?"width":"height",a=r[o];if(dm(a)){if(lo(e))if(xa(s)){const d=bze(a,t,e);if(d)return bp({step:d})}else St($Be(o));else if(ND(e)){const d=e===g1?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const p=wze(a,s);if(p)return bp(p)}}}const{rangeMin:l,rangeMax:u}=n,c=Nln(e,t);return(l!==void 0||u!==void 0)&&wX(s,"rangeMin")&&ut(c)&&c.length===2?bp([l??c[0],u??c[1]]):Ic(c)}function Oln(e){return Inn(e)?{scheme:e.name,...ec(e,["name"])}:{scheme:e}}function vze(e,t,n,{center:r}={}){const i=cc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Ca&&xh(n)?r?[da.fromName(a=>`${o(a)}/2`,s),da.fromName(a=>`-${o(a)}/2`,s)]:[da.fromName(o,s),0]:r?[da.fromName(a=>`-${o(a)}/2`,s),da.fromName(a=>`${o(a)}/2`,s)]:[0,da.fromName(o,s)]}function Nln(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=qo(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case vs:case Ca:{if(kr(["point","band"],l)){const d=xze(e,n,r.view);if(dm(d))return{step:bze(d,t,e)}}return vze(e,t,l)}case g1:case KS:return Mln(e,t,l);case O0:{const d=Lln(i,r),f=jln(i,n,t,r);return kC(l)?Fln(d,f,$ln(l,r,u,e)):[d,f]}case yf:return[0,Math.PI*2];case gx:return[0,360];case Uh:return[0,new da(()=>{const d=t.getSignalName(zc(t.parent)?"child_width":"width"),f=t.getSignalName(zc(t.parent)?"child_height":"height");return`min(${d},${f})/2`})];case y1:return{step:1e3/r.scale.framesPerSecond};case w1:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case x1:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case uc:return"symbol";case lc:case Dm:case Pm:return l==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case N0:case v1:case b1:return[r.scale.minOpacity,r.scale.maxOpacity]}}function bze(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=koe(n),o=r[s];if(K9e({step:e,offsetIsDiscrete:rr(o)&&XBe(o.type)})==="offset"&&I9e(r,s)){const l=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const f=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${f}, ${h})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Gen(d)})`}}else return e.step}function wze(e,t){if(K9e({step:e,offsetIsDiscrete:xa(t)})==="offset")return{step:e.step}}function Mln(e,t,n){const r=e===g1?"x":"y",i=t.getScaleComponent(r);if(!i)return vze(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=xze(r,t.size,t.config.view);if(dm(u)){const c=wze(u,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(kt(u)&&u.timeUnit){const c=WBe(u.timeUnit,p=>`scale('${o}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=Fv({fieldDef:u,markDef:a,config:l})-.5,h=f!==0?` + ${f}`:"";if(d){const p=mn(d)?`${d.signal}/2`+h:`${d/2+f}`,m=mn(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return rBe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function xze(e,t,n){const r=e===vs?"width":"height",i=t[r];return i||k$(n,r)}function $ln(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ut(n)?n.length+1:(St(Ztn(r)),3)}}function Fln(e,t,n){const r=()=>{const i=Zf(t),s=Zf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return mn(t)?new da(r):{signal:r()}}function Lln(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Ij("size",e))}const jxe=.95;function jln(e,t,n,r){const i={x:Lxe(n,"x"),y:Lxe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Bxe(t,i,r.view);return ci(s)?s-1:new da(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Bxe(t,i,r.view);return ci(s)?Math.pow(jxe*s,2):new da(()=>`pow(${jxe} * ${s.signal}, 2)`)}}throw new Error(Ij("size",e))}function Bxe(e,t,n){const r=dm(e.width)?e.width.step:CX(n,"width"),i=dm(e.height)?e.height.step:CX(n,"height");return t.x||t.y?new da(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function _ze(e,t){Cs(e)?Bln(e,t):Cze(e,t)}function Bln(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of wt(n)){const l=o[a],u=n[a],c=e.getScaleComponent(a),d=qo(i[a]),f=l[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=wX(h,t),y=n9e(a,t);if(f!==void 0&&(g?y&&St(y):St(MBe(h,t,a))),g&&y===void 0)if(f!==void 0){const v=d.timeUnit,b=d.type;switch(t){case"domainMax":case"domainMin":wx(l[t])||b==="temporal"||v?u.set(t,{signal:Bj(l[t],{type:b,timeUnit:v})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const v=xt(zxe,t)?zxe[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:R9e(i,a),hasSecondaryRangeChannel:!!i[Om(a)]}):r.scale[t];v!==void 0&&u.set(t,v,!1)}}}const zxe={bins:({model:e,fieldOrDatumDef:t})=>kt(t)?zln(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Vln(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Uln(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Hln(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>qln(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Wln(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=kt(e)?e.sort:void 0;return Gln(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Yln(e,t,n,r,i,s.scale,o)};function Eze(e){Cs(e)?Dln(e):Cze(e,"range")}function Cze(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?Eze(r):_ze(r,t);for(const r of wt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Lv(i,a,t,"scale",l7e((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function zln(e,t){const n=t.bin;if(Xi(n)){const r=Nae(e,t.field,n);return new da(()=>e.getSignalName(r))}else if($a(n)&&vx(n)&&n.step!==void 0)return{step:n.step}}function Vln(e,t){if(kr([lc,Dm,Pm],e)&&t!=="nominal")return"hcl"}function Uln(e,t,n,r,i,s){if(!(Eh(s)?.bin||ut(n)||i!=null||r!=null||kr([ja.TIME,ja.UTC],e)))return lo(t)?!0:void 0}function Hln(e,t,n,r,i,s){if(lo(e)){if(Pp(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(kt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ja.POINT)return n.pointPadding}}function qln(e,t,n,r,i,s=!1){if(e===void 0){if(lo(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:c}=i;return s?c:ao(o,n==="bar"?a:n==="tick"?u:l)}else if(ND(t)&&r===ja.BAND)return i.offsetBandPaddingInner}}function Wln(e,t,n,r,i,s=!1){if(e===void 0){if(lo(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ja.BAND)return ao(o,mn(r)?{signal:`${r.signal}/2`}:r/2)}else if(ND(t)){if(n===ja.POINT)return .5;if(n===ja.BAND)return i.offsetBandPaddingOuter}}}function Gln(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return xh(e)&&t==="descending"?mn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(xh(e)&&t==="descending")return!0}function Yln(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&xh(i)){if(ut(n)){const l=n[0],u=n[n.length-1];if(ci(l)&&l<=0&&ci(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!kC(i))return!0;if(!(kt(t)&&t.bin)&&kr([...M0,...ken],e)){const{orient:l,type:u}=r;return kr(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:kr(["bar","area"],u)&&!o?!0:s?.zero}return!1}function Kln(e,t,n,r,i=!1){const s=Xln(t,n,r,i),{type:o}=e;return Nm(t)?o!==void 0?$nn(t,o)?kt(n)&&!Mnn(o,n.type)?(St(Ftn(o,s)),s):o:(St($tn(t,o,s)),s):s:null}function Xln(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(RE(e)||AH(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&St(kH(e,"ordinal")),"ordinal";if(TH(e))return"band";if(lo(e)||ND(e)){if(kr(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Doe)return"band";const i=n[cc(e)];return Rw(i)||RC(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return RE(e)?"time":AH(e)==="discrete"?(St(kH(e,"temporal")),"ordinal"):kt(t)&&t.timeUnit&&wa(t.timeUnit).utc?"utc":TH(e)?"band":"time";case"quantitative":return RE(e)?kt(t)&&Xi(t.bin)?"bin-ordinal":"linear":AH(e)==="discrete"?(St(kH(e,"quantitative")),"ordinal"):TH(e)?"band":"linear";case"geojson":return}throw new Error(OBe(t.type))}function Qln(e,{ignoreRange:t}={}){Sze(e),mze(e);for(const n of Nnn)_ze(e,n);t||Eze(e)}function Sze(e){Cs(e)?e.component.scales=Jln(e):e.component.scales=eun(e)}function Jln(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Poe){const o=qo(t[s]);if(o&&n===s9e&&s===uc&&o.type===XS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=R9e(t,s),u=Kln(a,s,o,r,l);i[s]=new yze(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const Zln=l7e((e,t)=>Bwe(e)-Bwe(t));function eun(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){Sze(s);for(const o of wt(s.component.scales))if((t=i.scale)[o]??(t[o]=nze(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?Cnn(a.value,l.value)?r[o]=Lv(a,l,"type","scale",Zln):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of wt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new yze(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class UH{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Cs(e){return e?.type==="unit"}function zc(e){return e?.type==="facet"}function jae(e){return e?.type==="concat"}function tT(e){return e?.type==="layer"}class Bae{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=La(a),this.name=t.name??i,this.title=_y(t.title)?{text:t.title}:t.title?La(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new UH,this.projectionNameMap=r?r.projectionNameMap:new UH,this.signalNameMap=r?r.signalNameMap:new UH,this.data=t.data,this.description=t.description,this.transforms=Xin(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:ein(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Fj(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new F0,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?er(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Qln(this)}parseProjection(){fze(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){aze(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of wt(r)){const o=r[s];o!==void 0&&(i[s]=is(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=is(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Pi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=wan(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Ld)t[r].title&&n.push(pan(this,r));for(const r of Rae)n=n.concat(man(this,r));return n}assembleAxes(){return tan(this.component.axes,this.config)}assembleLegends(){return uze(this)}assembleProjections(){return Uan(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...CBe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return kr(["unit","layer"],this.type)?kr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Pi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||zc(this.parent)?gze(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return gs((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ts[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(zc(this.parent)){const n=eze(t),r=Tj(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(xa(s)&&bx(o)){const a=i.get("name"),l=nB(this,r),u=Lae(l);if(u){const c=jt({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Z7e(a,i,c)}}else return St(Moe(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(gBe(t)&&Nm(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Jen(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class Tze extends Bae{vgField(t,n={}){const r=this.fieldDef(t);if(r)return jt(r,n)}reduceFieldDef(t,n){return Irn(this.getMapping(),(r,i,s)=>{const o=Eh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){uae(this.getMapping(),(r,i)=>{const s=Eh(r);s&&t(s,i)},n)}}class rB extends Ii{clone(){return new rB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=er(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${$r(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class iB extends Ii{clone(){return new iB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=er(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${$r(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class sB extends Ii{clone(){return new sB(this.parent,er(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=er(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${$r(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class oB extends Ii{clone(){return new oB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=er(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${$r(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class OE extends Ii{clone(){return new OE(null,er(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[qh,Hh],[sf,Wh]]){const s=i.map(o=>{const a=qo(n.encoding[o]);return kt(a)?a.field:Mm(a)?{expr:`${a.datum}`}:_h(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new OE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(uc)){const i=n.typedFieldDef(uc);i.type===XS&&(t=new OE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Wt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${$r(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class zI extends Ii{clone(){return new zI(null,this.projection,er(this.fields),er(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[qh,Hh],[sf,Wh]]){const i=r.map(o=>{const a=qo(n.encoding[o]);return kt(a)?a.field:Mm(a)?{expr:`${a.datum}`}:_h(a)?{expr:`${a.value}`}:void 0}),s=r[0]===sf?"2":"";(i[0]||i[1])&&(t=new zI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Wt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${$r(this.fields)} ${$r(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Zb extends Ii{clone(){return new Zb(null,er(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Zb(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(kt(i)&&kt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:c,keyvals:d}=o.impute,f=O9e(n.mark,r);return new Zb(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${$r(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:Din(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class aB extends Ii{clone(){return new aB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=er(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${$r(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class VI extends Ii{clone(){return new VI(null,er(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Pin(o)){let l=Ize(o.data,s);l||(l=new $w(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new tc(l,u,Ts.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(Oin(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(gs(l),l)}catch{throw new Error(ntn(l))}if(a=u.materialized,!a)throw new Error(rtn(l))}return new VI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${$r({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ht(this.transform.as)}:{}};else{let n=this.transform.as;Wt(n)||(St(ptn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class lB extends Ii{clone(){return new lB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=er(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${$r(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class uB extends Ii{clone(){return new uB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=er(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${$r(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class cB extends Ii{clone(){return new cB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Dp((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${$r(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class dB extends Ii{clone(){return new dB(null,er(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${$r(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Aze(e){let t=0;function n(r,i){if(r instanceof $w&&!r.isGenerator&&!PC(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Sl&&(r.parent instanceof $w&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof ZS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof GD||r instanceof YD||r instanceof FC||r instanceof JS||r instanceof NC||r instanceof zI||r instanceof lh||r instanceof VI||r instanceof eT||r instanceof Sx||r instanceof oB||r instanceof sB||r instanceof rB||r instanceof aB||r instanceof lB||r instanceof uB||r instanceof jv||r instanceof dB||r instanceof cB||r instanceof iB)&&i.transform.push(r.assemble()),(r instanceof qp||r instanceof Up||r instanceof Zb||r instanceof Fg||r instanceof OE)&&i.transform.push(...r.assemble()),r instanceof tc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof tc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof tc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function tun(e){const t=[],n=Aze(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function nun(e,t){const n=[],r=Aze(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function run(e){return e==="top"||e==="left"||mn(e)?"header":"footer"}function iun(e){for(const t of Ld)sun(e,t);Vxe(e,"x"),Vxe(e,"y")}function sun(e,t){const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const o=n[t],a=$C("title",null,r,t);let l=DE(o,r,{allowDisabling:!0,includeDefault:a===void 0||!!a});i.component.layoutHeaders[t].title&&(l=ut(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const u=$C("labelOrient",o.header,r,t),c=o.header!==null?ao(o.header?.labels,r.header.labels,!0):!1,d=kr(["bottom","right"],u)?"footer":"header";s.layoutHeaders[t]={title:o.header!==null?l:null,facetFieldDef:o,[d]:t==="facet"?[]:[kze(e,t,c)]}}}function kze(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Vxe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Oae(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=run(a.get("orient"));o[l]??(o[l]=[kze(e,s,!1)]);const u=SA(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function oun(e){zae(e),O$(e,"width"),O$(e,"height")}function aun(e){zae(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";O$(e,t),O$(e,n)}function zae(e){for(const t of e.children)t.parseLayoutSize()}function O$(e,t){const n=eze(t),r=Tj(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??nze(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Lv(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function lun(e){const{size:t,component:n}=e;for(const r of M0){const i=cc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,dm(s)?"step":s,!0)}else{const s=uun(e,i);n.layoutSize.set(i,s,!1)}}}function uun(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(xa(s)){const a=k$(r.view,t);return bx(o)||dm(a)?"step":a}else return EX(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return EX(r.view,t);{const s=k$(r.view,t);return dm(s)?s.step:s}}}function UX(e,t,n){return jt(t,{suffix:`by_${jt(e)}`,...n})}class hk extends Tze{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Wae(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!LD(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=wt(t),r={};for(const i of n){if(![Og,Ng].includes(i)){St(Ij(i,"facet"));break}const s=t[i];if(s.field===void 0){St(vX(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=lae(t,n);return r.header?r.header=La(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return xt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=fB(this),this.child.parseData()}parseLayoutSize(){zae(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>Hp(t))&&Foe($oe)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),iun(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Ld)for(const r of Dae){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=$C("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=eB(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s?.[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof hk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof hk?{...this.channelHasField("column")?{encode:{update:{columns:{field:jt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof hk){if(this.child.channelHasField("column")){const i=jt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of M0){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(xa(o)&&bx(a)){const l=nB(this.child,i),u=Lae(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):St(Moe(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Ld){const d=this.facet[c];if(d){l.push(jt(d));const{bin:f,sort:h}=d;if(Xi(f)&&l.push(jt(d,{binSuffix:"end"})),Mg(h)){const{field:p,op:m=$j}=h,g=UX(d,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(ut(h)){const p=MC(d,c);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Mg(r.sort)?[UX(r,r.sort,{expr:"datum"})]:ut(r.sort)?[MC(r,t,{expr:"datum"})]:[jt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Mg(i)?i.order:!ut(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return $X(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of Rae)if(t[i]){const s=$C("labelOrient",t[i]?.header,n,i);if(r[i].includes(s))return $X(t[i],i,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=tun(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Ld.map(l=>this.facetSortFields(l)).flat(),order:Ld.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(msn(this,[]))}]}getMapping(){return this.facet}}function cun(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Mg(s.sort)){const{field:o,op:a=$j}=s.sort;e=i=new Sx(e,{joinaggregate:[{op:a,field:o,as:UX(s,s.sort,{forAs:!0})}],groupby:[jt(s)]})}return i}return null}function Ize(e,t){for(const n of t){const r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const i=e.format?.mesh,s=r.format?.feature;if(i&&s)continue;const o=e.format?.feature;if((o||s)&&o!==s)continue;const a=r.format?.mesh;if(!((i||a)&&i!==a)){if(LI(e)&&LI(r)){if($c(e.values,r.values))return n}else if(PC(e)&&PC(r)){if(e.url===r.url)return n}else if(u7e(e)&&e.name===n.dataName)return n}}return null}function dun(e,t){if(e.data||!e.parent){if(e.data===null){const r=new $w({values:[]});return t.push(r),r}const n=Ize(e.data,t);if(n)return av(e.data)||(n.data.format=iBe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new $w(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function fun(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(Uin(i))o=e=new NC(e,i),s="derived";else if(wae(i)){const a=nln(i);o=e=Sl.makeWithAncestors(e,{},a,n)??e,e=new JS(e,t,i.filter)}else if(i7e(i))o=e=qp.makeFromTransform(e,i,t),s="number";else if(qin(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Sl(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Up.makeFromTransform(e,i);else if(Win(i))o=e=lh.makeFromTransform(e,i),s="number",Tae(t)&&(e=new jv(e));else if(r7e(i))o=e=VI.make(e,t,i,r++),s="derived";else if(Bin(i))o=e=new eT(e,i),s="number";else if(zin(i))o=e=new Sx(e,i),s="number";else if(Gin(i))o=e=Fg.makeFromTransform(e,i),s="derived";else if(Yin(i))o=e=new oB(e,i),s="derived";else if(Kin(i))o=e=new iB(e,i),s="derived";else if(Vin(i))o=e=new sB(e,i),s="derived";else if(Nin(i))o=e=new cB(e,i),s="derived";else if(jin(i))e=new dB(e,i);else if(Hin(i))o=e=Zb.makeFromTransform(e,i),s="derived";else if(Min(i))o=e=new rB(e,i),s="derived";else if($in(i))o=e=new lB(e,i),s="derived";else if(Fin(i))o=e=new uB(e,i),s="derived";else if(Lin(i))o=e=new aB(e,i),s="derived";else{St(htn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function fB(e){let t=dun(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(av(i)||PC(i)||LI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new asn;av(i)?(c7e(i)?t=new YD(t,i.sequence):xae(i)&&(t=new GD(t,i.graticule)),o.parseNothing=!0):i?.format?.parse===null&&(o.parseNothing=!0),t=Sl.makeExplicit(t,e,o)??t,t=new jv(t);const a=e.parent&&tT(e.parent);(Cs(e)||zc(e))&&a&&(t=qp.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=fun(t,e,o));const l=iln(e),u=rln(e);t=Sl.makeWithAncestors(t,{},{...l,...u},o)??t,Cs(e)&&(t=OE.parseAll(t,e),t=zI.parseAll(t,e)),(Cs(e)||zc(e))&&(a||(t=qp.makeFromEncoding(t,e)??t),t=Up.makeFromEncoding(t,e)??t,t=NC.parseAllForSortIndex(t,e));const c=t=AO(Ts.Raw,e,t);if(Cs(e)){const g=lh.makeFromEncoding(t,e);g&&(t=g,Tae(e)&&(t=new jv(t))),t=Zb.makeFromEncoding(t,e)??t,t=Fg.makeFromEncoding(t,e)??t}let d,f;if(Cs(e)){const{markDef:g,mark:y,config:v}=e,b=Di("invalid",g,v),{marks:_,scales:E}=f=f7e({invalid:b,isPath:E1(y)});_!==E&&E==="include-invalid-values"&&(d=t=AO(Ts.PreFilterInvalid,e,t)),_==="exclude-invalid-values"&&(t=FC.make(t,e,f)??t)}const h=t=AO(Ts.Main,e,t);let p;if(Cs(e)&&f){const{marks:g,scales:y}=f;g==="include-invalid-values"&&y==="exclude-invalid-values"&&(t=FC.make(t,e,f)??t,p=t=AO(Ts.PostFilterInvalid,e,t))}Cs(e)&&Zon(e,h);let m=null;if(zc(e)){const g=e.getName("facet");t=cun(t,e.facet)??t,m=new ZS(t,e,g,h.getSource()),n[g]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:d,postFilterInvalid:p}}function AO(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new tc(n,s,e,i);return r[s]=o,o}class hun extends Bae{constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&St(ctn),this.children=this.getChildren(t).map((s,o)=>Wae(s,this,this.getName(`concat_${o}`),void 0,i))}parseData(){this.component.data=fB(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of wt(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Hp(t))&&Foe($oe)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Uj(t)?t.vconcat:vae(t)?t.hconcat:t.concat}parseLayoutSize(){aun(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Pae(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function pun(e){return e===!1||e===null}const mun={disable:1,gridScale:1,scale:1,...A9e,labelExpr:1,encode:1},Rze=wt(mun);class Vae extends F0{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Vae(er(this.explicit),er(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!pun(this.get(t))}hasOrientSignalRef(){return mn(this.explicit.orient)}}function gun(e,t,n){const{encoding:r,config:i}=e,s=qo(r[t])??qo(r[Om(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if(Dw(l))return{text:eh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(IC(s)==="quantitative"){if(RC(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:eh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:eh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(IC(s)==="temporal"&&i.timeFormatType&&kt(s)&&!s.timeUnit)return{text:eh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function yun(e){return M0.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Cun(n,e)]),t),{})}const vun={bottom:"top",top:"bottom",left:"right",right:"left"};function bun(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of wt(i.component.axes))n.axis[s]=Oae(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=wun(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of M0){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!mn(a)){if(r[a]>0&&!l){const u=vun[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function wun(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=xun(i,s)}}}else return t.map(n=>n.clone());return e}function xun(e,t){for(const n of Rze){const r=Lv(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return DBe(i,s);case"gridScale":return{explicit:i.explicit,value:ao(i.value,s.value)}}return qj(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function _un(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(mn(n.labelAngle)?n.labelAngle:$I(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===K7e(r,i))return!0}return e===n[t]}const Eun=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Cun(e,t){let n=t.axis(e);const r=new Vae,i=qo(t.encoding[e]),{mark:s,config:o}=t,a=n?.orient||o[e==="x"?"axisX":"axisY"]?.orient||o.axis?.orient||uan(e),l=t.getScaleComponent(e).get("type"),u=nan(e,l,a,t.config),c=n!==void 0?!n:NX("disable",o.style,n?.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const d=oan(i,n,e,o.style,u),f=h9e(n.formatType,i,l),h=f9e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:s,config:o};for(const y of Rze){const v=y in Axe?Axe[y](p):Gwe(y)?n[y]:void 0,b=v!==void 0,_=_un(v,y,n,t,e);if(b&&_)r.set(y,v,_);else{const{configValue:E=void 0,configFrom:S=void 0}=Gwe(y)&&y!=="values"?NX(y,o.style,n.style,u):{},T=E!==void 0;b&&!T?r.set(y,v,_):(S!=="vgAxisConfig"||Eun.has(y)&&T||VD(E)||mn(E))&&r.set(y,E,!1)}}const m=n.encoding??{},g=T9e.reduce((y,v)=>{if(!r.hasAxisPart(v))return y;const b=tze(m[v]??{},t),_=v==="labels"?gun(t,e,b):b;return _!==void 0&&!Pi(_)&&(y[v]={update:_}),y},{});return Pi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Sun({encoding:e,size:t}){for(const n of M0){const r=cc(n);dm(t[r])&&Hy(e[n])&&(delete t[r],St($Be(r)))}return t}const Tun={vgMark:"arc",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ou("x",e,{defaultPos:"mid"}),...ou("y",e,{defaultPos:"mid"}),...a0(e,"radius"),...a0(e,"theta")})},Aun={vgMark:"area",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...I$("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...I$("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Sae(e)})},kun={vgMark:"rect",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...a0(e,"x"),...a0(e,"y")})},Iun={vgMark:"shape",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&kt(n)&&n.type===XS?{field:jt(n,{expr:"datum"})}:{}}]}},Run={vgMark:"image",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...a0(e,"x"),...a0(e,"y"),...Eae(e,"url")})},Dun={vgMark:"line",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ou("x",e,{defaultPos:"mid"}),...ou("y",e,{defaultPos:"mid"}),...za("size",e,{vgChannel:"strokeWidth"}),...Sae(e)})},Pun={vgMark:"trail",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ou("x",e,{defaultPos:"mid"}),...ou("y",e,{defaultPos:"mid"}),...za("size",e),...Sae(e)})};function Uae(e,t){const{config:n}=e;return{...vf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ou("x",e,{defaultPos:"mid"}),...ou("y",e,{defaultPos:"mid"}),...za("size",e),...za("angle",e),...Oun(e,n,t)}}function Oun(e,t,n){return n?{shape:{value:n}}:za("shape",e)}const Nun={vgMark:"symbol",encodeEntry:e=>Uae(e)},Mun={vgMark:"symbol",encodeEntry:e=>Uae(e,"circle")},$un={vgMark:"symbol",encodeEntry:e=>Uae(e,"square")},Fun={vgMark:"rect",encodeEntry:e=>({...vf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...a0(e,"x"),...a0(e,"y")})},Lun={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...vf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...I$("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...I$("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...za("size",e,{vgChannel:"strokeWidth"})}}},jun={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...vf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ou("x",e,{defaultPos:"mid"}),...ou("y",e,{defaultPos:"mid"}),...Eae(e),...za("size",e,{vgChannel:"fontSize"}),...za("angle",e),...gxe("align",Bun(e.markDef,n,t)),...gxe("baseline",zun(e.markDef,n,t)),...ou("radius",e,{defaultPos:null}),...ou("theta",e,{defaultPos:null})}}};function Bun(e,t,n){if(Di("align",e,n)===void 0)return"center"}function zun(e,t,n){if(Di("baseline",e,n)===void 0)return"middle"}const Vun={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...vf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...a0(e,i),...ou(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:is(Di("thickness",n,t))}}},kO={arc:Tun,area:Aun,bar:kun,circle:Mun,geoshape:Iun,image:Run,line:Dun,point:Nun,rect:Fun,rule:Lun,square:$un,text:jun,tick:Vun,trail:Pun};function Uun(e){if(kr([Nj,Pj,Bnn],e.mark)){const t=O9e(e.mark,e.encoding);if(t.length>0)return Hun(e,t)}else if(e.mark===Oj){const t=gX.some(n=>Di(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return qun(e)}return Hae(e)}const Uxe="faceted_path_";function Hun(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Uxe+e.requestDataName(Ts.Main),data:e.requestDataName(Ts.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Hae(e,{fromPrefix:Uxe})}]}const Hxe="stack_group_";function qun(e){const[t]=Hae(e,{fromPrefix:Hxe}),n=e.scaleName(e.stack.fieldChannel),r=(u={})=>e.vgField(e.stack.fieldChannel,u),i=(u,c)=>{const d=[r({prefix:"min",suffix:"start",expr:c}),r({prefix:"max",suffix:"start",expr:c}),r({prefix:"min",suffix:"end",expr:c}),r({prefix:"max",suffix:"end",expr:c})];return`${u}(${d.map(f=>`scale('${n}',${f})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...EC(t.encode.update,["y","yc","y2","height",...gX]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ec(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...EC(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ec(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of gX){const c=um(u,e.markDef,e.config);t.encode.update[u]?(s[u]=t.encode.update[u],delete t.encode.update[u]):c&&(s[u]=is(c)),c&&(t.encode.update[u]={value:0})}const a=[];if(e.stack.groupbyChannels?.length>0)for(const u of e.stack.groupbyChannels){const c=e.fieldDef(u),d=jt(c);d&&a.push(d),(c?.bin||c?.timeUnit)&&a.push(jt(c,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,c)=>{if(t.encode.update[c])return{...u,[c]:t.encode.update[c]};{const d=um(c,e.markDef,e.config);return d!==void 0?{...u,[c]:is(d)}:u}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ts.Main),name:Hxe+e.requestDataName(Ts.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Wun(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!ut(o)&&_h(o)&&pX(o.value)||!o&&pX(Di("order",i,s)))){if((ut(o)||kt(o))&&!n)return kBe(o,{expr:"datum"});if(E1(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(kt(l))return{field:a}}}}function Hae(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ao(r.clip,Gun(e),Yun(e)),a=TBe(r),l=i.key,u=Wun(e),c=Kun(e),d=Di("aria",r,s),f=kO[n].postEncodingTransform?kO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:kO[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(Ts.Main)},encode:{update:kO[n].encodeEntry(e)},...f?{transform:f}:{}}]}function Gun(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function Yun(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Kun(e){if(!e.component.selection)return null;const t=wt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=wt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Dze extends Tze{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Kwe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=u=>(u.from?.data&&(u.from.data=this.lookupDataSource(u.from.data),"time"in this.encoding&&(u.from.data=u.from.data+p7e)),u.from?.facet?.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u);const o=cm(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Ein(o,s,{graticule:t.data&&xae(t.data)}));const l=this.encoding=Arn(t.encoding||{},a,o.filled,s);this.markDef=e7e(o,l,s),this.size=Sun({encoding:l,size:Kwe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=Z9e(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>gae(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===s9e,r=t&&ben.some(i=>rr(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Poe.reduce((r,i)=>{const s=qo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=La(t);return ut(n)&&(i.domain=n.map(Oc)),ut(r)&&(i.range=r.map(Oc)),i}initAxes(t){return M0.reduce((n,r)=>{const i=t[r];if(rr(i)||r===vs&&rr(t.x2)||r===Ca&&rr(t.y2)){const s=rr(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=wt(t),r={};for(const i of n){const s=t[i];r[i]=VD(s)?SBe(s):Oc(s)}return r}initLegends(t){return Ren.reduce((n,r)=>{const i=qo(t[r]);if(i&&Pen(r)){const s=i.legend;n[r]=s&&La(s)}return n},{})}parseData(){this.component.data=fB(this)}parseLayoutSize(){lun(this)}parseSelections(){this.component.selection=Jon(this,this.selection)}parseMarkGroup(){this.component.mark=Uun(this)}parseAxesAndHeaders(){this.component.axes=yun(this)}assembleSelectionTopLevelSignals(t){return gsn(this,t)}assembleSignals(){return[...W7e(this),...psn(this,[])]}assembleSelectionData(t){return ysn(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Pae(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!tT(this.parent))&&(t=v7e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Qb(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Eh(n)}typedFieldDef(t){const n=this.fieldDef(t);return vu(n)?n:null}}class qae extends Bae{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(Hj(a))return new qae(a,this,this.getName(`layer_${l}`),o,s);if($0(a))return new Dze(a,this,this.getName(`layer_${l}`),o,s);throw new Error(Noe(a))})}parseData(){this.component.data=fB(this);for(const t of this.children)t.parseData()}parseLayoutSize(){oun(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of wt(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>Hp(t))&&Foe($oe)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){bun(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),W7e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Pae(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Ht(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return vsn(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),uze(this))}}function Wae(e,t,n,r,i){if(Fj(e))return new hk(e,t,n,i);if(Hj(e))return new qae(e,t,n,r,i);if($0(e))return new Dze(e,t,n,r,i);if(Qrn(e))return new hun(e,t,n,i);throw new Error(Noe(e))}function Xun(e,t={}){t.logger&&enn(t.logger),t.fieldTitle&&E9e(t.fieldTitle);try{const n=J9e(FS(t.config,e.config)),r=a7e(e,n),i=Wae(r,null,"",void 0,n);return i.parse(),wln(i.component.data,i),{spec:Jun(i,Qun(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&tnn(),t.fieldTitle&&vrn()}}function Qun(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Wt(t)&&(t={type:t}),i&&s&&isn(t.type)){if(i==="step"&&s==="step")St(Owe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";St(Owe(Tj(o)));const a=o==="width"?"height":"width";t.type=ssn(a)}}return{...wt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...axe(n,!1),...axe(e,!0)}}function Jun(e,t,n={},r){const i=e.config?din(e.config):void 0,s=nun(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:f,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...l?{title:l}:{},...u?{style:u}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...Y9e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Zun=hen.version,ecn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:SC,accessPathWithDatum:Coe,accessWithDatumToUnescapedPath:Ti,compile:Xun,contains:kr,deepEqual:$c,deleteNestedProperty:b$,duplicate:er,entries:Mv,every:xoe,fieldIntersection:Eoe,flatAccessWithDatum:oBe,getFirstDefined:ao,hasIntersection:_oe,hasProperty:xt,hash:$r,internalField:uBe,isBoolean:MI,isEmpty:Pi,isEqual:men,isInternalField:cBe,isNullOrFalse:pX,isNumeric:wj,keys:wt,logicalExpr:ck,mergeDeep:iBe,never:rBe,normalize:a7e,normalizeAngle:$I,omit:ec,pick:EC,prefixGenerator:mX,removePathFromField:YS,replaceAll:Sw,replacePathInField:rf,resetIdCounter:yen,setEqual:sBe,some:CC,stringify:Oi,titleCase:DD,unique:Dp,uniqueId:lBe,vals:Ga,varName:gs,version:Zun},Symbol.toStringTag,{value:"Module"}));var IO={},qxe;function tcn(){if(qxe)return IO;qxe=1,Object.defineProperty(IO,"__esModule",{value:!0});function e(t){var n=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,r=n.exec(t).slice(1,3),i=r[0],s=r[1];return{library:i,version:s}}return IO.default=e,IO}var ncn=tcn();const Pze=Ao(ncn);var rcn="2.15.0",icn={version:rcn};const T_="#fff",Wxe="#888",scn={background:"#333",view:{stroke:Wxe},title:{color:T_,subtitleColor:T_},style:{"guide-label":{fill:T_},"guide-title":{fill:T_}},axis:{domainColor:T_,gridColor:Wxe,tickColor:T_}},K1="#4572a7",ocn={background:"#fff",arc:{fill:K1},area:{fill:K1},line:{stroke:K1,strokeWidth:2},path:{stroke:K1},rect:{fill:K1},shape:{stroke:K1},symbol:{fill:K1,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},X1="#30a2da",HH="#cbcbcb",acn="#999",lcn="#333",Gxe="#f0f0f0",Yxe="#333",ucn={arc:{fill:X1},area:{fill:X1},axis:{domainColor:HH,grid:!0,gridColor:HH,gridWidth:1,labelColor:acn,labelFontSize:10,titleColor:lcn,tickColor:HH,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Gxe,group:{fill:Gxe},legend:{labelColor:Yxe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Yxe,titleFontSize:14,titlePadding:10},line:{stroke:X1,strokeWidth:2},path:{stroke:X1,strokeWidth:.5},rect:{fill:X1},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:X1},bar:{binSpacing:2,fill:X1,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Q1="#000",ccn={group:{fill:"#e5e5e5"},arc:{fill:Q1},area:{fill:Q1},line:{stroke:Q1},path:{stroke:Q1},rect:{fill:Q1},shape:{stroke:Q1},symbol:{fill:Q1,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},dcn=22,fcn="normal",Kxe="Benton Gothic, sans-serif",Xxe=11.5,hcn="normal",J1="#82c6df",qH="Benton Gothic Bold, sans-serif",Qxe="normal",Jxe=13,C2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},pcn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:qH,fontSize:dcn,fontWeight:fcn},arc:{fill:J1},area:{fill:J1},line:{stroke:J1,strokeWidth:2},path:{stroke:J1},rect:{fill:J1},shape:{stroke:J1},symbol:{fill:J1,size:30},axis:{labelFont:Kxe,labelFontSize:Xxe,labelFontWeight:hcn,titleFont:qH,titleFontSize:Jxe,titleFontWeight:Qxe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Kxe,labelFontSize:Xxe,symbolType:"square",titleFont:qH,titleFontSize:Jxe,titleFontWeight:Qxe},range:{category:C2["category-6"],diverging:C2["fireandice-6"],heatmap:C2["fire-7"],ordinal:C2["fire-7"],ramp:C2["fire-7"]}},Z1="#ab5787",RO="#979797",mcn={background:"#f9f9f9",arc:{fill:Z1},area:{fill:Z1},line:{stroke:Z1},path:{stroke:Z1},rect:{fill:Z1},shape:{stroke:Z1},symbol:{fill:Z1,size:30},axis:{domainColor:RO,domainWidth:.5,gridWidth:.2,labelColor:RO,tickColor:RO,tickWidth:.2,titleColor:RO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},eb="#3e5c69",gcn={background:"#fff",arc:{fill:eb},area:{fill:eb},line:{stroke:eb},path:{stroke:eb},rect:{fill:eb},shape:{stroke:eb},symbol:{fill:eb},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},wd="#1696d2",Zxe="#000000",ycn="#FFFFFF",DO="Lato",WH="Lato",vcn="Lato",bcn="#DEDDDD",wcn=18,S2={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},xcn={background:ycn,title:{anchor:"start",fontSize:wcn,font:DO},axisX:{domain:!0,domainColor:Zxe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:WH,labelAngle:0,tickColor:Zxe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:DO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:bcn,gridWidth:1,labelFontSize:12,labelFont:WH,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:DO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:WH,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:DO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:S2["six-groups-cat-1"],diverging:S2["diverging-colors"],heatmap:S2["diverging-colors"],ordinal:S2["six-groups-seq"],ramp:S2["shades-blue"]},area:{fill:wd},rect:{fill:wd},line:{color:wd,stroke:wd,strokeWidth:5},trail:{color:wd,stroke:wd,strokeWidth:0,size:1},path:{stroke:wd,strokeWidth:.5},point:{filled:!0},text:{font:vcn,color:wd,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:wd,stroke:null}},arc:{fill:wd},shape:{stroke:wd},symbol:{fill:wd,size:30}},tb="#3366CC",e_e="#ccc",PO="Arial, sans-serif",_cn={arc:{fill:tb},area:{fill:tb},path:{stroke:tb},rect:{fill:tb},shape:{stroke:tb},symbol:{stroke:tb},circle:{fill:tb},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:PO,fontSize:12},"guide-title":{font:PO,fontSize:12},"group-title":{font:PO,fontSize:12}},title:{font:PO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:e_e,tickColor:e_e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Gae=e=>e*(1/3+1),t_e=Gae(9),n_e=Gae(10),r_e=Gae(12),T2="Segoe UI",i_e="wf_standard-font, helvetica, arial, sans-serif",s_e="#252423",A2="#605E5C",o_e="transparent",Ecn="#C8C6C4",Nf="#118DFF",Ccn="#12239E",Scn="#E66C37",Tcn="#6B007B",Acn="#E044A7",kcn="#744EC2",Icn="#D9B300",Rcn="#D64550",Oze=Nf,Nze="#DEEFFF",a_e=[Nze,Oze],Dcn=[Nze,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",Oze],Pcn={view:{stroke:o_e},background:o_e,font:T2,header:{titleFont:i_e,titleFontSize:r_e,titleColor:s_e,labelFont:T2,labelFontSize:n_e,labelColor:A2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:A2,labelFontSize:t_e,titleFont:i_e,titleColor:s_e,titleFontSize:r_e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Ecn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Nf},line:{stroke:Nf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:T2,fontSize:t_e,fill:A2},arc:{fill:Nf},area:{fill:Nf,line:!0,opacity:.6},path:{stroke:Nf},rect:{fill:Nf},point:{fill:Nf,filled:!0,size:75},shape:{stroke:Nf},symbol:{fill:Nf,strokeWidth:1.5,size:50},legend:{titleFont:T2,titleFontWeight:"bold",titleColor:A2,labelFont:T2,labelFontSize:n_e,labelColor:A2,symbolType:"circle",symbolSize:75},range:{category:[Nf,Ccn,Scn,Tcn,Acn,kcn,Icn,Rcn],diverging:a_e,heatmap:a_e,ordinal:Dcn}},GH='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Ocn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',YH=400,OO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Ncn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Mcn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function hB({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=OO.gridBg[e],i=OO.textPrimary[e],s=OO.textSecondary[e],o=n==="dark"?Ncn:Mcn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:GH,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Ocn,labelFontWeight:YH,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:OO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:GH,fill:s,fontWeight:YH},"guide-title":{font:GH,fill:s,fontWeight:YH}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const $cn=hB({theme:"white",background:"#ffffff"}),Fcn=hB({theme:"g10",background:"#f4f4f4"}),Lcn=hB({theme:"g90",background:"#262626"}),jcn=hB({theme:"g100",background:"#161616"}),Bcn=icn.version,zcn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Fcn,carbong100:jcn,carbong90:Lcn,carbonwhite:$cn,dark:scn,excel:ocn,fivethirtyeight:ucn,ggplot2:ccn,googlecharts:_cn,latimes:pcn,powerbi:Pcn,quartz:mcn,urbaninstitute:xcn,version:Bcn,vox:gcn},Symbol.toStringTag,{value:"Module"})),Vcn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,Mze="vg-tooltip-element",Ucn={offsetX:10,offsetY:10,id:Mze,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Hcn,maxDepth:2};function Hcn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function qcn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Vcn.toString().replace(Mze,e)}var Wcn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Gcn(e,t,n){if(ut(e))return`[${e.map(r=>t(Wt(r)?r:l_e(r,n))).join(", ")}]`;if(qt(e)){let r="";const i=e,{title:s}=i,o=Wcn(i,["title"]);s&&(r+=`<h2>${t(s)}</h2>`);const a=Object.keys(o);if(a.length>0){r+="<table>";for(const l of a){let u=o[l];u!==void 0&&(qt(u)&&(u=l_e(u,n)),r+=`<tr><td class="key">${t(l)}:</td><td class="value">${t(u)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Ycn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function l_e(e,t){return JSON.stringify(e,Ycn(t))}function Kcn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Xcn{constructor(t){this.options=Object.assign(Object.assign({},Ucn),t);const n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=qcn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,n,r,i){if(i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=Gcn(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Kcn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${s}px`)}}function Qcn(e,t,n){const r=e.open(t),i=250;let s=40;function o(l){l.source===r&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function a(){s<=0||(r.postMessage(n,"*"),setTimeout(a,i),s-=1)}setTimeout(a,i)}const Jcn=`.vega-embed {
  position: relative;
  display: inline-block; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: scroll;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function $ze(e,...t){for(const n of t)Zcn(e,n);return e}function Zcn(e,t){for(const n of Object.keys(t))LS(e,n,t[n],!0)}var KH;const ky=den;let UI=ecn;const NO=typeof window<"u"?window:void 0;UI===void 0&&(!((KH=NO?.vl)===null||KH===void 0)&&KH.compile)&&(UI=NO.vl);const edn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},tdn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},AA={vega:"Vega","vega-lite":"Vega-Lite"},N$={vega:ky.version,"vega-lite":UI?UI.version:"not available"},ndn={vega:e=>e,"vega-lite":(e,t)=>UI.compile(e,{config:t}).spec},rdn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`;function idn(e){return typeof e=="function"}function u_e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${AA[r]} JSON Source`}function sdn(e,t){var n;if(e.$schema){const r=Pze(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${AA[r.library]}, but mode argument sets ${(n=AA[t])!==null&&n!==void 0?n:t}.`);const i=r.library;return E5e.satisfies(N$[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${AA[i]} ${r.version}, but the current version of ${AA[i]} is v${N$[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function odn(e){return!!(e&&"load"in e)}function adn(e,t,n={}){var r,i,s;return XM(this,void 0,void 0,function*(){const o=odn(n.loader)?n.loader:ky.loader(n.loader),a=Wt(t)?JSON.parse(yield o.load(t)):t,l=yield c_e((r=a.usermeta&&a.usermeta.embedOptions)!==null&&r!==void 0?r:{},o),u=yield c_e(n,o),c=Object.assign(Object.assign({},$ze(u,l)),{config:FS((i=u.config)!==null&&i!==void 0?i:{},(s=l.config)!==null&&s!==void 0?s:{})});return yield ldn(e,a,c,o)})}function c_e(e,t){var n;return XM(this,void 0,void 0,function*(){const r=Wt(e.config)?JSON.parse(yield t.load(e.config)):(n=e.config)!==null&&n!==void 0?n:{},i=Wt(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})})}function ldn(e,t,n={},r){var i,s,o,a,l,u;return XM(this,void 0,void 0,function*(){const c=n.theme?FS(zcn[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,d=h1(n.actions)?n.actions:$ze({},edn,(s=n.actions)!==null&&s!==void 0?s:{}),f=Object.assign(Object.assign({},tdn),n.i18n),h=(o=n.renderer)!==null&&o!==void 0?o:"canvas",p=(a=n.logLevel)!==null&&a!==void 0?a:ky.Warn,m=(l=n.downloadFileName)!==null&&l!==void 0?l:"visualization";if(n.defaultStyle!==!1){const R="vega-embed-style";if(!document.getElementById(R)){const I=document.createElement("style");I.id=R,I.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?Jcn.toString():n.defaultStyle,document.head.appendChild(I)}}const g=sdn(t,n.mode);let y=ndn[g](t,c);if(g==="vega-lite"&&y.$schema){const R=Pze(y.$schema);E5e.satisfies(N$.vega,`^${R.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${R.version}, but current version is v${N$.vega}.`)}const v=typeof e=="string"?document.querySelector(e):e;if(!v)throw Error(`${e} does not exist`);v.classList.add("vega-embed"),d&&v.classList.add("has-actions"),v.innerHTML="";const b=n.patch;b&&(b instanceof Function?y=b(y):y=w8(y,b,!0,!1).newDocument),n.formatLocale&&ky.formatLocale(n.formatLocale),n.timeFormatLocale&&ky.timeFormatLocale(n.timeFormatLocale);const _=ky.parse(y,g==="vega-lite"?{}:c),E=new ky.View(_,{loader:r,logLevel:p,renderer:h});if(n.tooltip!==!1){let R;idn(n.tooltip)?R=n.tooltip:R=new Xcn(n.tooltip===!0?{}:n.tooltip).call,E.tooltip(R)}let{hover:S}=n;if(S===void 0&&(S=g==="vega"),S){const{hoverSet:R,updateSet:I}=typeof S=="boolean"?{}:S;E.hover(R,I)}n&&(n.width!=null&&E.width(n.width),n.height!=null&&E.height(n.height),n.padding!=null&&E.padding(n.padding)),yield E.initialize(e).runAsync();let T;if(d!==!1){let R=v;if(n.defaultStyle!==!1){const P=document.createElement("details");P.title=f.CLICK_TO_VIEW_ACTIONS,v.append(P),R=P;const N=document.createElement("summary");N.innerHTML=rdn,P.append(N),T=M=>{P.contains(M.target)||P.removeAttribute("open")},document.addEventListener("click",T)}const I=document.createElement("div");if(R.append(I),I.classList.add("vega-actions"),d===!0||d.export!==!1){for(const P of["svg","png"])if(d===!0||d.export===!0||d.export[P]){const N=f[`${P.toUpperCase()}_ACTION`],M=document.createElement("a");M.text=N,M.href="#",M.target="_blank",M.download=`${m}.${P}`,M.addEventListener("mousedown",function(O){return XM(this,void 0,void 0,function*(){O.preventDefault();const j=yield E.toImageURL(P,n.scaleFactor);this.href=j})}),I.append(M)}}if(d===!0||d.source!==!1){const P=document.createElement("a");P.text=f.SOURCE_ACTION,P.href="#",P.addEventListener("mousedown",function(N){var M,O;u_e(iU(t),(M=n.sourceHeader)!==null&&M!==void 0?M:"",(O=n.sourceFooter)!==null&&O!==void 0?O:"",g),N.preventDefault()}),I.append(P)}if(g==="vega-lite"&&(d===!0||d.compiled!==!1)){const P=document.createElement("a");P.text=f.COMPILED_ACTION,P.href="#",P.addEventListener("mousedown",function(N){var M,O;u_e(iU(y),(M=n.sourceHeader)!==null&&M!==void 0?M:"",(O=n.sourceFooter)!==null&&O!==void 0?O:"","vega"),N.preventDefault()}),I.append(P)}if(d===!0||d.editor!==!1){const P=(u=n.editorUrl)!==null&&u!==void 0?u:"https://vega.github.io/editor/",N=document.createElement("a");N.text=f.EDITOR_ACTION,N.href="#",N.addEventListener("mousedown",function(M){Qcn(window,P,{config:c,mode:g,renderer:h,spec:iU(t)}),M.preventDefault()}),I.append(N)}}function A(){T&&document.removeEventListener("click",T),E.finalize()}return{view:E,spec:t,vgSpec:y,finalize:A}})}function udn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function cdn(e,t,n){n&&(udn(n)?n(e.data(t)):e.change(t,ky.changeset().remove(()=>!0).insert(n)))}function ddn(e,t){Object.keys(t).forEach(n=>{cdn(e,n,t[n])})}function Fze(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Lze=()=>{};function XH(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function fdn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Fze([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!dA(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function d_e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function QH(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function kA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class jze extends bn.PureComponent{constructor(){super(...arguments),kA(this,"containerRef",bn.createRef()),kA(this,"resultPromise",void 0),kA(this,"handleError",t=>{const{onError:n=Lze}=this.props;n(t,this.containerRef.current),console.warn(t)}),kA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Fze([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=fdn(QH(this.props),QH(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!cK(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&d_e(a,s),i&&XH(a,i)),a.run()})}else cK(i,s)||this.modifyView(o=>{s&&d_e(o,s),i&&XH(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=QH(this.props);this.resultPromise=adn(this.containerRef.current,a,o).then(l=>{if(l){const{view:u}=l;XH(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return bn.createElement("div",{ref:this.containerRef,className:t,style:n})}}kA(jze,"propTypes",{className:d6.string,onError:d6.func});function HX(){return HX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HX.apply(this,arguments)}function qX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const hdn={};class Yae extends bn.PureComponent{constructor(){super(...arguments),qX(this,"vegaEmbed",bn.createRef()),qX(this,"handleNewView",t=>{this.update();const{onNewView:n=Lze}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){cK(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{ddn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return bn.createElement(jze,HX({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}qX(Yae,"defaultProps",{data:hdn});function WX(){return WX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WX.apply(this,arguments)}function f_e(e){return bn.createElement(Yae,WX({},e,{mode:"vega-lite"}))}const pdn=Yae;function mdn({currentConfig:e,provState:t}){const n=Us(),[r,i]=k.useState(null),[s,o]=k.useState(!0),a=n0(),{updateResponseBlockValidation:l,setReactiveAnswers:u}=ls(),[c,d]=k.useState(),{actions:f,trrack:h}=k.useMemo(()=>{const v=a1.create(),b=v.register("signal",(E,S)=>(E.event=S,E)),_=CS({registry:v,initialState:{event:{}}});return{actions:{signalAction:b},trrack:_}},[]),p=k.useCallback(({status:v,provenanceGraph:b,answers:_})=>{n(l({location:"stimulus",identifier:a,status:v,values:_,provenanceGraph:b})),n(u(_))},[n,l,a,u]),m=k.useCallback((v,b)=>{h.apply(v,f.signalAction({key:v,value:b}))},[f,h]),g=k.useCallback((v,b)=>{const{responseId:_,response:E}=b;p({status:!0,provenanceGraph:h.graph.backend,answers:{[_]:E}})},[p,h.graph.backend]),y=k.useMemo(()=>{const v=r?.config?.signals;return v?v.reduce((b,_)=>(_.name==="revisitAnswer"?b[_.name]=g:b[_.name]=m,b),{}):{}},[g,m,r]);return k.useEffect(()=>{async function v(){o(!0);let b;"path"in e?b=await yjt(e.path):b=e.config,b!==void 0&&i(b),o(!1)}e&&v()},[e]),k.useEffect(()=>{c&&t&&t.event&&t.event.key&&c.signal(t.event.key,t.event.value).run()},[c,t]),s?w.jsx("div",{children:"Loading..."}):"path"in e&&!r?w.jsx(i0,{path:e.path}):r?w.jsx(pdn,{spec:structuredClone(r),signalListeners:y,onNewView:v=>d(v),actions:e.withActions}):w.jsx("div",{children:"Failed to load vega config"})}function Kt(e,t,n){return(t=ydn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gdn(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ydn(e){var t=gdn(e,"string");return typeof t=="symbol"?t:String(t)}function vdn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bdn(e,t,n){return t&&h_e(e.prototype,t),n&&h_e(e,n),e}function wdn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p_e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.push.apply(n,r)}return n}function m_e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?p_e(Object(n),!0).forEach((function(r){wdn(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p_e(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var g_e={addCSS:!0,thumbWidth:15,watch:!0};function xdn(e,t){return(function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function _dn(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}var KD=function(e){return e!=null?e.constructor:null},Kae=function(e,t){return!!(e&&t&&e instanceof t)},Bze=function(e){return e==null},zze=function(e){return KD(e)===Object},Edn=function(e){return KD(e)===Number&&!Number.isNaN(e)},Vze=function(e){return KD(e)===String},Cdn=function(e){return KD(e)===Boolean},Sdn=function(e){return KD(e)===Function},Uze=function(e){return Array.isArray(e)},Hze=function(e){return Kae(e,NodeList)},Tdn=function(e){return Kae(e,Element)},Adn=function(e){return Kae(e,Event)},kdn=function(e){return Bze(e)||(Vze(e)||Uze(e)||Hze(e))&&!e.length||zze(e)&&!Object.keys(e).length},cl={nullOrUndefined:Bze,object:zze,number:Edn,string:Vze,boolean:Cdn,function:Sdn,array:Uze,nodeList:Hze,element:Tdn,event:Adn,empty:kdn};function Idn(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function Rdn(e,t){if(1>t){var n=Idn(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var Ddn=(function(){function e(t,n){vdn(this,e),cl.element(t)?this.element=t:cl.string(t)&&(this.element=document.querySelector(t)),cl.element(this.element)&&cl.empty(this.element.rangeTouch)&&(this.config=m_e({},g_e,{},n),this.init())}return bdn(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(t){var n=this,r=t?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(i){n.element[r](i,(function(s){return n.set(s)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!cl.event(t))return null;var n,r=t.target,i=t.changedTouches[0],s=parseFloat(r.getAttribute("min"))||0,o=parseFloat(r.getAttribute("max"))||100,a=parseFloat(r.getAttribute("step"))||1,l=r.getBoundingClientRect(),u=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(i.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*u:50<n&&(n+=2*(n-50)*u),s+Rdn(n/100*(o-s),a)}},{key:"set",value:function(t){e.enabled&&cl.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),_dn(t.target,t.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},r=null;if(cl.empty(t)||cl.string(t)?r=Array.from(document.querySelectorAll(cl.string(t)?t:'input[type="range"]')):cl.element(t)?r=[t]:cl.nodeList(t)?r=Array.from(t):cl.array(t)&&(r=t.filter(cl.element)),cl.empty(r))return null;var i=m_e({},g_e,{},n);if(cl.string(t)&&i.watch){var s=new MutationObserver((function(o){Array.from(o).forEach((function(a){Array.from(a.addedNodes).forEach((function(l){cl.element(l)&&xdn(l,t)&&new e(l,i)}))}))}));s.observe(document.body,{childList:!0,subtree:!0})}return r.map((function(o){return new e(o,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e})();const XD=e=>e!=null?e.constructor:null,u0=(e,t)=>!!(e&&t&&e instanceof t),Xae=e=>e==null,qze=e=>XD(e)===Object,Pdn=e=>XD(e)===Number&&!Number.isNaN(e),pB=e=>XD(e)===String,Odn=e=>XD(e)===Boolean,Wze=e=>typeof e=="function",Gze=e=>Array.isArray(e),Ndn=e=>u0(e,WeakMap),Yze=e=>u0(e,NodeList),Mdn=e=>XD(e)===Text,$dn=e=>u0(e,Event),Fdn=e=>u0(e,KeyboardEvent),Ldn=e=>u0(e,window.TextTrackCue)||u0(e,window.VTTCue),jdn=e=>u0(e,TextTrack)||!Xae(e)&&pB(e.kind),Bdn=e=>u0(e,Promise)&&Wze(e.then),zdn=e=>e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.style=="object"&&typeof e.ownerDocument=="object",Kze=e=>Xae(e)||(pB(e)||Gze(e)||Yze(e))&&!e.length||qze(e)&&!Object.keys(e).length,Vdn=e=>{if(u0(e,window.URL))return!0;if(!pB(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!Kze(new URL(t).hostname)}catch{return!1}};var Ae={nullOrUndefined:Xae,object:qze,number:Pdn,string:pB,boolean:Odn,function:Wze,array:Gze,weakMap:Ndn,nodeList:Yze,element:zdn,textNode:Mdn,event:$dn,keyboardEvent:Fdn,cue:Ldn,track:jdn,promise:Bdn,url:Vdn,empty:Kze};const GX=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},n=Object.keys(t).find((r=>e.style[r]!==void 0));return!!Ae.string(n)&&t[n]})();function Xze(e,t){setTimeout((()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch{}}),t)}const Udn=!!window.document.documentMode,Hdn=/Edge/g.test(navigator.userAgent),qdn="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),Wdn=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,Gdn=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,Ydn=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var ca={isIE:Udn,isEdge:Hdn,isWebKit:qdn,isIPhone:Wdn,isIPadOS:Gdn,isIos:Ydn};function Kdn(e){return JSON.parse(JSON.stringify(e))}function Qze(e,t){return t.split(".").reduce(((n,r)=>n&&n[r]),e)}function Zs(e={},...t){if(!t.length)return e;const n=t.shift();return Ae.object(n)?(Object.keys(n).forEach((r=>{Ae.object(n[r])?(Object.keys(e).includes(r)||Object.assign(e,{[r]:{}}),Zs(e[r],n[r])):Object.assign(e,{[r]:n[r]})})),Zs(e,...t)):e}function Jze(e,t){const n=e.length?e:[e];Array.from(n).reverse().forEach(((r,i)=>{const s=i>0?t.cloneNode(!0):t,o=r.parentNode,a=r.nextSibling;s.appendChild(r),a?o.insertBefore(s,a):o.appendChild(s)}))}function YX(e,t){Ae.element(e)&&!Ae.empty(t)&&Object.entries(t).filter((([,n])=>!Ae.nullOrUndefined(n))).forEach((([n,r])=>e.setAttribute(n,r)))}function qn(e,t,n){const r=document.createElement(e);return Ae.object(t)&&YX(r,t),Ae.string(n)&&(r.innerText=n),r}function Xdn(e,t){Ae.element(e)&&Ae.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)}function y_e(e,t,n,r){Ae.element(t)&&t.appendChild(qn(e,n,r))}function _g(e){Ae.nodeList(e)||Ae.array(e)?Array.from(e).forEach(_g):Ae.element(e)&&Ae.element(e.parentNode)&&e.parentNode.removeChild(e)}function kM(e){if(!Ae.element(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function M$(e,t){return Ae.element(t)&&Ae.element(t.parentNode)&&Ae.element(e)?(t.parentNode.replaceChild(e,t),e):null}function yp(e,t){if(!Ae.string(e)||Ae.empty(e))return{};const n={},r=Zs({},t);return e.split(",").forEach((i=>{const s=i.trim(),o=s.replace(".",""),a=s.replace(/[[\]]/g,"").split("="),[l]=a,u=a.length>1?a[1].replace(/["']/g,""):"";switch(s.charAt(0)){case".":Ae.string(r.class)?n.class=`${r.class} ${o}`:n.class=o;break;case"#":n.id=s.replace("#","");break;case"[":n[l]=u}})),Zs(r,n)}function nb(e,t){if(!Ae.element(e))return;let n=t;Ae.boolean(n)||(n=!e.hidden),e.hidden=n}function bi(e,t,n){if(Ae.nodeList(e))return Array.from(e).map((r=>bi(r,t,n)));if(Ae.element(e)){let r="toggle";return n!==void 0&&(r=n?"add":"remove"),e.classList[r](t),e.classList.contains(t)}return!1}function $$(e,t){return Ae.element(e)&&e.classList.contains(t)}function Fb(e,t){const{prototype:n}=Element;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function Qdn(e,t){const{prototype:n}=Element;return(n.closest||function(){let r=this;do{if(Fb.matches(r,t))return r;r=r.parentElement||r.parentNode}while(r!==null&&r.nodeType===1);return null}).call(e,t)}function HI(e){return this.elements.container.querySelectorAll(e)}function $o(e){return this.elements.container.querySelector(e)}function JH(e=null,t=!1){Ae.element(e)&&e.focus({preventScroll:!0,focusVisible:t})}const v_e={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},to={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t){const n=to[e]||t!=="html5";return{api:n,ui:n&&to.rangeInput}},pip:!(ca.isIPhone||!Ae.function(qn("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||qn("video").disablePictureInPicture)),airplay:Ae.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(Ae.empty(e))return!1;const[t]=e.split("/");let n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(v_e).includes(n)&&(n+=`; codecs="${v_e[e]}"`);try{return!!(n&&this.media.canPlayType(n).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range",e.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:GX!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Jdn=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e})();function qI(e,t,n,r=!1,i=!0,s=!1){if(!e||!("addEventListener"in e)||Ae.empty(t)||!Ae.function(n))return;const o=t.split(" ");let a=s;Jdn&&(a={passive:i,capture:s}),o.forEach((l=>{this&&this.eventListeners&&r&&this.eventListeners.push({element:e,type:l,callback:n,options:a}),e[r?"addEventListener":"removeEventListener"](l,n,a)}))}function ti(e,t="",n,r=!0,i=!1){qI.call(this,e,t,n,!0,r,i)}function mB(e,t="",n,r=!0,i=!1){qI.call(this,e,t,n,!1,r,i)}function Qae(e,t="",n,r=!0,i=!1){const s=(...o)=>{mB(e,t,s,r,i),n.apply(this,o)};qI.call(this,e,t,s,!0,r,i)}function Xn(e,t="",n=!1,r={}){if(!Ae.element(e)||Ae.empty(t))return;const i=new CustomEvent(t,{bubbles:n,detail:{...r,plyr:this}});e.dispatchEvent(i)}function Zdn(){this&&this.eventListeners&&(this.eventListeners.forEach((e=>{const{element:t,type:n,callback:r,options:i}=e;t.removeEventListener(n,r,i)})),this.eventListeners=[])}function efn(){return new Promise((e=>this.ready?setTimeout(e,0):ti.call(this,this.elements.container,"ready",e))).then((()=>{}))}function kp(e){Ae.promise(e)&&e.then(null,(()=>{}))}function KX(e){return Ae.array(e)?e.filter(((t,n)=>e.indexOf(t)===n)):e}function Zze(e,t){return Ae.array(e)&&e.length?e.reduce(((n,r)=>Math.abs(r-t)<Math.abs(n-t)?r:n)):null}function eVe(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const b_e=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce(((e,[t,n])=>({...e,[t/n]:[t,n]})),{});function tVe(e){return Ae.array(e)||Ae.string(e)&&e.includes(":")?(Ae.array(e)?e:e.split(":")).map(Number).every(Ae.number):!1}function F$(e){if(!Ae.array(e)||!e.every(Ae.number))return null;const[t,n]=e,r=(s,o)=>o===0?s:r(o,s%o),i=r(t,n);return[t/i,n/i]}function Jae(e){const t=r=>tVe(r)?r.split(":").map(Number):null;let n=t(e);if(n===null&&(n=t(this.config.ratio)),n===null&&!Ae.empty(this.embed)&&Ae.array(this.embed.ratio)&&({ratio:n}=this.embed),n===null&&this.isHTML5){const{videoWidth:r,videoHeight:i}=this.media;n=[r,i]}return F$(n)}function LC(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,n=Jae.call(this,e);if(!Ae.array(n))return{};const[r,i]=F$(n),s=100/r*i;if(eVe(`aspect-ratio: ${r}/${i}`)?t.style.aspectRatio=`${r}/${i}`:t.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-s)/(o/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${a}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:n}}function nVe(e,t,n=.05){const r=e/t,i=Zze(Object.keys(b_e),r);return Math.abs(i-r)<=n?b_e[i]:[e,t]}function tfn(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const qy={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((e=>{const t=e.getAttribute("type");return!!Ae.empty(t)||to.mime.call(this,t)})):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:qy.getSources.call(this).map((e=>Number(e.getAttribute("size")))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,Ae.empty(this.config.ratio)||LC.call(e),Object.defineProperty(e.media,"quality",{get(){const t=qy.getSources.call(e).find((n=>n.getAttribute("src")===e.source));return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&Ae.function(e.config.quality.onChange))e.config.quality.onChange(t);else{const n=qy.getSources.call(e).find((l=>Number(l.getAttribute("size"))===t));if(!n)return;const{currentTime:r,paused:i,preload:s,readyState:o,playbackRate:a}=e.media;e.media.src=n.getAttribute("src"),(s!=="none"||o)&&(e.once("loadedmetadata",(()=>{e.speed=a,e.currentTime=r,i||kp(e.play())})),e.media.load())}Xn.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(_g(qy.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function nfn(e){return`${e}-${Math.floor(1e4*Math.random())}`}function XX(e,...t){return Ae.empty(e)?e:e.toString().replace(/{(\d+)}/g,((n,r)=>t[r].toString()))}function rfn(e,t){return e===0||t===0||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}const pk=(e="",t="",n="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString()),rVe=(e="")=>e.toString().replace(/\w\S*/g,(t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()));function ifn(e=""){let t=e.toString();return t=pk(t,"-"," "),t=pk(t,"_"," "),t=rVe(t),pk(t," ","")}function sfn(e=""){let t=e.toString();return t=ifn(t),t.charAt(0).toLowerCase()+t.slice(1)}function ofn(e){const t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}function afn(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const w_e={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},aa={get(e="",t={}){if(Ae.empty(e)||Ae.empty(t))return"";let n=Qze(t.i18n,e);if(Ae.empty(n))return Object.keys(w_e).includes(e)?w_e[e]:"";const r={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(r).forEach((([i,s])=>{n=pk(n,i,s)})),n}};class WI{constructor(t){Kt(this,"get",(n=>{if(!WI.supported||!this.enabled)return null;const r=window.localStorage.getItem(this.key);if(Ae.empty(r))return null;const i=JSON.parse(r);return Ae.string(n)&&n.length?i[n]:i})),Kt(this,"set",(n=>{if(!WI.supported||!this.enabled||!Ae.object(n))return;let r=this.get();Ae.empty(r)&&(r={}),Zs(r,n);try{window.localStorage.setItem(this.key,JSON.stringify(r))}catch{}})),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const t="___test";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),!0}catch{return!1}}}function QD(e,t="text"){return new Promise(((n,r)=>{try{const i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",(()=>{if(t==="text")try{n(JSON.parse(i.responseText))}catch{n(i.responseText)}else n(i.response)})),i.addEventListener("error",(()=>{throw new Error(i.status)})),i.open("GET",e,!0),i.responseType=t,i.send()}catch(i){r(i)}}))}function iVe(e,t){if(!Ae.string(e))return;const n="cache",r=Ae.string(t);let i=!1;const s=()=>document.getElementById(t)!==null,o=(a,l)=>{a.innerHTML=l,r&&s()||document.body.insertAdjacentElement("afterbegin",a)};if(!r||!s()){const a=WI.supported,l=document.createElement("div");if(l.setAttribute("hidden",""),r&&l.setAttribute("id",t),a){const u=window.localStorage.getItem(`${n}-${t}`);if(i=u!==null,i){const c=JSON.parse(u);o(l,c.content)}}QD(e).then((u=>{if(!Ae.empty(u)){if(a)try{window.localStorage.setItem(`${n}-${t}`,JSON.stringify({content:u}))}catch{}o(l,u)}})).catch((()=>{}))}}const sVe=e=>Math.trunc(e/60/60%60,10),lfn=e=>Math.trunc(e/60%60,10),ufn=e=>Math.trunc(e%60,10);function gB(e=0,t=!1,n=!1){if(!Ae.number(e))return gB(void 0,t,n);const r=a=>`0${a}`.slice(-2);let i=sVe(e);const s=lfn(e),o=ufn(e);return i=t||i>0?`${i}:`:"",`${n&&e>0?"-":""}${i}${r(s)}:${r(o)}`}const Vt={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,n=e.host!==t||ca.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:n}},findElements(){try{return this.elements.controls=$o.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:HI.call(this,this.config.selectors.buttons.play),pause:$o.call(this,this.config.selectors.buttons.pause),restart:$o.call(this,this.config.selectors.buttons.restart),rewind:$o.call(this,this.config.selectors.buttons.rewind),fastForward:$o.call(this,this.config.selectors.buttons.fastForward),mute:$o.call(this,this.config.selectors.buttons.mute),pip:$o.call(this,this.config.selectors.buttons.pip),airplay:$o.call(this,this.config.selectors.buttons.airplay),settings:$o.call(this,this.config.selectors.buttons.settings),captions:$o.call(this,this.config.selectors.buttons.captions),fullscreen:$o.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=$o.call(this,this.config.selectors.progress),this.elements.inputs={seek:$o.call(this,this.config.selectors.inputs.seek),volume:$o.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:$o.call(this,this.config.selectors.display.buffer),currentTime:$o.call(this,this.config.selectors.display.currentTime),duration:$o.call(this,this.config.selectors.display.duration)},Ae.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const n="http://www.w3.org/2000/svg",r=Vt.getIconUrl.call(this),i=`${r.cors?"":r.url}#${this.config.iconPrefix}`,s=document.createElementNS(n,"svg");YX(s,Zs(t,{"aria-hidden":"true",focusable:"false"}));const o=document.createElementNS(n,"use"),a=`${i}-${e}`;return"href"in o&&o.setAttributeNS("http://www.w3.org/1999/xlink","href",a),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a),s.appendChild(o),s},createLabel(e,t={}){const n=aa.get(e,this.config);return qn("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},n)},createBadge(e){if(Ae.empty(e))return null;const t=qn("span",{class:this.config.classNames.menu.value});return t.appendChild(qn("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const n=Zs({},t);let r=sfn(e);const i={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((o=>{Object.keys(n).includes(o)&&(i[o]=n[o],delete n[o])})),i.element!=="button"||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.split(" ").some((o=>o===this.config.classNames.control))||Zs(n,{class:`${n.class} ${this.config.classNames.control}`}):n.class=this.config.classNames.control,e){case"play":i.toggle=!0,i.label="play",i.labelPressed="pause",i.icon="play",i.iconPressed="pause";break;case"mute":i.toggle=!0,i.label="mute",i.labelPressed="unmute",i.icon="volume",i.iconPressed="muted";break;case"captions":i.toggle=!0,i.label="enableCaptions",i.labelPressed="disableCaptions",i.icon="captions-off",i.iconPressed="captions-on";break;case"fullscreen":i.toggle=!0,i.label="enterFullscreen",i.labelPressed="exitFullscreen",i.icon="enter-fullscreen",i.iconPressed="exit-fullscreen";break;case"play-large":n.class+=` ${this.config.classNames.control}--overlaid`,r="play",i.label="play",i.icon="play";break;default:Ae.empty(i.label)&&(i.label=r),Ae.empty(i.icon)&&(i.icon=e)}const s=qn(i.element);return i.toggle?(s.appendChild(Vt.createIcon.call(this,i.iconPressed,{class:"icon--pressed"})),s.appendChild(Vt.createIcon.call(this,i.icon,{class:"icon--not-pressed"})),s.appendChild(Vt.createLabel.call(this,i.labelPressed,{class:"label--pressed"})),s.appendChild(Vt.createLabel.call(this,i.label,{class:"label--not-pressed"}))):(s.appendChild(Vt.createIcon.call(this,i.icon)),s.appendChild(Vt.createLabel.call(this,i.label))),Zs(n,yp(this.config.selectors.buttons[r],n)),YX(s,n),r==="play"?(Ae.array(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(s)):this.elements.buttons[r]=s,s},createRange(e,t){const n=qn("input",Zs(yp(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":aa.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,Vt.updateRangeFill.call(this,n),Ddn.setup(n),n},createProgress(e,t){const n=qn("progress",Zs(yp(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if(e!=="volume"){n.appendChild(qn("span",null,"0"));const r={played:"played",buffer:"buffered"}[e],i=r?aa.get(r,this.config):"";n.innerText=`% ${i.toLowerCase()}`}return this.elements.display[e]=n,n},createTime(e,t){const n=yp(this.config.selectors.display[e],t),r=qn("div",Zs(n,{class:`${n.class?n.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":aa.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=r,r},bindMenuItemShortcuts(e,t){ti.call(this,e,"keydown keyup",(n=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(n.key)||(n.preventDefault(),n.stopPropagation(),n.type==="keydown"))return;const r=Fb(e,'[role="menuitemradio"]');if(!r&&[" ","ArrowRight"].includes(n.key))Vt.showMenuPanel.call(this,t,!0);else{let i;n.key!==" "&&(n.key==="ArrowDown"||r&&n.key==="ArrowRight"?(i=e.nextElementSibling,Ae.element(i)||(i=e.parentNode.firstElementChild)):(i=e.previousElementSibling,Ae.element(i)||(i=e.parentNode.lastElementChild)),JH.call(this,i,!0))}}),!1),ti.call(this,e,"keyup",(n=>{n.key==="Return"&&Vt.focusFirstMenuItem.call(this,null,!0)}))},createMenuItem({value:e,list:t,type:n,title:r,badge:i=null,checked:s=!1}){const o=yp(this.config.selectors.inputs[n]),a=qn("button",Zs(o,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${o.class?o.class:""}`.trim(),"aria-checked":s,value:e})),l=qn("span");l.innerHTML=r,Ae.element(i)&&l.appendChild(i),a.appendChild(l),Object.defineProperty(a,"checked",{enumerable:!0,get:()=>a.getAttribute("aria-checked")==="true",set(u){u&&Array.from(a.parentNode.children).filter((c=>Fb(c,'[role="menuitemradio"]'))).forEach((c=>c.setAttribute("aria-checked","false"))),a.setAttribute("aria-checked",u?"true":"false")}}),this.listeners.bind(a,"click keyup",(u=>{if(!Ae.keyboardEvent(u)||u.key===" "){switch(u.preventDefault(),u.stopPropagation(),a.checked=!0,n){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}Vt.showMenuPanel.call(this,"home",Ae.keyboardEvent(u))}}),n,!1),Vt.bindMenuItemShortcuts.call(this,a,n),t.appendChild(a)},formatTime(e=0,t=!1){return Ae.number(e)?gB(e,sVe(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,n=!1){Ae.element(e)&&Ae.number(t)&&(e.innerText=Vt.formatTime(t,n))},updateVolume(){this.supported.ui&&(Ae.element(this.elements.inputs.volume)&&Vt.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),Ae.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(e,t=0){Ae.element(e)&&(e.value=t,Vt.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!Ae.event(e))return;let t=0;const n=(r,i)=>{const s=Ae.number(i)?i:0,o=Ae.element(r)?r:this.elements.display.buffer;if(Ae.element(o)){o.value=s;const a=o.getElementsByTagName("span")[0];Ae.element(a)&&(a.childNodes[0].nodeValue=s)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=rfn(this.currentTime,this.duration),e.type==="timeupdate"&&Vt.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":n(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(e){const t=Ae.event(e)?e.target:e;if(Ae.element(t)&&t.getAttribute("type")==="range"){if(Fb(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const n=Vt.formatTime(this.currentTime),r=Vt.formatTime(this.duration),i=aa.get("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",n).replace("{duration}",r))}else if(Fb(t,this.config.selectors.inputs.volume)){const n=100*t.value;t.setAttribute("aria-valuenow",n),t.setAttribute("aria-valuetext",`${n.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);(ca.isWebKit||ca.isIPadOS)&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,n;if(!this.config.tooltips.seek||!Ae.element(this.elements.inputs.seek)||!Ae.element(this.elements.display.seekTooltip)||this.duration===0)return;const r=this.elements.display.seekTooltip,i=`${this.config.classNames.tooltip}--visible`,s=c=>bi(r,i,c);if(this.touch)return void s(!1);let o=0;const a=this.elements.progress.getBoundingClientRect();if(Ae.event(e))o=100/a.width*(e.pageX-a.left);else{if(!$$(r,i))return;o=parseFloat(r.style.left,10)}o<0?o=0:o>100&&(o=100);const l=this.duration/100*o;r.innerText=Vt.formatTime(l);const u=(t=this.config.markers)===null||t===void 0||(n=t.points)===null||n===void 0?void 0:n.find((({time:c})=>c===Math.round(l)));u&&r.insertAdjacentHTML("afterbegin",`${u.label}<br>`),r.style.left=`${o}%`,Ae.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&s(e.type==="mouseenter")},timeUpdate(e){const t=!Ae.element(this.elements.display.duration)&&this.config.invertTime;Vt.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&e.type==="timeupdate"&&this.media.seeking||Vt.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return nb(this.elements.display.currentTime,!0),void nb(this.elements.progress,!0);Ae.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=Ae.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&Vt.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&Vt.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&Vt.setMarkers.call(this),Vt.updateSeekTooltip.call(this)},toggleMenuButton(e,t){nb(this.elements.settings.buttons[e],!t)},updateSetting(e,t,n){const r=this.elements.settings.panels[e];let i=null,s=t;if(e==="captions")i=this.currentTrack;else{if(i=Ae.empty(n)?this[e]:n,Ae.empty(i)&&(i=this.config[e].default),!Ae.empty(this.options[e])&&!this.options[e].includes(i))return void this.debug.warn(`Unsupported value of '${i}' for ${e}`);if(!this.config[e].options.includes(i))return void this.debug.warn(`Disabled value of '${i}' for ${e}`)}if(Ae.element(s)||(s=r&&r.querySelector('[role="menu"]')),!Ae.element(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=Vt.getLabel.call(this,e,i);const o=s&&s.querySelector(`[value="${i}"]`);Ae.element(o)&&(o.checked=!0)},getLabel(e,t){switch(e){case"speed":return t===1?aa.get("normal",this.config):`${t}&times;`;case"quality":if(Ae.number(t)){const n=aa.get(`qualityLabel.${t}`,this.config);return n.length?n:`${t}p`}return rVe(t);case"captions":return si.getLabel.call(this);default:return null}},setQualityMenu(e){if(!Ae.element(this.elements.settings.panels.quality))return;const t="quality",n=this.elements.settings.panels.quality.querySelector('[role="menu"]');Ae.array(e)&&(this.options.quality=KX(e).filter((s=>this.config.quality.options.includes(s))));const r=!Ae.empty(this.options.quality)&&this.options.quality.length>1;if(Vt.toggleMenuButton.call(this,t,r),kM(n),Vt.checkMenu.call(this),!r)return;const i=s=>{const o=aa.get(`qualityBadge.${s}`,this.config);return o.length?Vt.createBadge.call(this,o):null};this.options.quality.sort(((s,o)=>{const a=this.config.quality.options;return a.indexOf(s)>a.indexOf(o)?1:-1})).forEach((s=>{Vt.createMenuItem.call(this,{value:s,list:n,type:t,title:Vt.getLabel.call(this,"quality",s),badge:i(s)})})),Vt.updateSetting.call(this,t,n)},setCaptionsMenu(){if(!Ae.element(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=si.getTracks.call(this),r=!!n.length;if(Vt.toggleMenuButton.call(this,e,r),kM(t),Vt.checkMenu.call(this),!r)return;const i=n.map(((s,o)=>({value:o,checked:this.captions.toggled&&this.currentTrack===o,title:si.getLabel.call(this,s),badge:s.language&&Vt.createBadge.call(this,s.language.toUpperCase()),list:t,type:"language"})));i.unshift({value:-1,checked:!this.captions.toggled,title:aa.get("disabled",this.config),list:t,type:"language"}),i.forEach(Vt.createMenuItem.bind(this)),Vt.updateSetting.call(this,e,t)},setSpeedMenu(){if(!Ae.element(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((r=>r>=this.minimumSpeed&&r<=this.maximumSpeed));const n=!Ae.empty(this.options.speed)&&this.options.speed.length>1;Vt.toggleMenuButton.call(this,e,n),kM(t),Vt.checkMenu.call(this),n&&(this.options.speed.forEach((r=>{Vt.createMenuItem.call(this,{value:r,list:t,type:e,title:Vt.getLabel.call(this,"speed",r)})})),Vt.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!Ae.empty(e)&&Object.values(e).some((n=>!n.hidden));nb(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let n=e;Ae.element(n)||(n=Object.values(this.elements.settings.panels).find((i=>!i.hidden)));const r=n.querySelector('[role^="menuitem"]');JH.call(this,r,t)},toggleMenu(e){const{popup:t}=this.elements.settings,n=this.elements.buttons.settings;if(!Ae.element(t)||!Ae.element(n))return;const{hidden:r}=t;let i=r;if(Ae.boolean(e))i=e;else if(Ae.keyboardEvent(e)&&e.key==="Escape")i=!1;else if(Ae.event(e)){const s=Ae.function(e.composedPath)?e.composedPath()[0]:e.target,o=t.contains(s);if(o||!o&&e.target!==n&&i)return}n.setAttribute("aria-expanded",i),nb(t,!i),bi(this.elements.container,this.config.classNames.menu.open,i),i&&Ae.keyboardEvent(e)?Vt.focusFirstMenuItem.call(this,null,!0):i||r||JH.call(this,n,Ae.keyboardEvent(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const n=t.scrollWidth,r=t.scrollHeight;return _g(t),{width:n,height:r}},showMenuPanel(e="",t=!1){const n=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!Ae.element(n))return;const r=n.parentNode,i=Array.from(r.children).find((s=>!s.hidden));if(to.transitions&&!to.reducedMotion){r.style.width=`${i.scrollWidth}px`,r.style.height=`${i.scrollHeight}px`;const s=Vt.getMenuSize.call(this,n),o=a=>{a.target===r&&["width","height"].includes(a.propertyName)&&(r.style.width="",r.style.height="",mB.call(this,r,GX,o))};ti.call(this,r,GX,o),r.style.width=`${s.width}px`,r.style.height=`${s.height}px`}nb(i,!0),nb(n,!1),Vt.focusFirstMenuItem.call(this,n,t)},setDownloadUrl(){const e=this.elements.buttons.download;Ae.element(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:n,createProgress:r,createRange:i,createTime:s,setQualityMenu:o,setSpeedMenu:a,showMenuPanel:l}=Vt;this.elements.controls=null,Ae.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(n.call(this,"play-large"));const u=qn("div",yp(this.config.selectors.controls.wrapper));this.elements.controls=u;const c={class:"plyr__controls__item"};return KX(Ae.array(this.config.controls)?this.config.controls:[]).forEach((d=>{if(d==="restart"&&u.appendChild(n.call(this,"restart",c)),d==="rewind"&&u.appendChild(n.call(this,"rewind",c)),d==="play"&&u.appendChild(n.call(this,"play",c)),d==="fast-forward"&&u.appendChild(n.call(this,"fast-forward",c)),d==="progress"){const f=qn("div",{class:`${c.class} plyr__progress__container`}),h=qn("div",yp(this.config.selectors.progress));if(h.appendChild(i.call(this,"seek",{id:`plyr-seek-${e.id}`})),h.appendChild(r.call(this,"buffer")),this.config.tooltips.seek){const p=qn("span",{class:this.config.classNames.tooltip},"00:00");h.appendChild(p),this.elements.display.seekTooltip=p}this.elements.progress=h,f.appendChild(this.elements.progress),u.appendChild(f)}if(d==="current-time"&&u.appendChild(s.call(this,"currentTime",c)),d==="duration"&&u.appendChild(s.call(this,"duration",c)),d==="mute"||d==="volume"){let{volume:f}=this.elements;if(Ae.element(f)&&u.contains(f)||(f=qn("div",Zs({},c,{class:`${c.class} plyr__volume`.trim()})),this.elements.volume=f,u.appendChild(f)),d==="mute"&&f.appendChild(n.call(this,"mute")),d==="volume"&&!ca.isIos&&!ca.isIPadOS){const h={max:1,step:.05,value:this.config.volume};f.appendChild(i.call(this,"volume",Zs(h,{id:`plyr-volume-${e.id}`})))}}if(d==="captions"&&u.appendChild(n.call(this,"captions",c)),d==="settings"&&!Ae.empty(this.config.settings)){const f=qn("div",Zs({},c,{class:`${c.class} plyr__menu`.trim(),hidden:""}));f.appendChild(n.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const h=qn("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),p=qn("div"),m=qn("div",{id:`plyr-settings-${e.id}-home`}),g=qn("div",{role:"menu"});m.appendChild(g),p.appendChild(m),this.elements.settings.panels.home=m,this.config.settings.forEach((y=>{const v=qn("button",Zs(yp(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,v,y),ti.call(this,v,"click",(()=>{l.call(this,y,!1)}));const b=qn("span",null,aa.get(y,this.config)),_=qn("span",{class:this.config.classNames.menu.value});_.innerHTML=e[y],b.appendChild(_),v.appendChild(b),g.appendChild(v);const E=qn("div",{id:`plyr-settings-${e.id}-${y}`,hidden:""}),S=qn("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});S.appendChild(qn("span",{"aria-hidden":!0},aa.get(y,this.config))),S.appendChild(qn("span",{class:this.config.classNames.hidden},aa.get("menuBack",this.config))),ti.call(this,E,"keydown",(T=>{T.key==="ArrowLeft"&&(T.preventDefault(),T.stopPropagation(),l.call(this,"home",!0))}),!1),ti.call(this,S,"click",(()=>{l.call(this,"home",!1)})),E.appendChild(S),E.appendChild(qn("div",{role:"menu"})),p.appendChild(E),this.elements.settings.buttons[y]=v,this.elements.settings.panels[y]=E})),h.appendChild(p),f.appendChild(h),u.appendChild(f),this.elements.settings.popup=h,this.elements.settings.menu=f}if(d==="pip"&&to.pip&&u.appendChild(n.call(this,"pip",c)),d==="airplay"&&to.airplay&&u.appendChild(n.call(this,"airplay",c)),d==="download"){const f=Zs({},c,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(f.download="");const{download:h}=this.config.urls;!Ae.url(h)&&this.isEmbed&&Zs(f,{icon:`logo-${this.provider}`,label:this.provider}),u.appendChild(n.call(this,"download",f))}d==="fullscreen"&&u.appendChild(n.call(this,"fullscreen",c))})),this.isHTML5&&o.call(this,qy.getQualityOptions.call(this)),a.call(this),u},inject(){if(this.config.loadSprite){const i=Vt.getIconUrl.call(this);i.cors&&iVe(i.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let n=!0;Ae.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),Ae.element(this.config.controls)||Ae.string(this.config.controls)?e=this.config.controls:(e=Vt.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:si.getLabel.call(this)}),n=!1);let r;if(n&&Ae.string(this.config.controls)&&(e=(i=>{let s=i;return Object.entries(t).forEach((([o,a])=>{s=pk(s,`{${o}}`,a)})),s})(e)),Ae.string(this.config.selectors.controls.container)&&(r=document.querySelector(this.config.selectors.controls.container)),Ae.element(r)||(r=this.elements.container),r[Ae.element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),Ae.element(this.elements.controls)||Vt.findElements.call(this),!Ae.empty(this.elements.buttons)){const i=s=>{const o=this.config.classNames.controlPressed;s.setAttribute("aria-pressed","false"),Object.defineProperty(s,"pressed",{configurable:!0,enumerable:!0,get:()=>$$(s,o),set(a=!1){bi(s,o,a),s.setAttribute("aria-pressed",a?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach((s=>{Ae.array(s)||Ae.nodeList(s)?Array.from(s).filter(Boolean).forEach(i):i(s)}))}if(ca.isEdge&&Xze(r),this.config.tooltips.controls){const{classNames:i,selectors:s}=this.config,o=`${s.controls.wrapper} ${s.labels} .${i.hidden}`,a=HI.call(this,o);Array.from(a).forEach((l=>{bi(l,this.config.classNames.hidden,!1),bi(l,this.config.classNames.tooltip,!0)}))}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const n=(e=this.config.markers)===null||e===void 0||(t=e.points)===null||t===void 0?void 0:t.filter((({time:l})=>l>0&&l<this.duration));if(n==null||!n.length)return;const r=document.createDocumentFragment(),i=document.createDocumentFragment();let s=null;const o=`${this.config.classNames.tooltip}--visible`,a=l=>bi(s,o,l);n.forEach((l=>{const u=qn("span",{class:this.config.classNames.marker},""),c=l.time/this.duration*100+"%";s&&(u.addEventListener("mouseenter",(()=>{l.label||(s.style.left=c,s.innerHTML=l.label,a(!0))})),u.addEventListener("mouseleave",(()=>{a(!1)}))),u.addEventListener("click",(()=>{this.currentTime=l.time})),u.style.left=c,i.appendChild(u)})),r.appendChild(i),this.config.tooltips.seek||(s=qn("span",{class:this.config.classNames.tooltip},""),r.appendChild(s)),this.elements.markers={points:i,tip:s},this.elements.progress.appendChild(r)}};function oVe(e,t=!0){let n=e;if(t){const r=document.createElement("a");r.href=n,n=r.href}try{return new URL(n)}catch{return null}}function aVe(e){const t=new URLSearchParams;return Ae.object(e)&&Object.entries(e).forEach((([n,r])=>{t.set(n,r)})),t}const si={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!to.textTracks)return void(Ae.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Vt.setCaptionsMenu.call(this));if(Ae.element(this.elements.captions)||(this.elements.captions=qn("div",yp(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),Xdn(this.elements.captions,this.elements.wrapper)),ca.isIE&&window.URL){const r=this.media.querySelectorAll("track");Array.from(r).forEach((i=>{const s=i.getAttribute("src"),o=oVe(s);o!==null&&o.hostname!==window.location.href.hostname&&["http:","https:"].includes(o.protocol)&&QD(s,"blob").then((a=>{i.setAttribute("src",window.URL.createObjectURL(a))})).catch((()=>{_g(i)}))}))}const e=KX((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((r=>r.split("-")[0])));let t=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();t==="auto"&&([t]=e);let n=this.storage.get("captions");if(Ae.boolean(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:t,languages:e}),this.isHTML5){const r=this.config.captions.update?"addtrack removetrack":"removetrack";ti.call(this,this.media.textTracks,r,si.update.bind(this))}setTimeout(si.update.bind(this),0)},update(){const e=si.getTracks.call(this,!0),{active:t,language:n,meta:r,currentTrackNode:i}=this.captions,s=!!e.find((o=>o.language===n));this.isHTML5&&this.isVideo&&e.filter((o=>!r.get(o))).forEach((o=>{this.debug.log("Track added",o),r.set(o,{default:o.mode==="showing"}),o.mode==="showing"&&(o.mode="hidden"),ti.call(this,o,"cuechange",(()=>si.updateCues.call(this)))})),(s&&this.language!==n||!e.includes(i))&&(si.setLanguage.call(this,n),si.toggle.call(this,t&&s)),this.elements&&bi(this.elements.container,this.config.classNames.captions.enabled,!Ae.empty(e)),Ae.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&Vt.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:n}=this.captions,r=this.config.classNames.captions.active,i=Ae.nullOrUndefined(e)?!n:e;if(i!==n){if(t||(this.captions.active=i,this.storage.set({captions:i})),!this.language&&i&&!t){const s=si.getTracks.call(this),o=si.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=o.language,void si.set.call(this,s.indexOf(o))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=i),bi(this.elements.container,r,i),this.captions.toggled=i,Vt.updateSetting.call(this,"captions"),Xn.call(this,this.media,i?"captionsenabled":"captionsdisabled")}setTimeout((()=>{i&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")}))},set(e,t=!0){const n=si.getTracks.call(this);if(e!==-1)if(Ae.number(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const r=n[e],{language:i}=r||{};this.captions.currentTrackNode=r,Vt.updateSetting.call(this,"captions"),t||(this.captions.language=i,this.storage.set({language:i})),this.isVimeo&&this.embed.enableTextTrack(i),Xn.call(this,this.media,"languagechange")}si.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&si.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else si.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!Ae.string(e))return void this.debug.warn("Invalid language argument",e);const n=e.toLowerCase();this.captions.language=n;const r=si.getTracks.call(this),i=si.findTrack.call(this,[n]);si.set.call(this,r.indexOf(i),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter((t=>!this.isHTML5||e||this.captions.meta.has(t))).filter((t=>["captions","subtitles"].includes(t.kind)))},findTrack(e,t=!1){const n=si.getTracks.call(this),r=o=>Number((this.captions.meta.get(o)||{}).default),i=Array.from(n).sort(((o,a)=>r(a)-r(o)));let s;return e.every((o=>(s=i.find((a=>a.language===o)),!s))),s||(t?i[0]:void 0)},getCurrentTrack(){return si.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!Ae.track(t)&&to.textTracks&&this.captions.toggled&&(t=si.getCurrentTrack.call(this)),Ae.track(t)?Ae.empty(t.label)?Ae.empty(t.language)?aa.get("enabled",this.config):e.language.toUpperCase():t.label:aa.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!Ae.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!Ae.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const r=si.getCurrentTrack.call(this);t=Array.from((r||{}).activeCues||[]).map((i=>i.getCueAsHTML())).map(afn)}const n=t.map((r=>r.trim())).join(`
`);if(n!==this.elements.captions.innerHTML){kM(this.elements.captions);const r=qn("span",yp(this.config.selectors.caption));r.innerHTML=n,this.elements.captions.appendChild(r),Xn.call(this,this.media,"cuechange")}}},lVe={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},ZH={active:"picture-in-picture",inactive:"inline"},Iy={html5:"html5",youtube:"youtube",vimeo:"vimeo"},eq={audio:"audio",video:"video"};function cfn(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Iy.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Iy.vimeo:null}const tq=()=>{};class dfn{constructor(t=!1){this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):tq}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):tq}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):tq}}class Mf{constructor(t){Kt(this,"onChange",(()=>{if(!this.supported)return;const n=this.player.elements.buttons.fullscreen;Ae.element(n)&&(n.pressed=this.active);const r=this.target===this.player.media?this.target:this.player.elements.container;Xn.call(this.player,r,this.active?"enterfullscreen":"exitfullscreen",!0)})),Kt(this,"toggleFallback",((n=!1)=>{if(n?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=n?"hidden":"",bi(this.target,this.player.config.classNames.fullscreen.fallback,n),ca.isIos){let r=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";r||(r=document.createElement("meta"),r.setAttribute("name","viewport"));const s=Ae.string(r.content)&&r.content.includes(i);n?(this.cleanupViewport=!s,s||(r.content+=`,${i}`)):this.cleanupViewport&&(r.content=r.content.split(",").filter((o=>o.trim()!==i)).join(","))}this.onChange()})),Kt(this,"trapFocus",(n=>{if(ca.isIos||ca.isIPadOS||!this.active||n.key!=="Tab")return;const r=document.activeElement,i=HI.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=i,o=i[i.length-1];r!==o||n.shiftKey?r===s&&n.shiftKey&&(o.focus(),n.preventDefault()):(s.focus(),n.preventDefault())})),Kt(this,"update",(()=>{if(this.supported){let n;n=this.forceFallback?"Fallback (forced)":Mf.nativeSupported?"Native":"Fallback",this.player.debug.log(`${n} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");bi(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)})),Kt(this,"enter",(()=>{this.supported&&(ca.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Mf.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?Ae.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))})),Kt(this,"exit",(()=>{if(this.supported)if(ca.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),kp(this.player.play());else if(!Mf.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!Ae.empty(this.prefix)){const n=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${n}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),Kt(this,"toggle",(()=>{this.active?this.exit():this.enter()})),this.player=t,this.prefix=Mf.prefix,this.property=Mf.property,this.scrollPosition={x:0,y:0},this.forceFallback=t.config.fullscreen.fallback==="force",this.player.elements.fullscreen=t.config.fullscreen.container&&Qdn(this.player.elements.container,t.config.fullscreen.container),ti.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,(()=>{this.onChange()})),ti.call(this.player,this.player.elements.container,"dblclick",(n=>{Ae.element(this.player.elements.controls)&&this.player.elements.controls.contains(n.target)||this.player.listeners.proxy(n,this.toggle,"fullscreen")})),ti.call(this,this.player.elements.container,"keydown",(n=>this.trapFocus(n))),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Mf.nativeSupported&&!this.forceFallback}static get prefix(){if(Ae.function(document.exitFullscreen))return"";let t="";return["webkit","moz","ms"].some((n=>!(!Ae.function(document[`${n}ExitFullscreen`])&&!Ae.function(document[`${n}CancelFullScreen`]))&&(t=n,!0))),t}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Mf.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Mf.nativeSupported||!ca.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Mf.nativeSupported||this.forceFallback)return $$(this.target,this.player.config.classNames.fullscreen.fallback);const t=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}get target(){return ca.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function IM(e,t=1){return new Promise(((n,r)=>{const i=new Image,s=()=>{delete i.onload,delete i.onerror,(i.naturalWidth>=t?n:r)(i)};Object.assign(i,{onload:s,onerror:s,src:e})}))}const Ri={addStyleHook(){bi(this.elements.container,this.config.selectors.container.replace(".",""),!0),bi(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Ri.toggleNativeControls.call(this,!0);Ae.element(this.elements.controls)||(Vt.inject.call(this),this.listeners.controls()),Ri.toggleNativeControls.call(this),this.isHTML5&&si.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,Vt.updateVolume.call(this),Vt.timeUpdate.call(this),Vt.durationUpdate.call(this),Ri.checkPlaying.call(this),bi(this.elements.container,this.config.classNames.pip.supported,to.pip&&this.isHTML5&&this.isVideo),bi(this.elements.container,this.config.classNames.airplay.supported,to.airplay&&this.isHTML5),bi(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((()=>{Xn.call(this,this.media,"ready")}),0),Ri.setTitle.call(this),this.poster&&Ri.setPoster.call(this,this.poster,!1).catch((()=>{})),this.config.duration&&Vt.durationUpdate.call(this),this.config.mediaMetadata&&Vt.setMediaMetadata.call(this)},setTitle(){let e=aa.get("play",this.config);if(Ae.string(this.config.title)&&!Ae.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach((t=>{t.setAttribute("aria-label",e)})),this.isEmbed){const t=$o.call(this,"iframe");if(!Ae.element(t))return;const n=Ae.empty(this.config.title)?"video":this.config.title,r=aa.get("frameTitle",this.config);t.setAttribute("title",r.replace("{title}",n))}},togglePoster(e){bi(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),efn.call(this).then((()=>IM(e))).catch((n=>{throw e===this.poster&&Ri.togglePoster.call(this,!1),n})).then((()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),Ri.togglePoster.call(this,!0),e))))},checkPlaying(e){bi(this.elements.container,this.config.classNames.playing,this.playing),bi(this.elements.container,this.config.classNames.paused,this.paused),bi(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((t=>{Object.assign(t,{pressed:this.playing}),t.setAttribute("aria-label",aa.get(this.playing?"pause":"play",this.config))})),Ae.event(e)&&e.type==="timeupdate"||Ri.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((()=>{bi(this.elements.container,this.config.classNames.loading,this.loading),Ri.toggleControls.call(this)}),this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles(){Object.values({...this.media.style}).filter((e=>!Ae.empty(e)&&Ae.string(e)&&e.startsWith("--plyr"))).forEach((e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)})),Ae.empty(this.media.style)&&this.media.removeAttribute("style")}};class ffn{constructor(t){Kt(this,"firstTouch",(()=>{const{player:n}=this,{elements:r}=n;n.touch=!0,bi(r.container,n.config.classNames.isTouch,!0)})),Kt(this,"global",((n=!0)=>{const{player:r}=this;r.config.keyboard.global&&qI.call(r,window,"keydown keyup",this.handleKey,n,!1),qI.call(r,document.body,"click",this.toggleMenu,n),Qae.call(r,document.body,"touchstart",this.firstTouch)})),Kt(this,"container",(()=>{const{player:n}=this,{config:r,elements:i,timers:s}=n;!r.keyboard.global&&r.keyboard.focused&&ti.call(n,i.container,"keydown keyup",this.handleKey,!1),ti.call(n,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(l=>{const{controls:u}=i;u&&l.type==="enterfullscreen"&&(u.pressed=!1,u.hover=!1);let c=0;["touchstart","touchmove","mousemove"].includes(l.type)&&(Ri.toggleControls.call(n,!0),c=n.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout((()=>Ri.toggleControls.call(n,!1)),c)}));const o=()=>{if(!n.isVimeo||n.config.vimeo.premium)return;const l=i.wrapper,{active:u}=n.fullscreen,[c,d]=Jae.call(n),f=eVe(`aspect-ratio: ${c} / ${d}`);if(!u)return void(f?(l.style.width=null,l.style.height=null):(l.style.maxWidth=null,l.style.margin=null));const[h,p]=tfn(),m=h/p>c/d;f?(l.style.width=m?"auto":"100%",l.style.height=m?"100%":"auto"):(l.style.maxWidth=m?p/d*c+"px":null,l.style.margin=m?"0 auto":null)},a=()=>{clearTimeout(s.resized),s.resized=setTimeout(o,50)};ti.call(n,i.container,"enterfullscreen exitfullscreen",(l=>{const{target:u}=n.fullscreen;u===i.container&&(!n.isEmbed&&Ae.empty(n.config.ratio)||(o(),(l.type==="enterfullscreen"?ti:mB).call(n,window,"resize",a)))}))})),Kt(this,"media",(()=>{const{player:n}=this,{elements:r}=n;if(ti.call(n,n.media,"timeupdate seeking seeked",(s=>Vt.timeUpdate.call(n,s))),ti.call(n,n.media,"durationchange loadeddata loadedmetadata",(s=>Vt.durationUpdate.call(n,s))),ti.call(n,n.media,"ended",(()=>{n.isHTML5&&n.isVideo&&n.config.resetOnEnd&&(n.restart(),n.pause())})),ti.call(n,n.media,"progress playing seeking seeked",(s=>Vt.updateProgress.call(n,s))),ti.call(n,n.media,"volumechange",(s=>Vt.updateVolume.call(n,s))),ti.call(n,n.media,"playing play pause ended emptied timeupdate",(s=>Ri.checkPlaying.call(n,s))),ti.call(n,n.media,"waiting canplay seeked playing",(s=>Ri.checkLoading.call(n,s))),n.supported.ui&&n.config.clickToPlay&&!n.isAudio){const s=$o.call(n,`.${n.config.classNames.video}`);if(!Ae.element(s))return;ti.call(n,r.container,"click",(o=>{([r.container,s].includes(o.target)||s.contains(o.target))&&(n.touch&&n.config.hideControls||(n.ended?(this.proxy(o,n.restart,"restart"),this.proxy(o,(()=>{kp(n.play())}),"play")):this.proxy(o,(()=>{kp(n.togglePlay())}),"play")))}))}n.supported.ui&&n.config.disableContextMenu&&ti.call(n,r.wrapper,"contextmenu",(s=>{s.preventDefault()}),!1),ti.call(n,n.media,"volumechange",(()=>{n.storage.set({volume:n.volume,muted:n.muted})})),ti.call(n,n.media,"ratechange",(()=>{Vt.updateSetting.call(n,"speed"),n.storage.set({speed:n.speed})})),ti.call(n,n.media,"qualitychange",(s=>{Vt.updateSetting.call(n,"quality",null,s.detail.quality)})),ti.call(n,n.media,"ready qualitychange",(()=>{Vt.setDownloadUrl.call(n)}));const i=n.config.events.concat(["keyup","keydown"]).join(" ");ti.call(n,n.media,i,(s=>{let{detail:o={}}=s;s.type==="error"&&(o=n.media.error),Xn.call(n,r.container,s.type,!0,o)}))})),Kt(this,"proxy",((n,r,i)=>{const{player:s}=this,o=s.config.listeners[i];let a=!0;Ae.function(o)&&(a=o.call(s,n)),a!==!1&&Ae.function(r)&&r.call(s,n)})),Kt(this,"bind",((n,r,i,s,o=!0)=>{const{player:a}=this,l=a.config.listeners[s],u=Ae.function(l);ti.call(a,n,r,(c=>this.proxy(c,i,s)),o&&!u)})),Kt(this,"controls",(()=>{const{player:n}=this,{elements:r}=n,i=ca.isIE?"change":"input";if(r.buttons.play&&Array.from(r.buttons.play).forEach((s=>{this.bind(s,"click",(()=>{kp(n.togglePlay())}),"play")})),this.bind(r.buttons.restart,"click",n.restart,"restart"),this.bind(r.buttons.rewind,"click",(()=>{n.lastSeekTime=Date.now(),n.rewind()}),"rewind"),this.bind(r.buttons.fastForward,"click",(()=>{n.lastSeekTime=Date.now(),n.forward()}),"fastForward"),this.bind(r.buttons.mute,"click",(()=>{n.muted=!n.muted}),"mute"),this.bind(r.buttons.captions,"click",(()=>n.toggleCaptions())),this.bind(r.buttons.download,"click",(()=>{Xn.call(n,n.media,"download")}),"download"),this.bind(r.buttons.fullscreen,"click",(()=>{n.fullscreen.toggle()}),"fullscreen"),this.bind(r.buttons.pip,"click",(()=>{n.pip="toggle"}),"pip"),this.bind(r.buttons.airplay,"click",n.airplay,"airplay"),this.bind(r.buttons.settings,"click",(s=>{s.stopPropagation(),s.preventDefault(),Vt.toggleMenu.call(n,s)}),null,!1),this.bind(r.buttons.settings,"keyup",(s=>{[" ","Enter"].includes(s.key)&&(s.key!=="Enter"?(s.preventDefault(),s.stopPropagation(),Vt.toggleMenu.call(n,s)):Vt.focusFirstMenuItem.call(n,null,!0))}),null,!1),this.bind(r.settings.menu,"keydown",(s=>{s.key==="Escape"&&Vt.toggleMenu.call(n,s)})),this.bind(r.inputs.seek,"mousedown mousemove",(s=>{const o=r.progress.getBoundingClientRect(),a=100/o.width*(s.pageX-o.left);s.currentTarget.setAttribute("seek-value",a)})),this.bind(r.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(s=>{const o=s.currentTarget,a="play-on-seeked";if(Ae.keyboardEvent(s)&&!["ArrowLeft","ArrowRight"].includes(s.key))return;n.lastSeekTime=Date.now();const l=o.hasAttribute(a),u=["mouseup","touchend","keyup"].includes(s.type);l&&u?(o.removeAttribute(a),kp(n.play())):!u&&n.playing&&(o.setAttribute(a,""),n.pause())})),ca.isIos){const s=HI.call(n,'input[type="range"]');Array.from(s).forEach((o=>this.bind(o,i,(a=>Xze(a.target)))))}this.bind(r.inputs.seek,i,(s=>{const o=s.currentTarget;let a=o.getAttribute("seek-value");Ae.empty(a)&&(a=o.value),o.removeAttribute("seek-value"),n.currentTime=a/o.max*n.duration}),"seek"),this.bind(r.progress,"mouseenter mouseleave mousemove",(s=>Vt.updateSeekTooltip.call(n,s))),this.bind(r.progress,"mousemove touchmove",(s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startMove(s)})),this.bind(r.progress,"mouseleave touchend click",(()=>{const{previewThumbnails:s}=n;s&&s.loaded&&s.endMove(!1,!0)})),this.bind(r.progress,"mousedown touchstart",(s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.startScrubbing(s)})),this.bind(r.progress,"mouseup touchend",(s=>{const{previewThumbnails:o}=n;o&&o.loaded&&o.endScrubbing(s)})),ca.isWebKit&&Array.from(HI.call(n,'input[type="range"]')).forEach((s=>{this.bind(s,"input",(o=>Vt.updateRangeFill.call(n,o.target)))})),n.config.toggleInvert&&!Ae.element(r.display.duration)&&this.bind(r.display.currentTime,"click",(()=>{n.currentTime!==0&&(n.config.invertTime=!n.config.invertTime,Vt.timeUpdate.call(n))})),this.bind(r.inputs.volume,i,(s=>{n.volume=s.target.value}),"volume"),this.bind(r.controls,"mouseenter mouseleave",(s=>{r.controls.hover=!n.touch&&s.type==="mouseenter"})),r.fullscreen&&Array.from(r.fullscreen.children).filter((s=>!s.contains(r.container))).forEach((s=>{this.bind(s,"mouseenter mouseleave",(o=>{r.controls&&(r.controls.hover=!n.touch&&o.type==="mouseenter")}))})),this.bind(r.controls,"mousedown mouseup touchstart touchend touchcancel",(s=>{r.controls.pressed=["mousedown","touchstart"].includes(s.type)})),this.bind(r.controls,"focusin",(()=>{const{config:s,timers:o}=n;bi(r.controls,s.classNames.noTransition,!0),Ri.toggleControls.call(n,!0),setTimeout((()=>{bi(r.controls,s.classNames.noTransition,!1)}),0);const a=this.touch?3e3:4e3;clearTimeout(o.controls),o.controls=setTimeout((()=>Ri.toggleControls.call(n,!1)),a)})),this.bind(r.inputs.volume,"wheel",(s=>{const o=s.webkitDirectionInvertedFromDevice,[a,l]=[s.deltaX,-s.deltaY].map((d=>o?-d:d)),u=Math.sign(Math.abs(a)>Math.abs(l)?a:l);n.increaseVolume(u/50);const{volume:c}=n.media;(u===1&&c<1||u===-1&&c>0)&&s.preventDefault()}),"volume",!1)})),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(t){const{player:n}=this,{elements:r}=n,{key:i,type:s,altKey:o,ctrlKey:a,metaKey:l,shiftKey:u}=t,c=s==="keydown",d=c&&i===this.lastKey;if(!(o||a||l||u)&&i){if(c){const h=document.activeElement;if(Ae.element(h)){const{editable:p}=n.config.selectors,{seek:m}=r.inputs;if(h!==m&&Fb(h,p)||t.key===" "&&Fb(h,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(t.preventDefault(),t.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(f=parseInt(i,10),n.currentTime=n.duration/10*f);break;case" ":case"k":d||kp(n.togglePlay());break;case"ArrowUp":n.increaseVolume(.1);break;case"ArrowDown":n.decreaseVolume(.1);break;case"m":d||(n.muted=!n.muted);break;case"ArrowRight":n.forward();break;case"ArrowLeft":n.rewind();break;case"f":n.fullscreen.toggle();break;case"c":d||n.toggleCaptions();break;case"l":n.loop=!n.loop}i==="Escape"&&!n.fullscreen.usingNative&&n.fullscreen.active&&n.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null;var f}}toggleMenu(t){Vt.toggleMenu.call(this.player,t)}}function hfn(e,t){return e(t={exports:{}},t.exports),t.exports}var pfn=hfn((function(e,t){e.exports=(function(){var n=function(){},r={},i={},s={};function o(f,h){f=f.push?f:[f];var p,m,g,y=[],v=f.length,b=v;for(p=function(_,E){E.length&&y.push(_),--b||h(y)};v--;)m=f[v],(g=i[m])?p(m,g):(s[m]=s[m]||[]).push(p)}function a(f,h){if(f){var p=s[f];if(i[f]=h,p)for(;p.length;)p[0](f,h),p.splice(0,1)}}function l(f,h){f.call&&(f={success:f}),h.length?(f.error||n)(h):(f.success||n)(f)}function u(f,h,p,m){var g,y,v=document,b=p.async,_=(p.numRetries||0)+1,E=p.before||n,S=f.replace(/[\?|#].*$/,""),T=f.replace(/^(css|img)!/,"");m=m||0,/(^css!|\.css$)/.test(S)?((y=v.createElement("link")).rel="stylesheet",y.href=T,(g="hideFocus"in y)&&y.relList&&(g=0,y.rel="preload",y.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(S)?(y=v.createElement("img")).src=T:((y=v.createElement("script")).src=f,y.async=b===void 0||b),y.onload=y.onerror=y.onbeforeload=function(A){var R=A.type[0];if(g)try{y.sheet.cssText.length||(R="e")}catch(I){I.code!=18&&(R="e")}if(R=="e"){if((m+=1)<_)return u(f,h,p,m)}else if(y.rel=="preload"&&y.as=="style")return y.rel="stylesheet";h(f,R,A.defaultPrevented)},E(f,y)!==!1&&v.head.appendChild(y)}function c(f,h,p){var m,g,y=(f=f.push?f:[f]).length,v=y,b=[];for(m=function(_,E,S){if(E=="e"&&b.push(_),E=="b"){if(!S)return;b.push(_)}--y||h(b)},g=0;g<v;g++)u(f[g],m,p)}function d(f,h,p){var m,g;if(h&&h.trim&&(m=h),g=(m?p:h)||{},m){if(m in r)throw"LoadJS";r[m]=!0}function y(v,b){c(f,(function(_){l(g,_),v&&l({success:v,error:b},_),a(m,_)}),g)}if(g.returnPromise)return new Promise(y);y()}return d.ready=function(f,h){return o(f,(function(p){l(h,p)})),d},d.done=function(f){a(f,[])},d.reset=function(){r={},i={},s={}},d.isDefined=function(f){return f in r},d})()}));function Zae(e){return new Promise(((t,n)=>{pfn(e,{success:t,error:n})}))}function mfn(e){return Ae.empty(e)?null:Ae.number(Number(e))?e:e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e}function gfn(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&t.length===5?t[4]:null}function k2(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Xn.call(this,this.media,e?"play":"pause"))}const QX={setup(){const e=this;bi(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,LC.call(e),Ae.object(window.Vimeo)?QX.ready.call(e):Zae(e.config.urls.vimeo.sdk).then((()=>{QX.ready.call(e)})).catch((t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready(){const e=this,t=e.config.vimeo,{premium:n,referrerPolicy:r,...i}=t;let s=e.media.getAttribute("src"),o="";Ae.empty(s)?(s=e.media.getAttribute(e.config.attributes.embed.id),o=e.media.getAttribute(e.config.attributes.embed.hash)):o=gfn(s);const a=o?{h:o}:{};n&&Object.assign(i,{controls:!1,sidedock:!1});const l=aVe({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline,...a,...i}),u=mfn(s),c=qn("iframe"),d=XX(e.config.urls.vimeo.iframe,u,l);if(c.setAttribute("src",d),c.setAttribute("allowfullscreen",""),c.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),Ae.empty(r)||c.setAttribute("referrerPolicy",r),n||!t.customControls)c.setAttribute("data-poster",e.poster),e.media=M$(c,e.media);else{const v=qn("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});v.appendChild(c),e.media=M$(v,e.media)}t.customControls||QD(XX(e.config.urls.vimeo.api,d)).then((v=>{!Ae.empty(v)&&v.thumbnail_url&&Ri.setPoster.call(e,v.thumbnail_url).catch((()=>{}))})),e.embed=new window.Vimeo.Player(c,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(k2.call(e,!0),e.embed.play()),e.media.pause=()=>(k2.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:f}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>f,set(v){const{embed:b,media:_,paused:E,volume:S}=e,T=E&&!b.hasPlayed;_.seeking=!0,Xn.call(e,_,"seeking"),Promise.resolve(T&&b.setVolume(0)).then((()=>b.setCurrentTime(v))).then((()=>T&&b.pause())).then((()=>T&&b.setVolume(S))).catch((()=>{}))}});let h=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>h,set(v){e.embed.setPlaybackRate(v).then((()=>{h=v,Xn.call(e,e.media,"ratechange")})).catch((()=>{e.options.speed=[1]}))}});let{volume:p}=e.config;Object.defineProperty(e.media,"volume",{get:()=>p,set(v){e.embed.setVolume(v).then((()=>{p=v,Xn.call(e,e.media,"volumechange")}))}});let{muted:m}=e.config;Object.defineProperty(e.media,"muted",{get:()=>m,set(v){const b=!!Ae.boolean(v)&&v;e.embed.setMuted(!!b||e.config.muted).then((()=>{m=b,Xn.call(e,e.media,"volumechange")}))}});let g,{loop:y}=e.config;Object.defineProperty(e.media,"loop",{get:()=>y,set(v){const b=Ae.boolean(v)?v:e.config.loop.active;e.embed.setLoop(b).then((()=>{y=b}))}}),e.embed.getVideoUrl().then((v=>{g=v,Vt.setDownloadUrl.call(e)})).catch((v=>{this.debug.warn(v)})),Object.defineProperty(e.media,"currentSrc",{get:()=>g}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then((v=>{const[b,_]=v;e.embed.ratio=nVe(b,_),LC.call(this)})),e.embed.setAutopause(e.config.autopause).then((v=>{e.config.autopause=v})),e.embed.getVideoTitle().then((v=>{e.config.title=v,Ri.setTitle.call(this)})),e.embed.getCurrentTime().then((v=>{f=v,Xn.call(e,e.media,"timeupdate")})),e.embed.getDuration().then((v=>{e.media.duration=v,Xn.call(e,e.media,"durationchange")})),e.embed.getTextTracks().then((v=>{e.media.textTracks=v,si.setup.call(e)})),e.embed.on("cuechange",(({cues:v=[]})=>{const b=v.map((_=>ofn(_.text)));si.updateCues.call(e,b)})),e.embed.on("loaded",(()=>{e.embed.getPaused().then((v=>{k2.call(e,!v),v||Xn.call(e,e.media,"playing")})),Ae.element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)})),e.embed.on("bufferstart",(()=>{Xn.call(e,e.media,"waiting")})),e.embed.on("bufferend",(()=>{Xn.call(e,e.media,"playing")})),e.embed.on("play",(()=>{k2.call(e,!0),Xn.call(e,e.media,"playing")})),e.embed.on("pause",(()=>{k2.call(e,!1)})),e.embed.on("timeupdate",(v=>{e.media.seeking=!1,f=v.seconds,Xn.call(e,e.media,"timeupdate")})),e.embed.on("progress",(v=>{e.media.buffered=v.percent,Xn.call(e,e.media,"progress"),parseInt(v.percent,10)===1&&Xn.call(e,e.media,"canplaythrough"),e.embed.getDuration().then((b=>{b!==e.media.duration&&(e.media.duration=b,Xn.call(e,e.media,"durationchange"))}))})),e.embed.on("seeked",(()=>{e.media.seeking=!1,Xn.call(e,e.media,"seeked")})),e.embed.on("ended",(()=>{e.media.paused=!0,Xn.call(e,e.media,"ended")})),e.embed.on("error",(v=>{e.media.error=v,Xn.call(e,e.media,"error")})),t.customControls&&setTimeout((()=>Ri.build.call(e)),0)}};function yfn(e){return Ae.empty(e)?null:e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e}function I2(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,Xn.call(this,this.media,e?"play":"pause"))}function vfn(e){return e.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const RM={setup(){if(bi(this.elements.wrapper,this.config.classNames.embed,!0),Ae.object(window.YT)&&Ae.function(window.YT.Player))RM.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{Ae.function(e)&&e(),RM.ready.call(this)},Zae(this.config.urls.youtube.sdk).catch((t=>{this.debug.warn("YouTube API failed to load",t)}))}},getTitle(e){QD(XX(this.config.urls.youtube.api,e)).then((t=>{if(Ae.object(t)){const{title:n,height:r,width:i}=t;this.config.title=n,Ri.setTitle.call(this),this.embed.ratio=nVe(i,r)}LC.call(this)})).catch((()=>{LC.call(this)}))},ready(){const e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(!Ae.empty(n)&&n.startsWith("youtube-"))return;let r=e.media.getAttribute("src");Ae.empty(r)&&(r=e.media.getAttribute(this.config.attributes.embed.id));const i=yfn(r),s=qn("div",{id:nfn(e.provider),"data-poster":t.customControls?e.poster:void 0});if(e.media=M$(s,e.media),t.customControls){const o=a=>`https://i.ytimg.com/vi/${i}/${a}default.jpg`;IM(o("maxres"),121).catch((()=>IM(o("sd"),121))).catch((()=>IM(o("hq")))).then((a=>Ri.setPoster.call(e,a.src))).then((a=>{a.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((()=>{}))}e.embed=new window.YT.Player(e.media,{videoId:i,host:vfn(t),playerVars:Zs({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(o){if(!e.media.error){const a=o.data,l={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[a]||"An unknown error occurred";e.media.error={code:a,message:l},Xn.call(e,e.media,"error")}},onPlaybackRateChange(o){const a=o.target;e.media.playbackRate=a.getPlaybackRate(),Xn.call(e,e.media,"ratechange")},onReady(o){if(Ae.function(e.media.play))return;const a=o.target;RM.getTitle.call(e,i),e.media.play=()=>{I2.call(e,!0),a.playVideo()},e.media.pause=()=>{I2.call(e,!1),a.pauseVideo()},e.media.stop=()=>{a.stopVideo()},e.media.duration=a.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(a.getCurrentTime()),set(d){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,Xn.call(e,e.media,"seeking"),a.seekTo(d)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>a.getPlaybackRate(),set(d){a.setPlaybackRate(d)}});let{volume:l}=e.config;Object.defineProperty(e.media,"volume",{get:()=>l,set(d){l=d,a.setVolume(100*l),Xn.call(e,e.media,"volumechange")}});let{muted:u}=e.config;Object.defineProperty(e.media,"muted",{get:()=>u,set(d){const f=Ae.boolean(d)?d:u;u=f,a[f?"mute":"unMute"](),a.setVolume(100*l),Xn.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>a.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const c=a.getAvailablePlaybackRates();e.options.speed=c.filter((d=>e.config.speed.options.includes(d))),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),Xn.call(e,e.media,"timeupdate"),Xn.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((()=>{e.media.buffered=a.getVideoLoadedFraction(),(e.media.lastBuffered===null||e.media.lastBuffered<e.media.buffered)&&Xn.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,e.media.buffered===1&&(clearInterval(e.timers.buffering),Xn.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((()=>Ri.build.call(e)),50)},onStateChange(o){const a=o.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(o.data)&&(e.media.seeking=!1,Xn.call(e,e.media,"seeked")),o.data){case-1:Xn.call(e,e.media,"timeupdate"),e.media.buffered=a.getVideoLoadedFraction(),Xn.call(e,e.media,"progress");break;case 0:I2.call(e,!1),e.media.loop?(a.stopVideo(),a.playVideo()):Xn.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(I2.call(e,!0),Xn.call(e,e.media,"playing"),e.timers.playing=setInterval((()=>{Xn.call(e,e.media,"timeupdate")}),50),e.media.duration!==a.getDuration()&&(e.media.duration=a.getDuration(),Xn.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),I2.call(e,!1);break;case 3:Xn.call(e,e.media,"waiting")}Xn.call(e,e.elements.container,"statechange",!1,{code:o.data})}}})}},uVe={setup(){this.media?(bi(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),bi(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&bi(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=qn("div",{class:this.config.classNames.video}),Jze(this.media,this.elements.wrapper),this.elements.poster=qn("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?qy.setup.call(this):this.isYouTube?RM.setup.call(this):this.isVimeo&&QX.setup.call(this)):this.debug.warn("No media element found!")}};class bfn{constructor(t){Kt(this,"load",(()=>{this.enabled&&(Ae.object(window.google)&&Ae.object(window.google.ima)?this.ready():Zae(this.player.config.urls.googleIMA.sdk).then((()=>{this.ready()})).catch((()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))})))})),Kt(this,"ready",(()=>{var n;this.enabled||((n=this).manager&&n.manager.destroy(),n.elements.displayContainer&&n.elements.displayContainer.destroy(),n.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((()=>{this.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()})),Kt(this,"setupIMA",(()=>{this.elements.container=qn("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(n=>this.onAdsManagerLoaded(n)),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(n=>this.onAdError(n)),!1),this.requestAds()})),Kt(this,"requestAds",(()=>{const{container:n}=this.player.elements;try{const r=new google.ima.AdsRequest;r.adTagUrl=this.tagUrl,r.linearAdSlotWidth=n.offsetWidth,r.linearAdSlotHeight=n.offsetHeight,r.nonLinearAdSlotWidth=n.offsetWidth,r.nonLinearAdSlotHeight=n.offsetHeight,r.forceNonLinearFullSlot=!1,r.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(r)}catch(r){this.onAdError(r)}})),Kt(this,"pollCountdown",((n=!1)=>{if(!n)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval((()=>{const r=gB(Math.max(this.manager.getRemainingTime(),0)),i=`${aa.get("advertisement",this.player.config)} - ${r}`;this.elements.container.setAttribute("data-badge-text",i)}),100)})),Kt(this,"onAdsManagerLoaded",(n=>{if(!this.enabled)return;const r=new google.ima.AdsRenderingSettings;r.restoreCustomPlaybackStateOnAdBreakComplete=!0,r.enablePreloading=!0,this.manager=n.getAdsManager(this.player,r),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(i=>this.onAdError(i))),Object.keys(google.ima.AdEvent.Type).forEach((i=>{this.manager.addEventListener(google.ima.AdEvent.Type[i],(s=>this.onAdEvent(s)))})),this.trigger("loaded")})),Kt(this,"addCuePoints",(()=>{Ae.empty(this.cuePoints)||this.cuePoints.forEach((n=>{if(n!==0&&n!==-1&&n<this.player.duration){const r=this.player.elements.progress;if(Ae.element(r)){const i=100/this.player.duration*n,s=qn("span",{class:this.player.config.classNames.cues});s.style.left=`${i.toString()}%`,r.appendChild(s)}}}))})),Kt(this,"onAdEvent",(n=>{const{container:r}=this.player.elements,i=n.getAd(),s=n.getAdData();switch((o=>{Xn.call(this.player,this.player.media,`ads${o.replace(/_/g,"").toLowerCase()}`)})(n.type),n.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=r.offsetWidth,i.height=r.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}})),Kt(this,"onAdError",(n=>{this.cancel(),this.player.debug.warn("Ads error",n)})),Kt(this,"listeners",(()=>{const{container:n}=this.player.elements;let r;this.player.on("canplay",(()=>{this.addCuePoints()})),this.player.on("ended",(()=>{this.loader.contentComplete()})),this.player.on("timeupdate",(()=>{r=this.player.currentTime})),this.player.on("seeked",(()=>{const i=this.player.currentTime;Ae.empty(this.cuePoints)||this.cuePoints.forEach(((s,o)=>{r<s&&s<i&&(this.manager.discardAdBreak(),this.cuePoints.splice(o,1))}))})),window.addEventListener("resize",(()=>{this.manager&&this.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)}))})),Kt(this,"play",(()=>{const{container:n}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then((()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(r){this.onAdError(r)}})).catch((()=>{}))})),Kt(this,"resumeContent",(()=>{this.elements.container.style.zIndex="",this.playing=!1,kp(this.player.media.play())})),Kt(this,"pauseContent",(()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()})),Kt(this,"cancel",(()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()})),Kt(this,"loadAds",(()=>{this.managerPromise.then((()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise((n=>{this.on("loaded",n),this.player.debug.log(this.manager)})),this.initialized=!1,this.requestAds()})).catch((()=>{}))})),Kt(this,"trigger",((n,...r)=>{const i=this.events[n];Ae.array(i)&&i.forEach((s=>{Ae.function(s)&&s.apply(this,r)}))})),Kt(this,"on",((n,r)=>(Ae.array(this.events[n])||(this.events[n]=[]),this.events[n].push(r),this))),Kt(this,"startSafetyTimer",((n,r)=>{this.player.debug.log(`Safety timer invoked from: ${r}`),this.safetyTimer=setTimeout((()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")}),n)})),Kt(this,"clearSafetyTimer",(n=>{Ae.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${n}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)})),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(((n,r)=>{this.on("loaded",n),this.on("error",r)})),this.load()}get enabled(){const{config:t}=this;return this.player.isHTML5&&this.player.isVideo&&t.enabled&&(!Ae.empty(t.publisherId)||Ae.url(t.tagUrl))}get tagUrl(){const{config:t}=this;return Ae.url(t.tagUrl)?t.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${aVe({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:t.publisherId})}`}}function cVe(e=0,t=0,n=255){return Math.min(Math.max(e,t),n)}const wfn=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach((n=>{const r={};n.split(/\r\n|\n|\r/).forEach((i=>{if(Ae.number(r.startTime)){if(!Ae.empty(i.trim())&&Ae.empty(r.text)){const s=i.trim().split("#xywh=");[r.text]=s,s[1]&&([r.x,r.y,r.w,r.h]=s[1].split(","))}}else{const s=i.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);s&&(r.startTime=60*Number(s[1]||0)*60+60*Number(s[2])+Number(s[3])+ +`0.${s[4]}`,r.endTime=60*Number(s[6]||0)*60+60*Number(s[7])+Number(s[8])+ +`0.${s[9]}`)}})),r.text&&t.push(r)})),t},x_e=(e,t)=>{const n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n};class JX{constructor(t){Kt(this,"load",(()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)}))})),Kt(this,"getThumbnails",(()=>new Promise((n=>{const{src:r}=this.player.config.previewThumbnails;if(Ae.empty(r))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort(((s,o)=>s.height-o.height)),this.player.debug.log("Preview thumbnails",this.thumbnails),n()};if(Ae.function(r))r((s=>{this.thumbnails=s,i()}));else{const s=(Ae.string(r)?[r]:r).map((o=>this.getThumbnail(o)));Promise.all(s).then(i)}})))),Kt(this,"getThumbnail",(n=>new Promise((r=>{QD(n).then((i=>{const s={frames:wfn(i),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=n.substring(0,n.lastIndexOf("/")+1));const o=new Image;o.onload=()=>{s.height=o.naturalHeight,s.width=o.naturalWidth,this.thumbnails.push(s),r()},o.src=s.urlPrefix+s.frames[0].text}))})))),Kt(this,"startMove",(n=>{if(this.loaded&&Ae.event(n)&&["touchmove","mousemove"].includes(n.type)&&this.player.media.duration){if(n.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var r,i;const s=this.player.elements.progress.getBoundingClientRect(),o=100/s.width*(n.pageX-s.left);this.seekTime=this.player.media.duration*(o/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=n.pageX,this.elements.thumb.time.innerText=gB(this.seekTime);const a=(r=this.player.config.markers)===null||r===void 0||(i=r.points)===null||i===void 0?void 0:i.find((({time:l})=>l===Math.round(this.seekTime)));a&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${a.label}<br>`)}this.showImageAtCurrentTime()}})),Kt(this,"endMove",(()=>{this.toggleThumbContainer(!1,!0)})),Kt(this,"startScrubbing",(n=>{(Ae.nullOrUndefined(n.button)||n.button===!1||n.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))})),Kt(this,"endScrubbing",(()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Qae.call(this.player,this.player.media,"timeupdate",(()=>{this.mouseDown||this.toggleScrubbingContainer(!1)}))})),Kt(this,"listeners",(()=>{this.player.on("play",(()=>{this.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(()=>{this.toggleThumbContainer(!1)})),this.player.on("timeupdate",(()=>{this.lastTime=this.player.media.currentTime}))})),Kt(this,"render",(()=>{this.elements.thumb.container=qn("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=qn("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const n=qn("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=qn("span",{},"00:00"),n.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(n),Ae.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=qn("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)})),Kt(this,"destroy",(()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()})),Kt(this,"showImageAtCurrentTime",(()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const n=this.thumbnails[0].frames.findIndex((s=>this.seekTime>=s.startTime&&this.seekTime<=s.endTime)),r=n>=0;let i=0;this.mouseDown||this.toggleThumbContainer(r),r&&(this.thumbnails.forEach(((s,o)=>{this.loadedImages.includes(s.frames[n].text)&&(i=o)})),n!==this.showingThumb&&(this.showingThumb=n,this.loadImage(i)))})),Kt(this,"loadImage",((n=0)=>{const r=this.showingThumb,i=this.thumbnails[n],{urlPrefix:s}=i,o=i.frames[r],a=i.frames[r].text,l=s+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,n,r,a,!1),this.currentImageElement.dataset.index=r,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const u=new Image;u.src=l,u.dataset.index=r,u.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log(`Loading image: ${l}`),u.onload=()=>this.showImage(u,o,n,r,a,!0),this.loadingImage=u,this.removeOldImages(u)}})),Kt(this,"showImage",((n,r,i,s,o,a=!0)=>{this.player.debug.log(`Showing thumb: ${o}. num: ${s}. qual: ${i}. newimg: ${a}`),this.setImageSizeAndOffset(n,r),a&&(this.currentImageContainer.appendChild(n),this.currentImageElement=n,this.loadedImages.includes(o)||this.loadedImages.push(o)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(i,n,r,o))})),Kt(this,"removeOldImages",(n=>{Array.from(this.currentImageContainer.children).forEach((r=>{if(r.tagName.toLowerCase()!=="img")return;const i=this.usingSprites?500:1e3;if(r.dataset.index!==n.dataset.index&&!r.dataset.deleting){r.dataset.deleting=!0;const{currentImageContainer:s}=this;setTimeout((()=>{s.removeChild(r),this.player.debug.log(`Removing thumb: ${r.dataset.filename}`)}),i)}}))})),Kt(this,"preloadNearby",((n,r=!0)=>new Promise((i=>{setTimeout((()=>{const s=this.thumbnails[0].frames[n].text;if(this.showingThumbFilename===s){let o;o=r?this.thumbnails[0].frames.slice(n):this.thumbnails[0].frames.slice(0,n).reverse();let a=!1;o.forEach((l=>{const u=l.text;if(u!==s&&!this.loadedImages.includes(u)){a=!0,this.player.debug.log(`Preloading thumb filename: ${u}`);const{urlPrefix:c}=this.thumbnails[0],d=c+u,f=new Image;f.src=d,f.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${u}`),this.loadedImages.includes(u)||this.loadedImages.push(u),i()}}})),a||i()}}),300)})))),Kt(this,"getHigherQuality",((n,r,i,s)=>{if(n<this.thumbnails.length-1){let o=r.naturalHeight;this.usingSprites&&(o=i.h),o<this.thumbContainerHeight&&setTimeout((()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(n+1))}),300)}})),Kt(this,"toggleThumbContainer",((n=!1,r=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,n),!n&&r&&(this.showingThumb=null,this.showingThumbFilename=null)})),Kt(this,"toggleScrubbingContainer",((n=!1)=>{const r=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(r,n),n||(this.showingThumb=null,this.showingThumbFilename=null)})),Kt(this,"determineContainerAutoSizing",(()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)})),Kt(this,"setThumbContainerSizeAndPos",(()=>{const{imageContainer:n}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(n.clientHeight>20&&n.clientWidth<20){const r=Math.floor(n.clientHeight*this.thumbAspectRatio);n.style.width=`${r}px`}else if(n.clientHeight<20&&n.clientWidth>20){const r=Math.floor(n.clientWidth/this.thumbAspectRatio);n.style.height=`${r}px`}}else{const r=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);n.style.height=`${this.thumbContainerHeight}px`,n.style.width=`${r}px`}this.setThumbContainerPos()})),Kt(this,"setThumbContainerPos",(()=>{const n=this.player.elements.progress.getBoundingClientRect(),r=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,s=r.left-n.left+10,o=r.right-n.left-i.clientWidth-10,a=this.mousePosX-n.left-i.clientWidth/2,l=cVe(a,s,o);i.style.left=`${l}px`,i.style.setProperty("--preview-arrow-offset",a-l+"px")})),Kt(this,"setScrubbingContainerSize",(()=>{const{width:n,height:r}=x_e(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${n}px`,this.elements.scrubbing.container.style.height=`${r}px`})),Kt(this,"setImageSizeAndOffset",((n,r)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/r.h;n.style.height=n.naturalHeight*i+"px",n.style.width=n.naturalWidth*i+"px",n.style.left=`-${r.x*i}px`,n.style.top=`-${r.y*i}px`})),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:t}=x_e(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return t}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(t){this.mouseDown?this.currentScrubbingImageElement=t:this.currentThumbnailImageElement=t}}const ZX={insertElements(e,t){Ae.string(t)?y_e(e,this.media,{src:t}):Ae.array(t)&&t.forEach((n=>{y_e(e,this.media,n)}))},change(e){Qze(e,"sources.length")?(qy.cancelRequests.call(this),this.destroy.call(this,(()=>{this.options.quality=[],_g(this.media),this.media=null,Ae.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:n}=e,[{provider:r=Iy.html5,src:i}]=t,s=r==="html5"?n:"div",o=r==="html5"?{}:{src:i};Object.assign(this,{provider:r,type:n,supported:to.check(n,r,this.config.playsinline),media:qn(s,o)}),this.elements.container.appendChild(this.media),Ae.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),Ae.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Ri.addStyleHook.call(this),this.isHTML5&&ZX.insertElements.call(this,"source",t),this.config.title=e.title,uVe.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&ZX.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ri.build.call(this),this.isHTML5&&this.media.load(),Ae.empty(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new JX(this))),this.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};let dVe=class eQ{constructor(t,n){if(Kt(this,"play",(()=>Ae.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((()=>this.ads.play())).catch((()=>kp(this.media.play()))),this.media.play()):null)),Kt(this,"pause",(()=>this.playing&&Ae.function(this.media.pause)?this.media.pause():null)),Kt(this,"togglePlay",(a=>(Ae.boolean(a)?a:!this.playing)?this.play():this.pause())),Kt(this,"stop",(()=>{this.isHTML5?(this.pause(),this.restart()):Ae.function(this.media.stop)&&this.media.stop()})),Kt(this,"restart",(()=>{this.currentTime=0})),Kt(this,"rewind",(a=>{this.currentTime-=Ae.number(a)?a:this.config.seekTime})),Kt(this,"forward",(a=>{this.currentTime+=Ae.number(a)?a:this.config.seekTime})),Kt(this,"increaseVolume",(a=>{const l=this.media.muted?0:this.volume;this.volume=l+(Ae.number(a)?a:0)})),Kt(this,"decreaseVolume",(a=>{this.increaseVolume(-a)})),Kt(this,"airplay",(()=>{to.airplay&&this.media.webkitShowPlaybackTargetPicker()})),Kt(this,"toggleControls",(a=>{if(this.supported.ui&&!this.isAudio){const l=$$(this.elements.container,this.config.classNames.hideControls),u=a===void 0?void 0:!a,c=bi(this.elements.container,this.config.classNames.hideControls,u);if(c&&Ae.array(this.config.controls)&&this.config.controls.includes("settings")&&!Ae.empty(this.config.settings)&&Vt.toggleMenu.call(this,!1),c!==l){const d=c?"controlshidden":"controlsshown";Xn.call(this,this.media,d)}return!c}return!1})),Kt(this,"on",((a,l)=>{ti.call(this,this.elements.container,a,l)})),Kt(this,"once",((a,l)=>{Qae.call(this,this.elements.container,a,l)})),Kt(this,"off",((a,l)=>{mB(this.elements.container,a,l)})),Kt(this,"destroy",((a,l=!1)=>{if(!this.ready)return;const u=()=>{document.body.style.overflow="",this.embed=null,l?(Object.keys(this.elements).length&&(_g(this.elements.buttons.play),_g(this.elements.captions),_g(this.elements.controls),_g(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),Ae.function(a)&&a()):(Zdn.call(this),qy.cancelRequests.call(this),M$(this.elements.original,this.elements.container),Xn.call(this,this.elements.original,"destroyed",!0),Ae.function(a)&&a.call(this.elements.original),this.ready=!1,setTimeout((()=>{this.elements=null,this.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Ri.toggleNativeControls.call(this,!0),u()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&Ae.function(this.embed.destroy)&&this.embed.destroy(),u()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(u),setTimeout(u,200))})),Kt(this,"supports",(a=>to.mime.call(this,a))),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=to.touch,this.media=t,Ae.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||Ae.nodeList(this.media)||Ae.array(this.media))&&(this.media=this.media[0]),this.config=Zs({},lVe,eQ.defaults,n||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new dfn(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",to),Ae.nullOrUndefined(this.media)||!Ae.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!to.check().api)return void this.debug.error("Setup failed: no support");const r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;const i=this.media.tagName.toLowerCase();let s=null,o=null;switch(i){case"div":if(s=this.media.querySelector("iframe"),Ae.element(s)){if(o=oVe(s.getAttribute("src")),this.provider=cfn(o.toString()),this.elements.container=this.media,this.media=s,this.elements.container.className="",o.search.length){const a=["1","true"];a.includes(o.searchParams.get("autoplay"))&&(this.config.autoplay=!0),a.includes(o.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=a.includes(o.searchParams.get("playsinline")),this.config.youtube.hl=o.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(Ae.empty(this.provider)||!Object.values(Iy).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=eq.video;break;case"video":case"audio":this.type=i,this.provider=Iy.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=to.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new ffn(this),this.storage=new WI(this),this.media.plyr=this,Ae.element(this.elements.container)||(this.elements.container=qn("div"),Jze(this.media,this.elements.container)),Ri.migrateStyles.call(this),Ri.addStyleHook.call(this),uVe.setup.call(this),this.config.debug&&ti.call(this,this.elements.container,this.config.events.join(" "),(a=>{this.debug.log(`event: ${a.type}`)})),this.fullscreen=new Mf(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ri.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new bfn(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(()=>kp(this.play()))),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new JX(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===Iy.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===Iy.youtube}get isVimeo(){return this.provider===Iy.vimeo}get isVideo(){return this.type===eq.video}get isAudio(){return this.type===eq.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(t){if(!this.duration)return;const n=Ae.number(t)&&t>0;this.media.currentTime=n?Math.min(t,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:t}=this.media;return Ae.number(t)?t:t&&t.length&&this.duration>0?t.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const t=parseFloat(this.config.duration),n=(this.media||{}).duration,r=Ae.number(n)&&n!==1/0?n:0;return t||r}set volume(t){let n=t;Ae.string(n)&&(n=Number(n)),Ae.number(n)||(n=this.storage.get("volume")),Ae.number(n)||({volume:n}=this.config),n>1&&(n=1),n<0&&(n=0),this.config.volume=n,this.media.volume=n,!Ae.empty(t)&&this.muted&&n>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(t){let n=t;Ae.boolean(n)||(n=this.storage.get("muted")),Ae.boolean(n)||(n=this.config.muted),this.config.muted=n,this.media.muted=n}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(t){let n=null;Ae.number(t)&&(n=t),Ae.number(n)||(n=this.storage.get("speed")),Ae.number(n)||(n=this.config.speed.selected);const{minimumSpeed:r,maximumSpeed:i}=this;n=cVe(n,r,i),this.config.speed.selected=n,setTimeout((()=>{this.media&&(this.media.playbackRate=n)}),0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(t){const n=this.config.quality,r=this.options.quality;if(!r.length)return;let i=[!Ae.empty(t)&&Number(t),this.storage.get("quality"),n.selected,n.default].find(Ae.number),s=!0;if(!r.includes(i)){const o=Zze(r,i);this.debug.warn(`Unsupported quality option: ${i}, using ${o} instead`),i=o,s=!1}n.selected=i,this.media.quality=i,s&&this.storage.set({quality:i})}get quality(){return this.media.quality}set loop(t){const n=Ae.boolean(t)?t:this.config.loop.active;this.config.loop.active=n,this.media.loop=n}get loop(){return!!this.media.loop}set source(t){ZX.change.call(this,t)}get source(){return this.media.currentSrc}get download(){const{download:t}=this.config.urls;return Ae.url(t)?t:this.source}set download(t){Ae.url(t)&&(this.config.urls.download=t,Vt.setDownloadUrl.call(this))}set poster(t){this.isVideo?Ri.setPoster.call(this,t,!1).catch((()=>{})):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const t=F$(Jae.call(this));return Ae.array(t)?t.join(":"):t}set ratio(t){this.isVideo?Ae.string(t)&&tVe(t)?(this.config.ratio=F$(t),LC.call(this)):this.debug.error(`Invalid aspect ratio specified (${t})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(t){this.config.autoplay=Ae.boolean(t)?t:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(t){si.toggle.call(this,t,!1)}set currentTrack(t){si.set.call(this,t,!1),si.setup.call(this)}get currentTrack(){const{toggled:t,currentTrack:n}=this.captions;return t?n:-1}set language(t){si.setLanguage.call(this,t,!1)}get language(){return(si.getCurrentTrack.call(this)||{}).language}set pip(t){if(!to.pip)return;const n=Ae.boolean(t)?t:!this.pip;Ae.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(n?ZH.active:ZH.inactive),Ae.function(this.media.requestPictureInPicture)&&(!this.pip&&n?this.media.requestPictureInPicture():this.pip&&!n&&document.exitPictureInPicture())}get pip(){return to.pip?Ae.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===ZH.active:null}setPreviewThumbnails(t){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,t),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new JX(this))}static supported(t,n){return to.check(t,n)}static loadSprite(t,n){return iVe(t,n)}static setup(t,n={}){let r=null;return Ae.string(t)?r=Array.from(document.querySelectorAll(t)):Ae.nodeList(t)?r=Array.from(t):Ae.array(t)&&(r=t.filter(Ae.element)),Ae.empty(r)?null:r.map((i=>new eQ(i,n)))}};dVe.defaults=Kdn(lVe);function xfn(e,t,n=[]){const[r,i]=k.useState(null),s=k.useRef(null),{instantiate:o,destroy:a,getAPI:l,params:u}=t;k.useEffect(()=>{const d=o(s.current,u);return i(d),()=>{a&&a(d,u)}},n);const c=k.useMemo(()=>l(r,u),[r]);return k.useImperativeHandle(e,c,[c]),s}const _fn={},Efn=(e,t)=>{const n=new dVe(".plyr-react",t.options||{});return t.source&&(n.source=t.source),n},Cfn=e=>{e&&e.destroy()},Sfn=()=>{},Tfn=e=>e?()=>({plyr:e}):()=>new Proxy({plyr:{source:null}},{get:(t,n)=>n==="plyr"?t[n]:Sfn});function fVe(e,t,n=null){return xfn(e,{instantiate:Efn,getAPI:Tfn,destroy:Cfn,params:t},n||[t.options,t.source])}const nq=k.forwardRef((e,t)=>{const{source:n,options:r=null,...i}=e,s=fVe(t,{source:n,options:r});return w.jsx("video",{ref:s,className:"plyr-react plyr",...i})});(_fn&&"production")!=="production"&&(nq.displayName="Plyr",nq.defaultProps={options:{controls:["rewind","play","fast-forward","progress","current-time","duration","mute","volume","settings","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop"}},source:{type:"video",sources:[{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:720},{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:1080}]}},nq.propTypes={options:d6.object,source:d6.any});function Afn(e){return/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)[\w-]{11}/.test(e)}function kfn(e){return/^(https?:\/\/)?(www\.)?vimeo\.com\/\d+/.test(e)}const Ifn=k.forwardRef((e,t)=>{const{source:n,options:r=null,endedCallback:i}=e,s=fVe(t,{options:r,source:n});return k.useEffect(()=>{const{current:o}=t;o.plyr.source!==null&&o.plyr.on("ended",i)}),w.jsx("video",{ref:s,className:"plyr-react plyr"})});function Rfn({currentConfig:e}){const t=k.useMemo(()=>e.path.startsWith("http")?e.path:`${as}${e.path}`,[e.path]),[n,r]=k.useState(!0),[i,s]=k.useState(!1);k.useEffect(()=>{async function p(){if(r(!0),t.includes("youtube")){const m=`https://www.youtube.com/oembed?url=${encodeURIComponent(t)}&format=json`;try{const g=await fetch(m);s(g.ok)}catch{s(!1)}}else if(t.includes("vimeo")){const m=`https://vimeo.com/api/oembed.json?url=${encodeURIComponent(t)}`;try{const g=await fetch(m);s(g.ok)}catch{s(!1)}}else{const m=await b8(t);s(!!m)}r(!1)}p()},[t]);const o=k.useMemo(()=>t.includes("youtube")?Afn(t)?[{src:t,provider:"youtube"}]:(s(!1),[]):t.includes("vimeo")?kfn(t)?[{src:t,provider:"vimeo"}]:(s(!1),[]):[{src:t,type:"video/mp4"}],[t]),a=k.useMemo(()=>({controls:[e.forceCompletion!==!1?"play-large":"play","current-time",...e.withTimeline?["progress"]:[],"volume","fullscreen"]}),[e.forceCompletion,e.withTimeline]),l=$h(),u=id(),c=Us(),{updateResponseBlockValidation:d}=ls();k.useEffect(()=>{e.forceCompletion&&c(d({location:"stimulus",identifier:`${l}_${u}`,status:!1,values:{}}))},[l,e.forceCompletion,u,c,d]);const f=k.useCallback(()=>{e.forceCompletion&&c(d({location:"stimulus",identifier:`${l}_${u}`,status:!0,values:{}}))},[l,e.forceCompletion,u,c,d]),h=k.useRef(null);return i&&o.length>0?w.jsx(De,{children:w.jsx(Ifn,{ref:h,source:{type:"video",sources:o},options:a,endedCallback:f})}):n?w.jsx(hu,{}):w.jsx(i0,{path:e.path})}function Dfn(){const[e]=nd(),t=k.useMemo(()=>e.get("participantId")||void 0,[e]),[n,r]=k.useState(!1),[i,s]=k.useState(!1),o=gr(m=>m.analysisIsPlaying),a=gr(m=>m.provenanceJumpTime),l=k.useRef(null),{storageEngine:u}=Vi(),{setAnalysisHasScreenRecording:c,setAnalysisCanPlayScreenRecording:d}=ls(),f=Us(),h=k0(),p=n0();return k.useEffect(()=>{l.current&&(l.current.currentTime=(0+a)/1e3,o?l.current.play():l.current.pause())},[o,a]),k.useEffect(()=>{const m=l.current;m&&(m.currentTime=0,m.onpause=()=>{s(!1)},m.onplay=()=>{s(!0)},setTimeout(()=>{r(!0)},300))},[d,f]),k.useEffect(()=>{async function m(){if(h&&p&&u)try{if(!t)throw new Error("Participant ID is required to load audio");const g=await u.getScreenRecording(p,t);if(!g){f(c(!1)),f(d(!1));return}if(f(c(!0)),l.current){const y=l.current;y.preload="metadata",g&&(l.current.src=g)}}catch(g){throw f(c(!1)),f(d(!1)),new Error(g)}else f(c(!1)),f(d(!1))}m()},[h,p,u,t,f,c,d]),w.jsxs(De,{pos:"relative",children:[w.jsx(hu,{visible:!n,zIndex:1e3,overlayProps:{blur:5,bg:"rgba(255, 255, 255, .98)"}}),w.jsxs("video",{ref:l,width:"100%",style:{background:"black",maxWidth:"100%",maxHeight:"calc(100vh - 270px)",display:"block",margin:"20px auto",height:n?"auto":200,border:`5px solid ${i?"#ccc":"black"}`},children:[w.jsx("source",{type:"video/mp4"}),"Your browser does not support the video tag."]})]})}function Pfn(){const e=pc(),t=id(),n=$h(),r=Mh(),i=e.components[n],{storageEngine:s}=Vi(),o=gr(ne=>ne.answers),a=k.useRef(null),l=gr(ne=>ne.analysisCanPlayScreenRecording),{setIsRecording:u,setAnalysisCanPlayScreenRecording:c}=ls(),d=gr(ne=>ne.analysisProvState.stimulus),f=k.useRef(null),h=n0(),p=$l(),{studyHasScreenRecording:m,studyHasAudioRecording:g,currentComponentHasAudioRecording:y,currentComponentHasScreenRecording:v}=Vee(),{isMediaCapturing:b,stopScreenCapture:_,startScreenRecording:E,stopScreenRecording:S,combinedMediaRecorder:T}=Uee(),A=k0(),R=f1(),I=gr(ne=>ne.sequence),P=gr(ne=>ne.modes),[N]=nd(),M=gr(ne=>ne.participantId),O=k.useMemo(()=>N.get("participantId"),[N]);p5e();const j=Us(),{setAlertModal:B}=ls();k.useEffect(()=>{s?.getEngine()!=="firebase"&&j(B({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh.",title:"Failed to connect to the storage engine"}))},[B,s,j]),k.useEffect(()=>{!e||m||!g||!s||R&&R.endTime>0||A||(a.current&&(a.current.stream.getTracks().forEach(ne=>{ne.stop(),a.current?.stream.removeTrack(ne)}),a.current.stream.getAudioTracks().forEach(ne=>{ne.stop(),a.current?.stream.removeTrack(ne)}),a.current.stop(),a.current=null),i&&!y||n==="end"?j(u(!1)):navigator.mediaDevices.getUserMedia({audio:!0}).then(ne=>{const ue=new MediaRecorder(ne);a.current=ue;let se=[];ue.addEventListener("start",()=>{se=[]}),ue.addEventListener("dataavailable",he=>{he.data&&he.data.size>0&&se.push(he.data)});const ae=h;ue.addEventListener("stop",()=>{const{mimeType:he}=ue,ie=new Blob(se,{type:he});s?.saveAudioRecording(ie,ae)}),a.current.start(),j(u(!0))}))},[n,h,y]),k.useEffect(()=>{!e||!m||!s||R&&R.endTime>0||A||(T.current&&(S(),f.current=null),n!=="end"&&b&&f.current!==h&&(y||v)&&(f.current=h,E(h)),n==="end"&&_())},[n,h,y,v,b]);const[H,q]=k.useState([]),G=k.useRef([]);k.useEffect(()=>{if(A)return;async function ne(){const se=nPe(I,t)?.map(ae=>ae.currentBlock.id).filter(ae=>ae!==void 0)||[];q(se)}async function ue(){const se=G.current;JSON.stringify(se)!==JSON.stringify(H)&&H.length>0&&s&&await s.addParticipantTags(H),G.current=H}ne().then(ue)},[t,s,I]);const U=n0(),L=k.useMemo(()=>{const ne=n&&n!=="end"&&!n.startsWith("__")&&lu(i,e);if(typeof ne=="object"){const ue=o[U]?.parameters,se=o[U]?.correctAnswer;return{...ne,parameters:ue||ne.parameters||{},correctAnswer:se||ne.correctAnswer||void 0}}return ne},[o,n,U,i,e]);k.useEffect(()=>{j(c(!0))},[t,c,j]),tre(L?.stylesheetPath);const{funcIndex:z}=So();if(k.useEffect(()=>{if(R&&R.endTime>0&&!A&&!P.studyNavigatorEnabled&&n!=="end"&&!n.startsWith("__")&&typeof t=="number"){let ne="0";Object.values(o).forEach(ie=>{ie.endTime>0&&(ne=ie.trialOrder)});const[ue,se]=ne.split("_"),ae=Number(ue),he=se?Number(se):void 0;(ae>t||ae===t&&he!==void 0&&z!==void 0&&he>Number(oh(z)))&&p(`/${r}/${js(ae)}${he!==void 0?`/${js(he)}`:""}`)}},[o,n,t,z,A,P.studyNavigatorEnabled,p,R,r]),n==="end")return w.jsx(Ojt,{});if(n==="__dynamicLoading")return null;if(n==="__trainingFailed")return w.jsx(Njt,{});if(n==="__timedOut")return w.jsx(Mjt,{});if(n==="Notfound")return w.jsx(i0,{email:e.uiConfig.contactEmail});if(!s?.isConnected())return w.jsxs(Ko,{style:{height:"80vh",flexDirection:"column",textAlign:"center"},children:[w.jsx(dct,{size:48,stroke:1.5,color:"orange"}),w.jsx(ri,{mt:"md",order:4,children:"Database Disconnected"}),w.jsx(He,{mt:"md",children:"Please check your network connection or disable your adblocker for this site, then refresh the page."})]});if(O&&M!==O)return w.jsx(Ko,{style:{height:"80vh"},children:w.jsx(td,{})});const V=L?.instruction||"",Y=L.instructionLocation??e.uiConfig.instructionLocation??"sidebar",Q=Y==="sidebar";return m&&A&&l?w.jsx(Dfn,{},`${t}-stimulus`):w.jsxs(w.Fragment,{children:[Y==="aboveStimulus"&&w.jsx(Zp,{text:V}),w.jsx(uK,{status:R,config:L,location:"aboveStimulus"},`${t}-above-response-block`),w.jsx(De,{id:n,className:L.type,style:{width:"100%",display:"flex",flexGrow:L.type==="website"?1:void 0,flexDirection:"column",...L.style},children:w.jsx(k.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:w.jsxs(w.Fragment,{children:[L.type==="markdown"&&w.jsx(xjt,{currentConfig:L}),L.type==="website"&&w.jsx(gjt,{currentConfig:L,provState:d,answers:o}),L.type==="image"&&w.jsx(vjt,{currentConfig:L}),L.type==="react-component"&&w.jsx(wjt,{currentConfig:L,provState:d,answers:o}),L.type==="vega"&&w.jsx(mdn,{currentConfig:L,provState:d}),L.type==="video"&&w.jsx(Rfn,{currentConfig:L})]})},`${t}-stimulus`)}),(Y==="belowStimulus"||Y===void 0&&!Q)&&w.jsx(Zp,{text:V}),w.jsx(uK,{status:R,config:L,location:"belowStimulus"},`${t}-below-response-block`)]})}function hVe(e){const[t]=nd();return w.jsx(nee,{...e,to:{pathname:e.to,search:t.toString()}})}function pVe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(o.order==="dynamic"?i+=1:i+=pVe(o,t,n,r),r.includes(o.orderPath))break}return i}function mVe(e,t){let n=0;return t.components.forEach(r=>{if(typeof r=="string"&&e.interruptions?.flatMap(i=>i.components).includes(r))n+=1;else if(typeof r!="string"){const i=e.components.find(s=>typeof s!="string"&&s.orderPath===r.orderPath);n+=mVe(i,r)}}),n}function Ofn(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),e&&n.push(...e),n}function Nfn(e){return e.some(t=>t.type==="radio"||t.type==="checkbox"||t.type==="buttons"?t.optionOrder==="random":t.type==="matrix-radio"||t.type==="matrix-checkbox"?t.questionOrder==="random":!1)}function Mfn({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:l,parentBlock:u,parentActive:c,answers:d}){const f=Mh(),h=$l(),p=id(),m=o.components[e]&&lu(o.components[e],o),g=a&&a.components.slice(r).includes(e)?pVe(n,e,r,a.orderPath):-1,{trialId:y,funcIndex:v,analysisTab:b}=So(),[_]=nd(),E=k.useMemo(()=>_.get("participantId"),[_]),S=b?[]:n1(),T=y===e,A=c&&u&&v?r===oh(v):!1,R=s?p===g||A:p===`reviewer-${e}`,I=l?T:R,P=y?`./../${e}`:`./${e}`,N=u.order==="dynamic"?`/${f}/${js(S.indexOf(u.id))}/${js(r)}`:"",M=s?u.order==="dynamic"?N:`/${f}/${js(g)}`:`/${f}/reviewer-${e}`,O=l?()=>h(P):()=>h(`${M}${E?`?participantId=${E}`:""}`),j=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,B=e.includes("$")&&j&&e.includes(j)?e.split(j).at(-1):e,H=u.order==="dynamic"?Object.entries(d).find(([ae,he])=>ae===`${u.id}_${S.indexOf(u.id)}_${B}_${r}`):Object.entries(d).find(([ae,he])=>ae===`${B}_${g}`||ae===`${e}_${g}`),q=H?H[1]:null,G=q&&q.correctAnswer.length>0&&Object.keys(q.answer).length>0&&q.correctAnswer,U=G&&q&&ux(q.answer,G),L=q&&G?U?w.jsx(mv,{size:16,style:{marginRight:4,flexShrink:0},color:"green"}):w.jsx(Wg,{size:16,style:{marginRight:4,flexShrink:0},color:"red"}):null,z=6,V=m&&JSON.stringify(m.response,null,2),[Y,Q]=k.useState(z),ne=q&&q.correctAnswer.length>0?JSON.stringify(q.correctAnswer,null,2):m&&m.correctAnswer?JSON.stringify(m.correctAnswer,null,2):void 0,[ue,se]=k.useState(z);return w.jsxs(Ub,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",offset:0,closeDelay:0,children:[w.jsx(UF,{active:I,style:{lineHeight:"32px",height:"32px"},label:w.jsxs(Rt,{align:"center",children:[i&&w.jsx(bt,{label:"Interruption",position:"right",withArrow:!0,children:w.jsx(Elt,{size:16,style:{marginRight:4,flexShrink:0},color:"orange"})}),e!==B&&w.jsx(bt,{label:"Package import",position:"right",withArrow:!0,children:w.jsx(rct,{size:16,style:{marginRight:4,flexShrink:0},color:"blue"})}),m?.responseOrder==="random"&&w.jsx(bt,{label:"Random responses",position:"right",withArrow:!0,children:w.jsx(hut,{size:16,opacity:.8,style:{marginRight:4,flexShrink:0},color:"black"})}),m?.response&&Nfn(m.response)&&w.jsx(bt,{label:"Random options",position:"right",withArrow:!0,children:w.jsx(mut,{size:16,opacity:.8,style:{marginRight:4,flexShrink:0},color:"black"})}),L,w.jsx(He,{size:"sm",span:I,fw:I?"700":void 0,display:"inline",title:B,style:{textWrap:"nowrap",flexGrow:1,width:0,textOverflow:"ellipsis",overflow:"hidden"},children:B}),B!=="end"&&w.jsx(Ub.Target,{children:w.jsx(qg,{size:16,style:{marginLeft:"5px",verticalAlign:"middle"},opacity:.5})})]}),onClick:O,disabled:t&&u.order!=="dynamic"}),m&&w.jsx(Ub.Dropdown,{children:w.jsxs(De,{mah:700,maw:500,style:{overflow:"auto"},children:[w.jsxs(De,{children:[w.jsx(He,{fw:900,display:"inline-block",mr:2,children:"Name:"})," ",w.jsx(He,{fw:400,component:"span",children:B})]}),m.description&&w.jsxs(De,{children:[w.jsx(He,{fw:900,display:"inline-block",mr:2,children:"Description:"})," ",w.jsx(He,{fw:400,component:"span",children:m.description})]}),("parameters"in m||q)&&w.jsxs(De,{children:[w.jsx(He,{fw:900,display:"inline-block",mr:2,children:"Parameters:"})," ",w.jsx(Cp,{block:!0,children:q&&JSON.stringify(Object.keys(q).length>0?q.parameters:"parameters"in m?m.parameters:{},null,2)})]}),q&&Object.keys(q.answer).length>0&&w.jsxs(De,{children:[w.jsxs(He,{fw:900,display:"inline-block",mr:2,children:[L,"Participant Answer:"]})," ",w.jsx(Cp,{block:!0,children:JSON.stringify(q.answer,null,2)})]}),ne&&w.jsxs(De,{children:[w.jsx(He,{fw:900,display:"inline-block",mr:2,children:"Correct Answer:"})," ",w.jsxs(Cp,{block:!0,children:[w.jsx(He,{size:"xs",lineClamp:ue,children:ne}),ne.split(`
`).length>z&&w.jsx(Rt,{justify:"flex-end",children:(ue===void 0||ne.split(`
`).length>ue)&&w.jsx(Yt,{variant:"light",size:"xs",onClick:()=>{se(ae=>ae===z?void 0:z)},children:ue!==void 0?"Show more":"Show less"})})]})]}),w.jsxs(De,{children:[w.jsx(He,{fw:900,display:"inline-block",mr:2,children:"Response:"})," ",w.jsxs(Cp,{block:!0,children:[w.jsx(He,{size:"xs",lineClamp:Y,children:V}),V.split(`
`).length>z&&w.jsx(Rt,{justify:"flex-end",children:(Y===void 0||V.split(`
`).length>Y)&&w.jsx(Yt,{variant:"light",size:"xs",onClick:()=>{Q(ae=>ae===z?void 0:z)},children:Y!==void 0?"Show more":"Show less"})})]})]}),m.meta&&w.jsxs(De,{children:[w.jsx(He,{fw:"900",component:"span",children:"Task Meta: "}),w.jsx(Cp,{block:!0,children:JSON.stringify(m.meta,null,2)})]})]})})]})}function L$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){let o=structuredClone(e.components);n&&r&&(o=Ofn(structuredClone(e.components),structuredClone(n.components)));const{analysisTab:a}=So();let l={};a||(l=gr(T=>T.answers)),r||(o=[...e.interruptions?.flatMap(T=>T.components)||[],...o||[]]);const u=k.useMemo(()=>n?Kd(n).length-mVe(e,n):0,[e,n]),c=k.useMemo(()=>Kd(e),[e]),[d,f]=k.useState(u>0),[h]=nd(),p=k.useMemo(()=>h.get("participantId"),[h]),m=id(),g=a?[]:n1(),y=typeof m=="number"&&e.order==="dynamic"&&g[m]===e.id,v=e.id&&g.indexOf(e.id)||-1,b=Mh(),_=$l(),E=()=>_(`/${b}/${js(v)}/${js(0)}${p?`?participantId=${p}`:""}`),S=[...o,...Object.entries(l).filter(([T,A])=>T.startsWith(`${e.id}_${v}_`)).map(([T,A])=>A.componentName)];return w.jsx(UF,{active:y,label:w.jsxs(Rt,{align:"center",style:{opacity:u>0?1:.5},children:[w.jsx(He,{size:"sm",display:"inline",fw:y?900:700,title:e.id?e.id:e.order,style:{textWrap:"nowrap",flexGrow:1,width:0,textOverflow:"ellipsis",overflow:"hidden"},children:e.id?e.id:e.order}),e.order==="random"||e.order==="latinSquare"?w.jsx(bt,{label:e.order,position:"right",withArrow:!0,children:w.jsx(ult,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&w.jsx(_o,{ml:5,variant:"light",children:e.order==="dynamic"?`${Object.keys(l).filter(T=>T.startsWith(`${e.id}_`)).length} / ?`:`${u}/${c.length}`}),r&&e.interruptions&&w.jsx(_o,{ml:5,color:"orange",variant:"light",children:n?.components.filter(T=>typeof T=="string"&&e.interruptions?.flatMap(A=>A.components).includes(T)).length||0})]}),opened:d,onClick:()=>e.order==="dynamic"&&!s&&r?E():f(!d),childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:d?w.jsx(De,{style:{borderLeft:"1px solid #e9ecef"},children:S.map((T,A)=>{if(typeof T=="string")return w.jsx(Mfn,{step:T,disabled:r&&n?.components[A]!==T,fullSequence:t,startIndex:A,interruption:e.interruptions&&e.interruptions.findIndex(I=>I.components.includes(T))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s,parentBlock:e,parentActive:y,answers:l},A);const R=n?.components.find(I=>typeof I!="string"&&I.orderPath===T.orderPath);return w.jsx(L$,{configSequence:T,participantSequence:R,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s},A)})}):null},e.id)}function gVe(e,t){e?.clearCurrentParticipantId().then(()=>{window.location.href=t}).catch(n=>{console.error(n)})}function __e({text:e}){return w.jsx(bt,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:w.jsx(qg,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function $fn(){const e=gr(h=>h.sequence),{toggleStudyBrowser:t}=ls(),n=pc(),r=Us(),i=Mh(),s=p6(`/${i}`),{storageEngine:o}=Vi(),a=k0(),l=k.useMemo(()=>{let h=structuredClone(n.sequence);return h=zee(h,"root"),h.components.push("end"),h},[n.sequence]),[u,c]=k.useState("participant"),d=k.useMemo(()=>u==="allTrials"||a,[u,a]),f=gr(h=>h.modes);return w.jsxs(ps.Aside,{className:"studyBrowser",p:"0",children:[w.jsxs(ps.Section,{p:"sm",pb:0,children:[w.jsxs(Rt,{direction:"row",justify:"space-between",children:[w.jsx(He,{size:"md",fw:700,pt:3,children:"Study Browser"}),w.jsx(bt,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:w.jsx(Yt,{variant:"light",leftSection:w.jsx(uee,{size:14}),onClick:()=>gVe(o,s),size:"xs",disabled:d,children:"Next Participant"})}),a?w.jsx(bt,{label:"The study browser cannot be closed in replay mode",withinPortal:!0,children:w.jsx(Jp,{onClick:()=>r(t()),mt:1,disabled:a})}):w.jsx(Jp,{onClick:()=>r(t()),mt:1,disabled:a})]}),w.jsxs(Rt,{direction:"row",justify:"space-between",align:"center",mt:"xs",opacity:.7,children:[w.jsxs(He,{size:"sm",children:["Study Status:"," ",f?.dataCollectionEnabled?"Collecting Data":"Data Collection Disabled"]}),w.jsxs(Rt,{gap:"sm",align:"center",children:[w.jsx(bt,{label:"Edit Study Settings",withinPortal:!0,position:"bottom",children:w.jsx(Rn,{variant:"white","aria-label":"Edit Study Modes",component:"a",href:p6(`/analysis/stats/${i}/manage`),p:0,children:w.jsx(Sct,{style:{width:"70%",height:"70%"},stroke:1.5,size:16})})}),f?.analyticsInterfacePubliclyAccessible?w.jsx(bt,{label:"Analytics interface publicly accessible",multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:w.jsx(vIe,{size:16,color:"green"})}):w.jsx(bt,{label:"Analytics interface not publicly accessible",multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:w.jsx(yIe,{size:16,color:"red"})}),o?.getEngine()==="localStorage"?w.jsx(bt,{label:"Local storage enabled",withinPortal:!0,position:"bottom",children:w.jsx(m6,{size:16,color:"green"})}):o?.getEngine()==="firebase"?w.jsx(bt,{label:"Firebase enabled",withinPortal:!0,position:"bottom",children:w.jsx(dIe,{size:16,color:"green"})}):o?.getEngine()==="supabase"?w.jsx(bt,{label:"Supabase enabled",withinPortal:!0,position:"bottom",children:w.jsx(aee,{size:16,color:"green"})}):w.jsx(bt,{label:"Unknown storage engine enabled",withinPortal:!0,position:"bottom",children:w.jsx(m6,{size:16,color:"red"})})]})]})]}),w.jsx(ps.Section,{grow:!0,component:Qp,p:"xs",pt:4,children:w.jsxs(wr,{value:u,onChange:c,children:[w.jsx(De,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:w.jsxs(wr.List,{grow:!0,children:[w.jsxs(wr.Tab,{value:"participant",children:["Participant View",w.jsx(__e,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),w.jsxs(wr.Tab,{value:"allTrials",disabled:a,children:["All Trials View",w.jsx(__e,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),w.jsx(wr.Panel,{value:"participant",children:w.jsx(L$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:n})}),w.jsx(wr.Panel,{value:"allTrials",children:w.jsx(L$,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:n})})]})})]})}function Ffn({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=gr(q=>q.config),r=gr(q=>q.answers),i=gr(q=>q.storageEngineFailedToConnect),s=n1(),o=Us(),{toggleShowHelpText:a,toggleStudyBrowser:l,incrementHelpCounter:u}=ls(),{storageEngine:c}=Vi(),d=$h(),f=k.useMemo(()=>lu(n.components[d]||{},n),[d,n]),h=id(),p=k.useMemo(()=>{const q=Object.values(r).filter(U=>U.endTime>-1).length,G=s.map((U,L)=>n.components[U]?1:typeof h=="number"&&h<=L&&U!=="end"?55:Object.entries(r).filter(([z,V])=>z.includes(`${U}_`)).length).reduce((U,L)=>U+L,0);return q/G*100},[r,h,s,n.components]),[m,g]=k.useState(!1),y=n?.uiConfig.logoPath,v=k.useMemo(()=>f.withProgressBar??n.uiConfig.withProgressBar,[f,n]),b=k.useMemo(()=>f.showTitle??n.uiConfig.showTitle??!0,[f,n]),_=Mh(),E=p6(`/${_}`),S=k.useRef(null),[T,A]=k.useState(!1),R=k.useRef(0),I=gr(q=>q.isRecording),{isScreenRecording:P,isAudioRecording:N}=Uee(),M=I||N,{funcIndex:O}=So();k.useEffect(()=>{const q=S.current;q&&A(q.scrollWidth>q.offsetWidth)},[n]),k.useEffect(()=>{if(n&&c&&t){const q=U1t(r,s,n,h,O),G=q.total>0?q.answered.length/q.total*100:0;G!==R.current&&G>0&&!Number.isNaN(G)&&(R.current=G,c.updateProgressData(q).catch(U=>{console.warn("Failed to update progress data:",U)}))}},[r,s,n,h,c,t,O]);const{setAlertModal:j}=ls(),[B,H]=k.useState(!0);return i&&B&&(o(j({show:!0,message:`You may be behind a firewall blocking access, or the server collecting data may be down. Study data will not be saved. If you're taking the study you will not be compensated for your efforts. You are welcome to look around. If you are attempting to participate in the study, please email ${n.uiConfig.contactEmail} for assistance.`,title:"Failed to connect to the storage engine"})),H(!1)),w.jsx(ps.Header,{className:"header",p:"md",children:w.jsxs(Ss,{mt:-7,align:"center",children:[w.jsx(Ss.Col,{span:4,children:w.jsxs(Rt,{align:"center",children:[w.jsx(x0,{w:40,src:`${as}${y}`,alt:"Study Logo",className:"logoImage"}),w.jsx(zd,{w:"md"}),b?w.jsx(ri,{ref:S,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:T?n?.studyMetadata.title:void 0,className:"studyTitle",children:n?.studyMetadata.title}):null]})}),w.jsx(Ss.Col,{span:4,children:v&&w.jsx(Gw,{radius:"md",size:"lg",value:p,className:"progressBar"})}),w.jsx(Ss.Col,{span:4,children:w.jsxs(Pn,{wrap:"nowrap",justify:"right",children:[(M||P)&&w.jsxs(Pn,{ml:"xl",gap:20,wrap:"nowrap",children:[w.jsxs(He,{c:"red",children:["Recording",P&&" screen",P&&M&&" and",M&&" audio"]}),M&&w.jsx(Fee,{})]}),i&&w.jsx(bt,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"Failed to connect to the storage engine. Study data will not be saved. Check your connection or restart the app.",children:w.jsx(_o,{size:"lg",color:"red",children:"Storage Disconnected"})}),!i&&!t&&w.jsx(bt,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:w.jsx(_o,{size:"lg",color:"orange",children:"Demo Mode"})}),n?.uiConfig.helpTextPath!==void 0&&w.jsx(Yt,{variant:"outline",onClick:()=>{o(a()),o(u({identifier:`${d}_${h}`}))},children:"Help"}),w.jsxs(jn,{shadow:"md",width:200,withinPortal:!0,opened:m,onChange:g,children:[w.jsx(jn.Target,{children:w.jsx(Rn,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:w.jsx(mIe,{})})}),w.jsxs(jn.Dropdown,{children:[e&&w.jsx(jn.Item,{leftSection:w.jsx(EIe,{size:14}),onClick:()=>o(l()),children:"Study Browser"}),w.jsx(jn.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:w.jsx(Yut,{size:14}),children:"Contact"}),e&&w.jsx(jn.Item,{leftSection:w.jsx(uee,{size:14}),onClick:()=>gVe(c,E),children:"Next Participant"}),e&&w.jsx(jn.Item,{leftSection:w.jsx(fIe,{size:14}),component:"a",href:`${as}analysis/stats/${_}`,children:"Analyze & Manage"})]})]})]})})]})})}function Lfn({width:e,top:t,sidebarOpen:n}){const r=pc(),i=$h(),s=r.components[i],o=k.useMemo(()=>s?lu(s,r):null,[s,r]),a=f1(),l=o?.instruction||"",c=k.useMemo(()=>o?.instructionLocation??r.uiConfig.instructionLocation??"sidebar",[o,r])==="sidebar";return o?w.jsxs(De,{className:"sidebar",bg:"gray.1",display:n?"block":"none",style:{zIndex:0,marginTop:t,position:"relative"},w:e,miw:e,children:[c&&l!==""&&w.jsxs(De,{bg:"gray.3",p:"md",children:[w.jsx(He,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),w.jsx(Zp,{text:l})]}),w.jsx(De,{p:"md",children:w.jsx(uK,{status:a,config:o,location:"sidebar"},`${i}-sidebar-response-block`)})]}):null}function jfn(){const e=gr(h=>h.showHelpText),t=gr(h=>h.config),n=Us(),{toggleShowHelpText:r}=ls(),[i,s]=k.useState(!0),[o,a]=k.useState(""),[l,u]=k.useState(!0),c=$h(),d=k.useMemo(()=>lu(t.components[c]||{},t),[c,t]),f=k.useMemo(()=>d.helpTextPath??t.uiConfig.helpTextPath,[d.helpTextPath,t.uiConfig.helpTextPath]);return k.useEffect(()=>{async function h(){if(!f){s(!1),u(!1);return}const p=await b8(`${as}${f}`);p!==void 0?a(p):s(!1),u(!1)}h()},[f]),w.jsx(Fi,{className:"helpModal",size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:l||i?w.jsx(Zp,{text:o}):w.jsx(i0,{path:t.uiConfig.helpTextPath})})}function Bfn(){const e=gr(o=>o.alertModal),{setAlertModal:t}=ls(),n=Us(),[r,i]=k.useState(e.show),s=k.useCallback(()=>n(t({...e,show:!1,title:""})),[e,t,n]);return k.useEffect(()=>i(e.show),[e.show]),w.jsx(Fi,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:w.jsxs(Bd,{color:"red",radius:"xs",title:e.title,icon:w.jsx(nlt,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[w.jsx(He,{my:"md",children:e.message}),w.jsx(Pn,{w:"100%",justify:"end",children:w.jsx(Yt,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const zfn=k.createContext(null);function tu(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n((function(d){d(c)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}class JD{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),r?.once){const i=(...s)=>{this.un(t,i),n(...s)};return this.listeners[t].add(i),()=>this.un(t,i)}return this.listeners[t].add(n),()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach((r=>r(...n)))}}const MO={decode:function(e,t){return tu(this,void 0,void 0,(function*(){const n=new AudioContext({sampleRate:t});try{return yield n.decodeAudioData(e)}finally{n.close()}}))},createBuffer:function(e,t){if(!e||e.length===0)throw new Error("channelData must be a non-empty array");if(t<=0)throw new Error("duration must be greater than 0");if(typeof e[0]=="number"&&(e=[e]),!e[0]||e[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(r){const i=r[0];if(i.some((s=>s>1||s<-1))){const s=i.length;let o=0;for(let a=0;a<s;a++){const l=Math.abs(i[a]);l>o&&(o=l)}for(const a of r)for(let l=0;l<s;l++)a[l]/=o}})(e);const n=e.map((r=>r instanceof Float32Array?r:Float32Array.from(r)));return{duration:t,length:n[0].length,sampleRate:n[0].length/t,numberOfChannels:n.length,getChannelData:r=>{const i=n[r];if(!i)throw new Error(`Channel ${r} not found`);return i},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function yVe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children"&&i)for(const[s,o]of Object.entries(i))o instanceof Node?n.appendChild(o):typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(yVe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function E_e(e,t,n){const r=yVe(e,t||{});return n?.appendChild(r),r}var Vfn=Object.freeze({__proto__:null,createElement:E_e,default:E_e});const Ufn={fetchBlob:function(e,t,n){return tu(this,void 0,void 0,(function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return(function(i,s){tu(this,void 0,void 0,(function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let l=0;const u=c=>{l+=c?.length||0;const d=Math.round(l/a*100);s(d)};try{for(;;){const c=yield o.read();if(c.done)break;u(c.value)}}catch(c){console.warn("Progress tracking error:",c)}}))})(r.clone(),t),r.blob()}))}};class Hfn extends JD{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",(()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)}),{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;if(r&&this.media.removeAttribute("src"),i||t)try{this.media.src=i}catch{this.media.src=t}}destroy(){this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(t){this.media=t}play(){return tu(this,void 0,void 0,(function*(){try{return yield this.media.play()}catch(t){if(t instanceof DOMException&&t.name==="AbortError")return;throw t}}))}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=Math.max(0,Math.min(t,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function rq(e){return e<0?0:e>1?1:e}function qfn({maxTop:e,maxBottom:t,halfHeight:n,vScale:r}){const i=Math.round(e*n*r);return{topHeight:i,totalHeight:i+Math.round(t*n*r)||1}}function Wfn({barAlign:e,halfHeight:t,topHeight:n,totalHeight:r,canvasHeight:i}){return e==="top"?0:e==="bottom"?i-r:t-n}function C_e(e,t,n){const r=t-e.left,i=n-e.top;return[r/e.width,i/e.height]}function vVe(e){return!!(e.barWidth||e.barGap||e.barAlign)}function S_e(e,t){if(!vVe(t))return e;const n=t.barWidth||.5,r=n+(t.barGap||n/2);return r===0?e:Math.floor(e/r)*r}function T_e({scrollLeft:e,totalWidth:t,numCanvases:n}){if(t===0)return[0];const r=e/t,i=Math.floor(r*n);return[i-1,i,i+1]}function A_e({scrollLeft:e,clientWidth:t,scrollWidth:n}){return n===0?{startX:0,endX:0}:{startX:e/n,endX:(e+t)/n}}class Gfn extends JD{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragUnsubscribe=null,this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){if(this.wrapper.addEventListener("click",(t=>{const n=this.wrapper.getBoundingClientRect(),[r,i]=C_e(n,t.clientX,t.clientY);this.emit("click",r,i)})),this.wrapper.addEventListener("dblclick",(t=>{const n=this.wrapper.getBoundingClientRect(),[r,i]=C_e(n,t.clientX,t.clientY);this.emit("dblclick",r,i)})),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:t,scrollWidth:n,clientWidth:r}=this.scrollContainer,{startX:i,endX:s}=A_e({scrollLeft:t,scrollWidth:n,clientWidth:r});this.emit("scroll",i,s,t,t+r)})),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{t().then((()=>this.onContainerResize())).catch((()=>{}))})),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender(),this.emit("resize"))}initDrag(){this.dragUnsubscribe||(this.dragUnsubscribe=(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const l=new Map,u=matchMedia("(pointer: coarse)").matches;let c=()=>{};const d=f=>{if(f.button!==o||(l.set(f.pointerId,f),l.size>1))return;let h=f.clientX,p=f.clientY,m=!1;const g=Date.now(),y=S=>{if(S.defaultPrevented||l.size>1||u&&Date.now()-g<a)return;const T=S.clientX,A=S.clientY,R=T-h,I=A-p;if(m||Math.abs(R)>s||Math.abs(I)>s){S.preventDefault(),S.stopPropagation();const P=t.getBoundingClientRect(),{left:N,top:M}=P;m||(r?.(h-N,p-M),m=!0),n(R,I,T-N,A-M),h=T,p=A}},v=S=>{if(l.delete(S.pointerId),m){const T=S.clientX,A=S.clientY,R=t.getBoundingClientRect(),{left:I,top:P}=R;i?.(T-I,A-P)}c()},b=S=>{l.delete(S.pointerId),S.relatedTarget&&S.relatedTarget!==document.documentElement||v(S)},_=S=>{m&&(S.stopPropagation(),S.preventDefault())},E=S=>{S.defaultPrevented||l.size>1||m&&S.preventDefault()};document.addEventListener("pointermove",y),document.addEventListener("pointerup",v),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",_,{capture:!0}),c=()=>{document.removeEventListener("pointermove",y),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout((()=>{document.removeEventListener("click",_,{capture:!0})}),10)}};return t.addEventListener("pointerdown",d),()=>{c(),t.removeEventListener("pointerdown",d),l.clear()}})(this.wrapper,((t,n,r)=>{const i=this.wrapper.getBoundingClientRect().width;this.emit("drag",rq(r/i))}),(t=>{this.isDragging=!0;const n=this.wrapper.getBoundingClientRect().width;this.emit("dragstart",rq(t/n))}),(t=>{this.isDragging=!1;const n=this.wrapper.getBoundingClientRect().width;this.emit("dragend",rq(t/n))})),this.subscriptions.push(this.dragUnsubscribe))}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t;this.subscriptions.forEach((n=>n())),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(t=this.unsubscribeOnScroll)===null||t===void 0||t.forEach((n=>n())),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&(clearTimeout(n),n=void 0),r&&(r(),r=void 0)};return this.timeouts.push(i),()=>new Promise(((s,o)=>{i(),r=o,n=setTimeout((()=>{n=void 0,r=void 0,s()}),t)}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;return(function({optionsHeight:s,optionsSplitChannels:o,parentHeight:a,numberOfChannels:l,defaultHeight:u=128}){if(s==null)return u;const c=Number(s);if(!isNaN(c))return c;if(s==="auto"){const d=a||u;return o?.every((f=>!f.overlay))?d/l:d}return u})({optionsHeight:t,optionsSplitChannels:n,parentHeight:this.parent.clientHeight,numberOfChannels:i,defaultHeight:128})}convertColorValues(t){return(function(n,r){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const i=document.createElement("canvas"),s=i.getContext("2d"),o=i.height*r,a=s.createLinearGradient(0,0,0,o||r),l=1/(n.length-1);return n.forEach(((u,c)=>{a.addColorStop(c*l,u)})),a})(t,this.getPixelRatio())}getPixelRatio(){return t=window.devicePixelRatio,Math.max(1,t||1);var t}renderBarWaveform(t,n,r,i){const{width:s,height:o}=r.canvas,{halfHeight:a,barWidth:l,barRadius:u,barIndexScale:c,barSpacing:d}=(function({width:h,height:p,length:m,options:g,pixelRatio:y}){const v=p/2,b=g.barWidth?g.barWidth*y:1,_=g.barGap?g.barGap*y:g.barWidth?b/2:0,E=b+_||1;return{halfHeight:v,barWidth:b,barGap:_,barRadius:g.barRadius||0,barIndexScale:m>0?h/E/m:0,barSpacing:E}})({width:s,height:o,length:(t[0]||[]).length,options:n,pixelRatio:this.getPixelRatio()}),f=(function({channelData:h,barIndexScale:p,barSpacing:m,barWidth:g,halfHeight:y,vScale:v,canvasHeight:b,barAlign:_}){const E=h[0]||[],S=h[1]||E,T=E.length,A=[];let R=0,I=0,P=0;for(let N=0;N<=T;N++){const M=Math.round(N*p);if(M>R){const{topHeight:B,totalHeight:H}=qfn({maxTop:I,maxBottom:P,halfHeight:y,vScale:v}),q=Wfn({barAlign:_,halfHeight:y,topHeight:B,totalHeight:H,canvasHeight:b});A.push({x:R*m,y:q,width:g,height:H}),R=M,I=0,P=0}const O=Math.abs(E[N]||0),j=Math.abs(S[N]||0);O>I&&(I=O),j>P&&(P=j)}return A})({channelData:t,barIndexScale:c,barSpacing:d,barWidth:l,halfHeight:a,vScale:i,canvasHeight:o,barAlign:n.barAlign});r.beginPath();for(const h of f)u&&"roundRect"in r?r.roundRect(h.x,h.y,h.width,h.height,u):r.rect(h.x,h.y,h.width,h.height);r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const{width:s,height:o}=r.canvas,a=(function({channelData:l,width:u,height:c,vScale:d}){const f=c/2,h=l[0]||[];return[h,l[1]||h].map(((p,m)=>{const g=p.length,y=g?u/g:0,v=f,b=m===0?-1:1,_=[{x:0,y:v}];let E=0,S=0;for(let T=0;T<=g;T++){const A=Math.round(T*y);if(A>E){const I=v+(Math.round(S*f*d)||1)*b;_.push({x:E,y:I}),E=A,S=0}const R=Math.abs(p[T]||0);R>S&&(S=R)}return _.push({x:E,y:v}),_}))})({channelData:t,width:s,height:o,vScale:i});r.beginPath();for(const l of a)if(l.length){r.moveTo(l[0].x,l[0].y);for(let u=1;u<l.length;u++){const c=l[u];r.lineTo(c.x,c.y)}}r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);const i=(function({channelData:s,barHeight:o,normalize:a}){var l;const u=o||1;if(!a)return u;const c=s[0];if(!c||c.length===0)return u;let d=0;for(let f=0;f<c.length;f++){const h=(l=c[f])!==null&&l!==void 0?l:0,p=Math.abs(h);p>d&&(d=p)}return d?u/d:u})({channelData:t,barHeight:n.barHeight,normalize:n.normalize});vVe(n)?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const l=this.getPixelRatio(),u=document.createElement("canvas");u.width=Math.round(r*l),u.height=Math.round(i*l),u.style.width=`${r}px`,u.style.height=`${i}px`,u.style.left=`${Math.round(s)}px`,o.appendChild(u);const c=u.getContext("2d");if(n.renderFunction?(c.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction(t,c)):this.renderWaveform(t,n,c),u.width>0&&u.height>0){const d=u.cloneNode(),f=d.getContext("2d");f.drawImage(u,0,0),f.globalCompositeOperation="source-in",f.fillStyle=this.convertColorValues(n.progressColor),f.fillRect(0,0,u.width,u.height),a.appendChild(d)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,u=r/a,c=(function({clientWidth:p,totalWidth:m,options:g}){return S_e(Math.min(8e3,p,m),g)})({clientWidth:l,totalWidth:u,options:n});let d={};if(c===0)return;const f=p=>{if(p<0||p>=h||d[p])return;d[p]=!0;const m=p*c;let g=Math.min(u-m,c);if(g=S_e(g,n),g<=0)return;const y=(function({channelData:v,offset:b,clampedWidth:_,totalWidth:E}){return v.map((S=>{const T=Math.floor(b/E*S.length),A=Math.floor((b+_)/E*S.length);return S.slice(T,A)}))})({channelData:t,offset:m,clampedWidth:g,totalWidth:u});this.renderSingleCanvas(y,n,g,i,m,s,o)},h=Math.ceil(u/c);if(!this.isScrollable){for(let p=0;p<h;p++)f(p);return}if(T_e({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:u,numCanvases:h}).forEach((p=>f(p))),h>1){const p=this.on("scroll",(()=>{const{scrollLeft:m}=this.scrollContainer;Object.keys(d).length>10&&(s.innerHTML="",o.innerHTML="",d={}),T_e({scrollLeft:m,totalWidth:u,numCanvases:h}).forEach((g=>f(g)))}));this.unsubscribeOnScroll.push(p)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=(function(c,d){var f={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&d.indexOf(h)<0&&(f[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)d.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(f[h[p]]=c[h[p]])}return f})(n,["overlay"]);const a=document.createElement("div"),l=this.getHeight(o.height,o.splitChannels);a.style.height=`${l}px`,s&&i>0&&(a.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(a);const u=a.cloneNode();this.progressWrapper.appendChild(u),this.renderMultiCanvas(t,o,r,l,a,u)}render(t){return tu(this,void 0,void 0,(function*(){var n;this.timeouts.forEach((u=>u())),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,{scrollWidth:s,isScrollable:o,useParentWidth:a,width:l}=(function({duration:u,minPxPerSec:c=0,parentWidth:d,fillParent:f,pixelRatio:h}){const p=Math.ceil(u*c),m=p>d,g=!!(f&&!m);return{scrollWidth:p,isScrollable:m,useParentWidth:g,width:(g?d:p)*h}})({duration:t.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:i,fillParent:this.options.fillParent,pixelRatio:r});if(this.isScrollable=o,this.wrapper.style.width=a?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const c=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],c,l,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,l,0)}Promise.resolve().then((()=>this.emit("rendered")))}))}reRender(){if(this.unsubscribeOnScroll.forEach((r=>r())),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect(),i=(function(s){const o=2*s;return(o<0?Math.floor(o):Math.ceil(o))/2})(r-n);this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,l=r+s,u=s/2;if(this.isDragging)o+30>l?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>l)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?u:0));const c=o-r-u;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=c)}{const c=this.scrollContainer.scrollLeft,{startX:d,endX:f}=A_e({scrollLeft:c,scrollWidth:i,clientWidth:s});this.emit("scroll",d,f,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0%, 100% 0%, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${t*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return tu(this,void 0,void 0,(function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map((o=>o.toDataURL(t,n)));return Promise.resolve(s)}return Promise.all(Array.from(i).map((s=>new Promise(((o,a)=>{s.toBlob((l=>{l?o(l):a(new Error("Could not export image"))}),t,n)})))))}))}}class Yfn extends JD{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const t=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(t))};t()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class iq extends JD{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return tu(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then((n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()})).then((n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n))).then((n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})).catch((n=>{console.error("WebAudioPlayer load error:",n)}))}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return tu(this,void 0,void 0,(function*(){this.paused&&(this._play(),this.emit("play"))}))}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){const n=t-this.currentTime,r=this.bufferNode;r?.stop(this.audioContext.currentTime+n),r?.addEventListener("ended",(()=>{r===this.bufferNode&&(this.bufferNode=null,this.pause())}),{once:!0})}setSinkId(t){return tu(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}removeAttribute(t){switch(t){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const Kfn={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class GI extends Hfn{static create(t){return new GI(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new iq:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},Kfn,t),this.timer=new Yfn;const r=n?void 0:this.getMediaElement();this.renderer=new Gfn(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then((()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch((a=>{this.emit("error",a instanceof Error?a:new Error(String(a)))}))}))}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t),this.stopAtPosition!=null&&this.isPlaying()&&t>=this.stopAtPosition&&this.pause()}})))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const t=this.updateProgress();this.emit("timeupdate",t)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("emptied",(()=>{this.timer.stop(),this.stopAtPosition=null})),this.onMediaEvent("ended",(()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})),this.onMediaEvent("error",(()=>{var t;this.emit("error",(t=this.getMediaElement().error)!==null&&t!==void 0?t:new Error("Media error")),this.stopAtPosition=null})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))})),this.renderer.on("dblclick",((t,n)=>{this.emit("dblclick",t,n)})),this.renderer.on("scroll",((t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)})),this.renderer.on("render",(()=>{this.emit("redraw")})),this.renderer.on("rendered",(()=>{this.emit("redrawcomplete")})),this.renderer.on("dragstart",(t=>{this.emit("dragstart",t)})),this.renderer.on("dragend",(t=>{this.emit("dragend",t)})),this.renderer.on("resize",(()=>{this.emit("resize")})));{let t;const n=this.renderer.on("drag",(r=>{var i;if(!this.options.interact)return;this.renderer.renderProgress(r),clearTimeout(t);let s=0;const o=this.options.dragToSeek;this.isPlaying()?s=0:o===!0?s=200:o&&typeof o=="object"&&(s=(i=o.debounceTime)!==null&&i!==void 0?i:200),t=setTimeout((()=>{this.seekTo(r)}),s),this.emit("interaction",r*this.getDuration()),this.emit("drag",r)}));this.subscriptions.push((()=>{clearTimeout(t),n()}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach((n=>{this.registerPlugin(n)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=MO.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=MO.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){if(this.plugins.includes(t))return t;t._init(this),this.plugins.push(t);const n=t.once("destroy",(()=>{this.plugins=this.plugins.filter((r=>r!==t)),this.subscriptions=this.subscriptions.filter((r=>r!==n))}));return this.subscriptions.push(n),t}unregisterPlugin(t){this.plugins=this.plugins.filter((n=>n!==t)),t.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return tu(this,void 0,void 0,(function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(s=this.abortController)===null||s===void 0||s.abort(),this.abortController=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=this.abortController.signal);const l=c=>this.emit("loading",c);n=yield Ufn.fetchBlob(t,l,a);const u=this.options.blobMimeType;u&&(n=new Blob([n],{type:u}))}this.setSrc(t,n);const o=yield new Promise((a=>{const l=i||this.getDuration();l?a(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",(()=>a(this.getDuration())),{once:!0}))}));if(!t&&!n){const a=this.getMediaElement();a instanceof iq&&(a.duration=o)}if(r)this.decodedData=MO.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield MO.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(t,n,r){return tu(this,void 0,void 0,(function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}}))}loadBlob(t,n,r){return tu(this,void 0,void 0,(function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}}))}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),l=[],u=a.length/n;for(let c=0;c<n;c++){const d=a.slice(Math.floor(c*u),Math.ceil((c+1)*u));let f=0;for(let h=0;h<d.length;h++){const p=d[h];Math.abs(p)>Math.abs(f)&&(f=p)}l.push(Math.round(f*r)/r)}s.push(l)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){this.stopAtPosition=null,super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}play(t,n){const r=Object.create(null,{play:{get:()=>super.play}});return tu(this,void 0,void 0,(function*(){t!=null&&this.setTime(t);const i=yield r.play.call(this);return n!=null&&(this.media instanceof iq?this.media.stopAt(n):this.stopAtPosition=n),i}))}playPause(){return tu(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return tu(this,arguments,void 0,(function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)}))}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach((n=>n.destroy())),this.subscriptions.forEach((n=>n())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}GI.BasePlugin=class extends JD{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach((e=>e())),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},GI.dom=Vfn;function Xfn(e){return GI.create(e)}function Qfn(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const k_e=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),Jfn=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:k_e(i),enabled:k_e(s)}};function I_e(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=Qfn(i)}return n}function Zfn({container:e,plugins:t=[],onMount:n,...r}){const i=k.useRef(!1),[s,o]=k.useState({}),a=k.useRef([]),[l,u]=k.useState(null);return k.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const d=I_e(s,t);a.current=Object.keys(d);const f=Xfn({container:e,...r,plugins:Object.values(d)});return n?.(f),o(d),u(f),()=>{c!==e&&f.destroy()}},[e]),k.useEffect(()=>{if(l){const c=I_e(s,t),{disabled:d,enabled:f}=Jfn(s,c);Object.keys(d).forEach(h=>{d[h].destroy()}),Object.keys(f).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,f[h]),l?.registerPlugin(f[h]))}),a.current=Object.keys(f),o(c)}},[t]),[l,s,Object.values(s)]}function ehn({children:e,plugins:t=[],onMount:n,...r}){const i=Zfn({plugins:t,onMount:n,...r});return bn.createElement(zfn.Provider,{value:i},e)}const thn=({id:e="waveform",children:t})=>bn.createElement("div",{id:e},t),$O=15,FO=3,R_e=["#4269d0","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e"];function nhn({xScale:e,height:t,currentNode:n,provenance:r,answer:i}){const s=k.useMemo(()=>{const o=new Map;if(o.set("Root","#efb118"),i.provenanceGraph){let a=0;Object.entries(i.provenanceGraph.stimulus?.nodes||{}).forEach(l=>{const[,u]=l;o.has(u.label)||(o.set(u.label,R_e[a]),a=(a+1)%R_e.length)})}return o},[i]);return w.jsxs("g",{style:{cursor:"pointer"},children:[r?Object.entries(r.nodes||{}).map(o=>{const[a,l]=o;return w.jsx("g",{children:w.jsx("rect",{fill:s.get(l.label)||"#9498a0",opacity:l.id===n?1:.7,x:e(l.createdOn)-FO/2,y:t/2-$O/2,width:FO,height:$O})},a)}):null,n&&r&&r.nodes[n]&&w.jsx("rect",{fill:s.get(r.nodes[n].label)||"#9498a0",x:e(r.nodes[n].createdOn)-FO/2,y:t/2-$O/2,width:FO,height:$O}),w.jsx(OJ,{position:{bottom:10,left:10}})]})}const D_e={left:5};function rhn({xScale:e,answers:t,width:n,height:r,currentNode:i,trialName:s}){const o=k.useMemo(()=>Object.entries(t).filter(a=>s?s===a[0]:!0).map(a=>{const[l,u]=a;return Object.keys(u.provenanceGraph).map(d=>{const f=u.provenanceGraph[d];return f?w.jsx(nhn,{answer:t[s],height:r,currentNode:i,xScale:e,provenance:f},l+d):null})}),[i,r,t,s,e]);return w.jsxs("svg",{style:{width:n,height:r},children:[w.jsx("line",{stroke:"black",strokeWidth:1,x1:D_e.left,x2:n+D_e.left,y1:r/2,y2:r/2}),o]})}function fg(e){const t=k.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return k.useLayoutEffect(()=>{t.current=e}),k.useCallback((...n)=>t.current?.(...n),[])}function ihn({width:e,height:t,debounceUpdateTimer:n,directUpdateTimer:r,duration:i,isPlaying:s,xScale:o,startTime:a,initialTime:l,speed:u}){const c=k.useRef(0),d=k.useRef(Date.now()),[f,h]=k.useState(0);k.useEffect(()=>{if(a){const g=l;c.current=g-a,r(g,(g-a)/i),localStorage.setItem("currentTime",`${a+c.current}_${(c.current/i).toString()}_${c.current}`)}},[a,r,l,i]);const p=fg(()=>{if(c.current>=i)return;const g=Date.now();c.current+=(g-d.current)*u,d.current=g,n(a+c.current,void 0),h(f+1)});k.useEffect(()=>{s&&c.current>=i&&(r(a,0),d.current=Date.now()-c.current,c.current=0)},[a,s,i,r]),k.useEffect(()=>{let g=null;return s&&c.current<i&&(d.current=Date.now(),g=setInterval(()=>{s&&p()},30)),()=>{g&&clearInterval(g)}},[i,p,s]),k.useEffect(()=>{const g=y=>{y.key==="currentTime"&&y.newValue&&(c.current=+y.newValue.split("_")[2],d.current=Date.now(),r(+y.newValue.split("_")[0],+y.newValue.split("_")[1]),h(f+1))};return window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)},[r,f,o]);const m=k.useCallback(g=>{c.current=o.invert(g.clientX-10)-o.domain()[0],d.current=Date.now(),h(f+1),localStorage.setItem("currentTime",`${a+c.current}_${c.current/i}_${c.current}`),r(a+c.current,c.current/i)},[r,i,f,a,o]);return w.jsx("svg",{onClick:m,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:w.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:o(a+c.current),x2:o(a+c.current)})})}function tQ(e){if(Number.isNaN(e))return;if(e<=0)return"0s";const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}:`:""}${`${s}`}:${i}`}function sq(e,t,n,r,i,s){const o=k.useMemo(()=>{const a=a1.create(),l=CS({registry:a,initialState:{}});return n&&l.importObject(structuredClone(n)),l},[n]);k.useEffect(()=>{if(!s)return;if(!n){r&&(i(null,e),s({prov:null,location:e}));return}if(!r||!n.nodes[r]){i(n.root,e),s({prov:o.getState(n.nodes[n.root]),location:e});return}let a=n.nodes[r];for(;;)if(t<a.createdOn){if(sNe(a))break;{const l=a.parent;a=n.nodes[l]}}else if(a.children.length>0){const l=a.children[0];if(t>n.nodes[l].createdOn)a=n.nodes[l];else break}else break;a.id!==r&&(i(a.id,e),s({prov:o.getState(a),location:e}))},[r,t,n,e,i,o,s])}const oq={left:0,right:0};function P_e(e){return e.catch(()=>null)}function shn({setTimeString:e,answers:t,setTime:n,taskName:r,context:i,saveProvenance:s,analysisIsPlaying:o,setAnalysisIsPlaying:a,speed:l,jumpedToAudioTime:u,setHasAudio:c,setSpeed:d,isMuted:f,onProvenanceTimelineChange:h}){const[p,m]=nd(),g=k.useMemo(()=>p.get("participantId")||"",[p]),y=k.useMemo(()=>p.get("t")||"",[p]),v=k.useMemo(()=>{if(!y)return;if(!Number.isNaN(Number(y)))return parseInt(y,10);const de=parseInt(y.match(/(\d+)h/)?.[1]||"0",10),te=parseInt(y.match(/(\d+)m/)?.[1]||"0",10),ee=parseInt(y.match(/(\d+)s/)?.[1]||"0",10);return(de*3600+te*60+ee)*1e3},[y]),{storageEngine:b}=Vi(),[_,E]=k.useState(!0),S=k.useCallback(de=>{E(de),c(de)},[c]),[T,{width:A}]=nh(),[R,I]=k.useState(0),P=k.useMemo(()=>t[r]?.startTime||0,[t,r]),[N,M]=k.useState(null),[O,j]=k.useState({aboveStimulus:void 0,belowStimulus:void 0,sidebar:void 0,stimulus:void 0}),[B,H]=k.useState(null),[q,G]=k.useState(0),[U,L]=k.useState(0),z=k.useRef(null),V=k.useRef(0),Y=k.useRef(null),Q=$l(),[ne,ue]=k.useState(!0),se=k.useRef(null),ae=fg((de,te)=>{const ee=t[r]?.provenanceGraph[te];ee&&de&&(!B||ee.nodes[de].createdOn>B.time||U<B.time)&&H({name:de||"",time:ee.nodes[de].createdOn}),j({...O,[te]:de})}),he=aXe((de,te)=>{const ee=q*1e3+P;if(de>ee){a(!1),L(de);return}L(de),z.current&&te!==void 0&&!Number.isNaN(te)&&setTimeout(()=>{z.current?.seekTo(te)}),n&&n(de)},100),ie=k.useCallback((de,te)=>{const ee=q*1e3+P;if(de>ee){a(!1),L(de);return}L(de),h&&h(de-P),z.current&&te!==void 0&&!Number.isNaN(te)&&setTimeout(()=>{z.current?.seekTo(te)}),n&&n(de)},[a,n,P,q,h]);k.useEffect(()=>{he(P+u*1e3+1,void 0)},[he,u,P,q]),k.useEffect(()=>{r&&(localStorage.setItem("currentTrial",r),t[r]?.trialOrder&&localStorage.setItem("trialOrder",t[r].trialOrder))},[t,r]),k.useEffect(()=>{const de=te=>{te.newValue&&(te.key==="participantId"&&m(ee=>(ee.set("participantId",te.newValue||""),ee)),te.key==="currentTrial"&&m(ee=>(ee.set("currentTrial",te.newValue||""),ee)),te.key==="currentSpeed"&&d(+te.newValue),te.key==="analysisIsPlaying"&&a(te.newValue==="true"),te.key==="trialOrder"&&i==="provenanceVis"&&Q(r?`./../${js(+te.newValue)}?participantId=${g}&currentTrial=${r}`:`./${te.newValue}?participantId=${g}&currentTrial=${r}`))};return window.addEventListener("storage",de),()=>window.removeEventListener("storage",de)},[he,i,Q,g,a,m,d,ie,r]),sq("aboveStimulus",U,t[r]?.provenanceGraph.aboveStimulus,O.aboveStimulus,ae,s),sq("belowStimulus",U,t[r]?.provenanceGraph.belowStimulus,O.belowStimulus,ae,s),sq("sidebar",U,t[r]?.provenanceGraph.sidebar,O.sidebar,ae,s),k.useEffect(()=>{if(r&&t[r]?.provenanceGraph){const de=a1.create(),te=CS({registry:de,initialState:{}});t[r]?.provenanceGraph.stimulus&&(te.importObject(structuredClone(t[r]?.provenanceGraph.stimulus)),se.current=te)}},[t,r]);const le=k.useCallback(de=>{de&&(r&&se.current&&i==="provenanceVis"&&s&&(s({prov:se.current.getState(t[r]?.provenanceGraph.stimulus?.nodes[de]),location:"stimulus"}),se.current.to(de)),ae(de,"stimulus"),M(de))},[r,i,ae,s,t]);k.useEffect(()=>{if(!r||!se.current||!t[r]?.provenanceGraph)return;const de=t[r]?.provenanceGraph;if(!de.stimulus)return;if(!N||!de.stimulus.nodes[N]){le(de.stimulus.root);return}let te=de.stimulus.nodes[N];for(;;)if(U<te.createdOn){if(sNe(te))break;{const ee=te.parent;te=de.stimulus.nodes[ee]}}else if(te.children.length>0){const ee=te.children[0];if(U>de.stimulus.nodes[ee].createdOn)te=de.stimulus.nodes[ee];else break}else break;te.id!==N&&le(te.id)},[le,N,g,U,r,t]),k.useEffect(()=>{P&&(L(P+(v||0)),V.current=v||0)},[P,v]),k.useEffect(()=>{q===0?e(""):U!==0&&e(`${tQ(U-P)}/${tQ(q*1e3)}`)},[r,U,e,P,q]),k.useEffect(()=>{const de=t[r]?.endTime-t[r]?.startTime;G(de>-1?de/1e3:0)},[_,t,r]);const Ce=k0(),X=fg(async de=>{if(z.current=de,!r.includes("__dynamicLoading"))if(de&&Ce&&r&&b)try{if(!g)throw new Error("Participant ID is required to load audio");const[te,ee]=await Promise.all([P_e(b.getAudio(r,g)),P_e(b.getScreenRecording(r,g))]);z.current?.setMuted(!!ee);const me=ee??te??null;me||(S(!1),ue(!1),z.current?.empty()),await de.load(me,void 0,q),ue(!1),I(de.getWidth()),S(!0),de.setPlaybackRate(l),de.seekTo(0),de.on("redrawcomplete",()=>I(de.getWidth()))}catch(te){throw S(!1),ue(!1),new Error(te)}else S(!1),ue(!1),G(0)});k.useEffect(()=>{z.current&&(o?z.current.play():z.current.pause())},[z,o,q,P,L]),k.useEffect(()=>{z.current?.setPlaybackRate(l)},[l]),k.useEffect(()=>{z.current?.setMuted(f)},[f]);const fe=k.useMemo(()=>{if(!t[r]?.startTime||!t[r]?.endTime)return null;const de=q>0?t[r]?.startTime+q*1e3:t[r]?.endTime;return sc([oq.left,A+oq.left+oq.right]).domain([t[r]?.startTime,de]).clamp(!0)},[t,r,q,A]);return k.useEffect(()=>{ue(!0),X(z.current)},[he,X,g,z,r]),w.jsx(Pn,{wrap:"nowrap",gap:10,mx:10,children:w.jsxs(Gn,{ref:T,style:{width:"100%"},gap:0,children:[w.jsx(hu,{visible:ne,overlayProps:{blur:5,backgroundOpacity:.35}}),g!==void 0&&r?w.jsx(De,{ref:Y,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:_?"block":"none",id:"waveformDiv",children:w.jsx(ehn,{backend:"MediaElement",onMount:X,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"cornflowerblue",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:w.jsx(thn,{id:"waveform",height:50})})}):null,fe&&r&&t[r]?.provenanceGraph?w.jsx(rhn,{xScale:fe,trialName:r,currentNode:B?.name||"",answers:t,width:R||A,height:25}):null,fe?w.jsx(ihn,{duration:q*1e3,initialTime:u?P+u*1e3+1:v?P+v:P,height:(_?50:0)+25,isPlaying:o,speed:l,startTime:P,width:A,xScale:fe,debounceUpdateTimer:he,directUpdateTimer:ie}):null]})})}const O_e={top:5};function ohn({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=k.useMemo(()=>e.map(s=>w.jsxs("g",{children:[w.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:O_e.top,y2:O_e.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>w.jsx("g",{children:o.map((l,u)=>{const c=t(n+s.start*1e3),d=t(n+s.end*1e3);return l?w.jsx("foreignObject",{x:c+(d-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+u*15),y:15,height:"20px",width:"20px",children:w.jsx(bt,{label:l.name,withArrow:!0,arrowSize:6,children:w.jsx(Vg,{size:12,color:l.color})})},l.name):null})},a))]},s.start)),[r,n,e,t]);return w.jsx("svg",{style:{width:"100%",height:"30px"},children:i})}function ahn({selectedTags:e,removeFunc:t}){return e.map(n=>{if(!n||!n.id)return null;const r=rI(n.color).l;return w.jsx(bt,{label:n.name,withinPortal:!0,children:w.jsx(sw,{style:{width:"80px"},withRemoveButton:!!t,styles:{root:{backgroundColor:n.color,color:r>.7?"black":"white"}},onRemove:()=>t?t(n.id):null,children:n.name})},n.id)})}const Oa=[];for(let e=0;e<256;++e)Oa.push((e+256).toString(16).slice(1));function lhn(e,t=0){return(Oa[e[t+0]]+Oa[e[t+1]]+Oa[e[t+2]]+Oa[e[t+3]]+"-"+Oa[e[t+4]]+Oa[e[t+5]]+"-"+Oa[e[t+6]]+Oa[e[t+7]]+"-"+Oa[e[t+8]]+Oa[e[t+9]]+"-"+Oa[e[t+10]]+Oa[e[t+11]]+Oa[e[t+12]]+Oa[e[t+13]]+Oa[e[t+14]]+Oa[e[t+15]]).toLowerCase()}let aq;const uhn=new Uint8Array(16);function chn(){if(!aq){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");aq=crypto.getRandomValues.bind(crypto)}return aq(uhn)}const dhn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),N_e={randomUUID:dhn};function bVe(e,t,n){if(N_e.randomUUID&&!e)return N_e.randomUUID();e=e||{};const r=e.random??e.rng?.()??chn();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,lhn(r)}function nQ({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=k.useState(n?r.name:""),[o,a]=k.useState(n?r.color:"#fd7e14"),l=k.useCallback(()=>{const u=bVe();e({color:o,name:i,id:n&&r?r.id:u})},[e,o,n,r,i]);return w.jsxs(Gn,{gap:"xs",children:[w.jsxs(Pn,{children:[w.jsx(Vg,{color:o}),w.jsx(iu,{required:!0,placeholder:"Enter tag name",value:i,onChange:u=>s(u.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),w.jsx(OF,{withPicker:n,style:{width:"100%"},value:o,onChange:u=>a(u),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),w.jsx(Yt,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>l(),children:n?"Edit Tag":"Add Tag"})]})}function fhn({createTagCallback:e,tags:t}){const[n,r]=k.useState(!1);return w.jsxs(jr,{trapFocus:!0,withinPortal:!1,children:[w.jsx(Gn,{justify:"center",children:w.jsx(jr.Target,{children:w.jsx(Yt,{style:{width:"100%"},variant:"light",onClick:()=>r(!n),children:"Create new tag"})})}),t?w.jsx(jr.Dropdown,{children:w.jsx(nQ,{currentNames:t.map(i=>i.name),addTagCallback:i=>{r(!1),e(i)}})}):w.jsx(td,{})]})}function rQ({tags:e,selectedTags:t,onSelectTags:n,disabled:r=!1,tagsEmptyText:i,createTagCallback:s,editTagCallback:o,width:a}){const l=gR(),u=k.useCallback(p=>n(t.filter(m=>m!==void 0&&m.id!==p)),[n,t]),c=k.useCallback(p=>{if(t.find(m=>m.id===p)){u(p);return}n([...t,[...e].find(m=>m.id===p)])},[u,n,t,e]),d=w.jsx(ahn,{selectedTags:t,removeFunc:u}),f=k.useMemo(()=>e.filter(p=>p!==void 0&&t.find(m=>m&&m.id===p.id)).map(p=>w.jsx(Jn.Option,{value:p.id,active:!0,children:w.jsxs(Pn,{justify:"space-between",gap:"sm",style:{width:"100%"},wrap:"nowrap",children:[w.jsx(bt,{label:p.name,withArrow:!0,openDelay:600,children:w.jsxs(Pn,{wrap:"nowrap",children:[w.jsx(eZ,{size:12}),w.jsx(Vg,{size:10,color:p.color}),w.jsx(He,{style:{width:a-120},truncate:"end",children:p.name})]})}),w.jsx(De,{onClick:m=>{m.preventDefault(),m.stopPropagation()},children:w.jsxs(jr,{trapFocus:!0,withinPortal:!1,children:[w.jsx(jr.Target,{children:w.jsx(Rn,{variant:"light",size:"sm",children:w.jsx(g6,{})})}),w.jsx(jr.Dropdown,{children:w.jsx(nQ,{editTag:!0,currentNames:e.map(m=>m.id),addTagCallback:m=>{o(p,m)},editableTag:p})})]})})]})},p.id)),[o,t,e,a]),h=k.useMemo(()=>e.filter(p=>p!==void 0&&!t.find(m=>m&&m.id===p.id)).map(p=>w.jsx(Jn.Option,{value:p.id,children:w.jsxs(Pn,{justify:"space-between",gap:"sm",style:{width:"100%"},wrap:"nowrap",children:[w.jsx(bt,{label:p.name,withArrow:!0,openDelay:600,children:w.jsxs(Pn,{wrap:"nowrap",children:[w.jsx(Vg,{size:10,color:p.color}),w.jsx(He,{style:{width:a-100},truncate:"end",children:p.name})]})}),w.jsx(De,{onClick:m=>{m.preventDefault(),m.stopPropagation()},children:w.jsxs(jr,{trapFocus:!0,withinPortal:!1,children:[w.jsx(jr.Target,{children:w.jsx(Rn,{variant:"light",size:"sm",onClick:m=>{m.stopPropagation(),m.preventDefault()},children:w.jsx(g6,{})})}),w.jsx(jr.Dropdown,{children:w.jsx(nQ,{editTag:!0,currentNames:e.map(m=>m.id),addTagCallback:m=>{o(p,m)},editableTag:p})})]})})]})},p.id)),[o,t,e,a]);return w.jsxs(Jn,{disabled:r,width:a,store:l,onOptionSubmit:c,withinPortal:!0,children:[w.jsx(Jn.DropdownTarget,{children:w.jsx(YE,{style:{width:a},pointer:!0,onClick:()=>l.toggleDropdown(),children:w.jsxs(sw.Group,{children:[t.length>0?d:w.jsx(Qr.Placeholder,{children:i}),w.jsx(Jn.EventsTarget,{children:w.jsx(YE.Field,{type:"hidden"})})]})})}),w.jsx(Jn.Dropdown,{children:w.jsxs(Jn.Options,{children:[h.length===0&&f.length===0?w.jsx(Jn.Empty,{children:"No additional tags"}):[...f,...h],w.jsx(fhn,{createTagCallback:s,tags:e||[]})]})})]})}var lq={exports:{}};var M_e;function hhn(){return M_e||(M_e=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var d=typeof bg=="function"&&bg;if(!c&&d)return d(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){var m=r[u][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof bg=="function"&&bg,l=0;l<s.length;l++)o(s[l]);return o})({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var u,c,d,f,h,p,m,g=[],y=0,v=l.length,b=v,_=s.getTypeOf(l)!=="string";y<l.length;)b=v-y,d=_?(u=l[y++],c=y<v?l[y++]:0,y<v?l[y++]:0):(u=l.charCodeAt(y++),c=y<v?l.charCodeAt(y++):0,y<v?l.charCodeAt(y++):0),f=u>>2,h=(3&u)<<4|c>>4,p=1<b?(15&c)<<2|d>>6:64,m=2<b?63&d:64,g.push(a.charAt(f)+a.charAt(h)+a.charAt(p)+a.charAt(m));return g.join("")},i.decode=function(l){var u,c,d,f,h,p,m=0,g=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var v,b=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&b--,l.charAt(l.length-2)===a.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(v=o.uint8array?new Uint8Array(0|b):new Array(0|b);m<l.length;)u=a.indexOf(l.charAt(m++))<<2|(f=a.indexOf(l.charAt(m++)))>>4,c=(15&f)<<4|(h=a.indexOf(l.charAt(m++)))>>2,d=(3&h)<<6|(p=a.indexOf(l.charAt(m++))),v[g++]=u,h!==64&&(v[g++]=c),p!==64&&(v[g++]=d);return v}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(c,d,f,h,p){this.compressedSize=c,this.uncompressedSize=d,this.crc32=f,this.compression=h,this.compressedContent=p}u.prototype={getContentWorker:function(){var c=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return c.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,d,f){return c.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=(function(){for(var a,l=[],u=0;u<256;u++){a=u;for(var c=0;c<8;c++)a=1&a?3988292384^a>>>1:a>>>1;l[u]=a}return l})();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?(function(u,c,d,f){var h=o,p=f+d;u^=-1;for(var m=f;m<p;m++)u=u>>>8^h[255&(u^c[m])];return-1^u})(0|l,a,a.length,0):(function(u,c,d,f){var h=o,p=f+d;u^=-1;for(var m=f;m<p;m++)u=u>>>8^h[255&(u^c.charCodeAt(m))];return-1^u})(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),u=s?"uint8array":"array";function c(d,f){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=f,this.meta={}}i.magic="\b\0",a.inherits(c,l),c.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,d.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(f){d.push({data:f,meta:d.meta})}},i.compressWorker=function(d){return new c("Deflate",d)},i.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(h,p){var m,g="";for(m=0;m<p;m++)g+=String.fromCharCode(255&h),h>>>=8;return g}function o(h,p,m,g,y,v){var b,_,E=h.file,S=h.compression,T=v!==u.utf8encode,A=a.transformTo("string",v(E.name)),R=a.transformTo("string",u.utf8encode(E.name)),I=E.comment,P=a.transformTo("string",v(I)),N=a.transformTo("string",u.utf8encode(I)),M=R.length!==E.name.length,O=N.length!==I.length,j="",B="",H="",q=E.dir,G=E.date,U={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(U.crc32=h.crc32,U.compressedSize=h.compressedSize,U.uncompressedSize=h.uncompressedSize);var L=0;p&&(L|=8),T||!M&&!O||(L|=2048);var z=0,V=0;q&&(z|=16),y==="UNIX"?(V=798,z|=(function(Q,ne){var ue=Q;return Q||(ue=ne?16893:33204),(65535&ue)<<16})(E.unixPermissions,q)):(V=20,z|=(function(Q){return 63&(Q||0)})(E.dosPermissions)),b=G.getUTCHours(),b<<=6,b|=G.getUTCMinutes(),b<<=5,b|=G.getUTCSeconds()/2,_=G.getUTCFullYear()-1980,_<<=4,_|=G.getUTCMonth()+1,_<<=5,_|=G.getUTCDate(),M&&(B=s(1,1)+s(c(A),4)+R,j+="up"+s(B.length,2)+B),O&&(H=s(1,1)+s(c(P),4)+N,j+="uc"+s(H.length,2)+H);var Y="";return Y+=`
\0`,Y+=s(L,2),Y+=S.magic,Y+=s(b,2),Y+=s(_,2),Y+=s(U.crc32,4),Y+=s(U.compressedSize,4),Y+=s(U.uncompressedSize,4),Y+=s(A.length,2),Y+=s(j.length,2),{fileRecord:d.LOCAL_FILE_HEADER+Y+A+j,dirRecord:d.CENTRAL_FILE_HEADER+s(V,2)+Y+s(P.length,2)+"\0\0\0\0"+s(z,4)+s(g,4)+A+j+P}}var a=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),c=n("../crc32"),d=n("../signature");function f(h,p,m,g){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=g,this.streamFiles=h,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(f,l),f.prototype.push=function(h){var p=h.meta.percent||0,m=this.entriesCount,g=this._sources.length;this.accumulate?this.contentBuffer.push(h):(this.bytesWritten+=h.data.length,l.prototype.push.call(this,{data:h.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-g-1))/m:100}}))},f.prototype.openedSource=function(h){this.currentSourceOffset=this.bytesWritten,this.currentFile=h.file.name;var p=this.streamFiles&&!h.file.dir;if(p){var m=o(h,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(h){this.accumulate=!1;var p=this.streamFiles&&!h.file.dir,m=o(h,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:(function(g){return d.DATA_DESCRIPTOR+s(g.crc32,4)+s(g.compressedSize,4)+s(g.uncompressedSize,4)})(h),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var h=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-h,g=(function(y,v,b,_,E){var S=a.transformTo("string",E(_));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(v,4)+s(b,4)+s(S.length,2)+S})(this.dirRecords.length,m,h,this.zipComment,this.encodeFileName);this.push({data:g,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(h){this._sources.push(h);var p=this;return h.on("data",function(m){p.processChunk(m)}),h.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),h.on("error",function(m){p.error(m)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(h){var p=this._sources;if(!l.prototype.error.call(this,h))return!1;for(var m=0;m<p.length;m++)try{p[m].error(h)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var h=this._sources,p=0;p<h.length;p++)h[p].lock()},r.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,u){var c=new o(l.streamFiles,u,l.platform,l.encodeFileName),d=0;try{a.forEach(function(f,h){d++;var p=(function(v,b){var _=v||b,E=s[_];if(!E)throw new Error(_+" is not a valid compression method !");return E})(h.options.compression,l.compression),m=h.options.compressionOptions||l.compressionOptions||{},g=h.dir,y=h.date;h._compressWorker(p,m).withStreamInfo("file",{name:f,dir:g,date:y,comment:h.comment||"",unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions}).pipe(c)}),c.entriesCount=d}catch(f){c.error(f)}return c}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),c=n("./nodejsUtils");function d(f){return new o.Promise(function(h,p){var m=f.decompressed.getContentWorker().pipe(new u);m.on("error",function(g){p(g)}).on("end",function(){m.streamInfo.crc32!==f.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):h()}).resume()})}r.exports=function(f,h){var p=this;return h=s.extend(h||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),c.isNode&&c.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,h.optimizedBinaryString,h.base64).then(function(m){var g=new l(h);return g.load(m),g}).then(function(m){var g=[o.Promise.resolve(m)],y=m.files;if(h.checkCRC32)for(var v=0;v<y.length;v++)g.push(d(y[v]));return o.Promise.all(g)}).then(function(m){for(var g=m.shift(),y=g.files,v=0;v<y.length;v++){var b=y[v],_=b.fileNameStr,E=s.resolve(b.fileNameStr);p.file(E,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:h.createFolders}),b.dir||(p.file(E).unsafeOriginalName=_)}return g.zipComment.length&&(p.comment=g.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(a,o),a.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,u){s.call(this,l),this._helper=a;var c=this;a.on("data",function(d,f){c.push(d)||c._helper.pause(),u&&u(f)}).on("error",function(d){c.emit("error",d)}).on("end",function(){c.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(E,S,T){var A,R=a.getTypeOf(S),I=a.extend(T||{},c);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(E=y(E)),I.createFolders&&(A=g(E))&&v.call(this,A,!0);var P=R==="string"&&I.binary===!1&&I.base64===!1;T&&T.binary!==void 0||(I.binary=!P),(S instanceof d&&S.uncompressedSize===0||I.dir||!S||S.length===0)&&(I.base64=!1,I.binary=!0,S="",I.compression="STORE",R="string");var N=null;N=S instanceof d||S instanceof l?S:p.isNode&&p.isStream(S)?new m(E,S):a.prepareContent(E,S,I.binary,I.optimizedBinaryString,I.base64);var M=new f(E,N,I);this.files[E]=M}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),c=n("./defaults"),d=n("./compressedObject"),f=n("./zipObject"),h=n("./generate"),p=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),g=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var S=E.lastIndexOf("/");return 0<S?E.substring(0,S):""},y=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},v=function(E,S){return S=S!==void 0?S:c.createFolders,E=y(E),this.files[E]||s.call(this,E,null,{dir:!0,createFolders:S}),this.files[E]};function b(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var S,T,A;for(S in this.files)A=this.files[S],(T=S.slice(this.root.length,S.length))&&S.slice(0,this.root.length)===this.root&&E(T,A)},filter:function(E){var S=[];return this.forEach(function(T,A){E(T,A)&&S.push(A)}),S},file:function(E,S,T){if(arguments.length!==1)return E=this.root+E,s.call(this,E,S,T),this;if(b(E)){var A=E;return this.filter(function(I,P){return!P.dir&&A.test(I)})}var R=this.files[this.root+E];return R&&!R.dir?R:null},folder:function(E){if(!E)return this;if(b(E))return this.filter(function(R,I){return I.dir&&E.test(R)});var S=this.root+E,T=v.call(this,S),A=this.clone();return A.root=T.name,A},remove:function(E){E=this.root+E;var S=this.files[E];if(S||(E.slice(-1)!=="/"&&(E+="/"),S=this.files[E]),S&&!S.dir)delete this.files[E];else for(var T=this.filter(function(R,I){return I.name.slice(0,E.length)===E}),A=0;A<T.length;A++)delete this.files[T[A].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var S,T={};try{if((T=a.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");a.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var A=T.comment||this.comment||"";S=h.generateWorker(this,T,A)}catch(R){(S=new l("error")).error(R)}return new u(S,T.type||"string",T.mimeType)},generateAsync:function(E,S){return this.generateInternalStream(E).accumulate(S)},generateNodeStream:function(E,S){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(S)}};r.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),d=a.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===u&&this.data[f+2]===c&&this.data[f+3]===d)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),u=a.charCodeAt(1),c=a.charCodeAt(2),d=a.charCodeAt(3),f=this.readData(4);return l===f[0]&&u===f[1]&&c===f[2]&&d===f[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,u=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=a,u},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),c=n("./Uint8ArrayReader");r.exports=function(d){var f=s.getTypeOf(d);return s.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new u(d):o.uint8array?new c(s.transformTo("uint8array",d)):new a(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(c){u.dataIsReady=!0,u.data=c,u.max=c&&c.length||0,u.type=s.getTypeOf(c),u.isPaused||u._tickAndRepeat()},function(c){u.error(c)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),u=n("../support"),c=n("../external"),d=null;if(u.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(p,m){return new c.Promise(function(g,y){var v=[],b=p._internalType,_=p._outputType,E=p._mimeType;p.on("data",function(S,T){v.push(S),m&&m(T)}).on("error",function(S){v=[],y(S)}).on("end",function(){try{var S=(function(T,A,R){switch(T){case"blob":return s.newBlob(s.transformTo("arraybuffer",A),R);case"base64":return l.encode(A);default:return s.transformTo(T,A)}})(_,(function(T,A){var R,I=0,P=null,N=0;for(R=0;R<A.length;R++)N+=A[R].length;switch(T){case"string":return A.join("");case"array":return Array.prototype.concat.apply([],A);case"uint8array":for(P=new Uint8Array(N),R=0;R<A.length;R++)P.set(A[R],I),I+=A[R].length;return P;case"nodebuffer":return Buffer.concat(A);default:throw new Error("concat : unsupported type '"+T+"'")}})(b,v),E);g(S)}catch(T){y(T)}v=[]}).resume()})}function h(p,m,g){var y=m;switch(m){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=m,this._mimeType=g,s.checkSupport(y),this._worker=p.pipe(new o(y)),p.lock()}catch(v){this._worker=new a("error"),this._worker.error(v)}}h.prototype={accumulate:function(p){return f(this,p)},on:function(p,m){var g=this;return p==="data"?this._worker.on(p,function(y){m.call(g,y.data,y.meta)}):this._worker.on(p,function(){s.delay(m,arguments,g)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;u[254]=u[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}i.utf8encode=function(h){return o.nodebuffer?a.newBufferFrom(h,"utf-8"):(function(p){var m,g,y,v,b,_=p.length,E=0;for(v=0;v<_;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<_&&(64512&(y=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),E+=g<128?1:g<2048?2:g<65536?3:4;for(m=o.uint8array?new Uint8Array(E):new Array(E),v=b=0;b<E;v++)(64512&(g=p.charCodeAt(v)))==55296&&v+1<_&&(64512&(y=p.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(y-56320),v++),g<128?m[b++]=g:(g<2048?m[b++]=192|g>>>6:(g<65536?m[b++]=224|g>>>12:(m[b++]=240|g>>>18,m[b++]=128|g>>>12&63),m[b++]=128|g>>>6&63),m[b++]=128|63&g);return m})(h)},i.utf8decode=function(h){return o.nodebuffer?s.transformTo("nodebuffer",h).toString("utf-8"):(function(p){var m,g,y,v,b=p.length,_=new Array(2*b);for(m=g=0;m<b;)if((y=p[m++])<128)_[g++]=y;else if(4<(v=u[y]))_[g++]=65533,m+=v-1;else{for(y&=v===2?31:v===3?15:7;1<v&&m<b;)y=y<<6|63&p[m++],v--;1<v?_[g++]=65533:y<65536?_[g++]=y:(y-=65536,_[g++]=55296|y>>10&1023,_[g++]=56320|1023&y)}return _.length!==g&&(_.subarray?_=_.subarray(0,g):_.length=g),s.applyFromCharCode(_)})(h=s.transformTo(o.uint8array?"uint8array":"array",h))},s.inherits(d,l),d.prototype.processChunk=function(h){var p=s.transformTo(o.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var g=(function(v,b){var _;for((b=b||v.length)>v.length&&(b=v.length),_=b-1;0<=_&&(192&v[_])==128;)_--;return _<0||_===0?b:_+u[v[_]]>b?_:b})(p),y=p;g!==p.length&&(o.uint8array?(y=p.subarray(0,g),this.leftOver=p.subarray(g,p.length)):(y=p.slice(0,g),this.leftOver=p.slice(g,p.length))),this.push({data:i.utf8decode(y),meta:h.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(f,l),f.prototype.processChunk=function(h){this.push({data:i.utf8encode(h.data),meta:h.meta})},i.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function u(m){return m}function c(m,g){for(var y=0;y<m.length;++y)g[y]=255&m.charCodeAt(y);return g}n("setimmediate"),i.newBlob=function(m,g){i.checkSupport("blob");try{return new Blob([m],{type:g})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(m),y.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,g,y){var v=[],b=0,_=m.length;if(_<=y)return String.fromCharCode.apply(null,m);for(;b<_;)g==="array"||g==="nodebuffer"?v.push(String.fromCharCode.apply(null,m.slice(b,Math.min(b+y,_)))):v.push(String.fromCharCode.apply(null,m.subarray(b,Math.min(b+y,_)))),b+=y;return v.join("")},stringifyByChar:function(m){for(var g="",y=0;y<m.length;y++)g+=String.fromCharCode(m[y]);return g},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function f(m){var g=65536,y=i.getTypeOf(m),v=!0;if(y==="uint8array"?v=d.applyCanBeUsed.uint8array:y==="nodebuffer"&&(v=d.applyCanBeUsed.nodebuffer),v)for(;1<g;)try{return d.stringifyByChunk(m,y,g)}catch{g=Math.floor(g/2)}return d.stringifyByChar(m)}function h(m,g){for(var y=0;y<m.length;y++)g[y]=m[y];return g}i.applyFromCharCode=f;var p={};p.string={string:u,array:function(m){return c(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return c(m,new Uint8Array(m.length))},nodebuffer:function(m){return c(m,a.allocBuffer(m.length))}},p.array={string:f,array:u,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},p.arraybuffer={string:function(m){return f(new Uint8Array(m))},array:function(m){return h(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:u,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:f,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:u,nodebuffer:function(m){return a.newBufferFrom(m)}},p.nodebuffer={string:f,array:function(m){return h(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return h(m,new Uint8Array(m.length))},nodebuffer:u},i.transformTo=function(m,g){if(g=g||"",!m)return g;i.checkSupport(m);var y=i.getTypeOf(g);return p[y][m](g)},i.resolve=function(m){for(var g=m.split("/"),y=[],v=0;v<g.length;v++){var b=g[v];b==="."||b===""&&v!==0&&v!==g.length-1||(b===".."?y.pop():y.push(b))}return y.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var g,y,v="";for(y=0;y<(m||"").length;y++)v+="\\x"+((g=m.charCodeAt(y))<16?"0":"")+g.toString(16).toUpperCase();return v},i.delay=function(m,g,y){setImmediate(function(){m.apply(y||null,g||[])})},i.inherits=function(m,g){function y(){}y.prototype=g.prototype,m.prototype=new y},i.extend=function(){var m,g,y={};for(m=0;m<arguments.length;m++)for(g in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],g)&&y[g]===void 0&&(y[g]=arguments[m][g]);return y},i.prepareContent=function(m,g,y,v,b){return l.Promise.resolve(g).then(function(_){return s.blob&&(_ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(_))!==-1)&&typeof FileReader<"u"?new l.Promise(function(E,S){var T=new FileReader;T.onload=function(A){E(A.target.result)},T.onerror=function(A){S(A.target.error)},T.readAsArrayBuffer(_)}):_}).then(function(_){var E=i.getTypeOf(_);return E?(E==="arraybuffer"?_=i.transformTo("uint8array",_):E==="string"&&(b?_=o.decode(_):y&&v!==!0&&(_=(function(S){return c(S,s.uint8array?new Uint8Array(S.length):new Array(S.length))})(_))),_):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),u=n("./support");function c(d){this.files=[],this.loadOptions=d}c.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(d)+")")}},isSignature:function(d,f){var h=this.reader.index;this.reader.setIndex(d);var p=this.reader.readString(4)===f;return this.reader.setIndex(h),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),f=u.uint8array?"uint8array":"array",h=o.transformTo(f,d);this.zipComment=this.loadOptions.decodeFileName(h)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,f,h,p=this.zip64EndOfCentralSize-44;0<p;)d=this.reader.readInt(2),f=this.reader.readInt(4),h=this.reader.readData(f),this.zip64ExtensibleData[d]={id:d,length:f,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,f;for(d=0;d<this.files.length;d++)f=this.files[d],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var f=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var h=this.centralDirOffset+this.centralDirSize;this.zip64&&(h+=20,h+=12+this.zip64EndOfCentralSize);var p=f-h;if(0<p)this.isSignature(f,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),c=n("./compressions"),d=n("./support");function f(h,p){this.options=h,this.loadOptions=p}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(h){var p,m;if(h.skip(22),this.fileNameLength=h.readInt(2),m=h.readInt(2),this.fileName=h.readData(this.fileNameLength),h.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(g){for(var y in c)if(Object.prototype.hasOwnProperty.call(c,y)&&c[y].magic===g)return c[y];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,h.readData(this.compressedSize))},readCentralPart:function(h){this.versionMadeBy=h.readInt(2),h.skip(2),this.bitFlag=h.readInt(2),this.compressionMethod=h.readString(2),this.date=h.readDate(),this.crc32=h.readInt(4),this.compressedSize=h.readInt(4),this.uncompressedSize=h.readInt(4);var p=h.readInt(2);if(this.extraFieldsLength=h.readInt(2),this.fileCommentLength=h.readInt(2),this.diskNumberStart=h.readInt(2),this.internalFileAttributes=h.readInt(2),this.externalFileAttributes=h.readInt(4),this.localHeaderOffset=h.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");h.skip(p),this.readExtraFields(h),this.parseZIP64ExtraField(h),this.fileComment=h.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var h=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),h==0&&(this.dosPermissions=63&this.externalFileAttributes),h==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var h=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=h.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=h.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=h.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=h.readInt(4))}},readExtraFields:function(h){var p,m,g,y=h.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});h.index+4<y;)p=h.readInt(2),m=h.readInt(2),g=h.readData(m),this.extraFields[p]={id:p,length:m,value:g};h.setIndex(y)},handleUTF8:function(){var h=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(h,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var g=this.findExtraFieldUnicodeComment();if(g!==null)this.fileCommentStr=g;else{var y=o.transformTo(h,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var h=this.extraFields[28789];if(h){var p=s(h.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:u.utf8decode(p.readData(h.length-5))}return null},findExtraFieldUnicodeComment:function(){var h=this.extraFields[25461];if(h){var p=s(h.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:u.utf8decode(p.readData(h.length-5))}return null}},r.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(p,m,g){this.name=p,this.dir=g.dir,this.date=g.date,this.comment=g.comment,this.unixPermissions=g.unixPermissions,this.dosPermissions=g.dosPermissions,this._data=m,this._dataBinary=g.binary,this.options={compression:g.compression,compressionOptions:g.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),c=n("./stream/GenericWorker");s.prototype={internalStream:function(p){var m=null,g="string";try{if(!p)throw new Error("No output type specified.");var y=(g=p.toLowerCase())==="string"||g==="text";g!=="binarystring"&&g!=="text"||(g="string"),m=this._decompressWorker();var v=!this._dataBinary;v&&!y&&(m=m.pipe(new l.Utf8EncodeWorker)),!v&&y&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(b){(m=new c("error")).error(b)}return new o(m,g,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof u&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var g=this._decompressWorker();return this._dataBinary||(g=g.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(g,p,m)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof c?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<d.length;h++)s.prototype[d[h]]=f;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var u=0,c=new l(p),d=s.document.createTextNode("");c.observe(d,{characterData:!0}),o=function(){d.data=u=++u%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var f=new s.MessageChannel;f.port1.onmessage=p,o=function(){f.port2.postMessage(0)}}var h=[];function p(){var m,g;a=!0;for(var y=h.length;y;){for(g=h,h=[],m=-1;++m<y;)g[m]();y=h.length}a=!1}r.exports=function(m){h.push(m)!==1||a||o()}}).call(this,typeof $i<"u"?$i:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,y!==o&&m(this,y)}function f(y,v,b){this.promise=y,typeof v=="function"&&(this.onFulfilled=v,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function h(y,v,b){s(function(){var _;try{_=v(b)}catch(E){return a.reject(y,E)}_===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,_)})}function p(y){var v=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof v=="function")return function(){v.apply(y,arguments)}}function m(y,v){var b=!1;function _(T){b||(b=!0,a.reject(y,T))}function E(T){b||(b=!0,a.resolve(y,T))}var S=g(function(){v(E,_)});S.status==="error"&&_(S.value)}function g(y,v){var b={};try{b.value=y(v),b.status="success"}catch(_){b.status="error",b.value=_}return b}(r.exports=d).prototype.finally=function(y){if(typeof y!="function")return this;var v=this.constructor;return this.then(function(b){return v.resolve(y()).then(function(){return b})},function(b){return v.resolve(y()).then(function(){throw b})})},d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,v){if(typeof y!="function"&&this.state===u||typeof v!="function"&&this.state===l)return this;var b=new this.constructor(o);return this.state!==c?h(b,this.state===u?y:v,this.outcome):this.queue.push(new f(b,y,v)),b},f.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},f.prototype.otherCallFulfilled=function(y){h(this.promise,this.onFulfilled,y)},f.prototype.callRejected=function(y){a.reject(this.promise,y)},f.prototype.otherCallRejected=function(y){h(this.promise,this.onRejected,y)},a.resolve=function(y,v){var b=g(p,v);if(b.status==="error")return a.reject(y,b.value);var _=b.value;if(_)m(y,_);else{y.state=u,y.outcome=v;for(var E=-1,S=y.queue.length;++E<S;)y.queue[E].callFulfilled(v)}return y},a.reject=function(y,v){y.state=l,y.outcome=v;for(var b=-1,_=y.queue.length;++b<_;)y.queue[b].callRejected(v);return y},d.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},d.reject=function(y){var v=new this(o);return a.reject(v,y)},d.all=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,_=!1;if(!b)return this.resolve([]);for(var E=new Array(b),S=0,T=-1,A=new this(o);++T<b;)R(y[T],T);return A;function R(I,P){v.resolve(I).then(function(N){E[P]=N,++S!==b||_||(_=!0,a.resolve(A,E))},function(N){_||(_=!0,a.reject(A,N))})}},d.race=function(y){var v=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,_=!1;if(!b)return this.resolve([]);for(var E=-1,S=new this(o);++E<b;)T=y[E],v.resolve(T).then(function(A){_||(_=!0,a.resolve(S,A))},function(A){_||(_=!0,a.reject(S,A))});var T;return S}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),c=Object.prototype.toString,d=0,f=-1,h=0,p=8;function m(y){if(!(this instanceof m))return new m(y);this.options=o.assign({level:f,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},y||{});var v=this.options;v.raw&&0<v.windowBits?v.windowBits=-v.windowBits:v.gzip&&0<v.windowBits&&v.windowBits<16&&(v.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var b=s.deflateInit2(this.strm,v.level,v.method,v.windowBits,v.memLevel,v.strategy);if(b!==d)throw new Error(l[b]);if(v.header&&s.deflateSetHeader(this.strm,v.header),v.dictionary){var _;if(_=typeof v.dictionary=="string"?a.string2buf(v.dictionary):c.call(v.dictionary)==="[object ArrayBuffer]"?new Uint8Array(v.dictionary):v.dictionary,(b=s.deflateSetDictionary(this.strm,_))!==d)throw new Error(l[b]);this._dict_set=!0}}function g(y,v){var b=new m(v);if(b.push(y,!0),b.err)throw b.msg||l[b.err];return b.result}m.prototype.push=function(y,v){var b,_,E=this.strm,S=this.options.chunkSize;if(this.ended)return!1;_=v===~~v?v:v===!0?4:0,typeof y=="string"?E.input=a.string2buf(y):c.call(y)==="[object ArrayBuffer]"?E.input=new Uint8Array(y):E.input=y,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new o.Buf8(S),E.next_out=0,E.avail_out=S),(b=s.deflate(E,_))!==1&&b!==d)return this.onEnd(b),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||_!==4&&_!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(E.output,E.next_out))):this.onData(o.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&b!==1);return _===4?(b=s.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===d):_!==2||(this.onEnd(d),!(E.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=m,i.deflate=g,i.deflateRaw=function(y,v){return(v=v||{}).raw=!0,g(y,v)},i.gzip=function(y,v){return(v=v||{}).gzip=!0,g(y,v)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),c=n("./zlib/zstream"),d=n("./zlib/gzheader"),f=Object.prototype.toString;function h(m){if(!(this instanceof h))return new h(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var g=this.options;g.raw&&0<=g.windowBits&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),!(0<=g.windowBits&&g.windowBits<16)||m&&m.windowBits||(g.windowBits+=32),15<g.windowBits&&g.windowBits<48&&(15&g.windowBits)==0&&(g.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,g.windowBits);if(y!==l.Z_OK)throw new Error(u[y]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function p(m,g){var y=new h(g);if(y.push(m,!0),y.err)throw y.msg||u[y.err];return y.result}h.prototype.push=function(m,g){var y,v,b,_,E,S,T=this.strm,A=this.options.chunkSize,R=this.options.dictionary,I=!1;if(this.ended)return!1;v=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?T.input=a.binstring2buf(m):f.call(m)==="[object ArrayBuffer]"?T.input=new Uint8Array(m):T.input=m,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(A),T.next_out=0,T.avail_out=A),(y=s.inflate(T,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&R&&(S=typeof R=="string"?a.string2buf(R):f.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,y=s.inflateSetDictionary(this.strm,S)),y===l.Z_BUF_ERROR&&I===!0&&(y=l.Z_OK,I=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&y!==l.Z_STREAM_END&&(T.avail_in!==0||v!==l.Z_FINISH&&v!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=a.utf8border(T.output,T.next_out),_=T.next_out-b,E=a.buf2string(T.output,b),T.next_out=_,T.avail_out=A-_,_&&o.arraySet(T.output,T.output,b,_,0),this.onData(E)):this.onData(o.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(I=!0)}while((0<T.avail_in||T.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(v=l.Z_FINISH),v===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):v!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(T.avail_out=0))},h.prototype.onData=function(m){this.chunks.push(m)},h.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=h,i.inflate=p,i.inflateRaw=function(m,g){return(g=g||{}).raw=!0,p(m,g)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(l[d]=c[d])}}return l},i.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,c,d,f){if(u.subarray&&l.subarray)l.set(u.subarray(c,c+d),f);else for(var h=0;h<d;h++)l[f+h]=u[c+h]},flattenChunks:function(l){var u,c,d,f,h,p;for(u=d=0,c=l.length;u<c;u++)d+=l[u].length;for(p=new Uint8Array(d),u=f=0,c=l.length;u<c;u++)h=l[u],p.set(h,f),f+=h.length;return p}},a={arraySet:function(l,u,c,d,f){for(var h=0;h<d;h++)l[f+h]=u[c+h]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function c(d,f){if(f<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(d,f));for(var h="",p=0;p<f;p++)h+=String.fromCharCode(d[p]);return h}l[254]=l[254]=1,i.string2buf=function(d){var f,h,p,m,g,y=d.length,v=0;for(m=0;m<y;m++)(64512&(h=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(p-56320),m++),v+=h<128?1:h<2048?2:h<65536?3:4;for(f=new s.Buf8(v),m=g=0;g<v;m++)(64512&(h=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(h=65536+(h-55296<<10)+(p-56320),m++),h<128?f[g++]=h:(h<2048?f[g++]=192|h>>>6:(h<65536?f[g++]=224|h>>>12:(f[g++]=240|h>>>18,f[g++]=128|h>>>12&63),f[g++]=128|h>>>6&63),f[g++]=128|63&h);return f},i.buf2binstring=function(d){return c(d,d.length)},i.binstring2buf=function(d){for(var f=new s.Buf8(d.length),h=0,p=f.length;h<p;h++)f[h]=d.charCodeAt(h);return f},i.buf2string=function(d,f){var h,p,m,g,y=f||d.length,v=new Array(2*y);for(h=p=0;h<y;)if((m=d[h++])<128)v[p++]=m;else if(4<(g=l[m]))v[p++]=65533,h+=g-1;else{for(m&=g===2?31:g===3?15:7;1<g&&h<y;)m=m<<6|63&d[h++],g--;1<g?v[p++]=65533:m<65536?v[p++]=m:(m-=65536,v[p++]=55296|m>>10&1023,v[p++]=56320|1023&m)}return c(v,p)},i.utf8border=function(d,f){var h;for((f=f||d.length)>d.length&&(f=d.length),h=f-1;0<=h&&(192&d[h])==128;)h--;return h<0||h===0?f:h+l[d[h]]>f?h:f}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var u=65535&s|0,c=s>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;c=c+(u=u+o[l++]|0)|0,--d;);u%=65521,c%=65521}return u|c<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=(function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a})();r.exports=function(o,a,l,u){var c=s,d=u+l;o^=-1;for(var f=u;f<d;f++)o=o>>>8^c[255&(o^a[f])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),u=n("./crc32"),c=n("./messages"),d=0,f=4,h=0,p=-2,m=-1,g=4,y=2,v=8,b=9,_=286,E=30,S=19,T=2*_+1,A=15,R=3,I=258,P=I+R+1,N=42,M=113,O=1,j=2,B=3,H=4;function q(X,fe){return X.msg=c[fe],fe}function G(X){return(X<<1)-(4<X?9:0)}function U(X){for(var fe=X.length;0<=--fe;)X[fe]=0}function L(X){var fe=X.state,de=fe.pending;de>X.avail_out&&(de=X.avail_out),de!==0&&(o.arraySet(X.output,fe.pending_buf,fe.pending_out,de,X.next_out),X.next_out+=de,fe.pending_out+=de,X.total_out+=de,X.avail_out-=de,fe.pending-=de,fe.pending===0&&(fe.pending_out=0))}function z(X,fe){a._tr_flush_block(X,0<=X.block_start?X.block_start:-1,X.strstart-X.block_start,fe),X.block_start=X.strstart,L(X.strm)}function V(X,fe){X.pending_buf[X.pending++]=fe}function Y(X,fe){X.pending_buf[X.pending++]=fe>>>8&255,X.pending_buf[X.pending++]=255&fe}function Q(X,fe){var de,te,ee=X.max_chain_length,me=X.strstart,Ie=X.prev_length,Te=X.nice_match,we=X.strstart>X.w_size-P?X.strstart-(X.w_size-P):0,Me=X.window,ke=X.w_mask,Oe=X.prev,xe=X.strstart+I,je=Me[me+Ie-1],Ve=Me[me+Ie];X.prev_length>=X.good_match&&(ee>>=2),Te>X.lookahead&&(Te=X.lookahead);do if(Me[(de=fe)+Ie]===Ve&&Me[de+Ie-1]===je&&Me[de]===Me[me]&&Me[++de]===Me[me+1]){me+=2,de++;do;while(Me[++me]===Me[++de]&&Me[++me]===Me[++de]&&Me[++me]===Me[++de]&&Me[++me]===Me[++de]&&Me[++me]===Me[++de]&&Me[++me]===Me[++de]&&Me[++me]===Me[++de]&&Me[++me]===Me[++de]&&me<xe);if(te=I-(xe-me),me=xe-I,Ie<te){if(X.match_start=fe,Te<=(Ie=te))break;je=Me[me+Ie-1],Ve=Me[me+Ie]}}while((fe=Oe[fe&ke])>we&&--ee!=0);return Ie<=X.lookahead?Ie:X.lookahead}function ne(X){var fe,de,te,ee,me,Ie,Te,we,Me,ke,Oe=X.w_size;do{if(ee=X.window_size-X.lookahead-X.strstart,X.strstart>=Oe+(Oe-P)){for(o.arraySet(X.window,X.window,Oe,Oe,0),X.match_start-=Oe,X.strstart-=Oe,X.block_start-=Oe,fe=de=X.hash_size;te=X.head[--fe],X.head[fe]=Oe<=te?te-Oe:0,--de;);for(fe=de=Oe;te=X.prev[--fe],X.prev[fe]=Oe<=te?te-Oe:0,--de;);ee+=Oe}if(X.strm.avail_in===0)break;if(Ie=X.strm,Te=X.window,we=X.strstart+X.lookahead,Me=ee,ke=void 0,ke=Ie.avail_in,Me<ke&&(ke=Me),de=ke===0?0:(Ie.avail_in-=ke,o.arraySet(Te,Ie.input,Ie.next_in,ke,we),Ie.state.wrap===1?Ie.adler=l(Ie.adler,Te,ke,we):Ie.state.wrap===2&&(Ie.adler=u(Ie.adler,Te,ke,we)),Ie.next_in+=ke,Ie.total_in+=ke,ke),X.lookahead+=de,X.lookahead+X.insert>=R)for(me=X.strstart-X.insert,X.ins_h=X.window[me],X.ins_h=(X.ins_h<<X.hash_shift^X.window[me+1])&X.hash_mask;X.insert&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[me+R-1])&X.hash_mask,X.prev[me&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=me,me++,X.insert--,!(X.lookahead+X.insert<R)););}while(X.lookahead<P&&X.strm.avail_in!==0)}function ue(X,fe){for(var de,te;;){if(X.lookahead<P){if(ne(X),X.lookahead<P&&fe===d)return O;if(X.lookahead===0)break}if(de=0,X.lookahead>=R&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+R-1])&X.hash_mask,de=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),de!==0&&X.strstart-de<=X.w_size-P&&(X.match_length=Q(X,de)),X.match_length>=R)if(te=a._tr_tally(X,X.strstart-X.match_start,X.match_length-R),X.lookahead-=X.match_length,X.match_length<=X.max_lazy_match&&X.lookahead>=R){for(X.match_length--;X.strstart++,X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+R-1])&X.hash_mask,de=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart,--X.match_length!=0;);X.strstart++}else X.strstart+=X.match_length,X.match_length=0,X.ins_h=X.window[X.strstart],X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+1])&X.hash_mask;else te=a._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++;if(te&&(z(X,!1),X.strm.avail_out===0))return O}return X.insert=X.strstart<R-1?X.strstart:R-1,fe===f?(z(X,!0),X.strm.avail_out===0?B:H):X.last_lit&&(z(X,!1),X.strm.avail_out===0)?O:j}function se(X,fe){for(var de,te,ee;;){if(X.lookahead<P){if(ne(X),X.lookahead<P&&fe===d)return O;if(X.lookahead===0)break}if(de=0,X.lookahead>=R&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+R-1])&X.hash_mask,de=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),X.prev_length=X.match_length,X.prev_match=X.match_start,X.match_length=R-1,de!==0&&X.prev_length<X.max_lazy_match&&X.strstart-de<=X.w_size-P&&(X.match_length=Q(X,de),X.match_length<=5&&(X.strategy===1||X.match_length===R&&4096<X.strstart-X.match_start)&&(X.match_length=R-1)),X.prev_length>=R&&X.match_length<=X.prev_length){for(ee=X.strstart+X.lookahead-R,te=a._tr_tally(X,X.strstart-1-X.prev_match,X.prev_length-R),X.lookahead-=X.prev_length-1,X.prev_length-=2;++X.strstart<=ee&&(X.ins_h=(X.ins_h<<X.hash_shift^X.window[X.strstart+R-1])&X.hash_mask,de=X.prev[X.strstart&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=X.strstart),--X.prev_length!=0;);if(X.match_available=0,X.match_length=R-1,X.strstart++,te&&(z(X,!1),X.strm.avail_out===0))return O}else if(X.match_available){if((te=a._tr_tally(X,0,X.window[X.strstart-1]))&&z(X,!1),X.strstart++,X.lookahead--,X.strm.avail_out===0)return O}else X.match_available=1,X.strstart++,X.lookahead--}return X.match_available&&(te=a._tr_tally(X,0,X.window[X.strstart-1]),X.match_available=0),X.insert=X.strstart<R-1?X.strstart:R-1,fe===f?(z(X,!0),X.strm.avail_out===0?B:H):X.last_lit&&(z(X,!1),X.strm.avail_out===0)?O:j}function ae(X,fe,de,te,ee){this.good_length=X,this.max_lazy=fe,this.nice_length=de,this.max_chain=te,this.func=ee}function he(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*T),this.dyn_dtree=new o.Buf16(2*(2*E+1)),this.bl_tree=new o.Buf16(2*(2*S+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(A+1),this.heap=new o.Buf16(2*_+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*_+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ie(X){var fe;return X&&X.state?(X.total_in=X.total_out=0,X.data_type=y,(fe=X.state).pending=0,fe.pending_out=0,fe.wrap<0&&(fe.wrap=-fe.wrap),fe.status=fe.wrap?N:M,X.adler=fe.wrap===2?0:1,fe.last_flush=d,a._tr_init(fe),h):q(X,p)}function le(X){var fe=ie(X);return fe===h&&(function(de){de.window_size=2*de.w_size,U(de.head),de.max_lazy_match=s[de.level].max_lazy,de.good_match=s[de.level].good_length,de.nice_match=s[de.level].nice_length,de.max_chain_length=s[de.level].max_chain,de.strstart=0,de.block_start=0,de.lookahead=0,de.insert=0,de.match_length=de.prev_length=R-1,de.match_available=0,de.ins_h=0})(X.state),fe}function Ce(X,fe,de,te,ee,me){if(!X)return p;var Ie=1;if(fe===m&&(fe=6),te<0?(Ie=0,te=-te):15<te&&(Ie=2,te-=16),ee<1||b<ee||de!==v||te<8||15<te||fe<0||9<fe||me<0||g<me)return q(X,p);te===8&&(te=9);var Te=new he;return(X.state=Te).strm=X,Te.wrap=Ie,Te.gzhead=null,Te.w_bits=te,Te.w_size=1<<Te.w_bits,Te.w_mask=Te.w_size-1,Te.hash_bits=ee+7,Te.hash_size=1<<Te.hash_bits,Te.hash_mask=Te.hash_size-1,Te.hash_shift=~~((Te.hash_bits+R-1)/R),Te.window=new o.Buf8(2*Te.w_size),Te.head=new o.Buf16(Te.hash_size),Te.prev=new o.Buf16(Te.w_size),Te.lit_bufsize=1<<ee+6,Te.pending_buf_size=4*Te.lit_bufsize,Te.pending_buf=new o.Buf8(Te.pending_buf_size),Te.d_buf=1*Te.lit_bufsize,Te.l_buf=3*Te.lit_bufsize,Te.level=fe,Te.strategy=me,Te.method=de,le(X)}s=[new ae(0,0,0,0,function(X,fe){var de=65535;for(de>X.pending_buf_size-5&&(de=X.pending_buf_size-5);;){if(X.lookahead<=1){if(ne(X),X.lookahead===0&&fe===d)return O;if(X.lookahead===0)break}X.strstart+=X.lookahead,X.lookahead=0;var te=X.block_start+de;if((X.strstart===0||X.strstart>=te)&&(X.lookahead=X.strstart-te,X.strstart=te,z(X,!1),X.strm.avail_out===0)||X.strstart-X.block_start>=X.w_size-P&&(z(X,!1),X.strm.avail_out===0))return O}return X.insert=0,fe===f?(z(X,!0),X.strm.avail_out===0?B:H):(X.strstart>X.block_start&&(z(X,!1),X.strm.avail_out),O)}),new ae(4,4,8,4,ue),new ae(4,5,16,8,ue),new ae(4,6,32,32,ue),new ae(4,4,16,16,se),new ae(8,16,32,32,se),new ae(8,16,128,128,se),new ae(8,32,128,256,se),new ae(32,128,258,1024,se),new ae(32,258,258,4096,se)],i.deflateInit=function(X,fe){return Ce(X,fe,v,15,8,0)},i.deflateInit2=Ce,i.deflateReset=le,i.deflateResetKeep=ie,i.deflateSetHeader=function(X,fe){return X&&X.state?X.state.wrap!==2?p:(X.state.gzhead=fe,h):p},i.deflate=function(X,fe){var de,te,ee,me;if(!X||!X.state||5<fe||fe<0)return X?q(X,p):p;if(te=X.state,!X.output||!X.input&&X.avail_in!==0||te.status===666&&fe!==f)return q(X,X.avail_out===0?-5:p);if(te.strm=X,de=te.last_flush,te.last_flush=fe,te.status===N)if(te.wrap===2)X.adler=0,V(te,31),V(te,139),V(te,8),te.gzhead?(V(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),V(te,255&te.gzhead.time),V(te,te.gzhead.time>>8&255),V(te,te.gzhead.time>>16&255),V(te,te.gzhead.time>>24&255),V(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),V(te,255&te.gzhead.os),te.gzhead.extra&&te.gzhead.extra.length&&(V(te,255&te.gzhead.extra.length),V(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(X.adler=u(X.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=69):(V(te,0),V(te,0),V(te,0),V(te,0),V(te,0),V(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),V(te,3),te.status=M);else{var Ie=v+(te.w_bits-8<<4)<<8;Ie|=(2<=te.strategy||te.level<2?0:te.level<6?1:te.level===6?2:3)<<6,te.strstart!==0&&(Ie|=32),Ie+=31-Ie%31,te.status=M,Y(te,Ie),te.strstart!==0&&(Y(te,X.adler>>>16),Y(te,65535&X.adler)),X.adler=1}if(te.status===69)if(te.gzhead.extra){for(ee=te.pending;te.gzindex<(65535&te.gzhead.extra.length)&&(te.pending!==te.pending_buf_size||(te.gzhead.hcrc&&te.pending>ee&&(X.adler=u(X.adler,te.pending_buf,te.pending-ee,ee)),L(X),ee=te.pending,te.pending!==te.pending_buf_size));)V(te,255&te.gzhead.extra[te.gzindex]),te.gzindex++;te.gzhead.hcrc&&te.pending>ee&&(X.adler=u(X.adler,te.pending_buf,te.pending-ee,ee)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=73)}else te.status=73;if(te.status===73)if(te.gzhead.name){ee=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>ee&&(X.adler=u(X.adler,te.pending_buf,te.pending-ee,ee)),L(X),ee=te.pending,te.pending===te.pending_buf_size)){me=1;break}me=te.gzindex<te.gzhead.name.length?255&te.gzhead.name.charCodeAt(te.gzindex++):0,V(te,me)}while(me!==0);te.gzhead.hcrc&&te.pending>ee&&(X.adler=u(X.adler,te.pending_buf,te.pending-ee,ee)),me===0&&(te.gzindex=0,te.status=91)}else te.status=91;if(te.status===91)if(te.gzhead.comment){ee=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>ee&&(X.adler=u(X.adler,te.pending_buf,te.pending-ee,ee)),L(X),ee=te.pending,te.pending===te.pending_buf_size)){me=1;break}me=te.gzindex<te.gzhead.comment.length?255&te.gzhead.comment.charCodeAt(te.gzindex++):0,V(te,me)}while(me!==0);te.gzhead.hcrc&&te.pending>ee&&(X.adler=u(X.adler,te.pending_buf,te.pending-ee,ee)),me===0&&(te.status=103)}else te.status=103;if(te.status===103&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&L(X),te.pending+2<=te.pending_buf_size&&(V(te,255&X.adler),V(te,X.adler>>8&255),X.adler=0,te.status=M)):te.status=M),te.pending!==0){if(L(X),X.avail_out===0)return te.last_flush=-1,h}else if(X.avail_in===0&&G(fe)<=G(de)&&fe!==f)return q(X,-5);if(te.status===666&&X.avail_in!==0)return q(X,-5);if(X.avail_in!==0||te.lookahead!==0||fe!==d&&te.status!==666){var Te=te.strategy===2?(function(we,Me){for(var ke;;){if(we.lookahead===0&&(ne(we),we.lookahead===0)){if(Me===d)return O;break}if(we.match_length=0,ke=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++,ke&&(z(we,!1),we.strm.avail_out===0))return O}return we.insert=0,Me===f?(z(we,!0),we.strm.avail_out===0?B:H):we.last_lit&&(z(we,!1),we.strm.avail_out===0)?O:j})(te,fe):te.strategy===3?(function(we,Me){for(var ke,Oe,xe,je,Ve=we.window;;){if(we.lookahead<=I){if(ne(we),we.lookahead<=I&&Me===d)return O;if(we.lookahead===0)break}if(we.match_length=0,we.lookahead>=R&&0<we.strstart&&(Oe=Ve[xe=we.strstart-1])===Ve[++xe]&&Oe===Ve[++xe]&&Oe===Ve[++xe]){je=we.strstart+I;do;while(Oe===Ve[++xe]&&Oe===Ve[++xe]&&Oe===Ve[++xe]&&Oe===Ve[++xe]&&Oe===Ve[++xe]&&Oe===Ve[++xe]&&Oe===Ve[++xe]&&Oe===Ve[++xe]&&xe<je);we.match_length=I-(je-xe),we.match_length>we.lookahead&&(we.match_length=we.lookahead)}if(we.match_length>=R?(ke=a._tr_tally(we,1,we.match_length-R),we.lookahead-=we.match_length,we.strstart+=we.match_length,we.match_length=0):(ke=a._tr_tally(we,0,we.window[we.strstart]),we.lookahead--,we.strstart++),ke&&(z(we,!1),we.strm.avail_out===0))return O}return we.insert=0,Me===f?(z(we,!0),we.strm.avail_out===0?B:H):we.last_lit&&(z(we,!1),we.strm.avail_out===0)?O:j})(te,fe):s[te.level].func(te,fe);if(Te!==B&&Te!==H||(te.status=666),Te===O||Te===B)return X.avail_out===0&&(te.last_flush=-1),h;if(Te===j&&(fe===1?a._tr_align(te):fe!==5&&(a._tr_stored_block(te,0,0,!1),fe===3&&(U(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),L(X),X.avail_out===0))return te.last_flush=-1,h}return fe!==f?h:te.wrap<=0?1:(te.wrap===2?(V(te,255&X.adler),V(te,X.adler>>8&255),V(te,X.adler>>16&255),V(te,X.adler>>24&255),V(te,255&X.total_in),V(te,X.total_in>>8&255),V(te,X.total_in>>16&255),V(te,X.total_in>>24&255)):(Y(te,X.adler>>>16),Y(te,65535&X.adler)),L(X),0<te.wrap&&(te.wrap=-te.wrap),te.pending!==0?h:1)},i.deflateEnd=function(X){var fe;return X&&X.state?(fe=X.state.status)!==N&&fe!==69&&fe!==73&&fe!==91&&fe!==103&&fe!==M&&fe!==666?q(X,p):(X.state=null,fe===M?q(X,-3):h):p},i.deflateSetDictionary=function(X,fe){var de,te,ee,me,Ie,Te,we,Me,ke=fe.length;if(!X||!X.state||(me=(de=X.state).wrap)===2||me===1&&de.status!==N||de.lookahead)return p;for(me===1&&(X.adler=l(X.adler,fe,ke,0)),de.wrap=0,ke>=de.w_size&&(me===0&&(U(de.head),de.strstart=0,de.block_start=0,de.insert=0),Me=new o.Buf8(de.w_size),o.arraySet(Me,fe,ke-de.w_size,de.w_size,0),fe=Me,ke=de.w_size),Ie=X.avail_in,Te=X.next_in,we=X.input,X.avail_in=ke,X.next_in=0,X.input=fe,ne(de);de.lookahead>=R;){for(te=de.strstart,ee=de.lookahead-(R-1);de.ins_h=(de.ins_h<<de.hash_shift^de.window[te+R-1])&de.hash_mask,de.prev[te&de.w_mask]=de.head[de.ins_h],de.head[de.ins_h]=te,te++,--ee;);de.strstart=te,de.lookahead=R-1,ne(de)}return de.strstart+=de.lookahead,de.block_start=de.strstart,de.insert=de.lookahead,de.lookahead=0,de.match_length=de.prev_length=R-1,de.match_available=0,X.next_in=Te,X.input=we,X.avail_in=Ie,de.wrap=me,h},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,u,c,d,f,h,p,m,g,y,v,b,_,E,S,T,A,R,I,P,N,M,O,j;a=s.state,l=s.next_in,O=s.input,u=l+(s.avail_in-5),c=s.next_out,j=s.output,d=c-(o-s.avail_out),f=c+(s.avail_out-257),h=a.dmax,p=a.wsize,m=a.whave,g=a.wnext,y=a.window,v=a.hold,b=a.bits,_=a.lencode,E=a.distcode,S=(1<<a.lenbits)-1,T=(1<<a.distbits)-1;e:do{b<15&&(v+=O[l++]<<b,b+=8,v+=O[l++]<<b,b+=8),A=_[v&S];t:for(;;){if(v>>>=R=A>>>24,b-=R,(R=A>>>16&255)===0)j[c++]=65535&A;else{if(!(16&R)){if((64&R)==0){A=_[(65535&A)+(v&(1<<R)-1)];continue t}if(32&R){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}I=65535&A,(R&=15)&&(b<R&&(v+=O[l++]<<b,b+=8),I+=v&(1<<R)-1,v>>>=R,b-=R),b<15&&(v+=O[l++]<<b,b+=8,v+=O[l++]<<b,b+=8),A=E[v&T];n:for(;;){if(v>>>=R=A>>>24,b-=R,!(16&(R=A>>>16&255))){if((64&R)==0){A=E[(65535&A)+(v&(1<<R)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(P=65535&A,b<(R&=15)&&(v+=O[l++]<<b,(b+=8)<R&&(v+=O[l++]<<b,b+=8)),h<(P+=v&(1<<R)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(v>>>=R,b-=R,(R=c-d)<P){if(m<(R=P-R)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(M=y,(N=0)===g){if(N+=p-R,R<I){for(I-=R;j[c++]=y[N++],--R;);N=c-P,M=j}}else if(g<R){if(N+=p+g-R,(R-=g)<I){for(I-=R;j[c++]=y[N++],--R;);if(N=0,g<I){for(I-=R=g;j[c++]=y[N++],--R;);N=c-P,M=j}}}else if(N+=g-R,R<I){for(I-=R;j[c++]=y[N++],--R;);N=c-P,M=j}for(;2<I;)j[c++]=M[N++],j[c++]=M[N++],j[c++]=M[N++],I-=3;I&&(j[c++]=M[N++],1<I&&(j[c++]=M[N++]))}else{for(N=c-P;j[c++]=j[N++],j[c++]=j[N++],j[c++]=j[N++],2<(I-=3););I&&(j[c++]=j[N++],1<I&&(j[c++]=j[N++]))}break}}break}}while(l<u&&c<f);l-=I=b>>3,v&=(1<<(b-=I<<3))-1,s.next_in=l,s.next_out=c,s.avail_in=l<u?u-l+5:5-(l-u),s.avail_out=c<f?f-c+257:257-(c-f),a.hold=v,a.bits=b}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),c=1,d=2,f=0,h=-2,p=1,m=852,g=592;function y(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(N){var M;return N&&N.state?(M=N.state,N.total_in=N.total_out=M.total=0,N.msg="",M.wrap&&(N.adler=1&M.wrap),M.mode=p,M.last=0,M.havedict=0,M.dmax=32768,M.head=null,M.hold=0,M.bits=0,M.lencode=M.lendyn=new s.Buf32(m),M.distcode=M.distdyn=new s.Buf32(g),M.sane=1,M.back=-1,f):h}function _(N){var M;return N&&N.state?((M=N.state).wsize=0,M.whave=0,M.wnext=0,b(N)):h}function E(N,M){var O,j;return N&&N.state?(j=N.state,M<0?(O=0,M=-M):(O=1+(M>>4),M<48&&(M&=15)),M&&(M<8||15<M)?h:(j.window!==null&&j.wbits!==M&&(j.window=null),j.wrap=O,j.wbits=M,_(N))):h}function S(N,M){var O,j;return N?(j=new v,(N.state=j).window=null,(O=E(N,M))!==f&&(N.state=null),O):h}var T,A,R=!0;function I(N){if(R){var M;for(T=new s.Buf32(512),A=new s.Buf32(32),M=0;M<144;)N.lens[M++]=8;for(;M<256;)N.lens[M++]=9;for(;M<280;)N.lens[M++]=7;for(;M<288;)N.lens[M++]=8;for(u(c,N.lens,0,288,T,0,N.work,{bits:9}),M=0;M<32;)N.lens[M++]=5;u(d,N.lens,0,32,A,0,N.work,{bits:5}),R=!1}N.lencode=T,N.lenbits=9,N.distcode=A,N.distbits=5}function P(N,M,O,j){var B,H=N.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new s.Buf8(H.wsize)),j>=H.wsize?(s.arraySet(H.window,M,O-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(j<(B=H.wsize-H.wnext)&&(B=j),s.arraySet(H.window,M,O-j,B,H.wnext),(j-=B)?(s.arraySet(H.window,M,O-j,j,0),H.wnext=j,H.whave=H.wsize):(H.wnext+=B,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=B))),0}i.inflateReset=_,i.inflateReset2=E,i.inflateResetKeep=b,i.inflateInit=function(N){return S(N,15)},i.inflateInit2=S,i.inflate=function(N,M){var O,j,B,H,q,G,U,L,z,V,Y,Q,ne,ue,se,ae,he,ie,le,Ce,X,fe,de,te,ee=0,me=new s.Buf8(4),Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return h;(O=N.state).mode===12&&(O.mode=13),q=N.next_out,B=N.output,U=N.avail_out,H=N.next_in,j=N.input,G=N.avail_in,L=O.hold,z=O.bits,V=G,Y=U,fe=f;e:for(;;)switch(O.mode){case p:if(O.wrap===0){O.mode=13;break}for(;z<16;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(2&O.wrap&&L===35615){me[O.check=0]=255&L,me[1]=L>>>8&255,O.check=a(O.check,me,2,0),z=L=0,O.mode=2;break}if(O.flags=0,O.head&&(O.head.done=!1),!(1&O.wrap)||(((255&L)<<8)+(L>>8))%31){N.msg="incorrect header check",O.mode=30;break}if((15&L)!=8){N.msg="unknown compression method",O.mode=30;break}if(z-=4,X=8+(15&(L>>>=4)),O.wbits===0)O.wbits=X;else if(X>O.wbits){N.msg="invalid window size",O.mode=30;break}O.dmax=1<<X,N.adler=O.check=1,O.mode=512&L?10:12,z=L=0;break;case 2:for(;z<16;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(O.flags=L,(255&O.flags)!=8){N.msg="unknown compression method",O.mode=30;break}if(57344&O.flags){N.msg="unknown header flags set",O.mode=30;break}O.head&&(O.head.text=L>>8&1),512&O.flags&&(me[0]=255&L,me[1]=L>>>8&255,O.check=a(O.check,me,2,0)),z=L=0,O.mode=3;case 3:for(;z<32;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}O.head&&(O.head.time=L),512&O.flags&&(me[0]=255&L,me[1]=L>>>8&255,me[2]=L>>>16&255,me[3]=L>>>24&255,O.check=a(O.check,me,4,0)),z=L=0,O.mode=4;case 4:for(;z<16;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}O.head&&(O.head.xflags=255&L,O.head.os=L>>8),512&O.flags&&(me[0]=255&L,me[1]=L>>>8&255,O.check=a(O.check,me,2,0)),z=L=0,O.mode=5;case 5:if(1024&O.flags){for(;z<16;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}O.length=L,O.head&&(O.head.extra_len=L),512&O.flags&&(me[0]=255&L,me[1]=L>>>8&255,O.check=a(O.check,me,2,0)),z=L=0}else O.head&&(O.head.extra=null);O.mode=6;case 6:if(1024&O.flags&&(G<(Q=O.length)&&(Q=G),Q&&(O.head&&(X=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Array(O.head.extra_len)),s.arraySet(O.head.extra,j,H,Q,X)),512&O.flags&&(O.check=a(O.check,j,Q,H)),G-=Q,H+=Q,O.length-=Q),O.length))break e;O.length=0,O.mode=7;case 7:if(2048&O.flags){if(G===0)break e;for(Q=0;X=j[H+Q++],O.head&&X&&O.length<65536&&(O.head.name+=String.fromCharCode(X)),X&&Q<G;);if(512&O.flags&&(O.check=a(O.check,j,Q,H)),G-=Q,H+=Q,X)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=8;case 8:if(4096&O.flags){if(G===0)break e;for(Q=0;X=j[H+Q++],O.head&&X&&O.length<65536&&(O.head.comment+=String.fromCharCode(X)),X&&Q<G;);if(512&O.flags&&(O.check=a(O.check,j,Q,H)),G-=Q,H+=Q,X)break e}else O.head&&(O.head.comment=null);O.mode=9;case 9:if(512&O.flags){for(;z<16;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(L!==(65535&O.check)){N.msg="header crc mismatch",O.mode=30;break}z=L=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),N.adler=O.check=0,O.mode=12;break;case 10:for(;z<32;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}N.adler=O.check=y(L),z=L=0,O.mode=11;case 11:if(O.havedict===0)return N.next_out=q,N.avail_out=U,N.next_in=H,N.avail_in=G,O.hold=L,O.bits=z,2;N.adler=O.check=1,O.mode=12;case 12:if(M===5||M===6)break e;case 13:if(O.last){L>>>=7&z,z-=7&z,O.mode=27;break}for(;z<3;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}switch(O.last=1&L,z-=1,3&(L>>>=1)){case 0:O.mode=14;break;case 1:if(I(O),O.mode=20,M!==6)break;L>>>=2,z-=2;break e;case 2:O.mode=17;break;case 3:N.msg="invalid block type",O.mode=30}L>>>=2,z-=2;break;case 14:for(L>>>=7&z,z-=7&z;z<32;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if((65535&L)!=(L>>>16^65535)){N.msg="invalid stored block lengths",O.mode=30;break}if(O.length=65535&L,z=L=0,O.mode=15,M===6)break e;case 15:O.mode=16;case 16:if(Q=O.length){if(G<Q&&(Q=G),U<Q&&(Q=U),Q===0)break e;s.arraySet(B,j,H,Q,q),G-=Q,H+=Q,U-=Q,q+=Q,O.length-=Q;break}O.mode=12;break;case 17:for(;z<14;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(O.nlen=257+(31&L),L>>>=5,z-=5,O.ndist=1+(31&L),L>>>=5,z-=5,O.ncode=4+(15&L),L>>>=4,z-=4,286<O.nlen||30<O.ndist){N.msg="too many length or distance symbols",O.mode=30;break}O.have=0,O.mode=18;case 18:for(;O.have<O.ncode;){for(;z<3;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}O.lens[Ie[O.have++]]=7&L,L>>>=3,z-=3}for(;O.have<19;)O.lens[Ie[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,de={bits:O.lenbits},fe=u(0,O.lens,0,19,O.lencode,0,O.work,de),O.lenbits=de.bits,fe){N.msg="invalid code lengths set",O.mode=30;break}O.have=0,O.mode=19;case 19:for(;O.have<O.nlen+O.ndist;){for(;ae=(ee=O.lencode[L&(1<<O.lenbits)-1])>>>16&255,he=65535&ee,!((se=ee>>>24)<=z);){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(he<16)L>>>=se,z-=se,O.lens[O.have++]=he;else{if(he===16){for(te=se+2;z<te;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(L>>>=se,z-=se,O.have===0){N.msg="invalid bit length repeat",O.mode=30;break}X=O.lens[O.have-1],Q=3+(3&L),L>>>=2,z-=2}else if(he===17){for(te=se+3;z<te;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}z-=se,X=0,Q=3+(7&(L>>>=se)),L>>>=3,z-=3}else{for(te=se+7;z<te;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}z-=se,X=0,Q=11+(127&(L>>>=se)),L>>>=7,z-=7}if(O.have+Q>O.nlen+O.ndist){N.msg="invalid bit length repeat",O.mode=30;break}for(;Q--;)O.lens[O.have++]=X}}if(O.mode===30)break;if(O.lens[256]===0){N.msg="invalid code -- missing end-of-block",O.mode=30;break}if(O.lenbits=9,de={bits:O.lenbits},fe=u(c,O.lens,0,O.nlen,O.lencode,0,O.work,de),O.lenbits=de.bits,fe){N.msg="invalid literal/lengths set",O.mode=30;break}if(O.distbits=6,O.distcode=O.distdyn,de={bits:O.distbits},fe=u(d,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,de),O.distbits=de.bits,fe){N.msg="invalid distances set",O.mode=30;break}if(O.mode=20,M===6)break e;case 20:O.mode=21;case 21:if(6<=G&&258<=U){N.next_out=q,N.avail_out=U,N.next_in=H,N.avail_in=G,O.hold=L,O.bits=z,l(N,Y),q=N.next_out,B=N.output,U=N.avail_out,H=N.next_in,j=N.input,G=N.avail_in,L=O.hold,z=O.bits,O.mode===12&&(O.back=-1);break}for(O.back=0;ae=(ee=O.lencode[L&(1<<O.lenbits)-1])>>>16&255,he=65535&ee,!((se=ee>>>24)<=z);){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(ae&&(240&ae)==0){for(ie=se,le=ae,Ce=he;ae=(ee=O.lencode[Ce+((L&(1<<ie+le)-1)>>ie)])>>>16&255,he=65535&ee,!(ie+(se=ee>>>24)<=z);){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}L>>>=ie,z-=ie,O.back+=ie}if(L>>>=se,z-=se,O.back+=se,O.length=he,ae===0){O.mode=26;break}if(32&ae){O.back=-1,O.mode=12;break}if(64&ae){N.msg="invalid literal/length code",O.mode=30;break}O.extra=15&ae,O.mode=22;case 22:if(O.extra){for(te=O.extra;z<te;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}O.length+=L&(1<<O.extra)-1,L>>>=O.extra,z-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=23;case 23:for(;ae=(ee=O.distcode[L&(1<<O.distbits)-1])>>>16&255,he=65535&ee,!((se=ee>>>24)<=z);){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if((240&ae)==0){for(ie=se,le=ae,Ce=he;ae=(ee=O.distcode[Ce+((L&(1<<ie+le)-1)>>ie)])>>>16&255,he=65535&ee,!(ie+(se=ee>>>24)<=z);){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}L>>>=ie,z-=ie,O.back+=ie}if(L>>>=se,z-=se,O.back+=se,64&ae){N.msg="invalid distance code",O.mode=30;break}O.offset=he,O.extra=15&ae,O.mode=24;case 24:if(O.extra){for(te=O.extra;z<te;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}O.offset+=L&(1<<O.extra)-1,L>>>=O.extra,z-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){N.msg="invalid distance too far back",O.mode=30;break}O.mode=25;case 25:if(U===0)break e;if(Q=Y-U,O.offset>Q){if((Q=O.offset-Q)>O.whave&&O.sane){N.msg="invalid distance too far back",O.mode=30;break}ne=Q>O.wnext?(Q-=O.wnext,O.wsize-Q):O.wnext-Q,Q>O.length&&(Q=O.length),ue=O.window}else ue=B,ne=q-O.offset,Q=O.length;for(U<Q&&(Q=U),U-=Q,O.length-=Q;B[q++]=ue[ne++],--Q;);O.length===0&&(O.mode=21);break;case 26:if(U===0)break e;B[q++]=O.length,U--,O.mode=21;break;case 27:if(O.wrap){for(;z<32;){if(G===0)break e;G--,L|=j[H++]<<z,z+=8}if(Y-=U,N.total_out+=Y,O.total+=Y,Y&&(N.adler=O.check=O.flags?a(O.check,B,Y,q-Y):o(O.check,B,Y,q-Y)),Y=U,(O.flags?L:y(L))!==O.check){N.msg="incorrect data check",O.mode=30;break}z=L=0}O.mode=28;case 28:if(O.wrap&&O.flags){for(;z<32;){if(G===0)break e;G--,L+=j[H++]<<z,z+=8}if(L!==(4294967295&O.total)){N.msg="incorrect length check",O.mode=30;break}z=L=0}O.mode=29;case 29:fe=1;break e;case 30:fe=-3;break e;case 31:return-4;case 32:default:return h}return N.next_out=q,N.avail_out=U,N.next_in=H,N.avail_in=G,O.hold=L,O.bits=z,(O.wsize||Y!==N.avail_out&&O.mode<30&&(O.mode<27||M!==4))&&P(N,N.output,N.next_out,Y-N.avail_out)?(O.mode=31,-4):(V-=N.avail_in,Y-=N.avail_out,N.total_in+=V,N.total_out+=Y,O.total+=Y,O.wrap&&Y&&(N.adler=O.check=O.flags?a(O.check,B,Y,N.next_out-Y):o(O.check,B,Y,N.next_out-Y)),N.data_type=O.bits+(O.last?64:0)+(O.mode===12?128:0)+(O.mode===20||O.mode===15?256:0),(V==0&&Y===0||M===4)&&fe===f&&(fe=-5),fe)},i.inflateEnd=function(N){if(!N||!N.state)return h;var M=N.state;return M.window&&(M.window=null),N.state=null,f},i.inflateGetHeader=function(N,M){var O;return N&&N.state?(2&(O=N.state).wrap)==0?h:((O.head=M).done=!1,f):h},i.inflateSetDictionary=function(N,M){var O,j=M.length;return N&&N.state?(O=N.state).wrap!==0&&O.mode!==11?h:O.mode===11&&o(1,M,j,0)!==O.check?-3:P(N,M,j,j)?(O.mode=31,-4):(O.havedict=1,f):h},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(c,d,f,h,p,m,g,y){var v,b,_,E,S,T,A,R,I,P=y.bits,N=0,M=0,O=0,j=0,B=0,H=0,q=0,G=0,U=0,L=0,z=null,V=0,Y=new s.Buf16(16),Q=new s.Buf16(16),ne=null,ue=0;for(N=0;N<=15;N++)Y[N]=0;for(M=0;M<h;M++)Y[d[f+M]]++;for(B=P,j=15;1<=j&&Y[j]===0;j--);if(j<B&&(B=j),j===0)return p[m++]=20971520,p[m++]=20971520,y.bits=1,0;for(O=1;O<j&&Y[O]===0;O++);for(B<O&&(B=O),N=G=1;N<=15;N++)if(G<<=1,(G-=Y[N])<0)return-1;if(0<G&&(c===0||j!==1))return-1;for(Q[1]=0,N=1;N<15;N++)Q[N+1]=Q[N]+Y[N];for(M=0;M<h;M++)d[f+M]!==0&&(g[Q[d[f+M]]++]=M);if(T=c===0?(z=ne=g,19):c===1?(z=o,V-=257,ne=a,ue-=257,256):(z=l,ne=u,-1),N=O,S=m,q=M=L=0,_=-1,E=(U=1<<(H=B))-1,c===1&&852<U||c===2&&592<U)return 1;for(;;){for(A=N-q,I=g[M]<T?(R=0,g[M]):g[M]>T?(R=ne[ue+g[M]],z[V+g[M]]):(R=96,0),v=1<<N-q,O=b=1<<H;p[S+(L>>q)+(b-=v)]=A<<24|R<<16|I|0,b!==0;);for(v=1<<N-1;L&v;)v>>=1;if(v!==0?(L&=v-1,L+=v):L=0,M++,--Y[N]==0){if(N===j)break;N=d[f+g[M]]}if(B<N&&(L&E)!==_){for(q===0&&(q=B),S+=O,G=1<<(H=N-q);H+q<j&&!((G-=Y[H+q])<=0);)H++,G<<=1;if(U+=1<<H,c===1&&852<U||c===2&&592<U)return 1;p[_=L&E]=B<<24|H<<16|S-m|0}}return L!==0&&(p[S+L]=N-q<<24|64<<16|0),y.bits=B,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(ee){for(var me=ee.length;0<=--me;)ee[me]=0}var u=0,c=29,d=256,f=d+1+c,h=30,p=19,m=2*f+1,g=15,y=16,v=7,b=256,_=16,E=17,S=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],A=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=new Array(2*(f+2));l(P);var N=new Array(2*h);l(N);var M=new Array(512);l(M);var O=new Array(256);l(O);var j=new Array(c);l(j);var B,H,q,G=new Array(h);function U(ee,me,Ie,Te,we){this.static_tree=ee,this.extra_bits=me,this.extra_base=Ie,this.elems=Te,this.max_length=we,this.has_stree=ee&&ee.length}function L(ee,me){this.dyn_tree=ee,this.max_code=0,this.stat_desc=me}function z(ee){return ee<256?M[ee]:M[256+(ee>>>7)]}function V(ee,me){ee.pending_buf[ee.pending++]=255&me,ee.pending_buf[ee.pending++]=me>>>8&255}function Y(ee,me,Ie){ee.bi_valid>y-Ie?(ee.bi_buf|=me<<ee.bi_valid&65535,V(ee,ee.bi_buf),ee.bi_buf=me>>y-ee.bi_valid,ee.bi_valid+=Ie-y):(ee.bi_buf|=me<<ee.bi_valid&65535,ee.bi_valid+=Ie)}function Q(ee,me,Ie){Y(ee,Ie[2*me],Ie[2*me+1])}function ne(ee,me){for(var Ie=0;Ie|=1&ee,ee>>>=1,Ie<<=1,0<--me;);return Ie>>>1}function ue(ee,me,Ie){var Te,we,Me=new Array(g+1),ke=0;for(Te=1;Te<=g;Te++)Me[Te]=ke=ke+Ie[Te-1]<<1;for(we=0;we<=me;we++){var Oe=ee[2*we+1];Oe!==0&&(ee[2*we]=ne(Me[Oe]++,Oe))}}function se(ee){var me;for(me=0;me<f;me++)ee.dyn_ltree[2*me]=0;for(me=0;me<h;me++)ee.dyn_dtree[2*me]=0;for(me=0;me<p;me++)ee.bl_tree[2*me]=0;ee.dyn_ltree[2*b]=1,ee.opt_len=ee.static_len=0,ee.last_lit=ee.matches=0}function ae(ee){8<ee.bi_valid?V(ee,ee.bi_buf):0<ee.bi_valid&&(ee.pending_buf[ee.pending++]=ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0}function he(ee,me,Ie,Te){var we=2*me,Me=2*Ie;return ee[we]<ee[Me]||ee[we]===ee[Me]&&Te[me]<=Te[Ie]}function ie(ee,me,Ie){for(var Te=ee.heap[Ie],we=Ie<<1;we<=ee.heap_len&&(we<ee.heap_len&&he(me,ee.heap[we+1],ee.heap[we],ee.depth)&&we++,!he(me,Te,ee.heap[we],ee.depth));)ee.heap[Ie]=ee.heap[we],Ie=we,we<<=1;ee.heap[Ie]=Te}function le(ee,me,Ie){var Te,we,Me,ke,Oe=0;if(ee.last_lit!==0)for(;Te=ee.pending_buf[ee.d_buf+2*Oe]<<8|ee.pending_buf[ee.d_buf+2*Oe+1],we=ee.pending_buf[ee.l_buf+Oe],Oe++,Te===0?Q(ee,we,me):(Q(ee,(Me=O[we])+d+1,me),(ke=T[Me])!==0&&Y(ee,we-=j[Me],ke),Q(ee,Me=z(--Te),Ie),(ke=A[Me])!==0&&Y(ee,Te-=G[Me],ke)),Oe<ee.last_lit;);Q(ee,b,me)}function Ce(ee,me){var Ie,Te,we,Me=me.dyn_tree,ke=me.stat_desc.static_tree,Oe=me.stat_desc.has_stree,xe=me.stat_desc.elems,je=-1;for(ee.heap_len=0,ee.heap_max=m,Ie=0;Ie<xe;Ie++)Me[2*Ie]!==0?(ee.heap[++ee.heap_len]=je=Ie,ee.depth[Ie]=0):Me[2*Ie+1]=0;for(;ee.heap_len<2;)Me[2*(we=ee.heap[++ee.heap_len]=je<2?++je:0)]=1,ee.depth[we]=0,ee.opt_len--,Oe&&(ee.static_len-=ke[2*we+1]);for(me.max_code=je,Ie=ee.heap_len>>1;1<=Ie;Ie--)ie(ee,Me,Ie);for(we=xe;Ie=ee.heap[1],ee.heap[1]=ee.heap[ee.heap_len--],ie(ee,Me,1),Te=ee.heap[1],ee.heap[--ee.heap_max]=Ie,ee.heap[--ee.heap_max]=Te,Me[2*we]=Me[2*Ie]+Me[2*Te],ee.depth[we]=(ee.depth[Ie]>=ee.depth[Te]?ee.depth[Ie]:ee.depth[Te])+1,Me[2*Ie+1]=Me[2*Te+1]=we,ee.heap[1]=we++,ie(ee,Me,1),2<=ee.heap_len;);ee.heap[--ee.heap_max]=ee.heap[1],(function(Ve,nt){var it,_t,rn,en,zn,zt,wn=nt.dyn_tree,nr=nt.max_code,Yn=nt.stat_desc.static_tree,Ur=nt.stat_desc.has_stree,or=nt.stat_desc.extra_bits,Ir=nt.stat_desc.extra_base,On=nt.stat_desc.max_length,gn=0;for(en=0;en<=g;en++)Ve.bl_count[en]=0;for(wn[2*Ve.heap[Ve.heap_max]+1]=0,it=Ve.heap_max+1;it<m;it++)On<(en=wn[2*wn[2*(_t=Ve.heap[it])+1]+1]+1)&&(en=On,gn++),wn[2*_t+1]=en,nr<_t||(Ve.bl_count[en]++,zn=0,Ir<=_t&&(zn=or[_t-Ir]),zt=wn[2*_t],Ve.opt_len+=zt*(en+zn),Ur&&(Ve.static_len+=zt*(Yn[2*_t+1]+zn)));if(gn!==0){do{for(en=On-1;Ve.bl_count[en]===0;)en--;Ve.bl_count[en]--,Ve.bl_count[en+1]+=2,Ve.bl_count[On]--,gn-=2}while(0<gn);for(en=On;en!==0;en--)for(_t=Ve.bl_count[en];_t!==0;)nr<(rn=Ve.heap[--it])||(wn[2*rn+1]!==en&&(Ve.opt_len+=(en-wn[2*rn+1])*wn[2*rn],wn[2*rn+1]=en),_t--)}})(ee,me),ue(Me,je,ee.bl_count)}function X(ee,me,Ie){var Te,we,Me=-1,ke=me[1],Oe=0,xe=7,je=4;for(ke===0&&(xe=138,je=3),me[2*(Ie+1)+1]=65535,Te=0;Te<=Ie;Te++)we=ke,ke=me[2*(Te+1)+1],++Oe<xe&&we===ke||(Oe<je?ee.bl_tree[2*we]+=Oe:we!==0?(we!==Me&&ee.bl_tree[2*we]++,ee.bl_tree[2*_]++):Oe<=10?ee.bl_tree[2*E]++:ee.bl_tree[2*S]++,Me=we,je=(Oe=0)===ke?(xe=138,3):we===ke?(xe=6,3):(xe=7,4))}function fe(ee,me,Ie){var Te,we,Me=-1,ke=me[1],Oe=0,xe=7,je=4;for(ke===0&&(xe=138,je=3),Te=0;Te<=Ie;Te++)if(we=ke,ke=me[2*(Te+1)+1],!(++Oe<xe&&we===ke)){if(Oe<je)for(;Q(ee,we,ee.bl_tree),--Oe!=0;);else we!==0?(we!==Me&&(Q(ee,we,ee.bl_tree),Oe--),Q(ee,_,ee.bl_tree),Y(ee,Oe-3,2)):Oe<=10?(Q(ee,E,ee.bl_tree),Y(ee,Oe-3,3)):(Q(ee,S,ee.bl_tree),Y(ee,Oe-11,7));Me=we,je=(Oe=0)===ke?(xe=138,3):we===ke?(xe=6,3):(xe=7,4)}}l(G);var de=!1;function te(ee,me,Ie,Te){Y(ee,(u<<1)+(Te?1:0),3),(function(we,Me,ke,Oe){ae(we),V(we,ke),V(we,~ke),s.arraySet(we.pending_buf,we.window,Me,ke,we.pending),we.pending+=ke})(ee,me,Ie)}i._tr_init=function(ee){de||((function(){var me,Ie,Te,we,Me,ke=new Array(g+1);for(we=Te=0;we<c-1;we++)for(j[we]=Te,me=0;me<1<<T[we];me++)O[Te++]=we;for(O[Te-1]=we,we=Me=0;we<16;we++)for(G[we]=Me,me=0;me<1<<A[we];me++)M[Me++]=we;for(Me>>=7;we<h;we++)for(G[we]=Me<<7,me=0;me<1<<A[we]-7;me++)M[256+Me++]=we;for(Ie=0;Ie<=g;Ie++)ke[Ie]=0;for(me=0;me<=143;)P[2*me+1]=8,me++,ke[8]++;for(;me<=255;)P[2*me+1]=9,me++,ke[9]++;for(;me<=279;)P[2*me+1]=7,me++,ke[7]++;for(;me<=287;)P[2*me+1]=8,me++,ke[8]++;for(ue(P,f+1,ke),me=0;me<h;me++)N[2*me+1]=5,N[2*me]=ne(me,5);B=new U(P,T,d+1,f,g),H=new U(N,A,0,h,g),q=new U(new Array(0),R,0,p,v)})(),de=!0),ee.l_desc=new L(ee.dyn_ltree,B),ee.d_desc=new L(ee.dyn_dtree,H),ee.bl_desc=new L(ee.bl_tree,q),ee.bi_buf=0,ee.bi_valid=0,se(ee)},i._tr_stored_block=te,i._tr_flush_block=function(ee,me,Ie,Te){var we,Me,ke=0;0<ee.level?(ee.strm.data_type===2&&(ee.strm.data_type=(function(Oe){var xe,je=4093624447;for(xe=0;xe<=31;xe++,je>>>=1)if(1&je&&Oe.dyn_ltree[2*xe]!==0)return o;if(Oe.dyn_ltree[18]!==0||Oe.dyn_ltree[20]!==0||Oe.dyn_ltree[26]!==0)return a;for(xe=32;xe<d;xe++)if(Oe.dyn_ltree[2*xe]!==0)return a;return o})(ee)),Ce(ee,ee.l_desc),Ce(ee,ee.d_desc),ke=(function(Oe){var xe;for(X(Oe,Oe.dyn_ltree,Oe.l_desc.max_code),X(Oe,Oe.dyn_dtree,Oe.d_desc.max_code),Ce(Oe,Oe.bl_desc),xe=p-1;3<=xe&&Oe.bl_tree[2*I[xe]+1]===0;xe--);return Oe.opt_len+=3*(xe+1)+5+5+4,xe})(ee),we=ee.opt_len+3+7>>>3,(Me=ee.static_len+3+7>>>3)<=we&&(we=Me)):we=Me=Ie+5,Ie+4<=we&&me!==-1?te(ee,me,Ie,Te):ee.strategy===4||Me===we?(Y(ee,2+(Te?1:0),3),le(ee,P,N)):(Y(ee,4+(Te?1:0),3),(function(Oe,xe,je,Ve){var nt;for(Y(Oe,xe-257,5),Y(Oe,je-1,5),Y(Oe,Ve-4,4),nt=0;nt<Ve;nt++)Y(Oe,Oe.bl_tree[2*I[nt]+1],3);fe(Oe,Oe.dyn_ltree,xe-1),fe(Oe,Oe.dyn_dtree,je-1)})(ee,ee.l_desc.max_code+1,ee.d_desc.max_code+1,ke+1),le(ee,ee.dyn_ltree,ee.dyn_dtree)),se(ee),Te&&ae(ee)},i._tr_tally=function(ee,me,Ie){return ee.pending_buf[ee.d_buf+2*ee.last_lit]=me>>>8&255,ee.pending_buf[ee.d_buf+2*ee.last_lit+1]=255&me,ee.pending_buf[ee.l_buf+ee.last_lit]=255&Ie,ee.last_lit++,me===0?ee.dyn_ltree[2*Ie]++:(ee.matches++,me--,ee.dyn_ltree[2*(O[Ie]+d+1)]++,ee.dyn_dtree[2*z(me)]++),ee.last_lit===ee.lit_bufsize-1},i._tr_align=function(ee){Y(ee,2,3),Q(ee,b,P),(function(me){me.bi_valid===16?(V(me,me.bi_buf),me.bi_buf=0,me.bi_valid=0):8<=me.bi_valid&&(me.pending_buf[me.pending++]=255&me.bi_buf,me.bi_buf>>=8,me.bi_valid-=8)})(ee)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,u,c,d,f=1,h={},p=!1,m=o.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(o);g=g&&g.setTimeout?g:o,l={}.toString.call(o.process)==="[object process]"?function(_){process.nextTick(function(){v(_)})}:(function(){if(o.postMessage&&!o.importScripts){var _=!0,E=o.onmessage;return o.onmessage=function(){_=!1},o.postMessage("","*"),o.onmessage=E,_}})()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(_){o.postMessage(d+_,"*")}):o.MessageChannel?((c=new MessageChannel).port1.onmessage=function(_){v(_.data)},function(_){c.port2.postMessage(_)}):m&&"onreadystatechange"in m.createElement("script")?(u=m.documentElement,function(_){var E=m.createElement("script");E.onreadystatechange=function(){v(_),E.onreadystatechange=null,u.removeChild(E),E=null},u.appendChild(E)}):function(_){setTimeout(v,0,_)},g.setImmediate=function(_){typeof _!="function"&&(_=new Function(""+_));for(var E=new Array(arguments.length-1),S=0;S<E.length;S++)E[S]=arguments[S+1];var T={callback:_,args:E};return h[f]=T,l(f),f++},g.clearImmediate=y}function y(_){delete h[_]}function v(_){if(p)setTimeout(v,0,_);else{var E=h[_];if(E){p=!0;try{(function(S){var T=S.callback,A=S.args;switch(A.length){case 0:T();break;case 1:T(A[0]);break;case 2:T(A[0],A[1]);break;case 3:T(A[0],A[1],A[2]);break;default:T.apply(a,A)}})(E)}finally{y(_),p=!1}}}}function b(_){_.source===o&&typeof _.data=="string"&&_.data.indexOf(d)===0&&v(+_.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof $i<"u"?$i:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(lq)),lq.exports}var phn=hhn();const yB=Ao(phn);async function mhn({storageEngine:e,participantId:t,identifier:n,audioUrl:r}){const i=r||await e.getAudioUrl(n,t);if(i){const o=await(await fetch(i)).blob(),a=URL.createObjectURL(o);Object.assign(document.createElement("a"),{href:a,download:`${t}_${n}_audio.webm`}).click(),URL.revokeObjectURL(a)}const s=await e.getTranscriptUrl(n,t);if(s){const o=await(await fetch(s)).blob(),a=URL.createObjectURL(o);Object.assign(document.createElement("a"),{href:a,download:`${t}_${n}_transcript.txt`}).click(),URL.revokeObjectURL(a)}}async function ghn({storageEngine:e,participantId:t,identifier:n,screenRecordingUrl:r}){const i=r||await e.getScreenRecording(n,t);if(i){const s=await(await fetch(i)).blob(),o=URL.createObjectURL(s);Object.assign(document.createElement("a"),{href:o,download:`${t}_${n}_screenRecording.webm`}).click(),URL.revokeObjectURL(o)}}async function iQ(e,t,n){if(n){const i=await(await fetch(n)).blob();e.file(t,i)}}async function vB(e,t){const n=await e.generateAsync({type:"blob"}),r=URL.createObjectURL(n);Object.assign(document.createElement("a"),{href:r,download:t}).click(),URL.revokeObjectURL(r)}async function yhn({storageEngine:e,participantId:t,identifier:n,namePrefix:r,zip:i}){const s=i||new yB;try{const o=await e.getAudioUrl(n,t);await iQ(s,`${r}_${t}_${n}.webm`,o);const a=await e.getTranscriptUrl(n,t);await iQ(s,`${r}_${t}_${n}_transcript.txt`,a),i||vB(s,`${r}_${t}_${n}_audio.zip`)}catch(o){console.warn(`Failed to fetch files for ${n}:`,o)}}async function vhn({storageEngine:e,participants:t,studyId:n,fileName:r}){const i=r||n,s=new yB,o=t.flatMap(a=>Object.values(a.answers).filter(u=>u.endTime>0).sort((u,c)=>u.startTime-c.startTime).map(async u=>{const c=`${u.componentName}_${u.trialOrder}`;await yhn({storageEngine:e,participantId:a.participantId,identifier:c,namePrefix:i,zip:s})}));await Promise.all(o),await vB(s,`${i}_audio.zip`)}async function bhn({storageEngine:e,participantId:t,identifier:n,namePrefix:r,zip:i}){const s=i||new yB;try{const o=await e.getScreenRecording(n,t);await iQ(s,`${r}_${t}_${n}.webm`,o),i||vB(s,`${r}_${t}_${n}_screenRecording.zip`)}catch(o){console.warn(`Failed to fetch files for ${n}:`,o)}}async function whn({storageEngine:e,participants:t,studyId:n,fileName:r}){const i=r||n,s=new yB,o=t.flatMap(a=>Object.values(a.answers).filter(u=>u.endTime>0).sort((u,c)=>u.startTime-c.startTime).map(async u=>{const c=`${u.componentName}_${u.trialOrder}`;await bhn({storageEngine:e,participantId:a.participantId,identifier:c,namePrefix:i,zip:s})}));await Promise.all(o),await vB(s,`${i}_screenRecording.zip`)}function wVe({selectedParticipants:e=[],refresh:t,footer:n=!1}){const{storageEngine:r}=Vi(),{user:i}=t1(),{studyId:s}=So(),[o]=nd(),a=k.useMemo(()=>o.get("participantId")||void 0,[o]),[l,u]=k.useState(null);k.useEffect(()=>{async function A(){if(r&&a&&s){const R=await r.getParticipantData(a);u(R)}else u(null)}A()},[r,a,s]);const c=k.useCallback(async()=>{if(r&&a&&s){const A=await r.getParticipantData(a);u(A)}},[r,a,s]),[d,f]=k.useState(!1),[h,p]=k.useState(!1),[m,g]=k.useState(""),y=k.useMemo(()=>[...e,l].filter(A=>A!==null),[e,l]),v=k.useMemo(()=>y.filter(A=>A.rejected).length,[y]),b=k.useMemo(()=>y.filter(A=>!A.rejected).length,[y]),_=k.useCallback(async(A,R)=>{if(r&&s){const I=R===""?"Rejected by admin":R;await r.rejectParticipant(A,I)}},[r,s]),E=k.useCallback(async A=>{r&&s&&await r.undoRejectParticipant(A)},[r,s]),S=k.useCallback(async()=>{if(f(!1),y.length>0){const R=y.filter(I=>!I.rejected).map(async I=>await _(I.participantId,m));await Promise.all(R)}else await _(a||"",m);t&&await t(),l&&await c(),g("")},[y,t,l,_,m,a,c]),T=k.useCallback(async()=>{if(p(!1),y.length>0){const A=y.map(async R=>await E(R.participantId));await Promise.all(A)}else await E(a||""),await c();t&&await t(),l&&await c()},[y,t,l,E,a,c]);return w.jsxs(w.Fragment,{children:[v>0&&w.jsx(bt,{label:"Only admins can undo rejection",disabled:i.isAdmin,children:w.jsxs(Yt,{disabled:!i.isAdmin,onClick:()=>p(!0),color:"blue",children:["Undo Reject",n?"":` Participants (${v})`]})}),b>0&&w.jsx(bt,{label:"Only admins can reject participants",disabled:i.isAdmin,children:w.jsxs(Yt,{disabled:!i.isAdmin,onClick:()=>f(!0),color:"red",children:["Reject",n?"":` Participants (${b})`]})}),w.jsxs(Fi,{opened:d,onClose:()=>f(!1),title:b>0?`Reject Participants (${b})`:"Reject Participant",children:[w.jsxs(Bd,{icon:w.jsx(Vd,{size:16}),title:"Warning",color:"orange",mb:"md",children:[y.length>0&&v>0&&w.jsxs(w.Fragment,{children:[v," ","of your"," ",y.length," ","selected participant",y.length===1?"":"s"," ",v===1?"has":"have"," ","already been rejected. Clicking reject participants will now reject the other"," ",b,".",w.jsx("br",{}),w.jsx("br",{})]}),"When participants are rejected, their sequences will be reassigned to other participants."]}),w.jsx(iu,{label:"Please enter the reason for rejection.",onChange:A=>g(A.target.value)}),w.jsxs(Rt,{mt:"sm",justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{f(!1),g("")},children:"Cancel"}),w.jsx(Yt,{color:"red",onClick:S,children:y.length>0?"Reject Participants":"Reject Participant"})]})]}),w.jsxs(Fi,{opened:h,onClose:()=>p(!1),title:w.jsx(He,{children:`Undo Reject Participants (${y.length})`}),children:[w.jsx(Bd,{icon:w.jsx(Vd,{size:16}),title:"Warning",color:"orange",mb:"md",children:"When you undo participant rejections, you may end up with unbalanced latin squares. This is because the rejected sequence may have been reassigned."}),y.length>0?w.jsx(He,{children:"Are you sure you want to undo the rejection of these participants?"}):w.jsxs(w.Fragment,{children:[w.jsx(He,{children:"The participant has been rejected."}),w.jsxs(He,{children:["Reason:"," ",l?.rejected&&typeof l.rejected=="object"?l.rejected.reason:"No reason provided"]})]}),w.jsxs(Rt,{mt:"sm",justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"dark",onClick:()=>p(!1),children:"Cancel"}),w.jsx(Yt,{color:"blue",onClick:T,children:y.length>0?"Undo Reject Participants":"Undo Reject Participant"})]})]})]})}const uq={left:5,right:5};function xhn(e,t){return t?t.getParticipantData(e):null}async function _hn(e,t,n,r){return r&&t?await r.getAllParticipantAndTaskTags(e,t):null}async function $_e(e,t){if(e){const n=await e.getTags(t);return Array.isArray(n)?n:[]}return[]}function xVe({visibleParticipants:e,rawTranscript:t,currentShownTranscription:n,width:r,onTimeUpdate:i,isReplay:s,editedTranscript:o,currentTrial:a,saveProvenance:l,jumpedToLine:u=0,studyId:c,setHasAudio:d,storageEngine:f,forceMute:h,onAnalysisIsPlayingChange:p,onProvenanceTimelineChange:m}){const g=t1(),[y,v]=k.useState(1),[b,_]=nd(),E=k.useMemo(()=>b.get("participantId")||"",[b]),{value:S}=Qf(xhn,[E,f]),{value:T,execute:A}=Qf($_e,[f,"task"]),{value:R,execute:I}=Qf($_e,[f,"participant"]),[P,N]=k.useState(!1),[M,O]=k.useState(!0),j=h?!0:M,[B,H]=k.useState(null),[q,G]=k.useState(null);k.useEffect(()=>{async function Te(){if(!f||!E||!a){H(null);return}try{const we=await f.getAudioUrl(a,E);H(we)}catch{H(null)}try{const we=await f.getScreenRecording(a,E);G(we)}catch{G(null)}}Te()},[f,E,a]);const U=k.useCallback(async()=>{!f||!E||!a||await mhn({storageEngine:f,participantId:E,identifier:a,audioUrl:B})},[f,E,a,B]),L=k.useCallback(async()=>{!f||!E||!a||await ghn({storageEngine:f,participantId:E,identifier:a,screenRecordingUrl:q})},[f,E,a,q]),z=k.useCallback(Te=>{localStorage.setItem("analysisIsPlaying",Te?"true":"false"),Te||O(!0),N(Te),p&&p(Te)},[p]),[V,Y]=k.useState(null),{value:Q,execute:ne}=Qf(_hn,[g.user.user?.email||"temp",E,c,f]),[ue,se]=k.useState();k.useEffect(()=>{Q&&se(Q)},[Q]);const ae=k.useMemo(()=>(S&&!S.answers[a]&&_({participantId:E,currentTrial:Object.entries(S.answers).find(([Te,we])=>+we.trialOrder.split("_")[0]==0)?.[0]||""}),S?S.answers[a].componentName:""),[a,S,E,_]),he=k.useMemo(()=>{if(!S||!S.answers[a])return null;const Te=Object.values(S.answers||{}).map(ke=>[ke.startTime,ke.endTime]).flat(),we=K6(Te);return sc([uq.left,r+uq.left+uq.right]).domain(a?[S.answers[a].startTime,S.answers[a].endTime]:we).clamp(!0)},[S,a,r]);k.useEffect(()=>{const Te=[];if(!o||o.length===0){Y(null);return}o.forEach((we,Me)=>{t&&(Me===0||we.transcriptMappingStart!==o[Me-1].transcriptMappingStart)&&Te.push({start:Me===0?0:t.results[we.transcriptMappingStart-1].resultEndTime,end:Me===o.length-1?t.results[we.transcriptMappingEnd].resultEndTime+500:t.results[we.transcriptMappingEnd].resultEndTime,lineStart:we.transcriptMappingStart,lineEnd:we.transcriptMappingEnd,tags:o.filter(ke=>ke.transcriptMappingStart===we.transcriptMappingStart&&ke.transcriptMappingEnd===we.transcriptMappingEnd).map(ke=>ke.selectedTags)})}),Y(Te)},[o,Y,t]);const ie=k.useCallback(Te=>{let we=e.findIndex(Me=>Me===E)+Te;we>=e.length?we=0:we<0&&(we=e.length-1),localStorage.setItem("participantId",e[we]),_({participantId:e[we]||""})},[E,_,e]),le=k.useCallback(Te=>{if(!S||!a)return;let we=+S.answers[a].trialOrder.split("_")[0]+Te;we>=Object.values(S.answers).length?we=0:we<0&&(we=Object.values(S.answers).length-1);const Me=Object.values(S.answers).find(Oe=>+Oe.trialOrder.split("_")[0]===we),ke=Me?`${Me.componentName}_${Me.trialOrder.split("_")[0]}`:"";localStorage.setItem("currentTrial",ke),_({participantId:E,currentTrial:ke})},[a,S,E,_]),Ce=k.useCallback((Te,we)=>{f&&f.saveTags(Te,we).then(()=>{we==="task"?A(f,we):I(f,we)})},[I,A,f]),X=k.useCallback((Te,we)=>{if(!T)return;const Me=T.findIndex(Oe=>Oe.id===Te.id),ke=Array.from(T);ke[Me]=we,Ce(ke,"task")},[Ce,T]),fe=k.useCallback((Te,we)=>{if(!R)return;const Me=R.findIndex(Oe=>Oe.id===Te.id),ke=Array.from(R);ke[Me]=we,Ce(ke,"participant")},[Ce,R]),de=k.useCallback(Te=>{Ce([...T||[],Te],"task")},[Ce,T]),te=k.useCallback(Te=>{Ce([...T||[],Te],"participant")},[Ce,T]),ee=k.useMemo(()=>V&&V[u]?.start||0,[u,V]),[me,Ie]=k.useState("");return w.jsx(ps.Footer,{zIndex:101,withBorder:!1,children:w.jsxs(Gn,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"100%"},gap:5,justify:"center",children:[w.jsx(shn,{isMuted:j,setHasAudio:d,jumpedToAudioTime:ee,speed:y,setSpeed:v,saveProvenance:l,analysisIsPlaying:P,setAnalysisIsPlaying:z,setTime:i,setTimeString:Te=>Ie(Te),answers:S?S.answers:{},taskName:a,context:s?"provenanceVis":"audioAnalysis",onProvenanceTimelineChange:m}),he&&V?w.jsx(ohn,{startTime:he.domain()[0],xScale:he,transcriptLines:V,currentShownTranscription:n||0}):null,w.jsxs(Pn,{gap:"xs",style:{width:"100%"},justify:"center",wrap:"nowrap",children:[w.jsxs(Pn,{wrap:"nowrap",children:[w.jsx(He,{ff:"monospace",style:{textAlign:"right"},mt:"lg",c:"dimmed",children:me}),w.jsx(bt,{label:"Play",children:w.jsx(Rn,{mt:25,size:"xl",variant:"light",onClick:()=>{z(!P),O(!M)},children:P?w.jsx(Yct,{}):w.jsx(Xct,{})})}),w.jsxs(jr,{styles:{dropdown:{padding:0}},position:"bottom",withArrow:!0,shadow:"md",children:[w.jsx(jr.Target,{children:w.jsx(bt,{label:"Speed",children:w.jsx(Rn,{style:{width:"50px"},mt:25,variant:"light",children:`${y}x`})})}),w.jsxs(jr.Dropdown,{children:[w.jsx(ZF,{value:y.toString(),onChange:Te=>{v(+Te),localStorage.setItem("currentSpeed",Te)},orientation:"vertical",data:[{label:"0.5x",value:"0.5"},{label:"1x",value:"1"},{label:"1.5x",value:"1.5"},{label:"2x",value:"2"},{label:"4x",value:"4"},{label:"8x",value:"8"}]}),w.jsx(Gn,{gap:"xs"})]})]})]}),w.jsxs(Pn,{wrap:"nowrap",gap:"lg",children:[w.jsx(Ug,{leftSection:w.jsx(bt,{label:"Previous Participant",children:w.jsx(Rn,{size:"sm",variant:"light",onClick:()=>ie(-1),children:w.jsx(eG,{})})}),rightSection:w.jsx(bt,{label:"Next Participant",children:w.jsx(Rn,{size:"sm",variant:"light",onClick:()=>ie(1),style:{pointerEvents:"all"},children:w.jsx(zhe,{})})}),label:"Participant Id",style:{width:"200px"},value:E,onChange:Te=>{_({currentTrial:a,participantId:Te||""}),localStorage.setItem("participantId",Te||"")},data:e.map(Te=>Te).sort(),searchable:!0}),w.jsxs(Gn,{gap:"4",children:[w.jsxs(Pn,{gap:"xs",align:"center",children:[w.jsx(He,{size:"sm",fw:500,children:"Participant Tags"}),w.jsx(bt,{w:300,multiline:!0,label:"Participant tags allow you to categorize or label the participant. Click in the box to add, create, or edit tags.",children:w.jsx(qg,{size:16})})]}),w.jsx(rQ,{width:200,tags:R||[],editTagCallback:fe,createTagCallback:te,tagsEmptyText:"Add Participant Tags",onSelectTags:Te=>{if(f&&Q){let we=structuredClone(Q);we||(we={participantTags:[],taskTags:{}}),we.participantTags=Te,se(we),f.saveAllParticipantAndTaskTags(g.user.user?.email||"temp",E,we).then(()=>{ne(g.user.user?.email||"temp",E,c,f)})}},selectedTags:ue?ue.participantTags:[]})]}),w.jsx(Ug,{leftSection:w.jsx(bt,{label:"Previous Task",children:w.jsx(Rn,{size:"sm",variant:"light",onClick:()=>le(-1),children:w.jsx(eG,{})})}),rightSection:w.jsx(bt,{label:"Next Task",children:w.jsx(Rn,{size:"sm",variant:"light",onClick:()=>le(1),style:{pointerEvents:"all"},children:w.jsx(zhe,{})})}),label:"Task",style:{width:"200px"},value:ae,onChange:Te=>{if(S&&Te){const we=Object.entries(S.answers).find(([Me,ke])=>+ke.trialOrder.split("_")[0]===Kd(S?.sequence).indexOf(Te))?.[0]||"";localStorage.setItem("currentTrial",we),_({participantId:E,currentTrial:we})}},data:S?Array.from(new Set(Kd(S?.sequence))):[],searchable:!0}),w.jsxs(Gn,{gap:"4",children:[w.jsxs(Pn,{gap:"xs",align:"center",children:[w.jsx(He,{size:"sm",fw:500,children:"Task Tags"}),w.jsx(bt,{w:300,multiline:!0,label:"Task tags allow you to categorize or label the current task. Click in the box to add, create, or edit tags.",children:w.jsx(qg,{size:16})})]}),w.jsx(rQ,{width:200,tags:T||[],editTagCallback:X,createTagCallback:de,tagsEmptyText:"Add Task Tags",onSelectTags:Te=>{if(f&&Q){let we=structuredClone(Q);we||(we={participantTags:[],taskTags:{}}),we.taskTags[a]=Te,se(we),f.saveAllParticipantAndTaskTags(g.user.user?.email||"temp",E,we).then(()=>{ne(g.user.user?.email||"temp",E,c,f)})}},selectedTags:ue?ue.taskTags[a]||[]:[]})]})]}),w.jsx(Yt,{mt:"lg",variant:"light",component:"a",href:s?`${as}analysis/stats/${c}/tagging?participantId=${E}&currentTrial=${a}`:`${as}${c}/${js(S?+(S.answers[a]?.trialOrder.split("_")[0]||0):0)}?participantId=${E}&currentTrial=${a}`,target:"_blank",children:s?"Transcript":"Replay"}),w.jsxs(Pn,{mt:"lg",children:[B&&w.jsx(bt,{label:"Download audio",children:w.jsx(Rn,{variant:"light",size:30,onClick:U,children:w.jsx(wIe,{})})}),q&&w.jsx(bt,{label:"Download screen recording",children:w.jsx(Rn,{variant:"filled",size:30,onClick:L,children:w.jsx(pIe,{})})}),w.jsx(wVe,{selectedParticipants:[],footer:!0})]})]})]})})}function Ehn(e){return e?e.getAllParticipantIds():null}function Chn({setHasAudio:e}){const{storageEngine:t}=Vi(),{value:n}=Qf(Ehn,[t]),r=n0(),i=Us(),{currentComponentHasScreenRecording:s}=Vee(),{studyId:o}=So(),{saveAnalysisState:a}=ls(),{setAnalysisIsPlaying:l,setProvenanceJumpTime:u}=ls(),c=k.useCallback(h=>{i(u(h))},[i,u]),d=k.useCallback(h=>{i(l(h))},[i,l]),f=k.useCallback(h=>i(a(h)),[i,a]);return w.jsx(xVe,{storageEngine:t,setHasAudio:e,studyId:o||"",currentTrial:r,isReplay:!0,visibleParticipants:n||[],rawTranscript:null,currentShownTranscription:null,width:3e3,onTimeUpdate:()=>{},saveProvenance:f,onProvenanceTimelineChange:c,onAnalysisIsPlayingChange:d,forceMute:s})}function Shn(){const e=pc(),t=e.uiConfig.minWidthSize,n=e.uiConfig.minHeightSize,[r,i]=k.useState(!1),[s,o]=k.useState(!1),[a,l]=k.useState(60),[u,c]=k.useState(!1),d=k.useRef(null),{storageEngine:f}=Vi(),h=Mh(),p=$l();return k.useEffect(()=>{const m=()=>{if(t===void 0||n===void 0)return;const g=window.innerWidth<t,y=window.innerHeight<n,v=g||y,b=()=>{l(60),d.current&&(clearInterval(d.current),d.current=null),d.current=setInterval(()=>{l(_=>_<=1?(d.current&&(clearInterval(d.current),d.current=null),f&&!s&&(o(!0),c(!0),f.rejectCurrentParticipant("Screen resolution too small").catch(()=>{console.error("Failed to reject participant who failed training")})),0):_-1)},1e3)};s||(v?(i(!0),b()):(i(!1),d.current&&(clearInterval(d.current),d.current=null)))};return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),d.current&&clearInterval(d.current)}},[t,n,f,h,p,s]),r?w.jsx(Fi,{opened:r,onClose:()=>{},fullScreen:!0,withCloseButton:!1,children:w.jsxs(Gn,{align:"center",justify:"center",children:[w.jsx(Vd,{size:64,color:"orange"}),w.jsx(ri,{order:3,children:" Screen Resolution Warning "}),w.jsx(He,{size:"md",ta:"center",children:u?w.jsxs(w.Fragment,{children:["Thank you for participating in this study. You have been timed out and will not be able to continue.",w.jsx("br",{}),"You may now close this page."]}):w.jsxs(w.Fragment,{children:["Your screen resolution is below the minimum requirement:",w.jsx("br",{}),t!==void 0&&` Width: ${t}px`,n!==void 0&&` Height: ${n}px`,w.jsx("br",{}),"Please resize your browser window to the minimum required size within"," ",a," ","seconds."]})})]})}):null}function Thn(){return w.jsx(Fi,{opened:!0,onClose:()=>{},fullScreen:!0,withCloseButton:!1,children:w.jsxs(Gn,{align:"center",justify:"center",children:[w.jsx(Vd,{size:64,color:"orange"}),w.jsx(ri,{order:3,children:" Screen Recording Stopped "}),w.jsx(He,{size:"md",ta:"center",children:w.jsxs(w.Fragment,{children:["Thank you for participating in this study. Screen recording was stopped and you will not be able to continue.",w.jsx("br",{}),"You may now close this page."]})})]})})}function Ahn(){const e=k.useRef([]),t=Us(),{toggleStudyBrowser:n}=ls(),r=k0(),i=pc(),s=$h(),o=k.useMemo(()=>lu(i.components[s]||{},i),[s,i]),a=k.useMemo(()=>o.windowEventDebounceTime??i.uiConfig.windowEventDebounceTime??100,[o,i]);tre(i?.uiConfig.stylesheetPath);const l=gr(S=>S.showStudyBrowser),u=gr(S=>S.modes),c=Gwt(),{isRejected:d}=c,f=gr(S=>S.analysisHasScreenRecording),h=gr(S=>S.analysisCanPlayScreenRecording);k.useEffect(()=>{const S=_d(B=>{e.current.push([Date.now(),"focus",B.target instanceof HTMLElement?B.target.tagName:""])},a,{maxWait:a}),T=_d(B=>{e.current.push([Date.now(),"input",B.data??""])},a,{maxWait:a}),A=_d(B=>{e.current.push([Date.now(),"keydown",B.key])},a,{maxWait:a}),R=_d(B=>{e.current.push([Date.now(),"keyup",B.key])},a,{maxWait:a}),I=_d(B=>{e.current.push([Date.now(),"mousedown",[B.clientX,B.clientY]])},a,{maxWait:a}),P=_d(B=>{e.current.push([Date.now(),"mouseup",[B.clientX,B.clientY]])},a,{maxWait:a}),N=_d(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},a,{maxWait:a}),M=_d(B=>{e.current.push([Date.now(),"mousemove",[B.clientX,B.clientY]])},a,{maxWait:a}),O=_d(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},a,{maxWait:a}),j=_d(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},a,{maxWait:a});return window.addEventListener("focus",S,!0),window.addEventListener("input",T),window.addEventListener("keydown",A),window.addEventListener("keyup",R),window.addEventListener("mousedown",I),window.addEventListener("mouseup",P),window.addEventListener("resize",N),window.addEventListener("mousemove",M),window.addEventListener("scroll",O),document.addEventListener("visibilitychange",j),()=>{window.removeEventListener("focus",S,!0),window.removeEventListener("input",T),window.removeEventListener("keydown",A),window.removeEventListener("keyup",R),window.removeEventListener("mousedown",I),window.removeEventListener("mouseup",P),window.removeEventListener("resize",N),window.removeEventListener("mousemove",M),window.removeEventListener("scroll",O),document.removeEventListener("visibilitychange",j)}},[]);const{studyNavigatorEnabled:p,dataCollectionEnabled:m}=k.useMemo(()=>u,[u]),g=k.useMemo(()=>f&&h||s==="end"?!1:o.withSidebar??i.uiConfig.withSidebar,[f,h,s,o.withSidebar,i.uiConfig.withSidebar]),y=k.useMemo(()=>o?.sidebarWidth??i.uiConfig.sidebarWidth??300,[o,i]),v=k.useMemo(()=>o.showTitleBar??i.uiConfig.showTitleBar??!0,[o,i]),b=k.useMemo(()=>p&&l,[p,l]),[_,E]=k.useState();return w.jsx(M6e.Provider,{value:e,children:w.jsx(oPe.Provider,{value:c,children:w.jsxs(ps,{padding:"md",header:{height:v?70:0},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!b,mobile:!b}},footer:{height:r?125+(_?55:0):0},children:[w.jsx($fn,{}),v&&w.jsx(Ffn,{studyNavigatorEnabled:p,dataCollectionEnabled:m}),w.jsx(Shn,{}),d&&w.jsx(Thn,{}),w.jsx(jfn,{}),w.jsx(Bfn,{}),w.jsxs(Rt,{direction:"row",gap:"xs",children:[w.jsx(Lfn,{width:y,top:v?70:0,sidebarOpen:g}),w.jsxs(ps.Main,{className:"main",style:{display:"flex",flexDirection:"column"},w:g?`calc(100% - ${y}px - 10px)`:"100%",children:[!v&&!l&&p&&w.jsx(Yt,{variant:"subtle",leftSection:w.jsx(eG,{size:14}),onClick:()=>t(n()),size:"xs",style:{position:"fixed",top:"10px",right:"10px"},children:"Study Browser"}),w.jsx(cat,{})]})]}),r&&w.jsx(Chn,{setHasAudio:E})]})})})}function khn(e,t=!1){return typeof e=="number"?F_e(e,t):F_e(e.length,t).map(r=>r.map(i=>e[i]))}function F_e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function _Ve(e){let t=e.length;for(;t!==0;){const n=Math.floor(Math.random()*t);t-=1,[e[t],e[n]]=[e[n],e[t]]}}function EVe(e,t,n){if(Yd(e))return{id:e.id,orderPath:n,order:e.order,components:[],skip:[]};let r=e.components;if(e.order==="random"){const i=structuredClone(e.components);_Ve(i),r=i}else e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i));r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.findIndex(a=>eK(a,s));r[i]=EVe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(...i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const u=Math.floor(Math.random()*r.length-1)+1;o.add(u)}const a=Array.from(o).sort((u,c)=>u-c);let l=0;for(let u=0;u<r.length;u+=1)u===a[l]&&(s.push(...i.components),l+=1),s.push(r[u])}r=s}),{id:e.id,orderPath:n,order:e.order,components:r.flat(),skip:e.skip}}function Ihn(e,t){const n=structuredClone(e);return EVe(n,t,"root")}function CVe(e,t,n,r){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),!Yd(e)&&e.components.forEach((s,o)=>{typeof s!="string"&&!Yd(s)&&CVe(s,t,i,o)})}function Rhn(e){const t=[];return CVe(e,t,"",0),t}function L_e(e,t){const n=t.split("-");let r={};n.forEach(o=>{if(o==="root")r=e.sequence;else{if(Yd(r))return;r=r.components[+o]}});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return _Ve(i),khn(i,!0)}function cq(e){const n=Rhn(e.sequence).map(s=>({[s]:L_e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Ihn(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=L_e(e,o))})}),i}var LO={exports:{}},dq={},tg={},rb={},fq={},hq={},pq={},j_e;function j$(){return j_e||(j_e=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,_)=>`${b}${_}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,_)=>(_ instanceof n&&(b[_.str]=(b[_.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let _=0;for(;_<v.length;)a(b,v[_]),b.push(y[++_]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let _=0;for(;_<v.length;)b.push(s),a(b,v[_]),b.push(s,h(y[++_]));return l(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(d(v))}e.addCodeArg=a;function l(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=u(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function u(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function d(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function f(y){return new r(h(y))}e.stringify=f;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(pq)),pq}var mq={},B_e;function z_e(){return B_e||(B_e=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=j$();class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=i;class s extends t.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:d}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(c)}[${d}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:t.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(u),{prefix:h}=f,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,f);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,f.setValue(c,{property:h,itemIndex:y}),f}getValue(u,c){const d=this._values[u];if(d)return d.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${u}${d.scopePath}`})}scopeCode(u=this._values,c,d){return this._reduceValues(u,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},c,d)}_reduceValues(u,c,d={},f){let h=t.nil;for(const p in u){const m=u[p];if(!m)continue;const g=d[p]=d[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=f?.(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(mq)),mq}var V_e;function Pr(){return V_e||(V_e=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=j$(),n=z_e();var r=j$();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=z_e();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(Y,Q){return this}}class o extends s{constructor(Y,Q,ne){super(),this.varKind=Y,this.name=Q,this.rhs=ne}render({es5:Y,_n:Q}){const ne=Y?n.varKinds.var:this.varKind,ue=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ue};`+Q}optimizeNames(Y,Q){if(Y[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,Y,Q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(Y,Q,ne){super(),this.lhs=Y,this.rhs=Q,this.sideEffects=ne}render({_n:Y}){return`${this.lhs} = ${this.rhs};`+Y}optimizeNames(Y,Q){if(!(this.lhs instanceof t.Name&&!Y[this.lhs.str]&&!this.sideEffects))return this.rhs=O(this.rhs,Y,Q),this}get names(){const Y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return M(Y,this.rhs)}}class l extends a{constructor(Y,Q,ne,ue){super(Y,ne,ue),this.op=Q}render({_n:Y}){return`${this.lhs} ${this.op}= ${this.rhs};`+Y}}class u extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`${this.label}:`+Y}}class c extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`break${this.label?` ${this.label}`:""};`+Y}}class d extends s{constructor(Y){super(),this.error=Y}render({_n:Y}){return`throw ${this.error};`+Y}get names(){return this.error.names}}class f extends s{constructor(Y){super(),this.code=Y}render({_n:Y}){return`${this.code};`+Y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Y,Q){return this.code=O(this.code,Y,Q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(Y=[]){super(),this.nodes=Y}render(Y){return this.nodes.reduce((Q,ne)=>Q+ne.render(Y),"")}optimizeNodes(){const{nodes:Y}=this;let Q=Y.length;for(;Q--;){const ne=Y[Q].optimizeNodes();Array.isArray(ne)?Y.splice(Q,1,...ne):ne?Y[Q]=ne:Y.splice(Q,1)}return Y.length>0?this:void 0}optimizeNames(Y,Q){const{nodes:ne}=this;let ue=ne.length;for(;ue--;){const se=ne[ue];se.optimizeNames(Y,Q)||(j(Y,se.names),ne.splice(ue,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((Y,Q)=>N(Y,Q.names),{})}}class p extends h{render(Y){return"{"+Y._n+super.render(Y)+"}"+Y._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(Y,Q){super(Q),this.condition=Y}render(Y){let Q=`if(${this.condition})`+super.render(Y);return this.else&&(Q+="else "+this.else.render(Y)),Q}optimizeNodes(){super.optimizeNodes();const Y=this.condition;if(Y===!0)return this.nodes;let Q=this.else;if(Q){const ne=Q.optimizeNodes();Q=this.else=Array.isArray(ne)?new g(ne):ne}if(Q)return Y===!1?Q instanceof y?Q:Q.nodes:this.nodes.length?this:new y(B(Y),Q instanceof y?[Q]:Q.nodes);if(!(Y===!1||!this.nodes.length))return this}optimizeNames(Y,Q){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(Y,Q),!!(super.optimizeNames(Y,Q)||this.else))return this.condition=O(this.condition,Y,Q),this}get names(){const Y=super.names;return M(Y,this.condition),this.else&&N(Y,this.else.names),Y}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(Y){super(),this.iteration=Y}render(Y){return`for(${this.iteration})`+super.render(Y)}optimizeNames(Y,Q){if(super.optimizeNames(Y,Q))return this.iteration=O(this.iteration,Y,Q),this}get names(){return N(super.names,this.iteration.names)}}class _ extends v{constructor(Y,Q,ne,ue){super(),this.varKind=Y,this.name=Q,this.from=ne,this.to=ue}render(Y){const Q=Y.es5?n.varKinds.var:this.varKind,{name:ne,from:ue,to:se}=this;return`for(${Q} ${ne}=${ue}; ${ne}<${se}; ${ne}++)`+super.render(Y)}get names(){const Y=M(super.names,this.from);return M(Y,this.to)}}class E extends v{constructor(Y,Q,ne,ue){super(),this.loop=Y,this.varKind=Q,this.name=ne,this.iterable=ue}render(Y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Y)}optimizeNames(Y,Q){if(super.optimizeNames(Y,Q))return this.iterable=O(this.iterable,Y,Q),this}get names(){return N(super.names,this.iterable.names)}}class S extends p{constructor(Y,Q,ne){super(),this.name=Y,this.args=Q,this.async=ne}render(Y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Y)}}S.kind="func";class T extends h{render(Y){return"return "+super.render(Y)}}T.kind="return";class A extends p{render(Y){let Q="try"+super.render(Y);return this.catch&&(Q+=this.catch.render(Y)),this.finally&&(Q+=this.finally.render(Y)),Q}optimizeNodes(){var Y,Q;return super.optimizeNodes(),(Y=this.catch)===null||Y===void 0||Y.optimizeNodes(),(Q=this.finally)===null||Q===void 0||Q.optimizeNodes(),this}optimizeNames(Y,Q){var ne,ue;return super.optimizeNames(Y,Q),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(Y,Q),(ue=this.finally)===null||ue===void 0||ue.optimizeNames(Y,Q),this}get names(){const Y=super.names;return this.catch&&N(Y,this.catch.names),this.finally&&N(Y,this.finally.names),Y}}class R extends p{constructor(Y){super(),this.error=Y}render(Y){return`catch(${this.error})`+super.render(Y)}}R.kind="catch";class I extends p{render(Y){return"finally"+super.render(Y)}}I.kind="finally";class P{constructor(Y,Q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Q,_n:Q.lines?`
`:""},this._extScope=Y,this._scope=new n.Scope({parent:Y}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(Y){return this._scope.name(Y)}scopeName(Y){return this._extScope.name(Y)}scopeValue(Y,Q){const ne=this._extScope.value(Y,Q);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(Y,Q){return this._extScope.getValue(Y,Q)}scopeRefs(Y){return this._extScope.scopeRefs(Y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Y,Q,ne,ue){const se=this._scope.toName(Q);return ne!==void 0&&ue&&(this._constants[se.str]=ne),this._leafNode(new o(Y,se,ne)),se}const(Y,Q,ne){return this._def(n.varKinds.const,Y,Q,ne)}let(Y,Q,ne){return this._def(n.varKinds.let,Y,Q,ne)}var(Y,Q,ne){return this._def(n.varKinds.var,Y,Q,ne)}assign(Y,Q,ne){return this._leafNode(new a(Y,Q,ne))}add(Y,Q){return this._leafNode(new l(Y,e.operators.ADD,Q))}code(Y){return typeof Y=="function"?Y():Y!==t.nil&&this._leafNode(new f(Y)),this}object(...Y){const Q=["{"];for(const[ne,ue]of Y)Q.length>1&&Q.push(","),Q.push(ne),(ne!==ue||this.opts.es5)&&(Q.push(":"),(0,t.addCodeArg)(Q,ue));return Q.push("}"),new t._Code(Q)}if(Y,Q,ne){if(this._blockNode(new y(Y)),Q&&ne)this.code(Q).else().code(ne).endIf();else if(Q)this.code(Q).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Y){return this._elseNode(new y(Y))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(Y,Q){return this._blockNode(Y),Q&&this.code(Q).endFor(),this}for(Y,Q){return this._for(new b(Y),Q)}forRange(Y,Q,ne,ue,se=this.opts.es5?n.varKinds.var:n.varKinds.let){const ae=this._scope.toName(Y);return this._for(new _(se,ae,Q,ne),()=>ue(ae))}forOf(Y,Q,ne,ue=n.varKinds.const){const se=this._scope.toName(Y);if(this.opts.es5){const ae=Q instanceof t.Name?Q:this.var("_arr",Q);return this.forRange("_i",0,(0,t._)`${ae}.length`,he=>{this.var(se,(0,t._)`${ae}[${he}]`),ne(se)})}return this._for(new E("of",ue,se,Q),()=>ne(se))}forIn(Y,Q,ne,ue=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Y,(0,t._)`Object.keys(${Q})`,ne);const se=this._scope.toName(Y);return this._for(new E("in",ue,se,Q),()=>ne(se))}endFor(){return this._endBlockNode(v)}label(Y){return this._leafNode(new u(Y))}break(Y){return this._leafNode(new c(Y))}return(Y){const Q=new T;if(this._blockNode(Q),this.code(Y),Q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(Y,Q,ne){if(!Q&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ue=new A;if(this._blockNode(ue),this.code(Y),Q){const se=this.name("e");this._currNode=ue.catch=new R(se),Q(se)}return ne&&(this._currNode=ue.finally=new I,this.code(ne)),this._endBlockNode(R,I)}throw(Y){return this._leafNode(new d(Y))}block(Y,Q){return this._blockStarts.push(this._nodes.length),Y&&this.code(Y).endBlock(Q),this}endBlock(Y){const Q=this._blockStarts.pop();if(Q===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-Q;if(ne<0||Y!==void 0&&ne!==Y)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${Y} expected`);return this._nodes.length=Q,this}func(Y,Q=t.nil,ne,ue){return this._blockNode(new S(Y,Q,ne)),ue&&this.code(ue).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(Y=1){for(;Y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Y){return this._currNode.nodes.push(Y),this}_blockNode(Y){this._currNode.nodes.push(Y),this._nodes.push(Y)}_endBlockNode(Y,Q){const ne=this._currNode;if(ne instanceof Y||Q&&ne instanceof Q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Q?`${Y.kind}/${Q.kind}`:Y.kind}"`)}_elseNode(Y){const Q=this._currNode;if(!(Q instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=Q.else=Y,this}get _root(){return this._nodes[0]}get _currNode(){const Y=this._nodes;return Y[Y.length-1]}set _currNode(Y){const Q=this._nodes;Q[Q.length-1]=Y}}e.CodeGen=P;function N(V,Y){for(const Q in Y)V[Q]=(V[Q]||0)+(Y[Q]||0);return V}function M(V,Y){return Y instanceof t._CodeOrName?N(V,Y.names):V}function O(V,Y,Q){if(V instanceof t.Name)return ne(V);if(!ue(V))return V;return new t._Code(V._items.reduce((se,ae)=>(ae instanceof t.Name&&(ae=ne(ae)),ae instanceof t._Code?se.push(...ae._items):se.push(ae),se),[]));function ne(se){const ae=Q[se.str];return ae===void 0||Y[se.str]!==1?se:(delete Y[se.str],ae)}function ue(se){return se instanceof t._Code&&se._items.some(ae=>ae instanceof t.Name&&Y[ae.str]===1&&Q[ae.str]!==void 0)}}function j(V,Y){for(const Q in Y)V[Q]=(V[Q]||0)-(Y[Q]||0)}function B(V){return typeof V=="boolean"||typeof V=="number"||V===null?!V:(0,t._)`!${z(V)}`}e.not=B;const H=L(e.operators.AND);function q(...V){return V.reduce(H)}e.and=q;const G=L(e.operators.OR);function U(...V){return V.reduce(G)}e.or=U;function L(V){return(Y,Q)=>Y===t.nil?Q:Q===t.nil?Y:(0,t._)`${z(Y)} ${V} ${z(Q)}`}function z(V){return V instanceof t.Name?V:(0,t._)`(${V})`}})(hq)),hq}var br={},U_e;function fi(){if(U_e)return br;U_e=1,Object.defineProperty(br,"__esModule",{value:!0}),br.checkStrictMode=br.getErrorPath=br.Type=br.useFunc=br.setEvaluated=br.evaluatedPropsToName=br.mergeEvaluated=br.eachItem=br.unescapeJsonPointer=br.escapeJsonPointer=br.escapeFragment=br.unescapeFragment=br.schemaRefOrVal=br.schemaHasRulesButRef=br.schemaHasRules=br.checkUnknownRules=br.alwaysValidSchema=br.toHash=void 0;const e=Pr(),t=j$();function n(E){const S={};for(const T of E)S[T]=!0;return S}br.toHash=n;function r(E,S){return typeof S=="boolean"?S:Object.keys(S).length===0?!0:(i(E,S),!s(S,E.self.RULES.all))}br.alwaysValidSchema=r;function i(E,S=E.schema){const{opts:T,self:A}=E;if(!T.strictSchema||typeof S=="boolean")return;const R=A.RULES.keywords;for(const I in S)R[I]||_(E,`unknown keyword: "${I}"`)}br.checkUnknownRules=i;function s(E,S){if(typeof E=="boolean")return!E;for(const T in E)if(S[T])return!0;return!1}br.schemaHasRules=s;function o(E,S){if(typeof E=="boolean")return!E;for(const T in E)if(T!=="$ref"&&S.all[T])return!0;return!1}br.schemaHasRulesButRef=o;function a({topSchemaRef:E,schemaPath:S},T,A,R){if(!R){if(typeof T=="number"||typeof T=="boolean")return T;if(typeof T=="string")return(0,e._)`${T}`}return(0,e._)`${E}${S}${(0,e.getProperty)(A)}`}br.schemaRefOrVal=a;function l(E){return d(decodeURIComponent(E))}br.unescapeFragment=l;function u(E){return encodeURIComponent(c(E))}br.escapeFragment=u;function c(E){return typeof E=="number"?`${E}`:E.replace(/~/g,"~0").replace(/\//g,"~1")}br.escapeJsonPointer=c;function d(E){return E.replace(/~1/g,"/").replace(/~0/g,"~")}br.unescapeJsonPointer=d;function f(E,S){if(Array.isArray(E))for(const T of E)S(T);else S(E)}br.eachItem=f;function h({mergeNames:E,mergeToName:S,mergeValues:T,resultToName:A}){return(R,I,P,N)=>{const M=P===void 0?I:P instanceof e.Name?(I instanceof e.Name?E(R,I,P):S(R,I,P),P):I instanceof e.Name?(S(R,P,I),I):T(I,P);return N===e.Name&&!(M instanceof e.Name)?A(R,M):M}}br.mergeEvaluated={props:h({mergeNames:(E,S,T)=>E.if((0,e._)`${T} !== true && ${S} !== undefined`,()=>{E.if((0,e._)`${S} === true`,()=>E.assign(T,!0),()=>E.assign(T,(0,e._)`${T} || {}`).code((0,e._)`Object.assign(${T}, ${S})`))}),mergeToName:(E,S,T)=>E.if((0,e._)`${T} !== true`,()=>{S===!0?E.assign(T,!0):(E.assign(T,(0,e._)`${T} || {}`),m(E,T,S))}),mergeValues:(E,S)=>E===!0?!0:{...E,...S},resultToName:p}),items:h({mergeNames:(E,S,T)=>E.if((0,e._)`${T} !== true && ${S} !== undefined`,()=>E.assign(T,(0,e._)`${S} === true ? true : ${T} > ${S} ? ${T} : ${S}`)),mergeToName:(E,S,T)=>E.if((0,e._)`${T} !== true`,()=>E.assign(T,S===!0?!0:(0,e._)`${T} > ${S} ? ${T} : ${S}`)),mergeValues:(E,S)=>E===!0?!0:Math.max(E,S),resultToName:(E,S)=>E.var("items",S)})};function p(E,S){if(S===!0)return E.var("props",!0);const T=E.var("props",(0,e._)`{}`);return S!==void 0&&m(E,T,S),T}br.evaluatedPropsToName=p;function m(E,S,T){Object.keys(T).forEach(A=>E.assign((0,e._)`${S}${(0,e.getProperty)(A)}`,!0))}br.setEvaluated=m;const g={};function y(E,S){return E.scopeValue("func",{ref:S,code:g[S.code]||(g[S.code]=new t._Code(S.code))})}br.useFunc=y;var v;(function(E){E[E.Num=0]="Num",E[E.Str=1]="Str"})(v||(br.Type=v={}));function b(E,S,T){if(E instanceof e.Name){const A=S===v.Num;return T?A?(0,e._)`"[" + ${E} + "]"`:(0,e._)`"['" + ${E} + "']"`:A?(0,e._)`"/" + ${E}`:(0,e._)`"/" + ${E}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return T?(0,e.getProperty)(E).toString():"/"+c(E)}br.getErrorPath=b;function _(E,S,T=E.opts.strictSchema){if(T){if(S=`strict mode: ${S}`,T===!0)throw new Error(S);E.self.logger.warn(S)}}return br.checkStrictMode=_,br}var jO={},H_e;function S1(){if(H_e)return jO;H_e=1,Object.defineProperty(jO,"__esModule",{value:!0});const e=Pr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return jO.default=t,jO}var q_e;function bB(){return q_e||(q_e=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pr(),n=fi(),r=S1();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:_}=g,{gen:E,compositeRule:S,allErrors:T}=_,A=d(g,y,v);b??(S||T)?l(E,A):u(_,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:_,compositeRule:E,allErrors:S}=b,T=d(g,y,v);l(_,T),E||S||u(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:_,it:E}){if(_===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",_,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function l(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function u(g,y){const{gen:v,validateName:b,schemaEnv:_}=g;_.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:f(g,y,v)}function f(g,y,v={}){const{gen:b,it:_}=g,E=[h(_,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let _=b?y:(0,t.str)`${y}/${g}`;return v&&(_=(0,t.str)`${_}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,_]}function m(g,{params:y,message:v},b){const{keyword:_,data:E,schemaValue:S,it:T}=g,{opts:A,propertyName:R,topSchemaRef:I,schemaPath:P}=T;b.push([c.keyword,_],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${P}`],[r.default.data,E]),R&&b.push([c.propertyName,R])}})(fq)),fq}var W_e;function Dhn(){if(W_e)return rb;W_e=1,Object.defineProperty(rb,"__esModule",{value:!0}),rb.boolOrEmptySchema=rb.topBoolOrEmptySchema=void 0;const e=bB(),t=Pr(),n=S1(),r={message:"boolean schema is false"};function i(a){const{gen:l,schema:u,validateName:c}=a;u===!1?o(a,!1):typeof u=="object"&&u.$async===!0?l.return(n.default.data):(l.assign((0,t._)`${c}.errors`,null),l.return(!0))}rb.topBoolOrEmptySchema=i;function s(a,l){const{gen:u,schema:c}=a;c===!1?(u.var(l,!1),o(a)):u.var(l,!0)}rb.boolOrEmptySchema=s;function o(a,l){const{gen:u,data:c}=a,d={gen:u,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(d,r,void 0,l)}return rb}var Ra={},ib={},G_e;function SVe(){if(G_e)return ib;G_e=1,Object.defineProperty(ib,"__esModule",{value:!0}),ib.getRules=ib.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}ib.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return ib.getRules=r,ib}var ng={},Y_e;function TVe(){if(Y_e)return ng;Y_e=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.shouldUseRule=ng.shouldUseGroup=ng.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}ng.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}ng.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return ng.shouldUseRule=n,ng}var K_e;function B$(){if(K_e)return Ra;K_e=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.reportTypeError=Ra.checkDataTypes=Ra.checkDataType=Ra.coerceAndCheckDataType=Ra.getJSONTypes=Ra.getSchemaTypes=Ra.DataType=void 0;const e=SVe(),t=TVe(),n=bB(),r=Pr(),i=fi();var s;(function(v){v[v.Correct=0]="Correct",v[v.Wrong=1]="Wrong"})(s||(Ra.DataType=s={}));function o(v){const b=a(v.type);if(b.includes("null")){if(v.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!b.length&&v.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');v.nullable===!0&&b.push("null")}return b}Ra.getSchemaTypes=o;function a(v){const b=Array.isArray(v)?v:v?[v]:[];if(b.every(e.isJSONType))return b;throw new Error("type must be JSONType or JSONType[]: "+b.join(","))}Ra.getJSONTypes=a;function l(v,b){const{gen:_,data:E,opts:S}=v,T=c(b,S.coerceTypes),A=b.length>0&&!(T.length===0&&b.length===1&&(0,t.schemaHasRulesForType)(v,b[0]));if(A){const R=p(b,E,S.strictNumbers,s.Wrong);_.if(R,()=>{T.length?d(v,b,T):g(v)})}return A}Ra.coerceAndCheckDataType=l;const u=new Set(["string","number","integer","boolean","null"]);function c(v,b){return b?v.filter(_=>u.has(_)||b==="array"&&_==="array"):[]}function d(v,b,_){const{gen:E,data:S,opts:T}=v,A=E.let("dataType",(0,r._)`typeof ${S}`),R=E.let("coerced",(0,r._)`undefined`);T.coerceTypes==="array"&&E.if((0,r._)`${A} == 'object' && Array.isArray(${S}) && ${S}.length == 1`,()=>E.assign(S,(0,r._)`${S}[0]`).assign(A,(0,r._)`typeof ${S}`).if(p(b,S,T.strictNumbers),()=>E.assign(R,S))),E.if((0,r._)`${R} !== undefined`);for(const P of _)(u.has(P)||P==="array"&&T.coerceTypes==="array")&&I(P);E.else(),g(v),E.endIf(),E.if((0,r._)`${R} !== undefined`,()=>{E.assign(S,R),f(v,R)});function I(P){switch(P){case"string":E.elseIf((0,r._)`${A} == "number" || ${A} == "boolean"`).assign(R,(0,r._)`"" + ${S}`).elseIf((0,r._)`${S} === null`).assign(R,(0,r._)`""`);return;case"number":E.elseIf((0,r._)`${A} == "boolean" || ${S} === null
              || (${A} == "string" && ${S} && ${S} == +${S})`).assign(R,(0,r._)`+${S}`);return;case"integer":E.elseIf((0,r._)`${A} === "boolean" || ${S} === null
              || (${A} === "string" && ${S} && ${S} == +${S} && !(${S} % 1))`).assign(R,(0,r._)`+${S}`);return;case"boolean":E.elseIf((0,r._)`${S} === "false" || ${S} === 0 || ${S} === null`).assign(R,!1).elseIf((0,r._)`${S} === "true" || ${S} === 1`).assign(R,!0);return;case"null":E.elseIf((0,r._)`${S} === "" || ${S} === 0 || ${S} === false`),E.assign(R,null);return;case"array":E.elseIf((0,r._)`${A} === "string" || ${A} === "number"
              || ${A} === "boolean" || ${S} === null`).assign(R,(0,r._)`[${S}]`)}}}function f({gen:v,parentData:b,parentDataProperty:_},E){v.if((0,r._)`${b} !== undefined`,()=>v.assign((0,r._)`${b}[${_}]`,E))}function h(v,b,_,E=s.Correct){const S=E===s.Correct?r.operators.EQ:r.operators.NEQ;let T;switch(v){case"null":return(0,r._)`${b} ${S} null`;case"array":T=(0,r._)`Array.isArray(${b})`;break;case"object":T=(0,r._)`${b} && typeof ${b} == "object" && !Array.isArray(${b})`;break;case"integer":T=A((0,r._)`!(${b} % 1) && !isNaN(${b})`);break;case"number":T=A();break;default:return(0,r._)`typeof ${b} ${S} ${v}`}return E===s.Correct?T:(0,r.not)(T);function A(R=r.nil){return(0,r.and)((0,r._)`typeof ${b} == "number"`,R,_?(0,r._)`isFinite(${b})`:r.nil)}}Ra.checkDataType=h;function p(v,b,_,E){if(v.length===1)return h(v[0],b,_,E);let S;const T=(0,i.toHash)(v);if(T.array&&T.object){const A=(0,r._)`typeof ${b} != "object"`;S=T.null?A:(0,r._)`!${b} || ${A}`,delete T.null,delete T.array,delete T.object}else S=r.nil;T.number&&delete T.integer;for(const A in T)S=(0,r.and)(S,h(A,b,_,E));return S}Ra.checkDataTypes=p;const m={message:({schema:v})=>`must be ${v}`,params:({schema:v,schemaValue:b})=>typeof v=="string"?(0,r._)`{type: ${v}}`:(0,r._)`{type: ${b}}`};function g(v){const b=y(v);(0,n.reportError)(b,m)}Ra.reportTypeError=g;function y(v){const{gen:b,data:_,schema:E}=v,S=(0,i.schemaRefOrVal)(v,E,"type");return{gen:b,keyword:"type",data:_,schema:E.type,schemaCode:S,schemaValue:S,parentSchema:E,params:{},it:v}}return Ra}var R2={},X_e;function Phn(){if(X_e)return R2;X_e=1,Object.defineProperty(R2,"__esModule",{value:!0}),R2.assignDefaults=void 0;const e=Pr(),t=fi();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const l in o)r(i,l,o[l].default);else s==="array"&&Array.isArray(a)&&a.forEach((l,u)=>r(i,u,l.default))}R2.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:l,data:u,opts:c}=i;if(o===void 0)return;const d=(0,e._)`${u}${(0,e.getProperty)(s)}`;if(l){(0,t.checkStrictMode)(i,`default is ignored for: ${d}`);return}let f=(0,e._)`${d} === undefined`;c.useDefaults==="empty"&&(f=(0,e._)`${f} || ${d} === null || ${d} === ""`),a.if(f,(0,e._)`${d} = ${(0,e.stringify)(o)}`)}return R2}var Rf={},Si={},Q_e;function Yh(){if(Q_e)return Si;Q_e=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.validateUnion=Si.validateArray=Si.usePattern=Si.callValidateCode=Si.schemaProperties=Si.allSchemaProperties=Si.noPropertyInData=Si.propertyInData=Si.isOwnProperty=Si.hasPropFunc=Si.reportMissingProp=Si.checkMissingProp=Si.checkReportMissingProp=void 0;const e=Pr(),t=fi(),n=S1(),r=fi();function i(v,b){const{gen:_,data:E,it:S}=v;_.if(c(_,E,b,S.opts.ownProperties),()=>{v.setParams({missingProperty:(0,e._)`${b}`},!0),v.error()})}Si.checkReportMissingProp=i;function s({gen:v,data:b,it:{opts:_}},E,S){return(0,e.or)(...E.map(T=>(0,e.and)(c(v,b,T,_.ownProperties),(0,e._)`${S} = ${T}`)))}Si.checkMissingProp=s;function o(v,b){v.setParams({missingProperty:b},!0),v.error()}Si.reportMissingProp=o;function a(v){return v.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Si.hasPropFunc=a;function l(v,b,_){return(0,e._)`${a(v)}.call(${b}, ${_})`}Si.isOwnProperty=l;function u(v,b,_,E){const S=(0,e._)`${b}${(0,e.getProperty)(_)} !== undefined`;return E?(0,e._)`${S} && ${l(v,b,_)}`:S}Si.propertyInData=u;function c(v,b,_,E){const S=(0,e._)`${b}${(0,e.getProperty)(_)} === undefined`;return E?(0,e.or)(S,(0,e.not)(l(v,b,_))):S}Si.noPropertyInData=c;function d(v){return v?Object.keys(v).filter(b=>b!=="__proto__"):[]}Si.allSchemaProperties=d;function f(v,b){return d(b).filter(_=>!(0,t.alwaysValidSchema)(v,b[_]))}Si.schemaProperties=f;function h({schemaCode:v,data:b,it:{gen:_,topSchemaRef:E,schemaPath:S,errorPath:T},it:A},R,I,P){const N=P?(0,e._)`${v}, ${b}, ${E}${S}`:b,M=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,T)],[n.default.parentData,A.parentData],[n.default.parentDataProperty,A.parentDataProperty],[n.default.rootData,n.default.rootData]];A.opts.dynamicRef&&M.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const O=(0,e._)`${N}, ${_.object(...M)}`;return I!==e.nil?(0,e._)`${R}.call(${I}, ${O})`:(0,e._)`${R}(${O})`}Si.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:v,it:{opts:b}},_){const E=b.unicodeRegExp?"u":"",{regExp:S}=b.code,T=S(_,E);return v.scopeValue("pattern",{key:T.toString(),ref:T,code:(0,e._)`${S.code==="new RegExp"?p:(0,r.useFunc)(v,S)}(${_}, ${E})`})}Si.usePattern=m;function g(v){const{gen:b,data:_,keyword:E,it:S}=v,T=b.name("valid");if(S.allErrors){const R=b.let("valid",!0);return A(()=>b.assign(R,!1)),R}return b.var(T,!0),A(()=>b.break()),T;function A(R){const I=b.const("len",(0,e._)`${_}.length`);b.forRange("i",0,I,P=>{v.subschema({keyword:E,dataProp:P,dataPropType:t.Type.Num},T),b.if((0,e.not)(T),R)})}}Si.validateArray=g;function y(v){const{gen:b,schema:_,keyword:E,it:S}=v;if(!Array.isArray(_))throw new Error("ajv implementation error");if(_.some(I=>(0,t.alwaysValidSchema)(S,I))&&!S.opts.unevaluated)return;const A=b.let("valid",!1),R=b.name("_valid");b.block(()=>_.forEach((I,P)=>{const N=v.subschema({keyword:E,schemaProp:P,compositeRule:!0},R);b.assign(A,(0,e._)`${A} || ${R}`),v.mergeValidEvaluated(N,R)||b.if((0,e.not)(A))})),v.result(A,()=>v.reset(),()=>v.error(!0))}return Si.validateUnion=y,Si}var J_e;function Ohn(){if(J_e)return Rf;J_e=1,Object.defineProperty(Rf,"__esModule",{value:!0}),Rf.validateKeywordUsage=Rf.validSchemaType=Rf.funcKeywordCode=Rf.macroKeywordCode=void 0;const e=Pr(),t=S1(),n=Yh(),r=bB();function i(f,h){const{gen:p,keyword:m,schema:g,parentSchema:y,it:v}=f,b=h.macro.call(v.self,g,y,v),_=u(p,m,b);v.opts.validateSchema!==!1&&v.self.validateSchema(b,!0);const E=p.name("valid");f.subschema({schema:b,schemaPath:e.nil,errSchemaPath:`${v.errSchemaPath}/${m}`,topSchemaRef:_,compositeRule:!0},E),f.pass(E,()=>f.error(!0))}Rf.macroKeywordCode=i;function s(f,h){var p;const{gen:m,keyword:g,schema:y,parentSchema:v,$data:b,it:_}=f;l(_,h);const E=!b&&h.compile?h.compile.call(_.self,y,v,_):h.validate,S=u(m,g,E),T=m.let("valid");f.block$data(T,A),f.ok((p=h.valid)!==null&&p!==void 0?p:T);function A(){if(h.errors===!1)P(),h.modifying&&o(f),N(()=>f.error());else{const M=h.async?R():I();h.modifying&&o(f),N(()=>a(f,M))}}function R(){const M=m.let("ruleErrs",null);return m.try(()=>P((0,e._)`await `),O=>m.assign(T,!1).if((0,e._)`${O} instanceof ${_.ValidationError}`,()=>m.assign(M,(0,e._)`${O}.errors`),()=>m.throw(O))),M}function I(){const M=(0,e._)`${S}.errors`;return m.assign(M,null),P(e.nil),M}function P(M=h.async?(0,e._)`await `:e.nil){const O=_.opts.passContext?t.default.this:t.default.self,j=!("compile"in h&&!b||h.schema===!1);m.assign(T,(0,e._)`${M}${(0,n.callValidateCode)(f,S,O,j)}`,h.modifying)}function N(M){var O;m.if((0,e.not)((O=h.valid)!==null&&O!==void 0?O:T),M)}}Rf.funcKeywordCode=s;function o(f){const{gen:h,data:p,it:m}=f;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(f,h){const{gen:p}=f;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(f)},()=>f.error())}function l({schemaEnv:f},h){if(h.async&&!f.$async)throw new Error("async keyword in sync schema")}function u(f,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return f.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(f,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(f):m==="object"?f&&typeof f=="object"&&!Array.isArray(f):typeof f==m||p&&typeof f>"u")}Rf.validSchemaType=c;function d({schema:f,opts:h,self:p,errSchemaPath:m},g,y){if(Array.isArray(g.keyword)?!g.keyword.includes(y):g.keyword!==y)throw new Error("ajv implementation error");const v=g.dependencies;if(v?.some(b=>!Object.prototype.hasOwnProperty.call(f,b)))throw new Error(`parent schema must have dependencies of ${y}: ${v.join(",")}`);if(g.validateSchema&&!g.validateSchema(f[y])){const _=`keyword "${y}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(_);else throw new Error(_)}}return Rf.validateKeywordUsage=d,Rf}var rg={},Z_e;function Nhn(){if(Z_e)return rg;Z_e=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.extendSubschemaMode=rg.extendSubschemaData=rg.getSubschema=void 0;const e=Pr(),t=fi();function n(s,{keyword:o,schemaProp:a,schema:l,schemaPath:u,errSchemaPath:c,topSchemaRef:d}){if(o!==void 0&&l!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const f=s.schema[o];return a===void 0?{schema:f,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:f[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(l!==void 0){if(u===void 0||c===void 0||d===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:l,schemaPath:u,topSchemaRef:d,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}rg.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:l,data:u,dataTypes:c,propertyName:d}){if(u!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:f}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,y=f.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(y),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,l,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(u!==void 0){const p=u instanceof e.Name?u:f.let("data",u,!0);h(p),d!==void 0&&(s.propertyName=d)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}rg.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:l,createErrors:u,allErrors:c}){l!==void 0&&(s.compositeRule=l),u!==void 0&&(s.createErrors=u),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return rg.extendSubschemaMode=i,rg}var Wl={},gq={exports:{}},eEe;function Mhn(){if(eEe)return gq.exports;eEe=1;var e=gq.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,l,u,c,d,f){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,l,u,c,d,f);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,l,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var g in p)t(r,i,s,p[g],a+"/"+h+"/"+n(g),l,a,h,o,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,l,a,h,o)}s(o,a,l,u,c,d,f)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return gq.exports}var tEe;function wB(){if(tEe)return Wl;tEe=1,Object.defineProperty(Wl,"__esModule",{value:!0}),Wl.getSchemaRefs=Wl.resolveUrl=Wl.normalizeId=Wl._getFullPath=Wl.getFullPath=Wl.inlineRef=void 0;const e=fi(),t=zne(),n=Mhn(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,g=!0){return typeof m=="boolean"?!0:g===!0?!o(m):g?a(m)<=g:!1}Wl.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const g in m){if(s.has(g))return!0;const y=m[g];if(Array.isArray(y)&&y.some(o)||typeof y=="object"&&o(y))return!0}return!1}function a(m){let g=0;for(const y in m){if(y==="$ref")return 1/0;if(g++,!r.has(y)&&(typeof m[y]=="object"&&(0,e.eachItem)(m[y],v=>g+=a(v)),g===1/0))return 1/0}return g}function l(m,g="",y){y!==!1&&(g=d(g));const v=m.parse(g);return u(m,v)}Wl.getFullPath=l;function u(m,g){return m.serialize(g).split("#")[0]+"#"}Wl._getFullPath=u;const c=/#\/?$/;function d(m){return m?m.replace(c,""):""}Wl.normalizeId=d;function f(m,g,y){return y=d(y),m.resolve(g,y)}Wl.resolveUrl=f;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,g){if(typeof m=="boolean")return{};const{schemaId:y,uriResolver:v}=this.opts,b=d(m[y]||g),_={"":b},E=l(v,b,!1),S={},T=new Set;return n(m,{allKeys:!0},(I,P,N,M)=>{if(M===void 0)return;const O=E+P;let j=_[M];typeof I[y]=="string"&&(j=B.call(this,I[y])),H.call(this,I.$anchor),H.call(this,I.$dynamicAnchor),_[P]=j;function B(q){const G=this.opts.uriResolver.resolve;if(q=d(j?G(j,q):q),T.has(q))throw R(q);T.add(q);let U=this.refs[q];return typeof U=="string"&&(U=this.refs[U]),typeof U=="object"?A(I,U.schema,q):q!==d(O)&&(q[0]==="#"?(A(I,S[q],q),S[q]=I):this.refs[q]=O),q}function H(q){if(typeof q=="string"){if(!h.test(q))throw new Error(`invalid anchor "${q}"`);B.call(this,`#${q}`)}}}),S;function A(I,P,N){if(P!==void 0&&!t(I,P))throw R(N)}function R(I){return new Error(`reference "${I}" resolves to more than one schema`)}}return Wl.getSchemaRefs=p,Wl}var nEe;function xB(){if(nEe)return tg;nEe=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.getData=tg.KeywordCxt=tg.validateFunctionCode=void 0;const e=Dhn(),t=B$(),n=TVe(),r=B$(),i=Phn(),s=Ohn(),o=Nhn(),a=Pr(),l=S1(),u=wB(),c=fi(),d=bB();function f(ie){if(E(ie)&&(T(ie),_(ie))){g(ie);return}h(ie,()=>(0,e.topBoolOrEmptySchema)(ie))}tg.validateFunctionCode=f;function h({gen:ie,validateName:le,schema:Ce,schemaEnv:X,opts:fe},de){fe.code.es5?ie.func(le,(0,a._)`${l.default.data}, ${l.default.valCxt}`,X.$async,()=>{ie.code((0,a._)`"use strict"; ${v(Ce,fe)}`),m(ie,fe),ie.code(de)}):ie.func(le,(0,a._)`${l.default.data}, ${p(fe)}`,X.$async,()=>ie.code(v(Ce,fe)).code(de))}function p(ie){return(0,a._)`{${l.default.instancePath}="", ${l.default.parentData}, ${l.default.parentDataProperty}, ${l.default.rootData}=${l.default.data}${ie.dynamicRef?(0,a._)`, ${l.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ie,le){ie.if(l.default.valCxt,()=>{ie.var(l.default.instancePath,(0,a._)`${l.default.valCxt}.${l.default.instancePath}`),ie.var(l.default.parentData,(0,a._)`${l.default.valCxt}.${l.default.parentData}`),ie.var(l.default.parentDataProperty,(0,a._)`${l.default.valCxt}.${l.default.parentDataProperty}`),ie.var(l.default.rootData,(0,a._)`${l.default.valCxt}.${l.default.rootData}`),le.dynamicRef&&ie.var(l.default.dynamicAnchors,(0,a._)`${l.default.valCxt}.${l.default.dynamicAnchors}`)},()=>{ie.var(l.default.instancePath,(0,a._)`""`),ie.var(l.default.parentData,(0,a._)`undefined`),ie.var(l.default.parentDataProperty,(0,a._)`undefined`),ie.var(l.default.rootData,l.default.data),le.dynamicRef&&ie.var(l.default.dynamicAnchors,(0,a._)`{}`)})}function g(ie){const{schema:le,opts:Ce,gen:X}=ie;h(ie,()=>{Ce.$comment&&le.$comment&&M(ie),I(ie),X.let(l.default.vErrors,null),X.let(l.default.errors,0),Ce.unevaluated&&y(ie),A(ie),O(ie)})}function y(ie){const{gen:le,validateName:Ce}=ie;ie.evaluated=le.const("evaluated",(0,a._)`${Ce}.evaluated`),le.if((0,a._)`${ie.evaluated}.dynamicProps`,()=>le.assign((0,a._)`${ie.evaluated}.props`,(0,a._)`undefined`)),le.if((0,a._)`${ie.evaluated}.dynamicItems`,()=>le.assign((0,a._)`${ie.evaluated}.items`,(0,a._)`undefined`))}function v(ie,le){const Ce=typeof ie=="object"&&ie[le.schemaId];return Ce&&(le.code.source||le.code.process)?(0,a._)`/*# sourceURL=${Ce} */`:a.nil}function b(ie,le){if(E(ie)&&(T(ie),_(ie))){S(ie,le);return}(0,e.boolOrEmptySchema)(ie,le)}function _({schema:ie,self:le}){if(typeof ie=="boolean")return!ie;for(const Ce in ie)if(le.RULES.all[Ce])return!0;return!1}function E(ie){return typeof ie.schema!="boolean"}function S(ie,le){const{schema:Ce,gen:X,opts:fe}=ie;fe.$comment&&Ce.$comment&&M(ie),P(ie),N(ie);const de=X.const("_errs",l.default.errors);A(ie,de),X.var(le,(0,a._)`${de} === ${l.default.errors}`)}function T(ie){(0,c.checkUnknownRules)(ie),R(ie)}function A(ie,le){if(ie.opts.jtd)return B(ie,[],!1,le);const Ce=(0,t.getSchemaTypes)(ie.schema),X=(0,t.coerceAndCheckDataType)(ie,Ce);B(ie,Ce,!X,le)}function R(ie){const{schema:le,errSchemaPath:Ce,opts:X,self:fe}=ie;le.$ref&&X.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(le,fe.RULES)&&fe.logger.warn(`$ref: keywords ignored in schema at path "${Ce}"`)}function I(ie){const{schema:le,opts:Ce}=ie;le.default!==void 0&&Ce.useDefaults&&Ce.strictSchema&&(0,c.checkStrictMode)(ie,"default is ignored in the schema root")}function P(ie){const le=ie.schema[ie.opts.schemaId];le&&(ie.baseId=(0,u.resolveUrl)(ie.opts.uriResolver,ie.baseId,le))}function N(ie){if(ie.schema.$async&&!ie.schemaEnv.$async)throw new Error("async schema in sync schema")}function M({gen:ie,schemaEnv:le,schema:Ce,errSchemaPath:X,opts:fe}){const de=Ce.$comment;if(fe.$comment===!0)ie.code((0,a._)`${l.default.self}.logger.log(${de})`);else if(typeof fe.$comment=="function"){const te=(0,a.str)`${X}/$comment`,ee=ie.scopeValue("root",{ref:le.root});ie.code((0,a._)`${l.default.self}.opts.$comment(${de}, ${te}, ${ee}.schema)`)}}function O(ie){const{gen:le,schemaEnv:Ce,validateName:X,ValidationError:fe,opts:de}=ie;Ce.$async?le.if((0,a._)`${l.default.errors} === 0`,()=>le.return(l.default.data),()=>le.throw((0,a._)`new ${fe}(${l.default.vErrors})`)):(le.assign((0,a._)`${X}.errors`,l.default.vErrors),de.unevaluated&&j(ie),le.return((0,a._)`${l.default.errors} === 0`))}function j({gen:ie,evaluated:le,props:Ce,items:X}){Ce instanceof a.Name&&ie.assign((0,a._)`${le}.props`,Ce),X instanceof a.Name&&ie.assign((0,a._)`${le}.items`,X)}function B(ie,le,Ce,X){const{gen:fe,schema:de,data:te,allErrors:ee,opts:me,self:Ie}=ie,{RULES:Te}=Ie;if(de.$ref&&(me.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(de,Te))){fe.block(()=>ue(ie,"$ref",Te.all.$ref.definition));return}me.jtd||q(ie,le),fe.block(()=>{for(const Me of Te.rules)we(Me);we(Te.post)});function we(Me){(0,n.shouldUseGroup)(de,Me)&&(Me.type?(fe.if((0,r.checkDataType)(Me.type,te,me.strictNumbers)),H(ie,Me),le.length===1&&le[0]===Me.type&&Ce&&(fe.else(),(0,r.reportTypeError)(ie)),fe.endIf()):H(ie,Me),ee||fe.if((0,a._)`${l.default.errors} === ${X||0}`))}}function H(ie,le){const{gen:Ce,schema:X,opts:{useDefaults:fe}}=ie;fe&&(0,i.assignDefaults)(ie,le.type),Ce.block(()=>{for(const de of le.rules)(0,n.shouldUseRule)(X,de)&&ue(ie,de.keyword,de.definition,le.type)})}function q(ie,le){ie.schemaEnv.meta||!ie.opts.strictTypes||(G(ie,le),ie.opts.allowUnionTypes||U(ie,le),L(ie,ie.dataTypes))}function G(ie,le){if(le.length){if(!ie.dataTypes.length){ie.dataTypes=le;return}le.forEach(Ce=>{V(ie.dataTypes,Ce)||Q(ie,`type "${Ce}" not allowed by context "${ie.dataTypes.join(",")}"`)}),Y(ie,le)}}function U(ie,le){le.length>1&&!(le.length===2&&le.includes("null"))&&Q(ie,"use allowUnionTypes to allow union type keyword")}function L(ie,le){const Ce=ie.self.RULES.all;for(const X in Ce){const fe=Ce[X];if(typeof fe=="object"&&(0,n.shouldUseRule)(ie.schema,fe)){const{type:de}=fe.definition;de.length&&!de.some(te=>z(le,te))&&Q(ie,`missing type "${de.join(",")}" for keyword "${X}"`)}}}function z(ie,le){return ie.includes(le)||le==="number"&&ie.includes("integer")}function V(ie,le){return ie.includes(le)||le==="integer"&&ie.includes("number")}function Y(ie,le){const Ce=[];for(const X of ie.dataTypes)V(le,X)?Ce.push(X):le.includes("integer")&&X==="number"&&Ce.push("integer");ie.dataTypes=Ce}function Q(ie,le){const Ce=ie.schemaEnv.baseId+ie.errSchemaPath;le+=` at "${Ce}" (strictTypes)`,(0,c.checkStrictMode)(ie,le,ie.opts.strictTypes)}class ne{constructor(le,Ce,X){if((0,s.validateKeywordUsage)(le,Ce,X),this.gen=le.gen,this.allErrors=le.allErrors,this.keyword=X,this.data=le.data,this.schema=le.schema[X],this.$data=Ce.$data&&le.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(le,this.schema,X,this.$data),this.schemaType=Ce.schemaType,this.parentSchema=le.schema,this.params={},this.it=le,this.def=Ce,this.$data)this.schemaCode=le.gen.const("vSchema",he(this.$data,le));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,Ce.schemaType,Ce.allowUndefined))throw new Error(`${X} value must be ${JSON.stringify(Ce.schemaType)}`);("code"in Ce?Ce.trackErrors:Ce.errors!==!1)&&(this.errsCount=le.gen.const("_errs",l.default.errors))}result(le,Ce,X){this.failResult((0,a.not)(le),Ce,X)}failResult(le,Ce,X){this.gen.if(le),X?X():this.error(),Ce?(this.gen.else(),Ce(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(le,Ce){this.failResult((0,a.not)(le),void 0,Ce)}fail(le){if(le===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(le),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(le){if(!this.$data)return this.fail(le);const{schemaCode:Ce}=this;this.fail((0,a._)`${Ce} !== undefined && (${(0,a.or)(this.invalid$data(),le)})`)}error(le,Ce,X){if(Ce){this.setParams(Ce),this._error(le,X),this.setParams({});return}this._error(le,X)}_error(le,Ce){(le?d.reportExtraError:d.reportError)(this,this.def.error,Ce)}$dataError(){(0,d.reportError)(this,this.def.$dataError||d.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,d.resetErrorsCount)(this.gen,this.errsCount)}ok(le){this.allErrors||this.gen.if(le)}setParams(le,Ce){Ce?Object.assign(this.params,le):this.params=le}block$data(le,Ce,X=a.nil){this.gen.block(()=>{this.check$data(le,X),Ce()})}check$data(le=a.nil,Ce=a.nil){if(!this.$data)return;const{gen:X,schemaCode:fe,schemaType:de,def:te}=this;X.if((0,a.or)((0,a._)`${fe} === undefined`,Ce)),le!==a.nil&&X.assign(le,!0),(de.length||te.validateSchema)&&(X.elseIf(this.invalid$data()),this.$dataError(),le!==a.nil&&X.assign(le,!1)),X.else()}invalid$data(){const{gen:le,schemaCode:Ce,schemaType:X,def:fe,it:de}=this;return(0,a.or)(te(),ee());function te(){if(X.length){if(!(Ce instanceof a.Name))throw new Error("ajv implementation error");const me=Array.isArray(X)?X:[X];return(0,a._)`${(0,r.checkDataTypes)(me,Ce,de.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function ee(){if(fe.validateSchema){const me=le.scopeValue("validate$data",{ref:fe.validateSchema});return(0,a._)`!${me}(${Ce})`}return a.nil}}subschema(le,Ce){const X=(0,o.getSubschema)(this.it,le);(0,o.extendSubschemaData)(X,this.it,le),(0,o.extendSubschemaMode)(X,le);const fe={...this.it,...X,items:void 0,props:void 0};return b(fe,Ce),fe}mergeEvaluated(le,Ce){const{it:X,gen:fe}=this;X.opts.unevaluated&&(X.props!==!0&&le.props!==void 0&&(X.props=c.mergeEvaluated.props(fe,le.props,X.props,Ce)),X.items!==!0&&le.items!==void 0&&(X.items=c.mergeEvaluated.items(fe,le.items,X.items,Ce)))}mergeValidEvaluated(le,Ce){const{it:X,gen:fe}=this;if(X.opts.unevaluated&&(X.props!==!0||X.items!==!0))return fe.if(Ce,()=>this.mergeEvaluated(le,a.Name)),!0}}tg.KeywordCxt=ne;function ue(ie,le,Ce,X){const fe=new ne(ie,Ce,le);"code"in Ce?Ce.code(fe,X):fe.$data&&Ce.validate?(0,s.funcKeywordCode)(fe,Ce):"macro"in Ce?(0,s.macroKeywordCode)(fe,Ce):(Ce.compile||Ce.validate)&&(0,s.funcKeywordCode)(fe,Ce)}const se=/^\/(?:[^~]|~0|~1)*$/,ae=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function he(ie,{dataLevel:le,dataNames:Ce,dataPathArr:X}){let fe,de;if(ie==="")return l.default.rootData;if(ie[0]==="/"){if(!se.test(ie))throw new Error(`Invalid JSON-pointer: ${ie}`);fe=ie,de=l.default.rootData}else{const Ie=ae.exec(ie);if(!Ie)throw new Error(`Invalid JSON-pointer: ${ie}`);const Te=+Ie[1];if(fe=Ie[2],fe==="#"){if(Te>=le)throw new Error(me("property/index",Te));return X[le-Te]}if(Te>le)throw new Error(me("data",Te));if(de=Ce[le-Te],!fe)return de}let te=de;const ee=fe.split("/");for(const Ie of ee)Ie&&(de=(0,a._)`${de}${(0,a.getProperty)((0,c.unescapeJsonPointer)(Ie))}`,te=(0,a._)`${te} && ${de}`);return te;function me(Ie,Te){return`Cannot access ${Ie} ${Te} levels up, current level is ${le}`}}return tg.getData=he,tg}var BO={},rEe;function ele(){if(rEe)return BO;rEe=1,Object.defineProperty(BO,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return BO.default=e,BO}var zO={},iEe;function _B(){if(iEe)return zO;iEe=1,Object.defineProperty(zO,"__esModule",{value:!0});const e=wB();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return zO.default=t,zO}var Tc={},sEe;function tle(){if(sEe)return Tc;sEe=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.resolveSchema=Tc.getCompilingSchema=Tc.resolveRef=Tc.compileSchema=Tc.SchemaEnv=void 0;const e=Pr(),t=ele(),n=S1(),r=wB(),i=fi(),s=xB();class o{constructor(y){var v;this.refs={},this.dynamicAnchors={};let b;typeof y.schema=="object"&&(b=y.schema),this.schema=y.schema,this.schemaId=y.schemaId,this.root=y.root||this,this.baseId=(v=y.baseId)!==null&&v!==void 0?v:(0,r.normalizeId)(b?.[y.schemaId||"$id"]),this.schemaPath=y.schemaPath,this.localRefs=y.localRefs,this.meta=y.meta,this.$async=b?.$async,this.refs={}}}Tc.SchemaEnv=o;function a(g){const y=c.call(this,g);if(y)return y;const v=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:b,lines:_}=this.opts.code,{ownProperties:E}=this.opts,S=new e.CodeGen(this.scope,{es5:b,lines:_,ownProperties:E});let T;g.$async&&(T=S.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const A=S.scopeName("validate");g.validateName=A;const R={gen:S,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:S.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:A,ValidationError:T,schema:g.schema,schemaEnv:g,rootId:v,baseId:g.baseId||v,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let I;try{this._compilations.add(g),(0,s.validateFunctionCode)(R),S.optimize(this.opts.code.optimize);const P=S.toString();I=`${S.scopeRefs(n.default.scope)}return ${P}`,this.opts.code.process&&(I=this.opts.code.process(I,g));const M=new Function(`${n.default.self}`,`${n.default.scope}`,I)(this,this.scope.get());if(this.scope.value(A,{ref:M}),M.errors=null,M.schema=g.schema,M.schemaEnv=g,g.$async&&(M.$async=!0),this.opts.code.source===!0&&(M.source={validateName:A,validateCode:P,scopeValues:S._values}),this.opts.unevaluated){const{props:O,items:j}=R;M.evaluated={props:O instanceof e.Name?void 0:O,items:j instanceof e.Name?void 0:j,dynamicProps:O instanceof e.Name,dynamicItems:j instanceof e.Name},M.source&&(M.source.evaluated=(0,e.stringify)(M.evaluated))}return g.validate=M,g}catch(P){throw delete g.validate,delete g.validateName,I&&this.logger.error("Error compiling schema, function code:",I),P}finally{this._compilations.delete(g)}}Tc.compileSchema=a;function l(g,y,v){var b;v=(0,r.resolveUrl)(this.opts.uriResolver,y,v);const _=g.refs[v];if(_)return _;let E=f.call(this,g,v);if(E===void 0){const S=(b=g.localRefs)===null||b===void 0?void 0:b[v],{schemaId:T}=this.opts;S&&(E=new o({schema:S,schemaId:T,root:g,baseId:y}))}if(E!==void 0)return g.refs[v]=u.call(this,E)}Tc.resolveRef=l;function u(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const y of this._compilations)if(d(y,g))return y}Tc.getCompilingSchema=c;function d(g,y){return g.schema===y.schema&&g.root===y.root&&g.baseId===y.baseId}function f(g,y){let v;for(;typeof(v=this.refs[y])=="string";)y=v;return v||this.schemas[y]||h.call(this,g,y)}function h(g,y){const v=this.opts.uriResolver.parse(y),b=(0,r._getFullPath)(this.opts.uriResolver,v);let _=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&b===_)return m.call(this,v,g);const E=(0,r.normalizeId)(b),S=this.refs[E]||this.schemas[E];if(typeof S=="string"){const T=h.call(this,g,S);return typeof T?.schema!="object"?void 0:m.call(this,v,T)}if(typeof S?.schema=="object"){if(S.validate||a.call(this,S),E===(0,r.normalizeId)(y)){const{schema:T}=S,{schemaId:A}=this.opts,R=T[A];return R&&(_=(0,r.resolveUrl)(this.opts.uriResolver,_,R)),new o({schema:T,schemaId:A,root:g,baseId:_})}return m.call(this,v,S)}}Tc.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(g,{baseId:y,schema:v,root:b}){var _;if(((_=g.fragment)===null||_===void 0?void 0:_[0])!=="/")return;for(const T of g.fragment.slice(1).split("/")){if(typeof v=="boolean")return;const A=v[(0,i.unescapeFragment)(T)];if(A===void 0)return;v=A;const R=typeof v=="object"&&v[this.opts.schemaId];!p.has(T)&&R&&(y=(0,r.resolveUrl)(this.opts.uriResolver,y,R))}let E;if(typeof v!="boolean"&&v.$ref&&!(0,i.schemaHasRulesButRef)(v,this.RULES)){const T=(0,r.resolveUrl)(this.opts.uriResolver,y,v.$ref);E=h.call(this,b,T)}const{schemaId:S}=this.opts;if(E=E||new o({schema:v,schemaId:S,root:b,baseId:y}),E.schema!==E.root.schema)return E}return Tc}const $hn="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Fhn="Meta-schema for $data reference (JSON AnySchema extension proposal)",Lhn="object",jhn=["$data"],Bhn={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},zhn=!1,Vhn={$id:$hn,description:Fhn,type:Lhn,required:jhn,properties:Bhn,additionalProperties:zhn};var VO={},D2={exports:{}},yq,oEe;function Uhn(){return oEe||(oEe=1,yq={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),yq}var vq,aEe;function Hhn(){if(aEe)return vq;aEe=1;const{HEX:e}=Uhn(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const g=m.match(t)||[],[y]=g;return y?{host:o(y,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,g=!1){let y="",v=!0;for(const b of m){if(e[b]===void 0)return;b!=="0"&&v===!0&&(v=!1),v||(y+=b)}return g&&y.length===0&&(y="0"),y}function i(m){let g=0;const y={error:!1,address:"",zone:""},v=[],b=[];let _=!1,E=!1,S=!1;function T(){if(b.length){if(_===!1){const A=r(b);if(A!==void 0)v.push(A);else return y.error=!0,!1}b.length=0}return!0}for(let A=0;A<m.length;A++){const R=m[A];if(!(R==="["||R==="]"))if(R===":"){if(E===!0&&(S=!0),!T())break;if(g++,v.push(":"),g>7){y.error=!0;break}A-1>=0&&m[A-1]===":"&&(E=!0);continue}else if(R==="%"){if(!T())break;_=!0}else{b.push(R);continue}}return b.length&&(_?y.zone=b.join(""):S?v.push(b.join("")):v.push(r(b))),y.address=v.join(""),y}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const g=i(m);if(g.error)return{host:m,isIPV6:!1};{let y=g.address,v=g.address;return g.zone&&(y+="%"+g.zone,v+="%25"+g.zone),{host:y,escapedHost:v,isIPV6:!0}}}function o(m,g){let y="",v=!0;const b=m.length;for(let _=0;_<b;_++){const E=m[_];E==="0"&&v?(_+1<=b&&m[_+1]===g||_+1===b)&&(y+=E,v=!1):(E===g?v=!0:v=!1,y+=E)}return y}function a(m,g){let y=0;for(let v=0;v<m.length;v++)m[v]===g&&y++;return y}const l=/^\.\.?\//u,u=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,d=/^\/?(?:.|\n)*?(?=\/|$)/u;function f(m){const g=[];for(;m.length;)if(m.match(l))m=m.replace(l,"");else if(m.match(u))m=m.replace(u,"/");else if(m.match(c))m=m.replace(c,"/"),g.pop();else if(m==="."||m==="..")m="";else{const y=m.match(d);if(y){const v=y[0];m=m.slice(v.length),g.push(v)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(m,g){const y=g!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=y(m.scheme)),m.userinfo!==void 0&&(m.userinfo=y(m.userinfo)),m.host!==void 0&&(m.host=y(m.host)),m.path!==void 0&&(m.path=y(m.path)),m.query!==void 0&&(m.query=y(m.query)),m.fragment!==void 0&&(m.fragment=y(m.fragment)),m}function p(m){const g=[];if(m.userinfo!==void 0&&(g.push(m.userinfo),g.push("@")),m.host!==void 0){let y=unescape(m.host);const v=n(y);if(v.isIPV4)y=v.host;else{const b=s(v.host);b.isIPV6===!0?y=`[${b.escapedHost}]`:y=m.host}g.push(y)}return(typeof m.port=="number"||typeof m.port=="string")&&(g.push(":"),g.push(String(m.port))),g.length?g.join(""):void 0}return vq={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:f,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},vq}var bq,lEe;function qhn(){if(lEe)return bq;lEe=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(v){return typeof v.secure=="boolean"?v.secure:String(v.scheme).toLowerCase()==="wss"}function r(v){return v.host||(v.error=v.error||"HTTP URIs must have a host."),v}function i(v){const b=String(v.scheme).toLowerCase()==="https";return(v.port===(b?443:80)||v.port==="")&&(v.port=void 0),v.path||(v.path="/"),v}function s(v){return v.secure=n(v),v.resourceName=(v.path||"/")+(v.query?"?"+v.query:""),v.path=void 0,v.query=void 0,v}function o(v){if((v.port===(n(v)?443:80)||v.port==="")&&(v.port=void 0),typeof v.secure=="boolean"&&(v.scheme=v.secure?"wss":"ws",v.secure=void 0),v.resourceName){const[b,_]=v.resourceName.split("?");v.path=b&&b!=="/"?b:void 0,v.query=_,v.resourceName=void 0}return v.fragment=void 0,v}function a(v,b){if(!v.path)return v.error="URN can not be parsed",v;const _=v.path.match(t);if(_){const E=b.scheme||v.scheme||"urn";v.nid=_[1].toLowerCase(),v.nss=_[2];const S=`${E}:${b.nid||v.nid}`,T=y[S];v.path=void 0,T&&(v=T.parse(v,b))}else v.error=v.error||"URN can not be parsed.";return v}function l(v,b){const _=b.scheme||v.scheme||"urn",E=v.nid.toLowerCase(),S=`${_}:${b.nid||E}`,T=y[S];T&&(v=T.serialize(v,b));const A=v,R=v.nss;return A.path=`${E||b.nid}:${R}`,b.skipEscape=!0,A}function u(v,b){const _=v;return _.uuid=_.nss,_.nss=void 0,!b.tolerant&&(!_.uuid||!e.test(_.uuid))&&(_.error=_.error||"UUID is not valid."),_}function c(v){const b=v;return b.nss=(v.uuid||"").toLowerCase(),b}const d={scheme:"http",domainHost:!0,parse:r,serialize:i},f={scheme:"https",domainHost:d.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},y={http:d,https:f,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:l,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:u,serialize:c,skipNormalize:!0}};return bq=y,bq}var uEe;function Whn(){if(uEe)return D2.exports;uEe=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=Hhn(),s=qhn();function o(g,y){return typeof g=="string"?g=c(p(g,y),y):typeof g=="object"&&(g=p(c(g,y),y)),g}function a(g,y,v){const b=Object.assign({scheme:"null"},v),_=l(p(g,b),p(y,b),b,!0);return c(_,{...b,skipEscape:!0})}function l(g,y,v,b){const _={};return b||(g=p(c(g,v),v),y=p(c(y,v),v)),v=v||{},!v.tolerant&&y.scheme?(_.scheme=y.scheme,_.userinfo=y.userinfo,_.host=y.host,_.port=y.port,_.path=n(y.path||""),_.query=y.query):(y.userinfo!==void 0||y.host!==void 0||y.port!==void 0?(_.userinfo=y.userinfo,_.host=y.host,_.port=y.port,_.path=n(y.path||""),_.query=y.query):(y.path?(y.path.charAt(0)==="/"?_.path=n(y.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?_.path="/"+y.path:g.path?_.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+y.path:_.path=y.path,_.path=n(_.path)),_.query=y.query):(_.path=g.path,y.query!==void 0?_.query=y.query:_.query=g.query),_.userinfo=g.userinfo,_.host=g.host,_.port=g.port),_.scheme=g.scheme),_.fragment=y.fragment,_}function u(g,y,v){return typeof g=="string"?(g=unescape(g),g=c(i(p(g,v),!0),{...v,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...v,skipEscape:!0})),typeof y=="string"?(y=unescape(y),y=c(i(p(y,v),!0),{...v,skipEscape:!0})):typeof y=="object"&&(y=c(i(y,!0),{...v,skipEscape:!0})),g.toLowerCase()===y.toLowerCase()}function c(g,y){const v={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},b=Object.assign({},y),_=[],E=s[(b.scheme||v.scheme||"").toLowerCase()];E&&E.serialize&&E.serialize(v,b),v.path!==void 0&&(b.skipEscape?v.path=unescape(v.path):(v.path=escape(v.path),v.scheme!==void 0&&(v.path=v.path.split("%3A").join(":")))),b.reference!=="suffix"&&v.scheme&&_.push(v.scheme,":");const S=r(v);if(S!==void 0&&(b.reference!=="suffix"&&_.push("//"),_.push(S),v.path&&v.path.charAt(0)!=="/"&&_.push("/")),v.path!==void 0){let T=v.path;!b.absolutePath&&(!E||!E.absolutePath)&&(T=n(T)),S===void 0&&(T=T.replace(/^\/\//u,"/%2F")),_.push(T)}return v.query!==void 0&&_.push("?",v.query),v.fragment!==void 0&&_.push("#",v.fragment),_.join("")}const d=Array.from({length:127},(g,y)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(y)));function f(g){let y=0;for(let v=0,b=g.length;v<b;++v)if(y=g.charCodeAt(v),y>126||d[y])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(g,y){const v=Object.assign({},y),b={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},_=g.indexOf("%")!==-1;let E=!1;v.reference==="suffix"&&(g=(v.scheme?v.scheme+":":"")+"//"+g);const S=g.match(h);if(S){if(b.scheme=S[1],b.userinfo=S[3],b.host=S[4],b.port=parseInt(S[5],10),b.path=S[6]||"",b.query=S[7],b.fragment=S[8],isNaN(b.port)&&(b.port=S[5]),b.host){const A=t(b.host);if(A.isIPV4===!1){const R=e(A.host);b.host=R.host.toLowerCase(),E=R.isIPV6}else b.host=A.host,E=!0}b.scheme===void 0&&b.userinfo===void 0&&b.host===void 0&&b.port===void 0&&!b.path&&b.query===void 0?b.reference="same-document":b.scheme===void 0?b.reference="relative":b.fragment===void 0?b.reference="absolute":b.reference="uri",v.reference&&v.reference!=="suffix"&&v.reference!==b.reference&&(b.error=b.error||"URI is not a "+v.reference+" reference.");const T=s[(v.scheme||b.scheme||"").toLowerCase()];if(!v.unicodeSupport&&(!T||!T.unicodeSupport)&&b.host&&(v.domainHost||T&&T.domainHost)&&E===!1&&f(b.host))try{b.host=URL.domainToASCII(b.host.toLowerCase())}catch(A){b.error=b.error||"Host's domain name can not be converted to ASCII: "+A}(!T||T&&!T.skipNormalize)&&(_&&b.scheme!==void 0&&(b.scheme=unescape(b.scheme)),_&&b.host!==void 0&&(b.host=unescape(b.host)),b.path&&b.path.length&&(b.path=escape(unescape(b.path))),b.fragment&&b.fragment.length&&(b.fragment=encodeURI(decodeURIComponent(b.fragment)))),T&&T.parse&&T.parse(b,v)}else b.error=b.error||"URI can not be parsed.";return b}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:l,equal:u,serialize:c,parse:p};return D2.exports=m,D2.exports.default=m,D2.exports.fastUri=m,D2.exports}var cEe;function Ghn(){if(cEe)return VO;cEe=1,Object.defineProperty(VO,"__esModule",{value:!0});const e=Whn();return e.code='require("ajv/dist/runtime/uri").default',VO.default=e,VO}var dEe;function Yhn(){return dEe||(dEe=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=xB();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ele(),i=_B(),s=SVe(),o=tle(),a=Pr(),l=wB(),u=B$(),c=fi(),d=Vhn,f=Ghn(),h=(U,L)=>new RegExp(U,L);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(U){var L,z,V,Y,Q,ne,ue,se,ae,he,ie,le,Ce,X,fe,de,te,ee,me,Ie,Te,we,Me,ke,Oe;const xe=U.strict,je=(L=U.code)===null||L===void 0?void 0:L.optimize,Ve=je===!0||je===void 0?1:je||0,nt=(V=(z=U.code)===null||z===void 0?void 0:z.regExp)!==null&&V!==void 0?V:h,it=(Y=U.uriResolver)!==null&&Y!==void 0?Y:f.default;return{strictSchema:(ne=(Q=U.strictSchema)!==null&&Q!==void 0?Q:xe)!==null&&ne!==void 0?ne:!0,strictNumbers:(se=(ue=U.strictNumbers)!==null&&ue!==void 0?ue:xe)!==null&&se!==void 0?se:!0,strictTypes:(he=(ae=U.strictTypes)!==null&&ae!==void 0?ae:xe)!==null&&he!==void 0?he:"log",strictTuples:(le=(ie=U.strictTuples)!==null&&ie!==void 0?ie:xe)!==null&&le!==void 0?le:"log",strictRequired:(X=(Ce=U.strictRequired)!==null&&Ce!==void 0?Ce:xe)!==null&&X!==void 0?X:!1,code:U.code?{...U.code,optimize:Ve,regExp:nt}:{optimize:Ve,regExp:nt},loopRequired:(fe=U.loopRequired)!==null&&fe!==void 0?fe:v,loopEnum:(de=U.loopEnum)!==null&&de!==void 0?de:v,meta:(te=U.meta)!==null&&te!==void 0?te:!0,messages:(ee=U.messages)!==null&&ee!==void 0?ee:!0,inlineRefs:(me=U.inlineRefs)!==null&&me!==void 0?me:!0,schemaId:(Ie=U.schemaId)!==null&&Ie!==void 0?Ie:"$id",addUsedSchema:(Te=U.addUsedSchema)!==null&&Te!==void 0?Te:!0,validateSchema:(we=U.validateSchema)!==null&&we!==void 0?we:!0,validateFormats:(Me=U.validateFormats)!==null&&Me!==void 0?Me:!0,unicodeRegExp:(ke=U.unicodeRegExp)!==null&&ke!==void 0?ke:!0,int32range:(Oe=U.int32range)!==null&&Oe!==void 0?Oe:!0,uriResolver:it}}class _{constructor(L={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,L=this.opts={...L,...b(L)};const{es5:z,lines:V}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:z,lines:V}),this.logger=N(L.logger);const Y=L.validateFormats;L.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,L,"NOT SUPPORTED"),E.call(this,y,L,"DEPRECATED","warn"),this._metaOpts=I.call(this),L.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),L.keywords&&R.call(this,L.keywords),typeof L.meta=="object"&&this.addMetaSchema(L.meta),T.call(this),L.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:L,meta:z,schemaId:V}=this.opts;let Y=d;V==="id"&&(Y={...d},Y.id=Y.$id,delete Y.$id),z&&L&&this.addMetaSchema(Y,Y[V],!1)}defaultMeta(){const{meta:L,schemaId:z}=this.opts;return this.opts.defaultMeta=typeof L=="object"?L[z]||L:void 0}validate(L,z){let V;if(typeof L=="string"){if(V=this.getSchema(L),!V)throw new Error(`no schema with key or ref "${L}"`)}else V=this.compile(L);const Y=V(z);return"$async"in V||(this.errors=V.errors),Y}compile(L,z){const V=this._addSchema(L,z);return V.validate||this._compileSchemaEnv(V)}compileAsync(L,z){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:V}=this.opts;return Y.call(this,L,z);async function Y(he,ie){await Q.call(this,he.$schema);const le=this._addSchema(he,ie);return le.validate||ne.call(this,le)}async function Q(he){he&&!this.getSchema(he)&&await Y.call(this,{$ref:he},!0)}async function ne(he){try{return this._compileSchemaEnv(he)}catch(ie){if(!(ie instanceof i.default))throw ie;return ue.call(this,ie),await se.call(this,ie.missingSchema),ne.call(this,he)}}function ue({missingSchema:he,missingRef:ie}){if(this.refs[he])throw new Error(`AnySchema ${he} is loaded but ${ie} cannot be resolved`)}async function se(he){const ie=await ae.call(this,he);this.refs[he]||await Q.call(this,ie.$schema),this.refs[he]||this.addSchema(ie,he,z)}async function ae(he){const ie=this._loading[he];if(ie)return ie;try{return await(this._loading[he]=V(he))}finally{delete this._loading[he]}}}addSchema(L,z,V,Y=this.opts.validateSchema){if(Array.isArray(L)){for(const ne of L)this.addSchema(ne,void 0,V,Y);return this}let Q;if(typeof L=="object"){const{schemaId:ne}=this.opts;if(Q=L[ne],Q!==void 0&&typeof Q!="string")throw new Error(`schema ${ne} must be string`)}return z=(0,l.normalizeId)(z||Q),this._checkUnique(z),this.schemas[z]=this._addSchema(L,V,z,Y,!0),this}addMetaSchema(L,z,V=this.opts.validateSchema){return this.addSchema(L,z,!0,V),this}validateSchema(L,z){if(typeof L=="boolean")return!0;let V;if(V=L.$schema,V!==void 0&&typeof V!="string")throw new Error("$schema must be a string");if(V=V||this.opts.defaultMeta||this.defaultMeta(),!V)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Y=this.validate(V,L);if(!Y&&z){const Q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Q);else throw new Error(Q)}return Y}getSchema(L){let z;for(;typeof(z=S.call(this,L))=="string";)L=z;if(z===void 0){const{schemaId:V}=this.opts,Y=new o.SchemaEnv({schema:{},schemaId:V});if(z=o.resolveSchema.call(this,Y,L),!z)return;this.refs[L]=z}return z.validate||this._compileSchemaEnv(z)}removeSchema(L){if(L instanceof RegExp)return this._removeAllSchemas(this.schemas,L),this._removeAllSchemas(this.refs,L),this;switch(typeof L){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const z=S.call(this,L);return typeof z=="object"&&this._cache.delete(z.schema),delete this.schemas[L],delete this.refs[L],this}case"object":{const z=L;this._cache.delete(z);let V=L[this.opts.schemaId];return V&&(V=(0,l.normalizeId)(V),delete this.schemas[V],delete this.refs[V]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(L){for(const z of L)this.addKeyword(z);return this}addKeyword(L,z){let V;if(typeof L=="string")V=L,typeof z=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),z.keyword=V);else if(typeof L=="object"&&z===void 0){if(z=L,V=z.keyword,Array.isArray(V)&&!V.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(O.call(this,V,z),!z)return(0,c.eachItem)(V,Q=>j.call(this,Q)),this;H.call(this,z);const Y={...z,type:(0,u.getJSONTypes)(z.type),schemaType:(0,u.getJSONTypes)(z.schemaType)};return(0,c.eachItem)(V,Y.type.length===0?Q=>j.call(this,Q,Y):Q=>Y.type.forEach(ne=>j.call(this,Q,Y,ne))),this}getKeyword(L){const z=this.RULES.all[L];return typeof z=="object"?z.definition:!!z}removeKeyword(L){const{RULES:z}=this;delete z.keywords[L],delete z.all[L];for(const V of z.rules){const Y=V.rules.findIndex(Q=>Q.keyword===L);Y>=0&&V.rules.splice(Y,1)}return this}addFormat(L,z){return typeof z=="string"&&(z=new RegExp(z)),this.formats[L]=z,this}errorsText(L=this.errors,{separator:z=", ",dataVar:V="data"}={}){return!L||L.length===0?"No errors":L.map(Y=>`${V}${Y.instancePath} ${Y.message}`).reduce((Y,Q)=>Y+z+Q)}$dataMetaSchema(L,z){const V=this.RULES.all;L=JSON.parse(JSON.stringify(L));for(const Y of z){const Q=Y.split("/").slice(1);let ne=L;for(const ue of Q)ne=ne[ue];for(const ue in V){const se=V[ue];if(typeof se!="object")continue;const{$data:ae}=se.definition,he=ne[ue];ae&&he&&(ne[ue]=G(he))}}return L}_removeAllSchemas(L,z){for(const V in L){const Y=L[V];(!z||z.test(V))&&(typeof Y=="string"?delete L[V]:Y&&!Y.meta&&(this._cache.delete(Y.schema),delete L[V]))}}_addSchema(L,z,V,Y=this.opts.validateSchema,Q=this.opts.addUsedSchema){let ne;const{schemaId:ue}=this.opts;if(typeof L=="object")ne=L[ue];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof L!="boolean")throw new Error("schema must be object or boolean")}let se=this._cache.get(L);if(se!==void 0)return se;V=(0,l.normalizeId)(ne||V);const ae=l.getSchemaRefs.call(this,L,V);return se=new o.SchemaEnv({schema:L,schemaId:ue,meta:z,baseId:V,localRefs:ae}),this._cache.set(se.schema,se),Q&&!V.startsWith("#")&&(V&&this._checkUnique(V),this.refs[V]=se),Y&&this.validateSchema(L,!0),se}_checkUnique(L){if(this.schemas[L]||this.refs[L])throw new Error(`schema with key or id "${L}" already exists`)}_compileSchemaEnv(L){if(L.meta?this._compileMetaSchema(L):o.compileSchema.call(this,L),!L.validate)throw new Error("ajv implementation error");return L.validate}_compileMetaSchema(L){const z=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,L)}finally{this.opts=z}}}_.ValidationError=r.default,_.MissingRefError=i.default,e.default=_;function E(U,L,z,V="error"){for(const Y in U){const Q=Y;Q in L&&this.logger[V](`${z}: option ${Y}. ${U[Q]}`)}}function S(U){return U=(0,l.normalizeId)(U),this.schemas[U]||this.refs[U]}function T(){const U=this.opts.schemas;if(U)if(Array.isArray(U))this.addSchema(U);else for(const L in U)this.addSchema(U[L],L)}function A(){for(const U in this.opts.formats){const L=this.opts.formats[U];L&&this.addFormat(U,L)}}function R(U){if(Array.isArray(U)){this.addVocabulary(U);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const L in U){const z=U[L];z.keyword||(z.keyword=L),this.addKeyword(z)}}function I(){const U={...this.opts};for(const L of p)delete U[L];return U}const P={log(){},warn(){},error(){}};function N(U){if(U===!1)return P;if(U===void 0)return console;if(U.log&&U.warn&&U.error)return U;throw new Error("logger must implement log, warn and error methods")}const M=/^[a-z_$][a-z0-9_$:-]*$/i;function O(U,L){const{RULES:z}=this;if((0,c.eachItem)(U,V=>{if(z.keywords[V])throw new Error(`Keyword ${V} is already defined`);if(!M.test(V))throw new Error(`Keyword ${V} has invalid name`)}),!!L&&L.$data&&!("code"in L||"validate"in L))throw new Error('$data keyword must have "code" or "validate" function')}function j(U,L,z){var V;const Y=L?.post;if(z&&Y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Q}=this;let ne=Y?Q.post:Q.rules.find(({type:se})=>se===z);if(ne||(ne={type:z,rules:[]},Q.rules.push(ne)),Q.keywords[U]=!0,!L)return;const ue={keyword:U,definition:{...L,type:(0,u.getJSONTypes)(L.type),schemaType:(0,u.getJSONTypes)(L.schemaType)}};L.before?B.call(this,ne,ue,L.before):ne.rules.push(ue),Q.all[U]=ue,(V=L.implements)===null||V===void 0||V.forEach(se=>this.addKeyword(se))}function B(U,L,z){const V=U.rules.findIndex(Y=>Y.keyword===z);V>=0?U.rules.splice(V,0,L):(U.rules.push(L),this.logger.warn(`rule ${z} is not defined`))}function H(U){let{metaSchema:L}=U;L!==void 0&&(U.$data&&this.opts.$data&&(L=G(L)),U.validateSchema=this.compile(L,!0))}const q={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function G(U){return{anyOf:[U,q]}}})(dq)),dq}var UO={},HO={},qO={},fEe;function Khn(){if(fEe)return qO;fEe=1,Object.defineProperty(qO,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return qO.default=e,qO}var sy={},hEe;function Xhn(){if(hEe)return sy;hEe=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.callRef=sy.getValidate=void 0;const e=_B(),t=Yh(),n=Pr(),r=S1(),i=tle(),s=fi(),o={keyword:"$ref",schemaType:"string",code(u){const{gen:c,schema:d,it:f}=u,{baseId:h,schemaEnv:p,validateName:m,opts:g,self:y}=f,{root:v}=p;if((d==="#"||d==="#/")&&h===v.baseId)return _();const b=i.resolveRef.call(y,v,h,d);if(b===void 0)throw new e.default(f.opts.uriResolver,h,d);if(b instanceof i.SchemaEnv)return E(b);return S(b);function _(){if(p===v)return l(u,m,p,p.$async);const T=c.scopeValue("root",{ref:v});return l(u,(0,n._)`${T}.validate`,v,v.$async)}function E(T){const A=a(u,T);l(u,A,T,T.$async)}function S(T){const A=c.scopeValue("schema",g.code.source===!0?{ref:T,code:(0,n.stringify)(T)}:{ref:T}),R=c.name("valid"),I=u.subschema({schema:T,dataTypes:[],schemaPath:n.nil,topSchemaRef:A,errSchemaPath:d},R);u.mergeEvaluated(I),u.ok(R)}}};function a(u,c){const{gen:d}=u;return c.validate?d.scopeValue("validate",{ref:c.validate}):(0,n._)`${d.scopeValue("wrapper",{ref:c})}.validate`}sy.getValidate=a;function l(u,c,d,f){const{gen:h,it:p}=u,{allErrors:m,schemaEnv:g,opts:y}=p,v=y.passContext?r.default.this:n.nil;f?b():_();function b(){if(!g.$async)throw new Error("async schema referenced by sync schema");const T=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(u,c,v)}`),S(c),m||h.assign(T,!0)},A=>{h.if((0,n._)`!(${A} instanceof ${p.ValidationError})`,()=>h.throw(A)),E(A),m||h.assign(T,!1)}),u.ok(T)}function _(){u.result((0,t.callValidateCode)(u,c,v),()=>S(c),()=>E(c))}function E(T){const A=(0,n._)`${T}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${A} : ${r.default.vErrors}.concat(${A})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function S(T){var A;if(!p.opts.unevaluated)return;const R=(A=d?.validate)===null||A===void 0?void 0:A.evaluated;if(p.props!==!0)if(R&&!R.dynamicProps)R.props!==void 0&&(p.props=s.mergeEvaluated.props(h,R.props,p.props));else{const I=h.var("props",(0,n._)`${T}.evaluated.props`);p.props=s.mergeEvaluated.props(h,I,p.props,n.Name)}if(p.items!==!0)if(R&&!R.dynamicItems)R.items!==void 0&&(p.items=s.mergeEvaluated.items(h,R.items,p.items));else{const I=h.var("items",(0,n._)`${T}.evaluated.items`);p.items=s.mergeEvaluated.items(h,I,p.items,n.Name)}}}return sy.callRef=l,sy.default=o,sy}var pEe;function Qhn(){if(pEe)return HO;pEe=1,Object.defineProperty(HO,"__esModule",{value:!0});const e=Khn(),t=Xhn(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return HO.default=n,HO}var WO={},GO={},mEe;function Jhn(){if(mEe)return GO;mEe=1,Object.defineProperty(GO,"__esModule",{value:!0});const e=Pr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:l}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${l} || isNaN(${a})`)}};return GO.default=i,GO}var YO={},gEe;function Zhn(){if(gEe)return YO;gEe=1,Object.defineProperty(YO,"__esModule",{value:!0});const e=Pr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,l=a.opts.multipleOfPrecision,u=i.let("res"),c=l?(0,e._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${l}`:(0,e._)`${u} !== parseInt(${u})`;r.fail$data((0,e._)`(${o} === 0 || (${u} = ${s}/${o}, ${c}))`)}};return YO.default=n,YO}var KO={},XO={},yEe;function epn(){if(yEe)return XO;yEe=1,Object.defineProperty(XO,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return XO.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',XO}var vEe;function tpn(){if(vEe)return KO;vEe=1,Object.defineProperty(KO,"__esModule",{value:!0});const e=Pr(),t=fi(),n=epn(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:l,it:u}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,d=u.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${d} ${c} ${l}`)}};return KO.default=i,KO}var QO={},bEe;function npn(){if(bEe)return QO;bEe=1,Object.defineProperty(QO,"__esModule",{value:!0});const e=Yh(),t=Pr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:l,it:u}=i,c=u.opts.unicodeRegExp?"u":"",d=o?(0,t._)`(new RegExp(${l}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${d}.test(${s})`)}};return QO.default=r,QO}var JO={},wEe;function rpn(){if(wEe)return JO;wEe=1,Object.defineProperty(JO,"__esModule",{value:!0});const e=Pr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return JO.default=n,JO}var ZO={},xEe;function ipn(){if(xEe)return ZO;xEe=1,Object.defineProperty(ZO,"__esModule",{value:!0});const e=Yh(),t=Pr(),n=fi(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:l,data:u,$data:c,it:d}=s,{opts:f}=d;if(!c&&a.length===0)return;const h=a.length>=f.loopRequired;if(d.allErrors?p():m(),f.strictRequired){const v=s.parentSchema.properties,{definedProperties:b}=s.it;for(const _ of a)if(v?.[_]===void 0&&!b.has(_)){const E=d.schemaEnv.baseId+d.errSchemaPath,S=`required property "${_}" is not defined at "${E}" (strictRequired)`;(0,n.checkStrictMode)(d,S,d.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,g);else for(const v of a)(0,e.checkReportMissingProp)(s,v)}function m(){const v=o.let("missing");if(h||c){const b=o.let("valid",!0);s.block$data(b,()=>y(v,b)),s.ok(b)}else o.if((0,e.checkMissingProp)(s,a,v)),(0,e.reportMissingProp)(s,v),o.else()}function g(){o.forOf("prop",l,v=>{s.setParams({missingProperty:v}),o.if((0,e.noPropertyInData)(o,u,v,f.ownProperties),()=>s.error())})}function y(v,b){s.setParams({missingProperty:v}),o.forOf(v,l,()=>{o.assign(b,(0,e.propertyInData)(o,u,v,f.ownProperties)),o.if((0,t.not)(b),()=>{s.error(),o.break()})},t.nil)}}};return ZO.default=i,ZO}var eN={},_Ee;function spn(){if(_Ee)return eN;_Ee=1,Object.defineProperty(eN,"__esModule",{value:!0});const e=Pr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return eN.default=n,eN}var tN={},nN={},EEe;function nle(){if(EEe)return nN;EEe=1,Object.defineProperty(nN,"__esModule",{value:!0});const e=zne();return e.code='require("ajv/dist/runtime/equal").default',nN.default=e,nN}var CEe;function opn(){if(CEe)return tN;CEe=1,Object.defineProperty(tN,"__esModule",{value:!0});const e=B$(),t=Pr(),n=fi(),r=nle(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:l,$data:u,schema:c,parentSchema:d,schemaCode:f,it:h}=o;if(!u&&!c)return;const p=a.let("valid"),m=d.items?(0,e.getSchemaTypes)(d.items):[];o.block$data(p,g,(0,t._)`${f} === false`),o.ok(p);function g(){const _=a.let("i",(0,t._)`${l}.length`),E=a.let("j");o.setParams({i:_,j:E}),a.assign(p,!0),a.if((0,t._)`${_} > 1`,()=>(y()?v:b)(_,E))}function y(){return m.length>0&&!m.some(_=>_==="object"||_==="array")}function v(_,E){const S=a.name("item"),T=(0,e.checkDataTypes)(m,S,h.opts.strictNumbers,e.DataType.Wrong),A=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${_}--;`,()=>{a.let(S,(0,t._)`${l}[${_}]`),a.if(T,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${S} == "string"`,(0,t._)`${S} += "_"`),a.if((0,t._)`typeof ${A}[${S}] == "number"`,()=>{a.assign(E,(0,t._)`${A}[${S}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${A}[${S}] = ${_}`)})}function b(_,E){const S=(0,n.useFunc)(a,r.default),T=a.name("outer");a.label(T).for((0,t._)`;${_}--;`,()=>a.for((0,t._)`${E} = ${_}; ${E}--;`,()=>a.if((0,t._)`${S}(${l}[${_}], ${l}[${E}])`,()=>{o.error(),a.assign(p,!1).break(T)})))}}};return tN.default=s,tN}var rN={},SEe;function apn(){if(SEe)return rN;SEe=1,Object.defineProperty(rN,"__esModule",{value:!0});const e=Pr(),t=fi(),n=nle(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:l,schemaCode:u,schema:c}=s;l||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${u})`):s.fail((0,e._)`${c} !== ${a}`)}};return rN.default=i,rN}var iN={},TEe;function lpn(){if(TEe)return iN;TEe=1,Object.defineProperty(iN,"__esModule",{value:!0});const e=Pr(),t=fi(),n=nle(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:l,schema:u,schemaCode:c,it:d}=s;if(!l&&u.length===0)throw new Error("enum must have non-empty array");const f=u.length>=d.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(f||l)m=o.let("valid"),s.block$data(m,g);else{if(!Array.isArray(u))throw new Error("ajv implementation error");const v=o.const("vSchema",c);m=(0,e.or)(...u.map((b,_)=>y(v,_)))}s.pass(m);function g(){o.assign(m,!1),o.forOf("v",c,v=>o.if((0,e._)`${p()}(${a}, ${v})`,()=>o.assign(m,!0).break()))}function y(v,b){const _=u[b];return typeof _=="object"&&_!==null?(0,e._)`${p()}(${a}, ${v}[${b}])`:(0,e._)`${a} === ${_}`}}};return iN.default=i,iN}var AEe;function upn(){if(AEe)return WO;AEe=1,Object.defineProperty(WO,"__esModule",{value:!0});const e=Jhn(),t=Zhn(),n=tpn(),r=npn(),i=rpn(),s=ipn(),o=spn(),a=opn(),l=apn(),u=lpn(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},l.default,u.default];return WO.default=c,WO}var sN={},A_={},kEe;function AVe(){if(kEe)return A_;kEe=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.validateAdditionalItems=void 0;const e=Pr(),t=fi(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:l}=o;if(!Array.isArray(l)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,l)}};function i(s,o){const{gen:a,schema:l,data:u,keyword:c,it:d}=s;d.items=!0;const f=a.const("len",(0,e._)`${u}.length`);if(l===!1)s.setParams({len:o.length}),s.pass((0,e._)`${f} <= ${o.length}`);else if(typeof l=="object"&&!(0,t.alwaysValidSchema)(d,l)){const p=a.var("valid",(0,e._)`${f} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,f,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),d.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return A_.validateAdditionalItems=i,A_.default=r,A_}var oN={},k_={},IEe;function kVe(){if(IEe)return k_;IEe=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.validateTuple=void 0;const e=Pr(),t=fi(),n=Yh(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:l,parentSchema:u,data:c,keyword:d,it:f}=s;m(u),f.opts.unevaluated&&a.length&&f.items!==!0&&(f.items=t.mergeEvaluated.items(l,a.length,f.items));const h=l.name("valid"),p=l.const("len",(0,e._)`${c}.length`);a.forEach((g,y)=>{(0,t.alwaysValidSchema)(f,g)||(l.if((0,e._)`${p} > ${y}`,()=>s.subschema({keyword:d,schemaProp:y,dataProp:y},h)),s.ok(h))});function m(g){const{opts:y,errSchemaPath:v}=f,b=a.length,_=b===g.minItems&&(b===g.maxItems||g[o]===!1);if(y.strictTuples&&!_){const E=`"${d}" is ${b}-tuple, but minItems or maxItems/${o} are not specified or different at path "${v}"`;(0,t.checkStrictMode)(f,E,y.strictTuples)}}}return k_.validateTuple=i,k_.default=r,k_}var REe;function cpn(){if(REe)return oN;REe=1,Object.defineProperty(oN,"__esModule",{value:!0});const e=kVe(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return oN.default=t,oN}var aN={},DEe;function dpn(){if(DEe)return aN;DEe=1,Object.defineProperty(aN,"__esModule",{value:!0});const e=Pr(),t=fi(),n=Yh(),r=AVe(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:l,it:u}=o,{prefixItems:c}=l;u.items=!0,!(0,t.alwaysValidSchema)(u,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return aN.default=s,aN}var lN={},PEe;function fpn(){if(PEe)return lN;PEe=1,Object.defineProperty(lN,"__esModule",{value:!0});const e=Pr(),t=fi(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:l,it:u}=i;let c,d;const{minContains:f,maxContains:h}=a;u.opts.next?(c=f===void 0?1:f,d=h):c=1;const p=s.const("len",(0,e._)`${l}.length`);if(i.setParams({min:c,max:d}),d===void 0&&c===0){(0,t.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(d!==void 0&&c>d){(0,t.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(u,o)){let b=(0,e._)`${p} >= ${c}`;d!==void 0&&(b=(0,e._)`${b} && ${p} <= ${d}`),i.pass(b);return}u.items=!0;const m=s.name("valid");d===void 0&&c===1?y(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),d!==void 0&&s.if((0,e._)`${l}.length > 0`,g)):(s.let(m,!1),g()),i.result(m,()=>i.reset());function g(){const b=s.name("_valid"),_=s.let("count",0);y(b,()=>s.if(b,()=>v(_)))}function y(b,_){s.forRange("i",0,p,E=>{i.subschema({keyword:"contains",dataProp:E,dataPropType:t.Type.Num,compositeRule:!0},b),_()})}function v(b){s.code((0,e._)`${b}++`),d===void 0?s.if((0,e._)`${b} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${b} > ${d}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${b} >= ${c}`,()=>s.assign(m,!0)))}}};return lN.default=r,lN}var wq={},OEe;function hpn(){return OEe||(OEe=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pr(),n=fi(),r=Yh();e.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const d=u===1?"property":"properties";return(0,t.str)`must have ${d} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:d}})=>(0,t._)`{property: ${l},
    missingProperty: ${d},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,c]=s(l);o(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const d in l){if(d==="__proto__")continue;const f=Array.isArray(l[d])?u:c;f[d]=l[d]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:d,it:f}=l;if(Object.keys(u).length===0)return;const h=c.let("missing");for(const p in u){const m=u[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,d,p,f.opts.ownProperties);l.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),f.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(l,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(l,m,h)})`),(0,r.reportMissingProp)(l,h),c.else())}}e.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:d,keyword:f,it:h}=l,p=c.name("valid");for(const m in u)(0,n.alwaysValidSchema)(h,u[m])||(c.if((0,r.propertyInData)(c,d,m,h.opts.ownProperties),()=>{const g=l.subschema({keyword:f,schemaProp:m},p);l.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),l.ok(p))}e.validateSchemaDeps=a,e.default=i})(wq)),wq}var uN={},NEe;function ppn(){if(NEe)return uN;NEe=1,Object.defineProperty(uN,"__esModule",{value:!0});const e=Pr(),t=fi(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:l}=i;if((0,t.alwaysValidSchema)(l,o))return;const u=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},u),s.if((0,e.not)(u),()=>{i.error(!0),l.allErrors||s.break()})}),i.ok(u)}};return uN.default=r,uN}var cN={},MEe;function IVe(){if(MEe)return cN;MEe=1,Object.defineProperty(cN,"__esModule",{value:!0});const e=Yh(),t=Pr(),n=S1(),r=fi(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:l,parentSchema:u,data:c,errsCount:d,it:f}=o;if(!d)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=f;if(f.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(f,l))return;const m=(0,e.allSchemaProperties)(u.properties),g=(0,e.allSchemaProperties)(u.patternProperties);y(),o.ok((0,t._)`${d} === ${n.default.errors}`);function y(){a.forIn("key",c,S=>{!m.length&&!g.length?_(S):a.if(v(S),()=>_(S))})}function v(S){let T;if(m.length>8){const A=(0,r.schemaRefOrVal)(f,u.properties,"properties");T=(0,e.isOwnProperty)(a,A,S)}else m.length?T=(0,t.or)(...m.map(A=>(0,t._)`${S} === ${A}`)):T=t.nil;return g.length&&(T=(0,t.or)(T,...g.map(A=>(0,t._)`${(0,e.usePattern)(o,A)}.test(${S})`))),(0,t.not)(T)}function b(S){a.code((0,t._)`delete ${c}[${S}]`)}function _(S){if(p.removeAdditional==="all"||p.removeAdditional&&l===!1){b(S);return}if(l===!1){o.setParams({additionalProperty:S}),o.error(),h||a.break();return}if(typeof l=="object"&&!(0,r.alwaysValidSchema)(f,l)){const T=a.name("valid");p.removeAdditional==="failing"?(E(S,T,!1),a.if((0,t.not)(T),()=>{o.reset(),b(S)})):(E(S,T),h||a.if((0,t.not)(T),()=>a.break()))}}function E(S,T,A){const R={keyword:"additionalProperties",dataProp:S,dataPropType:r.Type.Str};A===!1&&Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(R,T)}}};return cN.default=s,cN}var dN={},$Ee;function mpn(){if($Ee)return dN;$Ee=1,Object.defineProperty(dN,"__esModule",{value:!0});const e=xB(),t=Yh(),n=fi(),r=IVe(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:l,data:u,it:c}=s;c.opts.removeAdditional==="all"&&l.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const d=(0,t.allSchemaProperties)(a);for(const g of d)c.definedProperties.add(g);c.opts.unevaluated&&d.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(d),c.props));const f=d.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(f.length===0)return;const h=o.name("valid");for(const g of f)p(g)?m(g):(o.if((0,t.propertyInData)(o,u,g,c.opts.ownProperties)),m(g),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(g),s.ok(h);function p(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function m(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return dN.default=i,dN}var fN={},FEe;function gpn(){if(FEe)return fN;FEe=1,Object.defineProperty(fN,"__esModule",{value:!0});const e=Yh(),t=Pr(),n=fi(),r=fi(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:l,parentSchema:u,it:c}=s,{opts:d}=c,f=(0,e.allSchemaProperties)(a),h=f.filter(_=>(0,n.alwaysValidSchema)(c,a[_]));if(f.length===0||h.length===f.length&&(!c.opts.unevaluated||c.props===!0))return;const p=d.strictSchema&&!d.allowMatchingProperties&&u.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:g}=c;y();function y(){for(const _ of f)p&&v(_),c.allErrors?b(_):(o.var(m,!0),b(_),o.if(m))}function v(_){for(const E in p)new RegExp(_).test(E)&&(0,n.checkStrictMode)(c,`property ${E} matches pattern ${_} (use allowMatchingProperties)`)}function b(_){o.forIn("key",l,E=>{o.if((0,t._)`${(0,e.usePattern)(s,_)}.test(${E})`,()=>{const S=h.includes(_);S||s.subschema({keyword:"patternProperties",schemaProp:_,dataProp:E,dataPropType:r.Type.Str},m),c.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${E}]`,!0):!S&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return fN.default=i,fN}var hN={},LEe;function ypn(){if(LEe)return hN;LEe=1,Object.defineProperty(hN,"__esModule",{value:!0});const e=fi(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return hN.default=t,hN}var pN={},jEe;function vpn(){if(jEe)return pN;jEe=1,Object.defineProperty(pN,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Yh().validateUnion,error:{message:"must match a schema in anyOf"}};return pN.default=t,pN}var mN={},BEe;function bpn(){if(BEe)return mN;BEe=1,Object.defineProperty(mN,"__esModule",{value:!0});const e=Pr(),t=fi(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:l}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(l.opts.discriminator&&a.discriminator)return;const u=o,c=s.let("valid",!1),d=s.let("passing",null),f=s.name("_valid");i.setParams({passing:d}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){u.forEach((p,m)=>{let g;(0,t.alwaysValidSchema)(l,p)?s.var(f,!0):g=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},f),m>0&&s.if((0,e._)`${f} && ${c}`).assign(c,!1).assign(d,(0,e._)`[${d}, ${m}]`).else(),s.if(f,()=>{s.assign(c,!0),s.assign(d,m),g&&i.mergeEvaluated(g,e.Name)})})}}};return mN.default=r,mN}var gN={},zEe;function wpn(){if(zEe)return gN;zEe=1,Object.defineProperty(gN,"__esModule",{value:!0});const e=fi(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,l)=>{if((0,e.alwaysValidSchema)(s,a))return;const u=n.subschema({keyword:"allOf",schemaProp:l},o);n.ok(o),n.mergeEvaluated(u)})}};return gN.default=t,gN}var yN={},VEe;function xpn(){if(VEe)return yN;VEe=1,Object.defineProperty(yN,"__esModule",{value:!0});const e=Pr(),t=fi(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:l}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(l,'"if" without "then" and "else" is ignored');const u=i(l,"then"),c=i(l,"else");if(!u&&!c)return;const d=o.let("valid",!0),f=o.name("_valid");if(h(),s.reset(),u&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(f,p("then",m),p("else",m))}else u?o.if(f,p("then")):o.if((0,e.not)(f),p("else"));s.pass(d,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},f);s.mergeEvaluated(m)}function p(m,g){return()=>{const y=s.subschema({keyword:m},f);o.assign(d,f),s.mergeValidEvaluated(y,d),g?o.assign(g,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return yN.default=r,yN}var vN={},UEe;function _pn(){if(UEe)return vN;UEe=1,Object.defineProperty(vN,"__esModule",{value:!0});const e=fi(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return vN.default=t,vN}var HEe;function Epn(){if(HEe)return sN;HEe=1,Object.defineProperty(sN,"__esModule",{value:!0});const e=AVe(),t=cpn(),n=kVe(),r=dpn(),i=fpn(),s=hpn(),o=ppn(),a=IVe(),l=mpn(),u=gpn(),c=ypn(),d=vpn(),f=bpn(),h=wpn(),p=xpn(),m=_pn();function g(y=!1){const v=[c.default,d.default,f.default,h.default,p.default,m.default,o.default,a.default,s.default,l.default,u.default];return y?v.push(t.default,r.default):v.push(e.default,n.default),v.push(i.default),v}return sN.default=g,sN}var bN={},wN={},qEe;function Cpn(){if(qEe)return wN;qEe=1,Object.defineProperty(wN,"__esModule",{value:!0});const e=Pr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:l,schemaCode:u,it:c}=r,{opts:d,errSchemaPath:f,schemaEnv:h,self:p}=c;if(!d.validateFormats)return;a?m():g();function m(){const y=s.scopeValue("formats",{ref:p.formats,code:d.code.formats}),v=s.const("fDef",(0,e._)`${y}[${u}]`),b=s.let("fType"),_=s.let("format");s.if((0,e._)`typeof ${v} == "object" && !(${v} instanceof RegExp)`,()=>s.assign(b,(0,e._)`${v}.type || "string"`).assign(_,(0,e._)`${v}.validate`),()=>s.assign(b,(0,e._)`"string"`).assign(_,v)),r.fail$data((0,e.or)(E(),S()));function E(){return d.strictSchema===!1?e.nil:(0,e._)`${u} && !${_}`}function S(){const T=h.$async?(0,e._)`(${v}.async ? await ${_}(${o}) : ${_}(${o}))`:(0,e._)`${_}(${o})`,A=(0,e._)`(typeof ${_} == "function" ? ${T} : ${_}.test(${o}))`;return(0,e._)`${_} && ${_} !== true && ${b} === ${i} && !${A}`}}function g(){const y=p.formats[l];if(!y){E();return}if(y===!0)return;const[v,b,_]=S(y);v===i&&r.pass(T());function E(){if(d.strictSchema===!1){p.logger.warn(A());return}throw new Error(A());function A(){return`unknown format "${l}" ignored in schema at path "${f}"`}}function S(A){const R=A instanceof RegExp?(0,e.regexpCode)(A):d.code.formats?(0,e._)`${d.code.formats}${(0,e.getProperty)(l)}`:void 0,I=s.scopeValue("formats",{key:l,ref:A,code:R});return typeof A=="object"&&!(A instanceof RegExp)?[A.type||"string",A.validate,(0,e._)`${I}.validate`]:["string",A,I]}function T(){if(typeof y=="object"&&!(y instanceof RegExp)&&y.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${_}(${o})`}return typeof b=="function"?(0,e._)`${_}(${o})`:(0,e._)`${_}.test(${o})`}}}};return wN.default=n,wN}var WEe;function Spn(){if(WEe)return bN;WEe=1,Object.defineProperty(bN,"__esModule",{value:!0});const t=[Cpn().default];return bN.default=t,bN}var sb={},GEe;function Tpn(){return GEe||(GEe=1,Object.defineProperty(sb,"__esModule",{value:!0}),sb.contentVocabulary=sb.metadataVocabulary=void 0,sb.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],sb.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),sb}var YEe;function Apn(){if(YEe)return UO;YEe=1,Object.defineProperty(UO,"__esModule",{value:!0});const e=Qhn(),t=upn(),n=Epn(),r=Spn(),i=Tpn(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return UO.default=s,UO}var xN={},P2={},KEe;function kpn(){if(KEe)return P2;KEe=1,Object.defineProperty(P2,"__esModule",{value:!0}),P2.DiscrError=void 0;var e;return(function(t){t.Tag="tag",t.Mapping="mapping"})(e||(P2.DiscrError=e={})),P2}var XEe;function Ipn(){if(XEe)return xN;XEe=1,Object.defineProperty(xN,"__esModule",{value:!0});const e=Pr(),t=kpn(),n=tle(),r=_B(),i=fi(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:l}})=>a===t.DiscrError.Tag?`tag "${l}" must be string`:`value of tag "${l}" must be in oneOf`,params:({params:{discrError:a,tag:l,tagName:u}})=>(0,e._)`{error: ${a}, tag: ${u}, tagValue: ${l}}`},code(a){const{gen:l,data:u,schema:c,parentSchema:d,it:f}=a,{oneOf:h}=d;if(!f.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=l.let("valid",!1),g=l.const("tag",(0,e._)`${u}${(0,e.getProperty)(p)}`);l.if((0,e._)`typeof ${g} == "string"`,()=>y(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:p})),a.ok(m);function y(){const _=b();l.if(!1);for(const E in _)l.elseIf((0,e._)`${g} === ${E}`),l.assign(m,v(_[E]));l.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:p}),l.endIf()}function v(_){const E=l.name("valid"),S=a.subschema({keyword:"oneOf",schemaProp:_},E);return a.mergeEvaluated(S,e.Name),E}function b(){var _;const E={},S=A(d);let T=!0;for(let P=0;P<h.length;P++){let N=h[P];if(N?.$ref&&!(0,i.schemaHasRulesButRef)(N,f.self.RULES)){const O=N.$ref;if(N=n.resolveRef.call(f.self,f.schemaEnv.root,f.baseId,O),N instanceof n.SchemaEnv&&(N=N.schema),N===void 0)throw new r.default(f.opts.uriResolver,f.baseId,O)}const M=(_=N?.properties)===null||_===void 0?void 0:_[p];if(typeof M!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);T=T&&(S||A(N)),R(M,P)}if(!T)throw new Error(`discriminator: "${p}" must be required`);return E;function A({required:P}){return Array.isArray(P)&&P.includes(p)}function R(P,N){if(P.const)I(P.const,N);else if(P.enum)for(const M of P.enum)I(M,N);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function I(P,N){if(typeof P!="string"||P in E)throw new Error(`discriminator: "${p}" values must be unique strings`);E[P]=N}}}};return xN.default=o,xN}const Rpn="http://json-schema.org/draft-07/schema#",Dpn="http://json-schema.org/draft-07/schema#",Ppn="Core schema meta-schema",Opn={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Npn=["object","boolean"],Mpn={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},$pn={$schema:Rpn,$id:Dpn,title:Ppn,definitions:Opn,type:Npn,properties:Mpn,default:!0};var QEe;function Fpn(){return QEe||(QEe=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Yhn(),r=Apn(),i=Ipn(),s=$pn,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=xB();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=Pr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=ele();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=_B();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})})(LO,LO.exports)),LO.exports}var Lpn=Fpn();const rle=Ao(Lpn),ile=Symbol.for("yaml.alias"),sQ=Symbol.for("yaml.document"),lv=Symbol.for("yaml.map"),RVe=Symbol.for("yaml.pair"),fm=Symbol.for("yaml.scalar"),nT=Symbol.for("yaml.seq"),of=Symbol.for("yaml.node.type"),Tx=e=>!!e&&typeof e=="object"&&e[of]===ile,EB=e=>!!e&&typeof e=="object"&&e[of]===sQ,ZD=e=>!!e&&typeof e=="object"&&e[of]===lv,uo=e=>!!e&&typeof e=="object"&&e[of]===RVe,Qi=e=>!!e&&typeof e=="object"&&e[of]===fm,eP=e=>!!e&&typeof e=="object"&&e[of]===nT;function io(e){if(e&&typeof e=="object")switch(e[of]){case lv:case nT:return!0}return!1}function oo(e){if(e&&typeof e=="object")switch(e[of]){case ile:case lv:case fm:case nT:return!0}return!1}const DVe=e=>(Qi(e)||io(e))&&!!e.anchor,yb=Symbol("break visit"),jpn=Symbol("skip children"),mk=Symbol("remove node");function rT(e,t){const n=Bpn(t);EB(e)?lE(null,e.contents,n,Object.freeze([e]))===mk&&(e.contents=null):lE(null,e,n,Object.freeze([]))}rT.BREAK=yb;rT.SKIP=jpn;rT.REMOVE=mk;function lE(e,t,n,r){const i=zpn(e,t,n,r);if(oo(i)||uo(i))return Vpn(e,r,i),lE(e,i,n,r);if(typeof i!="symbol"){if(io(t)){r=Object.freeze(r.concat(t));for(let s=0;s<t.items.length;++s){const o=lE(s,t.items[s],n,r);if(typeof o=="number")s=o-1;else{if(o===yb)return yb;o===mk&&(t.items.splice(s,1),s-=1)}}}else if(uo(t)){r=Object.freeze(r.concat(t));const s=lE("key",t.key,n,r);if(s===yb)return yb;s===mk&&(t.key=null);const o=lE("value",t.value,n,r);if(o===yb)return yb;o===mk&&(t.value=null)}}return i}function Bpn(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function zpn(e,t,n,r){if(typeof n=="function")return n(e,t,r);if(ZD(t))return n.Map?.(e,t,r);if(eP(t))return n.Seq?.(e,t,r);if(uo(t))return n.Pair?.(e,t,r);if(Qi(t))return n.Scalar?.(e,t,r);if(Tx(t))return n.Alias?.(e,t,r)}function Vpn(e,t,n){const r=t[t.length-1];if(io(r))r.items[e]=n;else if(uo(r))e==="key"?r.key=n:r.value=n;else if(EB(r))r.contents=n;else{const i=Tx(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${i} parent`)}}const Upn={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Hpn=e=>e.replace(/[!,[\]{}]/g,t=>Upn[t]);class Kl{constructor(t,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Kl.defaultYaml,t),this.tags=Object.assign({},Kl.defaultTags,n)}clone(){const t=new Kl(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new Kl(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Kl.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Kl.defaultTags);break}return t}add(t,n){this.atNextDocument&&(this.yaml={explicit:Kl.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Kl.defaultTags),this.atNextDocument=!1);const r=t.trim().split(/[ \t]+/),i=r.shift();switch(i){case"%TAG":{if(r.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),r.length<2))return!1;const[s,o]=r;return this.tags[s]=o,!0}case"%YAML":{if(this.yaml.explicit=!0,r.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[s]=r;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const o=/^\d+\.\d+$/.test(s);return n(6,`Unsupported YAML version ${s}`,o),!1}}default:return n(0,`Unknown directive ${i}`,!0),!1}}tagName(t,n){if(t==="!")return"!";if(t[0]!=="!")return n(`Not a valid tag: ${t}`),null;if(t[1]==="<"){const o=t.slice(2,-1);return o==="!"||o==="!!"?(n(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&n("Verbatim tags must end with a >"),o)}const[,r,i]=t.match(/^(.*!)([^!]*)$/s);i||n(`The ${t} tag has no suffix`);const s=this.tags[r];if(s)try{return s+decodeURIComponent(i)}catch(o){return n(String(o)),null}return r==="!"?t:(n(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[n,r]of Object.entries(this.tags))if(t.startsWith(r))return n+Hpn(t.substring(r.length));return t[0]==="!"?t:`!<${t}>`}toString(t){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],r=Object.entries(this.tags);let i;if(t&&r.length>0&&oo(t.contents)){const s={};rT(t.contents,(o,a)=>{oo(a)&&a.tag&&(s[a.tag]=!0)}),i=Object.keys(s)}else i=[];for(const[s,o]of r)s==="!!"&&o==="tag:yaml.org,2002:"||(!t||i.some(a=>a.startsWith(o)))&&n.push(`%TAG ${s} ${o}`);return n.join(`
`)}}Kl.defaultYaml={explicit:!1,version:"1.2"};Kl.defaultTags={"!!":"tag:yaml.org,2002:"};function PVe(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(n)}return!0}function OVe(e){const t=new Set;return rT(e,{Value(n,r){r.anchor&&t.add(r.anchor)}}),t}function NVe(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}function qpn(e,t){const n=[],r=new Map;let i=null;return{onAnchor:s=>{n.push(s),i??(i=OVe(e));const o=NVe(t,i);return i.add(o),o},setAnchors:()=>{for(const s of n){const o=r.get(s);if(typeof o=="object"&&o.anchor&&(Qi(o.node)||io(o.node)))o.node.anchor=o.anchor;else{const a=new Error("Failed to resolve repeated object (this should not happen)");throw a.source=s,a}}},sourceObjects:r}}function uE(e,t,n,r){if(r&&typeof r=="object")if(Array.isArray(r))for(let i=0,s=r.length;i<s;++i){const o=r[i],a=uE(e,r,String(i),o);a===void 0?delete r[i]:a!==o&&(r[i]=a)}else if(r instanceof Map)for(const i of Array.from(r.keys())){const s=r.get(i),o=uE(e,r,i,s);o===void 0?r.delete(i):o!==s&&r.set(i,o)}else if(r instanceof Set)for(const i of Array.from(r)){const s=uE(e,r,i,i);s===void 0?r.delete(i):s!==i&&(r.delete(i),r.add(s))}else for(const[i,s]of Object.entries(r)){const o=uE(e,r,i,s);o===void 0?delete r[i]:o!==s&&(r[i]=o)}return e.call(t,n,r)}function qd(e,t,n){if(Array.isArray(e))return e.map((r,i)=>qd(r,String(i),n));if(e&&typeof e.toJSON=="function"){if(!n||!DVe(e))return e.toJSON(t,n);const r={aliasCount:0,count:1,res:void 0};n.anchors.set(e,r),n.onCreate=s=>{r.res=s,delete n.onCreate};const i=e.toJSON(t,n);return n.onCreate&&n.onCreate(i),i}return typeof e=="bigint"&&!n?.keep?Number(e):e}class sle{constructor(t){Object.defineProperty(this,of,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:s}={}){if(!EB(t))throw new TypeError("A document argument is required");const o={anchors:new Map,doc:t,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=qd(this,"",o);if(typeof i=="function")for(const{count:l,res:u}of o.anchors.values())i(u,l);return typeof s=="function"?uE(s,{"":a},"",a):a}}class ole extends sle{constructor(t){super(ile),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,n){let r;n?.aliasResolveCache?r=n.aliasResolveCache:(r=[],rT(t,{Node:(s,o)=>{(Tx(o)||DVe(o))&&r.push(o)}}),n&&(n.aliasResolveCache=r));let i;for(const s of r){if(s===this)break;s.anchor===this.source&&(i=s)}return i}toJSON(t,n){if(!n)return{source:this.source};const{anchors:r,doc:i,maxAliasCount:s}=n,o=this.resolve(i,n);if(!o){const l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let a=r.get(o);if(a||(qd(o,null,n),a=r.get(o)),!a||a.res===void 0){const l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(s>=0&&(a.count+=1,a.aliasCount===0&&(a.aliasCount=DM(i,o,r)),a.count*a.aliasCount>s)){const l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return a.res}toString(t,n,r){const i=`*${this.source}`;if(t){if(PVe(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(t.implicitKey)return`${i} `}return i}}function DM(e,t,n){if(Tx(t)){const r=t.resolve(e),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(io(t)){let r=0;for(const i of t.items){const s=DM(e,i,n);s>r&&(r=s)}return r}else if(uo(t)){const r=DM(e,t.key,n),i=DM(e,t.value,n);return Math.max(r,i)}return 1}const MVe=e=>!e||typeof e!="function"&&typeof e!="object";class ur extends sle{constructor(t){super(fm),this.value=t}toJSON(t,n){return n?.keep?this.value:qd(this.value,t,n)}toString(){return String(this.value)}}ur.BLOCK_FOLDED="BLOCK_FOLDED";ur.BLOCK_LITERAL="BLOCK_LITERAL";ur.PLAIN="PLAIN";ur.QUOTE_DOUBLE="QUOTE_DOUBLE";ur.QUOTE_SINGLE="QUOTE_SINGLE";const Wpn="tag:yaml.org,2002:";function Gpn(e,t,n){if(t){const r=n.filter(s=>s.tag===t),i=r.find(s=>!s.format)??r[0];if(!i)throw new Error(`Tag ${t} not found`);return i}return n.find(r=>r.identify?.(e)&&!r.format)}function YI(e,t,n){if(EB(e)&&(e=e.contents),oo(e))return e;if(uo(e)){const d=n.schema[lv].createNode?.(n.schema,null,n);return d.items.push(e),d}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt<"u"&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:s,schema:o,sourceObjects:a}=n;let l;if(r&&e&&typeof e=="object"){if(l=a.get(e),l)return l.anchor??(l.anchor=i(e)),new ole(l.anchor);l={anchor:null,node:null},a.set(e,l)}t?.startsWith("!!")&&(t=Wpn+t.slice(2));let u=Gpn(e,t,o.tags);if(!u){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){const d=new ur(e);return l&&(l.node=d),d}u=e instanceof Map?o[lv]:Symbol.iterator in Object(e)?o[nT]:o[lv]}s&&(s(u),delete n.onTagObj);const c=u?.createNode?u.createNode(n.schema,e,n):typeof u?.nodeClass?.from=="function"?u.nodeClass.from(n.schema,e,n):new ur(e);return t?c.tag=t:u.default||(c.tag=u.tag),l&&(l.node=c),c}function z$(e,t,n){let r=n;for(let i=t.length-1;i>=0;--i){const s=t[i];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const o=[];o[s]=r,r=o}else r=new Map([[s,r]])}return YI(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const IA=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done;class $Ve extends sle{constructor(t,n){super(t),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(t){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(n.schema=t),n.items=n.items.map(r=>oo(r)||uo(r)?r.clone(t):r),this.range&&(n.range=this.range.slice()),n}addIn(t,n){if(IA(t))this.add(n);else{const[r,...i]=t,s=this.get(r,!0);if(io(s))s.addIn(i,n);else if(s===void 0&&this.schema)this.set(r,z$(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}deleteIn(t){const[n,...r]=t;if(r.length===0)return this.delete(n);const i=this.get(n,!0);if(io(i))return i.deleteIn(r);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}getIn(t,n){const[r,...i]=t,s=this.get(r,!0);return i.length===0?!n&&Qi(s)?s.value:s:io(s)?s.getIn(i,n):void 0}hasAllNullValues(t){return this.items.every(n=>{if(!uo(n))return!1;const r=n.value;return r==null||t&&Qi(r)&&r.value==null&&!r.commentBefore&&!r.comment&&!r.tag})}hasIn(t){const[n,...r]=t;if(r.length===0)return this.has(n);const i=this.get(n,!0);return io(i)?i.hasIn(r):!1}setIn(t,n){const[r,...i]=t;if(i.length===0)this.set(r,n);else{const s=this.get(r,!0);if(io(s))s.setIn(i,n);else if(s===void 0&&this.schema)this.set(r,z$(this.schema,i,n));else throw new Error(`Expected YAML collection at ${r}. Remaining path: ${i}`)}}}const Ypn=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Eg(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const Lb=(e,t,n)=>e.endsWith(`
`)?Eg(n,t):n.includes(`
`)?`
`+Eg(n,t):(e.endsWith(" ")?"":" ")+n,FVe="flow",oQ="block",PM="quoted";function CB(e,t,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:s=20,onFold:o,onOverflow:a}={}){if(!i||i<0)return e;i<s&&(s=0);const l=Math.max(1+s,1+i-t.length);if(e.length<=l)return e;const u=[],c={};let d=i-t.length;typeof r=="number"&&(r>i-Math.max(2,s)?u.push(0):d=i-r);let f,h,p=!1,m=-1,g=-1,y=-1;n===oQ&&(m=JEe(e,m,t.length),m!==-1&&(d=m+l));for(let b;b=e[m+=1];){if(n===PM&&b==="\\"){switch(g=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if(b===`
`)n===oQ&&(m=JEe(e,m,t.length)),d=m+t.length+l,f=void 0;else{if(b===" "&&h&&h!==" "&&h!==`
`&&h!=="	"){const _=e[m+1];_&&_!==" "&&_!==`
`&&_!=="	"&&(f=m)}if(m>=d)if(f)u.push(f),d=f+l,f=void 0;else if(n===PM){for(;h===" "||h==="	";)h=b,b=e[m+=1],p=!0;const _=m>y+1?m-2:g-1;if(c[_])return e;u.push(_),c[_]=!0,d=_+l,f=void 0}else p=!0}h=b}if(p&&a&&a(),u.length===0)return e;o&&o();let v=e.slice(0,u[0]);for(let b=0;b<u.length;++b){const _=u[b],E=u[b+1]||e.length;_===0?v=`
${t}${e.slice(0,E)}`:(n===PM&&c[_]&&(v+=`${e[_]}\\`),v+=`
${t}${e.slice(_+1,E)}`)}return v}function JEe(e,t,n){let r=t,i=t+1,s=e[i];for(;s===" "||s==="	";)if(t<i+n)s=e[++t];else{do s=e[++t];while(s&&s!==`
`);r=t,i=t+1,s=e[i]}return r}const SB=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),TB=e=>/^(%|---|\.\.\.)/m.test(e);function Kpn(e,t,n){if(!t||t<0)return!1;const r=t-n,i=e.length;if(i<=r)return!1;for(let s=0,o=0;s<i;++s)if(e[s]===`
`){if(s-o>r)return!0;if(o=s+1,i-o<=r)return!1}return!0}function gk(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,s=t.indent||(TB(e)?"  ":"");let o="",a=0;for(let l=0,u=n[l];u;u=n[++l])if(u===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(o+=n.slice(a,l)+"\\ ",l+=1,a=l,u="\\"),u==="\\")switch(n[l+1]){case"u":{o+=n.slice(a,l);const c=n.substr(l+2,4);switch(c){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:c.substr(0,2)==="00"?o+="\\x"+c.substr(2):o+=n.substr(l,6)}l+=5,a=l+1}break;case"n":if(r||n[l+2]==='"'||n.length<i)l+=1;else{for(o+=n.slice(a,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)o+=`
`,l+=2;o+=s,n[l+2]===" "&&(o+="\\"),l+=1,a=l+1}break;default:l+=1}return o=a?o+n.slice(a):n,r?o:CB(o,s,PM,SB(t,!1))}function aQ(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return gk(e,t);const n=t.indent||(TB(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return t.implicitKey?r:CB(r,n,FVe,SB(t,!1))}function cE(e,t){const{singleQuote:n}=t.options;let r;if(n===!1)r=gk;else{const i=e.includes('"'),s=e.includes("'");i&&!s?r=aQ:s&&!i?r=gk:r=n?aQ:gk}return r(e,t)}let lQ;try{lQ=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{lQ=/\n+(?!\n|$)/g}function OM({comment:e,type:t,value:n},r,i,s){const{blockQuote:o,commentString:a,lineWidth:l}=r.options;if(!o||/\n[\t ]+$/.test(n))return cE(n,r);const u=r.indent||(r.forceBlockIndent||TB(n)?"  ":""),c=o==="literal"?!0:o==="folded"||t===ur.BLOCK_FOLDED?!1:t===ur.BLOCK_LITERAL?!0:!Kpn(n,l,u.length);if(!n)return c?`|
`:`>
`;let d,f;for(f=n.length;f>0;--f){const E=n[f-1];if(E!==`
`&&E!=="	"&&E!==" ")break}let h=n.substring(f);const p=h.indexOf(`
`);p===-1?d="-":n===h||p!==h.length-1?(d="+",s&&s()):d="",h&&(n=n.slice(0,-h.length),h[h.length-1]===`
`&&(h=h.slice(0,-1)),h=h.replace(lQ,`$&${u}`));let m=!1,g,y=-1;for(g=0;g<n.length;++g){const E=n[g];if(E===" ")m=!0;else if(E===`
`)y=g;else break}let v=n.substring(0,y<g?y+1:g);v&&(n=n.substring(v.length),v=v.replace(/\n+/g,`$&${u}`));let _=(m?u?"2":"1":"")+d;if(e&&(_+=" "+a(e.replace(/ ?[\r\n]+/g," ")),i&&i()),!c){const E=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);let S=!1;const T=SB(r,!0);o!=="folded"&&t!==ur.BLOCK_FOLDED&&(T.onOverflow=()=>{S=!0});const A=CB(`${v}${E}${h}`,u,oQ,T);if(!S)return`>${_}
${u}${A}`}return n=n.replace(/\n+/g,`$&${u}`),`|${_}
${u}${v}${n}${h}`}function Xpn(e,t,n,r){const{type:i,value:s}=e,{actualString:o,implicitKey:a,indent:l,indentStep:u,inFlow:c}=t;if(a&&s.includes(`
`)||c&&/[[\]{},]/.test(s))return cE(s,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return a||c||!s.includes(`
`)?cE(s,t):OM(e,t,n,r);if(!a&&!c&&i!==ur.PLAIN&&s.includes(`
`))return OM(e,t,n,r);if(TB(s)){if(l==="")return t.forceBlockIndent=!0,OM(e,t,n,r);if(a&&l===u)return cE(s,t)}const d=s.replace(/\n+/g,`$&
${l}`);if(o){const f=m=>m.default&&m.tag!=="tag:yaml.org,2002:str"&&m.test?.test(d),{compat:h,tags:p}=t.doc.schema;if(p.some(f)||h?.some(f))return cE(s,t)}return a?d:CB(d,l,FVe,SB(t,!1))}function ale(e,t,n,r){const{implicitKey:i,inFlow:s}=t,o=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==ur.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=ur.QUOTE_DOUBLE);const l=c=>{switch(c){case ur.BLOCK_FOLDED:case ur.BLOCK_LITERAL:return i||s?cE(o.value,t):OM(o,t,n,r);case ur.QUOTE_DOUBLE:return gk(o.value,t);case ur.QUOTE_SINGLE:return aQ(o.value,t);case ur.PLAIN:return Xpn(o,t,n,r);default:return null}};let u=l(a);if(u===null){const{defaultKeyType:c,defaultStringType:d}=t.options,f=i&&c||d;if(u=l(f),u===null)throw new Error(`Unsupported default string type ${f}`)}return u}function LVe(e,t){const n=Object.assign({blockQuote:!0,commentString:Ypn,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function Qpn(e,t){if(t.tag){const i=e.filter(s=>s.tag===t.tag);if(i.length>0)return i.find(s=>s.format===t.format)??i[0]}let n,r;if(Qi(t)){r=t.value;let i=e.filter(s=>s.identify?.(r));if(i.length>1){const s=i.filter(o=>o.test);s.length>0&&(i=s)}n=i.find(s=>s.format===t.format)??i.find(s=>!s.format)}else r=t,n=e.find(i=>i.nodeClass&&r instanceof i.nodeClass);if(!n){const i=r?.constructor?.name??(r===null?"null":typeof r);throw new Error(`Tag not resolved for ${i} value`)}return n}function Jpn(e,t,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],s=(Qi(e)||io(e))&&e.anchor;s&&PVe(s)&&(n.add(s),i.push(`&${s}`));const o=e.tag??(t.default?null:t.tag);return o&&i.push(r.directives.tagString(o)),i.join(" ")}function jC(e,t,n,r){if(uo(e))return e.toString(t,n,r);if(Tx(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i;const s=oo(e)?e:t.doc.createNode(e,{onTagObj:l=>i=l});i??(i=Qpn(t.doc.schema.tags,s));const o=Jpn(s,i,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const a=typeof i.stringify=="function"?i.stringify(s,t,n,r):Qi(s)?ale(s,t,n,r):s.toString(t,n,r);return o?Qi(s)||a[0]==="{"||a[0]==="["?`${o} ${a}`:`${o}
${t.indent}${a}`:a}function Zpn({key:e,value:t},n,r,i){const{allNullValues:s,doc:o,indent:a,indentStep:l,options:{commentString:u,indentSeq:c,simpleKeys:d}}=n;let f=oo(e)&&e.comment||null;if(d){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(io(e)||!oo(e)&&typeof e=="object"){const T="With simple keys, collection cannot be used as a key value";throw new Error(T)}}let h=!d&&(!e||f&&t==null&&!n.inFlow||io(e)||(Qi(e)?e.type===ur.BLOCK_FOLDED||e.type===ur.BLOCK_LITERAL:typeof e=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!h&&(d||!s),indent:a+l});let p=!1,m=!1,g=jC(e,n,()=>p=!0,()=>m=!0);if(!h&&!n.inFlow&&g.length>1024){if(d)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");h=!0}if(n.inFlow){if(s||t==null)return p&&r&&r(),g===""?"?":h?`? ${g}`:g}else if(s&&!d||t==null&&h)return g=`? ${g}`,f&&!p?g+=Lb(g,n.indent,u(f)):m&&i&&i(),g;p&&(f=null),h?(f&&(g+=Lb(g,n.indent,u(f))),g=`? ${g}
${a}:`):(g=`${g}:`,f&&(g+=Lb(g,n.indent,u(f))));let y,v,b;oo(t)?(y=!!t.spaceBefore,v=t.commentBefore,b=t.comment):(y=!1,v=null,b=null,t&&typeof t=="object"&&(t=o.createNode(t))),n.implicitKey=!1,!h&&!f&&Qi(t)&&(n.indentAtStart=g.length+1),m=!1,!c&&l.length>=2&&!n.inFlow&&!h&&eP(t)&&!t.flow&&!t.tag&&!t.anchor&&(n.indent=n.indent.substring(2));let _=!1;const E=jC(t,n,()=>_=!0,()=>m=!0);let S=" ";if(f||y||v){if(S=y?`
`:"",v){const T=u(v);S+=`
${Eg(T,n.indent)}`}E===""&&!n.inFlow?S===`
`&&(S=`

`):S+=`
${n.indent}`}else if(!h&&io(t)){const T=E[0],A=E.indexOf(`
`),R=A!==-1,I=n.inFlow??t.flow??t.items.length===0;if(R||!I){let P=!1;if(R&&(T==="&"||T==="!")){let N=E.indexOf(" ");T==="&"&&N!==-1&&N<A&&E[N+1]==="!"&&(N=E.indexOf(" ",N+1)),(N===-1||A<N)&&(P=!0)}P||(S=`
${n.indent}`)}}else(E===""||E[0]===`
`)&&(S="");return g+=S+E,n.inFlow?_&&r&&r():b&&!_?g+=Lb(g,n.indent,u(b)):m&&i&&i(),g}function emn(e,t){(e==="debug"||e==="warn")&&console.warn(t)}const _N="<<",Lg={identify:e=>e===_N||typeof e=="symbol"&&e.description===_N,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ur(Symbol(_N)),{addToJSMap:jVe}),stringify:()=>_N},tmn=(e,t)=>(Lg.identify(t)||Qi(t)&&(!t.type||t.type===ur.PLAIN)&&Lg.identify(t.value))&&e?.doc.schema.tags.some(n=>n.tag===Lg.tag&&n.default);function jVe(e,t,n){if(n=e&&Tx(n)?n.resolve(e.doc):n,eP(n))for(const r of n.items)xq(e,t,r);else if(Array.isArray(n))for(const r of n)xq(e,t,r);else xq(e,t,n)}function xq(e,t,n){const r=e&&Tx(n)?n.resolve(e.doc):n;if(!ZD(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,e,Map);for(const[s,o]of i)t instanceof Map?t.has(s)||t.set(s,o):t instanceof Set?t.add(s):Object.prototype.hasOwnProperty.call(t,s)||Object.defineProperty(t,s,{value:o,writable:!0,enumerable:!0,configurable:!0});return t}function BVe(e,t,{key:n,value:r}){if(oo(n)&&n.addToJSMap)n.addToJSMap(e,t,r);else if(tmn(e,n))jVe(e,t,r);else{const i=qd(n,"",e);if(t instanceof Map)t.set(i,qd(r,i,e));else if(t instanceof Set)t.add(i);else{const s=nmn(n,i,e),o=qd(r,s,e);s in t?Object.defineProperty(t,s,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[s]=o}}return t}function nmn(e,t,n){if(t===null)return"";if(typeof t!="object")return String(t);if(oo(e)&&n?.doc){const r=LVe(n.doc,{});r.anchors=new Set;for(const s of n.anchors.keys())r.anchors.add(s.anchor);r.inFlow=!0,r.inStringifyKey=!0;const i=e.toString(r);if(!n.mapKeyWarned){let s=JSON.stringify(i);s.length>40&&(s=s.substring(0,36)+'..."'),emn(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return i}return JSON.stringify(t)}function lle(e,t,n){const r=YI(e,void 0,n),i=YI(t,void 0,n);return new du(r,i)}class du{constructor(t,n=null){Object.defineProperty(this,of,{value:RVe}),this.key=t,this.value=n}clone(t){let{key:n,value:r}=this;return oo(n)&&(n=n.clone(t)),oo(r)&&(r=r.clone(t)),new du(n,r)}toJSON(t,n){const r=n?.mapAsMap?new Map:{};return BVe(n,r,this)}toString(t,n,r){return t?.doc?Zpn(this,t,n,r):JSON.stringify(this)}}function zVe(e,t,n){return(t.inFlow??e.flow?imn:rmn)(e,t,n)}function rmn({comment:e,items:t},n,{blockItemPrefix:r,flowChars:i,itemIndent:s,onChompKeep:o,onComment:a}){const{indent:l,options:{commentString:u}}=n,c=Object.assign({},n,{indent:s,type:null});let d=!1;const f=[];for(let p=0;p<t.length;++p){const m=t[p];let g=null;if(oo(m))!d&&m.spaceBefore&&f.push(""),V$(n,f,m.commentBefore,d),m.comment&&(g=m.comment);else if(uo(m)){const v=oo(m.key)?m.key:null;v&&(!d&&v.spaceBefore&&f.push(""),V$(n,f,v.commentBefore,d))}d=!1;let y=jC(m,c,()=>g=null,()=>d=!0);g&&(y+=Lb(y,s,u(g))),d&&g&&(d=!1),f.push(r+y)}let h;if(f.length===0)h=i.start+i.end;else{h=f[0];for(let p=1;p<f.length;++p){const m=f[p];h+=m?`
${l}${m}`:`
`}}return e?(h+=`
`+Eg(u(e),l),a&&a()):d&&o&&o(),h}function imn({items:e},t,{flowChars:n,itemIndent:r}){const{indent:i,indentStep:s,flowCollectionPadding:o,options:{commentString:a}}=t;r+=s;const l=Object.assign({},t,{indent:r,inFlow:!0,type:null});let u=!1,c=0;const d=[];for(let p=0;p<e.length;++p){const m=e[p];let g=null;if(oo(m))m.spaceBefore&&d.push(""),V$(t,d,m.commentBefore,!1),m.comment&&(g=m.comment);else if(uo(m)){const v=oo(m.key)?m.key:null;v&&(v.spaceBefore&&d.push(""),V$(t,d,v.commentBefore,!1),v.comment&&(u=!0));const b=oo(m.value)?m.value:null;b?(b.comment&&(g=b.comment),b.commentBefore&&(u=!0)):m.value==null&&v?.comment&&(g=v.comment)}g&&(u=!0);let y=jC(m,l,()=>g=null);p<e.length-1&&(y+=","),g&&(y+=Lb(y,r,a(g))),!u&&(d.length>c||y.includes(`
`))&&(u=!0),d.push(y),c=d.length}const{start:f,end:h}=n;if(d.length===0)return f+h;if(!u){const p=d.reduce((m,g)=>m+g.length+2,2);u=t.options.lineWidth>0&&p>t.options.lineWidth}if(u){let p=f;for(const m of d)p+=m?`
${s}${i}${m}`:`
`;return`${p}
${i}${h}`}else return`${f}${o}${d.join(" ")}${o}${h}`}function V$({indent:e,options:{commentString:t}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const s=Eg(t(r),e);n.push(s.trimStart())}}function jb(e,t){const n=Qi(t)?t.value:t;for(const r of e)if(uo(r)&&(r.key===t||r.key===n||Qi(r.key)&&r.key.value===n))return r}class Pd extends $Ve{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(lv,t),this.items=[]}static from(t,n,r){const{keepUndefined:i,replacer:s}=r,o=new this(t),a=(l,u)=>{if(typeof s=="function")u=s.call(n,l,u);else if(Array.isArray(s)&&!s.includes(l))return;(u!==void 0||i)&&o.items.push(lle(l,u,r))};if(n instanceof Map)for(const[l,u]of n)a(l,u);else if(n&&typeof n=="object")for(const l of Object.keys(n))a(l,n[l]);return typeof t.sortMapEntries=="function"&&o.items.sort(t.sortMapEntries),o}add(t,n){let r;uo(t)?r=t:!t||typeof t!="object"||!("key"in t)?r=new du(t,t?.value):r=new du(t.key,t.value);const i=jb(this.items,r.key),s=this.schema?.sortMapEntries;if(i){if(!n)throw new Error(`Key ${r.key} already set`);Qi(i.value)&&MVe(r.value)?i.value.value=r.value:i.value=r.value}else if(s){const o=this.items.findIndex(a=>s(r,a)<0);o===-1?this.items.push(r):this.items.splice(o,0,r)}else this.items.push(r)}delete(t){const n=jb(this.items,t);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(t,n){const i=jb(this.items,t)?.value;return(!n&&Qi(i)?i.value:i)??void 0}has(t){return!!jb(this.items,t)}set(t,n){this.add(new du(t,n),!0)}toJSON(t,n,r){const i=r?new r:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(i);for(const s of this.items)BVe(n,i,s);return i}toString(t,n,r){if(!t)return JSON.stringify(this);for(const i of this.items)if(!uo(i))throw new Error(`Map items must all be pairs; found ${JSON.stringify(i)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),zVe(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:r,onComment:n})}}const iT={collection:"map",default:!0,nodeClass:Pd,tag:"tag:yaml.org,2002:map",resolve(e,t){return ZD(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,n)=>Pd.from(e,t,n)};class Fw extends $Ve{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(nT,t),this.items=[]}add(t){this.items.push(t)}delete(t){const n=EN(t);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(t,n){const r=EN(t);if(typeof r!="number")return;const i=this.items[r];return!n&&Qi(i)?i.value:i}has(t){const n=EN(t);return typeof n=="number"&&n<this.items.length}set(t,n){const r=EN(t);if(typeof r!="number")throw new Error(`Expected a valid index, not ${t}.`);const i=this.items[r];Qi(i)&&MVe(n)?i.value=n:this.items[r]=n}toJSON(t,n){const r=[];n?.onCreate&&n.onCreate(r);let i=0;for(const s of this.items)r.push(qd(s,String(i++),n));return r}toString(t,n,r){return t?zVe(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:r,onComment:n}):JSON.stringify(this)}static from(t,n,r){const{replacer:i}=r,s=new this(t);if(n&&Symbol.iterator in Object(n)){let o=0;for(let a of n){if(typeof i=="function"){const l=n instanceof Set?a:String(o++);a=i.call(n,l,a)}s.items.push(YI(a,void 0,r))}}return s}}function EN(e){let t=Qi(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}const sT={collection:"seq",default:!0,nodeClass:Fw,tag:"tag:yaml.org,2002:seq",resolve(e,t){return eP(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,n)=>Fw.from(e,t,n)},AB={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,n,r){return t=Object.assign({actualString:!0},t),ale(e,t,n,r)}},kB={identify:e=>e==null,createNode:()=>new ur(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ur(null),stringify:({source:e},t)=>typeof e=="string"&&kB.test.test(e)?e:t.options.nullStr},ule={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new ur(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},n){if(e&&ule.test.test(e)){const r=e[0]==="t"||e[0]==="T";if(t===r)return e}return t?n.options.trueStr:n.options.falseStr}};function Kh({format:e,minFractionDigits:t,tag:n,value:r}){if(typeof r=="bigint")return String(r);const i=typeof r=="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let s=JSON.stringify(r);if(!e&&t&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let o=s.indexOf(".");o<0&&(o=s.length,s+=".");let a=t-(s.length-o-1);for(;a-- >0;)s+="0"}return s}const VVe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Kh},UVe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Kh(e)}},HVe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new ur(parseFloat(e)),n=e.indexOf(".");return n!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-n-1),t},stringify:Kh},IB=e=>typeof e=="bigint"||Number.isInteger(e),cle=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function qVe(e,t,n){const{value:r}=e;return IB(r)&&r>=0?n+r.toString(t):Kh(e)}const WVe={identify:e=>IB(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>cle(e,2,8,n),stringify:e=>qVe(e,8,"0o")},GVe={identify:IB,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>cle(e,0,10,n),stringify:Kh},YVe={identify:e=>IB(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>cle(e,2,16,n),stringify:e=>qVe(e,16,"0x")},smn=[iT,sT,AB,kB,ule,WVe,GVe,YVe,VVe,UVe,HVe];function ZEe(e){return typeof e=="bigint"||Number.isInteger(e)}const CN=({value:e})=>JSON.stringify(e),omn=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:CN},{identify:e=>e==null,createNode:()=>new ur(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:CN},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:CN},{identify:ZEe,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>ZEe(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:CN}],amn={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},lmn=[iT,sT].concat(omn,amn),dle={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){const n=atob(e.replace(/[\n\r]/g,"")),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,i,s){if(!n)return"";const o=n;let a;if(typeof btoa=="function"){let l="";for(let u=0;u<o.length;++u)l+=String.fromCharCode(o[u]);a=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t??(t=ur.BLOCK_LITERAL),t!==ur.QUOTE_DOUBLE){const l=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),u=Math.ceil(a.length/l),c=new Array(u);for(let d=0,f=0;d<u;++d,f+=l)c[d]=a.substr(f,l);a=c.join(t===ur.BLOCK_LITERAL?`
`:" ")}return ale({comment:e,type:t,value:a},r,i,s)}};function KVe(e,t){if(eP(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!uo(r)){if(ZD(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const i=r.items[0]||new du(new ur(null));if(r.commentBefore&&(i.key.commentBefore=i.key.commentBefore?`${r.commentBefore}
${i.key.commentBefore}`:r.commentBefore),r.comment){const s=i.value??i.key;s.comment=s.comment?`${r.comment}
${s.comment}`:r.comment}r=i}e.items[n]=uo(r)?r:new du(r)}}else t("Expected a sequence for this tag");return e}function XVe(e,t,n){const{replacer:r}=n,i=new Fw(e);i.tag="tag:yaml.org,2002:pairs";let s=0;if(t&&Symbol.iterator in Object(t))for(let o of t){typeof r=="function"&&(o=r.call(t,String(s++),o));let a,l;if(Array.isArray(o))if(o.length===2)a=o[0],l=o[1];else throw new TypeError(`Expected [key, value] tuple: ${o}`);else if(o&&o instanceof Object){const u=Object.keys(o);if(u.length===1)a=u[0],l=o[a];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else a=o;i.items.push(lle(a,l,n))}return i}const fle={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:KVe,createNode:XVe};class NE extends Fw{constructor(){super(),this.add=Pd.prototype.add.bind(this),this.delete=Pd.prototype.delete.bind(this),this.get=Pd.prototype.get.bind(this),this.has=Pd.prototype.has.bind(this),this.set=Pd.prototype.set.bind(this),this.tag=NE.tag}toJSON(t,n){if(!n)return super.toJSON(t);const r=new Map;n?.onCreate&&n.onCreate(r);for(const i of this.items){let s,o;if(uo(i)?(s=qd(i.key,"",n),o=qd(i.value,s,n)):s=qd(i,"",n),r.has(s))throw new Error("Ordered maps must not include duplicate keys");r.set(s,o)}return r}static from(t,n,r){const i=XVe(t,n,r),s=new this;return s.items=i.items,s}}NE.tag="tag:yaml.org,2002:omap";const hle={collection:"seq",identify:e=>e instanceof Map,nodeClass:NE,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=KVe(e,t),r=[];for(const{key:i}of n.items)Qi(i)&&(r.includes(i.value)?t(`Ordered maps must not include duplicate keys: ${i.value}`):r.push(i.value));return Object.assign(new NE,n)},createNode:(e,t,n)=>NE.from(e,t,n)};function QVe({value:e,source:t},n){return t&&(e?JVe:ZVe).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const JVe={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ur(!0),stringify:QVe},ZVe={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ur(!1),stringify:QVe},umn={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Kh},cmn={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Kh(e)}},dmn={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new ur(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(n!==-1){const r=e.substring(n+1).replace(/_/g,"");r[r.length-1]==="0"&&(t.minFractionDigits=r.length)}return t},stringify:Kh},tP=e=>typeof e=="bigint"||Number.isInteger(e);function RB(e,t,n,{intAsBigInt:r}){const i=e[0];if((i==="-"||i==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const o=BigInt(e);return i==="-"?BigInt(-1)*o:o}const s=parseInt(e,n);return i==="-"?-1*s:s}function ple(e,t,n){const{value:r}=e;if(tP(r)){const i=r.toString(t);return r<0?"-"+n+i.substr(1):n+i}return Kh(e)}const fmn={identify:tP,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>RB(e,2,2,n),stringify:e=>ple(e,2,"0b")},hmn={identify:tP,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>RB(e,1,8,n),stringify:e=>ple(e,8,"0")},pmn={identify:tP,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>RB(e,0,10,n),stringify:Kh},mmn={identify:tP,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>RB(e,2,16,n),stringify:e=>ple(e,16,"0x")};class ME extends Pd{constructor(t){super(t),this.tag=ME.tag}add(t){let n;uo(t)?n=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?n=new du(t.key,null):n=new du(t,null),jb(this.items,n.key)||this.items.push(n)}get(t,n){const r=jb(this.items,t);return!n&&uo(r)?Qi(r.key)?r.key.value:r.key:r}set(t,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const r=jb(this.items,t);r&&!n?this.items.splice(this.items.indexOf(r),1):!r&&n&&this.items.push(new du(t))}toJSON(t,n){return super.toJSON(t,n,Set)}toString(t,n,r){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),n,r);throw new Error("Set items must all have null values")}static from(t,n,r){const{replacer:i}=r,s=new this(t);if(n&&Symbol.iterator in Object(n))for(let o of n)typeof i=="function"&&(o=i.call(n,o,o)),s.items.push(lle(o,null,r));return s}}ME.tag="tag:yaml.org,2002:set";const mle={collection:"map",identify:e=>e instanceof Set,nodeClass:ME,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>ME.from(e,t,n),resolve(e,t){if(ZD(e)){if(e.hasAllNullValues(!0))return Object.assign(new ME,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function gle(e,t){const n=e[0],r=n==="-"||n==="+"?e.substring(1):e,i=o=>t?BigInt(o):Number(o),s=r.replace(/_/g,"").split(":").reduce((o,a)=>o*i(60)+i(a),i(0));return n==="-"?i(-1)*s:s}function eUe(e){let{value:t}=e,n=o=>o;if(typeof t=="bigint")n=o=>BigInt(o);else if(isNaN(t)||!isFinite(t))return Kh(e);let r="";t<0&&(r="-",t*=n(-1));const i=n(60),s=[t%i];return t<60?s.unshift(0):(t=(t-s[0])/i,s.unshift(t%i),t>=60&&(t=(t-s[0])/i,s.unshift(t))),r+s.map(o=>String(o).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const tUe={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>gle(e,n),stringify:eUe},nUe={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>gle(e,!1),stringify:eUe},DB={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(DB.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,s,o,a]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0;let u=Date.UTC(n,r-1,i,s||0,o||0,a||0,l);const c=t[8];if(c&&c!=="Z"){let d=gle(c,!1);Math.abs(d)<30&&(d*=60),u-=6e4*d}return new Date(u)},stringify:({value:e})=>e?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},eCe=[iT,sT,AB,kB,JVe,ZVe,fmn,hmn,pmn,mmn,umn,cmn,dmn,dle,Lg,hle,fle,mle,tUe,nUe,DB],tCe=new Map([["core",smn],["failsafe",[iT,sT,AB]],["json",lmn],["yaml11",eCe],["yaml-1.1",eCe]]),nCe={binary:dle,bool:ule,float:HVe,floatExp:UVe,floatNaN:VVe,floatTime:nUe,int:GVe,intHex:YVe,intOct:WVe,intTime:tUe,map:iT,merge:Lg,null:kB,omap:hle,pairs:fle,seq:sT,set:mle,timestamp:DB},gmn={"tag:yaml.org,2002:binary":dle,"tag:yaml.org,2002:merge":Lg,"tag:yaml.org,2002:omap":hle,"tag:yaml.org,2002:pairs":fle,"tag:yaml.org,2002:set":mle,"tag:yaml.org,2002:timestamp":DB};function _q(e,t,n){const r=tCe.get(t);if(r&&!e)return n&&!r.includes(Lg)?r.concat(Lg):r.slice();let i=r;if(!i)if(Array.isArray(e))i=[];else{const s=Array.from(tCe.keys()).filter(o=>o!=="yaml11").map(o=>JSON.stringify(o)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${s} or define customTags array`)}if(Array.isArray(e))for(const s of e)i=i.concat(s);else typeof e=="function"&&(i=e(i.slice()));return n&&(i=i.concat(Lg)),i.reduce((s,o)=>{const a=typeof o=="string"?nCe[o]:o;if(!a){const l=JSON.stringify(o),u=Object.keys(nCe).map(c=>JSON.stringify(c)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${u}`)}return s.includes(a)||s.push(a),s},[])}const ymn=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class yle{constructor({compat:t,customTags:n,merge:r,resolveKnownTags:i,schema:s,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(t)?_q(t,"compat"):t?_q(null,t):null,this.name=typeof s=="string"&&s||"core",this.knownTags=i?gmn:{},this.tags=_q(n,this.name,r),this.toStringOptions=a??null,Object.defineProperty(this,lv,{value:iT}),Object.defineProperty(this,fm,{value:AB}),Object.defineProperty(this,nT,{value:sT}),this.sortMapEntries=typeof o=="function"?o:o===!0?ymn:null}clone(){const t=Object.create(yle.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}function vmn(e,t){const n=[];let r=t.directives===!0;if(t.directives!==!1&&e.directives){const l=e.directives.toString(e);l?(n.push(l),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");const i=LVe(e,t),{commentString:s}=i.options;if(e.commentBefore){n.length!==1&&n.unshift("");const l=s(e.commentBefore);n.unshift(Eg(l,""))}let o=!1,a=null;if(e.contents){if(oo(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){const c=s(e.contents.commentBefore);n.push(Eg(c,""))}i.forceBlockIndent=!!e.comment,a=e.contents.comment}const l=a?void 0:()=>o=!0;let u=jC(e.contents,i,()=>a=null,l);a&&(u+=Lb(u,"",s(a))),(u[0]==="|"||u[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${u}`:n.push(u)}else n.push(jC(e.contents,i));if(e.directives?.docEnd)if(e.comment){const l=s(e.comment);l.includes(`
`)?(n.push("..."),n.push(Eg(l,""))):n.push(`... ${l}`)}else n.push("...");else{let l=e.comment;l&&o&&(l=l.replace(/^\n+/,"")),l&&((!o||a)&&n[n.length-1]!==""&&n.push(""),n.push(Eg(s(l),"")))}return n.join(`
`)+`
`}class PB{constructor(t,n,r){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,of,{value:sQ});let i=null;typeof n=="function"||Array.isArray(n)?i=n:r===void 0&&n&&(r=n,n=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},r);this.options=s;let{version:o}=s;r?._directives?(this.directives=r._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Kl({version:o}),this.setSchema(o,r),this.contents=t===void 0?null:this.createNode(t,i,r)}clone(){const t=Object.create(PB.prototype,{[of]:{value:sQ}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=oo(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){I_(this.contents)&&this.contents.add(t)}addIn(t,n){I_(this.contents)&&this.contents.addIn(t,n)}createAlias(t,n){if(!t.anchor){const r=OVe(this);t.anchor=!n||r.has(n)?NVe(n||"a",r):n}return new ole(t.anchor)}createNode(t,n,r){let i;if(typeof n=="function")t=n.call({"":t},"",t),i=n;else if(Array.isArray(n)){const g=v=>typeof v=="number"||v instanceof String||v instanceof Number,y=n.filter(g).map(String);y.length>0&&(n=n.concat(y)),i=n}else r===void 0&&n&&(r=n,n=void 0);const{aliasDuplicateObjects:s,anchorPrefix:o,flow:a,keepUndefined:l,onTagObj:u,tag:c}=r??{},{onAnchor:d,setAnchors:f,sourceObjects:h}=qpn(this,o||"a"),p={aliasDuplicateObjects:s??!0,keepUndefined:l??!1,onAnchor:d,onTagObj:u,replacer:i,schema:this.schema,sourceObjects:h},m=YI(t,c,p);return a&&io(m)&&(m.flow=!0),f(),m}createPair(t,n,r={}){const i=this.createNode(t,null,r),s=this.createNode(n,null,r);return new du(i,s)}delete(t){return I_(this.contents)?this.contents.delete(t):!1}deleteIn(t){return IA(t)?this.contents==null?!1:(this.contents=null,!0):I_(this.contents)?this.contents.deleteIn(t):!1}get(t,n){return io(this.contents)?this.contents.get(t,n):void 0}getIn(t,n){return IA(t)?!n&&Qi(this.contents)?this.contents.value:this.contents:io(this.contents)?this.contents.getIn(t,n):void 0}has(t){return io(this.contents)?this.contents.has(t):!1}hasIn(t){return IA(t)?this.contents!==void 0:io(this.contents)?this.contents.hasIn(t):!1}set(t,n){this.contents==null?this.contents=z$(this.schema,[t],n):I_(this.contents)&&this.contents.set(t,n)}setIn(t,n){IA(t)?this.contents=n:this.contents==null?this.contents=z$(this.schema,Array.from(t),n):I_(this.contents)&&this.contents.setIn(t,n)}setSchema(t,n={}){typeof t=="number"&&(t=String(t));let r;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Kl({version:"1.1"}),r={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new Kl({version:t}),r={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,r=null;break;default:{const i=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${i}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(r)this.schema=new yle(Object.assign(r,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:n,mapAsMap:r,maxAliasCount:i,onAnchor:s,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!t,mapAsMap:r===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},l=qd(this.contents,n??"",a);if(typeof s=="function")for(const{count:u,res:c}of a.anchors.values())s(c,u);return typeof o=="function"?uE(o,{"":l},"",l):l}toJSON(t,n){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:n})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const n=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return vmn(this,t)}}function I_(e){if(io(e))return!0;throw new Error("Expected a YAML collection as document contents")}class rUe extends Error{constructor(t,n,r,i){super(),this.name=t,this.code=r,this.message=i,this.pos=n}}class RA extends rUe{constructor(t,n,r){super("YAMLParseError",t,n,r)}}class bmn extends rUe{constructor(t,n,r){super("YAMLWarning",t,n,r)}}const rCe=(e,t)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(a=>t.linePos(a));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let s=i-1,o=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){const a=Math.min(s-39,o.length-79);o=""+o.substring(a),s-=a-1}if(o.length>80&&(o=o.substring(0,79)+""),r>1&&/^ *$/.test(o.substring(0,s))){let a=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);a.length>80&&(a=a.substring(0,79)+`
`),o=a+o}if(/[^ ]/.test(o)){let a=1;const l=n.linePos[1];l&&l.line===r&&l.col>i&&(a=Math.max(1,Math.min(l.col-i,80-s)));const u=" ".repeat(s)+"^".repeat(a);n.message+=`:

${o}
${u}
`}};function BC(e,{flow:t,indicator:n,next:r,offset:i,onError:s,parentIndent:o,startOnNewline:a}){let l=!1,u=a,c=a,d="",f="",h=!1,p=!1,m=null,g=null,y=null,v=null,b=null,_=null,E=null;for(const A of e)switch(p&&(A.type!=="space"&&A.type!=="newline"&&A.type!=="comma"&&s(A.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),m&&(u&&A.type!=="comment"&&A.type!=="newline"&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),A.type){case"space":!t&&(n!=="doc-start"||r?.type!=="flow-collection")&&A.source.includes("	")&&(m=A),c=!0;break;case"comment":{c||s(A,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const R=A.source.substring(1)||" ";d?d+=f+R:d=R,f="",u=!1;break}case"newline":u?d?d+=A.source:(!_||n!=="seq-item-ind")&&(l=!0):f+=A.source,u=!0,h=!0,(g||y)&&(v=A),c=!0;break;case"anchor":g&&s(A,"MULTIPLE_ANCHORS","A node can have at most one anchor"),A.source.endsWith(":")&&s(A.offset+A.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),g=A,E??(E=A.offset),u=!1,c=!1,p=!0;break;case"tag":{y&&s(A,"MULTIPLE_TAGS","A node can have at most one tag"),y=A,E??(E=A.offset),u=!1,c=!1,p=!0;break}case n:(g||y)&&s(A,"BAD_PROP_ORDER",`Anchors and tags must be after the ${A.source} indicator`),_&&s(A,"UNEXPECTED_TOKEN",`Unexpected ${A.source} in ${t??"collection"}`),_=A,u=n==="seq-item-ind"||n==="explicit-key-ind",c=!1;break;case"comma":if(t){b&&s(A,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),b=A,u=!1,c=!1;break}default:s(A,"UNEXPECTED_TOKEN",`Unexpected ${A.type} token`),u=!1,c=!1}const S=e[e.length-1],T=S?S.offset+S.source.length:i;return p&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!=="")&&s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(u&&m.indent<=o||r?.type==="block-map"||r?.type==="block-seq")&&s(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:_,spaceBefore:l,comment:d,hasNewline:h,anchor:g,tag:y,newlineAfterProp:v,end:T,start:E??T}}function KI(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(const t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(const t of e.items){for(const n of t.start)if(n.type==="newline")return!0;if(t.sep){for(const n of t.sep)if(n.type==="newline")return!0}if(KI(t.key)||KI(t.value))return!0}return!1;default:return!0}}function uQ(e,t,n){if(t?.type==="flow-collection"){const r=t.end[0];r.indent===e&&(r.source==="]"||r.source==="}")&&KI(t)&&n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function iUe(e,t,n){const{uniqueKeys:r}=e.options;if(r===!1)return!1;const i=typeof r=="function"?r:(s,o)=>s===o||Qi(s)&&Qi(o)&&s.value===o.value;return t.some(s=>i(s.key,n))}const iCe="All mapping items must start at the same column";function wmn({composeNode:e,composeEmptyNode:t},n,r,i,s){const o=s?.nodeClass??Pd,a=new o(n.schema);n.atRoot&&(n.atRoot=!1);let l=r.offset,u=null;for(const c of r.items){const{start:d,key:f,sep:h,value:p}=c,m=BC(d,{indicator:"explicit-key-ind",next:f??h?.[0],offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0}),g=!m.found;if(g){if(f&&(f.type==="block-seq"?i(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in f&&f.indent!==r.indent&&i(l,"BAD_INDENT",iCe)),!m.anchor&&!m.tag&&!h){u=m.end,m.comment&&(a.comment?a.comment+=`
`+m.comment:a.comment=m.comment);continue}(m.newlineAfterProp||KI(f))&&i(f??d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else m.found?.indent!==r.indent&&i(l,"BAD_INDENT",iCe);n.atKey=!0;const y=m.end,v=f?e(n,f,m,i):t(n,y,d,null,m,i);n.schema.compat&&uQ(r.indent,f,i),n.atKey=!1,iUe(n,a.items,v)&&i(y,"DUPLICATE_KEY","Map keys must be unique");const b=BC(h??[],{indicator:"map-value-ind",next:p,offset:v.range[2],onError:i,parentIndent:r.indent,startOnNewline:!f||f.type==="block-scalar"});if(l=b.end,b.found){g&&(p?.type==="block-map"&&!b.hasNewline&&i(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&m.start<b.found.offset-1024&&i(v.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const _=p?e(n,p,b,i):t(n,l,h,null,b,i);n.schema.compat&&uQ(r.indent,p,i),l=_.range[2];const E=new du(v,_);n.options.keepSourceTokens&&(E.srcToken=c),a.items.push(E)}else{g&&i(v.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),b.comment&&(v.comment?v.comment+=`
`+b.comment:v.comment=b.comment);const _=new du(v);n.options.keepSourceTokens&&(_.srcToken=c),a.items.push(_)}}return u&&u<l&&i(u,"IMPOSSIBLE","Map comment with trailing content"),a.range=[r.offset,l,u??l],a}function xmn({composeNode:e,composeEmptyNode:t},n,r,i,s){const o=s?.nodeClass??Fw,a=new o(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=r.offset,u=null;for(const{start:c,value:d}of r.items){const f=BC(c,{indicator:"seq-item-ind",next:d,offset:l,onError:i,parentIndent:r.indent,startOnNewline:!0});if(!f.found)if(f.anchor||f.tag||d)d&&d.type==="block-seq"?i(f.end,"BAD_INDENT","All sequence items must start at the same column"):i(l,"MISSING_CHAR","Sequence item without - indicator");else{u=f.end,f.comment&&(a.comment=f.comment);continue}const h=d?e(n,d,f,i):t(n,f.end,c,null,f,i);n.schema.compat&&uQ(r.indent,d,i),l=h.range[2],a.items.push(h)}return a.range=[r.offset,l,u??l],a}function nP(e,t,n,r){let i="";if(e){let s=!1,o="";for(const a of e){const{source:l,type:u}=a;switch(u){case"space":s=!0;break;case"comment":{n&&!s&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const c=l.substring(1)||" ";i?i+=o+c:i=c,o="";break}case"newline":i&&(o+=l),s=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${u} at node end`)}t+=l.length}}return{comment:i,offset:t}}const Eq="Block collections are not allowed within flow collections",Cq=e=>e&&(e.type==="block-map"||e.type==="block-seq");function _mn({composeNode:e,composeEmptyNode:t},n,r,i,s){const o=r.start.source==="{",a=o?"flow map":"flow sequence",l=s?.nodeClass??(o?Pd:Fw),u=new l(n.schema);u.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let d=r.offset+r.start.source.length;for(let g=0;g<r.items.length;++g){const y=r.items[g],{start:v,key:b,sep:_,value:E}=y,S=BC(v,{flow:a,indicator:"explicit-key-ind",next:b??_?.[0],offset:d,onError:i,parentIndent:r.indent,startOnNewline:!1});if(!S.found){if(!S.anchor&&!S.tag&&!_&&!E){g===0&&S.comma?i(S.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):g<r.items.length-1&&i(S.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),S.comment&&(u.comment?u.comment+=`
`+S.comment:u.comment=S.comment),d=S.end;continue}!o&&n.options.strict&&KI(b)&&i(b,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)S.comma&&i(S.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(S.comma||i(S.start,"MISSING_CHAR",`Missing , between ${a} items`),S.comment){let T="";e:for(const A of v)switch(A.type){case"comma":case"space":break;case"comment":T=A.source.substring(1);break e;default:break e}if(T){let A=u.items[u.items.length-1];uo(A)&&(A=A.value??A.key),A.comment?A.comment+=`
`+T:A.comment=T,S.comment=S.comment.substring(T.length+1)}}if(!o&&!_&&!S.found){const T=E?e(n,E,S,i):t(n,S.end,_,null,S,i);u.items.push(T),d=T.range[2],Cq(E)&&i(T.range,"BLOCK_IN_FLOW",Eq)}else{n.atKey=!0;const T=S.end,A=b?e(n,b,S,i):t(n,T,v,null,S,i);Cq(b)&&i(A.range,"BLOCK_IN_FLOW",Eq),n.atKey=!1;const R=BC(_??[],{flow:a,indicator:"map-value-ind",next:E,offset:A.range[2],onError:i,parentIndent:r.indent,startOnNewline:!1});if(R.found){if(!o&&!S.found&&n.options.strict){if(_)for(const N of _){if(N===R.found)break;if(N.type==="newline"){i(N,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}S.start<R.found.offset-1024&&i(R.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else E&&("source"in E&&E.source&&E.source[0]===":"?i(E,"MISSING_CHAR",`Missing space after : in ${a}`):i(R.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const I=E?e(n,E,R,i):R.found?t(n,R.end,_,null,R,i):null;I?Cq(E)&&i(I.range,"BLOCK_IN_FLOW",Eq):R.comment&&(A.comment?A.comment+=`
`+R.comment:A.comment=R.comment);const P=new du(A,I);if(n.options.keepSourceTokens&&(P.srcToken=y),o){const N=u;iUe(n,N.items,A)&&i(T,"DUPLICATE_KEY","Map keys must be unique"),N.items.push(P)}else{const N=new Pd(n.schema);N.flow=!0,N.items.push(P);const M=(I??A).range;N.range=[A.range[0],M[1],M[2]],u.items.push(N)}d=I?I.range[2]:R.end}}const f=o?"}":"]",[h,...p]=r.end;let m=d;if(h&&h.source===f)m=h.offset+h.source.length;else{const g=a[0].toUpperCase()+a.substring(1),y=c?`${g} must end with a ${f}`:`${g} in block collection must be sufficiently indented and end with a ${f}`;i(d,c?"MISSING_CHAR":"BAD_INDENT",y),h&&h.source.length!==1&&p.unshift(h)}if(p.length>0){const g=nP(p,m,n.options.strict,i);g.comment&&(u.comment?u.comment+=`
`+g.comment:u.comment=g.comment),u.range=[r.offset,m,g.offset]}else u.range=[r.offset,m,m];return u}function Sq(e,t,n,r,i,s){const o=n.type==="block-map"?wmn(e,t,n,r,s):n.type==="block-seq"?xmn(e,t,n,r,s):_mn(e,t,n,r,s),a=o.constructor;return i==="!"||i===a.tagName?(o.tag=a.tagName,o):(i&&(o.tag=i),o)}function Emn(e,t,n,r,i){const s=r.tag,o=s?t.directives.tagName(s.source,f=>i(s,"TAG_RESOLVE_FAILED",f)):null;if(n.type==="block-seq"){const{anchor:f,newlineAfterProp:h}=r,p=f&&s?f.offset>s.offset?f:s:f??s;p&&(!h||h.offset<p.offset)&&i(p,"MISSING_CHAR","Missing newline after block sequence props")}const a=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!s||!o||o==="!"||o===Pd.tagName&&a==="map"||o===Fw.tagName&&a==="seq")return Sq(e,t,n,i,o);let l=t.schema.tags.find(f=>f.tag===o&&f.collection===a);if(!l){const f=t.schema.knownTags[o];if(f&&f.collection===a)t.schema.tags.push(Object.assign({},f,{default:!1})),l=f;else return f?i(s,"BAD_COLLECTION_TYPE",`${f.tag} used for ${a} collection, but expects ${f.collection??"scalar"}`,!0):i(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),Sq(e,t,n,i,o)}const u=Sq(e,t,n,i,o,l),c=l.resolve?.(u,f=>i(s,"TAG_RESOLVE_FAILED",f),t.options)??u,d=oo(c)?c:new ur(c);return d.range=u.range,d.tag=o,l?.format&&(d.format=l.format),d}function Cmn(e,t,n){const r=t.offset,i=Smn(t,e.options.strict,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const s=i.mode===">"?ur.BLOCK_FOLDED:ur.BLOCK_LITERAL,o=t.source?Tmn(t.source):[];let a=o.length;for(let m=o.length-1;m>=0;--m){const g=o[m][1];if(g===""||g==="\r")a=m;else break}if(a===0){const m=i.chomp==="+"&&o.length>0?`
`.repeat(Math.max(1,o.length-1)):"";let g=r+i.length;return t.source&&(g+=t.source.length),{value:m,type:s,comment:i.comment,range:[r,g,g]}}let l=t.indent+i.indent,u=t.offset+i.length,c=0;for(let m=0;m<a;++m){const[g,y]=o[m];if(y===""||y==="\r")i.indent===0&&g.length>l&&(l=g.length);else{g.length<l&&n(u+g.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),i.indent===0&&(l=g.length),c=m,l===0&&!e.atRoot&&n(u,"BAD_INDENT","Block scalar values in collections must be indented");break}u+=g.length+y.length+1}for(let m=o.length-1;m>=a;--m)o[m][0].length>l&&(a=m+1);let d="",f="",h=!1;for(let m=0;m<c;++m)d+=o[m][0].slice(l)+`
`;for(let m=c;m<a;++m){let[g,y]=o[m];u+=g.length+y.length+1;const v=y[y.length-1]==="\r";if(v&&(y=y.slice(0,-1)),y&&g.length<l){const _=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(u-y.length-(v?2:1),"BAD_INDENT",_),g=""}s===ur.BLOCK_LITERAL?(d+=f+g.slice(l)+y,f=`
`):g.length>l||y[0]==="	"?(f===" "?f=`
`:!h&&f===`
`&&(f=`

`),d+=f+g.slice(l)+y,f=`
`,h=!0):y===""?f===`
`?d+=`
`:f=`
`:(d+=f+y,f=" ",h=!1)}switch(i.chomp){case"-":break;case"+":for(let m=a;m<o.length;++m)d+=`
`+o[m][0].slice(l);d[d.length-1]!==`
`&&(d+=`
`);break;default:d+=`
`}const p=r+i.length+t.source.length;return{value:d,type:s,comment:i.comment,range:[r,p,p]}}function Smn({offset:e,props:t},n,r){if(t[0].type!=="block-scalar-header")return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],s=i[0];let o=0,a="",l=-1;for(let f=1;f<i.length;++f){const h=i[f];if(!a&&(h==="-"||h==="+"))a=h;else{const p=Number(h);!o&&p?o=p:l===-1&&(l=e+f)}}l!==-1&&r(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let u=!1,c="",d=i.length;for(let f=1;f<t.length;++f){const h=t[f];switch(h.type){case"space":u=!0;case"newline":d+=h.source.length;break;case"comment":n&&!u&&r(h,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),d+=h.source.length,c=h.source.substring(1);break;case"error":r(h,"UNEXPECTED_TOKEN",h.message),d+=h.source.length;break;default:{const p=`Unexpected token in block scalar header: ${h.type}`;r(h,"UNEXPECTED_TOKEN",p);const m=h.source;m&&typeof m=="string"&&(d+=m.length)}}}return{mode:s,indent:o,chomp:a,comment:c,length:d}}function Tmn(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),s=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let o=1;o<t.length;o+=2)s.push([t[o],t[o+1]]);return s}function Amn(e,t,n){const{offset:r,type:i,source:s,end:o}=e;let a,l;const u=(f,h,p)=>n(r+f,h,p);switch(i){case"scalar":a=ur.PLAIN,l=kmn(s,u);break;case"single-quoted-scalar":a=ur.QUOTE_SINGLE,l=Imn(s,u);break;case"double-quoted-scalar":a=ur.QUOTE_DOUBLE,l=Rmn(s,u);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+s.length,r+s.length]}}const c=r+s.length,d=nP(o,c,t,n);return{value:l,type:a,comment:d.comment,range:[r,c,d.offset]}}function kmn(e,t){let n="";switch(e[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${e[0]}`;break}case"@":case"`":{n=`reserved character ${e[0]}`;break}}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),sUe(e)}function Imn(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),sUe(e.slice(1,-1)).replace(/''/g,"'")}function sUe(e){let t,n;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let i=r[1],s=" ",o=t.lastIndex;for(n.lastIndex=o;r=n.exec(e);)r[1]===""?s===`
`?i+=s:s=`
`:(i+=s+r[1],s=" "),o=n.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,r=a.exec(e),i+s+(r?.[1]??"")}function Rmn(e,t){let n="";for(let r=1;r<e.length-1;++r){const i=e[r];if(!(i==="\r"&&e[r+1]===`
`))if(i===`
`){const{fold:s,offset:o}=Dmn(e,r);n+=s,r=o}else if(i==="\\"){let s=e[++r];const o=Pmn[s];if(o)n+=o;else if(s===`
`)for(s=e[r+1];s===" "||s==="	";)s=e[++r+1];else if(s==="\r"&&e[r+1]===`
`)for(s=e[++r+1];s===" "||s==="	";)s=e[++r+1];else if(s==="x"||s==="u"||s==="U"){const a={x:2,u:4,U:8}[s];n+=Omn(e,r+1,a,t),r+=a}else{const a=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),n+=a}}else if(i===" "||i==="	"){const s=r;let o=e[r+1];for(;o===" "||o==="	";)o=e[++r+1];o!==`
`&&!(o==="\r"&&e[r+2]===`
`)&&(n+=r>s?e.slice(s,r+1):i)}else n+=i}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}function Dmn(e,t){let n="",r=e[t+1];for(;(r===" "||r==="	"||r===`
`||r==="\r")&&!(r==="\r"&&e[t+2]!==`
`);)r===`
`&&(n+=`
`),t+=1,r=e[t+1];return n||(n=" "),{fold:n,offset:t}}const Pmn={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"",_:"",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Omn(e,t,n,r){const i=e.substr(t,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const a=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${a}`),a}return String.fromCodePoint(o)}function oUe(e,t,n,r){const{value:i,type:s,comment:o,range:a}=t.type==="block-scalar"?Cmn(e,t,r):Amn(t,e.options.strict,r),l=n?e.directives.tagName(n.source,d=>r(n,"TAG_RESOLVE_FAILED",d)):null;let u;e.options.stringKeys&&e.atKey?u=e.schema[fm]:l?u=Nmn(e.schema,i,l,n,r):t.type==="scalar"?u=Mmn(e,i,t,r):u=e.schema[fm];let c;try{const d=u.resolve(i,f=>r(n??t,"TAG_RESOLVE_FAILED",f),e.options);c=Qi(d)?d:new ur(d)}catch(d){const f=d instanceof Error?d.message:String(d);r(n??t,"TAG_RESOLVE_FAILED",f),c=new ur(i)}return c.range=a,c.source=i,s&&(c.type=s),l&&(c.tag=l),u.format&&(c.format=u.format),o&&(c.comment=o),c}function Nmn(e,t,n,r,i){if(n==="!")return e[fm];const s=[];for(const a of e.tags)if(!a.collection&&a.tag===n)if(a.default&&a.test)s.push(a);else return a;for(const a of s)if(a.test?.test(t))return a;const o=e.knownTags[n];return o&&!o.collection?(e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),e[fm])}function Mmn({atKey:e,directives:t,schema:n},r,i,s){const o=n.tags.find(a=>(a.default===!0||e&&a.default==="key")&&a.test?.test(r))||n[fm];if(n.compat){const a=n.compat.find(l=>l.default&&l.test?.test(r))??n[fm];if(o.tag!==a.tag){const l=t.tagString(o.tag),u=t.tagString(a.tag),c=`Value may be parsed as either ${l} or ${u}`;s(i,"TAG_RESOLVE_FAILED",c,!0)}}return o}function $mn(e,t,n){if(t){n??(n=t.length);for(let r=n-1;r>=0;--r){let i=t[r];switch(i.type){case"space":case"comment":case"newline":e-=i.source.length;continue}for(i=t[++r];i?.type==="space";)e+=i.source.length,i=t[++r];break}}return e}const Fmn={composeNode:aUe,composeEmptyNode:vle};function aUe(e,t,n,r){const i=e.atKey,{spaceBefore:s,comment:o,anchor:a,tag:l}=n;let u,c=!0;switch(t.type){case"alias":u=Lmn(e,t,r),(a||l)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":u=oUe(e,t,l,r),a&&(u.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":u=Emn(Fmn,e,t,n,r),a&&(u.anchor=a.source.substring(1));break;default:{const d=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;r(t,"UNEXPECTED_TOKEN",d),u=vle(e,t.offset,void 0,null,n,r),c=!1}}return a&&u.anchor===""&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&e.options.stringKeys&&(!Qi(u)||typeof u.value!="string"||u.tag&&u.tag!=="tag:yaml.org,2002:str")&&r(l??t,"NON_STRING_KEY","With stringKeys, all keys must be strings"),s&&(u.spaceBefore=!0),o&&(t.type==="scalar"&&t.source===""?u.comment=o:u.commentBefore=o),e.options.keepSourceTokens&&c&&(u.srcToken=t),u}function vle(e,t,n,r,{spaceBefore:i,comment:s,anchor:o,tag:a,end:l},u){const c={type:"scalar",offset:$mn(t,n,r),indent:-1,source:""},d=oUe(e,c,a,u);return o&&(d.anchor=o.source.substring(1),d.anchor===""&&u(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(d.spaceBefore=!0),s&&(d.comment=s,d.range[2]=l),d}function Lmn({options:e},{offset:t,source:n,end:r},i){const s=new ole(n.substring(1));s.source===""&&i(t,"BAD_ALIAS","Alias cannot be an empty string"),s.source.endsWith(":")&&i(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=t+n.length,a=nP(r,o,e.strict,i);return s.range=[t,o,a.offset],a.comment&&(s.comment=a.comment),s}function jmn(e,t,{offset:n,start:r,value:i,end:s},o){const a=Object.assign({_directives:t},e),l=new PB(void 0,a),u={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},c=BC(r,{indicator:"doc-start",next:i??s?.[0],offset:n,onError:o,parentIndent:0,startOnNewline:!0});c.found&&(l.directives.docStart=!0,i&&(i.type==="block-map"||i.type==="block-seq")&&!c.hasNewline&&o(c.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=i?aUe(u,i,c,o):vle(u,c.end,r,null,c,o);const d=l.contents.range[2],f=nP(s,d,!1,o);return f.comment&&(l.comment=f.comment),l.range=[n,d,f.offset],l}function O2(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+(typeof n=="string"?n.length:1)]}function sCe(e){let t="",n=!1,r=!1;for(let i=0;i<e.length;++i){const s=e[i];switch(s[0]){case"#":t+=(t===""?"":r?`

`:`
`)+(s.substring(1)||" "),n=!0,r=!1;break;case"%":e[i+1]?.[0]!=="#"&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class Bmn{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,r,i,s)=>{const o=O2(n);s?this.warnings.push(new bmn(o,r,i)):this.errors.push(new RA(o,r,i))},this.directives=new Kl({version:t.version||"1.2"}),this.options=t}decorate(t,n){const{comment:r,afterEmptyLine:i}=sCe(this.prelude);if(r){const s=t.contents;if(n)t.comment=t.comment?`${t.comment}
${r}`:r;else if(i||t.directives.docStart||!s)t.commentBefore=r;else if(io(s)&&!s.flow&&s.items.length>0){let o=s.items[0];uo(o)&&(o=o.key);const a=o.commentBefore;o.commentBefore=a?`${r}
${a}`:r}else{const o=s.commentBefore;s.commentBefore=o?`${r}
${o}`:r}}n?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:sCe(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,n=!1,r=-1){for(const i of t)yield*this.next(i);yield*this.end(n,r)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(n,r,i)=>{const s=O2(t);s[0]+=n,this.onError(s,"BAD_DIRECTIVE",r,i)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const n=jmn(this.options,this.directives,t,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const n=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,r=new RA(O2(t),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(r):this.doc.errors.push(r);break}case"doc-end":{if(!this.doc){const r="Unexpected doc-end without preceding document";this.errors.push(new RA(O2(t),"UNEXPECTED_TOKEN",r));break}this.doc.directives.docEnd=!0;const n=nP(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){const r=this.doc.comment;this.doc.comment=r?`${r}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new RA(O2(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const r=Object.assign({_directives:this.directives},this.options),i=new PB(void 0,r);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),i.range=[0,n,n],this.decorate(i,!1),yield i}}}const lUe="\uFEFF",uUe="",cUe="",cQ="";function zmn(e){switch(e){case lUe:return"byte-order-mark";case uUe:return"doc-mode";case cUe:return"flow-error-end";case cQ:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function Df(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}const oCe=new Set("0123456789ABCDEFabcdef"),Vmn=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),SN=new Set(",[]{}"),Umn=new Set(` ,[]{}
\r	`),Tq=e=>!e||Umn.has(e);class Hmn{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,n=!1){if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!n;let r=this.next??"stream";for(;r&&(n||this.hasChars(1));)r=yield*this.parseNext(r)}atLineEnd(){let t=this.pos,n=this.buffer[t];for(;n===" "||n==="	";)n=this.buffer[++t];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let n=this.buffer[t];if(this.indentNext>0){let r=0;for(;n===" ";)n=this.buffer[++r+t];if(n==="\r"){const i=this.buffer[r+t+1];if(i===`
`||!i&&!this.atEnd)return t+r+1}return n===`
`||r>=this.indentNext||!n&&!this.atEnd?t+r:-1}if(n==="-"||n==="."){const r=this.buffer.substr(t,3);if((r==="---"||r==="...")&&Df(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===lUe&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let n=t.length,r=t.indexOf("#");for(;r!==-1;){const s=t[r-1];if(s===" "||s==="	"){n=r-1;break}else r=t.indexOf("#",r+1)}for(;;){const s=t[n-1];if(s===" "||s==="	")n-=1;else break}const i=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-i),this.pushNewline(),"stream"}if(this.atLineEnd()){const n=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-n),yield*this.pushNewline(),"stream"}return yield uUe,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const n=this.peek(3);if((n==="---"||n==="...")&&Df(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Df(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&Df(n)){const r=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=r,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(t===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(t[n]){case"#":yield*this.pushCount(t.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Tq),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,n,r=-1;do t=yield*this.pushNewline(),t>0?(n=yield*this.pushSpaces(!1),this.indentValue=r=n):n=0,n+=yield*this.pushSpaces(!0);while(t+n>0);const i=this.getLine();if(i===null)return this.setNext("flow");if((r!==-1&&r<this.indentNext&&i[0]!=="#"||r===0&&(i.startsWith("---")||i.startsWith("..."))&&Df(i[3]))&&!(r===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}")))return this.flowLevel=0,yield cUe,yield*this.parseLineStart();let s=0;for(;i[s]===",";)s+=yield*this.pushCount(1),s+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(s+=yield*this.pushIndicators(),i[s]){case void 0:return"flow";case"#":return yield*this.pushCount(i.length-s),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Tq),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const o=this.charAt(1);if(this.flowKey||Df(o)||o===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let n=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let s=0;for(;this.buffer[n-1-s]==="\\";)s+=1;if(s%2===0)break;n=this.buffer.indexOf('"',n+1)}const r=this.buffer.substring(0,n);let i=r.indexOf(`
`,this.pos);if(i!==-1){for(;i!==-1;){const s=this.continueScalar(i+1);if(s===-1)break;i=r.indexOf(`
`,s)}i!==-1&&(n=i-(r[i-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const n=this.buffer[++t];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>Df(n)||n==="#")}*parseBlockScalar(){let t=this.pos-1,n=0,r;e:for(let s=this.pos;r=this.buffer[s];++s)switch(r){case" ":n+=1;break;case`
`:t=s,n=0;break;case"\r":{const o=this.buffer[s+1];if(!o&&!this.atEnd)return this.setNext("block-scalar");if(o===`
`)break}default:break e}if(!r&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{const s=this.continueScalar(t+1);if(s===-1)break;t=this.buffer.indexOf(`
`,s)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let i=t+1;for(r=this.buffer[i];r===" ";)r=this.buffer[++i];if(r==="	"){for(;r==="	"||r===" "||r==="\r"||r===`
`;)r=this.buffer[++i];t=i-1}else if(!this.blockScalarKeep)do{let s=t-1,o=this.buffer[s];o==="\r"&&(o=this.buffer[--s]);const a=s;for(;o===" ";)o=this.buffer[--s];if(o===`
`&&s>=this.pos&&s+1+n>a)t=s;else break}while(!0);return yield cQ,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let n=this.pos-1,r=this.pos-1,i;for(;i=this.buffer[++r];)if(i===":"){const s=this.buffer[r+1];if(Df(s)||t&&SN.has(s))break;n=r}else if(Df(i)){let s=this.buffer[r+1];if(i==="\r"&&(s===`
`?(r+=1,i=`
`,s=this.buffer[r+1]):n=r),s==="#"||t&&SN.has(s))break;if(i===`
`){const o=this.continueScalar(r+1);if(o===-1)break;r=Math.max(r,o-2)}}else{if(t&&SN.has(i))break;n=r}return!i&&!this.atEnd?this.setNext("plain-scalar"):(yield cQ,yield*this.pushToIndex(n+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,n){const r=this.buffer.slice(this.pos,t);return r?(yield r,this.pos+=r.length,r.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Tq))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,n=this.charAt(1);if(Df(n)||t&&SN.has(n))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,n=this.buffer[t];for(;!Df(n)&&n!==">";)n=this.buffer[++t];return yield*this.pushToIndex(n===">"?t+1:t,!1)}else{let t=this.pos+1,n=this.buffer[t];for(;n;)if(Vmn.has(n))n=this.buffer[++t];else if(n==="%"&&oCe.has(this.buffer[t+1])&&oCe.has(this.buffer[t+2]))n=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let n=this.pos-1,r;do r=this.buffer[++n];while(r===" "||t&&r==="	");const i=n-this.pos;return i>0&&(yield this.buffer.substr(this.pos,i),this.pos=n),i}*pushUntil(t){let n=this.pos,r=this.buffer[n];for(;!t(r);)r=this.buffer[++n];return yield*this.pushToIndex(n,!1)}}class qmn{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let n=0,r=this.lineStarts.length;for(;n<r;){const s=n+r>>1;this.lineStarts[s]<t?n=s+1:r=s}if(this.lineStarts[n]===t)return{line:n+1,col:1};if(n===0)return{line:0,col:t};const i=this.lineStarts[n-1];return{line:n,col:t-i+1}}}}function Ey(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function aCe(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function dUe(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function TN(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function R_(e){if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;e[++t]?.type==="space";);return e.splice(t,e.length)}function lCe(e){if(e.start.type==="flow-seq-start")for(const t of e.items)t.sep&&!t.value&&!Ey(t.start,"explicit-key-ind")&&!Ey(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,dUe(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Wmn{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Hmn,this.onNewLine=t}*parse(t,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(const r of this.lexer.lex(t,n))yield*this.next(r);n||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}const n=zmn(t);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const r=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:r,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if(this.type==="doc-end"&&(!t||t.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){const n=t??this.stack.pop();if(!n)yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"};else if(this.stack.length===0)yield n;else{const r=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in r?r.indent:0:n.type==="flow-collection"&&r.type==="document"&&(n.indent=0),n.type==="flow-collection"&&lCe(n),r.type){case"document":r.value=n;break;case"block-scalar":r.props.push(n);break;case"block-map":{const i=r.items[r.items.length-1];if(i.value){r.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(i.sep)i.value=n;else{Object.assign(i,{key:n,sep:[]}),this.onKeyLine=!i.explicitKey;return}break}case"block-seq":{const i=r.items[r.items.length-1];i.value?r.items.push({start:[],value:n}):i.value=n;break}case"flow-collection":{const i=r.items[r.items.length-1];!i||i.value?r.items.push({start:[],key:n,sep:[]}):i.sep?i.value=n:Object.assign(i,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((r.type==="document"||r.type==="block-map"||r.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){const i=n.items[n.items.length-1];i&&!i.sep&&!i.value&&i.start.length>0&&aCe(i.start)===-1&&(n.indent===0||i.start.every(s=>s.type!=="comment"||s.indent<n.indent))&&(r.type==="document"?r.end=i.start:r.items.push({start:i.start}),n.items.splice(-1,1))}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{aCe(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}const n=this.startBlockValue(t);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){const n=TN(this.peek(2)),r=R_(n);let i;t.end?(i=t.end,i.push(this.sourceToken),delete t.end):i=[this.sourceToken];const s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:r,key:t,sep:i}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const n=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,t.indent)){const i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const r=!this.onKeyLine&&this.indent===t.indent,i=r&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind";let s=[];if(i&&n.sep&&!n.value){const o=[];for(let a=0;a<n.sep.length;++a){const l=n.sep[a];switch(l.type){case"newline":o.push(a);break;case"space":break;case"comment":l.indent>t.indent&&(o.length=0);break;default:o.length=0}}o.length>=2&&(s=n.sep.splice(o[1]))}switch(this.type){case"anchor":case"tag":i||n.value?(s.push(this.sourceToken),t.items.push({start:s}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):i||n.value?(s.push(this.sourceToken),t.items.push({start:s,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Ey(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(dUe(n.key)&&!Ey(n.sep,"newline")){const o=R_(n.start),a=n.key,l=n.sep;l.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:a,sep:l}]})}else s.length>0?n.sep=n.sep.concat(s,this.sourceToken):n.sep.push(this.sourceToken);else if(Ey(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{const o=R_(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:o,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||i?t.items.push({start:s,key:null,sep:[this.sourceToken]}):Ey(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const o=this.flowScalar(this.type);i||n.value?(t.items.push({start:s,key:o,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(o):(Object.assign(n,{key:o,sep:[]}),this.onKeyLine=!0);return}default:{const o=this.startBlockValue(t);if(o){if(o.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Ey(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else r&&t.items.push({start:s});this.stack.push(o);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const n=t.items[t.items.length-1];switch(this.type){case"newline":if(n.value){const r="end"in n.value?n.value.end:void 0;(Array.isArray(r)?r[r.length-1]:void 0)?.type==="comment"?r?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,t.indent)){const i=t.items[t.items.length-2]?.value?.end;if(Array.isArray(i)){Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=t.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;n.value||Ey(n.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>t.indent){const r=this.startBlockValue(t);if(r){this.stack.push(r);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){const n=t.items[t.items.length-1];if(this.type==="flow-error-end"){let r;do yield*this.pop(),r=this.peek(1);while(r&&r.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?t.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);!n||n.value?t.items.push({start:[],key:i,sep:[]}):n.sep?this.stack.push(i):Object.assign(n,{key:i,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}const r=this.startBlockValue(t);r?this.stack.push(r):(yield*this.pop(),yield*this.step())}else{const r=this.peek(2);if(r.type==="block-map"&&(this.type==="map-value-ind"&&r.indent===t.indent||this.type==="newline"&&!r.items[r.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&r.type!=="flow-collection"){const i=TN(r),s=R_(i);lCe(t);const o=t.end.splice(1,t.end.length);o.push(this.sourceToken);const a={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:s,key:t,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const n=TN(t),r=R_(n);return r.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const n=TN(t),r=R_(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,n){return this.type!=="comment"||this.indent<=n?!1:t.every(r=>r.type==="newline"||r.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}}function Gmn(e){const t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new qmn||null,prettyErrors:t}}function Ymn(e,t={}){const{lineCounter:n,prettyErrors:r}=Gmn(t),i=new Wmn(n?.addNewLine),s=new Bmn(t);let o=null;for(const a of s.compose(i.parse(e),!0,e.length))if(!o)o=a;else if(o.options.logLevel!=="silent"){o.errors.push(new RA(a.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return r&&n&&(o.errors.forEach(rCe(e,n)),o.warnings.forEach(rCe(e,n))),o}const Kmn="#/definitions/StudyConfig",Xmn="http://json-schema.org/draft-07/schema#",Qmn=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"ButtonsResponse":{"additionalProperties":false,"description":"The ButtonsResponse interface is used to define the properties of a buttons response. ButtonsResponses render as a list of buttons that the participant can click. When a button is clicked, the value of the button is stored in the data file. Participants can cycle through the options using the arrow keys.\\n\\nExample: ```js {   \\"id\\": \\"buttonsResponse\\",   \\"type\\": \\"buttons\\",   \\"prompt\\": \\"Click a button\\",   \\"location\\": \\"belowStimulus\\",   \\"options\\": [     \\"Option 1\\",     \\"Option 2\\",     \\"Option 3\\"   ] } ``` In this example, the participant can click one of the buttons labeled \\"Option 1\\", \\"Option 2\\", or \\"Option 3\\".","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"buttons","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"optionOrder":{"description":"The order in which the checkboxes are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"ConfigResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DividerResponse":{"additionalProperties":false,"properties":{"hidden":{"not":{}},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"not":{}},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"not":{}},"prompt":{"not":{}},"required":{"not":{}},"requiredLabel":{"not":{}},"requiredValue":{"not":{}},"secondaryText":{"not":{}},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"divider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"not":{}}},"required":["id","type"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required. This will make the dropdown a multiselect dropdown.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required. This will make the dropdown a multiselect dropdown.","type":"number"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"description":"The DynamicBlock interface is used to define a block where displayed components are controlled by a function. This is useful when you want to generate the sequence based on answers to previous questions or other factors.\\n\\nThe functionPath property is a path to the function that generates the components. This should be a relative path from the src/public folder.\\n\\nHere\'s an example of how to use the DynamicBlock:\\n\\n```js {   \\"id\\": \\"funcBlock\\",   \\"order\\": \\"dynamic\\",   \\"functionPath\\": \\"<study-name>/assets/function.js\\",   \\"parameters\\": {     \\"param1\\": \\"value1\\",     \\"param2\\": \\"value2\\"   } } ```","properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the function. These can be used within your function to render different things.","type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"image","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"},{"$ref":"#/definitions/VideoComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5, \\"start\\": 1, \\"spacing\\": 1 } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"spacing":{"description":"The spacing between the options. Defaults to 1.","type":"number"},"start":{"description":"The starting value of the likert scale. Defaults to 1.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"markdown","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"questionOrder":{"description":"The order in which the questions are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"questionnaire","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the radio buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6\\"], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"RankingResponse":{"additionalProperties":false,"description":"The RankingResponse interface is used to define the properties of a ranking widget response. RankingResponses render as a ranking widget with user specified options.\\n\\nThere are three types of ranking widgets: Ranking Sublist: The participant is asked to rank a subset of items from a larger list. Ranking Categorical: The participant is asked to rank items within categories: HIGH, MEDIUM, and LOW. Ranking Pairwise: The participant is asked to rank items by comparing them in pairs.\\n\\n```js { \\"id\\": \\"ranking-sublist\\", \\"type\\": \\"ranking-sublist\\", \\"prompt\\": \\"Rank your top 2 favorite fruits from the list below\\", \\"location\\": \\"belowStimulus\\", \\"options\\": [\\"Apple\\", \\"Banana\\", \\"Orange\\", \\"Strawberry\\", \\"Grapes\\"], \\"numItems\\": 2 }, { \\"id\\": \\"ranking-categorical\\", \\"type\\": \\"ranking-categorical\\", \\"prompt\\": \\"Sort these hobbies into the categories of HIGH, MEDIUM, and LOW based on your level of interest.\\", \\"location\\": \\"belowStimulus\\", \\"options\\": [\\"Drawing\\", \\"Singing\\", \\"Hiking\\", \\"Dancing\\", \\"Photography\\"] }, { \\"id\\": \\"ranking-pairwise\\", \\"type\\": \\"ranking-pairwise\\", \\"prompt\\": \\"Which meal would you prefer\\", \\"location\\": \\"belowStimulus\\", \\"options\\": [\\"Pizza\\", \\"Sushi\\", \\"Burger\\", \\"Pasta\\", \\"Salad\\", \\"Tacos\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of items to rank. Applies only to sublist and categorical ranking widgets.","type":"number"},"options":{"description":"The options that are displayed as ranking options, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"enum":["ranking-sublist","ranking-categorical","ranking-pairwise"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.3.2/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.3.2/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"react-component","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/RankingResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"},{"$ref":"#/definitions/ButtonsResponse"},{"$ref":"#/definitions/TextOnlyResponse"},{"$ref":"#/definitions/DividerResponse"}]},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"smeqStyle":{"description":"Whether to render the slider with a SMEQ style. Defaults to false.","type":"boolean"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"spacing":{"description":"The spacing between the ticks. If not provided, the spacing is calculated as the range of the slider divided by power of 10.","type":"number"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"step":{"description":"The step value of the slider. If not provided (and snap not enabled), the step value is calculated as the range of the slider divided by 100.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"tlxStyle":{"description":"Whether to render the slider with a NASA-tlx style. Defaults to false.","type":"boolean"},"type":{"const":"slider","type":"string"},"withBar":{"description":"Whether to render the slider with a bar to the left. Defaults to true.","type":"boolean"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, buttons, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants. Markdown is supported.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.3.2/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"anyOf":[{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}],"description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"Styles":{"additionalProperties":false,"properties":{"background":{"description":"Background","type":"string"},"backgroundColor":{"type":"string"},"backgroundImage":{"type":"string"},"backgroundPosition":{"type":"string"},"backgroundSize":{"type":"string"},"border":{"description":"Border","type":"string"},"borderRadius":{"type":"string"},"bottom":{"type":"string"},"color":{"description":"Typography","type":"string"},"filter":{"description":"Filter","type":"string"},"font":{"type":"string"},"fontFamily":{"type":"string"},"fontSize":{"type":"string"},"fontStyle":{"enum":["normal","italic","oblique"],"type":"string"},"fontWeight":{"type":["string","number"]},"height":{"description":"Sizing","type":"string"},"left":{"type":"string"},"letterSpacing":{"type":"string"},"lineHeight":{"type":["string","number"]},"margin":{"description":"Spacing","type":"string"},"maxHeight":{"type":"string"},"maxWidth":{"type":"string"},"minHeight":{"type":"string"},"minWidth":{"type":"string"},"padding":{"type":"string"},"position":{"description":"Positioning","enum":["static","relative","absolute","fixed","sticky"],"type":"string"},"right":{"type":"string"},"textAlign":{"enum":["start","center","end","justify","left","right","match-parent"],"type":"string"},"textDecoration":{"enum":["none","underline","overline","line-through","underline-overline"],"type":"string"},"textTransform":{"enum":["capitalize","lowercase","none","uppercase"],"type":"string"},"top":{"type":"string"},"transform":{"description":"Transform","type":"string"},"width":{"type":"string"},"wordSpacing":{"type":"string"}},"type":"object"},"TextOnlyResponse":{"additionalProperties":false,"description":"The TextOnlyResponse interface is used to define the properties of a text only response. TextOnlyResponses render as a block of text that is displayed to the user. This can be used to display instructions or other information. It does not accept any input from the user.\\n\\nExample: ```js {   \\"id\\": \\"textOnlyResponse\\",   \\"type\\": \\"textOnly\\",   \\"prompt\\": \\"This is a text only response, it accepts markdown so you can **bold** or _italicize_ text.\\",   \\"location\\": \\"belowStimulus\\",   \\"restartEnumeration\\": true } ```\\n\\nIn this example, the text only response is displayed below the stimulus and the enumeration of the questions is restarted.","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"not":{}},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"not":{}},"prompt":{"description":"The markdown text that is displayed to the user.","type":"string"},"required":{"not":{}},"requiredLabel":{"not":{}},"requiredValue":{"not":{}},"restartEnumeration":{"description":"Whether to restart the enumeration of the questions. Defaults to false.","type":"boolean"},"secondaryText":{"not":{}},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"textOnly","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"not":{}}},"required":["id","prompt","type"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"withSidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `<study-name>/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. Defaults to true.","type":"boolean"},"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions."},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"minHeightSize":{"description":"The minimum screen height size for the study","type":"number"},"minWidthSize":{"description":"The minimum screen width size for the study","type":"number"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text to display on the next button.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. Defaults to 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"previousButtonText":{"description":"The text that is displayed on the previous button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. Defaults to false.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If true, will record audio on all components unless deactivated on individual components. This must be set to true if you want to record audio on any component in your study. Defaults to false. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before any component that you want to record the screen on to ensure permissions are granted and screen capture has started.","type":"boolean"},"recordScreenFPS":{"description":"Desired fps for recording screen. If possible, this value will be used, but if it\'s not possible, the user agent will use the closest possible match.","type":"number"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"showTitle":{"description":"Controls whether the title should be hidden in the study.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"}},"required":["logoPath","contactEmail","withProgressBar","withSidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"VideoComponent":{"additionalProperties":false,"description":"The VideoComponent interface is used to define the properties of a video component. This component is used to render a video with optional controls.\\n\\nMost often, video components will be used for trainings, and will have a `forceCompletion` field set to true. This will prevent the participant from moving on until the video has finished playing.\\n\\nAs such, the `forceCompletion` field is set to true by default, and the `withTimeline` field is set to false by default.\\n\\nFor example, to render a training video with a path of `<study-name>/assets/video.mp4`, you would use the following snippet: ```js {   \\"type\\": \\"video\\",   \\"path\\": \\"<study-name>/assets/video.mp4\\", } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"video","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] }, \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ] } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"website","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"}}'),Jmn={$ref:Kmn,$schema:Xmn,definitions:Qmn},Zmn="#/definitions/GlobalConfig",egn="http://json-schema.org/draft-07/schema#",tgn={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},ngn={$ref:Zmn,$schema:egn,definitions:tgn},rgn="#/definitions/LibraryConfig",ign="http://json-schema.org/draft-07/schema#",sgn=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"ButtonsResponse":{"additionalProperties":false,"description":"The ButtonsResponse interface is used to define the properties of a buttons response. ButtonsResponses render as a list of buttons that the participant can click. When a button is clicked, the value of the button is stored in the data file. Participants can cycle through the options using the arrow keys.\\n\\nExample: ```js {   \\"id\\": \\"buttonsResponse\\",   \\"type\\": \\"buttons\\",   \\"prompt\\": \\"Click a button\\",   \\"location\\": \\"belowStimulus\\",   \\"options\\": [     \\"Option 1\\",     \\"Option 2\\",     \\"Option 3\\"   ] } ``` In this example, the participant can click one of the buttons labeled \\"Option 1\\", \\"Option 2\\", or \\"Option 3\\".","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"buttons","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"optionOrder":{"description":"The order in which the checkboxes are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"ConfigResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DividerResponse":{"additionalProperties":false,"properties":{"hidden":{"not":{}},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"not":{}},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"not":{}},"prompt":{"not":{}},"required":{"not":{}},"requiredLabel":{"not":{}},"requiredValue":{"not":{}},"secondaryText":{"not":{}},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"divider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"not":{}}},"required":["id","type"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required. This will make the dropdown a multiselect dropdown.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required. This will make the dropdown a multiselect dropdown.","type":"number"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"DynamicBlock":{"additionalProperties":false,"description":"The DynamicBlock interface is used to define a block where displayed components are controlled by a function. This is useful when you want to generate the sequence based on answers to previous questions or other factors.\\n\\nThe functionPath property is a path to the function that generates the components. This should be a relative path from the src/public folder.\\n\\nHere\'s an example of how to use the DynamicBlock:\\n\\n```js {   \\"id\\": \\"funcBlock\\",   \\"order\\": \\"dynamic\\",   \\"functionPath\\": \\"<study-name>/assets/function.js\\",   \\"parameters\\": {     \\"param1\\": \\"value1\\",     \\"param2\\": \\"value2\\"   } } ```","properties":{"functionPath":{"description":"The path to the function that generates the components. This should be a relative path from the src/public folder.","type":"string"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"order":{"const":"dynamic","description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the function. These can be used within your function to render different things.","type":"object"}},"required":["id","order","functionPath"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"image","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"},{"$ref":"#/definitions/VideoComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This could be a relative path from the public folder or a url to an external image.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega","video"],"type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.3.2/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"additionalDescription":{"description":"Additional description of the library. It accepts markdown formatting.","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/ComponentBlock"},{"$ref":"#/definitions/DynamicBlock"}],"description":"The order of the components in the study. This might include some randomness."},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5, \\"start\\": 1, \\"spacing\\": 1 } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"spacing":{"description":"The spacing between the options. Defaults to 1.","type":"number"},"start":{"description":"The starting value of the likert scale. Defaults to 1.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"markdown","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"questionOrder":{"description":"The order in which the questions are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"questionnaire","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"optionOrder":{"description":"The order in which the radio buttons are displayed. Defaults to fixed.","enum":["fixed","random"],"type":"string"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6\\"], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"RankingResponse":{"additionalProperties":false,"description":"The RankingResponse interface is used to define the properties of a ranking widget response. RankingResponses render as a ranking widget with user specified options.\\n\\nThere are three types of ranking widgets: Ranking Sublist: The participant is asked to rank a subset of items from a larger list. Ranking Categorical: The participant is asked to rank items within categories: HIGH, MEDIUM, and LOW. Ranking Pairwise: The participant is asked to rank items by comparing them in pairs.\\n\\n```js { \\"id\\": \\"ranking-sublist\\", \\"type\\": \\"ranking-sublist\\", \\"prompt\\": \\"Rank your top 2 favorite fruits from the list below\\", \\"location\\": \\"belowStimulus\\", \\"options\\": [\\"Apple\\", \\"Banana\\", \\"Orange\\", \\"Strawberry\\", \\"Grapes\\"], \\"numItems\\": 2 }, { \\"id\\": \\"ranking-categorical\\", \\"type\\": \\"ranking-categorical\\", \\"prompt\\": \\"Sort these hobbies into the categories of HIGH, MEDIUM, and LOW based on your level of interest.\\", \\"location\\": \\"belowStimulus\\", \\"options\\": [\\"Drawing\\", \\"Singing\\", \\"Hiking\\", \\"Dancing\\", \\"Photography\\"] }, { \\"id\\": \\"ranking-pairwise\\", \\"type\\": \\"ranking-pairwise\\", \\"prompt\\": \\"Which meal would you prefer\\", \\"location\\": \\"belowStimulus\\", \\"options\\": [\\"Pizza\\", \\"Sushi\\", \\"Burger\\", \\"Pasta\\", \\"Salad\\", \\"Tacos\\"] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of items to rank. Applies only to sublist and categorical ranking widgets.","type":"number"},"options":{"description":"The options that are displayed as ranking options, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"enum":["ranking-sublist","ranking-categorical","ranking-pairwise"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.3.2/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.3.2/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"react-component","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/RankingResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"},{"$ref":"#/definitions/ButtonsResponse"},{"$ref":"#/definitions/TextOnlyResponse"},{"$ref":"#/definitions/DividerResponse"}]},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"smeqStyle":{"description":"Whether to render the slider with a SMEQ style. Defaults to false.","type":"boolean"},"snap":{"description":"Whether the slider should snap between values. Defaults to false. Slider snapping disables the label above the handle.","type":"boolean"},"spacing":{"description":"The spacing between the ticks. If not provided, the spacing is calculated as the range of the slider divided by power of 10.","type":"number"},"startingValue":{"description":"The starting value of the slider. Defaults to the minimum value.","type":"number"},"step":{"description":"The step value of the slider. If not provided (and snap not enabled), the step value is calculated as the range of the slider divided by 100.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"tlxStyle":{"description":"Whether to render the slider with a NASA-tlx style. Defaults to false.","type":"boolean"},"type":{"const":"slider","type":"string"},"withBar":{"description":"Whether to render the slider with a bar to the left. Defaults to true.","type":"boolean"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, buttons, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants. Markdown is supported.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"Styles":{"additionalProperties":false,"properties":{"background":{"description":"Background","type":"string"},"backgroundColor":{"type":"string"},"backgroundImage":{"type":"string"},"backgroundPosition":{"type":"string"},"backgroundSize":{"type":"string"},"border":{"description":"Border","type":"string"},"borderRadius":{"type":"string"},"bottom":{"type":"string"},"color":{"description":"Typography","type":"string"},"filter":{"description":"Filter","type":"string"},"font":{"type":"string"},"fontFamily":{"type":"string"},"fontSize":{"type":"string"},"fontStyle":{"enum":["normal","italic","oblique"],"type":"string"},"fontWeight":{"type":["string","number"]},"height":{"description":"Sizing","type":"string"},"left":{"type":"string"},"letterSpacing":{"type":"string"},"lineHeight":{"type":["string","number"]},"margin":{"description":"Spacing","type":"string"},"maxHeight":{"type":"string"},"maxWidth":{"type":"string"},"minHeight":{"type":"string"},"minWidth":{"type":"string"},"padding":{"type":"string"},"position":{"description":"Positioning","enum":["static","relative","absolute","fixed","sticky"],"type":"string"},"right":{"type":"string"},"textAlign":{"enum":["start","center","end","justify","left","right","match-parent"],"type":"string"},"textDecoration":{"enum":["none","underline","overline","line-through","underline-overline"],"type":"string"},"textTransform":{"enum":["capitalize","lowercase","none","uppercase"],"type":"string"},"top":{"type":"string"},"transform":{"description":"Transform","type":"string"},"width":{"type":"string"},"wordSpacing":{"type":"string"}},"type":"object"},"TextOnlyResponse":{"additionalProperties":false,"description":"The TextOnlyResponse interface is used to define the properties of a text only response. TextOnlyResponses render as a block of text that is displayed to the user. This can be used to display instructions or other information. It does not accept any input from the user.\\n\\nExample: ```js {   \\"id\\": \\"textOnlyResponse\\",   \\"type\\": \\"textOnly\\",   \\"prompt\\": \\"This is a text only response, it accepts markdown so you can **bold** or _italicize_ text.\\",   \\"location\\": \\"belowStimulus\\",   \\"restartEnumeration\\": true } ```\\n\\nIn this example, the text only response is displayed below the stimulus and the enumeration of the questions is restarted.","properties":{"excludeFromRandomization":{"description":"Exclude response from randomization. If present, will override the responseOrder randomization setting in the components. Defaults to false.","type":"boolean"},"hidden":{"not":{}},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"infoText":{"description":"The description that is displayed when the participant hovers over the response. This does not accept markdown.","type":"string"},"location":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"not":{}},"prompt":{"description":"The markdown text that is displayed to the user.","type":"string"},"required":{"not":{}},"requiredLabel":{"not":{}},"requiredValue":{"not":{}},"restartEnumeration":{"description":"Whether to restart the enumeration of the questions. Defaults to false.","type":"boolean"},"secondaryText":{"not":{}},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"type":{"const":"textOnly","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider. If present, will override the divider setting in the components or uiConfig.","type":"boolean"},"withDontKnow":{"not":{}}},"required":["id","prompt","type"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"vega","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withActions":{"description":"Whether to include vega actions. Defaults to true.","type":"boolean"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"VideoComponent":{"additionalProperties":false,"description":"The VideoComponent interface is used to define the properties of a video component. This component is used to render a video with optional controls.\\n\\nMost often, video components will be used for trainings, and will have a `forceCompletion` field set to true. This will prevent the participant from moving on until the video has finished playing.\\n\\nAs such, the `forceCompletion` field is set to true by default, and the `withTimeline` field is set to false by default.\\n\\nFor example, to render a training video with a path of `<study-name>/assets/video.mp4`, you would use the following snippet: ```js {   \\"type\\": \\"video\\",   \\"path\\": \\"<study-name>/assets/video.mp4\\", } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"forceCompletion":{"description":"Whether to force the video to play until the end. Defaults to true.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"path":{"description":"The path to the video. This could be a relative path from the public folder or might be a url to an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"video","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"},"withTimeline":{"description":"Whether to show the video timeline. Defaults to false.","type":"boolean"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] }, \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ] } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If present, will override the allow failed training setting in the uiConfig.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar. If present, will override the enumeration of questions setting in the uiConfig.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported. If present, will override the help text path set in the uiConfig.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the instructions. If present, will override the instruction location setting in the uiConfig."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"The time in milliseconds to wait before the next button is disabled. If present, will override the next button disable time setting in the uiConfig.","type":"number"},"nextButtonEnableTime":{"description":"The time in milliseconds to wait before the next button is enabled. If present, will override the next button enable time setting in the uiConfig.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ConfigResponseBlockLocation","description":"The location of the next button. If present, will override the  next button location setting in the uiConfig."},"nextButtonText":{"description":"The text to display on the next button. If present, will override the next button text setting in the uiConfig.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. If present, will override the enter key setting in the uiConfig.","type":"boolean"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"previousButton":{"description":"Whether to show the previous button. If present, will override the previous button setting in the uiConfig.","type":"boolean"},"previousButtonText":{"description":"The text that is displayed on the previous button. If present, will override the previous button text setting in the uiConfig.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If present, will override the provide feedback setting in the uiConfig.","type":"boolean"},"recordAudio":{"description":"Whether or not we want to utilize think-aloud features. If present, will override the record audio setting in the uiConfig.","type":"boolean"},"recordScreen":{"description":"Whether or not we want to utilize screen recording feature. If present, will override the record screen setting in the uiConfig. If true, the uiConfig must have recordScreen set to true or the screen will not be captured. It\'s also required that the library component, $screen-recording.co.screenRecordingPermission, be included in the study at some point before this component to ensure permissions are granted and screen capture has started.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. If present, will override the response dividers setting in the uiConfig.","type":"boolean"},"responseOrder":{"description":"The order of the responses. Defaults to \'fixed\'.","enum":["fixed","random"],"type":"string"},"showTitle":{"description":"Controls whether the title should be hidden in the study. If present, will override the title setting in the uiConfig.","type":"boolean"},"showTitleBar":{"description":"Controls whether the title bar should be hidden in the study. If present, will override the title bar setting in the uiConfig.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. If present, will override the sidebar width setting in the uiConfig.","type":"number"},"style":{"$ref":"#/definitions/Styles","description":"You can set styles here, using React CSSProperties, for example: `{\\"width\\": 100}` or `{\\"width\\": \\"50%\\"}`"},"stylesheetPath":{"description":"The path to the external stylesheet file.","type":"string"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. If present, will override the training attempts setting in the uiConfig.","type":"number"},"type":{"const":"website","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. If present, will override the window event debounce time setting in the uiConfig.","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered. If present, will override the progress bar setting in the uiConfig.","type":"boolean"},"withSidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question. If present, will override the sidebar setting in the uiConfig.","type":"boolean"}},"required":["path","response","type"],"type":"object"}}'),ogn={$ref:rgn,$schema:ign,definitions:sgn},fUe=new rle({allowUnionTypes:!0});fUe.addSchema(ogn);const agn=fUe.getSchema("#/definitions/LibraryConfig");function hUe(e,t){return Yd(e)?e:{...e,components:e.components.map(n=>typeof n=="object"?hUe(n,t):`$${t}.components.${n}`)}}function pUe(e,t,n=[]){return Yd(e)?e:{...e,components:(e.components||[]).map(r=>{if(typeof r=="object")return pUe(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let u=t[a].sequences[o];if(!u){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return u=hUe(u,a),u}return r})}}function lgn(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{bL(o)&&!i.baseComponents?.[o.baseComponent]&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function ugn(e,t){let n=!1,r;try{r=JSON.parse(e),n=agn(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function cgn(e){const t=await(await fetch(`${as}libraries/${e}/config.json`)).text();return ugn(t,e)}async function dgn(e,t,n){const r=e.map(async s=>{const o=await cgn(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(bL(a)){const l=iPe({},i[s].baseComponents[a.baseComponent],a);return delete l.baseComponent,[[`$${s}.components.${o}`,l],[`$${s}.co.${o}`,l]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,l])=>(o.push(a,l),o),[])))}),i}const mUe=new rle({allowUnionTypes:!0});mUe.addSchema(ngn);const uCe=mUe.getSchema("#/definitions/GlobalConfig"),gUe=new rle({allowUnionTypes:!0});gUe.addSchema(Jmn);const Aq=gUe.getSchema("#/definitions/StudyConfig");function fgn(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function hgn(e){const t=JSON.parse(e),n=uCe(t),r=fgn(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...uCe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function yUe(e,t,n=[]){if(!Yd(e)){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):yUe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}}function pgn(e,t){const n=[],r=[];lgn(e,n,t),Object.entries(e.components).forEach(([o,a])=>{bL(a)&&!e.baseComponents?.[a.baseComponent]&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=ePe(e.sequence);i.forEach(o=>{e.components[o]||n.push({message:e.baseComponents?.[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used deterministically in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return yUe(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function ble(e){let t=!1,n;try{n=JSON.parse(e),t=Aq(n)}catch{try{n=Ymn(e).toJSON(),t=Aq(n)}catch(s){console.error("Error parsing study config file:",s),t=!1}}let r=Aq.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await dgn(s,r,i);Object.values(o).forEach(u=>{n.components={...n.components,...u.components},n.baseComponents={...n.baseComponents,...u.components}}),n.sequence=pUe(n.sequence,o,r);const{errors:a,warnings:l}=pgn(n,o);r=[...r,...a],i=[...i,...l]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function mgn(e){const t=await(await fetch(`${as}${e}`)).text();return await ble(t)}async function wle(e,t){const n=t.configsList.find(r=>kIe(r)===e);if(n){const r=t.configs[n];return await mgn(`${r.path}`)}return null}async function ggn(e){const t={},n=e.configsList.map(async i=>wle(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function ygn({globalConfig:e}){const t=Mh(),[n,r]=k.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";k.useEffect(()=>{if(t!=="__revisit-widget")return wle(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&ble(m.data.payload).then(async g=>{r(g);const y=await cq(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=k.useState([]),[a,l]=k.useState(null),{storageEngine:u}=Vi(),[c]=nd(),d=k.useMemo(()=>c.get("participantId"),[c]);k.useEffect(()=>{async function p(){if(!(!u||!n||!t)){try{await u.initializeStudyDb(t),await u.saveConfig(n),await u.getSequenceArray()||await u.setSequenceArray(await cq(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),v=await fetch("https://api.ipify.org?format=json").catch(I=>""),b=v instanceof Response?await v.json():{ip:""},_={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},E=await u.initializeParticipantSession(y,n,_,d||g),S=await u.getModes(t),T=await bG(JSON.stringify(n));let A=n;E.participantConfigHash!==T&&(A=(await u.getAllConfigsFromHash([E.participantConfigHash],t))[E.participantConfigHash]);const R=await yme(t,A,E.sequence,_,E.answers,S,E.participantId,E.completed,!1);l(R)}catch(m){console.error("Error initializing user store routing:",m);const g=await yme(t,n,cq(n)[0],{language:"",userAgent:"",resolution:{width:0,height:0,availHeight:0,availWidth:0,colorDepth:0,orientation:"",pixelDepth:0},ip:""},{},{studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0,dataCollectionEnabled:!1},"",!1,!0);l(g)}o([{element:w.jsx(Ahn,{}),children:[{path:"/",element:w.jsx(hVe,{to:js(0),replace:!0})},{path:"/:index/:funcIndex?",element:n.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(ri,{order:2,mb:8,children:"Error loading config"}),w.jsx(l4,{issues:n.errors,type:"error"})]}):w.jsx(Pfn,{})}]}])}}p()},[u,n,t,c,d]);const f=nIe(s);let h=null;return i?s.length===0?h=w.jsx(hu,{visible:!0}):h=f&&a?w.jsx(sPe.Provider,{value:a,children:w.jsx(ubt,{store:a.store,children:f})}):w.jsx(i0,{}):h=w.jsx(i0,{}),h}function NM({studyIds:e}){const t=$l(),{studyId:n}=So(),r=hf(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return w.jsx(ps.Header,{p:"md",children:w.jsxs(Ss,{mt:-7,align:"center",children:[w.jsx(Ss.Col,{span:6,children:w.jsxs(Rt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[w.jsx(x0,{w:40,src:`${as}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsx(zd,{w:"md"}),w.jsx(ri,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),w.jsx(Ss.Col,{span:6,children:w.jsxs(Rt,{justify:"flex-end",direction:"row",children:[s&&w.jsxs(w.Fragment,{children:[w.jsx(Ug,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),w.jsx(Yt,{component:"a",href:`${as}${n}`,target:"_blank",leftSection:w.jsx(bIe,{}),mr:"sm",children:"Go to Study"})]}),w.jsx(SIe,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}const AN=20,vgn=5,oy={left:5,right:5,top:10,bottom:10},ay={UNANSWERED:{FILL:"grey",STROKE:"#666"},ANSWERED:{FILL:"green",STROKE:"#166534"},DYNAMIC:{FILL:"teal",STROKE:"#0d9488"},TEXT:"white"};function bgn({total:e,answered:t,isDynamic:n}){const r=n?t.length:e,i=k.useMemo(()=>{const u=Math.max(300,r*50);return sc().domain([0,r]).range([oy.left,u-oy.right])},[r]);if(!e||e<=0||Number.isNaN(e))return null;const s=()=>{const u=[];for(let c=0;c<r;c+=1){const d=c<t.length,f=d?`Question ${c+1}: ${t[c]}`:`Question ${c+1}: Not answered`;let h=ay.UNANSWERED.FILL,p=ay.UNANSWERED.STROKE;n?(h=ay.DYNAMIC.FILL,p=ay.DYNAMIC.STROKE):d&&(h=ay.ANSWERED.FILL,p=ay.ANSWERED.STROKE);const m=i(c),g=i(c+1)-i(c)-vgn,y=Math.max(g,2);u.push(w.jsx(bt,{label:f,position:"top",withinPortal:!0,children:w.jsxs("g",{children:[w.jsx("rect",{x:m,y:oy.top,width:y,height:AN,fill:h,stroke:p,strokeWidth:"1.5",rx:"3",style:{cursor:"pointer"}}),w.jsxs("text",{x:m+y/2,y:oy.top+AN/2+4,fontSize:"11",fontWeight:"600",fill:ay.TEXT,textAnchor:"middle",pointerEvents:"none",children:["Q",c+1]})]})},c))}return n&&r>0&&u.push(w.jsx("text",{x:i(r)+10,y:oy.top+AN/2+7,fontSize:"20",fontWeight:"bold",fill:ay.DYNAMIC.FILL,children:"?"},"question-mark")),u},o=Math.max(300,i(r)+(n?40:oy.right)),a=AN+oy.top+oy.bottom;return w.jsxs(w.Fragment,{children:[w.jsx("style",{children:`
      .progress-heatmap {
        display: inline-block;
        vertical-align: top;
        width: 50%;
        overflow-x: auto;
        overflow-y: hidden;
        white-space: nowrap;
      }
      .progress-heatmap svg {
        display: inline-block;
        vertical-align: top;
      }
      
      /* Custom scrollbar styling */
      .progress-heatmap::-webkit-scrollbar {
        height: 8px;
      }
      .progress-heatmap::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }
      .progress-heatmap::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 4px;
      }
      .progress-heatmap::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
      }
      
      @media (max-width: 900px) {
        .progress-heatmap {
          width: 100% !important;
          display: block;
        }
      }
    `}),w.jsx("div",{className:"progress-heatmap",children:w.jsx("svg",{width:o,height:a,children:s()})})]})}function kq({title:e,titleColor:t,participants:n,showProgressHeatmap:r=!1,showDynamicBadge:i=!1,progressValue:s,progressColor:o,progressLabel:a}){const[l,u]=k.useState(!0);return w.jsxs(w.Fragment,{children:[w.jsxs(Pn,{gap:"xs",style:{cursor:"pointer"},onClick:()=>u(!l),children:[w.jsx(Rn,{variant:"subtle",color:t,size:"sm",children:l?w.jsx(lee,{size:18}):w.jsx(hIe,{size:18})}),w.jsxs(ri,{order:5,c:t,children:[e," ","(",n.length,")"]})]}),w.jsx(vm,{in:l,children:n.length>0&&w.jsx(Ss,{mt:"xs",children:n.map(({assignment:c,progress:d},f)=>w.jsx(Ss.Col,{span:12,children:w.jsx(Zv,{shadow:"sm",padding:"sm",radius:"md",withBorder:!0,children:w.jsxs(Pn,{justify:"space-between",align:"center",children:[w.jsxs("div",{children:[w.jsxs(Pn,{gap:"xs",align:"center",children:[w.jsxs(He,{fw:500,size:"sm",children:["Participant:"," ",c.participantId||`#${f+1}`]}),i&&c.isDynamic&&w.jsx(_o,{size:"xs",color:"cyan",children:"DYNAMIC"})]}),w.jsxs(He,{size:"xs",c:"dimmed",children:["Started:"," ",new Date(c.createdTime).toLocaleString()]})]}),r&&w.jsx(bgn,{total:c.total,answered:c.answered,isDynamic:c.isDynamic}),w.jsx(JF,{size:60,thickness:6,sections:[{value:s(c,d),color:o}],label:bn.createElement(a,{assignment:c,progress:d})})]})})},c.participantId||`${e.toLowerCase()}-${f}`))})})]})}function wgn({assignment:e,progress:t}){return w.jsxs(He,{c:"orange",fw:700,ta:"center",size:"xs",children:[e.isDynamic?"?":Math.round(t),"%"]})}function xgn(){return w.jsx(Ko,{children:w.jsx(Rn,{color:"teal",variant:"light",radius:"xl",size:"sm",children:w.jsx(mv,{size:16})})})}function _gn({progress:e}){return w.jsxs(He,{c:"red",fw:700,ta:"center",size:"xs",children:[Math.round(e),"%"]})}function Egn({studyConfig:e,storageEngine:t,studyId:n,includedParticipants:r,selectedStages:i}){const s=t,[o,a]=k.useState([]),[l,u]=k.useState("connecting"),[c,d]=k.useState(null),[f,h]=k.useState(!1),p=v=>{a(v),d(new Date),h(!1)},m=k.useCallback(async()=>{if(!s||!n||f)return;if(!navigator.onLine){u("disconnected");return}h(!0),u("connecting");const v=setTimeout(()=>{l==="connecting"&&(u("disconnected"),h(!1))},1e4);try{s.initializeStudyDb(n);const b=await s.getAllSequenceAssignments(n);clearTimeout(v),p(b),u("connected")}catch(b){console.error("Reconnection failed:",b),clearTimeout(v),u("disconnected"),h(!1)}},[s,n,f,l]);k.useEffect(()=>{if(!s||!n){u("disconnected");return}u("connecting"),s.initializeStudyDb(n);const v=s._setupSequenceAssignmentListener?.(n,b=>{p(b)});return u(typeof v=="function"?"connected":"disconnected"),()=>{v?.()}},[s,n]),k.useEffect(()=>{const v=()=>{s&&n&&l==="disconnected"&&m()},b=()=>{u("disconnected"),h(!1)};return window.addEventListener("online",v),window.addEventListener("offline",b),()=>{window.removeEventListener("online",v),window.removeEventListener("offline",b)}},[s,n,l,m]);const g=k.useMemo(()=>o.map(v=>{const b=v.total>0?v.answered.length/v.total*100:0,_=v.completed!==null,E=v.rejected;return{assignment:v,progress:b,isCompleted:_,isRejected:E}}).filter(({isCompleted:v,isRejected:b,assignment:_})=>{const E=b?"rejected":v?"completed":"inprogress",S=r.includes(E),T=i.includes("ALL")||i.includes(_.stage||"");return S&&T}).sort((v,b)=>b.assignment.createdTime-v.assignment.createdTime),[o,r,i]),y=k.useMemo(()=>{const v=g.filter(E=>!E.isCompleted&&!E.isRejected),b=g.filter(E=>E.isCompleted&&!E.isRejected),_=g.filter(E=>E.isRejected);return{inProgress:v,completed:b,rejected:_}},[g]);return w.jsxs(Gn,{gap:"sm",children:[w.jsx(Zv,{shadow:"sm",padding:"sm",radius:"md",withBorder:!0,style:{position:"sticky",top:0,zIndex:100,backgroundColor:"white",marginBottom:"1rem"},children:w.jsxs(Rt,{justify:"space-between",align:"center",children:[w.jsxs(Pn,{gap:"md",children:[w.jsx(ri,{order:5,size:"h5",children:"Live Monitor"}),w.jsxs(He,{size:"sm",c:"dimmed",children:["Total:"," ",g.length]}),w.jsxs(Pn,{gap:"xs",children:[w.jsxs(_o,{color:"green",variant:"light",size:"sm",children:[g.filter(v=>v.isCompleted).length," ","Completed"]}),w.jsxs(_o,{color:"orange",variant:"light",size:"sm",children:[g.filter(v=>!v.isCompleted&&!v.isRejected).length," ","Active"]}),w.jsxs(_o,{color:"red",variant:"light",size:"sm",children:[g.filter(v=>v.isRejected).length," ","Rejected"]})]})]}),w.jsxs(Pn,{gap:"xs",children:[l==="disconnected"&&w.jsx(Yt,{size:"xs",variant:"light",color:"blue",leftSection:w.jsx(_Ie,{size:12}),loading:f,onClick:m,disabled:!s||!n,children:"Reconnect"}),w.jsx(bt,{label:l==="connected"?`Connected${c?` - Last data update: ${c.toLocaleTimeString()}`:""}`:l==="connecting"?"Connecting...":"Disconnected",position:"bottom-end",children:w.jsx(NF,{color:l==="connected"?"green":l==="connecting"?"yellow":"red",position:"top-end",size:10,withBorder:!0,children:l==="connected"?w.jsx(Uct,{size:22,color:"green"}):w.jsx(zct,{size:22,color:l==="connecting"?"orange":"red"})})})]})]})}),w.jsx(ri,{order:4,mt:"lg",children:"Participant Progress"}),w.jsxs(Gn,{gap:"md",children:[w.jsx(kq,{title:"In Progress",titleColor:"orange",participants:y.inProgress,showProgressHeatmap:!0,showDynamicBadge:!0,progressValue:(v,b)=>v.isDynamic?50:b,progressColor:"orange",progressLabel:wgn}),w.jsx(kq,{title:"Completed",titleColor:"teal",participants:y.completed,progressValue:()=>100,progressColor:"teal",progressLabel:xgn}),w.jsx(kq,{title:"Rejected",titleColor:"red",participants:y.rejected,progressValue:(v,b)=>b,progressColor:"red",progressLabel:_gn})]})]})}function Cgn({overviewData:e,mismatchDetails:t}){const n=r=>{if(!t)return!1;const i=t[r];return i.current!==i.calculated};return w.jsxs(lf,{shadow:"sm",p:"md",withBorder:!0,children:[w.jsx(ri,{order:4,mb:"md",children:"Overview Statistics"}),e===null?w.jsx(He,{ta:"center",mb:"md",children:"No data available"}):w.jsxs(Rt,{justify:"space-between",m:"xs",gap:"xl",wrap:"wrap",children:[w.jsxs("div",{children:[w.jsx(He,{size:"xl",fw:"bold",children:e.participantCounts.total}),w.jsx(He,{size:"sm",c:"dimmed",children:"Total Participants"})]}),w.jsxs("div",{children:[w.jsxs(Rt,{align:"center",gap:"xs",children:[n("completed")&&t&&w.jsx(bt,{label:`Calculated: ${t.completed.calculated}, Current: ${t.completed.current}`,children:w.jsx(Vd,{size:16,color:"orange"})}),w.jsx(He,{size:"xl",fw:"bold",c:"green",children:e.participantCounts.completed})]}),w.jsx(He,{size:"sm",c:"dimmed",children:"Completed"})]}),w.jsxs("div",{children:[w.jsxs(Rt,{align:"center",gap:"xs",children:[n("inProgress")&&t&&w.jsx(bt,{label:`Calculated: ${t.inProgress.calculated}, Current: ${t.inProgress.current}`,children:w.jsx(Vd,{size:16,color:"orange"})}),w.jsx(He,{size:"xl",fw:"bold",c:"yellow",children:e.participantCounts.inProgress})]}),w.jsx(He,{size:"sm",c:"dimmed",children:"In Progress"})]}),w.jsxs("div",{children:[w.jsxs(Rt,{align:"center",gap:"xs",children:[n("rejected")&&t&&w.jsx(bt,{label:`Calculated: ${t.rejected.calculated}, Current: ${t.rejected.current}`,children:w.jsx(Vd,{size:16,color:"orange"})}),w.jsx(He,{size:"xl",fw:"bold",c:"red",children:e.participantCounts.rejected})]}),w.jsx(He,{size:"sm",c:"dimmed",children:"Rejected"})]}),w.jsxs("div",{children:[w.jsx(He,{size:"xl",fw:"bold",children:e.startDate?.toLocaleDateString()||"N/A"}),w.jsx(He,{size:"sm",c:"dimmed",children:"Start Date"})]}),w.jsxs("div",{children:[w.jsx(He,{size:"xl",fw:"bold",children:e.endDate?.toLocaleDateString()||"N/A"}),w.jsx(He,{size:"sm",c:"dimmed",children:"End Date"})]}),w.jsxs("div",{children:[w.jsx(He,{size:"xl",fw:"bold",children:Number.isFinite(e.avgTime)?`${e.avgTime.toFixed(1)} s`:"N/A"}),w.jsx(He,{size:"sm",c:"dimmed",children:"Average Time"})]}),w.jsxs("div",{children:[w.jsx(He,{size:"xl",fw:"bold",children:Number.isFinite(e.avgCleanTime)?`${e.avgCleanTime.toFixed(1)} s`:"N/A"}),w.jsx(He,{size:"sm",c:"dimmed",children:"Average Clean Time"})]}),w.jsxs("div",{children:[w.jsx(He,{size:"xl",fw:"bold",children:Number.isFinite(e.correctnessStats)?`${e.correctnessStats.toFixed(1)}%`:"N/A"}),w.jsx(He,{size:"sm",c:"dimmed",children:"Correctness"})]})]})]})}function Wy(e,t){return typeof e=="function"?e(t):e}function ed(e,t){return n=>{t.setState(r=>({...r,[e]:Wy(n,r[e])}))}}function OB(e){return e instanceof Function}function Sgn(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function vUe(e,t){const n=[],r=i=>{i.forEach(s=>{n.push(s);const o=t(s);o!=null&&o.length&&r(o)})};return r(e),n}function An(e,t,n){let r=[],i;return s=>{let o;n.key&&n.debug&&(o=Date.now());const a=e(s);if(!(a.length!==r.length||a.some((c,d)=>r[d]!==c)))return i;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),i=t(...a),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,d=Math.round((Date.now()-u)*100)/100,f=d/16,h=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c ${h(d,5)} /${h(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n?.key)}return i}}function kn(e,t,n,r){return{debug:()=>{var i;return(i=e?.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function Tgn(e,t,n,r){const i=()=>{var o;return(o=s.getValue())!=null?o:e.options.renderFallbackValue},s={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:An(()=>[e,n,t,s],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),kn(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(s,n,t,e)},{}),s}function Agn(e,t,n,r){var i,s;const a={...e._getDefaultColumnDef(),...t},l=a.accessorKey;let u=(i=(s=a.id)!=null?s:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=f=>{let h=f;for(const m of l.split(".")){var p;h=(p=h)==null?void 0:p[m]}return h}:c=f=>f[a.accessorKey]),!u)throw new Error;let d={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:An(()=>[!0],()=>{var f;return[d,...(f=d.columns)==null?void 0:f.flatMap(h=>h.getFlatColumns())]},kn(e.options,"debugColumns")),getLeafColumns:An(()=>[e._getOrderColumnsFn()],f=>{var h;if((h=d.columns)!=null&&h.length){let p=d.columns.flatMap(m=>m.getLeafColumns());return f(p)}return[d]},kn(e.options,"debugColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(d,e);return d}const dl="debugHeaders";function cCe(e,t,n){var r;let s={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(s),o},getContext:()=>({table:e,header:s,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(s,e)}),s}const kgn={createTable:e=>{e.getHeaderGroups=An(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var s,o;const a=(s=r?.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?s:[],l=(o=i?.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?o:[],u=n.filter(d=>!(r!=null&&r.includes(d.id))&&!(i!=null&&i.includes(d.id)));return kN(t,[...a,...u,...l],e)},kn(e.options,dl)),e.getCenterHeaderGroups=An(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),kN(t,n,e,"center")),kn(e.options,dl)),e.getLeftHeaderGroups=An(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const s=(i=r?.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return kN(t,s,e,"left")},kn(e.options,dl)),e.getRightHeaderGroups=An(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const s=(i=r?.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return kN(t,s,e,"right")},kn(e.options,dl)),e.getFooterGroups=An(()=>[e.getHeaderGroups()],t=>[...t].reverse(),kn(e.options,dl)),e.getLeftFooterGroups=An(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),kn(e.options,dl)),e.getCenterFooterGroups=An(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),kn(e.options,dl)),e.getRightFooterGroups=An(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),kn(e.options,dl)),e.getFlatHeaders=An(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),kn(e.options,dl)),e.getLeftFlatHeaders=An(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),kn(e.options,dl)),e.getCenterFlatHeaders=An(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),kn(e.options,dl)),e.getRightFlatHeaders=An(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),kn(e.options,dl)),e.getCenterLeafHeaders=An(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),kn(e.options,dl)),e.getLeftLeafHeaders=An(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),kn(e.options,dl)),e.getRightLeafHeaders=An(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),kn(e.options,dl)),e.getLeafHeaders=An(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,s,o,a,l,u;return[...(i=(s=t[0])==null?void 0:s.headers)!=null?i:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},kn(e.options,dl))}};function kN(e,t,n,r){var i,s;let o=0;const a=function(f,h){h===void 0&&(h=1),o=Math.max(o,h),f.filter(p=>p.getIsVisible()).forEach(p=>{var m;(m=p.columns)!=null&&m.length&&a(p.columns,h+1)},0)};a(e);let l=[];const u=(f,h)=>{const p={depth:h,id:[r,`${h}`].filter(Boolean).join("_"),headers:[]},m=[];f.forEach(g=>{const y=[...m].reverse()[0],v=g.column.depth===p.depth;let b,_=!1;if(v&&g.column.parent?b=g.column.parent:(b=g.column,_=!0),y&&y?.column===b)y.subHeaders.push(g);else{const E=cCe(n,b,{id:[r,h,b.id,g?.id].filter(Boolean).join("_"),isPlaceholder:_,placeholderId:_?`${m.filter(S=>S.column===b).length}`:void 0,depth:h,index:m.length});E.subHeaders.push(g),m.push(E)}p.headers.push(g),g.headerGroup=p}),l.push(p),h>0&&u(m,h-1)},c=t.map((f,h)=>cCe(n,f,{depth:o,index:h}));u(c,o-1),l.reverse();const d=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let m=0,g=0,y=[0];p.subHeaders&&p.subHeaders.length?(y=[],d(p.subHeaders).forEach(b=>{let{colSpan:_,rowSpan:E}=b;m+=_,y.push(E)})):m=1;const v=Math.min(...y);return g=g+v,p.colSpan=m,p.rowSpan=g,{colSpan:m,rowSpan:g}});return d((i=(s=l[0])==null?void 0:s.headers)!=null?i:[]),l}const oT=(e,t,n,r,i,s,o)=>{let a={id:t,index:r,original:n,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:e.options.renderFallbackValue},subRows:s??[],getLeafRows:()=>vUe(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:An(()=>[e.getAllLeafColumns()],l=>l.map(u=>Tgn(e,a,u,u.id)),kn(e.options,"debugRows")),_getAllCellsByColumnId:An(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),kn(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const u=e._features[l];u==null||u.createRow==null||u.createRow(a,e)}return a},Ign={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},bUe=(e,t,n)=>{var r,i;const s=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((i=e.getValue(t))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(s))};bUe.autoRemove=e=>uh(e);const wUe=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};wUe.autoRemove=e=>uh(e);const xUe=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===n?.toLowerCase()};xUe.autoRemove=e=>uh(e);const _Ue=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};_Ue.autoRemove=e=>uh(e)||!(e!=null&&e.length);const EUe=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});EUe.autoRemove=e=>uh(e)||!(e!=null&&e.length);const CUe=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});CUe.autoRemove=e=>uh(e)||!(e!=null&&e.length);const SUe=(e,t,n)=>e.getValue(t)===n;SUe.autoRemove=e=>uh(e);const TUe=(e,t,n)=>e.getValue(t)==n;TUe.autoRemove=e=>uh(e);const xle=(e,t,n)=>{let[r,i]=n;const s=e.getValue(t);return s>=r&&s<=i};xle.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,s=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(i)?1/0:i;if(s>o){const a=s;s=o,o=a}return[s,o]};xle.autoRemove=e=>uh(e)||uh(e[0])&&uh(e[1]);const wp={includesString:bUe,includesStringSensitive:wUe,equalsString:xUe,arrIncludes:_Ue,arrIncludesAll:EUe,arrIncludesSome:CUe,equals:SUe,weakEquals:TUe,inNumberRange:xle};function uh(e){return e==null||e===""}const Rgn={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:ed("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n?.getValue(e.id);return typeof r=="string"?wp.includesString:typeof r=="number"?wp.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?wp.equals:Array.isArray(r)?wp.arrIncludes:wp.weakEquals},e.getFilterFn=()=>{var n,r;return OB(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:wp[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),s=r?.find(c=>c.id===e.id),o=Wy(n,s?s.value:void 0);if(dCe(i,o,e)){var a;return(a=r?.filter(c=>c.id!==e.id))!=null?a:[]}const l={id:e.id,value:o};if(s){var u;return(u=r?.map(c=>c.id===e.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var s;return(s=Wy(t,i))==null?void 0:s.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(dCe(l,o.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function dCe(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const Dgn=(e,t,n)=>n.reduce((r,i)=>{const s=i.getValue(e);return r+(typeof s=="number"?s:0)},0),Pgn=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},Ogn=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},Ngn=(e,t,n)=>{let r,i;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},Mgn=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let s=i.getValue(e);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},$gn=(e,t)=>{if(!t.length)return;const n=t.map(s=>s.getValue(e));if(!Sgn(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,o)=>s-o);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},Fgn=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Lgn=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,jgn=(e,t)=>t.length,MM={sum:Dgn,min:Pgn,max:Ogn,extent:Ngn,mean:Mgn,median:$gn,unique:Fgn,uniqueCount:Lgn,count:jgn},Bgn={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:ed("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n?.getValue(e.id);if(typeof r=="number")return MM.sum;if(Object.prototype.toString.call(r)==="[object Date]")return MM.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return OB(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:MM[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function zgn(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(s=>!t.includes(s.id));return n==="remove"?r:[...t.map(s=>e.find(o=>o.id===s)).filter(Boolean),...r]}const Vgn={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:ed("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=An(n=>[yk(t,n)],n=>n.findIndex(r=>r.id===e.id),kn(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=yk(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=yk(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=An(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let s=[];if(!(t!=null&&t.length))s=i;else{const o=[...t],a=[...i];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(c=>c.id===l);u>-1&&s.push(a.splice(u,1)[0])}s=[...s,...a]}return zgn(s,n,r)},kn(e.options,"debugTable"))}},Iq=()=>({left:[],right:[]}),Ugn={getInitialState:e=>({columnPinning:Iq(),...e}),getDefaultOptions:e=>({onColumnPinningChange:ed("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var s,o;if(n==="right"){var a,l;return{left:((a=i?.left)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((l=i?.right)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(n==="left"){var u,c;return{left:[...((u=i?.left)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((c=i?.right)!=null?c:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((s=i?.left)!=null?s:[]).filter(d=>!(r!=null&&r.includes(d))),right:((o=i?.right)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,s,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(a=>a.id),{left:r,right:i}=t.getState().columnPinning,s=n.some(a=>r?.includes(a)),o=n.some(a=>i?.includes(a));return s?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=An(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(o=>!s.includes(o.column.id))},kn(t.options,"debugRows")),e.getLeftVisibleCells=An(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),kn(t.options,"debugRows")),e.getRightVisibleCells=An(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),kn(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?Iq():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:Iq())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=An(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),kn(e.options,"debugColumns")),e.getRightLeafColumns=An(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),kn(e.options,"debugColumns")),e.getCenterLeafColumns=An(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(s=>!i.includes(s.id))},kn(e.options,"debugColumns"))}},IN={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Rq=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Hgn={getDefaultColumnDef:()=>IN,getInitialState:e=>({columnSizing:{},columnSizingInfo:Rq(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ed("columnSizing",e),onColumnSizingInfoChange:ed("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const s=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:IN.minSize,(r=s??e.columnDef.size)!=null?r:IN.size),(i=e.columnDef.maxSize)!=null?i:IN.maxSize)},e.getStart=An(n=>[n,yk(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),kn(t.options,"debugColumns")),e.getAfter=An(n=>[n,yk(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),kn(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r?.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),Dq(s)&&s.touches&&s.touches.length>1))return;const o=e.getSize(),a=e?e.getLeafHeaders().map(y=>[y.column.id,y.column.getSize()]):[[r.id,r.getSize()]],l=Dq(s)?Math.round(s.touches[0].clientX):s.clientX,u={},c=(y,v)=>{typeof v=="number"&&(t.setColumnSizingInfo(b=>{var _,E;const S=t.options.columnResizeDirection==="rtl"?-1:1,T=(v-((_=b?.startOffset)!=null?_:0))*S,A=Math.max(T/((E=b?.startSize)!=null?E:0),-.999999);return b.columnSizingStart.forEach(R=>{let[I,P]=R;u[I]=Math.round(Math.max(P+P*A,0)*100)/100}),{...b,deltaOffset:T,deltaPercentage:A}}),(t.options.columnResizeMode==="onChange"||y==="end")&&t.setColumnSizing(b=>({...b,...u})))},d=y=>c("move",y),f=y=>{c("end",y),t.setColumnSizingInfo(v=>({...v,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},h=n||typeof document<"u"?document:null,p={moveHandler:y=>d(y.clientX),upHandler:y=>{h?.removeEventListener("mousemove",p.moveHandler),h?.removeEventListener("mouseup",p.upHandler),f(y.clientX)}},m={moveHandler:y=>(y.cancelable&&(y.preventDefault(),y.stopPropagation()),d(y.touches[0].clientX),!1),upHandler:y=>{var v;h?.removeEventListener("touchmove",m.moveHandler),h?.removeEventListener("touchend",m.upHandler),y.cancelable&&(y.preventDefault(),y.stopPropagation()),f((v=y.touches[0])==null?void 0:v.clientX)}},g=qgn()?{passive:!1}:!1;Dq(s)?(h?.addEventListener("touchmove",m.moveHandler,g),h?.addEventListener("touchend",m.upHandler,g)):(h?.addEventListener("mousemove",p.moveHandler,g),h?.addEventListener("mouseup",p.upHandler,g)),t.setColumnSizingInfo(y=>({...y,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?Rq():(n=e.initialState.columnSizingInfo)!=null?n:Rq())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let RN=null;function qgn(){if(typeof RN=="boolean")return RN;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return RN=e,RN}function Dq(e){return e.type==="touchstart"}const Wgn={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:ed("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=An(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),kn(t.options,"debugRows")),e.getVisibleCells=An(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],kn(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>An(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),kn(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function yk(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Ggn={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Ygn={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:ed("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,s;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((s=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>wp.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return OB(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:wp[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Kgn={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:ed("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,s;e.setExpanded(r?{}:(i=(s=e.initialState)==null?void 0:s.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(i=n)!=null?i:!s,!s&&n)return{...o,[e.id]:!0};if(s&&!n){const{[e.id]:a,...l}=o;return l}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r?.[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},dQ=0,fQ=10,Pq=()=>({pageIndex:dQ,pageSize:fQ}),Xgn={getInitialState:e=>({...e,pagination:{...Pq(),...e?.pagination}}),getDefaultOptions:e=>({onPaginationChange:ed("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=s=>Wy(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?Pq():(i=e.initialState.pagination)!=null?i:Pq())},e.setPageIndex=r=>{e.setPagination(i=>{let s=Wy(r,i.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...i,pageIndex:s}})},e.resetPageIndex=r=>{var i,s;e.setPageIndex(r?dQ:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:dQ)},e.resetPageSize=r=>{var i,s;e.setPageSize(r?fQ:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:fQ)},e.setPageSize=r=>{e.setPagination(i=>{const s=Math.max(1,Wy(r,i.pageSize)),o=i.pageSize*i.pageIndex,a=Math.floor(o/s);return{...i,pageIndex:a,pageSize:s}})},e.setPageCount=r=>e.setPagination(i=>{var s;let o=Wy(r,(s=e.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),e.getPageOptions=An(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,o)=>o)),i},kn(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},Oq=()=>({top:[],bottom:[]}),Qgn={getInitialState:e=>({rowPinning:Oq(),...e}),getDefaultOptions:e=>({onRowPinningChange:ed("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const s=r?e.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?e.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,e.id,...s]);t.setRowPinning(l=>{var u,c;if(n==="bottom"){var d,f;return{top:((d=l?.top)!=null?d:[]).filter(m=>!(a!=null&&a.has(m))),bottom:[...((f=l?.bottom)!=null?f:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)]}}if(n==="top"){var h,p;return{top:[...((h=l?.top)!=null?h:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)],bottom:((p=l?.bottom)!=null?p:[]).filter(m=>!(a!=null&&a.has(m)))}}return{top:((u=l?.top)!=null?u:[]).filter(m=>!(a!=null&&a.has(m))),bottom:((c=l?.bottom)!=null?c:[]).filter(m=>!(a!=null&&a.has(m)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,s=n.some(a=>r?.includes(a)),o=n.some(a=>i?.includes(a));return s?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const s=(n=i==="top"?t.getTopRows():t.getBottomRows())==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=s?.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?Oq():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:Oq())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(o=>{const a=e.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>t.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},e.getTopRows=An(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),kn(e.options,"debugRows")),e.getBottomRows=An(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),kn(e.options,"debugRows")),e.getCenterRows=An(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(s=>!i.has(s.id))},kn(e.options,"debugRows"))}},Jgn={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:ed("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(s=>{hQ(i,s.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=An(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?Nq(e,n):{rows:[],flatRows:[],rowsById:{}},kn(e.options,"debugTable")),e.getFilteredSelectedRowModel=An(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?Nq(e,n):{rows:[],flatRows:[],rowsById:{}},kn(e.options,"debugTable")),e.getGroupedSelectedRowModel=An(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?Nq(e,n):{rows:[],flatRows:[],rowsById:{}},kn(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(s=>{var o;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return s;const a={...s};return hQ(a,e.id,n,(o=r?.selectChildren)!=null?o:!0,t),a})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return _le(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return pQ(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return pQ(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},hQ=(e,t,n,r,i)=>{var s;const o=i.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>hQ(e,a.id,n,r,i))};function Nq(e,t){const n=e.getState().rowSelection,r=[],i={},s=function(o,a){return o.map(l=>{var u;const c=_le(l,n);if(c&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:s(l.subRows)}),c)return l}).filter(Boolean)};return{rows:s(t.rows),flatRows:r,rowsById:i}}function _le(e,t){var n;return(n=t[e.id])!=null?n:!1}function pQ(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return e.subRows.forEach(o=>{if(!(s&&!i)&&(o.getCanSelect()&&(_le(o,t)?s=!0:i=!1),o.subRows&&o.subRows.length)){const a=pQ(o,t);a==="all"?s=!0:(a==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const mQ=/([0-9]+)/gm,Zgn=(e,t,n)=>AUe(Bv(e.getValue(n)).toLowerCase(),Bv(t.getValue(n)).toLowerCase()),e0n=(e,t,n)=>AUe(Bv(e.getValue(n)),Bv(t.getValue(n))),t0n=(e,t,n)=>Ele(Bv(e.getValue(n)).toLowerCase(),Bv(t.getValue(n)).toLowerCase()),n0n=(e,t,n)=>Ele(Bv(e.getValue(n)),Bv(t.getValue(n))),r0n=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},i0n=(e,t,n)=>Ele(e.getValue(n),t.getValue(n));function Ele(e,t){return e===t?0:e>t?1:-1}function Bv(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function AUe(e,t){const n=e.split(mQ).filter(Boolean),r=t.split(mQ).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),o=parseInt(i,10),a=parseInt(s,10),l=[o,a].sort();if(isNaN(l[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const Tb={alphanumeric:Zgn,alphanumericCaseSensitive:e0n,text:t0n,textCaseSensitive:n0n,datetime:r0n,basic:i0n},s0n={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:ed("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i?.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return Tb.datetime;if(typeof s=="string"&&(r=!0,s.split(mQ).length>1))return Tb.alphanumeric}return r?Tb.text:Tb.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof n?.getValue(e.id)=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return OB(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:Tb[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),s=typeof n<"u"&&n!==null;t.setSorting(o=>{const a=o?.find(h=>h.id===e.id),l=o?.findIndex(h=>h.id===e.id);let u=[],c,d=s?n:i==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?a?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(s||i||(c="remove")),c==="add"){var f;u=[...o,{id:e.id,desc:d}],u.splice(0,u.length-((f=t.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(h=>h.id===e.id?{...h,desc:d}:h):c==="remove"?u=o.filter(h=>h.id!==e.id):u=[{id:e.id,desc:d}];return u})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const s=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==s&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":s},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},o0n=[kgn,Wgn,Vgn,Ugn,Ign,Rgn,Ggn,Ygn,s0n,Bgn,Kgn,Xgn,Qgn,Jgn,Hgn];function a0n(e){var t,n;const r=[...o0n,...(t=e._features)!=null?t:[]];let i={_features:r};const s=i._features.reduce((f,h)=>Object.assign(f,h.getDefaultOptions==null?void 0:h.getDefaultOptions(i)),{}),o=f=>i.options.mergeOptions?i.options.mergeOptions(s,f):{...s,...f};let l={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(f=>{var h;l=(h=f.getInitialState==null?void 0:f.getInitialState(l))!=null?h:l});const u=[];let c=!1;const d={_features:r,options:{...s,...e},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(h=>setTimeout(()=>{throw h})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const h=Wy(f,i.options);i.options=o(h)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,h,p)=>{var m;return(m=i.options.getRowId==null?void 0:i.options.getRowId(f,h,p))!=null?m:`${p?[p.id,h].join("."):h}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,h)=>{let p=(h?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!p&&(p=i.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:An(()=>[i.options.defaultColumn],f=>{var h;return f=(h=f)!=null?h:{},{header:p=>{const m=p.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:p=>{var m,g;return(m=(g=p.renderValue())==null||g.toString==null?void 0:g.toString())!=null?m:null},...i._features.reduce((p,m)=>Object.assign(p,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...f}},kn(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:An(()=>[i._getColumnDefs()],f=>{const h=function(p,m,g){return g===void 0&&(g=0),p.map(y=>{const v=Agn(i,y,g,m),b=y;return v.columns=b.columns?h(b.columns,v,g+1):[],v})};return h(f)},kn(e,"debugColumns")),getAllFlatColumns:An(()=>[i.getAllColumns()],f=>f.flatMap(h=>h.getFlatColumns()),kn(e,"debugColumns")),_getAllFlatColumnsById:An(()=>[i.getAllFlatColumns()],f=>f.reduce((h,p)=>(h[p.id]=p,h),{}),kn(e,"debugColumns")),getAllLeafColumns:An(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,h)=>{let p=f.flatMap(m=>m.getLeafColumns());return h(p)},kn(e,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,d);for(let f=0;f<i._features.length;f++){const h=i._features[f];h==null||h.createTable==null||h.createTable(i)}return i}function l0n(){return e=>An(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,o){s===void 0&&(s=0);const a=[];for(let u=0;u<i.length;u++){const c=oT(e,e._getRowId(i[u],u,o),i[u],u,s,void 0,o?.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows){var l;c.originalSubRows=e.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,s+1,c))}}return a};return n.rows=r(t),n},kn(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function u0n(){return e=>An(()=>[e.getState().expanded,e.getPreExpandedRowModel(),e.options.paginateExpandedRows],(t,n,r)=>!n.rows.length||t!==!0&&!Object.keys(t??{}).length||!r?n:kUe(n),kn(e.options,"debugTable"))}function kUe(e){const t=[],n=r=>{var i;t.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function c0n(){return(e,t)=>An(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{if(!n)return;const r=n.flatRows.flatMap(o=>{var a;return(a=o.getUniqueValues(t))!=null?a:[]}).map(Number).filter(o=>!Number.isNaN(o));if(!r.length)return;let i=r[0],s=r[r.length-1];for(const o of r)o<i?i=o:o>s&&(s=o);return[i,s]},kn(e.options,"debugTable"))}function IUe(e,t,n){return n.options.filterFromLeafRows?d0n(e,t,n):f0n(e,t,n)}function d0n(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){var d;let h=l[f];const p=oT(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(p.columnFilters=h.columnFilters,(d=h.subRows)!=null&&d.length&&u<o){if(p.subRows=a(h.subRows,u+1),h=p,t(h)&&!p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}if(t(h)||p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}}else h=p,t(h)&&(c.push(h),s[h.id]=h,i.push(h))}return c};return{rows:a(e),flatRows:i,rowsById:s}}function f0n(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){let h=l[f];if(t(h)){var d;if((d=h.subRows)!=null&&d.length&&u<o){const m=oT(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);m.subRows=a(h.subRows,u+1),h=m}c.push(h),i.push(h),s[h.id]=h}}return c};return{rows:a(e),flatRows:i,rowsById:s}}function h0n(){return(e,t)=>An(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(r!=null&&r.length)&&!i)return n;const s=[...r.map(a=>a.id).filter(a=>a!==t),i?"__global__":void 0].filter(Boolean),o=a=>{for(let l=0;l<s.length;l++)if(a.columnFilters[s[l]]===!1)return!1;return!0};return IUe(n.rows,o,e)},kn(e.options,"debugTable"))}function p0n(){return(e,t)=>An(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{if(!n)return new Map;let r=new Map;for(let s=0;s<n.flatRows.length;s++){const o=n.flatRows[s].getUniqueValues(t);for(let a=0;a<o.length;a++){const l=o[a];if(r.has(l)){var i;r.set(l,((i=r.get(l))!=null?i:0)+1)}else r.set(l,1)}}return r},kn(e.options,"debugTable"))}function m0n(){return e=>An(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<t.flatRows.length;f++)t.flatRows[f].columnFilters={},t.flatRows[f].columnFiltersMeta={};return t}const i=[],s=[];(n??[]).forEach(f=>{var h;const p=e.getColumn(f.id);if(!p)return;const m=p.getFilterFn();m&&i.push({id:f.id,filterFn:m,resolvedValue:(h=m.resolveFilterValue==null?void 0:m.resolveFilterValue(f.value))!=null?h:f.value})});const o=(n??[]).map(f=>f.id),a=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&a&&l.length&&(o.push("__global__"),l.forEach(f=>{var h;s.push({id:f.id,filterFn:a,resolvedValue:(h=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?h:r})}));let u,c;for(let f=0;f<t.flatRows.length;f++){const h=t.flatRows[f];if(h.columnFilters={},i.length)for(let p=0;p<i.length;p++){u=i[p];const m=u.id;h.columnFilters[m]=u.filterFn(h,m,u.resolvedValue,g=>{h.columnFiltersMeta[m]=g})}if(s.length){for(let p=0;p<s.length;p++){c=s[p];const m=c.id;if(c.filterFn(h,m,c.resolvedValue,g=>{h.columnFiltersMeta[m]=g})){h.columnFilters.__global__=!0;break}}h.columnFilters.__global__!==!0&&(h.columnFilters.__global__=!1)}}const d=f=>{for(let h=0;h<o.length;h++)if(f.columnFilters[o[h]]===!1)return!1;return!0};return IUe(t.rows,d,e)},kn(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function g0n(){return e=>An(()=>[e.getState().grouping,e.getPreGroupedRowModel()],(t,n)=>{if(!n.rows.length||!t.length)return n.rows.forEach(l=>{l.depth=0,l.parentId=void 0}),n;const r=t.filter(l=>e.getColumn(l)),i=[],s={},o=function(l,u,c){if(u===void 0&&(u=0),u>=r.length)return l.map(p=>(p.depth=u,i.push(p),s[p.id]=p,p.subRows&&(p.subRows=o(p.subRows,u+1,p.id)),p));const d=r[u],f=y0n(l,d);return Array.from(f.entries()).map((p,m)=>{let[g,y]=p,v=`${d}:${g}`;v=c?`${c}>${v}`:v;const b=o(y,u+1,v);b.forEach(S=>{S.parentId=v});const _=u?vUe(y,S=>S.subRows):y,E=oT(e,v,_[0].original,m,u,void 0,c);return Object.assign(E,{groupingColumnId:d,groupingValue:g,subRows:b,leafRows:_,getValue:S=>{if(r.includes(S)){if(E._valuesCache.hasOwnProperty(S))return E._valuesCache[S];if(y[0]){var T;E._valuesCache[S]=(T=y[0].getValue(S))!=null?T:void 0}return E._valuesCache[S]}if(E._groupingValuesCache.hasOwnProperty(S))return E._groupingValuesCache[S];const A=e.getColumn(S),R=A?.getAggregationFn();if(R)return E._groupingValuesCache[S]=R(S,_,y),E._groupingValuesCache[S]}}),b.forEach(S=>{i.push(S),s[S.id]=S}),E})},a=o(n.rows,0);return a.forEach(l=>{i.push(l),s[l.id]=l}),{rows:a,flatRows:i,rowsById:s}},kn(e.options,"debugTable","getGroupedRowModel",()=>{e._queue(()=>{e._autoResetExpanded(),e._autoResetPageIndex()})}))}function y0n(e,t){const n=new Map;return e.reduce((r,i)=>{const s=`${i.getGroupingValue(t)}`,o=r.get(s);return o?o.push(i):r.set(s,[i]),r},n)}function v0n(e){return t=>An(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:s}=n;let{rows:o,flatRows:a,rowsById:l}=r;const u=i*s,c=u+i;o=o.slice(u,c);let d;t.options.paginateExpandedRows?d={rows:o,flatRows:a,rowsById:l}:d=kUe({rows:o,flatRows:a,rowsById:l}),d.flatRows=[];const f=h=>{d.flatRows.push(h),h.subRows.length&&h.subRows.forEach(f)};return d.rows.forEach(f),d},kn(t.options,"debugTable"))}function b0n(){return e=>An(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],s=r.filter(l=>{var u;return(u=e.getColumn(l.id))==null?void 0:u.getCanSort()}),o={};s.forEach(l=>{const u=e.getColumn(l.id);u&&(o[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(c=>({...c}));return u.sort((c,d)=>{for(let h=0;h<s.length;h+=1){var f;const p=s[h],m=o[p.id],g=m.sortUndefined,y=(f=p?.desc)!=null?f:!1;let v=0;if(g){const b=c.getValue(p.id),_=d.getValue(p.id),E=b===void 0,S=_===void 0;if(E||S){if(g==="first")return E?-1:1;if(g==="last")return E?1:-1;v=E&&S?0:E?g:-g}}if(v===0&&(v=m.sortingFn(c,d,p.id)),v!==0)return y&&(v*=-1),m.invertSorting&&(v*=-1),v}return c.index-d.index}),u.forEach(c=>{var d;i.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=a(c.subRows))}),u};return{rows:a(n.rows),flatRows:i,rowsById:n.rowsById}},kn(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}function w0n(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=k.useState(()=>({current:a0n(t)})),[r,i]=k.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...e,state:{...r,...e.state},onStateChange:o=>{i(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}const RUe={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AE",:"A",:"A",:"A",:"C",:"C",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"U",:"U",:"U",:"U",:"Y",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"ae",:"a",:"a",:"a",:"c",:"c",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"u",:"u",:"u",:"u",:"y",:"y",:"A",:"a",:"A",:"a",:"A",:"a",:"C",:"c",:"C",:"c",:"C",:"c",:"C",:"c",C:"C",c:"c",:"D",:"d",:"D",:"d",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"G",:"G",:"g",:"g",:"G",:"g",:"G",:"g",:"G",:"g",:"H",:"h",:"H",:"h",:"H",:"h",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"IJ",:"ij",:"J",:"j",:"K",:"k",:"K",:"k",K:"K",k:"k",:"L",:"l",:"L",:"l",:"L",:"l",:"L",:"l",:"l",:"l",:"M",:"m",M:"M",m:"m",:"N",:"n",:"N",:"n",:"N",:"n",:"n",N:"N",n:"n",:"O",:"o",:"O",:"o",:"O",:"o",:"OE",:"oe",P:"P",p:"p",:"R",:"r",:"R",:"r",:"R",:"r",R:"R",r:"r",:"R",:"r",:"S",:"s",:"S",:"s",:"S",:"S",:"s",:"s",:"S",:"s",:"T",:"t",:"t",:"T",:"T",:"t",:"T",:"t",T:"T",t:"t",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",V:"V",v:"v",:"W",:"w",:"W",:"w",X:"X",x:"x",:"Y",:"y",:"Y",Y:"Y",y:"y",:"Z",:"z",:"Z",:"z",:"Z",:"z",:"s",:"f",:"O",:"o",:"U",:"u",:"A",:"a",:"I",:"i",:"O",:"o",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"A",:"a",:"AE",:"ae",:"O",:"o",:"TH",:"th",:"P",:"p",:"S",:"s",X:"X",x:"x",:"",:"",:"",:"",A:"A",a:"a",E:"E",e:"e",I:"I",i:"i",:"N",:"n",:"O",:"o",:"O",:"o",:"U",:"u",:"W",:"w",:"Y",:"y",:"A",:"a",:"E",:"e",:"I",:"i",:"O",:"o",:"R",:"r",:"U",:"u",B:"B",b:"b",:"C",:"c",:"E",:"e",F:"F",f:"f",:"G",:"g",:"H",:"h",J:"J",:"j",:"K",:"k",M:"M",m:"m",P:"P",p:"p",Q:"Q",q:"q",:"R",:"r",:"S",:"s",V:"V",v:"v",W:"W",w:"w",X:"X",x:"x",Y:"Y",y:"y",A:"A",a:"a",B:"B",b:"b",:"D",:"d",:"E",:"e",:"E",:"e",:"H",:"h",I:"I",i:"i",:"I",:"i",M:"M",m:"m",O:"O",o:"o",Q:"Q",q:"q",U:"U",u:"u",X:"X",x:"x",Z:"Z",z:"z"},x0n=Object.keys(RUe).join("|"),_0n=new RegExp(x0n,"g");function E0n(e){return e.replace(_0n,t=>RUe[t])}const Xl={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function C0n(e,t,n){var r;if(n=n||{},n.threshold=(r=n.threshold)!=null?r:Xl.MATCHES,!n.accessors){const o=fCe(e,t,n);return{rankedValue:e,rank:o,accessorIndex:-1,accessorThreshold:n.threshold,passed:o>=n.threshold}}const i=I0n(e,n.accessors),s={rankedValue:e,rank:Xl.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let o=0;o<i.length;o++){const a=i[o];let l=fCe(a.itemValue,t,n);const{minRanking:u,maxRanking:c,threshold:d=n.threshold}=a.attributes;l<u&&l>=Xl.MATCHES?l=u:l>c&&(l=c),l=Math.min(l,c),l>=d&&l>s.rank&&(s.rank=l,s.passed=!0,s.accessorIndex=o,s.accessorThreshold=d,s.rankedValue=a.itemValue)}return s}function fCe(e,t,n){return e=hCe(e,n),t=hCe(t,n),t.length>e.length?Xl.NO_MATCH:e===t?Xl.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Xl.EQUAL:e.startsWith(t)?Xl.STARTS_WITH:e.includes(` ${t}`)?Xl.WORD_STARTS_WITH:e.includes(t)?Xl.CONTAINS:t.length===1?Xl.NO_MATCH:S0n(e).includes(t)?Xl.ACRONYM:T0n(e,t))}function S0n(e){let t="";return e.split(" ").forEach(r=>{r.split("-").forEach(s=>{t+=s.substr(0,1)})}),t}function T0n(e,t){let n=0,r=0;function i(l,u,c){for(let d=c,f=u.length;d<f;d++)if(u[d]===l)return n+=1,d+1;return-1}function s(l){const u=1/l,c=n/t.length;return Xl.MATCHES+c*u}const o=i(t[0],e,0);if(o<0)return Xl.NO_MATCH;r=o;for(let l=1,u=t.length;l<u;l++){const c=t[l];if(r=i(c,e,r),!(r>-1))return Xl.NO_MATCH}const a=r-o;return s(a)}function A0n(e,t){return e.rank===t.rank?0:e.rank>t.rank?-1:1}function hCe(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=E0n(e)),e}function k0n(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const r=n(e);return r==null?[]:Array.isArray(r)?r:[String(r)]}function I0n(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r],o=R0n(s),a=k0n(e,s);for(let l=0,u=a.length;l<u;l++)n.push({itemValue:a[l],attributes:o})}return n}const pCe={maxRanking:1/0,minRanking:-1/0};function R0n(e){return typeof e=="function"?pCe:{...pCe,...e}}function D_(e,t,n){let r=n.initialDeps??[],i;return()=>{var s,o,a,l;let u;n.key&&((s=n.debug)!=null&&s.call(n))&&(u=Date.now());const c=e();if(!(c.length!==r.length||c.some((h,p)=>r[p]!==h)))return i;r=c;let f;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now()),i=t(...c),n.key&&((a=n.debug)!=null&&a.call(n))){const h=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-f)*100)/100,m=p/16,g=(y,v)=>{for(y=String(y);y.length<v;)y=" "+y;return y};console.info(`%c ${g(p,5)} /${g(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n?.key)}return(l=n?.onChange)==null||l.call(n,i),i}}function Mq(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const D0n=(e,t)=>Math.abs(e-t)<1,P0n=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},O0n=e=>e,DUe=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},N0n=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=o=>{const{width:a,height:l}=o;t({width:Math.round(a),height:Math.round(l)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(o=>{const a=o[0];if(a?.borderBoxSize){const l=a.borderBoxSize[0];if(l){i({width:l.inlineSize,height:l.blockSize});return}}i(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},mCe={passive:!0},M0n=typeof window>"u"?!0:"onscrollend"in window,$0n=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=e.options.useScrollendEvent&&M0n?()=>{}:P0n(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=u=>()=>{const{horizontal:c,isRtl:d}=e.options;i=c?n.scrollLeft*(d&&-1||1):n.scrollTop,s(),t(i,u)},a=o(!0),l=o(!1);return l(),n.addEventListener("scroll",a,mCe),n.addEventListener("scrollend",l,mCe),()=>{n.removeEventListener("scroll",a),n.removeEventListener("scrollend",l)}},F0n=(e,t,n)=>{if(t?.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},L0n=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const o=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class j0n{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:O0n,rangeExtractor:DUe,onChange:()=>{},measureElement:F0n,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=D_(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let o=r-1;o>=0;o--){const a=n[o];if(i.has(a.lane))continue;const l=s.get(a.lane);if(l==null||a.end>l.end?s.set(a.lane,a):a.end<l.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((o,a)=>o.end===a.end?o.index-a.index:o.end-a.end)[0]:void 0},this.getMeasurementOptions=D_(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,o)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:o}),{key:!1}),this.getMeasurements=D_(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:o},a)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<n;c++){const d=s(c),f=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),h=f?f.end+this.options.gap:r+i,p=a.get(d),m=typeof p=="number"?p:this.options.estimateSize(c),g=h+m,y=f?f.lane:c%this.options.lanes;u[c]={index:c,start:h,size:m,end:g,key:d,lane:y}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=D_(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(n,r,i)=>this.range=n.length>0&&r>0?B0n({measurements:n,outerSize:r,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=D_(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,i,s)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:i,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const o=s.key,a=this.elementsCache.get(o);a!==n&&(a&&this.observer.unobserve(a),this.observer.observe(n),this.elementsCache.set(o,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,o=r-s;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,o,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=D_(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s],l=r[a];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Mq(r[PUe(0,r.length-1,i=>Mq(r[i]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const i=this.getSize(),s=this.getScrollOffset();r==="auto"&&n>=s+i&&(r="end"),r==="end"&&(n-=i);const o=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[o]:this.scrollElement[o]:0)-i;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(i.end>=o+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const a=i.start-this.options.scrollPaddingStart+(i.size-s)/2;switch(r){case"center":return[this.getOffsetForAlignment(a,r),r];case"end":return[this.getOffsetForAlignment(i.end+this.options.scrollPaddingEnd,r),r];default:return[this.getOffsetForAlignment(i.start-this.options.scrollPaddingStart,r),r]}},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const s=this.getOffsetForIndex(n,r);if(!s)return;const[o,a]=s;this._scrollToOffset(o,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[u]=Mq(this.getOffsetForIndex(n,a));D0n(u,this.getScrollOffset())||this.scrollToIndex(n,{align:a,behavior:i})}else this.scrollToIndex(n,{align:a,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(s=>s.end)),Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const PUe=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function B0n({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,s=PUe(0,r,a=>e[a].start,n);let o=s;for(;o<r&&e[o].end<n+t;)o++;return{startIndex:s,endIndex:o}}const gCe=typeof document<"u"?k.useLayoutEffect:k.useEffect;function z0n(e){const t=k.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var o;s?Ip.flushSync(t):t(),(o=e.onChange)==null||o.call(e,i,s)}},[r]=k.useState(()=>new j0n(n));return r.setOptions(n),gCe(()=>r._didMount(),[]),gCe(()=>r._willUpdate()),r}function OUe(e){return z0n({observeElementRect:N0n,observeElementOffset:$0n,scrollToFn:L0n,...e})}var $M={exports:{}},V0n=$M.exports,yCe;function U0n(){return yCe||(yCe=1,(function(e,t){(function(n,r){e.exports=r()})(V0n,(function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(O){var j=["th","st","nd","rd"],B=O%100;return"["+O+(j[(B-20)%10]||j[B]||j[0])+"]"}},b=function(O,j,B){var H=String(O);return!H||H.length>=j?O:""+Array(j+1-H.length).join(B)+O},_={s:b,z:function(O){var j=-O.utcOffset(),B=Math.abs(j),H=Math.floor(B/60),q=B%60;return(j<=0?"+":"-")+b(H,2,"0")+":"+b(q,2,"0")},m:function O(j,B){if(j.date()<B.date())return-O(B,j);var H=12*(B.year()-j.year())+(B.month()-j.month()),q=j.clone().add(H,d),G=B-q<0,U=j.clone().add(H+(G?-1:1),d);return+(-(H+(B-q)/(G?q-U:U-q))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:d,y:h,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:f}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",A=function(O){return O instanceof N||!(!O||!O[T])},R=function O(j,B,H){var q;if(!j)return E;if(typeof j=="string"){var G=j.toLowerCase();S[G]&&(q=G),B&&(S[G]=B,q=G);var U=j.split("-");if(!q&&U.length>1)return O(U[0])}else{var L=j.name;S[L]=j,q=L}return!H&&q&&(E=q),q||!H&&E},I=function(O,j){if(A(O))return O.clone();var B=typeof j=="object"?j:{};return B.date=O,B.args=arguments,new N(B)},P=_;P.l=R,P.i=A,P.w=function(O,j){return I(O,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var N=(function(){function O(B){this.$L=R(B.locale,null,!0),this.parse(B),this.$x=this.$x||B.x||{},this[T]=!0}var j=O.prototype;return j.parse=function(B){this.$d=(function(H){var q=H.date,G=H.utc;if(q===null)return new Date(NaN);if(P.u(q))return new Date;if(q instanceof Date)return new Date(q);if(typeof q=="string"&&!/Z$/i.test(q)){var U=q.match(g);if(U){var L=U[2]-1||0,z=(U[7]||"0").substring(0,3);return G?new Date(Date.UTC(U[1],L,U[3]||1,U[4]||0,U[5]||0,U[6]||0,z)):new Date(U[1],L,U[3]||1,U[4]||0,U[5]||0,U[6]||0,z)}}return new Date(q)})(B),this.init()},j.init=function(){var B=this.$d;this.$y=B.getFullYear(),this.$M=B.getMonth(),this.$D=B.getDate(),this.$W=B.getDay(),this.$H=B.getHours(),this.$m=B.getMinutes(),this.$s=B.getSeconds(),this.$ms=B.getMilliseconds()},j.$utils=function(){return P},j.isValid=function(){return this.$d.toString()!==m},j.isSame=function(B,H){var q=I(B);return this.startOf(H)<=q&&q<=this.endOf(H)},j.isAfter=function(B,H){return I(B)<this.startOf(H)},j.isBefore=function(B,H){return this.endOf(H)<I(B)},j.$g=function(B,H,q){return P.u(B)?this[H]:this.set(q,B)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(B,H){var q=this,G=!!P.u(H)||H,U=P.p(B),L=function(ae,he){var ie=P.w(q.$u?Date.UTC(q.$y,he,ae):new Date(q.$y,he,ae),q);return G?ie:ie.endOf(u)},z=function(ae,he){return P.w(q.toDate()[ae].apply(q.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(he)),q)},V=this.$W,Y=this.$M,Q=this.$D,ne="set"+(this.$u?"UTC":"");switch(U){case h:return G?L(1,0):L(31,11);case d:return G?L(1,Y):L(0,Y+1);case c:var ue=this.$locale().weekStart||0,se=(V<ue?V+7:V)-ue;return L(G?Q-se:Q+(6-se),Y);case u:case p:return z(ne+"Hours",0);case l:return z(ne+"Minutes",1);case a:return z(ne+"Seconds",2);case o:return z(ne+"Milliseconds",3);default:return this.clone()}},j.endOf=function(B){return this.startOf(B,!1)},j.$set=function(B,H){var q,G=P.p(B),U="set"+(this.$u?"UTC":""),L=(q={},q[u]=U+"Date",q[p]=U+"Date",q[d]=U+"Month",q[h]=U+"FullYear",q[l]=U+"Hours",q[a]=U+"Minutes",q[o]=U+"Seconds",q[s]=U+"Milliseconds",q)[G],z=G===u?this.$D+(H-this.$W):H;if(G===d||G===h){var V=this.clone().set(p,1);V.$d[L](z),V.init(),this.$d=V.set(p,Math.min(this.$D,V.daysInMonth())).$d}else L&&this.$d[L](z);return this.init(),this},j.set=function(B,H){return this.clone().$set(B,H)},j.get=function(B){return this[P.p(B)]()},j.add=function(B,H){var q,G=this;B=Number(B);var U=P.p(H),L=function(Y){var Q=I(G);return P.w(Q.date(Q.date()+Math.round(Y*B)),G)};if(U===d)return this.set(d,this.$M+B);if(U===h)return this.set(h,this.$y+B);if(U===u)return L(1);if(U===c)return L(7);var z=(q={},q[a]=r,q[l]=i,q[o]=n,q)[U]||1,V=this.$d.getTime()+B*z;return P.w(V,this)},j.subtract=function(B,H){return this.add(-1*B,H)},j.format=function(B){var H=this,q=this.$locale();if(!this.isValid())return q.invalidDate||m;var G=B||"YYYY-MM-DDTHH:mm:ssZ",U=P.z(this),L=this.$H,z=this.$m,V=this.$M,Y=q.weekdays,Q=q.months,ne=q.meridiem,ue=function(he,ie,le,Ce){return he&&(he[ie]||he(H,G))||le[ie].slice(0,Ce)},se=function(he){return P.s(L%12||12,he,"0")},ae=ne||function(he,ie,le){var Ce=he<12?"AM":"PM";return le?Ce.toLowerCase():Ce};return G.replace(y,(function(he,ie){return ie||(function(le){switch(le){case"YY":return String(H.$y).slice(-2);case"YYYY":return P.s(H.$y,4,"0");case"M":return V+1;case"MM":return P.s(V+1,2,"0");case"MMM":return ue(q.monthsShort,V,Q,3);case"MMMM":return ue(Q,V);case"D":return H.$D;case"DD":return P.s(H.$D,2,"0");case"d":return String(H.$W);case"dd":return ue(q.weekdaysMin,H.$W,Y,2);case"ddd":return ue(q.weekdaysShort,H.$W,Y,3);case"dddd":return Y[H.$W];case"H":return String(L);case"HH":return P.s(L,2,"0");case"h":return se(1);case"hh":return se(2);case"a":return ae(L,z,!0);case"A":return ae(L,z,!1);case"m":return String(z);case"mm":return P.s(z,2,"0");case"s":return String(H.$s);case"ss":return P.s(H.$s,2,"0");case"SSS":return P.s(H.$ms,3,"0");case"Z":return U}return null})(he)||U.replace(":","")}))},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(B,H,q){var G,U=this,L=P.p(H),z=I(B),V=(z.utcOffset()-this.utcOffset())*r,Y=this-z,Q=function(){return P.m(U,z)};switch(L){case h:G=Q()/12;break;case d:G=Q();break;case f:G=Q()/3;break;case c:G=(Y-V)/6048e5;break;case u:G=(Y-V)/864e5;break;case l:G=Y/i;break;case a:G=Y/r;break;case o:G=Y/n;break;default:G=Y}return q?G:P.a(G)},j.daysInMonth=function(){return this.endOf(d).$D},j.$locale=function(){return S[this.$L]},j.locale=function(B,H){if(!B)return this.$L;var q=this.clone(),G=R(B,H,!0);return G&&(q.$L=G),q},j.clone=function(){return P.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},O})(),M=N.prototype;return I.prototype=M,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach((function(O){M[O[1]]=function(j){return this.$g(j,O[0],O[1])}})),I.extend=function(O,j){return O.$i||(O(j,N,I),O.$i=!0),I},I.locale=R,I.isDayjs=A,I.unix=function(O){return I(1e3*O)},I.en=S[E],I.Ls=S,I.p={},I}))})($M)),$M.exports}var H0n=U0n();const pn=Ao(H0n);function q0n({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function NUe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){const o=q0n({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=e.current?.[o.levelIndex]?.[o.rowIndex]?.[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?NUe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function W0n(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function G0n(e){return e.current?.map(t=>t.map(n=>n.length))}function Cle({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=W0n(i.key);if(s){i.preventDefault();const o=G0n(e);NUe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}function Y0n(e,t){if(!e||!t)return t;const n=e.getHours(),r=e.getMinutes(),i=e.getSeconds(),s=e.getMilliseconds(),o=new Date(t);return o.setHours(n),o.setMinutes(r),o.setSeconds(i),o.setMilliseconds(s),o}var FM={exports:{}},K0n=FM.exports,vCe;function X0n(){return vCe||(vCe=1,(function(e,t){(function(n,r){e.exports=r()})(K0n,(function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(f,h,p){p===void 0&&(p={});var m=new Date(f),g=(function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",_=y+"|"+b,E=r[_];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[_]=E),E})(h,p);return g.formatToParts(m)},u=function(f,h){for(var p=l(f,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,_=n[v];_>=0&&(m[_]=parseInt(b,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",A=+f;return(o.utc(T).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(f,h){f===void 0&&(f=a);var p,m=this.utcOffset(),g=this.toDate(),y=g.toLocaleString("en-US",{timeZone:f}),v=Math.round((g-new Date(y))/1e3/60),b=15*-Math.round(g.getTimezoneOffset()/15)-v;if(!Number(b))p=this.utcOffset(0,h);else if(p=o(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(b,!0),h){var _=p.utcOffset();p=p.add(m-_,"minute")}return p.$x.$timezone=f,p},c.offsetName=function(f){var h=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),h,{timeZoneName:f}).find((function(m){return m.type.toLowerCase()==="timezonename"}));return p&&p.value};var d=c.startOf;c.startOf=function(f,h){if(!this.$x||!this.$x.$timezone)return d.call(this,f,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(p,f,h).tz(this.$x.$timezone,!0)},o.tz=function(f,h,p){var m=p&&h,g=p||h||a,y=u(+o(),g);if(typeof f!="string")return o(f).tz(g);var v=(function(S,T,A){var R=S-60*T*1e3,I=u(R,A);if(T===I)return[R,T];var P=u(R-=60*(I-T)*1e3,A);return I===P?[R,I]:[S-60*Math.min(I,P)*1e3,Math.max(I,P)]})(o.utc(f,m).valueOf(),y,g),b=v[0],_=v[1],E=o(b).utcOffset(_);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}}))})(FM)),FM.exports}var Q0n=X0n();const J0n=Ao(Q0n);var LM={exports:{}},Z0n=LM.exports,bCe;function eyn(){return bCe||(bCe=1,(function(e,t){(function(n,r){e.exports=r()})(Z0n,(function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},l.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var c=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var d=l.utcOffset;l.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?d.call(this):this.$offset;if(typeof m=="string"&&(m=(function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],A=T[0],R=60*+T[1]+ +T[2];return R===0?0:A==="+"?R:-R})(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m;if(v===0)return this.utc(g);var b=this.clone();if(g)return b.$offset=v,b.$u=!1,b;var _=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(b=this.local().add(v+_,n)).$offset=v,b.$x.$localOffset=_,b};var f=l.format;l.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,g)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var h=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=l.diff;l.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}}))})(LM)),LM.exports}var tyn=eyn();const nyn=Ao(tyn);pn.extend(nyn);pn.extend(J0n);function ryn(e,t){return t?pn(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const wCe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=ryn(e,t);return n==="remove"&&(r*=-1),pn(e).add(r,"minutes").toDate()};function ew(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>wCe(i,n,e)):wCe(t,n,e)}const iyn={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},syn=k.createContext(iyn);function bf(){const e=k.useContext(syn),t=k.useCallback(o=>o||e.locale,[e.locale]),n=k.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=k.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=k.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=k.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function oyn(e,t){const n=bf(),r=i=>ew("remove",i,n.getTimezone()).toISOString();if(t==="range"&&Array.isArray(e)){const[i,s]=e;return i?s?`${r(i)}  ${r(s)}`:`${r(i)} `:""}return t==="multiple"&&Array.isArray(e)?e.map(i=>i&&r(i)).filter(Boolean).join(", "):!Array.isArray(e)&&e?r(e):""}function MUe({value:e,type:t,name:n,form:r}){return w.jsx("input",{type:"hidden",value:oyn(e,t),name:n,form:r})}MUe.displayName="@mantine/dates/HiddenDatesInput";var $Ue={day:"m_396ce5cb"};const ayn={},lyn=(e,{size:t})=>({day:{"--day-size":_n(t,"day-size")}}),Sle=tt((e,t)=>{const n=qe("Day",ayn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,date:u,disabled:c,__staticSelector:d,weekend:f,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:_,highlightToday:E,...S}=n,T=Mt({name:d||"Day",classes:$Ue,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:lyn,rootSelector:"day"}),A=bf();return w.jsx(Co,{...T("day",{style:b?{display:"none"}:void 0}),component:_?"div":"button",ref:t,disabled:c,"data-today":pn(u).isSame(ew("add",new Date,A.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-highlight-today":E||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&f||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":_||void 0,unstyled:a,...S,children:m?.(u)||pn(u).date()})});Sle.classes=$Ue;Sle.displayName="@mantine/dates/Day";function uyn({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=pn().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(pn(r).add(s,"days").locale(e).format(t)):i.push(t(pn(r).add(s,"days").toDate()));return i}var FUe={weekday:"m_18a3eca"};const cyn={},dyn=(e,{size:t})=>({weekdaysRow:{"--wr-fz":As(t),"--wr-spacing":Yi(t)}}),Tle=tt((e,t)=>{const n=qe("WeekdaysRow",cyn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,locale:u,firstDayOfWeek:c,weekdayFormat:d,cellComponent:f="th",__staticSelector:h,withWeekNumbers:p,...m}=n,g=Mt({name:h||"WeekdaysRow",classes:FUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:dyn,rootSelector:"weekdaysRow"}),y=bf(),v=uyn({locale:y.getLocale(u),format:d,firstDayOfWeek:y.getFirstDayOfWeek(c)}).map((b,_)=>w.jsx(f,{...g("weekday"),children:b},_));return w.jsxs(De,{component:"tr",ref:t,...g("weekdaysRow"),...m,children:[p&&w.jsx(f,{...g("weekday"),children:"#"}),v]})});Tle.classes=FUe;Tle.displayName="@mantine/dates/WeekdaysRow";function fyn(e,t=1){let n=pn(e);const r=t===0?6:t-1;for(;n.day()!==r;)n=n.add(1,"day");return n.toDate()}function hyn(e,t=1){let n=pn(e);for(;n.day()!==t;)n=n.subtract(1,"day");return n.toDate()}function pyn({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=pn(e).subtract(pn(e).date()-1,"day"),i=pn(r).startOf("day"),s=i.toDate(),o=i.add(+i.daysInMonth()-1,"day").toDate(),a=fyn(o,t),l=hyn(s,t),u=[];for(;l<=a;){const c=[];for(let d=0;d<7;d+=1)c.push(new Date(l)),l.setDate(l.getDate()+1);u.push(c)}if(n&&u.length<6){const c=u[u.length-1],d=c[c.length-1],f=new Date(d);for(f.setDate(f.getDate()+1);u.length<6;){const h=[];for(let p=0;p<7;p+=1)h.push(new Date(f)),f.setDate(f.getDate()+1);u.push(h)}}return u}function LUe(e,t){return pn(e).format("YYYY-MM")===pn(t).format("YYYY-MM")}function jUe(e,t){return t instanceof Date?pn(e).isAfter(pn(t).subtract(1,"day"),"day"):!0}function BUe(e,t){return t instanceof Date?pn(e).isBefore(pn(t).add(1,"day"),"day"):!0}function myn(e,t,n,r,i,s,o){const a=e.flat().filter(c=>BUe(c,n)&&jUe(c,t)&&!i?.(c)&&!r?.(c)?.disabled&&(!s||LUe(c,o))),l=a.find(c=>r?.(c)?.selected);if(l)return l;const u=a.find(c=>pn().isSame(c,"date"));return u||a[0]}var jM={exports:{}},gyn=jM.exports,xCe;function yyn(){return xCe||(xCe=1,(function(e,t){(function(n,r){e.exports=r()})(gyn,(function(){var n="day";return function(r,i,s){var o=function(u){return u.add(4-u.isoWeekday(),n)},a=i.prototype;a.isoWeekYear=function(){return o(this).year()},a.isoWeek=function(u){if(!this.$utils().u(u))return this.add(7*(u-this.isoWeek()),n);var c,d,f,h,p=o(this),m=(c=this.isoWeekYear(),d=this.$u,f=(d?s.utc:s)().year(c).startOf("year"),h=4-f.isoWeekday(),f.isoWeekday()>4&&(h+=7),f.add(h,n));return p.diff(m,"week")+1},a.isoWeekday=function(u){return this.$utils().u(u)?this.day()||7:this.day(this.day()%7?u:u-7)};var l=a.startOf;a.startOf=function(u,c){var d=this.$utils(),f=!!d.u(c)||c;return d.p(u)==="isoweek"?f?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):l.bind(this)(u,c)}}}))})(jM)),jM.exports}var vyn=yyn();const byn=Ao(vyn);pn.extend(byn);function wyn(e){const t=e.find(n=>pn(n).day()===1);return pn(t).isoWeek()}var zUe={month:"m_cc9820d3",monthCell:"m_8f457cd5",weekNumber:"m_6cff9dea"};const xyn={withCellSpacing:!0},_yn=(e,{size:t})=>({weekNumber:{"--wn-fz":As(t),"--wn-size":_n(t,"wn-size")}}),NB=tt((e,t)=>{const n=qe("Month",xyn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,locale:c,firstDayOfWeek:d,weekdayFormat:f,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:_,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:A,__onDayKeyDown:R,__onDayClick:I,__onDayMouseEnter:P,__preventFocus:N,__stopPropagation:M,withCellSpacing:O,size:j,highlightToday:B,withWeekNumbers:H,...q}=n,G=Mt({name:u||"Month",classes:zUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_yn,rootSelector:"month"}),U=bf(),L=pyn({month:h,firstDayOfWeek:U.getFirstDayOfWeek(d),consistentWeeks:U.consistentWeeks}),z=myn(L,y,v,m,g,_,h),{resolvedClassNames:V,resolvedStyles:Y}=Th({classNames:r,styles:o,props:n}),Q=L.map((ne,ue)=>{const se=ne.map((ae,he)=>{const ie=!LUe(ae,h),le=S?.(ae)||pn(ae).locale(c||U.locale).format("D MMMM YYYY"),Ce=m?.(ae),X=pn(ae).isSame(z,"date");return w.jsx("td",{...G("monthCell"),"data-with-spacing":O||void 0,children:w.jsx(Sle,{__staticSelector:u||"Month",classNames:V,styles:Y,unstyled:a,"data-mantine-stop-propagation":M||void 0,highlightToday:B,renderDay:b,date:ae,size:j,weekend:U.getWeekendDays(p).includes(ae.getDay()),outside:ie,hidden:_?ie:!1,"aria-label":le,static:T,disabled:g?.(ae)||!BUe(ae,v)||!jUe(ae,y),ref:fe=>A?.(ue,he,fe),...Ce,onKeyDown:fe=>{Ce?.onKeyDown?.(fe),R?.(fe,{rowIndex:ue,cellIndex:he,date:ae})},onMouseEnter:fe=>{Ce?.onMouseEnter?.(fe),P?.(fe,ae)},onClick:fe=>{Ce?.onClick?.(fe),I?.(fe,ae)},onMouseDown:fe=>{Ce?.onMouseDown?.(fe),N&&fe.preventDefault()},tabIndex:N||!X?-1:0})},ae.toString())});return w.jsxs("tr",{...G("monthRow"),children:[H&&w.jsx("td",{...G("weekNumber"),children:wyn(ne)}),se]},ue)});return w.jsxs(De,{component:"table",...G("month"),size:j,ref:t,...q,children:[!E&&w.jsx("thead",{...G("monthThead"),children:w.jsx(Tle,{__staticSelector:u||"Month",locale:c,firstDayOfWeek:d,weekdayFormat:f,size:j,classNames:V,styles:Y,unstyled:a,withWeekNumbers:H})}),w.jsx("tbody",{...G("monthTbody"),children:Q})]})});NB.classes=zUe;NB.displayName="@mantine/dates/Month";var VUe={pickerControl:"m_dc6a3c71"};const Eyn={},Cyn=(e,{size:t})=>({pickerControl:{"--dpc-fz":As(t),"--dpc-size":_n(t,"dpc-size")}}),MB=tt((e,t)=>{const n=qe("PickerControl",Eyn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,firstInRange:u,lastInRange:c,inRange:d,__staticSelector:f,selected:h,disabled:p,...m}=n,g=Mt({name:f||"PickerControl",classes:VUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Cyn,rootSelector:"pickerControl"});return w.jsx(Co,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":d&&!p&&!h||void 0,"data-first-in-range":u&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});MB.classes=VUe;MB.displayName="@mantine/dates/PickerControl";function UUe(e,t,n){return!t&&!n?!1:!!(t&&pn(e).isBefore(t,"year")||n&&pn(e).isAfter(n,"year"))}function Syn(e,t,n,r){const i=e.flat().filter(a=>!UUe(a,t,n)&&!r?.(a)?.disabled),s=i.find(a=>r?.(a)?.selected);if(s)return s;const o=i.find(a=>pn().isSame(a,"year"));return o||i[0]}function HUe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var qUe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Tyn={yearsListFormat:"YYYY",withCellSpacing:!0},$B=tt((e,t)=>{const n=qe("YearsList",Tyn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,decade:u,yearsListFormat:c,locale:d,minDate:f,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:_,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,R=Mt({name:m||"YearsList",classes:qUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"yearsList"}),I=bf(),P=HUe(u),N=Syn(P,f,h,p),M=P.map((O,j)=>{const B=O.map((H,q)=>{const G=p?.(H),U=pn(H).isSame(N,"year");return w.jsx("td",{...R("yearsListCell"),"data-with-spacing":S||void 0,children:w.jsx(MB,{...R("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:UUe(H,f,h),ref:L=>g?.(j,q,L),...G,onKeyDown:L=>{G?.onKeyDown?.(L),y?.(L,{rowIndex:j,cellIndex:q,date:H})},onClick:L=>{G?.onClick?.(L),v?.(L,H)},onMouseEnter:L=>{G?.onMouseEnter?.(L),b?.(L,H)},onMouseDown:L=>{G?.onMouseDown?.(L),_&&L.preventDefault()},tabIndex:_||!U?-1:0,children:pn(H).locale(I.getLocale(d)).format(c)})},q)});return w.jsx("tr",{...R("yearsListRow"),children:B},j)});return w.jsx(De,{component:"table",ref:t,size:T,...R("yearsList"),...A,children:w.jsx("tbody",{children:M})})});$B.classes=qUe;$B.displayName="@mantine/dates/YearsList";function WUe(e,t,n){return!t&&!n?!1:!!(t&&pn(e).isBefore(t,"month")||n&&pn(e).isAfter(n,"month"))}function Ayn(e,t,n,r){const i=e.flat().filter(a=>!WUe(a,t,n)&&!r?.(a)?.disabled),s=i.find(a=>r?.(a)?.selected);if(s)return s;const o=i.find(a=>pn().isSame(a,"month"));return o||i[0]}function kyn(e){const t=pn(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(pn(t).add(r,"months").toDate()),r+=1;return n}var GUe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const Iyn={monthsListFormat:"MMM",withCellSpacing:!0},FB=tt((e,t)=>{const n=qe("MonthsList",Iyn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,year:c,monthsListFormat:d,locale:f,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:_,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,R=Mt({name:u||"MonthsList",classes:GUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"monthsList"}),I=bf(),P=kyn(c),N=Ayn(P,h,p,m),M=P.map((O,j)=>{const B=O.map((H,q)=>{const G=m?.(H),U=pn(H).isSame(N,"month");return w.jsx("td",{...R("monthsListCell"),"data-with-spacing":S||void 0,children:w.jsx(MB,{...R("monthsListControl"),size:T,unstyled:a,__staticSelector:u||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:WUe(H,h,p),ref:L=>g?.(j,q,L),...G,onKeyDown:L=>{G?.onKeyDown?.(L),y?.(L,{rowIndex:j,cellIndex:q,date:H})},onClick:L=>{G?.onClick?.(L),v?.(L,H)},onMouseEnter:L=>{G?.onMouseEnter?.(L),b?.(L,H)},onMouseDown:L=>{G?.onMouseDown?.(L),_&&L.preventDefault()},tabIndex:_||!U?-1:0,children:pn(H).locale(I.getLocale(f)).format(d)})},q)});return w.jsx("tr",{...R("monthsListRow"),children:B},j)});return w.jsx(De,{component:"table",ref:t,size:T,...R("monthsList"),...A,children:w.jsx("tbody",{children:M})})});FB.classes=GUe;FB.displayName="@mantine/dates/MonthsList";var YUe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const Ryn={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},Dyn=(e,{size:t})=>({calendarHeader:{"--dch-control-size":_n(t,"dch-control-size"),"--dch-fz":As(t)}}),T1=tt((e,t)=>{const n=qe("CalendarHeader",Ryn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,nextIcon:u,previousIcon:c,nextLabel:d,previousLabel:f,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:_,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:A,__stopPropagation:R,...I}=n,P=Mt({name:T||"CalendarHeader",classes:YUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Dyn,rootSelector:"calendarHeader"}),N=A?M=>M.preventDefault():void 0;return w.jsxs(De,{...P("calendarHeader"),ref:t,...I,children:[S&&w.jsx(Co,{...P("calendarHeaderControl"),"data-direction":"previous","aria-label":f,onClick:p,unstyled:a,onMouseDown:N,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":R||void 0,children:c||w.jsx(WE,{...P("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),w.jsx(Co,{component:b?"button":"div",...P("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?N:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":_,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":R||void 0,children:g}),E&&w.jsx(Co,{...P("calendarHeaderControl"),"data-direction":"next","aria-label":d,onClick:h,unstyled:a,onMouseDown:N,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":R||void 0,children:u||w.jsx(WE,{...P("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});T1.classes=YUe;T1.displayName="@mantine/dates/CalendarHeader";function Pyn(e){const t=HUe(e);return[t[0][0],t[3][0]]}const Oyn={decadeLabelFormat:"YYYY"},LB=tt((e,t)=>{const n=qe("DecadeLevel",Oyn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:A,withPrevious:R,decadeLabelFormat:I,classNames:P,styles:N,unstyled:M,__staticSelector:O,__stopPropagation:j,size:B,...H}=n,q=bf(),[G,U]=Pyn(r),L={__staticSelector:O||"DecadeLevel",classNames:P,styles:N,unstyled:M,size:B},z=typeof E=="boolean"?E:o?!pn(U).endOf("year").isBefore(o):!1,V=typeof S=="boolean"?S:s?!pn(G).startOf("year").isAfter(s):!1,Y=(Q,ne)=>pn(Q).locale(i||q.locale).format(ne);return w.jsxs(De,{"data-decade-level":!0,size:B,ref:t,...H,children:[w.jsx(T1,{label:typeof I=="function"?I(G,U):`${Y(G,I)}  ${Y(U,I)}`,__preventFocus:p,__stopPropagation:j,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,nextDisabled:z,previousDisabled:V,hasNextLevel:!1,levelControlAriaLabel:T,withNext:A,withPrevious:R,...L}),w.jsx($B,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:j,withCellSpacing:h,...L})]})});LB.classes={...$B.classes,...T1.classes};LB.displayName="@mantine/dates/DecadeLevel";const Nyn={yearLabelFormat:"YYYY"},jB=tt((e,t)=>{const n=qe("YearLevel",Nyn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:A,levelControlAriaLabel:R,withNext:I,withPrevious:P,yearLabelFormat:N,__staticSelector:M,__stopPropagation:O,size:j,classNames:B,styles:H,unstyled:q,...G}=n,U=bf(),L={__staticSelector:M||"YearLevel",classNames:B,styles:H,unstyled:q,size:j},z=typeof S=="boolean"?S:o?!pn(r).endOf("year").isBefore(o):!1,V=typeof T=="boolean"?T:s?!pn(r).startOf("year").isAfter(s):!1;return w.jsxs(De,{"data-year-level":!0,size:j,ref:t,...G,children:[w.jsx(T1,{label:typeof N=="function"?N(r):pn(r).locale(i||U.locale).format(N),__preventFocus:p,__stopPropagation:O,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:_,onLevelClick:E,nextDisabled:z,previousDisabled:V,hasNextLevel:A,levelControlAriaLabel:R,withNext:I,withPrevious:P,...L}),w.jsx(FB,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:O,withCellSpacing:h,...L})]})});jB.classes={...T1.classes,...FB.classes};jB.displayName="@mantine/dates/YearLevel";const Myn={monthLabelFormat:"MMMM YYYY"},BB=tt((e,t)=>{const n=qe("MonthLevel",Myn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:_,highlightToday:E,withWeekNumbers:S,__preventFocus:T,__stopPropagation:A,nextIcon:R,previousIcon:I,nextLabel:P,previousLabel:N,onNext:M,onPrevious:O,onLevelClick:j,nextDisabled:B,previousDisabled:H,hasNextLevel:q,levelControlAriaLabel:G,withNext:U,withPrevious:L,monthLabelFormat:z,classNames:V,styles:Y,unstyled:Q,__staticSelector:ne,size:ue,static:se,...ae}=n,he=bf(),ie={__staticSelector:ne||"MonthLevel",classNames:V,styles:Y,unstyled:Q,size:ue},le=typeof B=="boolean"?B:d?!pn(r).endOf("month").isBefore(d):!1,Ce=typeof H=="boolean"?H:c?!pn(r).startOf("month").isAfter(c):!1;return w.jsxs(De,{"data-month-level":!0,size:ue,ref:t,...ae,children:[w.jsx(T1,{label:typeof z=="function"?z(r):pn(r).locale(i||he.locale).format(z),__preventFocus:T,__stopPropagation:A,nextIcon:R,previousIcon:I,nextLabel:P,previousLabel:N,onNext:M,onPrevious:O,onLevelClick:j,nextDisabled:le,previousDisabled:Ce,hasNextLevel:q,levelControlAriaLabel:G,withNext:U,withPrevious:L,...ie}),w.jsx(NB,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:T,__stopPropagation:A,static:se,withCellSpacing:_,highlightToday:E,withWeekNumbers:S,...ie})]})});BB.classes={...NB.classes,...T1.classes};BB.displayName="@mantine/dates/MonthLevel";var KUe={levelsGroup:"m_30b26e33"};const $yn={},A1=tt((e,t)=>{const n=qe("LevelsGroup",$yn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,...c}=n,d=Mt({name:u||"LevelsGroup",classes:KUe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"levelsGroup"});return w.jsx(De,{ref:t,...d("levelsGroup"),...c})});A1.classes=KUe;A1.displayName="@mantine/dates/LevelsGroup";const Fyn={numberOfColumns:1},zB=tt((e,t)=>{const n=qe("DecadeLevelGroup",Fyn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:_,classNames:E,styles:S,unstyled:T,__staticSelector:A,__stopPropagation:R,numberOfColumns:I,levelControlAriaLabel:P,decadeLabelFormat:N,size:M,vars:O,...j}=n,B=k.useRef([]),H=Array(I).fill(0).map((q,G)=>{const U=pn(r).add(G*10,"years").toDate();return w.jsx(LB,{size:M,yearsListFormat:a,decade:U,withNext:G===I-1,withPrevious:G===0,decadeLabelFormat:N,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(L,z)=>Cle({levelIndex:G,rowIndex:z.rowIndex,cellIndex:z.cellIndex,event:L,controlsRef:B}),__getControlRef:(L,z,V)=>{Array.isArray(B.current[G])||(B.current[G]=[]),Array.isArray(B.current[G][L])||(B.current[G][L]=[]),B.current[G][L][z]=V},levelControlAriaLabel:typeof P=="function"?P(U):P,locale:i,minDate:s,maxDate:o,__preventFocus:f,__stopPropagation:R,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:_,getYearControlProps:l,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:d},G)});return w.jsx(A1,{classNames:E,styles:S,__staticSelector:A||"DecadeLevelGroup",ref:t,size:M,unstyled:T,...j,children:H})});zB.classes={...A1.classes,...LB.classes};zB.displayName="@mantine/dates/DecadeLevelGroup";const Lyn={numberOfColumns:1},VB=tt((e,t)=>{const n=qe("YearLevelGroup",Lyn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:_,previousDisabled:E,hasNextLevel:S,classNames:T,styles:A,unstyled:R,__staticSelector:I,__stopPropagation:P,numberOfColumns:N,levelControlAriaLabel:M,yearLabelFormat:O,size:j,vars:B,...H}=n,q=k.useRef([]),G=Array(N).fill(0).map((U,L)=>{const z=pn(r).add(L,"years").toDate();return w.jsx(jB,{size:j,monthsListFormat:a,year:z,withNext:L===N-1,withPrevious:L===0,yearLabelFormat:O,__stopPropagation:P,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(V,Y)=>Cle({levelIndex:L,rowIndex:Y.rowIndex,cellIndex:Y.cellIndex,event:V,controlsRef:q}),__getControlRef:(V,Y,Q)=>{Array.isArray(q.current[L])||(q.current[L]=[]),Array.isArray(q.current[L][V])||(q.current[L][V]=[]),q.current[L][V][Y]=Q},levelControlAriaLabel:typeof M=="function"?M(z):M,locale:i,minDate:s,maxDate:o,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:_,previousDisabled:E,hasNextLevel:S,getMonthControlProps:l,classNames:T,styles:A,unstyled:R,__staticSelector:I||"YearLevelGroup",withCellSpacing:d},L)});return w.jsx(A1,{classNames:T,styles:A,__staticSelector:I||"YearLevelGroup",ref:t,size:j,unstyled:R,...H,children:G})});VB.classes={...jB.classes,...A1.classes};VB.displayName="@mantine/dates/YearLevelGroup";const jyn={numberOfColumns:1},UB=tt((e,t)=>{const n=qe("MonthLevelGroup",jyn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,highlightToday:b,withWeekNumbers:_,__preventFocus:E,nextIcon:S,previousIcon:T,nextLabel:A,previousLabel:R,onNext:I,onPrevious:P,onLevelClick:N,nextDisabled:M,previousDisabled:O,hasNextLevel:j,classNames:B,styles:H,unstyled:q,numberOfColumns:G,levelControlAriaLabel:U,monthLabelFormat:L,__staticSelector:z,__stopPropagation:V,size:Y,static:Q,vars:ne,...ue}=n,se=k.useRef([]),ae=Array(G).fill(0).map((he,ie)=>{const le=pn(r).add(ie,"months").toDate();return w.jsx(BB,{month:le,withNext:ie===G-1,withPrevious:ie===0,monthLabelFormat:L,__stopPropagation:V,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ce,X)=>Cle({levelIndex:ie,rowIndex:X.rowIndex,cellIndex:X.cellIndex,event:Ce,controlsRef:se}),__getDayRef:(Ce,X,fe)=>{Array.isArray(se.current[ie])||(se.current[ie]=[]),Array.isArray(se.current[ie][Ce])||(se.current[ie][Ce]=[]),se.current[ie][Ce][X]=fe},levelControlAriaLabel:typeof U=="function"?U(le):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:E,nextIcon:S,previousIcon:T,nextLabel:A,previousLabel:R,onNext:I,onPrevious:P,onLevelClick:N,nextDisabled:M,previousDisabled:O,hasNextLevel:j,classNames:B,styles:H,unstyled:q,__staticSelector:z||"MonthLevelGroup",size:Y,static:Q,withCellSpacing:v,highlightToday:b,withWeekNumbers:_},ie)});return w.jsx(A1,{classNames:B,styles:H,__staticSelector:z||"MonthLevelGroup",ref:t,size:Y,...ue,children:ae})});UB.classes={...A1.classes,...BB.classes};UB.displayName="@mantine/dates/MonthLevelGroup";const _Ce=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function gQ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=k.useRef(e),o=bf(),[a,l,u]=Ki({value:ew("add",t,o.getTimezone(),!i),defaultValue:ew("add",n,o.getTimezone(),!i),finalValue:_Ce(e),onChange:d=>{r?.(ew("remove",d,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:_Ce(e),l(c))),[c,l,u]}function $q(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function Byn(e){return e===0?"month":e===1?"year":"decade"}function N2(e,t,n){return Byn(jd($q(e,0),$q(t,0),$q(n,2)))}const zyn={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},HB=tt((e,t)=>{const n=qe("Calendar",zyn,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:l,date:u,defaultDate:c,onDateChange:d,numberOfColumns:f,columnsToScroll:h,ariaLabels:p,nextLabel:m,previousLabel:g,onYearSelect:y,onMonthSelect:v,onYearMouseEnter:b,onMonthMouseEnter:_,__updateDateOnYearSelect:E,__updateDateOnMonthSelect:S,firstDayOfWeek:T,weekdayFormat:A,weekendDays:R,getDayProps:I,excludeDate:P,renderDay:N,hideOutsideDates:M,hideWeekdays:O,getDayAriaLabel:j,monthLabelFormat:B,nextIcon:H,previousIcon:q,__onDayClick:G,__onDayMouseEnter:U,withCellSpacing:L,highlightToday:z,withWeekNumbers:V,monthsListFormat:Y,getMonthControlProps:Q,yearLabelFormat:ne,yearsListFormat:ue,getYearControlProps:se,decadeLabelFormat:ae,classNames:he,styles:ie,unstyled:le,minDate:Ce,maxDate:X,locale:fe,__staticSelector:de,size:te,__preventFocus:ee,__stopPropagation:me,onNextDecade:Ie,onPreviousDecade:Te,onNextYear:we,onPreviousYear:Me,onNextMonth:ke,onPreviousMonth:Oe,static:xe,__timezoneApplied:je,...Ve}=n,{resolvedClassNames:nt,resolvedStyles:it}=Th({classNames:he,styles:ie,props:n}),[_t,rn]=Ki({value:a?N2(a,s,i):void 0,defaultValue:o?N2(o,s,i):void 0,finalValue:N2(void 0,s,i),onChange:l}),[en,zn]=gQ({type:"default",value:u,defaultValue:c,onChange:d,applyTimezone:!je}),zt={__staticSelector:de||"Calendar",styles:it,classNames:nt,unstyled:le,size:te},wn=bf(),nr=h||f||1,Yn=new Date,Ur=Ce&&Ce>Yn?Ce:Yn,or=en||ew("add",Ur,wn.getTimezone()),Ir=()=>{const Nn=pn(or).add(nr,"month").toDate();ke?.(Nn),zn(Nn)},On=()=>{const Nn=pn(or).subtract(nr,"month").toDate();Oe?.(Nn),zn(Nn)},gn=()=>{const Nn=pn(or).add(nr,"year").toDate();we?.(Nn),zn(Nn)},cr=()=>{const Nn=pn(or).subtract(nr,"year").toDate();Me?.(Nn),zn(Nn)},xi=()=>{const Nn=pn(or).add(10*nr,"year").toDate();Ie?.(Nn),zn(Nn)},Rr=()=>{const Nn=pn(or).subtract(10*nr,"year").toDate();Te?.(Nn),zn(Nn)};return w.jsxs(De,{ref:t,size:te,"data-calendar":!0,...Ve,children:[_t==="month"&&w.jsx(UB,{month:or,minDate:Ce,maxDate:X,firstDayOfWeek:T,weekdayFormat:A,weekendDays:R,getDayProps:I,excludeDate:P,renderDay:N,hideOutsideDates:M,hideWeekdays:O,getDayAriaLabel:j,onNext:Ir,onPrevious:On,hasNextLevel:i!=="month",onLevelClick:()=>rn("year"),numberOfColumns:f,locale:fe,levelControlAriaLabel:p?.monthLevelControl,nextLabel:p?.nextMonth??m,nextIcon:H,previousLabel:p?.previousMonth??g,previousIcon:q,monthLabelFormat:B,__onDayClick:G,__onDayMouseEnter:U,__preventFocus:ee,__stopPropagation:me,static:xe,withCellSpacing:L,highlightToday:z,withWeekNumbers:V,...zt}),_t==="year"&&w.jsx(VB,{year:or,numberOfColumns:f,minDate:Ce,maxDate:X,monthsListFormat:Y,getMonthControlProps:Q,locale:fe,onNext:gn,onPrevious:cr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>rn("decade"),levelControlAriaLabel:p?.yearLevelControl,nextLabel:p?.nextYear??m,nextIcon:H,previousLabel:p?.previousYear??g,previousIcon:q,yearLabelFormat:ne,__onControlMouseEnter:_,__onControlClick:(Nn,mt)=>{S&&zn(mt),rn(N2("month",s,i)),v?.(mt)},__preventFocus:ee,__stopPropagation:me,withCellSpacing:L,...zt}),_t==="decade"&&w.jsx(zB,{decade:or,minDate:Ce,maxDate:X,yearsListFormat:ue,getYearControlProps:se,locale:fe,onNext:xi,onPrevious:Rr,numberOfColumns:f,nextLabel:p?.nextDecade??m,nextIcon:H,previousLabel:p?.previousDecade??g,previousIcon:q,decadeLabelFormat:ae,__onControlMouseEnter:b,__onControlClick:(Nn,mt)=>{E&&zn(mt),rn(N2("year",s,i)),y?.(mt)},__preventFocus:ee,__stopPropagation:me,withCellSpacing:L,...zt})]})});HB.classes={...zB.classes,...VB.classes,...UB.classes};HB.displayName="@mantine/dates/Calendar";function Vyn(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,nextLabel:p,previousLabel:m,onYearSelect:g,onMonthSelect:y,onYearMouseEnter:v,onMonthMouseEnter:b,onNextMonth:_,onPreviousMonth:E,onNextYear:S,onPreviousYear:T,onNextDecade:A,onPreviousDecade:R,withCellSpacing:I,highlightToday:P,__updateDateOnYearSelect:N,__updateDateOnMonthSelect:M,withWeekNumbers:O,firstDayOfWeek:j,weekdayFormat:B,weekendDays:H,getDayProps:q,excludeDate:G,renderDay:U,hideOutsideDates:L,hideWeekdays:z,getDayAriaLabel:V,monthLabelFormat:Y,monthsListFormat:Q,getMonthControlProps:ne,yearLabelFormat:ue,yearsListFormat:se,getYearControlProps:ae,decadeLabelFormat:he,allowSingleDateInRange:ie,allowDeselect:le,minDate:Ce,maxDate:X,locale:fe,...de}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,nextLabel:p,previousLabel:m,onYearSelect:g,onMonthSelect:y,onYearMouseEnter:v,onMonthMouseEnter:b,onNextMonth:_,onPreviousMonth:E,onNextYear:S,onPreviousYear:T,onNextDecade:A,onPreviousDecade:R,withCellSpacing:I,highlightToday:P,__updateDateOnYearSelect:N,__updateDateOnMonthSelect:M,withWeekNumbers:O,firstDayOfWeek:j,weekdayFormat:B,weekendDays:H,getDayProps:q,excludeDate:G,renderDay:U,hideOutsideDates:L,hideWeekdays:z,getDayAriaLabel:V,monthLabelFormat:Y,monthsListFormat:Q,getMonthControlProps:ne,yearLabelFormat:ue,yearsListFormat:se,getYearControlProps:ae,decadeLabelFormat:he,allowSingleDateInRange:ie,allowDeselect:le,minDate:Ce,maxDate:X,locale:fe},others:de}}function Uyn(e,t){if(e===null)return null;const n=ew("add",new Date(e),t);return Number.isNaN(n.getTime())||!e?null:n}function Hyn({date:e,maxDate:t,minDate:n}){return!(e==null||Number.isNaN(e.getTime())||t&&pn(e).isAfter(t,"date")||n&&pn(e).isBefore(n,"date"))}const qyn={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0},Ale=tt((e,t)=>{const n=AJ("DateInput",qyn,e),{inputProps:r,wrapperProps:i,value:s,defaultValue:o,onChange:a,clearable:l,clearButtonProps:u,popoverProps:c,getDayProps:d,locale:f,valueFormat:h,dateParser:p,minDate:m,maxDate:g,fixOnBlur:y,onFocus:v,onBlur:b,onClick:_,onKeyDown:E,readOnly:S,name:T,form:A,rightSection:R,unstyled:I,classNames:P,styles:N,allowDeselect:M,preserveTime:O,date:j,defaultDate:B,onDateChange:H,...q}=n,G=k.useRef(null),U=k.useRef(null),[L,z]=k.useState(!1),{calendarProps:V,others:Y}=Vyn(q),Q=bf(),ue=p||(ke=>{const Oe=pn(ke,h,Q.getLocale(f)).toDate();return Number.isNaN(Oe.getTime())?Uyn(ke,Q.getTimezone()):Oe}),se=M!==void 0?M:l,ae=ke=>ke?pn(ke).locale(Q.getLocale(f)).format(h):"",[he,ie,le]=gQ({type:"default",value:s,defaultValue:o,onChange:a}),[Ce,X]=gQ({type:"default",value:j,defaultValue:o||B,onChange:H});k.useEffect(()=>{le&&s!==null&&X(s)},[le,s]);const[fe,de]=k.useState(ae(he));k.useEffect(()=>{de(ae(he))},[Q.getLocale(f)]);const te=ke=>{const Oe=ke.currentTarget.value;if(de(Oe),z(!0),Oe.trim()===""&&l)ie(null);else{const xe=ue(Oe);Hyn({date:xe,minDate:m,maxDate:g})&&(ie(xe),X(xe))}},ee=ke=>{b?.(ke),z(!1),y&&de(ae(he))},me=ke=>{v?.(ke),z(!0)},Ie=ke=>{_?.(ke),z(!0)},Te=ke=>{ke.key==="Escape"&&z(!1),E?.(ke)},we=ke=>({...d?.(ke),selected:pn(he).isSame(ke,"day"),onClick:Oe=>{d?.(ke).onClick?.(Oe);const xe=O?Y0n(he,ke):ke,je=l&&se&&pn(he).isSame(ke,"day")?null:xe;ie(je),!le&&de(ae(je)),z(!1)}}),Me=R||(l&&he&&!S?w.jsx(Jp,{variant:"transparent",onMouseDown:ke=>ke.preventDefault(),tabIndex:-1,onClick:()=>{ie(null),!le&&de(""),z(!1)},unstyled:I,size:r.size||"sm",...u}):null);return fu(()=>{he!==void 0&&!L&&de(ae(he))},[he]),UTe(()=>z(!1),void 0,[G.current,U.current]),w.jsxs(w.Fragment,{children:[w.jsx(Qr.Wrapper,{...i,__staticSelector:"DateInput",ref:G,children:w.jsxs(jr,{opened:L,trapFocus:!1,position:"bottom-start",disabled:S,withRoles:!1,unstyled:I,...c,children:[w.jsx(jr.Target,{children:w.jsx(Qr,{"data-dates-input":!0,"data-read-only":S||void 0,autoComplete:"off",ref:t,value:fe,onChange:te,onBlur:ee,onFocus:me,onClick:Ie,onKeyDown:Te,readOnly:S,rightSection:Me,...r,...Y,__staticSelector:"DateInput"})}),w.jsx(jr.Dropdown,{onMouseDown:ke=>ke.preventDefault(),"data-dates-dropdown":!0,ref:U,children:w.jsx(HB,{__staticSelector:"DateInput",__timezoneApplied:!0,...V,classNames:P,styles:N,unstyled:I,__preventFocus:!0,minDate:m,maxDate:g,locale:f,getDayProps:we,size:r.size,date:Ce,onDateChange:X})})]})}),w.jsx(MUe,{name:T,form:A,value:he,type:"default"})]})});Ale.classes={...Qr.classes,...HB.classes};Ale.displayName="@mantine/dates/DateInput";function Un(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Cd={root:"MRT_TableBody-module_root__kGhRy","root-grid":"MRT_TableBody-module_root-grid__WdOGg","root-no-rows":"MRT_TableBody-module_root-no-rows__iyi9K","root-virtualized":"MRT_TableBody-module_root-virtualized__TxPAi","empty-row-tr-grid":"MRT_TableBody-module_empty-row-tr-grid__LTgxw","empty-row-td-grid":"MRT_TableBody-module_empty-row-td-grid__pzlgG","empty-row-td-content":"MRT_TableBody-module_empty-row-td-content__Cc2XW",pinned:"MRT_TableBody-module_pinned__XHpcs"},Fq={root:"MRT_TableBodyRow-module_root__2c3D4","root-grid":"MRT_TableBodyRow-module_root-grid__AwXTe","root-virtualized":"MRT_TableBodyRow-module_root-virtualized__zYgxq"},dp={root:"MRT_TableBodyCell-module_root__Wf-zi","root-grid":"MRT_TableBodyCell-module_root-grid__zIuC-","root-virtualized":"MRT_TableBodyCell-module_root-virtualized__jLl8R","root-data-col":"MRT_TableBodyCell-module_root-data-col__HHcxc","root-nowrap":"MRT_TableBodyCell-module_root-nowrap__-k1Jo","root-cursor-pointer":"MRT_TableBodyCell-module_root-cursor-pointer__4kw7J","root-editable-hover":"MRT_TableBodyCell-module_root-editable-hover__2DKSa","root-cell-hover-reveal":"MRT_TableBodyCell-module_root-cell-hover-reveal__T1fAH","cell-hover-reveal":"MRT_TableBodyCell-module_cell-hover-reveal__Q-1Xj",overflowing:"MRT_TableBodyCell-module_overflowing__QcXP4"};const Ut=(e,t)=>e instanceof Function?e(t):e,Lq=["string","number"],Wyn=["text","autocomplete"],ECe=({cell:e,renderedColumnIndex:t=0,renderedRowIndex:n=0,table:r})=>{var i,s;const{getState:o,options:{enableFilterMatchHighlighting:a,mantineHighlightProps:l}}=r,{column:u,row:c}=e,{columnDef:d}=u,{globalFilter:f,globalFilterFn:h}=o(),p=u.getFilterValue(),m=Ut(l,{cell:e,column:u,row:c,table:r});let g=e.getIsAggregated()&&d.AggregatedCell?d.AggregatedCell({cell:e,column:u,row:c,table:r}):c.getIsGrouped()&&!e.getIsGrouped()?null:e.getIsGrouped()&&d.GroupedCell?d.GroupedCell({cell:e,column:u,row:c,table:r}):void 0;const y=g!==void 0;if(y||(g=e.renderValue()),a&&d.enableFilterMatchHighlighting!==!1&&g&&Lq.includes(typeof g)&&(p&&Lq.includes(typeof p)&&Wyn.includes(d.filterVariant)||f&&Lq.includes(typeof f)&&u.getCanGlobalFilter())){let v=((s=(i=u.getFilterValue())!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:"").toString();(p?d._filterFn:h)==="fuzzy"&&(v=v.split(" ")),g=w.jsx(pZ,Object.assign({color:"yellow.3",highlight:v},m,{children:g?.toString()}))}return d.Cell&&!y&&(g=d.Cell({cell:e,column:u,renderedCellValue:g,renderedColumnIndex:t,renderedRowIndex:n,row:c,table:r})),g},ch=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),Gyn=e=>{var t,n;return typeof e.primaryShade=="number"?e.primaryShade:(n=(t=e.primaryShade)===null||t===void 0?void 0:t.dark)!==null&&n!==void 0?n:7},Yyn=(e,t)=>e.colors[e.primaryColor][Gyn(e)];function U$(e,t){const n=`data-${e}`;switch(typeof t){case"boolean":return t?{[n]:""}:null;case"number":return{[n]:`${t}`};case"string":return{[n]:t};default:return null}}var Kyn={root:"MRT_CopyButton-module_root__mkXy4"};const Xyn=e=>{var{cell:t,children:n,table:r}=e,i=Un(e,["cell","children","table"]);const{options:{localization:{clickToCopy:s,copiedToClipboard:o},mantineCopyButtonProps:a}}=r,{column:l,row:u}=t,{columnDef:c}=l,d={cell:t,column:l,row:u,table:r},f=Object.assign(Object.assign(Object.assign({},Ut(a,d)),Ut(c.mantineCopyButtonProps,d)),i);return w.jsx(KAe,{value:t.getValue(),children:({copied:h,copy:p})=>{var m;return w.jsx(bt,{color:h?"green":void 0,label:(m=f?.title)!==null&&m!==void 0?m:h?o:s,openDelay:1e3,withinPortal:!0,children:w.jsx(Co,Object.assign({},f,{className:Bt("mrt-copy-button",Kyn.root,f?.className),onClick:g=>{g.stopPropagation(),p()},role:"presentation",title:void 0,children:n}))})}})},qB=e=>{var t,{cell:n,table:r}=e,i=Un(e,["cell","table"]);const{getState:s,options:{createDisplayMode:o,editDisplayMode:a,mantineEditSelectProps:l,mantineEditTextInputProps:u},refs:{editInputRefs:c},setCreatingRow:d,setEditingCell:f,setEditingRow:h}=r,{column:p,row:m}=n,{columnDef:g}=p,{creatingRow:y,editingRow:v}=s(),b=y?.id===m.id,_=v?.id===m.id,E=g.editVariant==="select",S=g.editVariant==="multi-select",[T,A]=k.useState(()=>n.getValue()),R={cell:n,column:p,row:m,table:r},I=Object.assign(Object.assign(Object.assign({},Ut(u,R)),Ut(g.mantineEditTextInputProps,R)),i),P=Object.assign(Object.assign(Object.assign({},Ut(l,R)),Ut(g.mantineEditSelectProps,R)),i),N=B=>{m._valuesCache[p.id]=B,b?d(m):_&&h(m)},M=B=>{var H;(H=I.onBlur)===null||H===void 0||H.call(I,B),N(T),f(null)},O=B=>{var H,q;(H=I.onKeyDown)===null||H===void 0||H.call(I,B),B.key==="Enter"&&((q=c.current[n.id])===null||q===void 0||q.blur())};if(g.Edit)return(t=g.Edit)===null||t===void 0?void 0:t.call(g,{cell:n,column:p,row:m,table:r});const j={disabled:Ut(g.enableEditing,m)===!1,label:["custom","modal"].includes(b?o:a)?p.columnDef.header:void 0,name:n.id,onClick:B=>{var H;B.stopPropagation(),(H=I?.onClick)===null||H===void 0||H.call(I,B)},placeholder:["custom","modal"].includes(b?o:a)?void 0:g.header,value:T,variant:a==="table"?"unstyled":"default"};return E?w.jsx(Ug,Object.assign({},j,{searchable:!0,value:T},P,{onBlur:M,onChange:(B,H)=>{var q,G;(G=(q=P).onChange)===null||G===void 0||G.call(q,B,H),A(B)},onClick:B=>{var H;B.stopPropagation(),(H=P?.onClick)===null||H===void 0||H.call(P,B)},ref:B=>{B&&(c.current[n.id]=B,P.ref&&(P.ref.current=B))}})):S?w.jsx(tS,Object.assign({},j,{searchable:!0,value:T},P,{onBlur:M,onChange:B=>{var H,q;(q=(H=P).onChange)===null||q===void 0||q.call(H,T),A(B),document.activeElement!==c.current[n.id]&&N(B)},onClick:B=>{var H;B.stopPropagation(),(H=P?.onClick)===null||H===void 0||H.call(P,B)},ref:B=>{B&&(c.current[n.id]=B,P.ref&&(P.ref.current=B))}})):w.jsx(iu,Object.assign({},j,{onKeyDown:O,value:T??""},I,{onBlur:M,onChange:B=>{var H;(H=I.onChange)===null||H===void 0||H.call(I,B),A(B.target.value)},onClick:B=>{var H;B.stopPropagation(),(H=I?.onClick)===null||H===void 0||H.call(I,B)},ref:B=>{B&&(c.current[n.id]=B,I.ref&&(I.ref.current=B))}}))},XUe=e=>{var t,n,r,i,s,{cell:o,numRows:a=1,renderedColumnIndex:l=0,renderedRowIndex:u=0,rowRef:c,table:d,virtualCell:f}=e,h=Un(e,["cell","numRows","renderedColumnIndex","renderedRowIndex","rowRef","table","virtualCell"]);const p=fc(),{getState:m,options:{columnResizeDirection:g,columnResizeMode:y,createDisplayMode:v,editDisplayMode:b,enableClickToCopy:_,enableColumnOrdering:E,enableColumnPinning:S,enableEditing:T,enableGrouping:A,layoutMode:R,mantineSkeletonProps:I,mantineTableBodyCellProps:P},refs:{editInputRefs:N},setEditingCell:M,setHoveredColumn:O}=d,{columnSizingInfo:j,creatingRow:B,density:H,draggingColumn:q,editingCell:G,editingRow:U,hoveredColumn:L,isLoading:z,showSkeletons:V}=m(),{column:Y,row:Q}=o,{columnDef:ne}=Y,{columnDefType:ue}=ne,se={cell:o,column:Y,renderedColumnIndex:l,renderedRowIndex:u,row:Q,table:d},ae=Object.assign(Object.assign(Object.assign({},Ut(P,se)),Ut(ne.mantineTableBodyCellProps,se)),h),he=Ut(I,se),[ie,le]=k.useState(100);k.useEffect(()=>{if(!z&&!V||ie!==100)return;const it=Y.getSize();le(ue==="display"?it/2:Math.round(Math.random()*(it-it/3)+it/3))},[z,V]);const Ce={minWidth:`max(calc(var(--col-${ch(Y?.id)}-size) * 1px), ${(t=ne.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--col-${ch(Y.id)}-size) * 1px)`};R==="grid"?Ce.flex=`${[0,!1].includes(ne.grow)?0:`var(--col-${ch(Y.id)}-size)`} 0 auto`:R==="grid-no-grow"&&(Ce.flex=`${+(ne.grow||0)} 0 auto`);const X=q?.id===Y.id,fe=L?.id===Y.id,de=S&&ne.columnDefType!=="group"&&Y.getIsPinned(),te=!o.getIsPlaceholder()&&Ut(T,Q)&&Ut(ne.enableEditing,Q)!==!1,ee=te&&!["custom","modal"].includes(b)&&(b==="table"||U?.id===Q.id||G?.id===o.id)&&!Q.getIsGrouped(),me=te&&v==="row"&&B?.id===Q.id,Ie=Ut(_,o)||Ut(ne.enableClickToCopy,o)&&Ut(ne.enableClickToCopy,o)!==!1,Te=it=>{var _t;(_t=ae?.onDoubleClick)===null||_t===void 0||_t.call(ae,it),te&&b==="cell"&&(M(o),setTimeout(()=>{var rn;const en=N.current[o.id];en&&(en.focus(),(rn=en.select)===null||rn===void 0||rn.call(en))},100))},we=it=>{var _t;(_t=ae?.onDragEnter)===null||_t===void 0||_t.call(ae,it),A&&L?.id==="drop-zone"&&O(null),E&&q&&O(ne.enableColumnOrdering!==!1?Y:null)},Me={cell:o,renderedColumnIndex:l,renderedRowIndex:u,table:d},ke=k.useRef(null),[Oe,xe]=k.useState(!1),je=()=>{if(!ne.enableCellHoverReveal)return;const it=ke.current;if(it){const _t=it.scrollWidth>it.clientWidth;xe(_t)}},Ve=()=>{ne.enableCellHoverReveal&&xe(!1)},nt=()=>{var it,_t,rn;return o.getIsPlaceholder()?(_t=(it=ne.PlaceholderCell)===null||it===void 0?void 0:it.call(ne,{cell:o,column:Y,row:Q,table:d}))!==null&&_t!==void 0?_t:null:V!==!1&&(z||V)?w.jsx(FZ,Object.assign({height:20,width:ie},he)):ue==="display"&&(["mrt-row-expand","mrt-row-numbers","mrt-row-select"].includes(Y.id)||!Q.getIsGrouped())?(rn=ne.Cell)===null||rn===void 0?void 0:rn.call(ne,Object.assign({column:Y,renderedCellValue:o.renderValue(),row:Q,rowRef:c},Me)):me||ee?w.jsx(qB,{cell:o,table:d}):Ie&&ne.enableClickToCopy!==!1?w.jsx(Xyn,{cell:o,table:d,children:w.jsx(ECe,Object.assign({},Me))}):w.jsx(ECe,Object.assign({},Me))};return w.jsx(ER,Object.assign({"data-column-pinned":de||void 0,"data-dragging-column":X||void 0,"data-first-right-pinned":de==="right"&&Y.getIsFirstColumn(de)||void 0,"data-hovered-column-target":fe||void 0,"data-index":l,"data-last-left-pinned":de==="left"&&Y.getIsLastColumn(de)||void 0,"data-last-row":u===a-1||void 0,"data-resizing":y==="onChange"&&j?.isResizingColumn===Y.id&&g||void 0},ae,{__vars:Object.assign({"--mrt-cell-align":(n=ae.align)!==null&&n!==void 0?n:p.dir==="rtl"?"right":"left","--mrt-table-cell-left":de==="left"?`${Y.getStart(de)}`:void 0,"--mrt-table-cell-right":de==="right"?`${Y.getAfter(de)}`:void 0},ae.__vars),className:Bt(dp.root,R?.startsWith("grid")&&dp["root-grid"],f&&dp["root-virtualized"],te&&b==="cell"&&dp["root-cursor-pointer"],te&&["cell","table"].includes(b??"")&&ue!=="display"&&dp["root-editable-hover"],ue==="data"&&dp["root-data-col"],H==="xs"&&dp["root-nowrap"],ne.enableCellHoverReveal&&dp["root-cell-hover-reveal"],ae?.className),onDoubleClick:Te,onDragEnter:we,onMouseEnter:je,onMouseLeave:Ve,style:it=>Object.assign(Object.assign({},Ce),Ut(ae.style,it)),children:w.jsx(w.Fragment,{children:(r=ae.children)!==null&&r!==void 0?r:ne.enableCellHoverReveal?w.jsxs("div",{className:Bt(ne.enableCellHoverReveal&&!(me||ee)&&dp["cell-hover-reveal"],Oe&&dp.overflowing),ref:ke,children:[nt(),o.getIsGrouped()&&!ne.GroupedCell&&w.jsxs(w.Fragment,{children:[" (",(i=Q.subRows)===null||i===void 0?void 0:i.length,")"]})]}):w.jsxs(w.Fragment,{children:[nt(),o.getIsGrouped()&&!ne.GroupedCell&&w.jsxs(w.Fragment,{children:[" (",(s=Q.subRows)===null||s===void 0?void 0:s.length,")"]})]})})}))},Qyn=k.memo(XUe,(e,t)=>t.cell===e.cell);var ob={root:"MRT_TableDetailPanel-module_root__vQAlM","root-grid":"MRT_TableDetailPanel-module_root-grid__7UMC6","root-virtual-row":"MRT_TableDetailPanel-module_root-virtual-row__r-X4Z",inner:"MRT_TableDetailPanel-module_inner__o-Fk-","inner-grid":"MRT_TableDetailPanel-module_inner-grid__WLZgF","inner-expanded":"MRT_TableDetailPanel-module_inner-expanded__6tg9T","inner-virtual":"MRT_TableDetailPanel-module_inner-virtual__TItRy"};const Jyn=e=>{var t,n,{parentRowRef:r,renderedRowIndex:i=0,row:s,rowVirtualizer:o,striped:a,table:l,virtualRow:u}=e,c=Un(e,["parentRowRef","renderedRowIndex","row","rowVirtualizer","striped","table","virtualRow"]);const{getState:d,getVisibleLeafColumns:f,options:{layoutMode:h,mantineDetailPanelProps:p,mantineTableBodyRowProps:m,renderDetailPanel:g}}=l,{isLoading:y}=d(),v=Ut(m,{isDetailPanel:!0,row:s,table:l}),b=Object.assign(Object.assign({},Ut(p,{row:s,table:l})),c),_=s.getAllCells().filter(S=>S.column.columnDef.columnDefType==="data").map(S=>w.jsx(qB,{cell:S,table:l},S.id)),E=!y&&s.getIsExpanded()&&g?.({internalEditComponents:_,row:s,table:l});return w.jsx(Ag,Object.assign({"data-index":g?i*2+1:i,"data-striped":a,ref:S=>{var T;S&&((T=o?.measureElement)===null||T===void 0||T.call(o,S))}},v,{__vars:Object.assign({"--mrt-parent-row-height":u?`${(n=(t=r.current)===null||t===void 0?void 0:t.getBoundingClientRect())===null||n===void 0?void 0:n.height}px`:void 0,"--mrt-virtual-row-start":u?`${u.start}px`:void 0},v?.__vars),className:Bt("mantine-Table-tr-detail-panel",ob.root,h?.startsWith("grid")&&ob["root-grid"],u&&ob["root-virtual-row"],v?.className),children:w.jsx(ER,Object.assign({colSpan:f().length,component:"td"},b,{__vars:{"--mrt-inner-width":`${l.getTotalSize()}px`},className:Bt("mantine-Table-td-detail-panel",ob.inner,h?.startsWith("grid")&&ob["inner-grid"],s.getIsExpanded()&&ob["inner-expanded"],u&&ob["inner-virtual"]),p:s.getIsExpanded()&&E?"md":0,children:o?s.getIsExpanded()&&E:w.jsx(vm,{in:s.getIsExpanded(),children:E})}))}))},Zyn=(e,t,n)=>{let r=0;return e.columnFiltersMeta[n]&&(r=A0n(e.columnFiltersMeta[n],t.columnFiltersMeta[n])),r===0?Tb.alphanumeric(e,t,n):r},evn=Object.assign(Object.assign({},Tb),{fuzzy:Zyn}),tvn=(e,t)=>Math.max(...Object.values(t.columnFiltersMeta).map(n=>n.rank))-Math.max(...Object.values(e.columnFiltersMeta).map(n=>n.rank)),QUe=(e,t)=>{const{getCenterRows:n,getPrePaginationRowModel:r,getRowModel:i,getState:s,getTopRows:o,options:{createDisplayMode:a,enablePagination:l,enableRowPinning:u,manualPagination:c,positionCreatingRow:d,rowPinningDisplayMode:f}}=e,{creatingRow:h,pagination:p}=s(),m=nvn(e);let g=[];if(!m)g=!u||f?.includes("sticky")?t?r().rows:i().rows:n();else{if(g=r().rows.sort((y,v)=>tvn(y,v)),l&&!c&&!t){const y=p.pageIndex*p.pageSize;g=g.slice(y,y+p.pageSize)}u&&!f?.includes("sticky")&&(g=g.filter(y=>!y.getIsPinned()))}if(u&&f?.includes("sticky")){const y=g.filter(v=>v.getIsPinned()).map(v=>v.id);g=[...o().filter(v=>!y.includes(v.id)),...g]}if(d!==void 0&&h&&a==="row"){const y=isNaN(+d)?d==="top"?0:g.length:+d;g=[...g.slice(0,y),h,...g.slice(y)]}return g},JUe=e=>{const{getState:t,options:{enableGlobalFilterRankedResults:n,manualExpanding:r,manualFiltering:i,manualGrouping:s,manualSorting:o}}=e,{expanded:a,globalFilterFn:l}=t();return!r&&!i&&!s&&!o&&n&&l==="fuzzy"&&a!==!0&&!Object.values(a).some(Boolean)},nvn=e=>{const{globalFilter:t,sorting:n}=e.getState();return JUe(e)&&t&&!Object.values(n).some(Boolean)},H$=({row:e,table:t})=>{const{options:{enableRowSelection:n}}=t;return e.getIsSelected()||Ut(n,e)&&e.getCanSelectSubRows()&&e.getIsAllSubRowsSelected()},rvn=({renderedRowIndex:e=0,row:t,table:n})=>(r,i)=>{var s;const{getState:o,options:{enableBatchRowSelection:a,enableMultiRowSelection:l,enableRowPinning:u,manualPagination:c,rowPinningDisplayMode:d},refs:{lastSelectedRowId:f}}=n,{pagination:{pageIndex:h,pageSize:p}}=o(),m=c?0:p*h,g=H$({row:t,table:n});t.toggleSelected(i??!g);const y=new Set([t.id]);if(a&&l&&r.nativeEvent.shiftKey&&f.current!==null){const v=QUe(n,!0),b=v.findIndex(_=>_.id===f.current);if(b!==-1){const _=H$({row:v?.[b],table:n}),E=e+m,[S,T]=b<E?[b,E]:[E,b];if(g!==_)for(let A=S;A<=T;A++)v[A].toggleSelected(!g),y.add(v[A].id)}}f.current=t.id,t.getCanSelectSubRows()&&t.getIsAllSubRowsSelected()&&((s=t.subRows)===null||s===void 0||s.forEach(v=>v.toggleSelected(!1))),u&&d?.includes("select")&&y.forEach(v=>{n.getRow(v).pin(g?!1:d?.includes("bottom")?"bottom":"top")})},ZUe=({table:e})=>(t,n,r)=>{const{options:{enableRowPinning:i,rowPinningDisplayMode:s,selectAllMode:o},refs:{lastSelectedRowId:a}}=e;o==="all"||r?e.toggleAllRowsSelected(n??t.target.checked):e.toggleAllPageRowsSelected(n??t.target.checked),i&&s?.includes("select")&&e.setRowPinning({bottom:[],top:[]}),a.current=null},vk=e=>{var t,n,r,{children:i,columnVirtualizer:s,numRows:o,pinnedRowIds:a,renderedRowIndex:l=0,row:u,rowVirtualizer:c,table:d,tableProps:f,virtualRow:h}=e,p=Un(e,["children","columnVirtualizer","numRows","pinnedRowIds","renderedRowIndex","row","rowVirtualizer","table","tableProps","virtualRow"]);const{getState:m,options:{enableRowOrdering:g,enableRowPinning:y,enableStickyFooter:v,enableStickyHeader:b,layoutMode:_,mantineTableBodyRowProps:E,memoMode:S,renderDetailPanel:T,rowPinningDisplayMode:A},refs:{tableFooterRef:R,tableHeadRef:I},setHoveredRow:P}=d,{density:N,draggingColumn:M,draggingRow:O,editingCell:j,editingRow:B,hoveredRow:H,isFullScreen:q,rowPinning:G}=m(),U=u.getVisibleCells(),{virtualColumns:L,virtualPaddingLeft:z,virtualPaddingRight:V}=s??{},Y=H$({row:u,table:d}),Q=y&&u.getIsPinned(),ne=Q&&A?.includes("sticky")&&"sticky",ue=O?.id===u.id,se=H?.id===u.id,ae=Object.assign(Object.assign({},Ut(E,{renderedRowIndex:l,row:u,table:d})),p),[he,ie]=k.useMemo(()=>!y||!ne||!a||!u.getIsPinned()?[]:[[...a].reverse().indexOf(u.id),a.indexOf(u.id)],[a,G]),le=(b||q)&&((t=I.current)===null||t===void 0?void 0:t.clientHeight)||0,Ce=v&&((n=R.current)===null||n===void 0?void 0:n.clientHeight)||0,X=parseInt((r=ae?.style)===null||r===void 0?void 0:r.height,10)||(N==="xs"?37:N==="md"?53:69),fe=ee=>{g&&O&&P(u)},de=k.useRef(null);let te=f.striped;return te&&(te===!0&&(te="odd"),te==="odd"&&l%2!==0&&(te=!1),te==="even"&&l%2===0&&(te=!1)),w.jsxs(w.Fragment,{children:[w.jsxs(Ag,Object.assign({"data-dragging-row":ue||void 0,"data-hovered-row-target":se||void 0,"data-index":T?l*2:l,"data-row-pinned":ne||Q||void 0,"data-selected":Y||void 0,"data-striped":te,onDragEnter:fe,ref:ee=>{ee&&(de.current=ee,c?.measureElement(ee))}},ae,{__vars:Object.assign(Object.assign({},ae?.__vars),{"--mrt-pinned-row-bottom":!h&&he!==void 0&&Q?`${he*X+(v?Ce-1:0)}`:void 0,"--mrt-pinned-row-top":h?void 0:ie!==void 0&&Q?`${ie*X+(b||q?le-1:0)}`:void 0,"--mrt-virtual-row-start":h?`${h.start}`:void 0}),className:Bt(Fq.root,_?.startsWith("grid")&&Fq["root-grid"],h&&Fq["root-virtualized"],ae?.className),children:[z?w.jsx(De,{component:"td",display:"flex",w:z}):null,i||(L??u.getVisibleCells()).map((ee,me)=>{let Ie=ee;s&&(me=ee.index,Ie=U[me]);const Te={cell:Ie,numRows:o,renderedColumnIndex:me,renderedRowIndex:l,rowRef:de,table:d,virtualCell:s?ee:void 0};return S==="cells"&&Ie.column.columnDef.columnDefType==="data"&&!M&&!O&&j?.id!==Ie.id&&B?.id!==u.id?w.jsx(Qyn,Object.assign({},Te),Ie.id):w.jsx(XUe,Object.assign({},Te),Ie.id)}),V?w.jsx(De,{component:"td",display:"flex",w:V}):null]})),T&&!u.getIsGrouped()&&w.jsx(Jyn,{parentRowRef:de,renderedRowIndex:l,row:u,rowVirtualizer:c,striped:te,table:d,virtualRow:h})]})},jq=k.memo(vk,(e,t)=>e.row===t.row);var M2={root:"MRT_ExpandButton-module_root__IFYio","root-ltr":"MRT_ExpandButton-module_root-ltr__FHNnp",chevron:"MRT_ExpandButton-module_chevron__XzC5P",right:"MRT_ExpandButton-module_right__-pC-A",up:"MRT_ExpandButton-module_up__TZGBo","root-rtl":"MRT_ExpandButton-module_root-rtl__zoudS"};const yQ=e=>{var t,n,{row:r,table:i}=e,s=Un(e,["row","table"]);const o=fc(),{options:{icons:{IconChevronDown:a},localization:l,mantineExpandButtonProps:u,positionExpandColumn:c,renderDetailPanel:d}}=i,f=Object.assign(Object.assign({},Ut(u,{row:r,table:i})),s),h=r.getAllCells().filter(b=>b.column.columnDef.columnDefType==="data").map(b=>w.jsx(qB,{cell:b,table:i},b.id)),p=r.getCanExpand(),m=r.getIsExpanded(),g=!!d?.({internalEditComponents:h,row:r,table:i}),y=b=>{var _;b.stopPropagation(),r.toggleExpanded(),(_=f?.onClick)===null||_===void 0||_.call(f,b)},v=o.dir==="rtl"||c==="last";return w.jsx(bt,{disabled:!p&&!g,label:(t=f?.title)!==null&&t!==void 0?t:m?l.collapse:l.expand,openDelay:1e3,withinPortal:!0,children:w.jsx(Rn,Object.assign({"aria-label":l.expand,color:"gray",disabled:!p&&!g,variant:"subtle"},f,{__vars:{"--mrt-row-depth":`${r.depth}`},className:Bt("mrt-expand-button",M2.root,M2[`root-${v?"rtl":"ltr"}`],f?.className),onClick:y,title:void 0,children:(n=f?.children)!==null&&n!==void 0?n:w.jsx(a,{className:Bt("mrt-expand-button-chevron",M2.chevron,!p&&!d?M2.right:m?M2.up:void 0)})}))})},ivn=e=>{var t,n,{table:r,tableProps:i}=e,s=Un(e,["table","tableProps"]);const{getState:o,options:{layoutMode:a,localization:l,renderDetailPanel:u,renderEmptyRowsFallback:c},refs:{tablePaperRef:d}}=r,{columnFilters:f,globalFilter:h}=o(),p=k.useMemo(()=>oT(r,"mrt-row-empty",{},0,0),[]),m=Object.assign(Object.assign({},s),{renderedRowIndex:0,row:p,virtualRow:void 0});return w.jsxs(vk,Object.assign({className:Bt("mrt-table-body-row",a?.startsWith("grid")&&Cd["empty-row-tr-grid"]),table:r,tableProps:i},m,{children:[u&&w.jsx(ER,{className:Bt("mrt-table-body-cell",a?.startsWith("grid")&&Cd["empty-row-td-grid"]),colSpan:1,children:w.jsx(yQ,{row:p,table:r})}),w.jsx("td",{className:Bt("mrt-table-body-cell",a?.startsWith("grid")&&Cd["empty-row-td-grid"]),colSpan:r.getVisibleLeafColumns().length,children:(t=c?.({table:r}))!==null&&t!==void 0?t:w.jsx(He,{__vars:{"--mrt-paper-width":`${(n=d.current)===null||n===void 0?void 0:n.clientWidth}`},className:Bt(Cd["empty-row-td-content"]),children:h||f.length?l.noResultsFound:l.noRecordsToDisplay})})]}))},svn=e=>{const{getRowModel:t,getState:n,options:{data:r,enableGlobalFilterRankedResults:i,positionCreatingRow:s}}=e,{creatingRow:o,expanded:a,globalFilter:l,pagination:u,rowPinning:c,sorting:d}=n();return k.useMemo(()=>QUe(e),[o,r,i,a,t().rows,l,u.pageIndex,u.pageSize,s,c,d])},eHe=(e,t)=>{const n=DUe(e);return t===void 0||(t>=0&&t<Math.max(e.startIndex-e.overscan,0)&&n.unshift(t),t>=0&&t>e.endIndex+e.overscan&&n.push(t)),n},ovn=(e,t)=>{var n;const{getRowModel:r,getState:i,options:{enableRowVirtualization:s,renderDetailPanel:o,rowVirtualizerInstanceRef:a,rowVirtualizerOptions:l},refs:{tableContainerRef:u}}=e,{density:c,draggingRow:d,expanded:f}=i();if(!s)return;const h=Ut(l,{table:e}),p=(n=t?.length)!==null&&n!==void 0?n:r().rows.length,m=c==="xs"?42.7:c==="md"?54.7:70.7,g=OUe(Object.assign({count:o?p*2:p,estimateSize:y=>o&&y%2===1?f===!0?100:0:m,getScrollElement:()=>u.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?y=>y?.getBoundingClientRect().height:void 0,overscan:4,rangeExtractor:k.useCallback(y=>{var v;return eHe(y,(v=d?.index)!==null&&v!==void 0?v:0)},[d])},h));return g.virtualRows=g.getVirtualItems(),a&&(a.current=g),g},tHe=e=>{var t,n,r,{columnVirtualizer:i,table:s,tableProps:o}=e,a=Un(e,["columnVirtualizer","table","tableProps"]);const{getBottomRows:l,getIsSomeRowsPinned:u,getRowModel:c,getState:d,getTopRows:f,options:{enableStickyFooter:h,enableStickyHeader:p,layoutMode:m,mantineTableBodyProps:g,memoMode:y,renderDetailPanel:v,rowPinningDisplayMode:b},refs:{tableFooterRef:_,tableHeadRef:E}}=s,{isFullScreen:S,rowPinning:T}=d(),A=Object.assign(Object.assign({},Ut(g,{table:s})),a),R=(p||S)&&((t=E.current)===null||t===void 0?void 0:t.clientHeight)||0,I=h&&((n=_.current)===null||n===void 0?void 0:n.clientHeight)||0,P=k.useMemo(()=>{var B,H;return!(!((B=T.bottom)===null||B===void 0)&&B.length)&&!(!((H=T.top)===null||H===void 0)&&H.length)?[]:c().rows.filter(q=>q.getIsPinned()).map(q=>q.id)},[T,c().rows]),N=svn(s),M=ovn(s,N),{virtualRows:O}=M??{},j={columnVirtualizer:i,numRows:N.length,table:s,tableProps:o};return w.jsxs(w.Fragment,{children:[!b?.includes("sticky")&&u("top")&&w.jsx($A,Object.assign({},A,{__vars:Object.assign({"--mrt-table-head-height":`${R}`},A?.__vars),className:Bt(Cd.pinned,m?.startsWith("grid")&&Cd["root-grid"],A?.className),children:f().map((B,H)=>{const q=Object.assign(Object.assign({},j),{renderedRowIndex:H,row:B});return y==="rows"?w.jsx(jq,Object.assign({},q),B.id):w.jsx(vk,Object.assign({},q),B.id)})})),w.jsx($A,Object.assign({},A,{__vars:Object.assign({"--mrt-table-body-height":M?`${M.getTotalSize()}px`:void 0},A?.__vars),className:Bt(Cd.root,m?.startsWith("grid")&&Cd["root-grid"],!N.length&&Cd["root-no-rows"],M&&Cd["root-virtualized"],A?.className),children:(r=A?.children)!==null&&r!==void 0?r:N.length?w.jsx(w.Fragment,{children:(O??N).map((B,H)=>{if(M)if(v){if(B.index%2===1)return null;H=B.index/2}else H=B.index;const q=M?N[H]:B,G=Object.assign(Object.assign({},j),{pinnedRowIds:P,renderedRowIndex:H,row:q,rowVirtualizer:M,virtualRow:M?B:void 0}),U=`${q.id}-${q.index}`;return y==="rows"?w.jsx(jq,Object.assign({},G),U):w.jsx(vk,Object.assign({},G),U)})}):w.jsx(ivn,Object.assign({},j))})),!b?.includes("sticky")&&u("bottom")&&w.jsx($A,Object.assign({},A,{__vars:Object.assign({"--mrt-table-footer-height":`${I}`},A?.__vars),className:Bt(Cd.pinned,m?.startsWith("grid")&&Cd["root-grid"],A?.className),children:l().map((B,H)=>{const q=Object.assign(Object.assign({},j),{renderedRowIndex:H,row:B});return y==="rows"?w.jsx(jq,Object.assign({},q),B.id):w.jsx(vk,Object.assign({},q),B.id)})}))]})},avn=k.memo(tHe,(e,t)=>e.table.options.data===t.table.options.data);var lvn={"grab-icon":"MRT_GrabHandleButton-module_grab-icon__mQimy"};const kle=({actionIconProps:e,onDragEnd:t,onDragStart:n,table:{options:{icons:{IconGripHorizontal:r},localization:{move:i}}}})=>{var s,o;return w.jsx(bt,{label:(s=e?.title)!==null&&s!==void 0?s:i,openDelay:1e3,withinPortal:!0,children:w.jsx(Rn,Object.assign({"aria-label":(o=e?.title)!==null&&o!==void 0?o:i,draggable:!0},e,{className:Bt("mrt-grab-handle-button",lvn["grab-icon"],e?.className),color:"gray",onClick:a=>{var l;a.stopPropagation(),(l=e?.onClick)===null||l===void 0||l.call(e,a)},onDragEnd:t,onDragStart:n,size:"sm",title:void 0,variant:"transparent",children:w.jsx(r,{size:"100%"})}))})},uvn=e=>{var{row:t,rowRef:n,table:r}=e,i=Un(e,["row","rowRef","table"]);const{options:{mantineRowDragHandleProps:s}}=r,o=Object.assign(Object.assign({},Ut(s,{row:t,table:r})),i),a=u=>{var c;(c=o?.onDragStart)===null||c===void 0||c.call(o,u),u.dataTransfer.setDragImage(n.current,0,0),r.setDraggingRow(t)},l=u=>{var c;(c=o?.onDragEnd)===null||c===void 0||c.call(o,u),r.setDraggingRow(null),r.setHoveredRow(null)};return w.jsx(kle,{actionIconProps:o,onDragEnd:l,onDragStart:a,table:r})},Bq=e=>{var{pinningPosition:t,row:n,table:r}=e,i=Un(e,["pinningPosition","row","table"]);const{options:{icons:{IconPinned:s,IconX:o},localization:a,rowPinningDisplayMode:l}}=r,u=n.getIsPinned(),[c,d]=k.useState(!1),f=h=>{d(!1),h.stopPropagation(),n.pin(u?!1:t)};return w.jsx(bt,{label:u?a.unpin:a.pin,openDelay:1e3,opened:c,children:w.jsx(Rn,Object.assign({"aria-label":a.pin,color:"gray",onClick:f,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),size:"xs",style:{height:"24px",width:"24px"},variant:"subtle"},i,{children:u?w.jsx(o,{}):w.jsx(s,{fontSize:"small",style:{transform:`rotate(${l==="sticky"?135:t==="top"?180:0}deg)`}})}))})},cvn=e=>{var{row:t,table:n}=e,r=Un(e,["row","table"]);const{getState:i,options:{enableRowPinning:s,rowPinningDisplayMode:o}}=n,{density:a}=i();if(!Ut(s,t))return null;const u=Object.assign({row:t,table:n},r);return o==="top-and-bottom"&&!t.getIsPinned()?w.jsxs(De,{style:{display:"flex",flexDirection:a==="xs"?"row":"column"},children:[w.jsx(Bq,Object.assign({pinningPosition:"top"},u)),w.jsx(Bq,Object.assign({pinningPosition:"bottom"},u))]}):w.jsx(Bq,Object.assign({pinningPosition:o==="bottom"?"bottom":"top"},u))};var zq={root:"MRT_ColumnPinningButtons-module_root__scTtW",left:"MRT_ColumnPinningButtons-module_left__W6Aog",right:"MRT_ColumnPinningButtons-module_right__7AJE3"};const dvn=({column:e,table:t})=>{const{options:{icons:{IconPinned:n,IconPinnedOff:r},localization:i}}=t;return w.jsx(Rt,{className:Bt("mrt-column-pinning-buttons",zq.root),children:e.getIsPinned()?w.jsx(bt,{label:i.unpin,withinPortal:!0,children:w.jsx(Rn,{color:"gray",onClick:()=>e.pin(!1),size:"md",variant:"subtle",children:w.jsx(r,{})})}):w.jsxs(w.Fragment,{children:[w.jsx(bt,{label:i.pinToLeft,withinPortal:!0,children:w.jsx(Rn,{color:"gray",onClick:()=>e.pin("left"),size:"md",variant:"subtle",children:w.jsx(n,{className:zq.left})})}),w.jsx(bt,{label:i.pinToRight,withinPortal:!0,children:w.jsx(Rn,{color:"gray",onClick:()=>e.pin("right"),size:"md",variant:"subtle",children:w.jsx(n,{className:zq.right})})})]})})};var fvn={root:"MRT_EditActionButtons-module_root__BfxVZ"};const nHe=e=>{var{row:t,table:n,variant:r="icon"}=e,i=Un(e,["row","table","variant"]);const{getState:s,options:{icons:{IconCircleX:o,IconDeviceFloppy:a},localization:l,onCreatingRowCancel:u,onCreatingRowSave:c,onEditingRowCancel:d,onEditingRowSave:f},refs:{editInputRefs:h},setCreatingRow:p,setEditingRow:m}=n,{creatingRow:g,editingRow:y,isSaving:v}=s(),b=g?.id===t.id,_=y?.id===t.id,E=()=>{b?(u?.({row:t,table:n}),p(null)):_&&(d?.({row:t,table:n}),m(null)),t._valuesCache={}},S=()=>{var T;(T=Object.values(h?.current).filter(A=>{var R,I;return t.id===((I=(R=A?.name)===null||R===void 0?void 0:R.split("_"))===null||I===void 0?void 0:I[0])}))===null||T===void 0||T.forEach(A=>{A.value!==void 0&&Object.hasOwn(t?._valuesCache,A.name)&&(t._valuesCache[A.name]=A.value)}),b?c?.({exitCreatingMode:()=>p(null),row:t,table:n,values:t._valuesCache}):_&&f?.({exitEditingMode:()=>m(null),row:t,table:n,values:t?._valuesCache})};return w.jsx(De,Object.assign({className:Bt("mrt-edit-action-buttons",fvn.root),onClick:T=>T.stopPropagation()},i,{children:r==="icon"?w.jsxs(w.Fragment,{children:[w.jsx(bt,{label:l.cancel,withinPortal:!0,children:w.jsx(Rn,{"aria-label":l.cancel,color:"red",onClick:E,variant:"subtle",children:w.jsx(o,{})})}),w.jsx(bt,{label:l.save,withinPortal:!0,children:w.jsx(Rn,{"aria-label":l.save,color:"blue",loading:v,onClick:S,variant:"subtle",children:w.jsx(a,{})})})]}):w.jsxs(w.Fragment,{children:[w.jsx(Yt,{onClick:E,variant:"subtle",children:l.cancel}),w.jsx(Yt,{loading:v,onClick:S,variant:"filled",children:l.save})]})}))};var DN={root:"MRT_ExpandAllButton-module_root__gkBZD",chevron:"MRT_ExpandAllButton-module_chevron__Iep0j",up:"MRT_ExpandAllButton-module_up__Xth3U",right:"MRT_ExpandAllButton-module_right__bS4L-"};const hvn=e=>{var t,n,{table:r}=e,i=Un(e,["table"]);const{getCanSomeRowsExpand:s,getIsAllRowsExpanded:o,getIsSomeRowsExpanded:a,getState:l,options:{icons:{IconChevronsDown:u},localization:c,mantineExpandAllButtonProps:d,renderDetailPanel:f},toggleAllRowsExpanded:h}=r,{density:p,isLoading:m}=l(),g=Object.assign(Object.assign({},Ut(d,{table:r})),i),y=o();return w.jsx(bt,{label:((t=g?.title)!==null&&t!==void 0?t:y)?c.collapseAll:c.expandAll,openDelay:1e3,withinPortal:!0,children:w.jsx(Rn,Object.assign({"aria-label":c.expandAll,color:"gray",variant:"subtle"},g,{className:Bt("mrt-expand-all-button",DN.root,g?.className,p),disabled:m||!f&&!s(),onClick:()=>h(!y),title:void 0,children:(n=g?.children)!==null&&n!==void 0?n:w.jsx(u,{className:Bt(DN.chevron,y?DN.up:a()?DN.right:void 0)})}))})};var CCe={root:"MRT_ShowHideColumnsMenu-module_root__2UWak",content:"MRT_ShowHideColumnsMenu-module_content__ehkWQ"},P_={root:"MRT_ShowHideColumnsMenuItems-module_root__wYgv-",menu:"MRT_ShowHideColumnsMenuItems-module_menu__CeATR",grab:"MRT_ShowHideColumnsMenuItems-module_grab__a-d-y",pin:"MRT_ShowHideColumnsMenuItems-module_pin__P437b",switch:"MRT_ShowHideColumnsMenuItems-module_switch__tMsdt",header:"MRT_ShowHideColumnsMenuItems-module_header__xVkKb"};const $E=e=>{var t,n,r,i;return(i=(t=e.id)!==null&&t!==void 0?t:(r=(n=e.accessorKey)===null||n===void 0?void 0:n.toString)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:e.header},q$=e=>{const t=[],n=r=>{r.forEach(i=>{i.columns?n(i.columns):t.push(i)})};return n(e),t},rHe=({columnDefs:e,tableOptions:t})=>{const{aggregationFns:n={},defaultDisplayColumn:r,filterFns:i={},sortingFns:s={},state:{columnFilterFns:o={}}={}}=t;return e.map(a=>{var l,u;if(a.id||(a.id=$E(a)),a.columnDefType||(a.columnDefType="data"),!((l=a.columns)===null||l===void 0)&&l.length)a.columnDefType="group",a.columns=rHe({columnDefs:a.columns,tableOptions:t});else if(a.columnDefType==="data"){if(Array.isArray(a.aggregationFn)){const c=a.aggregationFn;a.aggregationFn=(d,f,h)=>c.map(p=>{var m;return(m=n[p])===null||m===void 0?void 0:m.call(n,d,f,h)})}Object.keys(i).includes(o[a.id])&&(a.filterFn=(u=i[o[a.id]])!==null&&u!==void 0?u:i.fuzzy,a._filterFn=o[a.id]),Object.keys(s).includes(a.sortingFn)&&(a.sortingFn=s[a.sortingFn])}else a.columnDefType==="display"&&(a=Object.assign(Object.assign({},r),a));return a})},iHe=(e,t,n)=>{e.getCanPin()&&e.pin(t.getIsPinned());const r=[...n];return r.splice(r.indexOf(t.id),0,r.splice(r.indexOf(e.id),1)[0]),r},pvn=e=>{const{filterVariant:t}=e;return t==="multi-select"?"arrIncludesSome":t?.includes("range")?"betweenInclusive":["checkbox","date","select"].includes(t||"")?"equals":"fuzzy"},sHe=({allColumns:e,column:t,hoveredColumn:n,setHoveredColumn:r,table:i})=>{var s;const o=bs(),{getState:a,options:{enableColumnOrdering:l,enableColumnPinning:u,enableHiding:c,localization:d},setColumnOrder:f}=i,{columnOrder:h}=a(),{columnDef:p}=t,{columnDefType:m}=p,g=m!=="group"&&t.getIsVisible()||m==="group"&&t.getLeafColumns().some(A=>A.getIsVisible()),y=A=>{var R,I;m==="group"?(I=(R=A?.columns)===null||R===void 0?void 0:R.forEach)===null||I===void 0||I.call(R,P=>{P.toggleVisibility(!g)}):A.toggleVisibility()},v=k.useRef(null),[b,_]=k.useState(!1),E=A=>{_(!0),A.dataTransfer.setDragImage(v.current,0,0)},S=A=>{_(!1),r(null),n&&f(iHe(t,n,h))},T=A=>{!b&&p.enableColumnOrdering!==!1&&r(t)};return!p.header||p.visibleInShowHideMenu===!1?null:w.jsxs(w.Fragment,{children:[w.jsx(jn.Item,Object.assign({className:P_.root,component:"span",onDragEnter:T,ref:v,style:{"--_column-depth":`${(t.depth+.5)*2}rem`,"--_hover-color":Yyn(o)}},U$("dragging",b),U$("order-hovered",n?.id===t.id),{children:w.jsxs(De,{className:P_.menu,children:[m!=="group"&&l&&!e.some(A=>A.columnDef.columnDefType==="group")&&(p.enableColumnOrdering!==!1?w.jsx(kle,{onDragEnd:S,onDragStart:E,table:i}):w.jsx(De,{className:P_.grab})),u&&(t.getCanPin()?w.jsx(dvn,{column:t,table:i}):w.jsx(De,{className:P_.pin})),c?w.jsx(bt,{label:d.toggleVisibility,openDelay:1e3,withinPortal:!0,children:w.jsx(Xy,{checked:g,className:P_.switch,disabled:!t.getCanHide(),label:p.header,onChange:()=>y(t)})}):w.jsx(He,{className:P_.header,children:p.header})]})})),(s=t.columns)===null||s===void 0?void 0:s.map((A,R)=>w.jsx(sHe,{allColumns:e,column:A,hoveredColumn:n,setHoveredColumn:r,table:i},`${R}-${A.id}`))]})};function Ax({header:e,id:t,size:n,tableOptions:r}){const{defaultDisplayColumn:i,displayColumnDefOptions:s,localization:o}=r;return Object.assign(Object.assign(Object.assign(Object.assign({},i),{header:e?o[e]:"",size:n}),s?.[t]),{id:t})}const oHe=e=>{const{enableRowPinning:t,rowPinningDisplayMode:n}=e;return!!(t&&!n?.startsWith("select"))},aHe=e=>{const{enableRowDragging:t,enableRowOrdering:n}=e;return!!(t||n)},Ile=e=>{const{enableExpanding:t,enableGrouping:n,renderDetailPanel:r,state:{grouping:i}}=e;return!!(t||n&&i?.length||r)},Rle=e=>{const{createDisplayMode:t,editDisplayMode:n,enableEditing:r,enableRowActions:i,state:{creatingRow:s}}=e;return!!(i||s&&t==="row"||r&&["modal","row"].includes(n??""))},lHe=e=>!!e.enableRowSelection,uHe=e=>!!e.enableRowNumbers,cHe=e=>e.layoutMode==="grid-no-grow",mvn=e=>[oHe(e)&&"mrt-row-pin",aHe(e)&&"mrt-row-drag",e.positionActionsColumn==="first"&&Rle(e)&&"mrt-row-actions",e.positionExpandColumn==="first"&&Ile(e)&&"mrt-row-expand",lHe(e)&&"mrt-row-select",uHe(e)&&"mrt-row-numbers"].filter(Boolean),gvn=e=>[e.positionActionsColumn==="last"&&Rle(e)&&"mrt-row-actions",e.positionExpandColumn==="last"&&Ile(e)&&"mrt-row-expand",cHe(e)&&"mrt-row-spacer"].filter(Boolean),Dle=(e,t=!1)=>{const{state:{columnOrder:n=[]}}=e,r=mvn(e),i=gvn(e),s=q$(e.columns).map(a=>$E(a));let o=t?s:Array.from(new Set([...n,...s]));return o=o.filter(a=>!r.includes(a)&&!i.includes(a)),[...r,...o,...i]},yvn=({table:e})=>{const{getAllColumns:t,getAllLeafColumns:n,getCenterLeafColumns:r,getIsAllColumnsVisible:i,getIsSomeColumnsPinned:s,getIsSomeColumnsVisible:o,getLeftLeafColumns:a,getRightLeafColumns:l,getState:u,options:{enableColumnOrdering:c,enableColumnPinning:d,enableHiding:f,localization:h}}=e,{columnOrder:p,columnPinning:m}=u(),g=_=>{n().filter(E=>E.columnDef.enableHiding!==!1).forEach(E=>E.toggleVisibility(_))},y=k.useMemo(()=>{const _=t();return p.length>0&&!_.some(E=>E.columnDef.columnDefType==="group")?[...a(),...Array.from(new Set(p)).map(E=>r().find(S=>S?.id===E)),...l()].filter(Boolean):_},[p,m,t(),r(),a(),l()]),[v,b]=k.useState(null);return w.jsxs(jn.Dropdown,{className:Bt("mrt-show-hide-columns-menu",CCe.root),children:[w.jsxs(Rt,{className:CCe.content,children:[f&&w.jsx(Yt,{disabled:!o(),onClick:()=>g(!1),variant:"subtle",children:h.hideAll}),c&&w.jsx(Yt,{onClick:()=>e.setColumnOrder(Dle(e.options,!0)),variant:"subtle",children:h.resetOrder}),d&&w.jsx(Yt,{disabled:!s(),onClick:()=>e.resetColumnPinning(!0),variant:"subtle",children:h.unpinAll}),f&&w.jsx(Yt,{disabled:i(),onClick:()=>g(!0),variant:"subtle",children:h.showAll})]}),w.jsx(jn.Divider,{}),y.map((_,E)=>w.jsx(sHe,{allColumns:y,column:_,hoveredColumn:v,setHoveredColumn:b,table:e},`${E}-${_.id}`))]})},vvn=e=>{var{table:t,title:n}=e,r=Un(e,["table","title"]);const{icons:{IconColumns:i},localization:{showHideColumns:s}}=t.options;return w.jsxs(jn,{closeOnItemClick:!1,withinPortal:!0,children:[w.jsx(bt,{label:n??s,withinPortal:!0,children:w.jsx(jn.Target,{children:w.jsx(Rn,Object.assign({"aria-label":n??s,color:"gray",size:"lg",variant:"subtle"},r,{children:w.jsx(i,{})}))})}),w.jsx(yvn,{table:t})]})},bvn={md:"xs",xl:"md",xs:"xl"},wvn=e=>{var{table:{getState:t,options:{icons:{IconBaselineDensityLarge:n,IconBaselineDensityMedium:r,IconBaselineDensitySmall:i},localization:{toggleDensity:s}},setDensity:o},title:a}=e,l=Un(e,["table","title"]);const{density:u}=t();return w.jsx(bt,{label:a??s,withinPortal:!0,children:w.jsx(Rn,Object.assign({"aria-label":a??s,color:"gray",onClick:()=>o(c=>bvn[c]),size:"lg",variant:"subtle"},l,{children:u==="xs"?w.jsx(i,{}):u==="md"?w.jsx(r,{}):w.jsx(n,{})}))})},xvn=e=>{var{table:{getState:t,options:{icons:{IconFilter:n,IconFilterOff:r},localization:{showHideFilters:i}},setShowColumnFilters:s},title:o}=e,a=Un(e,["table","title"]);const{showColumnFilters:l}=t();return w.jsx(bt,{label:o??i,withinPortal:!0,children:w.jsx(Rn,Object.assign({"aria-label":o??i,color:"gray",onClick:()=>s(u=>!u),size:"lg",variant:"subtle"},a,{children:l?w.jsx(r,{}):w.jsx(n,{})}))})},_vn=e=>{var{table:{getState:t,options:{icons:{IconMaximize:n,IconMinimize:r},localization:{toggleFullScreen:i}},setIsFullScreen:s},title:o}=e,a=Un(e,["table","title"]);const{isFullScreen:l}=t(),[u,c]=k.useState(!1),d=()=>{c(!1),s(f=>!f)};return w.jsx(bt,{label:o??i,opened:u,withinPortal:!0,children:w.jsx(Rn,Object.assign({"aria-label":o??i,color:"gray",onClick:d,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),size:"lg",variant:"subtle"},a,{children:l?w.jsx(r,{}):w.jsx(n,{})}))})},Evn=e=>{var{table:{getState:t,options:{icons:{IconSearch:n,IconSearchOff:r},localization:{showHideSearch:i}},refs:{searchInputRef:s},setShowGlobalFilter:o},title:a}=e,l=Un(e,["table","title"]);const{globalFilter:u,showGlobalFilter:c}=t(),d=()=>{o(!c),setTimeout(()=>{var f;return(f=s.current)===null||f===void 0?void 0:f.focus()},100)};return w.jsx(bt,{label:a??i,withinPortal:!0,children:w.jsx(Rn,Object.assign({"aria-label":a??i,color:"gray",disabled:!!u,onClick:d,size:"lg",variant:"subtle"},l,{children:c?w.jsx(r,{}):w.jsx(n,{})}))})},Cvn=e=>{var{handleEdit:t,row:n,table:r}=e,i=Un(e,["handleEdit","row","table"]);const{options:{editDisplayMode:s,enableEditing:o,icons:{IconDots:a,IconEdit:l},localization:u,positionActionsColumn:c,renderRowActionMenuItems:d}}=r;return w.jsxs(jn,{closeOnItemClick:!0,position:c==="first"?"bottom-start":c==="last"?"bottom-end":void 0,withinPortal:!0,children:[w.jsx(bt,{label:u.rowActions,openDelay:1e3,withinPortal:!0,children:w.jsx(jn.Target,{children:w.jsx(Rn,Object.assign({"aria-label":u.rowActions,color:"gray",onClick:f=>f.stopPropagation(),size:"sm",variant:"subtle"},i,{children:w.jsx(a,{})}))})}),w.jsxs(jn.Dropdown,{onClick:f=>f.stopPropagation(),children:[o&&s!=="table"&&w.jsx(jn.Item,{leftSection:w.jsx(l,{}),onClick:t,children:u.edit}),d?.({row:n,table:r})]})]})},Svn=({cell:e,row:t,table:n})=>{const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableEditing:o,icons:{IconEdit:a},localization:{edit:l},renderRowActionMenuItems:u,renderRowActions:c},setEditingRow:d}=n,{creatingRow:f,editingRow:h}=r(),p=f?.id===t.id,m=h?.id===t.id,g=v=>{v.stopPropagation(),d(Object.assign({},t))},y=p&&i==="row"||m&&s==="row";return w.jsx(w.Fragment,{children:c&&!y?c({cell:e,row:t,table:n}):y?w.jsx(nHe,{row:t,table:n}):!u&&Ut(o,t)?w.jsx(bt,{label:l,openDelay:1e3,position:"right",withinPortal:!0,children:w.jsx(Rn,{"aria-label":l,color:"gray",disabled:!!h&&h.id!==t.id,onClick:g,size:"md",variant:"subtle",children:w.jsx(a,{})})}):u?w.jsx(Cvn,{handleEdit:g,row:t,table:n}):null})};var Vq={root:"MRT_TableFooter-module_root__-JXpw",grid:"MRT_TableFooter-module_grid__J3Ga-",sticky:"MRT_TableFooter-module_sticky__GcoK6"},SCe={root:"MRT_TableFooterRow-module_root__EuoPr","layout-mode-grid":"MRT_TableFooterRow-module_layout-mode-grid__dUEMF"},Uq={root:"MRT_TableFooterCell-module_root__d8Scs",grid:"MRT_TableFooterCell-module_grid__H9jLk",group:"MRT_TableFooterCell-module_group__l3-p-"};const Tvn=e=>{var t,n,r,i,s,{footer:o,renderedColumnIndex:a,table:l}=e,u=Un(e,["footer","renderedColumnIndex","table"]);const c=fc(),{options:{enableColumnPinning:d,layoutMode:f,mantineTableFooterCellProps:h}}=l,{column:p}=o,{columnDef:m}=p,{columnDefType:g}=m,y=d&&m.columnDefType!=="group"&&p.getIsPinned(),v={column:p,table:l},b=Object.assign(Object.assign(Object.assign({},Ut(h,v)),Ut(m.mantineTableFooterCellProps,v)),u),_={minWidth:`max(calc(var(--header-${ch(o?.id)}-size) * 1px), ${(t=m.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${ch(o.id)}-size) * 1px)`};return f==="grid"?_.flex=`${[0,!1].includes(m.grow)?0:`var(--header-${ch(o.id)}-size)`} 0 auto`:f==="grid-no-grow"&&(_.flex=`${+(m.grow||0)} 0 auto`),w.jsx(KE,Object.assign({colSpan:o.colSpan,"data-column-pinned":y||void 0,"data-first-right-pinned":y==="right"&&p.getIsFirstColumn(y)||void 0,"data-index":a,"data-last-left-pinned":y==="left"&&p.getIsLastColumn(y)||void 0},b,{__vars:Object.assign({"--mrt-cell-align":(n=b.align)!==null&&n!==void 0?n:g==="group"?"center":c.dir==="rtl"?"right":"left","--mrt-table-cell-left":y==="left"?`${p.getStart(y)}`:void 0,"--mrt-table-cell-right":y==="right"?`${p.getAfter(y)}`:void 0},b?.__vars),className:Bt(Uq.root,f?.startsWith("grid")&&Uq.grid,g==="group"&&Uq.group,b?.className),style:E=>Object.assign(Object.assign({},_),Ut(b.style,E)),children:(r=b.children)!==null&&r!==void 0?r:o.isPlaceholder?null:(s=(i=Ut(m.Footer,{column:p,footer:o,table:l}))!==null&&i!==void 0?i:m.footer)!==null&&s!==void 0?s:null}))},Avn=e=>{var t,{columnVirtualizer:n,footerGroup:r,table:i}=e,s=Un(e,["columnVirtualizer","footerGroup","table"]);const{options:{layoutMode:o,mantineTableFooterRowProps:a}}=i,{virtualColumns:l,virtualPaddingLeft:u,virtualPaddingRight:c}=n??{};if(!(!((t=r.headers)===null||t===void 0)&&t.some(f=>typeof f.column.columnDef.footer=="string"&&!!f.column.columnDef.footer||f.column.columnDef.Footer)))return null;const d=Object.assign(Object.assign({},Ut(a,{footerGroup:r,table:i})),s);return w.jsxs(Ag,Object.assign({className:Bt(SCe.root,o?.startsWith("grid")&&SCe["layout-mode-grid"])},d,{children:[u?w.jsx(De,{component:"th",display:"flex",w:u}):null,(l??r.headers).map((f,h)=>{let p=f;return n&&(h=f.index,p=r.headers[h]),w.jsx(Tvn,{footer:p,renderedColumnIndex:h,table:i},p.id)}),c?w.jsx(De,{component:"th",display:"flex",w:c}):null]}))},kvn=e=>{var{columnVirtualizer:t,table:n}=e,r=Un(e,["columnVirtualizer","table"]);const{getFooterGroups:i,getState:s,options:{enableStickyFooter:o,layoutMode:a,mantineTableFooterProps:l},refs:{tableFooterRef:u}}=n,{isFullScreen:c}=s(),d=Object.assign(Object.assign({},Ut(l,{table:n})),r),f=(c||o)&&o!==!1;return w.jsx(UZ,Object.assign({},d,{className:Bt(Vq.root,d?.className,f&&Vq.sticky,a?.startsWith("grid")&&Vq.grid),ref:h=>{u.current=h,d?.ref&&(d.ref.current=h)},children:i().map(h=>w.jsx(Avn,{columnVirtualizer:t,footerGroup:h,table:n},h.id))}))};var ly={root:"MRT_TableHead-module_root__j9NkO","root-grid":"MRT_TableHead-module_root-grid__c3aGl","root-table-row-group":"MRT_TableHead-module_root-table-row-group__d9FO4","root-sticky":"MRT_TableHead-module_root-sticky__0kuDE","banner-tr":"MRT_TableHead-module_banner-tr__EhT-x","banner-th":"MRT_TableHead-module_banner-th__KwM5a",grid:"MRT_TableHead-module_grid__OJ-td"},Hq={root:"MRT_TableHeadRow-module_root__hUKv4","layout-mode-grid":"MRT_TableHeadRow-module_layout-mode-grid__4ZGri",sticky:"MRT_TableHeadRow-module_sticky__Ej7Ax"},Da={root:"MRT_TableHeadCell-module_root__6y50a","root-grid":"MRT_TableHeadCell-module_root-grid__bAf1d","root-virtualized":"MRT_TableHeadCell-module_root-virtualized__CWLit","root-no-select":"MRT_TableHeadCell-module_root-no-select__BEOVU",content:"MRT_TableHeadCell-module_content__-pzSK","content-spaced":"MRT_TableHeadCell-module_content-spaced__S85Aa","content-center":"MRT_TableHeadCell-module_content-center__c-17L","content-right":"MRT_TableHeadCell-module_content-right__NSRZU","content-wrapper":"MRT_TableHeadCell-module_content-wrapper__py6aJ","content-wrapper-hidden-overflow":"MRT_TableHeadCell-module_content-wrapper-hidden-overflow__QY40r","content-wrapper-nowrap":"MRT_TableHeadCell-module_content-wrapper-nowrap__-4aIg",labels:"MRT_TableHeadCell-module_labels__oiMSr","labels-right":"MRT_TableHeadCell-module_labels-right__6ZJp-","labels-center":"MRT_TableHeadCell-module_labels-center__MM9q8","labels-sortable":"MRT_TableHeadCell-module_labels-sortable__tyuLr","labels-data":"MRT_TableHeadCell-module_labels-data__PvFGO","content-actions":"MRT_TableHeadCell-module_content-actions__utxbm"},Ivn={"filter-mode-label":"MRT_TableHeadCellFilterContainer-module_filter-mode-label__8reK-"};const dHe=(e,t,n,r)=>{const i=C0n(e.getValue(t),n,{threshold:Xl.MATCHES});return r(i),i.passed};dHe.autoRemove=e=>!e;const fHe=(e,t,n)=>{var r;return(r=e.getValue(t))===null||r===void 0?void 0:r.toString().toLowerCase().trim().includes(n.toString().toLowerCase().trim())};fHe.autoRemove=e=>!e;const hHe=(e,t,n)=>{var r;return(r=e.getValue(t))===null||r===void 0?void 0:r.toString().toLowerCase().trim().startsWith(n.toString().toLowerCase().trim())};hHe.autoRemove=e=>!e;const pHe=(e,t,n)=>{var r;return(r=e.getValue(t))===null||r===void 0?void 0:r.toString().toLowerCase().trim().endsWith(n.toString().toLowerCase().trim())};pHe.autoRemove=e=>!e;const WB=(e,t,n)=>{var r;return((r=e.getValue(t))===null||r===void 0?void 0:r.toString().toLowerCase().trim())===n?.toString().toLowerCase().trim()};WB.autoRemove=e=>!e;const mHe=(e,t,n)=>{var r;return((r=e.getValue(t))===null||r===void 0?void 0:r.toString().toLowerCase().trim())!==n.toString().toLowerCase().trim()};mHe.autoRemove=e=>!e;const GB=(e,t,n)=>{var r;return!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)>+n:((r=e.getValue(t))===null||r===void 0?void 0:r.toString().toLowerCase().trim())>n?.toString().toLowerCase().trim()};GB.autoRemove=e=>!e;const Ple=(e,t,n)=>WB(e,t,n)||GB(e,t,n);Ple.autoRemove=e=>!e;const YB=(e,t,n)=>{var r;return!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)<+n:((r=e.getValue(t))===null||r===void 0?void 0:r.toString().toLowerCase().trim())<n?.toString().toLowerCase().trim()};YB.autoRemove=e=>!e;const Ole=(e,t,n)=>WB(e,t,n)||YB(e,t,n);Ole.autoRemove=e=>!e;const gHe=(e,t,n)=>(["",void 0].includes(n[0])||GB(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||YB(e,t,n[1]));gHe.autoRemove=e=>!e;const yHe=(e,t,n)=>(["",void 0].includes(n[0])||Ple(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||Ole(e,t,n[1]));yHe.autoRemove=e=>!e;const vHe=(e,t,n)=>{var r;return!(!((r=e.getValue(t))===null||r===void 0)&&r.toString().trim())};vHe.autoRemove=e=>!e;const bHe=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))===null||r===void 0)&&r.toString().trim())};bHe.autoRemove=e=>!e;const Rvn=Object.assign(Object.assign({},wp),{between:gHe,betweenInclusive:yHe,contains:fHe,empty:vHe,endsWith:pHe,equals:WB,fuzzy:dHe,greaterThan:GB,greaterThanOrEqualTo:Ple,lessThan:YB,lessThanOrEqualTo:Ole,notEmpty:bHe,notEquals:mHe,startsWith:hHe});function Nle(e,t){var n;if(!t)return"";const r=`filter${t[0].toUpperCase()}${t.slice(1)}`;return(n=e[r])!==null&&n!==void 0?n:""}var Dvn={root:"MRT_FilterCheckBox-module_root__59h9r"};const Pvn=e=>{var t,n,r,{column:i,table:s}=e,o=Un(e,["column","table"]);const{getState:a,options:{localization:l,mantineFilterCheckboxProps:u}}=s,{density:c}=a(),{columnDef:d}=i,f={column:i,table:s},h=Object.assign(Object.assign(Object.assign({},Ut(u,f)),Ut(d.mantineFilterCheckboxProps,f)),o),p=(t=l.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",d.header),m=i.getFilterValue();return w.jsx(bt,{label:(n=h?.title)!==null&&n!==void 0?n:p,openDelay:1e3,withinPortal:!0,children:w.jsx(_l,Object.assign({checked:m==="true",className:Bt("mrt-filter-checkbox",Dvn.root),indeterminate:m===void 0,label:(r=h.title)!==null&&r!==void 0?r:p,size:c==="xs"?"sm":"md"},h,{onChange:g=>{var y;i.setFilterValue(i.getFilterValue()===void 0?"true":i.getFilterValue()==="true"?"false":void 0),(y=h?.onChange)===null||y===void 0||y.call(h,g)},onClick:g=>{var y;g.stopPropagation(),(y=h?.onClick)===null||y===void 0||y.call(h,g)},title:void 0}))})};var Ovn={root:"MRT_FilterRangeFields-module_root__KfCcg"},$2={root:"MRT_FilterTextInput-module_root__Ss8Ql","date-filter":"MRT_FilterTextInput-module_date-filter__jOBLB","range-filter":"MRT_FilterTextInput-module_range-filter__JQHAL","not-filter-chip":"MRT_FilterTextInput-module_not-filter-chip__u8b1y","filter-chip-badge":"MRT_FilterTextInput-module_filter-chip-badge__Sel2k"};const vQ=e=>{var t,n,r,i,s,o,a,l,{header:u,rangeFilterIndex:c,table:d}=e,f=Un(e,["header","rangeFilterIndex","table"]);const{options:{columnFilterDisplayMode:h,columnFilterModeOptions:p,icons:{IconX:m},localization:g,mantineFilterAutocompleteProps:y,mantineFilterDateInputProps:v,mantineFilterMultiSelectProps:b={clearable:!0},mantineFilterSelectProps:_,mantineFilterTextInputProps:E,manualFiltering:S},refs:{filterInputRefs:T},setColumnFilterFns:A}=d,{column:R}=u,{columnDef:I}=R,P={column:R,rangeFilterIndex:c,table:d},N=Object.assign(Object.assign(Object.assign({},Ut(E,P)),Ut(I.mantineFilterTextInputProps,P)),f),M=Object.assign(Object.assign({},Ut(_,P)),Ut(I.mantineFilterSelectProps,P)),O=Object.assign(Object.assign({},Ut(b,P)),Ut(I.mantineFilterMultiSelectProps,P)),j=Object.assign(Object.assign({},Ut(v,P)),Ut(I.mantineFilterDateInputProps,P)),B=Object.assign(Object.assign({},Ut(y,P)),Ut(I.mantineFilterAutocompleteProps,P)),H=I.filterVariant==="range"||I.filterVariant==="date-range"||c!==void 0,q=I.filterVariant==="select",G=I.filterVariant==="multi-select",U=I.filterVariant==="date"||I.filterVariant==="date-range",L=I.filterVariant==="autocomplete",z=(t=I?.columnFilterModeOptions)!==null&&t!==void 0?t:p,V=I._filterFn,Y=["empty","notEmpty"].includes(V)?Nle(g,V):"",Q=H?c===0?g.min:c===1?g.max:"":(n=N?.placeholder)!==null&&n!==void 0?n:(r=g.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(I.header)),ne=R.getFacetedUniqueValues(),ue=k.useMemo(()=>{var ee,me,Ie;return((Ie=(me=(ee=B?.data)!==null&&ee!==void 0?ee:M?.data)!==null&&me!==void 0?me:O?.data)!==null&&Ie!==void 0?Ie:(L||q||G)&&ne?Array.from(ne.keys()).filter(Te=>Te!==null).sort((Te,we)=>Te.localeCompare(we)):[]).filter(Te=>Te!=null)},[B?.data,ne,L,G,q,O?.data,M?.data]),se=k.useRef(!1),[ae,he]=k.useState(()=>{var ee,me;return G?R.getFilterValue()||[]:H?((ee=R.getFilterValue())===null||ee===void 0?void 0:ee[c])||"":(me=R.getFilterValue())!==null&&me!==void 0?me:""}),[ie]=HTe(ae,S?400:200);k.useEffect(()=>{se.current&&(H?R.setFilterValue(ee=>{const me=Array.isArray(ee)?ee:["",""];return me[c]=ie,me}):R.setFilterValue(ie??void 0))},[ie]),k.useEffect(()=>{if(!se.current){se.current=!0;return}const ee=R.getFilterValue();ee===void 0?le():he(H&&c!==void 0?(ee??["",""])[c]:ee??"")},[R.getFilterValue()]);const le=()=>{G?(he([]),R.setFilterValue([])):H?(he(""),R.setFilterValue(ee=>{const me=Array.isArray(ee)?ee:["",""];return me[c]=void 0,me})):q?(he(null),R.setFilterValue(null)):(he(""),R.setFilterValue(void 0))},Ce=()=>{G?(he([]),R.setFilterValue([])):(he(""),R.setFilterValue(void 0)),A(ee=>{var me;return Object.assign(Object.assign({},ee),{[u.id]:(me=z?.[0])!==null&&me!==void 0?me:"fuzzy"})})},X={"aria-label":Q,className:Bt("mrt-filter-text-input",$2.root,U?$2["date-filter"]:H?$2["range-filter"]:!Y&&$2["not-filter-chip"]),disabled:!!Y,onChange:he,onClick:ee=>ee.stopPropagation(),placeholder:Q,style:Object.assign({},G?O?.style:q?M?.style:U?j?.style:N?.style),title:Q,value:G&&!Array.isArray(ae)?[]:ae,variant:"unstyled"},{className:fe}=X,de=Un(X,["className"]),te=ae?w.jsx(Rn,{"aria-label":g.clearFilter,color:"var(--mantine-color-gray-7)",onClick:le,size:"sm",title:(i=g.clearFilter)!==null&&i!==void 0?i:"",variant:"transparent",children:w.jsx(m,{})}):null;return I.Filter?w.jsx(w.Fragment,{children:(s=I.Filter)===null||s===void 0?void 0:s.call(I,{column:R,header:u,rangeFilterIndex:c,table:d})}):Y?w.jsx(De,{style:de.style,children:w.jsx(_o,{className:$2["filter-chip-badge"],onClick:Ce,rightSection:te,size:"lg",children:Y})}):G?w.jsx(tS,Object.assign({},de,{searchable:!0},O,{className:Bt(fe,O.className),data:ue,onChange:ee=>he(ee),ref:ee=>{ee&&(T.current[`${R.id}-${c??0}`]=ee,O.ref&&(O.ref.current=ee))},rightSection:!((o=ae?.toString())===null||o===void 0)&&o.length&&O?.clearable?te:void 0,style:de.style})):q?w.jsx(Ug,Object.assign({},de,{clearable:!0,searchable:!0},M,{className:Bt(fe,M.className),clearButtonProps:{size:"md"},data:ue,ref:ee=>{ee&&(T.current[`${R.id}-${c??0}`]=ee,M.ref&&(M.ref.current=ee))},style:de.style})):U?w.jsx(Ale,Object.assign({},de,{allowDeselect:!0,clearable:!0,popoverProps:{withinPortal:h!=="popover"}},j,{className:Bt(fe,j.className),onChange:ee=>de.onChange(ee===null?"":ee),ref:ee=>{ee&&(T.current[`${R.id}-${c??0}`]=ee,j.ref&&(j.ref.current=ee))},style:de.style})):L?w.jsx(rZ,Object.assign({},de,{onChange:ee=>he(ee),rightSection:!((a=ae?.toString())===null||a===void 0)&&a.length?te:void 0},B,{className:Bt(fe,B.className),data:ue,ref:ee=>{ee&&(T.current[`${R.id}-${c??0}`]=ee,B.ref&&(B.ref.current=ee))},style:de.style})):w.jsx(iu,Object.assign({},de,{onChange:ee=>he(ee.target.value),rightSection:!((l=ae?.toString())===null||l===void 0)&&l.length?te:void 0},N,{className:Bt(fe,N.className),mt:0,ref:ee=>{ee&&(T.current[`${R.id}-${c??0}`]=ee,N.ref&&(N.ref.current=ee))},style:de.style}))},Nvn=e=>{var{header:t,table:n}=e,r=Un(e,["header","table"]);return w.jsxs(De,Object.assign({},r,{className:Bt("mrt-filter-range-fields",Ovn.root,r.className),children:[w.jsx(vQ,{header:t,rangeFilterIndex:0,table:n}),w.jsx(vQ,{header:t,rangeFilterIndex:1,table:n})]}))};var Mvn={root:"MRT_FilterRangeSlider-module_root__uwYEk"};const $vn=e=>{var t,{header:n,table:r}=e,i=Un(e,["header","table"]);const{options:{mantineFilterRangeSliderProps:s},refs:{filterInputRefs:o}}=r,{column:a}=n,{columnDef:l}=a,u={column:a,table:r},c=Object.assign(Object.assign(Object.assign({},Ut(s,u)),Ut(l.mantineFilterRangeSliderProps,u)),i);let[d,f]=c.min!==void 0&&c.max!==void 0?[c.min,c.max]:(t=a.getFacetedMinMaxValues())!==null&&t!==void 0?t:[0,1];Array.isArray(d)&&(d=d[0]),Array.isArray(f)&&(f=f[0]),d===null&&(d=0),f===null&&(f=1);const[h,p]=k.useState([d,f]),m=a.getFilterValue(),g=k.useRef(!1);return k.useEffect(()=>{g.current&&(m===void 0?p([d,f]):Array.isArray(m)&&p(m)),g.current=!0},[m,d,f]),w.jsx(Nk,Object.assign({className:Bt("mrt-filter-range-slider",Mvn.root),max:f,min:d,onChange:y=>{p(y)},onChangeEnd:y=>{Array.isArray(y)&&(y[0]<=d&&y[1]>=f?a.setFilterValue(void 0):a.setFilterValue(y))},value:h},c,{ref:y=>{y&&(o.current[`${a.id}-0`]=y,c?.ref&&(c.ref=y))}}))};var Fvn={symbol:"MRT_FilterOptionMenu-module_symbol__a1Bsy"};const Lvn=e=>[{divider:!1,label:e.filterFuzzy,option:"fuzzy",symbol:""},{divider:!1,label:e.filterContains,option:"contains",symbol:"*"},{divider:!1,label:e.filterStartsWith,option:"startsWith",symbol:"a"},{divider:!0,label:e.filterEndsWith,option:"endsWith",symbol:"z"},{divider:!1,label:e.filterEquals,option:"equals",symbol:"="},{divider:!0,label:e.filterNotEquals,option:"notEquals",symbol:""},{divider:!1,label:e.filterBetween,option:"between",symbol:""},{divider:!0,label:e.filterBetweenInclusive,option:"betweenInclusive",symbol:""},{divider:!1,label:e.filterGreaterThan,option:"greaterThan",symbol:">"},{divider:!1,label:e.filterGreaterThanOrEqualTo,option:"greaterThanOrEqualTo",symbol:""},{divider:!1,label:e.filterLessThan,option:"lessThan",symbol:"<"},{divider:!0,label:e.filterLessThanOrEqualTo,option:"lessThanOrEqualTo",symbol:""},{divider:!1,label:e.filterEmpty,option:"empty",symbol:""},{divider:!1,label:e.filterNotEmpty,option:"notEmpty",symbol:"!"}],PN=["between","betweenInclusive","inNumberRange"],qq=["empty","notEmpty"],jvn=["arrIncludesSome","arrIncludesAll","arrIncludes"],TCe=["range-slider","date-range","range"],wHe=({header:e,onSelect:t,table:n})=>{var r,i,s,o;const{getState:a,options:{columnFilterModeOptions:l,globalFilterModeOptions:u,localization:c,renderColumnFilterModeMenuItems:d,renderGlobalFilterModeMenuItems:f},setColumnFilterFns:h,setGlobalFilterFn:p}=n,{globalFilterFn:m}=a(),{column:g}=e??{},{columnDef:y}=g??{},v=g?.getFilterValue();let b=(r=y?.columnFilterModeOptions)!==null&&r!==void 0?r:l;TCe.includes(y?.filterVariant)&&(b=[...PN,...b??[]].filter(T=>PN.includes(T)));const _=k.useMemo(()=>Lvn(c).filter(T=>y?b===void 0||b?.includes(T.option):(!u||u.includes(T.option))&&["contains","fuzzy","startsWith"].includes(T.option)),[]),E=T=>{var A;const R=(A=y?._filterFn)!==null&&A!==void 0?A:"";!e||!g?p(T):T!==R&&(h(I=>Object.assign(Object.assign({},I),{[e.id]:T})),qq.includes(T)?v!==" "&&!qq.includes(R)?g.setFilterValue(" "):v&&g.setFilterValue(v):y?.filterVariant==="multi-select"||jvn.includes(T)?v instanceof String||v?.length?g.setFilterValue([]):v&&g.setFilterValue(v):TCe.includes(y?.filterVariant)||PN.includes(T)?!Array.isArray(v)||!v?.every(I=>I==="")&&!PN.includes(R)?g.setFilterValue(["",""]):g.setFilterValue(v):Array.isArray(v)?g.setFilterValue(""):v===" "&&qq.includes(R)?g.setFilterValue(void 0):g.setFilterValue(v)),t?.()},S=e&&y?y._filterFn:m;return w.jsx(jn.Dropdown,{children:(o=e&&g&&y?(s=(i=y.renderColumnFilterModeMenuItems)===null||i===void 0?void 0:i.call(y,{column:g,internalFilterOptions:_,onSelectFilterMode:E,table:n}))!==null&&s!==void 0?s:d?.({column:g,internalFilterOptions:_,onSelectFilterMode:E,table:n}):f?.({internalFilterOptions:_,onSelectFilterMode:E,table:n}))!==null&&o!==void 0?o:_.map(({divider:T,label:A,option:R,symbol:I},P)=>w.jsxs(k.Fragment,{children:[w.jsx(jn.Item,{color:R===S?"blue":void 0,leftSection:w.jsx("span",{className:Fvn.symbol,children:I}),onClick:()=>E(R),value:R,children:A}),T&&w.jsx(jn.Divider,{})]},P))})},xHe=e=>{var t,n,{header:r,table:i}=e,s=Un(e,["header","table"]);const{getState:o,options:{columnFilterDisplayMode:a,columnFilterModeOptions:l,enableColumnFilterModes:u,icons:{IconFilterCog:c},localization:d},refs:{filterInputRefs:f}}=i,{showColumnFilters:h}=o(),{column:p}=r,{columnDef:m}=p,g=m._filterFn,y=(t=m?.columnFilterModeOptions)!==null&&t!==void 0?t:l,v=u&&m.enableColumnFilterModes!==!1&&(y===void 0||!!y?.length);return w.jsx(vm,{in:h||a==="popover",children:w.jsxs(Rt,Object.assign({direction:"column"},s,{children:[w.jsxs(Rt,{align:"flex-end",children:[m.filterVariant==="checkbox"?w.jsx(Pvn,{column:p,table:i}):m.filterVariant==="range-slider"?w.jsx($vn,{header:r,table:i}):["date-range","range"].includes((n=m.filterVariant)!==null&&n!==void 0?n:"")||["between","betweenInclusive","inNumberRange"].includes(m._filterFn)?w.jsx(Nvn,{header:r,table:i}):w.jsx(vQ,{header:r,table:i}),v&&w.jsxs(jn,{withinPortal:a!=="popover",children:[w.jsx(bt,{label:d.changeFilterMode,position:"bottom-start",withinPortal:!0,children:w.jsx(jn.Target,{children:w.jsx(Rn,{"aria-label":d.changeFilterMode,color:"gray",size:"md",variant:"subtle",children:w.jsx(c,{})})})}),w.jsx(wHe,{header:r,onSelect:()=>setTimeout(()=>{var b;return(b=f.current[`${p.id}-0`])===null||b===void 0?void 0:b.focus()},100),table:i})]})]}),v?w.jsx(He,{c:"dimmed",className:Ivn["filter-mode-label"],component:"label",children:d.filterMode.replace("{filterType}",Nle(d,g))}):null]}))})};var Bvn={root:"MRT_TableHeadCellFilterLabel-module_root__Rur2R"};const zvn=e=>{var t,n,r,{header:i,table:s}=e,o=Un(e,["header","table"]);const{options:{columnFilterDisplayMode:a,icons:{IconFilter:l},localization:u},refs:{filterInputRefs:c},setShowColumnFilters:d}=s,{column:f}=i,{columnDef:h}=f,p=f.getFilterValue(),[m,g]=k.useState(!1),y=Array.isArray(p)&&p.some(Boolean)||!!p&&!Array.isArray(p),v=h.filterVariant==="range"||h.filterVariant==="date-range"||["between","betweenInclusive","inNumberRange"].includes(h._filterFn),b=h._filterFn,_=h.filterTooltipValueFn||(S=>S),E=a==="popover"&&!y?(t=u.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",String(h.header)):u.filteringByColumn.replace("{column}",String(h.header)).replace("{filterType}",Nle(u,b)).replace("{filterValue}",`"${Array.isArray(f.getFilterValue())?f.getFilterValue().map(S=>_(S)).join(`" ${v?u.and:u.or} "`):_(f.getFilterValue())}"`).replace('" "',"");return w.jsx(w.Fragment,{children:w.jsxs(jr,{keepMounted:h.filterVariant==="range-slider",onChange:g,onClose:()=>g(!1),opened:m,position:"top",shadow:"xl",width:360,withinPortal:!0,children:[w.jsx(uf,{mounted:a==="popover"||!!f.getFilterValue()&&!v||v&&(!!(!((n=f.getFilterValue())===null||n===void 0)&&n[0])||!!(!((r=f.getFilterValue())===null||r===void 0)&&r[1])),transition:"scale",children:()=>w.jsx(jr.Target,{children:w.jsx(bt,{disabled:m,label:E,multiline:!0,w:E.length>40?300:void 0,withinPortal:!0,children:w.jsx(Rn,Object.assign({className:Bt("mrt-table-head-cell-filter-label-icon",Bvn.root),size:18},U$("active",y),{onClick:S=>{S.stopPropagation(),a==="popover"?g(T=>!T):d(!0),setTimeout(()=>{const T=c.current[`${f.id}-0`];T?.focus(),T?.select()},100)}},o,{children:w.jsx(l,{size:"100%"})}))})})}),a==="popover"&&w.jsx(jr.Dropdown,{onClick:S=>S.stopPropagation(),onKeyDown:S=>S.key==="Enter"&&g(!1),onMouseDown:S=>S.stopPropagation(),children:w.jsx(xHe,{header:i,table:s})})]})})},Vvn=e=>{var{column:t,table:n,tableHeadCellRef:r}=e,i=Un(e,["column","table","tableHeadCellRef"]);const{getState:s,options:{enableColumnOrdering:o,mantineColumnDragHandleProps:a},setColumnOrder:l,setDraggingColumn:u,setHoveredColumn:c}=n,{columnDef:d}=t,{columnOrder:f,draggingColumn:h,hoveredColumn:p}=s(),m={column:t,table:n},g=Object.assign(Object.assign(Object.assign({},Ut(a,m)),Ut(d.mantineColumnDragHandleProps,m)),i),y=b=>{var _;(_=g?.onDragStart)===null||_===void 0||_.call(g,b),u(t),b.dataTransfer.setDragImage(r.current,0,0)},v=b=>{var _;(_=g?.onDragEnd)===null||_===void 0||_.call(g,b),p?.id==="drop-zone"?t.toggleGrouping():o&&p&&p?.id!==h?.id&&l(iHe(t,p,f)),u(null),c(null)};return w.jsx(kle,{actionIconProps:g,onDragEnd:v,onDragStart:y,table:n})};var Wq={root:"MRT_TableHeadCellResizeHandle-module_root__paufe","root-ltr":"MRT_TableHeadCellResizeHandle-module_root-ltr__652AZ","root-rtl":"MRT_TableHeadCellResizeHandle-module_root-rtl__5VlSo","root-hide":"MRT_TableHeadCellResizeHandle-module_root-hide__-ILlD"};const Uvn=e=>{var t,{header:n,table:r}=e,i=Un(e,["header","table"]);const{getState:s,options:{columnResizeDirection:o,columnResizeMode:a},setColumnSizingInfo:l}=r,{density:u}=s(),{column:c}=n,d=n.getResizeHandler(),f=c.getIsResizing()&&a==="onEnd"?`translateX(${(o==="rtl"?-1:1)*((t=s().columnSizingInfo.deltaOffset)!==null&&t!==void 0?t:0)}px)`:void 0;return w.jsx(De,Object.assign({onDoubleClick:()=>{l(h=>Object.assign(Object.assign({},h),{isResizingColumn:!1})),c.resetSize()},onMouseDown:d,onTouchStart:d,role:"separator"},i,{__vars:Object.assign({"--mrt-transform":f},i.__vars),className:Bt("mrt-table-head-cell-resize-handle",Wq.root,Wq[`root-${o}`],!n.subHeaders.length&&a==="onChange"&&Wq["root-hide"],u,i.className)}))};var ACe={"sort-icon":"MRT_TableHeadCellSortLabel-module_sort-icon__zs1xA","multi-sort-indicator":"MRT_TableHeadCellSortLabel-module_multi-sort-indicator__MGBj2"};const Hvn=e=>{var{header:t,table:n}=e,r=Un(e,["header","table"]);const{getState:i,options:{icons:{IconArrowsSort:s,IconSortAscending:o,IconSortDescending:a},localization:l}}=n,u=t.column,{columnDef:c}=u,{sorting:d}=i(),f=u.getIsSorted(),h=u.getSortIndex(),p=f?f==="desc"?l.sortedByColumnDesc.replace("{column}",c.header):l.sortedByColumnAsc.replace("{column}",c.header):u.getNextSortingOrder()==="desc"?l.sortByColumnDesc.replace("{column}",c.header):l.sortByColumnAsc.replace("{column}",c.header),m=w.jsx(Rn,Object.assign({"aria-label":p},U$("sorted",f),r,{className:Bt("mrt-table-head-sort-button",ACe["sort-icon"],r.className),children:f==="desc"?w.jsx(a,{size:"100%"}):f==="asc"?w.jsx(o,{size:"100%"}):w.jsx(s,{size:"100%"})}));return w.jsx(bt,{label:p,openDelay:1e3,withinPortal:!0,children:d.length<2||h===-1?m:w.jsx(NF,{className:Bt("mrt-table-head-multi-sort-indicator",ACe["multi-sort-indicator"]),inline:!0,label:h+1,offset:4,children:m})})};var kCe={left:"MRT_ColumnActionMenu-module_left__cfNmY",right:"MRT_ColumnActionMenu-module_right__-nK56"};const qvn=e=>{var t,n,r,i,s,o,a,l,u,c,{header:d,table:f}=e,h=Un(e,["header","table"]);const{getState:p,options:{columnFilterDisplayMode:m,enableColumnFilters:g,enableColumnPinning:y,enableColumnResizing:v,enableGrouping:b,enableHiding:_,enableSorting:E,enableSortingRemoval:S,icons:{IconArrowAutofitContent:T,IconBoxMultiple:A,IconClearAll:R,IconColumns:I,IconDotsVertical:P,IconEyeOff:N,IconFilter:M,IconFilterOff:O,IconPinned:j,IconPinnedOff:B,IconSortAscending:H,IconSortDescending:q},localization:G,mantineColumnActionsButtonProps:U,renderColumnActionsMenuItems:L},refs:{filterInputRefs:z},setColumnOrder:V,setColumnSizingInfo:Y,setShowColumnFilters:Q,toggleAllColumnsVisible:ne}=f,{column:ue}=d,{columnDef:se}=ue,{columnSizing:ae,columnVisibility:he}=p(),ie={column:ue,table:f},le=Object.assign(Object.assign({},Ut(U,ie)),Ut(se.mantineColumnActionsButtonProps,ie)),Ce=()=>{ue.clearSorting()},X=()=>{ue.toggleSorting(!1)},fe=()=>{ue.toggleSorting(!0)},de=()=>{Y(ke=>Object.assign(Object.assign({},ke),{isResizingColumn:!1})),ue.resetSize()},te=()=>{ue.toggleVisibility(!1)},ee=ke=>{ue.pin(ke)},me=()=>{ue.toggleGrouping(),V(ke=>["mrt-row-expand",...ke])},Ie=()=>{ue.setFilterValue("")},Te=()=>{Q(!0),setTimeout(()=>{var ke;return(ke=z.current[`${ue.id}-0`])===null||ke===void 0?void 0:ke.focus()},100)},we=()=>{ne(!0)},Me=w.jsxs(w.Fragment,{children:[E&&ue.getCanSort()&&w.jsxs(w.Fragment,{children:[S!==!1&&w.jsx(jn.Item,{disabled:!ue.getIsSorted(),leftSection:w.jsx(R,{}),onClick:Ce,children:G.clearSort}),w.jsx(jn.Item,{disabled:ue.getIsSorted()==="asc",leftSection:w.jsx(H,{}),onClick:X,children:(t=G.sortByColumnAsc)===null||t===void 0?void 0:t.replace("{column}",String(se.header))}),w.jsx(jn.Item,{disabled:ue.getIsSorted()==="desc",leftSection:w.jsx(q,{}),onClick:fe,children:(n=G.sortByColumnDesc)===null||n===void 0?void 0:n.replace("{column}",String(se.header))}),(g||b||_)&&w.jsx(jn.Divider,{},3)]}),g&&m!=="popover"&&ue.getCanFilter()&&w.jsxs(w.Fragment,{children:[w.jsx(jn.Item,{disabled:!ue.getFilterValue(),leftSection:w.jsx(O,{}),onClick:Ie,children:G.clearFilter}),w.jsx(jn.Item,{leftSection:w.jsx(M,{}),onClick:Te,children:(r=G.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(se.header))}),(b||_)&&w.jsx(jn.Divider,{},2)]}),b&&ue.getCanGroup()&&w.jsxs(w.Fragment,{children:[w.jsx(jn.Item,{leftSection:w.jsx(A,{}),onClick:me,children:(i=G[ue.getIsGrouped()?"ungroupByColumn":"groupByColumn"])===null||i===void 0?void 0:i.replace("{column}",String(se.header))}),y&&w.jsx(jn.Divider,{})]}),y&&ue.getCanPin()&&w.jsxs(w.Fragment,{children:[w.jsx(jn.Item,{disabled:ue.getIsPinned()==="left"||!ue.getCanPin(),leftSection:w.jsx(j,{className:kCe.left}),onClick:()=>ee("left"),children:G.pinToLeft}),w.jsx(jn.Item,{disabled:ue.getIsPinned()==="right"||!ue.getCanPin(),leftSection:w.jsx(j,{className:kCe.right}),onClick:()=>ee("right"),children:G.pinToRight}),w.jsx(jn.Item,{disabled:!ue.getIsPinned(),leftSection:w.jsx(B,{}),onClick:()=>ee(!1),children:G.unpin}),_&&w.jsx(jn.Divider,{})]}),v&&ue.getCanResize()&&w.jsx(jn.Item,{disabled:!ae[ue.id],leftSection:w.jsx(T,{}),onClick:de,children:G.resetColumnSize},0),_&&w.jsxs(w.Fragment,{children:[w.jsx(jn.Item,{disabled:!ue.getCanHide(),leftSection:w.jsx(N,{}),onClick:te,children:(s=G.hideColumn)===null||s===void 0?void 0:s.replace("{column}",String(se.header))},0),w.jsx(jn.Item,{disabled:!Object.values(he).filter(ke=>!ke).length,leftSection:w.jsx(I,{}),onClick:we,children:(o=G.showAllColumns)===null||o===void 0?void 0:o.replace("{column}",String(se.header))},1)]})]});return w.jsxs(jn,Object.assign({closeOnItemClick:!0,position:"bottom-start",withinPortal:!0},h,{children:[w.jsx(bt,{label:(a=le?.title)!==null&&a!==void 0?a:G.columnActions,openDelay:1e3,withinPortal:!0,children:w.jsx(jn.Target,{children:w.jsx(Rn,Object.assign({"aria-label":G.columnActions,color:"gray",size:"sm",variant:"subtle"},le,{children:w.jsx(P,{size:"100%"})}))})}),w.jsx(jn.Dropdown,{children:(c=(u=(l=se.renderColumnActionsMenuItems)===null||l===void 0?void 0:l.call(se,{column:ue,internalColumnMenuItems:Me,table:f}))!==null&&u!==void 0?u:L?.({column:ue,internalColumnMenuItems:Me,table:f}))!==null&&c!==void 0?c:Me})]}))},Wvn=e=>{var t,n,r,i,s,o,{columnVirtualizer:a,header:l,renderedHeaderIndex:u=0,table:c}=e,d=Un(e,["columnVirtualizer","header","renderedHeaderIndex","table"]);const f=fc(),{getState:h,options:{columnFilterDisplayMode:p,columnResizeDirection:m,columnResizeMode:g,enableColumnActions:y,enableColumnDragging:v,enableColumnOrdering:b,enableColumnPinning:_,enableGrouping:E,enableHeaderActionsHoverReveal:S,enableMultiSort:T,layoutMode:A,mantineTableHeadCellProps:R},refs:{tableHeadCellRefs:I},setHoveredColumn:P}=c,{columnSizingInfo:N,draggingColumn:M,grouping:O,hoveredColumn:j}=h(),{column:B}=l,{columnDef:H}=B,{columnDefType:q}=H,G={column:B,table:c},U=Object.assign(Object.assign(Object.assign({},Ut(R,G)),Ut(H.mantineTableHeadCellProps,G)),d),L={minWidth:`max(calc(var(--header-${ch(l?.id)}-size) * 1px), ${(t=H.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${ch(l.id)}-size) * 1px)`};A==="grid"?L.flex=`${[0,!1].includes(H.grow)?0:`var(--header-${ch(l.id)}-size)`} 0 auto`:A==="grid-no-grow"&&(L.flex=`${+(H.grow||0)} 0 auto`);const z=_&&H.columnDefType!=="group"&&B.getIsPinned(),V=M?.id===B.id,Y=j?.id===B.id,{hovered:Q,ref:ne}=ZKe(),[ue,se]=k.useState(!1),ae=(y||H.enableColumnActions)&&H.enableColumnActions!==!1,he=!S||ue||Q&&!c.getVisibleFlatColumns().find(fe=>fe.getIsResizing()),ie=v!==!1&&H.enableColumnDragging!==!1&&(v||b&&H.enableColumnOrdering!==!1||E&&H.enableGrouping!==!1&&!O.includes(B.id))&&he,le=k.useMemo(()=>{let fe=0;return B.getCanSort()&&fe++,he&&(fe+=1.75),ie&&(fe+=1.25),fe},[he,ie]),Ce=fe=>{E&&j?.id==="drop-zone"&&P(null),b&&M&&q!=="group"&&P(H.enableColumnOrdering!==!1?B:null)},X=H?.Header instanceof Function?(n=H?.Header)===null||n===void 0?void 0:n.call(H,{column:B,header:l,table:c}):(r=H?.Header)!==null&&r!==void 0?r:H.header;return w.jsxs(KE,Object.assign({colSpan:l.colSpan,"data-column-pinned":z||void 0,"data-dragging-column":V||void 0,"data-first-right-pinned":z==="right"&&B.getIsFirstColumn(z)||void 0,"data-hovered-column-target":Y||void 0,"data-index":u,"data-last-left-pinned":z==="left"&&B.getIsLastColumn(z)||void 0,"data-resizing":g==="onChange"&&N?.isResizingColumn===B.id&&m||void 0},U,{__vars:{"--mrt-table-cell-left":z==="left"?`${B.getStart(z)}`:void 0,"--mrt-table-cell-right":z==="right"?`${B.getAfter(z)}`:void 0},align:q==="group"?"center":f.dir==="rtl"?"right":"left",className:Bt(Da.root,A?.startsWith("grid")&&Da["root-grid"],T&&B.getCanSort()&&Da["root-no-select"],a&&Da["root-virtualized"],U?.className),onDragEnter:Ce,ref:fe=>{var de;fe&&(I.current[B.id]=fe,ne.current=fe,q!=="group"&&((de=a?.measureElement)===null||de===void 0||de.call(a,fe)))},style:fe=>Object.assign(Object.assign({},L),Ut(U?.style,fe)),children:[l.isPlaceholder?null:(i=U.children)!==null&&i!==void 0?i:w.jsxs(Rt,{className:Bt("mrt-table-head-cell-content",Da.content,(q==="group"||U?.align==="center")&&Da["content-center"],U?.align==="right"&&Da["content-right"],B.getCanResize()&&Da["content-spaced"]),children:[w.jsxs(Rt,{__vars:{"--mrt-table-head-cell-labels-padding-left":`${le}`},className:Bt("mrt-table-head-cell-labels",Da.labels,B.getCanSort()&&q!=="group"&&Da["labels-sortable"],U?.align==="right"?Da["labels-right"]:U?.align==="center"&&Da["labels-center"],q==="data"&&Da["labels-data"]),onClick:B.getToggleSortingHandler(),children:[w.jsx(Rt,{className:Bt("mrt-table-head-cell-content-wrapper",Da["content-wrapper"],q==="data"&&Da["content-wrapper-hidden-overflow"],((o=(s=H.header)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)<20&&Da["content-wrapper-nowrap"]),children:X}),B.getCanFilter()&&(B.getIsFiltered()||he)&&w.jsx(zvn,{header:l,table:c}),B.getCanSort()&&(B.getIsSorted()||he)&&w.jsx(Hvn,{header:l,table:c})]}),q!=="group"&&w.jsxs(Rt,{className:Bt("mrt-table-head-cell-content-actions",Da["content-actions"]),children:[ie&&w.jsx(Vvn,{column:B,table:c,tableHeadCellRef:{current:I.current[B.id]}}),ae&&he&&w.jsx(qvn,{header:l,onChange:se,opened:ue,table:c})]}),B.getCanResize()&&w.jsx(Uvn,{header:l,table:c})]}),p==="subheader"&&B.getCanFilter()&&w.jsx(xHe,{header:l,table:c})]}))},Gvn=e=>{var{columnVirtualizer:t,headerGroup:n,table:r}=e,i=Un(e,["columnVirtualizer","headerGroup","table"]);const{getState:s,options:{enableStickyHeader:o,layoutMode:a,mantineTableHeadRowProps:l}}=r,{isFullScreen:u}=s(),{virtualColumns:c,virtualPaddingLeft:d,virtualPaddingRight:f}=t??{},h=Object.assign(Object.assign({},Ut(l,{headerGroup:n,table:r})),i);return w.jsxs(Ag,Object.assign({},h,{className:Bt(Hq.root,(o||u)&&Hq.sticky,a?.startsWith("grid")&&Hq["layout-mode-grid"],h?.className),children:[d?w.jsx(De,{component:"th",display:"flex",w:d}):null,(c??n.headers).map((p,m)=>{let g=p;return t&&(m=p.index,g=n.headers[m]),w.jsx(Wvn,{columnVirtualizer:t,header:g,renderedHeaderIndex:m,table:r},g.id)}),f?w.jsx(De,{component:"th",display:"flex",w:f}):null]}))};var O_={alert:"MRT_ToolbarAlertBanner-module_alert__PAhUK","alert-stacked":"MRT_ToolbarAlertBanner-module_alert-stacked__HR7Nq","alert-bottom":"MRT_ToolbarAlertBanner-module_alert-bottom__u9L-S","alert-badge":"MRT_ToolbarAlertBanner-module_alert-badge__GwDmX","toolbar-alert":"MRT_ToolbarAlertBanner-module_toolbar-alert__3sJGU","head-overlay":"MRT_ToolbarAlertBanner-module_head-overlay__Hw7jK"};const bQ=e=>{var t,{renderedRowIndex:n=0,row:r,table:i}=e,s=Un(e,["renderedRowIndex","row","table"]);const{getState:o,options:{enableMultiRowSelection:a,localization:l,mantineSelectAllCheckboxProps:u,mantineSelectCheckboxProps:c,selectAllMode:d,selectDisplayMode:f}}=i,{density:h,isLoading:p}=o(),m=!r,g=m?d==="page"?i.getIsAllPageRowsSelected():i.getIsAllRowsSelected():void 0,y=m?g:H$({row:r,table:i}),v=Object.assign(Object.assign({},m?Ut(u,{table:i}):Ut(c,{row:r,table:i})),s),b=r?rvn({renderedRowIndex:n,row:r,table:i}):void 0,_=ZUe({table:i}),E=Object.assign(Object.assign({"aria-label":m?l.toggleSelectAll:l.toggleSelectRow,checked:y,disabled:p||r&&!r.getCanSelect()||r?.id==="mrt-row-create",onChange:S=>{S.stopPropagation(),m?_(S):b(S)},size:h==="xs"?"sm":"md"},v),{onClick:S=>{var T;S.stopPropagation(),(T=v?.onClick)===null||T===void 0||T.call(v,S)},title:void 0});return w.jsx(bt,{label:(t=v?.title)!==null&&t!==void 0?t:m?l.toggleSelectAll:l.toggleSelectRow,openDelay:1e3,withinPortal:!0,children:w.jsx("span",{children:f==="switch"?w.jsx(Xy,Object.assign({},E)):f==="radio"||a===!1?w.jsx(Tl,Object.assign({},E)):w.jsx(_l,Object.assign({indeterminate:!y&&m?i.getIsSomeRowsSelected():r?.getIsSomeSelected()&&r.getCanSelectSubRows()},E))})})},Mle=e=>{var t,n,r,{stackAlertBanner:i,table:s}=e,o=Un(e,["stackAlertBanner","table"]);const{getFilteredSelectedRowModel:a,getPrePaginationRowModel:l,getState:u,options:{enableRowSelection:c,enableSelectAll:d,icons:{IconX:f},localization:h,mantineToolbarAlertBannerBadgeProps:p,mantineToolbarAlertBannerProps:m,manualPagination:g,positionToolbarAlertBanner:y,renderToolbarAlertBannerContent:v,rowCount:b}}=s,{density:_,grouping:E,rowSelection:S,showAlertBanner:T}=u(),A=Object.assign(Object.assign({},Ut(m,{table:s})),o),R=Ut(p,{table:s}),I=b??l().flatRows.length,P=k.useMemo(()=>g?Object.values(S).filter(Boolean).length:a().rows.length,[S,I,g]),N=P?w.jsxs(Rt,{align:"center",gap:"sm",children:[(n=(t=h.selectedCountOfRowCountRowsSelected)===null||t===void 0?void 0:t.replace("{selectedCount}",P.toString()))===null||n===void 0?void 0:n.replace("{rowCount}",I.toString()),w.jsx(Yt,{onClick:O=>ZUe({table:s})(O,!1,!0),size:"compact-xs",variant:"subtle",children:h.clearSelection})]}):null,M=E.length>0?w.jsxs(Rt,{children:[h.groupedBy," ",E.map((O,j)=>w.jsxs(k.Fragment,{children:[j>0?h.thenBy:"",w.jsxs(_o,Object.assign({className:O_["alert-badge"],rightSection:w.jsx(Rn,{color:"white",onClick:()=>s.getColumn(O).toggleGrouping(),size:"xs",variant:"subtle",children:w.jsx(f,{style:{transform:"scale(0.8)"}})}),variant:"filled"},R,{children:[s.getColumn(O).columnDef.header," "]}))]},`${j}-${O}`))]}):null;return w.jsx(vm,{in:T||!!N||!!M,transitionDuration:i?200:0,children:w.jsx(Bd,Object.assign({color:"blue",icon:!1},A,{className:Bt(O_.alert,i&&!y&&O_["alert-stacked"],!i&&y==="bottom"&&O_["alert-bottom"],A?.className),children:(r=v?.({groupedAlert:M,selectedAlert:N,table:s}))!==null&&r!==void 0?r:w.jsxs(Rt,{className:Bt(O_["toolbar-alert"],y==="head-overlay"&&O_["head-overlay"],_),children:[c&&d&&y==="head-overlay"&&w.jsx(bQ,{table:s}),w.jsxs(Gn,{children:[A?.children,N,M]})]})}))})},Yvn=e=>{var{columnVirtualizer:t,table:n}=e,r=Un(e,["columnVirtualizer","table"]);const{getHeaderGroups:i,getSelectedRowModel:s,getState:o,options:{enableStickyHeader:a,layoutMode:l,mantineTableHeadProps:u,positionToolbarAlertBanner:c},refs:{tableHeadRef:d}}=n,{isFullScreen:f,showAlertBanner:h}=o(),p=Object.assign(Object.assign({},Ut(u,{table:n})),r),m=a||f;return w.jsx(VZ,Object.assign({},p,{className:Bt(ly.root,l?.startsWith("grid")?ly["root-grid"]:ly["root-table-row-group"],m&&ly["root-sticky"],p?.className),pos:m&&l?.startsWith("grid")?"sticky":"relative",ref:g=>{d.current=g,p?.ref&&(p.ref.current=g)},children:c==="head-overlay"&&(h||s().rows.length>0)?w.jsx(Ag,{className:Bt(ly["banner-tr"],l?.startsWith("grid")&&ly.grid),children:w.jsx(KE,{className:Bt(ly["banner-th"],l?.startsWith("grid")&&ly.grid),colSpan:n.getVisibleLeafColumns().length,children:w.jsx(Mle,{table:n})})}):i().map(g=>w.jsx(Gvn,{columnVirtualizer:t,headerGroup:g,table:n},g.id))}))};var ICe={root:"MRT_GlobalFilterTextInput-module_root__Xmcpv",collapse:"MRT_GlobalFilterTextInput-module_collapse__v311d"};const Gq=e=>{var{table:t}=e,n=Un(e,["table"]);const{getState:r,options:{enableGlobalFilterModes:i,icons:{IconSearch:s,IconX:o},localization:a,mantineSearchTextInputProps:l,manualFiltering:u,positionGlobalFilter:c},refs:{searchInputRef:d},setGlobalFilter:f}=t,{globalFilter:h,showGlobalFilter:p}=r(),m=Object.assign(Object.assign({},Ut(l,{table:t})),n),g=k.useRef(!1),[y,v]=k.useState(h??""),[b]=HTe(y,u?500:250);k.useEffect(()=>{f(b||void 0)},[b]);const _=()=>{v(""),f(void 0)};return k.useEffect(()=>{g.current&&(h===void 0?_():v(h)),g.current=!0},[h]),w.jsxs(vm,{className:ICe.collapse,in:p,children:[i&&w.jsxs(jn,{withinPortal:!0,children:[w.jsx(jn.Target,{children:w.jsx(Rn,{"aria-label":a.changeSearchMode,color:"gray",size:"sm",variant:"transparent",children:w.jsx(s,{})})}),w.jsx(wHe,{onSelect:_,table:t})]}),w.jsx(iu,Object.assign({leftSection:!i&&w.jsx(s,{}),mt:0,mx:c!=="left"?"mx":void 0,onChange:E=>v(E.target.value),placeholder:a.search,rightSection:y?w.jsx(Rn,{"aria-label":a.clearSearch,color:"gray",disabled:!y?.length,onClick:_,size:"sm",variant:"transparent",children:w.jsx(bt,{label:a.clearSearch,withinPortal:!0,children:w.jsx(o,{})})}):null,value:y??"",variant:"filled"},m,{className:Bt("mrt-global-filter-text-input",ICe.root,m?.className),ref:E=>{E&&(d.current=E,m?.ref&&(m.ref=E))}}))]})},Kvn=(e,t,n=-1,r=0,i,s)=>oT(e,"mrt-row-create",Object.assign({},...q$(e.options.columns).map(o=>({[$E(o)]:""}))),n,r,i,s),Xvn=e=>Object.assign({Cell:({cell:t,row:n,table:r})=>w.jsx(Svn,{cell:t,row:n,table:r})},Ax({header:"actions",id:"mrt-row-actions",size:70,tableOptions:e})),Qvn=e=>Object.assign({Cell:({row:t,rowRef:n,table:r})=>w.jsx(uvn,{row:t,rowRef:n,table:r}),grow:!1},Ax({header:"move",id:"mrt-row-drag",size:60,tableOptions:e})),Jvn=e=>{var t;const{defaultColumn:n,enableExpandAll:r,groupedColumnMode:i,positionExpandColumn:s,renderDetailPanel:o,state:{grouping:a}}=e,l=s==="last"?{align:"right"}:void 0;return Object.assign({Cell:({cell:u,column:c,row:d,table:f})=>{var h,p,m;const g={row:d,table:f},y=(h=d.subRows)===null||h===void 0?void 0:h.length;return e.groupedColumnMode==="remove"&&d.groupingColumnId?w.jsxs(Rt,{align:"center",gap:"0.25rem",children:[w.jsx(yQ,Object.assign({},g)),w.jsx(bt,{label:f.getColumn(d.groupingColumnId).columnDef.header,openDelay:1e3,position:"right",children:w.jsx("span",{children:d.groupingValue})}),!!y&&w.jsxs("span",{children:["(",y,")"]})]}):w.jsxs(w.Fragment,{children:[w.jsx(yQ,Object.assign({},g)),(m=(p=c.columnDef).GroupedCell)===null||m===void 0?void 0:m.call(p,{cell:u,column:c,row:d,table:f})]})},Header:r?({table:u})=>{var c;return w.jsxs(Rt,{align:"center",children:[w.jsx(hvn,{table:u}),i==="remove"&&((c=a?.map(d=>u.getColumn(d).columnDef.header))===null||c===void 0?void 0:c.join(", "))]})}:void 0,mantineTableBodyCellProps:l,mantineTableHeadCellProps:l},Ax({header:"expand",id:"mrt-row-expand",size:i==="remove"?(t=n?.size)!==null&&t!==void 0?t:180:o?r?60:70:100,tableOptions:e}))},Zvn=e=>{const{localization:t,rowNumberDisplayMode:n}=e,{pagination:{pageIndex:r,pageSize:i}}=e.state;return Object.assign({Cell:({renderedRowIndex:s=0,row:o})=>{var a;return((a=n==="static"?s+i*r:o.index)!==null&&a!==void 0?a:0)+1},grow:!1,Header:()=>t.rowNumber},Ax({header:"rowNumbers",id:"mrt-row-numbers",size:50,tableOptions:e}))},e1n=e=>Object.assign({Cell:({row:t,table:n})=>w.jsx(cvn,{row:t,table:n}),grow:!1},Ax({header:"pin",id:"mrt-row-pin",size:60,tableOptions:e})),t1n=e=>{const{enableMultiRowSelection:t,enableSelectAll:n}=e;return Object.assign({Cell:({renderedRowIndex:r,row:i,table:s})=>w.jsx(bQ,{renderedRowIndex:r,row:i,table:s}),grow:!1,Header:n&&t?({table:r})=>w.jsx(bQ,{table:r}):void 0},Ax({header:"select",id:"mrt-row-select",size:n?60:70,tableOptions:e}))},n1n=Object.assign({},MM),r1n={IconArrowAutofitContent:slt,IconArrowsSort:dlt,IconBaselineDensityLarge:mlt,IconBaselineDensityMedium:ylt,IconBaselineDensitySmall:blt,IconBoxMultiple:xlt,IconChevronDown:lee,IconChevronLeft:Vlt,IconChevronLeftPipe:Blt,IconChevronRight:hIe,IconChevronRightPipe:Hlt,IconChevronsDown:Glt,IconCircleX:Klt,IconClearAll:Qlt,IconColumns:tut,IconDeviceFloppy:dut,IconDots:gIe,IconDotsVertical:mIe,IconEdit:g6,IconEyeOff:Cut,IconFilter:Rut,IconFilterCog:Tut,IconFilterOff:kut,IconGripHorizontal:$ut,IconMaximize:Xut,IconMinimize:Jut,IconPinned:uct,IconPinnedOff:act,IconSearch:CIe,IconSearchOff:wct,IconSortAscending:kct,IconSortDescending:Rct,IconX:Wg},i1n={actions:"Actions",and:"and",cancel:"Cancel",changeFilterMode:"Change filter mode",changeSearchMode:"Change search mode",clearFilter:"Clear filter",clearSearch:"Clear search",clearSelection:"Clear selection",clearSort:"Clear sort",clickToCopy:"Click to copy",copy:"Copy",collapse:"Collapse",collapseAll:"Collapse all",columnActions:"Column Actions",copiedToClipboard:"Copied to clipboard",dropToGroupBy:"Drop to group by {column}",edit:"Edit",expand:"Expand",expandAll:"Expand all",filterArrIncludes:"Includes",filterArrIncludesAll:"Includes all",filterArrIncludesSome:"Includes",filterBetween:"Between",filterBetweenInclusive:"Between Inclusive",filterByColumn:"Filter by {column}",filterContains:"Contains",filterEmpty:"Empty",filterEndsWith:"Ends With",filterEquals:"Equals",filterEqualsString:"Equals",filterFuzzy:"Fuzzy",filterGreaterThan:"Greater Than",filterGreaterThanOrEqualTo:"Greater Than Or Equal To",filterInNumberRange:"Between",filterIncludesString:"Contains",filterIncludesStringSensitive:"Contains",filterLessThan:"Less Than",filterLessThanOrEqualTo:"Less Than Or Equal To",filterMode:"Filter Mode: {filterType}",filterNotEmpty:"Not Empty",filterNotEquals:"Not Equals",filterStartsWith:"Starts With",filterWeakEquals:"Equals",filteringByColumn:"Filtering by {column} - {filterType} {filterValue}",goToFirstPage:"Go to first page",goToLastPage:"Go to last page",goToNextPage:"Go to next page",goToPreviousPage:"Go to previous page",grab:"Grab",groupByColumn:"Group by {column}",groupedBy:"Grouped by ",hideAll:"Hide all",hideColumn:"Hide {column} column",max:"Max",min:"Min",move:"Move",noRecordsToDisplay:"No records to display",noResultsFound:"No results found",of:"of",or:"or",pin:"Pin",pinToLeft:"Pin to left",pinToRight:"Pin to right",resetColumnSize:"Reset column size",resetOrder:"Reset order",rowActions:"Row Actions",rowNumber:"#",rowNumbers:"Row Numbers",rowsPerPage:"Rows per page",save:"Save",search:"Search",selectedCountOfRowCountRowsSelected:"{selectedCount} of {rowCount} row(s) selected",select:"Select",showAll:"Show all",showAllColumns:"Show all columns",showHideColumns:"Show/Hide columns",showHideFilters:"Show/Hide filters",showHideSearch:"Show/Hide search",sortByColumnAsc:"Sort by {column} ascending",sortByColumnDesc:"Sort by {column} descending",sortedByColumnAsc:"Sorted by {column} ascending",sortedByColumnDesc:"Sorted by {column} descending",thenBy:", then by ",toggleDensity:"Toggle density",toggleFullScreen:"Toggle full screen",toggleSelectAll:"Toggle select all",toggleSelectRow:"Toggle select row",toggleVisibility:"Toggle visibility",ungroupByColumn:"Ungroup by {column}",unpin:"Unpin",unpinAll:"Unpin all"},s1n={filterVariant:"text",maxSize:1e3,minSize:40,size:180},_He={columnDefType:"display",enableClickToCopy:!1,enableColumnActions:!1,enableColumnDragging:!1,enableColumnFilter:!1,enableColumnOrdering:!1,enableEditing:!1,enableGlobalFilter:!1,enableGrouping:!1,enableHiding:!1,enableResizing:!1,enableSorting:!1},o1n=e=>{var t,{aggregationFns:n,autoResetExpanded:r=!1,columnFilterDisplayMode:i="subheader",columnResizeDirection:s,columnResizeMode:o="onChange",createDisplayMode:a="modal",defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c="modal",enableBatchRowSelection:d=!0,enableBottomToolbar:f=!0,enableColumnActions:h=!0,enableColumnFilters:p=!0,enableColumnOrdering:m=!1,enableColumnPinning:g=!1,enableColumnResizing:y=!1,enableColumnVirtualization:v,enableDensityToggle:b=!0,enableExpandAll:_=!0,enableExpanding:E,enableFacetedValues:S=!1,enableFilterMatchHighlighting:T=!0,enableFilters:A=!0,enableFullScreenToggle:R=!0,enableGlobalFilter:I=!0,enableGlobalFilterRankedResults:P=!0,enableGrouping:N=!1,enableHeaderActionsHoverReveal:M=!1,enableHiding:O=!0,enableMultiRowSelection:j=!0,enableMultiSort:B=!0,enablePagination:H=!0,enableRowPinning:q=!1,enableRowSelection:G=!1,enableRowVirtualization:U,enableSelectAll:L=!0,enableSorting:z=!0,enableStickyHeader:V=!1,enableTableFooter:Y=!0,enableTableHead:Q=!0,enableToolbarInternalActions:ne=!0,enableTopToolbar:ue=!0,filterFns:se,icons:ae,layoutMode:he,localization:ie,manualFiltering:le,manualGrouping:Ce,manualPagination:X,manualSorting:fe,paginationDisplayMode:de="default",positionActionsColumn:te="first",positionCreatingRow:ee="top",positionExpandColumn:me="first",positionGlobalFilter:Ie="right",positionPagination:Te="bottom",positionToolbarAlertBanner:we="top",positionToolbarDropZone:Me="top",rowNumberDisplayMode:ke="static",rowPinningDisplayMode:Oe="sticky",selectAllMode:xe="page",sortingFns:je}=e,Ve=Un(e,["aggregationFns","autoResetExpanded","columnFilterDisplayMode","columnResizeDirection","columnResizeMode","createDisplayMode","defaultColumn","defaultDisplayColumn","editDisplayMode","enableBatchRowSelection","enableBottomToolbar","enableColumnActions","enableColumnFilters","enableColumnOrdering","enableColumnPinning","enableColumnResizing","enableColumnVirtualization","enableDensityToggle","enableExpandAll","enableExpanding","enableFacetedValues","enableFilterMatchHighlighting","enableFilters","enableFullScreenToggle","enableGlobalFilter","enableGlobalFilterRankedResults","enableGrouping","enableHeaderActionsHoverReveal","enableHiding","enableMultiRowSelection","enableMultiSort","enablePagination","enableRowPinning","enableRowSelection","enableRowVirtualization","enableSelectAll","enableSorting","enableStickyHeader","enableTableFooter","enableTableHead","enableToolbarInternalActions","enableTopToolbar","filterFns","icons","layoutMode","localization","manualFiltering","manualGrouping","manualPagination","manualSorting","paginationDisplayMode","positionActionsColumn","positionCreatingRow","positionExpandColumn","positionGlobalFilter","positionPagination","positionToolbarAlertBanner","positionToolbarDropZone","rowNumberDisplayMode","rowPinningDisplayMode","selectAllMode","sortingFns"]);const nt=fc();return ae=k.useMemo(()=>Object.assign(Object.assign({},r1n),ae),[ae]),ie=k.useMemo(()=>Object.assign(Object.assign({},i1n),ie),[ie]),n=k.useMemo(()=>Object.assign(Object.assign({},n1n),n),[]),se=k.useMemo(()=>Object.assign(Object.assign({},Rvn),se),[]),je=k.useMemo(()=>Object.assign(Object.assign({},evn),je),[]),l=k.useMemo(()=>Object.assign(Object.assign({},s1n),l),[l]),u=k.useMemo(()=>Object.assign(Object.assign({},_He),u),[u]),[v,U]=k.useMemo(()=>[v,U],[]),s||(s=nt.dir||"ltr"),he=he||(y?"grid-no-grow":"semantic"),he==="semantic"&&(U||v)&&(he="grid"),U&&(V=!0),H===!1&&X===void 0&&(X=!0),!((t=Ve.data)===null||t===void 0)&&t.length||(le=!0,Ce=!0,X=!0,fe=!0),Object.assign({aggregationFns:n,autoResetExpanded:r,columnFilterDisplayMode:i,columnResizeDirection:s,columnResizeMode:o,createDisplayMode:a,defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c,enableBatchRowSelection:d,enableBottomToolbar:f,enableColumnActions:h,enableColumnFilters:p,enableColumnOrdering:m,enableColumnPinning:g,enableColumnResizing:y,enableColumnVirtualization:v,enableDensityToggle:b,enableExpandAll:_,enableExpanding:E,enableFacetedValues:S,enableFilterMatchHighlighting:T,enableFilters:A,enableFullScreenToggle:R,enableGlobalFilter:I,enableGlobalFilterRankedResults:P,enableGrouping:N,enableHeaderActionsHoverReveal:M,enableHiding:O,enableMultiRowSelection:j,enableMultiSort:B,enablePagination:H,enableRowPinning:q,enableRowSelection:G,enableRowVirtualization:U,enableSelectAll:L,enableSorting:z,enableStickyHeader:V,enableTableFooter:Y,enableTableHead:Q,enableToolbarInternalActions:ne,enableTopToolbar:ue,filterFns:se,getCoreRowModel:l0n(),getExpandedRowModel:E||N?u0n():void 0,getFacetedMinMaxValues:S?c0n():void 0,getFacetedRowModel:S?h0n():void 0,getFacetedUniqueValues:S?p0n():void 0,getFilteredRowModel:p||I||A?m0n():void 0,getGroupedRowModel:N?g0n():void 0,getPaginationRowModel:H?v0n():void 0,getSortedRowModel:z?b0n():void 0,getSubRows:it=>it?.subRows,icons:ae,layoutMode:he,localization:ie,manualFiltering:le,manualGrouping:Ce,manualPagination:X,manualSorting:fe,paginationDisplayMode:de,positionActionsColumn:te,positionCreatingRow:ee,positionExpandColumn:me,positionGlobalFilter:Ie,positionPagination:Te,positionToolbarAlertBanner:we,positionToolbarDropZone:Me,rowNumberDisplayMode:ke,rowPinningDisplayMode:Oe,selectAllMode:xe,sortingFns:je},Ve)},Yq={children:null,style:{minWidth:0,padding:0,width:0}},a1n=e=>Object.assign(Object.assign(Object.assign(Object.assign({},Ax({id:"mrt-row-spacer",size:0,tableOptions:e})),{grow:!0}),_He),{mantineTableBodyCellProps:Yq,mantineTableFooterCellProps:Yq,mantineTableHeadCellProps:Yq}),l1n=e=>{const{getIsSomeRowsPinned:t,getPrePaginationRowModel:n,getState:r,options:{enablePagination:i,enableRowPinning:s,rowCount:o}}=e,{columnOrder:a,density:l,globalFilter:u,isFullScreen:c,isLoading:d,pagination:f,showSkeletons:h,sorting:p}=r(),m=e.options.columns.length,g=o??n().rows.length,y=k.useReducer(()=>({}),{})[1],v=k.useRef(),b=k.useRef();k.useEffect(()=>{typeof window<"u"&&(v.current=document.body.style.height)},[]),k.useEffect(()=>{if(typeof window<"u")if(c)b.current=document.body.getBoundingClientRect().top,document.body.style.height="100dvh";else{if(document.body.style.height=v.current,!b.current)return;window.scrollTo({behavior:"instant",top:-1*b.current})}},[c]),k.useEffect(()=>{m!==a.length&&e.setColumnOrder(Dle(e.options))},[m]),k.useEffect(()=>{if(!i||d||h)return;const{pageIndex:E,pageSize:S}=f,T=E*S;T>=g&&T>0&&e.setPageIndex(Math.ceil(g/S)-1)},[g]);const _=k.useRef(p);k.useEffect(()=>{p.length&&(_.current=p)},[p]),k.useEffect(()=>{JUe(e)&&(u?e.setSorting([]):e.setSorting(()=>_.current||[]))},[u]),k.useEffect(()=>{s&&t()&&setTimeout(()=>{y()},150)},[l])},u1n=e=>{var t,n,r,i,s,o,a,l,u,c,d,f,h,p,m,g,y,v,b,_,E,S,T,A,R,I,P,N,M,O,j,B,H;const q=k.useRef(null),G=k.useRef(null),U=k.useRef({}),L=k.useRef({}),z=k.useRef(null),V=k.useRef(null),Y=k.useRef({}),Q=k.useRef(null),ne=k.useRef(null),ue=k.useRef(null),se=k.useRef(null),ae=k.useMemo(()=>{var dr,vn,ar;const Or=(dr=e.initialState)!==null&&dr!==void 0?dr:{};return Or.columnOrder=(vn=Or.columnOrder)!==null&&vn!==void 0?vn:Dle(Object.assign(Object.assign({},e),{state:Object.assign(Object.assign({},e.initialState),e.state)})),Or.globalFilterFn=(ar=e.globalFilterFn)!==null&&ar!==void 0?ar:"fuzzy",Or},[]);e.initialState=ae;const[he,ie]=k.useState((t=ae.creatingRow)!==null&&t!==void 0?t:null),[le,Ce]=k.useState(()=>Object.assign({},...q$(e.columns).map(dr=>{var vn,ar,Or,Hr;return{[$E(dr)]:dr.filterFn instanceof Function?(vn=dr.filterFn.name)!==null&&vn!==void 0?vn:"custom":(Hr=(ar=dr.filterFn)!==null&&ar!==void 0?ar:(Or=ae?.columnFilterFns)===null||Or===void 0?void 0:Or[$E(dr)])!==null&&Hr!==void 0?Hr:pvn(dr)}}))),[X,fe]=k.useState((n=ae.columnOrder)!==null&&n!==void 0?n:[]),[de,te]=k.useState((r=ae.columnSizingInfo)!==null&&r!==void 0?r:{}),[ee,me]=k.useState((i=ae?.density)!==null&&i!==void 0?i:"md"),[Ie,Te]=k.useState((s=ae.draggingColumn)!==null&&s!==void 0?s:null),[we,Me]=k.useState((o=ae.draggingRow)!==null&&o!==void 0?o:null),[ke,Oe]=k.useState((a=ae.editingCell)!==null&&a!==void 0?a:null),[xe,je]=k.useState((l=ae.editingRow)!==null&&l!==void 0?l:null),[Ve,nt]=k.useState((u=ae.globalFilterFn)!==null&&u!==void 0?u:"fuzzy"),[it,_t]=k.useState((c=ae.grouping)!==null&&c!==void 0?c:[]),[rn,en]=k.useState((d=ae.hoveredColumn)!==null&&d!==void 0?d:null),[zn,zt]=k.useState((f=ae.hoveredRow)!==null&&f!==void 0?f:null),[wn,nr]=k.useState((h=ae?.isFullScreen)!==null&&h!==void 0?h:!1),[Yn,Ur]=k.useState((p=ae?.pagination)!==null&&p!==void 0?p:{pageIndex:0,pageSize:10}),[or,Ir]=k.useState((m=ae?.showAlertBanner)!==null&&m!==void 0?m:!1),[On,gn]=k.useState((g=ae?.showColumnFilters)!==null&&g!==void 0?g:!1),[cr,xi]=k.useState((y=ae?.showGlobalFilter)!==null&&y!==void 0?y:!1),[Rr,Nn]=k.useState((v=ae?.showToolbarDropZone)!==null&&v!==void 0?v:!1);e.state=Object.assign({columnFilterFns:le,columnOrder:X,columnSizingInfo:de,creatingRow:he,density:ee,draggingColumn:Ie,draggingRow:we,editingCell:ke,editingRow:xe,globalFilterFn:Ve,grouping:it,hoveredColumn:rn,hoveredRow:zn,isFullScreen:wn,pagination:Yn,showAlertBanner:or,showColumnFilters:On,showGlobalFilter:cr,showToolbarDropZone:Rr},e.state);const mt=e,Cr=k.useRef([]);mt.columns=mt.state.columnSizingInfo.isResizingColumn||mt.state.draggingColumn||mt.state.draggingRow?Cr.current:rHe({columnDefs:[...[oHe(mt)&&e1n(mt),aHe(mt)&&Qvn(mt),Rle(mt)&&Xvn(mt),Ile(mt)&&Jvn(mt),lHe(mt)&&t1n(mt),uHe(mt)&&Zvn(mt)].filter(Boolean),...mt.columns,...[cHe(mt)&&a1n(mt)].filter(Boolean)],tableOptions:mt}),Cr.current=mt.columns,mt.data=k.useMemo(()=>(mt.state.isLoading||mt.state.showSkeletons)&&!mt.data.length?[...Array(Math.min(mt.state.pagination.pageSize,20)).fill(null)].map(()=>Object.assign({},...q$(mt.columns).map(dr=>({[$E(dr)]:null})))):mt.data,[mt.data,mt.state.isLoading,mt.state.showSkeletons]);const Xt=w0n(Object.assign(Object.assign({onColumnOrderChange:fe,onColumnSizingInfoChange:te,onGroupingChange:_t,onPaginationChange:Ur},mt),{globalFilterFn:(b=mt.filterFns)===null||b===void 0?void 0:b[Ve??"fuzzy"]}));return Xt.refs={bottomToolbarRef:G,editInputRefs:U,filterInputRefs:L,lastSelectedRowId:q,searchInputRef:z,tableContainerRef:V,tableFooterRef:se,tableHeadCellRefs:Y,tableHeadRef:ue,tablePaperRef:Q,topToolbarRef:ne},Xt.setCreatingRow=dr=>{let vn=dr;dr===!0&&(vn=Kvn(Xt)),mt?.onCreatingRowChange?mt.onCreatingRowChange(vn):ie(vn)},Xt.setColumnFilterFns=(_=mt.onColumnFilterFnsChange)!==null&&_!==void 0?_:Ce,Xt.setDensity=(E=mt.onDensityChange)!==null&&E!==void 0?E:me,Xt.setDraggingColumn=(S=mt.onDraggingColumnChange)!==null&&S!==void 0?S:Te,Xt.setDraggingRow=(T=mt.onDraggingRowChange)!==null&&T!==void 0?T:Me,Xt.setEditingCell=(A=mt.onEditingCellChange)!==null&&A!==void 0?A:Oe,Xt.setEditingRow=(R=mt.onEditingRowChange)!==null&&R!==void 0?R:je,Xt.setGlobalFilterFn=(I=mt.onGlobalFilterFnChange)!==null&&I!==void 0?I:nt,Xt.setHoveredColumn=(P=mt.onHoveredColumnChange)!==null&&P!==void 0?P:en,Xt.setHoveredRow=(N=mt.onHoveredRowChange)!==null&&N!==void 0?N:zt,Xt.setIsFullScreen=(M=mt.onIsFullScreenChange)!==null&&M!==void 0?M:nr,Xt.setShowAlertBanner=(O=mt.onShowAlertBannerChange)!==null&&O!==void 0?O:Ir,Xt.setShowColumnFilters=(j=mt.onShowColumnFiltersChange)!==null&&j!==void 0?j:gn,Xt.setShowGlobalFilter=(B=mt.onShowGlobalFilterChange)!==null&&B!==void 0?B:xi,Xt.setShowToolbarDropZone=(H=mt.onShowToolbarDropZoneChange)!==null&&H!==void 0?H:Nn,l1n(Xt),Xt},KB=e=>u1n(o1n(e));var c1n={root:"MRT_TablePaper-module_root__q0v5L"},Kq={root:"MRT_TableContainer-module_root__JIsGB","root-sticky":"MRT_TableContainer-module_root-sticky__uC4qx","root-fullscreen":"MRT_TableContainer-module_root-fullscreen__aM8Jg"},RCe={root:"MRT_Table-module_root__ms2uS","root-grid":"MRT_Table-module_root-grid__2Pynz"};const d1n=e=>{var t,n,r,i;const{getLeftLeafColumns:s,getRightLeafColumns:o,getState:a,getVisibleLeafColumns:l,options:{columnVirtualizerInstanceRef:u,columnVirtualizerOptions:c,enableColumnPinning:d,enableColumnVirtualization:f},refs:{tableContainerRef:h}}=e,{columnPinning:p,draggingColumn:m}=a();if(!f)return;const g=Ut(c,{table:e}),y=l(),[v,b]=k.useMemo(()=>d?[s().map(I=>I.getPinnedIndex()),o().map(I=>y.length-I.getPinnedIndex()-1).sort((I,P)=>I-P)]:[[],[]],[y.length,p,d]),_=v.length,E=b.length,S=k.useMemo(()=>m?.id?y.findIndex(I=>I.id===m?.id):void 0,[m?.id]),T=OUe(Object.assign({count:y.length,estimateSize:I=>y[I].getSize(),getScrollElement:()=>h.current,horizontal:!0,overscan:3,rangeExtractor:k.useCallback(I=>{const P=eHe(I,S);return!_&&!E?P:[...new Set([...v,...P,...b])]},[v,b,S])},g)),A=T.getVirtualItems();T.virtualColumns=A;const R=A.length;if(R){const I=T.getTotalSize(),P=((t=A[_])===null||t===void 0?void 0:t.start)||0,N=((n=A[v.length-1])===null||n===void 0?void 0:n.end)||0,M=((r=A[R-E])===null||r===void 0?void 0:r.start)||0,O=((i=A[R-E-1])===null||i===void 0?void 0:i.end)||0;T.virtualPaddingLeft=P-N,T.virtualPaddingRight=I-O-(E?I-M:0)}return u&&(u.current=T),T},f1n=e=>{var{table:t}=e,n=Un(e,["table"]);const{getFlatHeaders:r,getState:i,options:{columns:s,enableTableFooter:o,enableTableHead:a,layoutMode:l,mantineTableProps:u,memoMode:c}}=t,{columnSizing:d,columnSizingInfo:f,columnVisibility:h,density:p}=i(),m=Object.assign(Object.assign({highlightOnHover:!0,horizontalSpacing:p,verticalSpacing:p},Ut(u,{table:t})),n),g=k.useMemo(()=>{const E=r(),S={};for(let T=0;T<E.length;T++){const A=E[T],R=A.getSize();S[`--header-${ch(A.id)}-size`]=R,S[`--col-${ch(A.column.id)}-size`]=R}return S},[s,d,f,h]),v={columnVirtualizer:d1n(t),table:t},{colorScheme:b}=tQe(),{stripedColor:_}=m;return w.jsxs(In,Object.assign({className:Bt("mrt-table",RCe.root,l?.startsWith("grid")&&RCe["root-grid"],m.className)},m,{__vars:Object.assign(Object.assign(Object.assign({},g),{"--mrt-striped-row-background-color":_,"--mrt-striped-row-hover-background-color":_?b==="dark"?eQe(_,.08):V2(_,.12):void 0}),m.__vars),children:[a&&w.jsx(Yvn,Object.assign({},v)),c==="table-body"||f.isResizingColumn?w.jsx(avn,Object.assign({},v,{tableProps:m})):w.jsx(tHe,Object.assign({},v,{tableProps:m})),o&&w.jsx(kvn,Object.assign({},v))]}))},h1n=e=>{var t,{open:n,table:r}=e,i=Un(e,["open","table"]);const{getState:s,options:{mantineCreateRowModalProps:o,mantineEditRowModalProps:a,onCreatingRowCancel:l,onEditingRowCancel:u,renderCreateRowModalContent:c,renderEditRowModalContent:d},setCreatingRow:f,setEditingRow:h}=r,{creatingRow:p,editingRow:m}=s(),g=p??m,y={row:g,table:r},v=Object.assign(Object.assign(Object.assign({},Ut(a,y)),p&&Ut(o,y)),i),b=g.getAllCells().filter(E=>E.column.columnDef.columnDefType==="data").map(E=>w.jsx(qB,{cell:E,table:r},E.id)),_=()=>{var E;p?(l?.({row:g,table:r}),f(null)):(u?.({row:g,table:r}),h(null)),g._valuesCache={},(E=v.onClose)===null||E===void 0||E.call(v)};return k.createElement(Fi,Object.assign({opened:n,withCloseButton:!1},v,{key:g.id,onClose:_}),(t=p&&c?.({internalEditComponents:b,row:g,table:r})||d?.({internalEditComponents:b,row:g,table:r}))!==null&&t!==void 0?t:w.jsxs(w.Fragment,{children:[w.jsx("form",{onSubmit:E=>E.preventDefault(),children:w.jsx(Gn,{gap:"lg",pb:24,pt:16,children:b})}),w.jsx(Rt,{justify:"flex-end",children:w.jsx(nHe,{row:g,table:r,variant:"text"})})]}))},p1n=typeof window<"u"?k.useLayoutEffect:k.useEffect,m1n=e=>{var{table:t}=e,n=Un(e,["table"]);const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableStickyHeader:o,mantineLoadingOverlayProps:a,mantineTableContainerProps:l},refs:{bottomToolbarRef:u,tableContainerRef:c,topToolbarRef:d}}=t,{creatingRow:f,editingRow:h,isFullScreen:p,isLoading:m,showLoadingOverlay:g}=r(),[y,v]=k.useState(0),b=Object.assign(Object.assign({},Ut(l,{table:t})),n),_=Ut(a,{table:t});p1n(()=>{var T,A,R,I;const P=typeof document<"u"&&(A=(T=d.current)===null||T===void 0?void 0:T.offsetHeight)!==null&&A!==void 0?A:0,N=typeof document<"u"&&(I=(R=u?.current)===null||R===void 0?void 0:R.offsetHeight)!==null&&I!==void 0?I:0;v(P+N)});const E=i==="modal"&&f,S=s==="modal"&&h;return w.jsxs(De,Object.assign({},b,{__vars:Object.assign({"--mrt-top-toolbar-height":`${y}`},b?.__vars),className:Bt("mrt-table-container",Kq.root,o&&Kq["root-sticky"],p&&Kq["root-fullscreen"],b?.className),ref:T=>{T&&(c.current=T,b?.ref&&(b.ref.current=T))},children:[w.jsx(hu,Object.assign({visible:m||g,zIndex:2},_)),w.jsx(f1n,{table:t}),(E||S)&&w.jsx(h1n,{open:!0,table:t})]}))};var EHe={"common-toolbar-styles":"common-styles-module_common-toolbar-styles__DnjR8"},F2={root:"MRT_BottomToolbar-module_root__VDeWo","root-fullscreen":"MRT_BottomToolbar-module_root-fullscreen__esE15","custom-toolbar-container":"MRT_BottomToolbar-module_custom-toolbar-container__XcDRF","paginator-container":"MRT_BottomToolbar-module_paginator-container__A3eWY","paginator-container-alert-banner":"MRT_BottomToolbar-module_paginator-container-alert-banner__gyqtO"},DCe={collapse:"MRT_ProgressBar-module_collapse__rOLJH","collapse-top":"MRT_ProgressBar-module_collapse-top__oCi0h"};const CHe=e=>{var{isTopToolbar:t,table:n}=e,r=Un(e,["isTopToolbar","table"]);const{getState:i,options:{mantineProgressProps:s}}=n,{isSaving:o,showProgressBars:a}=i(),l=Object.assign(Object.assign({},Ut(s,{isTopToolbar:t,table:n})),r);return w.jsx(vm,{className:Bt(DCe.collapse,t&&DCe["collapse-top"]),in:o||a,children:w.jsx(Gw,Object.assign({animated:!0,"aria-busy":"true","aria-label":"Loading",radius:0,value:100},l))})};var Xq={root:"MRT_TablePagination-module_root__yZ8pm",pagesize:"MRT_TablePagination-module_pagesize__-vmTn","with-top-margin":"MRT_TablePagination-module_with-top-margin__aM5-m"};const PCe=[5,10,15,20,25,30,50,100].map(e=>e.toString()),SHe=e=>{var t,{position:n="bottom",table:r}=e,i=Un(e,["position","table"]);const{getPrePaginationRowModel:s,getState:o,options:{enableToolbarInternalActions:a,icons:{IconChevronLeft:l,IconChevronLeftPipe:u,IconChevronRight:c,IconChevronRightPipe:d},localization:f,mantinePaginationProps:h,paginationDisplayMode:p,rowCount:m},setPageIndex:g,setPageSize:y}=r,{pagination:{pageIndex:v=0,pageSize:b=10},showGlobalFilter:_}=o(),E=Object.assign(Object.assign({},Ut(h,{table:r})),i),S=m??s().rows.length,T=Math.ceil(S/b),A=T>2,R=v*b,I=Math.min(v*b+b,S),P=E??{},{rowsPerPageOptions:N=PCe,showRowsPerPage:M=!0,withEdges:O=A}=P,j=Un(P,["rowsPerPageOptions","showRowsPerPage","withEdges"]),B=n==="top"&&a&&!_;return w.jsxs(De,{className:Bt("mrt-table-pagination",Xq.root,B&&Xq["with-top-margin"]),children:[E?.showRowsPerPage!==!1&&w.jsxs(Pn,{gap:"xs",children:[w.jsx(He,{id:"rpp-label",children:f.rowsPerPage}),w.jsx(Ug,{allowDeselect:!1,"aria-labelledby":"rpp-label",className:Xq.pagesize,data:(t=E?.rowsPerPageOptions)!==null&&t!==void 0?t:PCe,onChange:H=>y(+H),value:b.toString()})]}),p==="pages"?w.jsx(Ah,Object.assign({firstIcon:u,lastIcon:d,nextIcon:c,onChange:H=>g(H-1),previousIcon:l,total:T,value:v+1,withEdges:O},j)):p==="default"?w.jsxs(w.Fragment,{children:[w.jsx(He,{children:`${I===0?0:(R+1).toLocaleString()}-${I.toLocaleString()} ${f.of} ${S.toLocaleString()}`}),w.jsxs(Pn,{gap:6,children:[O&&w.jsx(Rn,{"aria-label":f.goToFirstPage,color:"gray",disabled:v<=0,onClick:()=>g(0),variant:"subtle",children:w.jsx(u,{})}),w.jsx(Rn,{"aria-label":f.goToPreviousPage,color:"gray",disabled:v<=0,onClick:()=>g(v-1),variant:"subtle",children:w.jsx(l,{})}),w.jsx(Rn,{"aria-label":f.goToNextPage,color:"gray",disabled:I>=S,onClick:()=>g(v+1),variant:"subtle",children:w.jsx(c,{})}),O&&w.jsx(Rn,{"aria-label":f.goToLastPage,color:"gray",disabled:I>=S,onClick:()=>g(T-1),variant:"subtle",children:w.jsx(d,{})})]})]}):null]})};var OCe={root:"MRT_ToolbarDropZone-module_root__eGTXb",hovered:"MRT_ToolbarDropZone-module_hovered__g7PeJ"};const THe=e=>{var{table:t}=e,n=Un(e,["table"]);const{getState:r,options:{enableGrouping:i,localization:s},setHoveredColumn:o,setShowToolbarDropZone:a}=t,{draggingColumn:l,grouping:u,hoveredColumn:c,showToolbarDropZone:d}=r(),f=h=>{o({id:"drop-zone"})};return k.useEffect(()=>{var h;((h=t.options.state)===null||h===void 0?void 0:h.showToolbarDropZone)!==void 0&&a(!!i&&!!l&&l.columnDef.enableGrouping!==!1&&!u.includes(l.id))},[i,l,u]),w.jsx(uf,{mounted:d,transition:"fade",children:()=>{var h,p;return w.jsx(Rt,Object.assign({className:Bt("mrt-toolbar-dropzone",OCe.root,c?.id==="drop-zone"&&OCe.hovered),onDragEnter:f},n,{children:w.jsx(He,{children:s.dropToGroupBy.replace("{column}",(p=(h=l?.columnDef)===null||h===void 0?void 0:h.header)!==null&&p!==void 0?p:"")})}))}})},g1n=e=>{var{table:t}=e,n=Un(e,["table"]);const{getState:r,options:{enablePagination:i,mantineBottomToolbarProps:s,positionPagination:o,positionToolbarAlertBanner:a,positionToolbarDropZone:l,renderBottomToolbarCustomActions:u},refs:{bottomToolbarRef:c}}=t,{isFullScreen:d}=r(),f=kk("(max-width: 720px)"),h=Object.assign(Object.assign({},Ut(s,{table:t})),n),p=f||!!u;return w.jsxs(De,Object.assign({},h,{className:Bt("mrt-bottom-toolbar",F2.root,EHe["common-toolbar-styles"],d&&F2["root-fullscreen"],h?.className),ref:m=>{m&&(c.current=m,h?.ref&&(h.ref.current=m))},children:[w.jsx(CHe,{isTopToolbar:!1,table:t}),a==="bottom"&&w.jsx(Mle,{stackAlertBanner:p,table:t}),["both","bottom"].includes(l??"")&&w.jsx(THe,{table:t}),w.jsxs(De,{className:F2["custom-toolbar-container"],children:[u?u({table:t}):w.jsx("span",{}),w.jsx(De,{className:Bt(F2["paginator-container"],p&&F2["paginator-container-alert-banner"]),children:i&&["both","bottom"].includes(o??"")&&w.jsx(SHe,{position:"bottom",table:t})})]})]}))};var ON={root:"MRT_TopToolbar-module_root__r4-V9","root-fullscreen":"MRT_TopToolbar-module_root-fullscreen__3itT8","actions-container":"MRT_TopToolbar-module_actions-container__-uL0u","actions-container-stack-alert":"MRT_TopToolbar-module_actions-container-stack-alert__OYDL6"},y1n={root:"MRT_ToolbarInternalButtons-module_root__NKoUG"};const v1n=e=>{var t,{table:n}=e,r=Un(e,["table"]);const{options:{columnFilterDisplayMode:i,enableColumnFilters:s,enableColumnOrdering:o,enableColumnPinning:a,enableDensityToggle:l,enableFilters:u,enableFullScreenToggle:c,enableGlobalFilter:d,enableHiding:f,initialState:h,renderToolbarInternalActions:p}}=n;return w.jsx(Rt,Object.assign({},r,{className:Bt("mrt-toolbar-internal-buttons",y1n.root,r?.className),children:(t=p?.({table:n}))!==null&&t!==void 0?t:w.jsxs(w.Fragment,{children:[u&&d&&!h?.showGlobalFilter&&w.jsx(Evn,{table:n}),u&&s&&i!=="popover"&&w.jsx(xvn,{table:n}),(f||o||a)&&w.jsx(vvn,{table:n}),l&&w.jsx(wvn,{table:n}),c&&w.jsx(_vn,{table:n})]})}))},b1n=e=>{var t,{table:n}=e,r=Un(e,["table"]);const{getState:i,options:{enableGlobalFilter:s,enablePagination:o,enableToolbarInternalActions:a,mantineTopToolbarProps:l,positionGlobalFilter:u,positionPagination:c,positionToolbarAlertBanner:d,positionToolbarDropZone:f,renderTopToolbarCustomActions:h},refs:{topToolbarRef:p}}=n,{isFullScreen:m,showGlobalFilter:g}=i(),y=kk("(max-width:720px)"),v=kk("(max-width:1024px)"),b=Object.assign(Object.assign({},Ut(l,{table:n})),r),_=y||!!h||g&&v,E={style:v?void 0:{zIndex:3},table:n};return w.jsxs(De,Object.assign({},b,{className:Bt(EHe["common-toolbar-styles"],ON.root,m&&ON["root-fullscreen"],b?.className),ref:S=>{S&&(p.current=S,b?.ref&&(b.ref.current=S))},children:[d==="top"&&w.jsx(Mle,{stackAlertBanner:_,table:n}),["both","top"].includes(f??"")&&w.jsx(THe,{table:n}),w.jsxs(Rt,{className:Bt(ON["actions-container"],_&&ON["actions-container-stack-alert"]),children:[s&&u==="left"&&w.jsx(Gq,Object.assign({},E)),(t=h?.({table:n}))!==null&&t!==void 0?t:w.jsx("span",{}),a?w.jsxs(Rt,{justify:"end",wrap:"wrap-reverse",children:[s&&u==="right"&&w.jsx(Gq,Object.assign({},E)),w.jsx(v1n,{table:n})]}):s&&u==="right"&&w.jsx(Gq,Object.assign({},E))]}),o&&["both","top"].includes(c??"")&&w.jsx(Rt,{justify:"end",children:w.jsx(SHe,{position:"top",table:n})}),w.jsx(CHe,{isTopToolbar:!0,table:n})]}))},w1n=e=>{var t,n,{table:r}=e,i=Un(e,["table"]);const{getState:s,options:{enableBottomToolbar:o,enableTopToolbar:a,mantinePaperProps:l,renderBottomToolbar:u,renderTopToolbar:c},refs:{tablePaperRef:d}}=r,{isFullScreen:f}=s(),h=Object.assign(Object.assign({},Ut(l,{table:r})),i);return w.jsxs(lf,Object.assign({shadow:"xs",withBorder:!0},h,{className:Bt("mrt-table-paper",c1n.root,f&&"mrt-table-paper-fullscreen",h?.className),ref:p=>{d.current=p,h?.ref&&(h.ref.current=p)},style:p=>Object.assign(Object.assign({zIndex:f?200:void 0},Ut(h?.style,p)),f?{border:0,borderRadius:0,bottom:0,height:"100vh",left:0,margin:0,maxHeight:"100vh",maxWidth:"100vw",padding:0,position:"fixed",right:0,top:0,width:"100vw"}:null),children:[a&&((t=Ut(c,{table:r}))!==null&&t!==void 0?t:w.jsx(b1n,{table:r})),w.jsx(m1n,{table:r}),o&&((n=Ut(u,{table:r}))!==null&&n!==void 0?n:w.jsx(g1n,{table:r}))]}))},x1n=e=>e.table!==void 0,$le=e=>{let t;return x1n(e)?t=e.table:t=KB(e),w.jsx(w1n,{table:t})};function _1n(e){return{total:e.length,completed:e.filter(t=>t.completed&&!t.rejected).length,inProgress:e.filter(t=>!t.completed&&!t.rejected).length,rejected:e.filter(t=>t.rejected).length}}function E1n(e){const n=e.filter(s=>!s.rejected).map(s=>{const o=Object.values(s.answers).filter(a=>a.startTime).sort((a,l)=>a.startTime-l.startTime);return{startTime:o.length>0?o[0].startTime:void 0,endTime:o.length>0?o[o.length-1].endTime:void 0}}),r=n.map(s=>s.startTime).filter(s=>s!=null),i=n.map(s=>s.endTime).filter(s=>s!=null);return{startDate:r.length>0?new Date(Math.min(...r)):null,endDate:i.length>0?new Date(Math.max(...i)):null}}function C1n(e){const n=e.filter(r=>!r.rejected).reduce((r,i)=>{const s=Object.values(i.answers).filter(o=>o.endTime!==-1).map(o=>({totalTime:(o.endTime-o.startTime)/1e3,cleanTime:(()=>{const a=nre(o);return a?a/1e3:0})()}));return s.length>0&&(r.count+=s.length,r.totalTimeSum+=s.reduce((o,a)=>o+a.totalTime,0),r.cleanTimeSum+=s.reduce((o,a)=>o+a.cleanTime,0)),r},{totalTimeSum:0,cleanTimeSum:0,count:0});return{avgTime:n.count>0?n.totalTimeSum/n.count:NaN,avgCleanTime:n.count>0?n.cleanTimeSum/n.count:NaN}}function S1n(e){const t=e.filter(s=>!s.rejected),n=t.some(s=>Object.values(s.answers).some(o=>o.correctAnswer&&o.correctAnswer.length>0));let r=0;const i=t.reduce((s,o)=>{const a=Object.values(o.answers).filter(l=>l.correctAnswer&&l.correctAnswer.length>0);return a.length>0&&a.forEach(l=>{r+=l.correctAnswer.length,ux(l.answer,l.correctAnswer)&&(s.correctSum+=l.correctAnswer.length)}),s},{correctSum:0});return n?i.correctSum/r*100:NaN}function AHe(e){const t=e.filter(r=>!r.rejected),n={};return t.forEach(r=>{const i=new Set;Object.entries(r.answers).forEach(([s,o])=>{const a=`${s.split("_")[0]}`;if(n[a]||(n[a]={name:a,avgTime:0,avgCleanTime:0,participantCount:0,correctness:0}),o.endTime===-1)return;const l=n[a],u=(o.endTime-o.startTime)/1e3,c=nre(o),d=c?c/1e3:0;if(l.avgTime+=u,l.avgCleanTime+=d,i.has(a)||(i.add(a),l.participantCount+=1),o.correctAnswer&&o.correctAnswer.length>0){const f=ux(o.answer,o.correctAnswer);l.correctness+=f?1:0}})}),Object.values(n).map(r=>{const i=Object.values(t).flatMap(a=>Object.keys(a.answers).filter(l=>l.startsWith(r.name)&&a.answers[l]?.correctAnswer?.length>0)),s=Object.values(t).reduce((a,l)=>a+Object.keys(l.answers).filter(u=>u.startsWith(r.name)&&l.answers[u].endTime!==-1).length,0),o=i.length>0;return{...r,avgTime:s?r.avgTime/s:0,avgCleanTime:s?r.avgCleanTime/s:0,correctness:o?r.correctness/i.length*100:NaN}})}function kHe(e){const t=e.filter(r=>!r.rejected),n={};return t.forEach(r=>{Object.entries(r.answers).forEach(([i,s])=>{const o=i.split("_"),a=o.length===4?o[2]:o[0];if(n[a]||(n[a]={name:a,correctness:0,participantCount:0}),s.endTime===-1)return;const l=n[a];if(l.participantCount+=1,s.correctAnswer&&s.correctAnswer.length>0){const u=ux(s.answer,s.correctAnswer);l.correctness+=u?1:0}})}),Object.values(n).map(r=>{const i=Object.values(t).some(s=>Object.entries(s.answers).some(([o,a])=>{const l=o.split("_");return(l.length===4?l[2]:l[0])===r.name&&a.correctAnswer&&a.correctAnswer.length>0}));return{...r,correctness:i?r.correctness/r.participantCount*100:NaN}})}function IHe(e){return e.type==="slider"?e.options.map(t=>`${t.label} (${t.value})`).join(", "):"options"in e?e.options.join(", "):"answerOptions"in e&&"questionOptions"in e?`Questions: ${e.questionOptions.join(", ")} 
 Answers: ${Array.isArray(e.answerOptions)?e.answerOptions.join(", "):e.answerOptions}`:"numItems"in e?`${e.leftLabel?` ${e.leftLabel} ~ ${e.rightLabel}`:""} (${e.numItems} items)`:"N/A"}const N_=(e,t)=>e==="N/A"?-1:parseFloat(e.replace(t,""))||0;function T1n({visibleParticipants:e}){const t=k.useMemo(()=>AHe(e).map(s=>({component:s.name,participants:s.participantCount,avgTime:Number.isFinite(s.avgTime)?`${s.avgTime.toFixed(1)}s`:"N/A",avgCleanTime:Number.isFinite(s.avgCleanTime)?`${s.avgCleanTime.toFixed(1)}s`:"N/A",correctness:Number.isNaN(s.correctness)?"N/A":`${s.correctness.toFixed(1)}%`})),[e]),n=k.useMemo(()=>[{accessorKey:"component",header:"Component"},{accessorKey:"participants",header:"Participants"},{accessorKey:"avgTime",header:"Avg Time",sortingFn:(i,s)=>{const o=N_(i.original.avgTime,"s"),a=N_(s.original.avgTime,"s");return o-a}},{accessorKey:"avgCleanTime",header:"Avg Clean Time",sortingFn:(i,s)=>{const o=N_(i.original.avgCleanTime,"s"),a=N_(s.original.avgCleanTime,"s");return o-a}},{accessorKey:"correctness",header:"Correctness",sortingFn:(i,s)=>{const o=N_(i.original.correctness,"%"),a=N_(s.original.correctness,"%");return o-a}}],[]),r=KB({columns:n,data:t,enableGlobalFilter:!0,enableColumnFilters:!1,enableSorting:!0,enablePagination:!0,initialState:{pagination:{pageSize:10,pageIndex:0},sorting:[{id:"component",desc:!1}]},mantineSearchTextInputProps:{placeholder:"Search components...",leftSection:w.jsx(CIe,{size:16})},mantinePaperProps:{style:{overflow:"hidden"}},mantineTableContainerProps:{style:{overflow:"auto"}}});return w.jsxs(lf,{shadow:"sm",p:"md",withBorder:!0,children:[w.jsx(ri,{order:4,mb:"md",children:"Component Statistics"}),e.length===0||t.length===0?w.jsx(He,{ta:"center",mb:"md",children:"No data available"}):w.jsx($le,{table:r})]})}const NCe=(e,t)=>e==="N/A"?-1:parseFloat(e.replace(t,""))||0;function A1n({visibleParticipants:e,studyConfig:t}){const n=k.useMemo(()=>{const s=kHe(e),o=[];return s.forEach(a=>{const l=t.components[a.name];if(!l)return;const u=lu(l,t).response;u.length!==0&&u.forEach(c=>{const d=Number.isNaN(a.correctness)?"N/A":`${a.correctness.toFixed(1)}%`;o.push({component:a.name,type:c.type,question:c.prompt||"",options:IHe(c),correctness:d})})}),o},[e,t]),r=k.useMemo(()=>[{accessorKey:"component",header:"Component"},{accessorKey:"type",header:"Type"},{accessorKey:"question",header:"Question"},{accessorKey:"options",header:"Options"},{accessorKey:"correctness",header:"Correctness",sortingFn:(s,o)=>{const a=NCe(s.original.correctness,"%"),l=NCe(o.original.correctness,"%");return a-l}}],[]),i=KB({columns:r,data:n,initialState:{sorting:[{id:"component",desc:!1}]},mantinePaperProps:{style:{overflow:"hidden"}},mantineTableContainerProps:{style:{overflow:"auto"}}});return w.jsxs(lf,{shadow:"sm",p:"md",withBorder:!0,children:[w.jsx(ri,{order:4,mb:"md",children:"Response Statistics"}),e.length===0||n.length===0?w.jsx(He,{ta:"center",mb:"md",children:"No data available"}):w.jsx($le,{table:i})]})}function k1n({visibleParticipants:e,studyConfig:t}){const n=k.useMemo(()=>{if(e.length===0)return null;const r=_1n(e),{avgTime:i,avgCleanTime:s}=C1n(e),{startDate:o,endDate:a}=E1n(e),l=S1n(e),c=AHe(e).map(f=>({component:f.name,participants:f.participantCount,avgTime:Number.isFinite(f.avgTime)?`${f.avgTime.toFixed(1)}s`:"N/A",avgCleanTime:Number.isFinite(f.avgCleanTime)?`${f.avgCleanTime.toFixed(1)}s`:"N/A",correctness:Number.isNaN(f.correctness)?"N/A":`${f.correctness.toFixed(1)}%`})),d=t?(()=>{const f=kHe(e),h=[];return f.forEach(p=>{const m=t.components[p.name];if(!m)return;const g=lu(m,t).response;g.length!==0&&g.forEach(y=>{const v=Number.isNaN(p.correctness)?"N/A":`${p.correctness.toFixed(1)}%`;h.push({component:p.name,type:y.type,question:y.prompt||"",options:IHe(y),correctness:v})})}),h})():[];return{participantCounts:r,avgTime:i,avgCleanTime:s,startDate:o,endDate:a,correctnessStats:l,responseData:d,componentData:c}},[e,t]);return w.jsxs(Gn,{gap:"md",children:[w.jsx(Cgn,{overviewData:n,mismatchDetails:null}),w.jsxs(Pn,{align:"flex-start",gap:"md",grow:!0,children:[w.jsx(T1n,{visibleParticipants:e}),w.jsx(A1n,{visibleParticipants:e,studyConfig:t})]})]})}function I1n(e,t){if(!e)return null;if(t?.uiConfig&&t.uiConfig.participantNameField){const[n,r]=t.uiConfig.participantNameField.split("."),i=Object.keys(e.answers).find(s=>s.startsWith(n));if(i)return`${e.answers[i].answer[r]}`}return null}function R1n({xScale:e,height:t,labelHeight:n=0,scaleStart:r}){return w.jsx("g",{children:w.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(r)+2,x2:e(r)+2,y1:t-45-n,y2:t-25})})}function D1n(){return k.useCallback((e,t,n)=>{const r=e.split("_").map(s=>js(+s)).join("/"),i=`${n}/${r}?participantId=${t}`;window.open(`${as}${i}`,"_blank")},[])}const NN=3,M_=25,MN=25,$N=20,MCe=1,Qq=15;function P1n({xScale:e,name:t,height:n,labelHeight:r=0,isCorrect:i,hasCorrect:s,scaleStart:o,scaleEnd:a,incomplete:l,trialOrder:u,participantId:c,studyId:d}){const[f,h]=k.useState(!1),[p,{width:m}]=nh(),g=D1n();return w.jsxs("g",{onClick:()=>g(u,c,d),onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{cursor:"pointer"},children:[w.jsx("rect",{opacity:1,fill:f?"cornflowerblue":l?"#e9ecef":"lightgray",x:e(o)+MCe,width:e(a)-e(o)-MCe*2,y:n-M_,height:M_}),w.jsx("rect",{rx:3,opacity:1,x:e(o)-NN,width:m+NN*2+(s?Qq:0),y:n-M_-MN-r,height:$N,fill:"whitesmoke"}),w.jsx("line",{stroke:"black",strokeWidth:1,x1:e(o)-NN,x2:m+e(o)+NN+(s?Qq:0),y1:n-M_-MN+$N-r,y2:n-M_-MN+$N-r}),w.jsx("foreignObject",{x:e(o),width:m+(s?Qq:0),y:n-M_-MN-r,height:$N,children:w.jsx(Ko,{style:{width:"fit-content"},children:w.jsxs(Pn,{wrap:"nowrap",gap:2,children:[w.jsx(He,{lineClamp:1,ref:p,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:t}),l?w.jsx(xIe,{color:"orange",size:"14"}):s?i?w.jsx(mv,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):w.jsx(Wg,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const Jq=25,$Ce=8,L2={left:20,top:20,right:20,bottom:20},O1n=(e,t)=>{const n=e[1].trialOrder.split("_"),r=t[1].trialOrder.split("_");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]};function N1n({participantData:e,width:t,studyId:n,studyConfig:r,maxLength:i}){const s=k.useMemo(()=>{const d=Object.entries(e.answers||{}).filter(f=>f[1].startTime===0);return(Object.entries(e.answers).length-d.length)/Object.entries(e.answers).length},[e.answers]),o=k.useMemo(()=>{const d=Object.values(e.answers||{}).filter(p=>p.startTime).map(p=>[p.startTime,p.endTime]).flat(),f=K6(d);return sc([L2.left,t*s-(s!==1?0:L2.right)]).domain([f[0],i?f[0]+i:f[1]]).clamp(!0)},[i,e.answers,s,t]),a=k.useMemo(()=>sc([t*s,t-L2.right]).domain([0,Object.entries(e.answers||{}).filter(f=>f[1].startTime===0).length]).clamp(!0),[e.answers,s,t]),l=k.useMemo(()=>{const d=Object.entries(e.answers||{}).filter(p=>!!p[1].startTime).sort((p,m)=>p[1].startTime-m[1].startTime);let f=0,h=0;return d.forEach((p,m)=>{const[g,y]=p,v=m>0?d[m-f-1]:null;v&&v[0].length*($Ce+1)+o(v[1].startTime)>o(y.startTime)?f+=1:f=0,f>h&&(h=f)}),(h+1)*Jq+L2.top+L2.bottom},[e.answers,o]),u=k.useMemo(()=>{let d=0;const f=Object.entries(e.answers||{}).filter(g=>g[1].startTime===0).sort(O1n),p=[...Object.entries(e.answers||{}).filter(g=>!!g[1].startTime).sort((g,y)=>g[1].startTime-y[1].startTime),...f];return p.map((g,y)=>{const v=g[1].startTime===0?a:o,[b,_]=g,E=y>0?p[y-d-1]:null,S=E&&E[1].startTime?o:a,T=E?E[1].startTime?E[1].startTime:f.indexOf(E):0,A=_.startTime?_.startTime:f.indexOf(g),R=_.endTime>0?_.endTime:f.indexOf(g)+1;E&&E[0].length*($Ce+1)+S(T)>v(A)?d+=1:d=0;const I=b.split("_"),P=I.slice(0,I.length-1).join("_"),N=r?.components[P],M=ux(_.answer,_.correctAnswer),O=!!(N&&N.correctAnswer||_.correctAnswer.length>0);return{line:w.jsx(R1n,{labelHeight:d*Jq,height:l,xScale:v,scaleStart:A},b),label:w.jsx(bt,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:w.jsx(Gn,{gap:0,children:Object.entries(_.answer).map(j=>{const[B,H]=j,q=N?.correctAnswer?.find(U=>U.id===B)?.answer,G=H==null||H===""?"N/A":typeof H=="object"?JSON.stringify(H):H;return w.jsx(He,{children:`${B}: ${G} ${q?`[${typeof q=="object"?JSON.stringify(q):q}]`:""}`},B)})}),children:w.jsx("g",{children:w.jsx(P1n,{incomplete:_.startTime===0,isCorrect:M,hasCorrect:O,labelHeight:d*Jq,height:l,name:b,xScale:v,scaleStart:A,scaleEnd:R,trialOrder:_.trialOrder,participantId:e.participantId,studyId:n},b)})},`${b}-tooltip`)}})},[e.answers,e.participantId,a,o,r?.components,l,n]),c=k.useMemo(()=>Object.entries(e.answers||{}).sort((f,h)=>f[1].startTime-h[1].startTime).map(f=>{const[h,p]=f,m=[];let g=[-1,-1],y="visible";if(p.windowEvents)for(let v=0;v<p.windowEvents.length;v+=1)p.windowEvents[v][1]==="visibility"&&(p.windowEvents[v][2]==="hidden"&&y==="visible"?(g=[p.windowEvents[v][0],-1],y="hidden"):p.windowEvents[v][2]==="visible"&&y==="hidden"&&(g[1]=p.windowEvents[v][0],m.push(g),g=[-1,-1],y="visible"));return m.map((v,b)=>w.jsx(bt,{withinPortal:!0,label:"Browsed away",children:w.jsx("rect",{x:o(v[0]),width:o(v[1])-o(v[0]),y:l-5,height:10})},b))}),[o,l,e.answers]);return w.jsx(Ko,{children:w.jsx(Gn,{gap:15,style:{width:"100%"},children:w.jsxs("svg",{style:{width:t,height:l,overflow:"visible"},children:[u.map(d=>d.line),u.map(d=>d.label),c]})})})}function M1n({metaData:e}){return w.jsx(BZ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:w.jsxs(Gn,{gap:"xs",children:[w.jsxs(De,{children:[w.jsx("strong",{children:"Resolution:"})," ",JSON.stringify(e?.resolution,null,2)]}),w.jsxs(De,{children:[w.jsx("strong",{children:"User Agent:"})," ",e?.userAgent]}),w.jsxs(De,{children:[w.jsx("strong",{children:"IP:"})," ",e?.ip]}),w.jsxs(De,{children:[w.jsx("strong",{children:"Language:"})," ",e?.language]})]})})}function $1n(e){return e.valueOf()===0||Number.isNaN(e.valueOf())?w.jsx(He,{size:"sm",c:"dimmed",children:"None"}):e.toLocaleDateString([],{hour:"2-digit",minute:"2-digit"})}function F1n({visibleParticipants:e,studyConfig:t,refresh:n,width:r,stageColors:i,selectedParticipants:s,onSelectionChange:o}){const{studyId:a}=So(),[l,u]=k.useState({});k.useEffect(()=>{const h=Object.keys(l).filter(p=>l[p]).map(p=>e.find(m=>m.participantId===p)).filter(p=>p!==void 0);o(h)},[l,e,o]);const c=k.useCallback(async()=>{await n()},[n]),d=k.useMemo(()=>[{accessorFn:h=>{const p=Object.entries(h.answers||{}).filter(m=>m[1].startTime===0);return{percent:(Object.entries(h.answers).length-p.length)/(Kd(h.sequence).length-1),completed:h.completed,rejected:h.rejected}},header:"Status",size:50,Cell:({cell:h})=>{const p=h.getValue();return p.rejected?w.jsxs(Gn,{align:"center",justify:"center",gap:4,w:"100%",children:[w.jsx(bt,{label:"Rejected",children:w.jsx(Wg,{size:30,color:"red",style:{marginBottom:-3}})}),w.jsx(He,{size:"xs",c:"dimmed",ta:"center",children:p.rejected.reason})]}):p.completed?w.jsx(Pn,{align:"center",justify:"center",w:"100%",children:w.jsx(bt,{label:"Completed",children:w.jsx(mv,{size:30,color:"teal",style:{marginBottom:-3}})})}):w.jsx(Pn,{align:"center",justify:"center",w:"100%",children:w.jsx(bt,{label:"In Progress",children:w.jsx(JF,{size:30,thickness:4,sections:[{value:p.percent*100,color:"blue"}]})})})}},{accessorKey:"participantIndex",header:"#",size:50},{accessorKey:"stage",header:"Stage",size:120,Cell:({cell:h})=>{const p=h.getValue();if(!p||p==="")return w.jsx(_o,{color:"gray",variant:"light",size:"md",children:"N/A"});const m=i[p]||"#F05A30";return w.jsx(_o,{color:m,variant:"filled",size:"md",children:p})}},{accessorKey:"participantId",header:"ID"},...t.uiConfig.participantNameField?[{accessorFn:h=>I1n(h,t),header:"Name"}]:[],{accessorFn:h=>new Date(Math.max(...Object.values(h.answers).filter(p=>p.endTime>0).map(p=>p.endTime))-Math.min(...Object.values(h.answers).filter(p=>p.startTime>0).map(p=>p.startTime))),header:"Duration",Cell:({cell:h})=>Number.isNaN(h.getValue())?"Incomplete":w.jsx(_o,{variant:"light",size:"lg",color:"gray",leftSection:w.jsx(Lut,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:`${tQ(+h.getValue())||"N/A"}`})},{accessorFn:h=>new Date(Math.min(...Object.values(h.answers).filter(p=>p.startTime>0).map(p=>p.startTime))),Cell:({cell:h})=>$1n(h.getValue()),header:"Start Time"},{accessorFn:h=>Object.values(h.answers).filter(p=>p.correctAnswer.length>0&&p.endTime>0).map(p=>ux(p.answer,p.correctAnswer)),header:"Correct Answers",Cell:({cell:h})=>w.jsxs(w.Fragment,{children:[w.jsx(_o,{variant:"light",size:"lg",color:"green",leftSection:w.jsx(mv,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:h.getValue().filter(p=>p).length}),w.jsx(_o,{variant:"light",size:"lg",color:"red",leftSection:w.jsx(Wg,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:h.getValue().length-h.getValue().filter(p=>p).length})]})},{accessorKey:"metadata",header:"Metadata",Cell:({cell:h})=>w.jsx(M1n,{metaData:h.getValue()})}],[t,i]),f=KB({columns:d,data:e,enableColumnResizing:!0,columnResizeMode:"onEnd",enableRowSelection:!0,getRowId:h=>h.participantId,onRowSelectionChange:u,manualPagination:!0,state:{rowSelection:l},paginationDisplayMode:"pages",enablePagination:!1,enableRowVirtualization:!0,mantinePaperProps:{style:{maxHeight:"100%",display:"flex",flexDirection:"column"}},layoutMode:"grid",renderDetailPanel:({row:h})=>{const p=h.original;return p.participantId?w.jsx(N1n,{maxLength:void 0,studyConfig:t,studyId:a||"",participantData:p,width:r-60}):null},defaultColumn:{minSize:20,maxSize:1e3,size:180},enableDensityToggle:!1,positionToolbarAlertBanner:"none",renderTopToolbarCustomActions:()=>w.jsx(Rt,{mb:8,p:8,children:w.jsx(wVe,{selectedParticipants:s,refresh:c})})});return e.length>0?w.jsx($le,{table:f}):w.jsxs(w.Fragment,{children:[w.jsx(zd,{h:"xl"}),w.jsx(Rt,{justify:"center",align:"center",children:w.jsx(He,{children:"No data available"})})]})}function L1n({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=ZQ(!0),[o,a]=nh(),l=k.useMemo(()=>e.type==="metadata"?void 0:r.correctAnswer?.find(f=>f.id===e.id),[e.id,e.type,r.correctAnswer]),u=k.useMemo(()=>e.type==="metadata"?[]:t.map(f=>Object.entries(f.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(f=>f.filter(([,h])=>h.startTime>0).map(([,h])=>{const p={...h.answer};if(l){const m=h.answer[e.id],g=l.answer;p.result=Bne(m,g)?"correct":"incorrect"}return p})).flat(),[t,e.type,n,l,e.id]),c=k.useMemo(()=>{const d={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...d,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const f={params:[{name:"correctAnswer",value:l?.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="matrix-radio"||e.type==="matrix-checkbox"){const h=u.map(m=>Object.entries(m[e.id]||{}).map(([g,y])=>e.type==="matrix-checkbox"?y.split("|").map(v=>({question:g,value:v})):[{question:g,value:y}]).flat()).flat();return{...d,data:{values:h},mark:"bar",params:l!==void 0?f.params:void 0,transform:Array.isArray(l?.answer)?void 0:l!==void 0?f.transform:void 0,encoding:{row:{field:"question",type:"nominal",header:{title:"Question"}},x:{field:"value",type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?f.color:void 0},order:l!==void 0?f.order:void 0,resolve:{scale:{x:"independent"}}}}if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...d,data:{values:u},mark:"bar",params:l!==void 0?f.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?f.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?f.color:void 0,order:l!==void 0?f.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox"||e.type==="buttons"||e.type==="ranking-sublist"||e.type==="ranking-categorical"||e.type==="ranking-pairwise")return{...d,data:{values:u},mark:"bar",params:l!==void 0?f.params:void 0,transform:Array.isArray(l?.answer)?void 0:l!==void 0?f.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?f.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return w.jsxs(lf,{p:"lg",withBorder:!0,ref:o,children:[w.jsxs(Rt,{direction:"row",justify:"space-between",onClick:s,children:[w.jsxs(Rt,{align:"center",children:[e.type==="metadata"&&w.jsx(Zlt,{size:20}),e.type==="numerical"&&w.jsx(tct,{size:20}),(e.type==="shortText"||e.type==="longText")&&w.jsx(Ilt,{size:20}),e.type==="likert"&&w.jsx(gIe,{size:20}),e.type==="dropdown"&&w.jsx(Ect,{size:20}),e.type==="slider"&&w.jsx(elt,{size:20}),e.type==="radio"&&w.jsx(pct,{size:20}),e.type==="checkbox"&&w.jsx(Pct,{size:20}),(e.type==="ranking-sublist"||e.type==="ranking-categorical"||e.type==="ranking-pairwise")&&w.jsx(but,{size:20}),e.type==="matrix-radio"&&w.jsx(Nut,{size:20}),e.type==="matrix-checkbox"&&w.jsx(Olt,{size:20}),e.type==="buttons"&&w.jsx(rut,{size:20}),e.type==="reactive"&&w.jsx(But,{size:20}),e.type==="textOnly"&&w.jsx(qut,{size:20}),w.jsx(ri,{order:5,ml:4,children:e.id})]}),w.jsx(lee,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),w.jsxs(vm,{in:i,mah:400,children:[w.jsx(De,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:w.jsx(JC,{})}),w.jsxs($Z,{cols:2,h:360,children:[w.jsx(Qp,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"&&e.type!=="textOnly"&&e.type!=="ranking-sublist"&&e.type!=="ranking-categorical"&&e.type!=="ranking-pairwise"?w.jsx(f_e,{spec:c,actions:!1,height:270,width:e.type==="matrix-checkbox"||e.type==="matrix-radio"?500:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):w.jsx(Rt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:e.type==="metadata"?w.jsx(Cp,{block:!0,children:`${JSON.stringify(r,null,2)}`}):w.jsxs(w.Fragment,{children:[w.jsx(He,{fw:700,children:"Response Values: "}),e.type==="textOnly"||e.type==="ranking-sublist"||e.type==="ranking-categorical"||e.type==="ranking-pairwise"?w.jsx(He,{children:"N/A"}):u.map((d,f)=>w.jsx(Rt,{align:"center",gap:"xs",children:w.jsx(He,{children:d[e.id]})},f))]})})}),w.jsx(Qp,{mih:200,children:e.type==="metadata"?w.jsx(f_e,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):w.jsxs(w.Fragment,{children:[w.jsx(He,{fw:700,children:"Response Specification: "}),w.jsx(Cp,{block:!0,children:JSON.stringify(e,null,2)}),w.jsx("br",{}),l&&w.jsxs(w.Fragment,{children:[w.jsx(He,{fw:700,children:"Correct Answer: "}),w.jsx(Cp,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function j1n({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&lu(t.components[n],t),i=k.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?w.jsx(Rt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>w.jsx(L1n,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):w.jsx(Rt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:w.jsx(He,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function B1n({studyConfig:e,visibleParticipants:t}){const n=k.useMemo(()=>{let i=structuredClone(e.sequence);return i=zee(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=So();return w.jsx(lf,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?w.jsx(Rt,{justify:"center",align:"center",pt:"lg",pb:"md",children:w.jsx(He,{children:"No data available."})}):w.jsxs(Rt,{direction:"row",children:[w.jsx(De,{w:340,children:w.jsx(L$,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),w.jsx(JC,{orientation:"vertical",mx:"md"}),w.jsx(j1n,{participantData:t,studyConfig:e,trialId:r})]})})}function RHe({visibleParticipants:e,studyId:t,gap:n,fileName:r,hasAudio:i,hasScreenRecording:s}){const[o,{open:a,close:l}]=ZQ(!1),[u,c]=k.useState([]),[d,f]=k.useState(!1),[h,p]=k.useState(!1),{storageEngine:m}=Vi(),g=async()=>typeof e=="function"?await e():e,y=async()=>{const S=await g(),T=r?`${r}.json`:`${t}_all.json`;rre(JSON.stringify(S,null,2),T)},v=async()=>{const S=await g();c(S),a()},b=async()=>{f(!0);try{const S=await g();if(!m)return;await vhn({storageEngine:m,participants:S,studyId:t,fileName:r})}finally{f(!1)}},_=async()=>{p(!0);try{const S=await g();if(!m)return;await whn({storageEngine:m,participants:S,studyId:t,fileName:r})}finally{p(!1)}},E=typeof e!="function"?`Download ${e.length} participants`:"Download participants data";return w.jsxs(w.Fragment,{children:[w.jsxs(Pn,{style:{gap:n},children:[w.jsx(bt,{label:`${E} as JSON`,children:w.jsx(Yt,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:y,px:4,children:w.jsx(aut,{})})}),w.jsx(bt,{label:`${E} as tidy CSV`,children:w.jsx(Yt,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:v,px:4,children:w.jsx(TIe,{})})}),i&&w.jsx(bt,{label:`${E} audio & transcripts as ZIP`,children:w.jsx(Yt,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:b,px:4,loading:d,children:w.jsx(wIe,{})})}),s&&w.jsx(bt,{label:`${E} screen recordings ZIP`,children:w.jsx(Yt,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:_,px:4,loading:h,children:w.jsx(pIe,{})})})]}),o&&u.length>0&&w.jsx(Pjt,{opened:o,close:l,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:u,studyId:t})]})}function z1n({studyId:e,refresh:t}){const[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,u]=k.useState(!1),[c,d]=k.useState(""),[f,h]=k.useState({}),[p,m]=k.useState(""),[g,y]=k.useState(""),[v,b]=k.useState(!1),[_,E]=k.useState(!1),{storageEngine:S}=Vi(),T=k.useCallback(async()=>{if(!S)return;E(!0);const G=await S.getSnapshots(e);h(G),E(!1)},[S,e]);if(k.useEffect(()=>{T()},[T]),!S)return null;const A=async G=>{b(!0);let U;switch(G.type){case"create":U=await S.createSnapshot(e,G.archive);break;case"rename":U=await S.renameSnapshot(G.snapshot,G.newName,e);break;case"restore":U=await S.restoreSnapshot(e,G.snapshot);break;case"deleteSnapshot":U=await S.removeSnapshotOrLive(G.snapshot,e);break;case"deleteLive":U=await S.removeSnapshotOrLive(e,e);break;default:throw b(!1),new Error("Unknown action")}U.status==="SUCCESS"?(await T(),b(!1),await t(),U.notifications?.forEach(L=>bI(L))):(b(!1),bI({title:U.error.title,message:U.error.message,color:"red"}))},R=()=>A({type:"create",archive:!1}),I=()=>{m(""),r(!1),A({type:"create",archive:!0})},P=()=>{a(!1),A({type:"rename",snapshot:c,newName:g})},N=G=>A({type:"restore",snapshot:G}),M=()=>{m(""),s(!1),A({type:"deleteSnapshot",snapshot:c})},O=()=>{m(""),u(!1),A({type:"deleteLive"})},j=()=>jhe({title:"Create a Snapshot",children:w.jsx(He,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>R()}),B=G=>jhe({title:"Restore Snapshot",children:w.jsx(He,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>N(G)}),H=G=>{const U=/-snapshot-(.+)$/,L=G.match(U);return L&&L[1]?L[1].replace("T"," "):null},q=async G=>{const U=G.slice(G.indexOf("-")+1);return await S.getAllParticipantsData(U)};return w.jsxs(w.Fragment,{children:[w.jsx(hu,{visible:v}),w.jsxs(Rt,{justify:"space-between",align:"center",children:[w.jsxs(De,{style:{width:"70%"},children:[w.jsx(ri,{order:5,children:"Create a Snapshot"}),w.jsxs(He,{children:["This will create a snapshot of the live"," ",w.jsx(He,{span:!0,fw:700,children:e})," ","database. It will"," ",w.jsx(He,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(bt,{label:"Create a snapshot",children:w.jsx(Yt,{onClick:j,children:"Snapshot"})})]}),w.jsx(zd,{h:"lg"}),w.jsxs(Rt,{justify:"space-between",align:"center",children:[w.jsxs(De,{style:{width:"70%"},children:[w.jsx(ri,{order:5,children:"Archive Data"}),w.jsxs(He,{children:["This will create a snapshot of the live"," ",w.jsx(He,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(bt,{label:"Snapshot and Delete Data",children:w.jsx(Yt,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),w.jsx(zd,{h:"lg"}),w.jsxs(Rt,{justify:"space-between",align:"center",children:[w.jsxs(De,{style:{width:"70%"},children:[w.jsx(ri,{order:5,children:"Delete Data"}),w.jsxs(He,{children:["This will delete the live"," ",w.jsx(He,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),w.jsx(bt,{label:"Delete Data",children:w.jsx(Yt,{color:"red",onClick:()=>u(!0),children:"Delete"})})]}),w.jsx(zd,{h:"xl"}),w.jsxs(Rt,{direction:"column",children:[w.jsx(Rt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:w.jsx(ri,{order:5,children:"Snapshots"})}),w.jsxs(De,{style:{position:"relative"},children:[w.jsx(hu,{visible:_}),Object.keys(f).length>0?w.jsxs(In,{children:[w.jsx(In.Thead,{children:w.jsxs(In.Tr,{children:[w.jsx(In.Th,{children:"Snapshot Name"}),w.jsx(In.Th,{children:"Date Created"}),w.jsx(In.Th,{children:"Actions"})]})}),w.jsx(In.Tbody,{children:Object.entries(f).map(([G,U])=>w.jsxs(In.Tr,{children:[w.jsx(In.Td,{children:U.name}),w.jsx(In.Td,{children:H(G)}),w.jsx(In.Td,{children:w.jsxs(Rt,{children:[w.jsx(bt,{label:"Rename",children:w.jsx(Yt,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),d(G)},children:w.jsx(sct,{})})}),w.jsx(bt,{label:"Restore Snapshot",children:w.jsx(Yt,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(G)},children:w.jsx(_Ie,{})})}),w.jsx(bt,{label:"Delete Snapshot",children:w.jsx(Yt,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),d(G)},children:w.jsx(AIe,{})})}),w.jsx(RHe,{visibleParticipants:()=>q(G),studyId:e,gap:"10px",fileName:U.name})]})})]},G))})]}):w.jsx(He,{children:"No snapshots."})]})]}),w.jsxs(Fi,{opened:n,onClose:()=>{r(!1),m("")},title:w.jsx(He,{children:"Archive Data"}),children:[w.jsx(He,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),w.jsx(iu,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:G=>m(G.target.value)}),w.jsxs(Rt,{mt:"sm",justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),w.jsx(Yt,{color:"red",onClick:I,disabled:p!==e,children:"Archive"})]})]}),w.jsxs(Fi,{opened:i,onClose:()=>{s(!1),m("")},title:w.jsx(He,{children:"Delete Snapshot"}),children:[w.jsxs(He,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",w.jsx(He,{span:!0,fw:700,children:"irreversible"}),"."]}),w.jsx(iu,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:G=>m(G.target.value)}),w.jsxs(Rt,{mt:"sm",justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),w.jsx(Yt,{color:"red",onClick:M,disabled:p!==e,children:"Delete"})]})]}),w.jsxs(Fi,{opened:o,onClose:()=>{a(!1),y("")},title:w.jsx(He,{children:"Rename Snapshot"}),children:[w.jsx(iu,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:G=>y(G.target.value)}),w.jsxs(Rt,{mt:"sm",justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),w.jsx(Yt,{color:"green",onClick:P,disabled:!g||g.length===0,children:"Rename"})]})]}),w.jsxs(Fi,{opened:l,onClose:()=>{u(!1),m("")},title:w.jsx(He,{children:"Delete Live Data"}),children:[w.jsxs(He,{mb:"sm",children:["This will permanently delete the live"," ",w.jsx(He,{span:!0,fw:700,children:e})," ","data. This action is"," ",w.jsx(He,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),w.jsx(iu,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:G=>m(G.target.value)}),w.jsxs(Rt,{mt:"sm",justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"dark",onClick:()=>{u(!1),m("")},children:"Cancel"}),w.jsx(Yt,{color:"red",onClick:O,disabled:p!==e,children:"Delete"})]})]})]})}function V1n({studyId:e}){const{storageEngine:t}=Vi(),[n,r]=k.useState(!1),[i,s]=k.useState(!1),[o,a]=k.useState(!1),[l,u]=k.useState(!1);k.useEffect(()=>{(async()=>{if(t){const f=await t.getModes(e);s(f.dataCollectionEnabled),a(f.studyNavigatorEnabled),u(f.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(d,f)=>{t&&(await t.setMode(e,d,f),d==="dataCollectionEnabled"?s(f):d==="studyNavigatorEnabled"?a(f):d==="analyticsInterfacePubliclyAccessible"&&u(f))};return n&&w.jsxs(Gn,{children:[w.jsx(Xy,{label:"Data Collection Enabled",checked:i,onChange:d=>c("dataCollectionEnabled",d.currentTarget.checked)}),w.jsx(Xy,{label:"Study Navigator Enabled",checked:o,onChange:d=>c("studyNavigatorEnabled",d.currentTarget.checked)}),w.jsx(Xy,{label:"Analytics Interface Publicly Accessible",checked:l,onChange:d=>c("analyticsInterfacePubliclyAccessible",d.currentTarget.checked)})]})}function U1n({studyId:e}){const{storageEngine:t}=Vi(),[n,r]=k.useState(!1),[i,s]=k.useState({stageName:"DEFAULT",color:"#F05A30"}),[o,a]=k.useState([{stageName:"DEFAULT",color:"#F05A30"}]),[l,u]=k.useState(null),[c,d]=k.useState(""),[f,h]=k.useState("#F05A30"),[p,m]=k.useState(""),[g,y]=k.useState(!1),[v,b]=k.useState(""),[_,E]=k.useState("#F05A30"),[S,T]=k.useState("");k.useEffect(()=>{(async()=>{if(t)try{const B=await t.getStageData(e);s(B.currentStage),a(B.allStages),r(!0)}catch(B){console.error("Failed to load stage data:",B),s({stageName:"DEFAULT",color:"#F05A30"}),a([{stageName:"DEFAULT",color:"#F05A30"}]),r(!0)}})()},[t,e]);const A=async(j,B)=>{t&&(await t.setCurrentStage(e,j,B),s({stageName:j,color:B}))},R=j=>{u(j),d(o[j].stageName),h(o[j].color),m("")},I=async j=>{if(t){await t.updateStageColor(e,j,f);const B=await t.getStageData(e);s(B.currentStage),a(B.allStages),u(null),m("")}},P=()=>{u(null),d(""),h("#F05A30"),m("")},N=()=>{y(!0),b(""),E("#F05A30"),T("")},M=async()=>{if(!v.trim()){T("Stage name cannot be empty");return}const j=v.trim(),B=j.toLowerCase();if(B==="n/a"){T('Stage name "N/A" is reserved and cannot be used');return}if(B==="all"){T('Stage name "ALL" is reserved and cannot be used');return}if(B==="default"){T('Stage name "DEFAULT" is reserved and cannot be used');return}if(o.some(H=>H.stageName===j)){T("A stage with this name already exists");return}if(T(""),t){await t.setCurrentStage(e,j,_);const H=await t.getStageData(e);s(H.currentStage),a(H.allStages),y(!1),b(""),E("#F05A30")}},O=()=>{y(!1),b(""),E("#F05A30"),T("")};return n?w.jsxs(Gn,{children:[w.jsx(Pn,{justify:"space-between",mb:"md",children:!g&&w.jsx(Yt,{size:"sm",onClick:N,children:"Add New Stage"})}),w.jsxs(In,{striped:!0,highlightOnHover:!0,withTableBorder:!0,children:[w.jsx(In.Thead,{children:w.jsxs(In.Tr,{children:[w.jsx(In.Th,{style:{width:"80px",whiteSpace:"nowrap"},children:"Current"}),w.jsx(In.Th,{children:"Stage Name"}),w.jsx(In.Th,{style:{width:"200px"},children:"Color"}),w.jsx(In.Th,{style:{width:"80px",whiteSpace:"nowrap"},children:"Edit"})]})}),w.jsxs(In.Tbody,{children:[o.map((j,B)=>w.jsxs(In.Tr,{children:[w.jsx(In.Td,{children:w.jsx(Tl,{checked:i.stageName===j.stageName,onChange:()=>A(j.stageName,j.color)})}),w.jsx(In.Td,{children:l===B?w.jsx(iu,{value:c,onChange:H=>d(H.currentTarget.value),error:p,size:"xs",disabled:!0}):w.jsx(He,{size:"sm",children:j.stageName})}),w.jsx(In.Td,{children:l===B?w.jsx(a6,{value:f,onChange:h,size:"xs"}):w.jsxs(Pn,{gap:"xs",children:[w.jsx("div",{style:{width:20,height:20,backgroundColor:j.color,border:"1px solid #dee2e6",borderRadius:4}}),w.jsx(He,{size:"sm",c:"dimmed",children:j.color})]})}),w.jsx(In.Td,{children:l===B?w.jsxs(Pn,{gap:"xs",children:[w.jsx(Rn,{size:"sm",color:"green",onClick:()=>I(j.stageName),children:w.jsx(mv,{size:16})}),w.jsx(Rn,{size:"sm",color:"gray",onClick:P,children:w.jsx(Wg,{size:16})})]}):w.jsx(Rn,{size:"sm",onClick:()=>R(B),children:w.jsx(g6,{size:16})})})]},j.stageName)),g&&w.jsxs(In.Tr,{style:{backgroundColor:"#f8f9fa"},children:[w.jsx(In.Td,{}),w.jsx(In.Td,{children:w.jsx(iu,{placeholder:"Enter stage name",value:v,onChange:j=>b(j.currentTarget.value),error:S,size:"xs"})}),w.jsx(In.Td,{children:w.jsx(a6,{value:_,onChange:E,size:"xs"})}),w.jsx(In.Td,{children:w.jsxs(Pn,{gap:"xs",children:[w.jsx(Rn,{size:"sm",color:"green",onClick:M,children:w.jsx(mv,{size:16})}),w.jsx(Rn,{size:"sm",color:"gray",onClick:O,children:w.jsx(Wg,{size:16})})]})})]})]})]}),p&&w.jsx(He,{size:"sm",c:"red",mt:"xs",children:"Note: Stage names cannot be changed, only colors can be edited."})]}):w.jsxs(Gn,{align:"center",p:"md",children:[w.jsx(td,{size:"sm"}),w.jsx(He,{size:"sm",c:"dimmed",children:"Loading stage data..."})]})}function H1n({studyId:e,refresh:t}){return w.jsx(w0,{children:w.jsxs(Fo,{multiple:!0,variant:"contained",children:[w.jsxs(Fo.Item,{value:"ReVISit Modes",children:[w.jsx(Fo.Control,{children:w.jsx(ri,{order:5,children:"ReVISit Modes"})}),w.jsx(Fo.Panel,{children:w.jsx(V1n,{studyId:e})})]},"modes"),w.jsxs(Fo.Item,{value:"Stage Management",children:[w.jsx(Fo.Control,{children:w.jsx(ri,{order:5,children:"Stage Management"})}),w.jsx(Fo.Panel,{children:w.jsx(U1n,{studyId:e})})]},"stageManagement"),w.jsxs(Fo.Item,{value:"Data Management",children:[w.jsx(Fo.Control,{children:w.jsx(ri,{order:5,children:"Data Management"})}),w.jsx(Fo.Panel,{children:w.jsx(z1n,{studyId:e,refresh:t})})]},"dataManagement")]})})}function q1n(e){const[t,n]=k.useState(!1),[r,i]=k.useState(!1);return k.useEffect(()=>{if(!e){n(!1),i(!1);return}const{recordAudio:s,recordScreen:o}=e.uiConfig,a=Object.keys(e.components).map(l=>lu(e.components[l],e));n(s||a.some(l=>l.recordAudio)),i(o||a.some(l=>l.recordScreen))},[e]),{hasAudioRecording:t,hasScreenRecording:r}}function W1n({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,onTextChange:l,deleteRowCallback:u,addRowCallback:c,onSelectTags:d,addRef:f,index:h,editTagCallback:p,createTagCallback:m,onClickLine:g}){const[y,v]=k.useState(e),b=k.useRef(0);k.useEffect(()=>{b.current=h},[h]);const[_,{width:E}]=nh();return k.useMemo(()=>w.jsxs(Ss,{style:{width:"100%"},children:[w.jsx(Ss.Col,{span:8,children:w.jsx(Pn,{wrap:"nowrap",gap:0,px:10,style:{width:"100%",borderRadius:"10px",backgroundColor:r>=n&&r<=i?"rgba(100, 149, 237, 0.3)":"white"},children:w.jsx(Dk,{ref:T=>T?f(b.current,T):void 0,autosize:!0,minRows:1,maxRows:4,style:{width:"100%"},variant:"unstyled",value:s,onFocus:()=>g(b.current),onChange:T=>{l(b.current,T.currentTarget.value)},onKeyDown:(T=>{T.key==="Enter"&&T.currentTarget.selectionStart!==null?(c(b.current,T.currentTarget.selectionStart),T.preventDefault(),T.stopPropagation()):T.key==="Backspace"&&T.currentTarget.selectionStart===0&&T.currentTarget.selectionEnd===0&&(u(b.current),T.preventDefault(),T.stopPropagation())})})})}),w.jsx(Ss.Col,{ref:_,span:2,children:w.jsx(rQ,{width:E-20,createTagCallback:m,editTagCallback:p,onSelectTags:T=>d(b.current,T),selectedTags:a,tags:o,tagsEmptyText:"Add Text Tags"})}),w.jsx(Ss.Col,{span:2,children:w.jsx(Dk,{autosize:!0,style:{width:E-20},minRows:1,maxRows:4,value:y,onChange:T=>v(T.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(b.current,y)})})]}),[f,c,y,m,r,u,p,i,g,d,l,_,a,t,n,o,s,E])}async function G1n(e){if(e){const t=await e.getTags("text");return Array.isArray(t)?t:[]}return[]}function Y1n({currentShownTranscription:e,transcriptList:t,setTranscriptList:n,onClickLine:r}){const{storageEngine:i}=Vi(),{value:s,execute:o}=Qf(G1n,[i]),a=k.useCallback(v=>{i&&i.saveTags(v,"text").then(()=>o(i))},[o,i]),l=k.useRef([]),u=fg((v,b)=>{const _=[...t];_[v].text=b,n(_)}),c=fg((v,b)=>{const _=[...t];_[v].selectedTags=b,n(_)}),d=fg((v,b)=>{const _=[...t];_[v].annotation=b,n(_)}),f=fg(v=>{if(v===0)return;const b=structuredClone(t);b[v-1].text=t[v-1].text+t[v].text,b[v-1].transcriptMappingEnd=t[v].transcriptMappingEnd,b[v-1].selectedTags=[...t[v-1].selectedTags,...t[v].selectedTags.filter(_=>!t[v-1].selectedTags.find(E=>E.id===_.id))],b.splice(v,1),b.filter(_=>_.transcriptMappingStart===b[v-1].transcriptMappingStart).forEach(_=>{_.transcriptMappingEnd=b[v-1].transcriptMappingEnd}),n(b),setTimeout(()=>{l.current[v-1].focus(),l.current[v-1].setSelectionRange(t[v-1].text.length,t[v-1].text.length,"none")},1)}),h=fg((v,b)=>{const _=structuredClone(t),E=_[v];_.splice(v+1,0,{transcriptMappingEnd:E.transcriptMappingEnd,transcriptMappingStart:E.transcriptMappingStart,text:E.text.slice(b),selectedTags:E.selectedTags,annotation:""}),_[v].text=_[v].text.slice(0,b),n(_),setTimeout(()=>{l.current[v+1].focus(),l.current[v+1].setSelectionRange(0,0)},1)}),p=k.useCallback((v,b)=>{if(!s)return;const _=s.findIndex(S=>S.id===v.id),E=Array.from(s);E[_]=b,a(E)},[a,s]),m=k.useCallback(v=>{a([...s||[],v])},[a,s]),g=k.useCallback((v,b)=>{l.current[v]=b},[]),y=k.useMemo(()=>t.map((v,b)=>w.jsx(W1n,{onClickLine:r,editTagCallback:p,createTagCallback:m,annotation:v.annotation,setAnnotation:d,addRef:g,onSelectTags:c,addRowCallback:h,deleteRowCallback:f,onTextChange:u,tags:s||[],selectedTags:v.selectedTags,text:v.text,index:b,start:v.transcriptMappingStart,end:v.transcriptMappingEnd,current:e===null?0:e},b)),[h,c,g,m,e,f,p,r,d,s,u,t]);return w.jsxs(Gn,{gap:0,children:[w.jsxs(Ss,{style:{width:"100%"},mb:"sm",children:[w.jsx(Ss.Col,{span:8,children:w.jsx(He,{fw:700,size:"xl",children:"Transcripts"})}),w.jsx(Ss.Col,{span:2,children:w.jsxs(Pn,{gap:"xs",align:"center",children:[w.jsx(He,{fw:700,size:"xl",children:"Text Tags"}),w.jsx(bt,{w:300,multiline:!0,label:"Text tags allow you to categorize segments of text. Click in the box to add, create, or edit tags.",children:w.jsx(qg,{size:16})})]})}),w.jsx(Ss.Col,{span:2,children:w.jsxs(Pn,{gap:"xs",align:"center",children:[w.jsx(He,{fw:700,size:"xl",children:"Annotations"}),w.jsx(bt,{w:300,multiline:!0,label:"Annotations allow you to add additional context or notes to segments of text.",children:w.jsx(qg,{size:16})})]})})]}),w.jsx(Gn,{gap:5,children:y})]})}async function K1n(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}function X1n(e,t){return t?t.getParticipantData(e):null}function Q1n(e,t,n,r){return e&&r?e.getTranscription(t,n).then(i=>!i||!i.results?null:{results:i.results.map(o=>({...o,resultEndTime:+o.resultEndTime.split("s")[0]})).flat()}):null}function J1n({visibleParticipants:e,storageEngine:t}){const n=t1(),[r,i]=nd(),[s,o]=k.useState(0),a=k.useMemo(()=>r.get("currentTrial")||"",[r]),l=k.useMemo(()=>r.get("participantId")||"",[r]),[u,c]=k.useState(0),{value:d}=Qf(X1n,[l,t]),{studyId:f}=So(),[h,p]=k.useState(),[m,{width:g}]=nh(),[y,v]=k.useState([]),{value:b,status:_}=Qf(Q1n,[t,a,l,f]),E=k.useMemo(()=>t&&l&&a?_d(P=>t.saveEditedTranscript(l,n.user.user?.email||"temp",a,P),1e3,{maxWait:5e3}):P=>null,[a,n.user.user?.email,t,l]);k.useEffect(()=>{!a&&!l&&e.length>0&&i({participantId:e[0].participantId,currentTrial:Object.entries(e[0].answers).find(([P,N])=>+N.trialOrder.split("_")[0]==0)?.[0]||""})},[]);const S=k.useCallback(P=>{v(P),E(P)},[E]),{value:T,status:A}=Qf(K1n,[t,l,a,n.user.user?.email||"temp"]);k.useEffect(()=>{v(T&&A==="success"?T:[])},[T,A]);const R=fg(P=>{if(b&&u!==null&&d&&P>0){let N=u;const M=a?d.answers[a].startTime:d.answers.audioTest.startTime,O=Math.abs(P-M)/1e3;if(O>b.results[N].resultEndTime){for(;O>b.results[N].resultEndTime;)if(N+=1,N>b.results.length-1){N=b.results.length-1;break}}else if(N>0&&O<b.results[N-1].resultEndTime)for(;N>0&&O<b.results[N-1].resultEndTime;)N-=1;if(u===N)return;c(N)}});k.useEffect(()=>{A==="success"&&(!T||T.length===0)&&_==="success"&&b&&S(b.results.map((P,N)=>({transcriptMappingStart:N,transcriptMappingEnd:N,text:P.alternatives[0].transcript?.trim()||"",selectedTags:[],annotation:""})))},[n.user.user?.email,a,T,l,b,_,S,t,A]);const I=k.useCallback(P=>{const N=y[P].transcriptMappingStart;o(N)},[y]);return k.useEffect(()=>{o(0)},[l,a]),w.jsx(Pn,{wrap:"nowrap",gap:25,children:w.jsxs(Gn,{ref:m,style:{width:"100%"},gap:10,children:[!l||!a?w.jsx(Ko,{children:w.jsx(He,{c:"dimmed",size:"24",children:"Select a Participant and Trial to Analyze"})}):!h||_==="success"&&b===null?w.jsx(Ko,{children:w.jsx(He,{c:"dimmed",size:"24",children:"No transcripts found for this task"})}):w.jsx(Gn,{children:w.jsx(Y1n,{onClickLine:I,transcriptList:y,setTranscriptList:S,currentShownTranscription:u})}),w.jsx(xVe,{setHasAudio:p,saveProvenance:()=>null,studyId:f||"",jumpedToLine:s,editedTranscript:y,currentTrial:a,isReplay:!1,visibleParticipants:e.map(P=>P.participantId),rawTranscript:b,onTimeUpdate:R,currentShownTranscription:u,width:g,storageEngine:t})]})})}const Z1n=37;function ebn(e,t){const n=Object.values(e.answers).map(i=>i.startTime).filter(i=>i!==void 0).sort(),r=Object.values(t.answers).map(i=>i.startTime).filter(i=>i!==void 0).sort();return n.length===0||r.length===0?n.length>0?-1:r.length>0?1:t.participantIndex-e.participantIndex:r[0]-n[0]}async function tbn(e,t,n){return n&&t&&await t.initializeStudyDb(n),!e||!t||!n?[]:await t.getAllParticipantsData(n)}function nbn({globalConfig:e}){const{studyId:t}=So(),[n,r]=k.useState(void 0),[i,s]=k.useState(["completed","inprogress","rejected"]),[o,a]=k.useState(["ALL"]),[l,u]=k.useState([{value:"ALL",label:"ALL"}]),[c,d]=k.useState({}),[f,h]=k.useState([]),{hasAudioRecording:p,hasScreenRecording:m}=q1n(n),{storageEngine:g}=Vi(),y=$l(),{analysisTab:v}=So(),{user:b}=t1(),[_,{width:E}]=nh(),{value:S,execute:T,status:A}=Qf(tbn,[n,g,t]),R=k.useMemo(()=>{if(!S)return{completed:0,inprogress:0,rejected:0};const M=Object.values(S),O=o.includes("ALL")?M:M.filter(j=>o.includes(j.stage||""));return{completed:O.filter(j=>!j.rejected&&j.completed).length,inprogress:O.filter(j=>!j.rejected&&!j.completed).length,rejected:O.filter(j=>j.rejected).length}},[S,o]),I=k.useMemo(()=>f.length===0?{completed:0,inprogress:0,rejected:0}:{completed:f.filter(M=>!M.rejected&&M.completed).length,inprogress:f.filter(M=>!M.rejected&&!M.completed).length,rejected:f.filter(M=>M.rejected).length},[f]),P=k.useMemo(()=>{if(!S)return[];const M=Object.values(S),O=i.includes("completed")?M.filter(G=>!G.rejected&&G.completed):[],j=i.includes("inprogress")?M.filter(G=>!G.rejected&&!G.completed):[],B=i.includes("rejected")?M.filter(G=>G.rejected):[],H=[...O,...j,...B];return(o.includes("ALL")?H:H.filter(G=>o.includes(G.stage||""))).sort(ebn)},[S,i,o]),N=k.useCallback(async()=>{if(!(!t||!g))try{const M=await g.getStageData(t),O=M.allStages.map(B=>({value:B.stageName,label:B.stageName}));u([{value:"ALL",label:"ALL"},...O]);const j={};M.allStages.forEach(B=>{j[B.stageName]=B.color}),d(j)}catch(M){console.error("Failed to load stages:",M),u([{value:"ALL",label:"ALL"}]),d({})}},[t,g]);return k.useEffect(()=>{N(),h([])},[N,v]),k.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const M=async O=>{if(O.data.type==="revisitWidget/CONFIG"&&g){const j=await ble(O.data.payload);r(j)}};return window.addEventListener("message",M),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",M)}}return wle(t,e).then(M=>{M&&r(M)}),()=>{}},[t,e,g]),w.jsxs(w.Fragment,{children:[w.jsx(NM,{studyIds:e.configsList}),w.jsx(ps.Main,{style:{height:"100dvh"},children:w.jsxs(Gn,{ref:_,style:{height:"100%",maxHeight:"100dvh",overflow:"hidden"},justify:"space-between",children:[w.jsxs(Rt,{direction:"row",align:"center",justify:"space-between",children:[w.jsxs(Rt,{direction:"row",align:"center",gap:"md",children:[w.jsx(ri,{order:5,mr:"sm",children:t}),n&&w.jsx(RHe,{visibleParticipants:f.length>0?f:P,studyId:t||"",gap:"10px",hasAudio:p,hasScreenRecording:m})]}),w.jsxs(Rt,{direction:"row",align:"center",children:[w.jsx(He,{size:"sm",fw:500,children:"Stage:"}),w.jsx(tS,{data:l,value:o,onChange:M=>{M.includes("ALL")&&!o.includes("ALL")?a(["ALL"]):M.includes("ALL")&&o.includes("ALL")?a(M.filter(O=>O!=="ALL")):M.length===0?a(["ALL"]):a(M)},w:250,size:"sm",clearable:!1,maxValues:5,styles:{input:{minHeight:"36px"}},mx:"sm"}),w.jsx(He,{mt:-2,size:"sm",children:"Participants: "}),w.jsx(_l.Group,{value:i,onChange:M=>s(M),mb:"xs",mt:8,ml:"xs",children:w.jsxs(Pn,{children:[w.jsx(_l,{value:"completed",label:f.length>0?`Completed (${I.completed} of ${R.completed})`:`Completed (${R.completed})`}),w.jsx(_l,{value:"inprogress",label:f.length>0?`In Progress (${I.inprogress} of ${R.inprogress})`:`In Progress (${R.inprogress})`}),w.jsx(_l,{value:"rejected",label:f.length>0?`Rejected (${I.rejected} of ${R.rejected})`:`Rejected (${R.rejected})`})]})})]})]}),w.jsx(hu,{visible:A==="pending"}),A==="success"?w.jsxs(wr,{style:{flexGrow:1,display:"flex",flexDirection:"column",overflow:"hidden"},keepMounted:!1,variant:"outline",value:v,onChange:M=>y(`/analysis/stats/${t}/${M}`),children:[w.jsxs(wr.List,{children:[w.jsx(wr.Tab,{value:"summary",leftSection:w.jsx($lt,{size:16}),children:"Study Summary"}),w.jsx(wr.Tab,{value:"table",leftSection:w.jsx(Mct,{size:16}),children:"Participant View"}),w.jsx(wr.Tab,{value:"stats",leftSection:w.jsx(Dlt,{size:16}),children:"Trial Stats"}),w.jsx(wr.Tab,{value:"tagging",leftSection:w.jsx(Fct,{size:16}),children:"Coding"}),g?.getEngine()==="firebase"&&w.jsx(wr.Tab,{value:"live-monitor",leftSection:w.jsx(sut,{size:16}),children:"Live Monitor"}),w.jsx(wr.Tab,{value:"manage",leftSection:w.jsx(SIe,{size:16}),disabled:!b.isAdmin,children:"Manage"})]}),w.jsx(wr.Panel,{style:{overflow:"auto"},value:"summary",pt:"xs",children:n&&w.jsx(k1n,{studyConfig:n,visibleParticipants:P})}),w.jsx(wr.Panel,{style:{height:`calc(100% - ${Z1n}px)`},value:"table",pt:"xs",children:n&&w.jsx(F1n,{width:E,stageColors:c,visibleParticipants:P,studyConfig:n,refresh:()=>T(n,g,t),selectedParticipants:f,onSelectionChange:h})}),w.jsx(wr.Panel,{style:{overflow:"auto"},value:"stats",pt:"xs",children:n&&w.jsx(B1n,{studyConfig:n,visibleParticipants:P})}),w.jsx(wr.Panel,{value:"tagging",pt:"xs",children:n&&g?.getEngine()==="firebase"?w.jsx(J1n,{visibleParticipants:P,storageEngine:g}):w.jsx(Ko,{children:"Think aloud coding is only available when using Firebase."})}),g?.getEngine()==="firebase"&&w.jsx(wr.Panel,{style:{overflow:"auto"},value:"live-monitor",pt:"xs",children:n&&w.jsx(Egn,{studyConfig:n,storageEngine:g,studyId:t,includedParticipants:i,selectedStages:o})}),w.jsx(wr.Panel,{value:"manage",pt:"xs",children:t&&b.isAdmin?w.jsx(H1n,{studyId:t,refresh:()=>T(n,g,t)}):w.jsx(w0,{mt:20,children:w.jsx(Bd,{title:"Unauthorized Access",variant:"light",color:"red",icon:w.jsx(qg,{}),children:"You are not authorized to manage the data for this study."})})})]}):null]})})]})}function FCe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=t1(),{storageEngine:o}=Vi(),[a,l]=k.useState(!1),u=So();return k.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&u[t]){const d=await n(u[t]);d&&l(d)}else l(!0);if(a)try{r&&await i(r)||s()}catch(d){s(),console.warn(d)}})()},[r.isAdmin,a]),r.determiningStatus||!o?w.jsx(hu,{visible:r.determiningStatus||!o?.getEngine()}):a&&!r.isAdmin&&!r.determiningStatus?w.jsx(nee,{to:"/login"}):w.jsx(w.Fragment,{children:e})}async function DHe(e,t){if(e&&Ad(e)){t(!0);try{return await e.login()}catch(n){bI({title:"Error",message:n.message,color:"red"})}finally{t(!1)}}return null}function rbn(){const{user:e}=t1(),[t,n]=k.useState(!1),{storageEngine:r}=Vi();k.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&bI({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]);const i=k.useMemo(()=>r?.getEngine(),[r]);return!e.determiningStatus&&e.isAdmin?w.jsx(nee,{to:"/"}):w.jsx(w0,{children:w.jsx(Zv,{padding:"lg",children:w.jsxs(Rt,{align:"center",direction:"column",justify:"center",children:[w.jsx(x0,{maw:200,mt:50,mb:100,src:`${as}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsxs(w.Fragment,{children:[w.jsxs(He,{mb:20,children:["To access admin settings, please sign in using"," ",i==="supabase"?" Supabase":" Google","."]}),w.jsxs(Yt,{onClick:()=>DHe(r,n),leftSection:i==="supabase"?w.jsx(aee,{}):w.jsx(Wct,{}),variant:"filled",children:["Sign In With"," ",i==="supabase"?"Supabase":" Google "]})]}),w.jsx(hu,{visible:t})]})})})}function ibn(){const{user:e,triggerAuth:t,logout:n}=t1(),{storageEngine:r}=Vi(),[i,s]=k.useState(!1),[o,a]=k.useState([]),[l,u]=k.useState(!1),[c,d]=k.useState(!1),[f,h]=k.useState(!1),[p,m]=k.useState(!1),[g,y]=k.useState(!1),[v,b]=k.useState(""),[_,E]=k.useState(null),S=F6e({initialValues:{email:""},validate:{email:YFt("Invalid email")}});k.useEffect(()=>{(async()=>{if(u(!0),r&&Ad(r)){const O=await r?.getUserManagementData("authentication");s(O?.isEnabled||!1);const j=await r?.getUserManagementData("adminUsers");j&&j.adminUsersList&&a(j?.adminUsersList.map(B=>B.email).filter(B=>B!==null))}else s(!1);u(!1)})()},[r]);const T=async()=>{if(u(!0),r&&Ad(r)){if(r.getEngine()==="supabase"){const{data:O}=await r.getSession();if(O.session&&O.session.user&&O.session.user.email){E({email:O.session.user.email,uid:O.session.user.id}),m(!0),u(!1);return}}const M=await DHe(r,u);M&&M.email?(E({email:M.email,uid:M.uid}),m(!0)):y(!0)}u(!1)},A=async M=>{u(!0),r&&Ad(r)&&M&&(await r.changeAuth(!0),await r.addAdminUser(M),a([M.email]),s(!0),t()),m(!1),u(!1)},R=async()=>{if(u(!0),r&&Ad(r)){await r.addAdminUser({email:S.values.email,uid:null});const M=await r.getUserManagementData("adminUsers");a(M?.adminUsersList.map(O=>O.email).filter(O=>O!==null)||[])}u(!1),d(!1),S.setValues({email:""})},I=M=>{h(!0),b(M)},P=async()=>{if(u(!0),r&&Ad(r)){await r.removeAdminUser(v);const M=await r.getUserManagementData("adminUsers");a(M?.adminUsersList.map(O=>O.email).filter(O=>O!==null)||[])}h(!1),u(!1)},N=k.useMemo(()=>r&&Ad(r),[r]);return w.jsxs(w.Fragment,{children:[w.jsx(w0,{children:w.jsxs(Zv,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[w.jsx(ri,{mb:20,order:3,children:"Authentication"}),i?w.jsx(Rt,{children:w.jsx(He,{children:"Authentication is enabled."})}):w.jsxs(Rt,{justify:"space-between",children:[w.jsx(De,{children:w.jsx(He,{children:"Authentication is currently disabled."})}),w.jsx(bt,{label:"You can only enable auth when using a cloud storage engine (Firebase/Supabase)",disabled:N,children:w.jsx(Yt,{onClick:M=>N?T():M.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),i?w.jsxs(Rt,{mt:40,direction:"column",children:[w.jsxs(Rt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[w.jsx(ri,{order:6,children:"Enabled Users"}),w.jsx(uee,{style:{cursor:"pointer"},onClick:()=>d(!0)})]}),o.length>0?o.map(M=>w.jsxs(Rt,{justify:"space-between",mb:10,children:[w.jsx(He,{children:M}),M===e.user?.email?w.jsx(He,{color:"blue",size:"xs",children:"You"}):w.jsx(Rn,{variant:"subtle",onClick:()=>I(M),children:w.jsx(AIe,{color:"red"})})]},M)):null,w.jsx(Rt,{direction:"row",justify:"left",children:w.jsx(Yt,{onClick:()=>n(),mt:20,children:"Log out"})})]}):null]})}),w.jsx(Fi,{opened:c,onClose:()=>d(!1),title:"Add Admin User",children:w.jsxs(De,{component:"form",onSubmit:S.onSubmit(()=>R()),children:[w.jsx(iu,{leftSection:w.jsx(hlt,{}),placeholder:"User Email Address",...S.getInputProps("email")}),w.jsxs(Rt,{mt:30,justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),w.jsx(Yt,{type:"submit",children:"Save"})]})]})}),w.jsxs(Fi,{opened:f,size:"large",onClose:()=>h(!1),title:w.jsxs(He,{fw:700,children:["Remove",v,"?"]}),children:[w.jsxs(He,{mt:40,children:["Are you sure you want to remove",w.jsx("b",{children:v})," ","as an administrator?"]}),w.jsxs(Rt,{mt:40,justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"red",onClick:()=>h(!1),children:"Cancel"}),w.jsx(Yt,{onClick:()=>P(),children:"Yes, I'm sure."})]})]}),w.jsxs(Fi,{opened:p,size:"md",onClose:()=>m(!1),title:w.jsx(He,{fw:700,children:"Enable Authentication?"}),children:[w.jsxs(He,{mt:40,children:["User"," ",w.jsx("b",{children:_?.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),w.jsxs(Rt,{mt:40,justify:"right",children:[w.jsx(Yt,{mr:5,variant:"subtle",color:"red",onClick:()=>m(!1),children:"Cancel"}),w.jsx(Yt,{onClick:()=>A(_),children:"Yes, I'm sure."})]})]}),w.jsxs(Fi,{opened:g,size:"md",onClose:()=>y(!1),title:w.jsx(He,{fw:700,children:"An Error Occurred."}),children:[w.jsxs(He,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",w.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),w.jsx(Rt,{mt:40,justify:"right",children:w.jsx(Yt,{mr:5,onClick:()=>y(!1),children:"Okay"})})]}),w.jsx(hu,{visible:l})]})}var Zq={exports:{}};var LCe;function sbn(){return LCe||(LCe=1,(function(e,t){(function(n){e.exports=n()})(function(){return(function n(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var d=typeof bg=="function"&&bg;if(!c&&d)return d(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){var m=r[u][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof bg=="function"&&bg,l=0;l<s.length;l++)o(s[l]);return o})({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(p),c=s.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var f,h=[];function p(){f=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}f=!1}r.exports=m;function m(g){h.push(g)===1&&!f&&a()}}).call(this,typeof $i<"u"?$i:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=d;function d(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}d.prototype.catch=function(E){return this.then(null,E)},d.prototype.then=function(E,S){if(typeof E!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var T=new this.constructor(o);if(this.state!==c){var A=this.state===u?E:S;h(T,A,this.outcome)}else this.queue.push(new f(T,E,S));return T};function f(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},f.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},f.prototype.callRejected=function(E){a.reject(this.promise,E)},f.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){s(function(){var A;try{A=S(T)}catch(R){return a.reject(E,R)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var A=T.value;if(A)m(E,A);else{E.state=u,E.outcome=S;for(var R=-1,I=E.queue.length;++R<I;)E.queue[R].callFulfilled(S)}return E},a.reject=function(E,S){E.state=l,E.outcome=S;for(var T=-1,A=E.queue.length;++T<A;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function A(N){T||(T=!0,a.reject(E,N))}function R(N){T||(T=!0,a.resolve(E,N))}function I(){S(R,A)}var P=g(I);P.status==="error"&&A(P.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(A){T.status="error",T.value=A}return T}d.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}d.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}d.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var R=new Array(T),I=0,P=-1,N=new this(o);++P<T;)M(E[P],P);return N;function M(O,j){S.resolve(O).then(B,function(H){A||(A=!0,a.reject(N,H))});function B(H){R[j]=H,++I===T&&!A&&(A=!0,a.resolve(N,R))}}}d.race=_;function _(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var R=-1,I=new this(o);++R<T;)P(E[R]);return I;function P(N){S.resolve(N).then(function(M){A||(A=!0,a.resolve(I,M))},function(M){A||(A=!0,a.reject(I,M))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof $i<"u"?$i:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge};function o(ge,Ne){if(!(ge instanceof Ne))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var ge=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Ne=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ge||Ne)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ge,Ne){ge=ge||[],Ne=Ne||{};try{return new Blob(ge,Ne)}catch(Le){if(Le.name!=="TypeError")throw Le;for(var _e=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Be=new _e,Ue=0;Ue<ge.length;Ue+=1)Be.append(ge[Ue]);return Be.getBlob(Ne.type)}}typeof Promise>"u"&&n(3);var d=Promise;function f(ge,Ne){Ne&&ge.then(function(_e){Ne(null,_e)},function(_e){Ne(_e)})}function h(ge,Ne,_e){typeof Ne=="function"&&ge.then(Ne),typeof _e=="function"&&ge.catch(_e)}function p(ge){return typeof ge!="string"&&(console.warn(ge+" used as a key, but it is not a string."),ge=String(ge)),ge}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,_="readonly",E="readwrite";function S(ge){for(var Ne=ge.length,_e=new ArrayBuffer(Ne),Be=new Uint8Array(_e),Ue=0;Ue<Ne;Ue++)Be[Ue]=ge.charCodeAt(Ue);return _e}function T(ge){return new d(function(Ne){var _e=ge.transaction(g,E),Be=c([""]);_e.objectStore(g).put(Be,"key"),_e.onabort=function(Ue){Ue.preventDefault(),Ue.stopPropagation(),Ne(!1)},_e.oncomplete=function(){var Ue=navigator.userAgent.match(/Chrome\/(\d+)/),Le=navigator.userAgent.match(/Edge\//);Ne(Le||!Ue||parseInt(Ue[1],10)>=43)}}).catch(function(){return!1})}function A(ge){return typeof y=="boolean"?d.resolve(y):T(ge).then(function(Ne){return y=Ne,y})}function R(ge){var Ne=v[ge.name],_e={};_e.promise=new d(function(Be,Ue){_e.resolve=Be,_e.reject=Ue}),Ne.deferredOperations.push(_e),Ne.dbReady?Ne.dbReady=Ne.dbReady.then(function(){return _e.promise}):Ne.dbReady=_e.promise}function I(ge){var Ne=v[ge.name],_e=Ne.deferredOperations.pop();if(_e)return _e.resolve(),_e.promise}function P(ge,Ne){var _e=v[ge.name],Be=_e.deferredOperations.pop();if(Be)return Be.reject(Ne),Be.promise}function N(ge,Ne){return new d(function(_e,Be){if(v[ge.name]=v[ge.name]||z(),ge.db)if(Ne)R(ge),ge.db.close();else return _e(ge.db);var Ue=[ge.name];Ne&&Ue.push(ge.version);var Le=l.open.apply(l,Ue);Ne&&(Le.onupgradeneeded=function(rt){var ft=Le.result;try{ft.createObjectStore(ge.storeName),rt.oldVersion<=1&&ft.createObjectStore(g)}catch(gt){if(gt.name==="ConstraintError")console.warn('The database "'+ge.name+'" has been upgraded from version '+rt.oldVersion+" to version "+rt.newVersion+', but the storage "'+ge.storeName+'" already exists.');else throw gt}}),Le.onerror=function(rt){rt.preventDefault(),Be(Le.error)},Le.onsuccess=function(){var rt=Le.result;rt.onversionchange=function(ft){ft.target.close()},_e(rt),I(ge)}})}function M(ge){return N(ge,!1)}function O(ge){return N(ge,!0)}function j(ge,Ne){if(!ge.db)return!0;var _e=!ge.db.objectStoreNames.contains(ge.storeName),Be=ge.version<ge.db.version,Ue=ge.version>ge.db.version;if(Be&&(ge.version!==Ne&&console.warn('The database "'+ge.name+`" can't be downgraded from version `+ge.db.version+" to version "+ge.version+"."),ge.version=ge.db.version),Ue||_e){if(_e){var Le=ge.db.version+1;Le>ge.version&&(ge.version=Le)}return!0}return!1}function B(ge){return new d(function(Ne,_e){var Be=new FileReader;Be.onerror=_e,Be.onloadend=function(Ue){var Le=btoa(Ue.target.result||"");Ne({__local_forage_encoded_blob:!0,data:Le,type:ge.type})},Be.readAsBinaryString(ge)})}function H(ge){var Ne=S(atob(ge.data));return c([Ne],{type:ge.type})}function q(ge){return ge&&ge.__local_forage_encoded_blob}function G(ge){var Ne=this,_e=Ne._initReady().then(function(){var Be=v[Ne._dbInfo.name];if(Be&&Be.dbReady)return Be.dbReady});return h(_e,ge,ge),_e}function U(ge){R(ge);for(var Ne=v[ge.name],_e=Ne.forages,Be=0;Be<_e.length;Be++){var Ue=_e[Be];Ue._dbInfo.db&&(Ue._dbInfo.db.close(),Ue._dbInfo.db=null)}return ge.db=null,M(ge).then(function(Le){return ge.db=Le,j(ge)?O(ge):Le}).then(function(Le){ge.db=Ne.db=Le;for(var rt=0;rt<_e.length;rt++)_e[rt]._dbInfo.db=Le}).catch(function(Le){throw P(ge,Le),Le})}function L(ge,Ne,_e,Be){Be===void 0&&(Be=1);try{var Ue=ge.db.transaction(ge.storeName,Ne);_e(null,Ue)}catch(Le){if(Be>0&&(!ge.db||Le.name==="InvalidStateError"||Le.name==="NotFoundError"))return d.resolve().then(function(){if(!ge.db||Le.name==="NotFoundError"&&!ge.db.objectStoreNames.contains(ge.storeName)&&ge.version<=ge.db.version)return ge.db&&(ge.version=ge.db.version+1),O(ge)}).then(function(){return U(ge).then(function(){L(ge,Ne,_e,Be-1)})}).catch(_e);_e(Le)}}function z(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(ge){var Ne=this,_e={db:null};if(ge)for(var Be in ge)_e[Be]=ge[Be];var Ue=v[_e.name];Ue||(Ue=z(),v[_e.name]=Ue),Ue.forages.push(Ne),Ne._initReady||(Ne._initReady=Ne.ready,Ne.ready=G);var Le=[];function rt(){return d.resolve()}for(var ft=0;ft<Ue.forages.length;ft++){var gt=Ue.forages[ft];gt!==Ne&&Le.push(gt._initReady().catch(rt))}var ht=Ue.forages.slice(0);return d.all(Le).then(function(){return _e.db=Ue.db,M(_e)}).then(function(Tt){return _e.db=Tt,j(_e,Ne._defaultConfig.version)?O(_e):Tt}).then(function(Tt){_e.db=Ue.db=Tt,Ne._dbInfo=_e;for(var Gt=0;Gt<ht.length;Gt++){var Vn=ht[Gt];Vn!==Ne&&(Vn._dbInfo.db=_e.db,Vn._dbInfo.version=_e.version)}})}function Y(ge,Ne){var _e=this;ge=p(ge);var Be=new d(function(Ue,Le){_e.ready().then(function(){L(_e._dbInfo,_,function(rt,ft){if(rt)return Le(rt);try{var gt=ft.objectStore(_e._dbInfo.storeName),ht=gt.get(ge);ht.onsuccess=function(){var Tt=ht.result;Tt===void 0&&(Tt=null),q(Tt)&&(Tt=H(Tt)),Ue(Tt)},ht.onerror=function(){Le(ht.error)}}catch(Tt){Le(Tt)}})}).catch(Le)});return f(Be,Ne),Be}function Q(ge,Ne){var _e=this,Be=new d(function(Ue,Le){_e.ready().then(function(){L(_e._dbInfo,_,function(rt,ft){if(rt)return Le(rt);try{var gt=ft.objectStore(_e._dbInfo.storeName),ht=gt.openCursor(),Tt=1;ht.onsuccess=function(){var Gt=ht.result;if(Gt){var Vn=Gt.value;q(Vn)&&(Vn=H(Vn));var cn=ge(Vn,Gt.key,Tt++);cn!==void 0?Ue(cn):Gt.continue()}else Ue()},ht.onerror=function(){Le(ht.error)}}catch(Gt){Le(Gt)}})}).catch(Le)});return f(Be,Ne),Be}function ne(ge,Ne,_e){var Be=this;ge=p(ge);var Ue=new d(function(Le,rt){var ft;Be.ready().then(function(){return ft=Be._dbInfo,b.call(Ne)==="[object Blob]"?A(ft.db).then(function(gt){return gt?Ne:B(Ne)}):Ne}).then(function(gt){L(Be._dbInfo,E,function(ht,Tt){if(ht)return rt(ht);try{var Gt=Tt.objectStore(Be._dbInfo.storeName);gt===null&&(gt=void 0);var Vn=Gt.put(gt,ge);Tt.oncomplete=function(){gt===void 0&&(gt=null),Le(gt)},Tt.onabort=Tt.onerror=function(){var cn=Vn.error?Vn.error:Vn.transaction.error;rt(cn)}}catch(cn){rt(cn)}})}).catch(rt)});return f(Ue,_e),Ue}function ue(ge,Ne){var _e=this;ge=p(ge);var Be=new d(function(Ue,Le){_e.ready().then(function(){L(_e._dbInfo,E,function(rt,ft){if(rt)return Le(rt);try{var gt=ft.objectStore(_e._dbInfo.storeName),ht=gt.delete(ge);ft.oncomplete=function(){Ue()},ft.onerror=function(){Le(ht.error)},ft.onabort=function(){var Tt=ht.error?ht.error:ht.transaction.error;Le(Tt)}}catch(Tt){Le(Tt)}})}).catch(Le)});return f(Be,Ne),Be}function se(ge){var Ne=this,_e=new d(function(Be,Ue){Ne.ready().then(function(){L(Ne._dbInfo,E,function(Le,rt){if(Le)return Ue(Le);try{var ft=rt.objectStore(Ne._dbInfo.storeName),gt=ft.clear();rt.oncomplete=function(){Be()},rt.onabort=rt.onerror=function(){var ht=gt.error?gt.error:gt.transaction.error;Ue(ht)}}catch(ht){Ue(ht)}})}).catch(Ue)});return f(_e,ge),_e}function ae(ge){var Ne=this,_e=new d(function(Be,Ue){Ne.ready().then(function(){L(Ne._dbInfo,_,function(Le,rt){if(Le)return Ue(Le);try{var ft=rt.objectStore(Ne._dbInfo.storeName),gt=ft.count();gt.onsuccess=function(){Be(gt.result)},gt.onerror=function(){Ue(gt.error)}}catch(ht){Ue(ht)}})}).catch(Ue)});return f(_e,ge),_e}function he(ge,Ne){var _e=this,Be=new d(function(Ue,Le){if(ge<0){Ue(null);return}_e.ready().then(function(){L(_e._dbInfo,_,function(rt,ft){if(rt)return Le(rt);try{var gt=ft.objectStore(_e._dbInfo.storeName),ht=!1,Tt=gt.openKeyCursor();Tt.onsuccess=function(){var Gt=Tt.result;if(!Gt){Ue(null);return}ge===0||ht?Ue(Gt.key):(ht=!0,Gt.advance(ge))},Tt.onerror=function(){Le(Tt.error)}}catch(Gt){Le(Gt)}})}).catch(Le)});return f(Be,Ne),Be}function ie(ge){var Ne=this,_e=new d(function(Be,Ue){Ne.ready().then(function(){L(Ne._dbInfo,_,function(Le,rt){if(Le)return Ue(Le);try{var ft=rt.objectStore(Ne._dbInfo.storeName),gt=ft.openKeyCursor(),ht=[];gt.onsuccess=function(){var Tt=gt.result;if(!Tt){Be(ht);return}ht.push(Tt.key),Tt.continue()},gt.onerror=function(){Ue(gt.error)}}catch(Tt){Ue(Tt)}})}).catch(Ue)});return f(_e,ge),_e}function le(ge,Ne){Ne=m.apply(this,arguments);var _e=this.config();ge=typeof ge!="function"&&ge||{},ge.name||(ge.name=ge.name||_e.name,ge.storeName=ge.storeName||_e.storeName);var Be=this,Ue;if(!ge.name)Ue=d.reject("Invalid arguments");else{var Le=ge.name===_e.name&&Be._dbInfo.db,rt=Le?d.resolve(Be._dbInfo.db):M(ge).then(function(ft){var gt=v[ge.name],ht=gt.forages;gt.db=ft;for(var Tt=0;Tt<ht.length;Tt++)ht[Tt]._dbInfo.db=ft;return ft});ge.storeName?Ue=rt.then(function(ft){if(ft.objectStoreNames.contains(ge.storeName)){var gt=ft.version+1;R(ge);var ht=v[ge.name],Tt=ht.forages;ft.close();for(var Gt=0;Gt<Tt.length;Gt++){var Vn=Tt[Gt];Vn._dbInfo.db=null,Vn._dbInfo.version=gt}var cn=new d(function(lr,sn){var vr=l.open(ge.name,gt);vr.onerror=function(Ks){var Za=vr.result;Za.close(),sn(Ks)},vr.onupgradeneeded=function(){var Ks=vr.result;Ks.deleteObjectStore(ge.storeName)},vr.onsuccess=function(){var Ks=vr.result;Ks.close(),lr(Ks)}});return cn.then(function(lr){ht.db=lr;for(var sn=0;sn<Tt.length;sn++){var vr=Tt[sn];vr._dbInfo.db=lr,I(vr._dbInfo)}}).catch(function(lr){throw(P(ge,lr)||d.resolve()).catch(function(){}),lr})}}):Ue=rt.then(function(ft){R(ge);var gt=v[ge.name],ht=gt.forages;ft.close();for(var Tt=0;Tt<ht.length;Tt++){var Gt=ht[Tt];Gt._dbInfo.db=null}var Vn=new d(function(cn,lr){var sn=l.deleteDatabase(ge.name);sn.onerror=function(){var vr=sn.result;vr&&vr.close(),lr(sn.error)},sn.onblocked=function(){console.warn('dropInstance blocked for database "'+ge.name+'" until all open connections are closed')},sn.onsuccess=function(){var vr=sn.result;vr&&vr.close(),cn(vr)}});return Vn.then(function(cn){gt.db=cn;for(var lr=0;lr<ht.length;lr++){var sn=ht[lr];I(sn._dbInfo)}}).catch(function(cn){throw(P(ge,cn)||d.resolve()).catch(function(){}),cn})})}return f(Ue,Ne),Ue}var Ce={_driver:"asyncStorage",_initStorage:V,_support:u(),iterate:Q,getItem:Y,setItem:ne,removeItem:ue,clear:se,length:ae,key:he,keys:ie,dropInstance:le};function X(){return typeof openDatabase=="function"}var fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",de="~~local_forage_type~",te=/^~~local_forage_type~([^~]+)~/,ee="__lfsc__:",me=ee.length,Ie="arbf",Te="blob",we="si08",Me="ui08",ke="uic8",Oe="si16",xe="si32",je="ur16",Ve="ui32",nt="fl32",it="fl64",_t=me+Ie.length,rn=Object.prototype.toString;function en(ge){var Ne=ge.length*.75,_e=ge.length,Be,Ue=0,Le,rt,ft,gt;ge[ge.length-1]==="="&&(Ne--,ge[ge.length-2]==="="&&Ne--);var ht=new ArrayBuffer(Ne),Tt=new Uint8Array(ht);for(Be=0;Be<_e;Be+=4)Le=fe.indexOf(ge[Be]),rt=fe.indexOf(ge[Be+1]),ft=fe.indexOf(ge[Be+2]),gt=fe.indexOf(ge[Be+3]),Tt[Ue++]=Le<<2|rt>>4,Tt[Ue++]=(rt&15)<<4|ft>>2,Tt[Ue++]=(ft&3)<<6|gt&63;return ht}function zn(ge){var Ne=new Uint8Array(ge),_e="",Be;for(Be=0;Be<Ne.length;Be+=3)_e+=fe[Ne[Be]>>2],_e+=fe[(Ne[Be]&3)<<4|Ne[Be+1]>>4],_e+=fe[(Ne[Be+1]&15)<<2|Ne[Be+2]>>6],_e+=fe[Ne[Be+2]&63];return Ne.length%3===2?_e=_e.substring(0,_e.length-1)+"=":Ne.length%3===1&&(_e=_e.substring(0,_e.length-2)+"=="),_e}function zt(ge,Ne){var _e="";if(ge&&(_e=rn.call(ge)),ge&&(_e==="[object ArrayBuffer]"||ge.buffer&&rn.call(ge.buffer)==="[object ArrayBuffer]")){var Be,Ue=ee;ge instanceof ArrayBuffer?(Be=ge,Ue+=Ie):(Be=ge.buffer,_e==="[object Int8Array]"?Ue+=we:_e==="[object Uint8Array]"?Ue+=Me:_e==="[object Uint8ClampedArray]"?Ue+=ke:_e==="[object Int16Array]"?Ue+=Oe:_e==="[object Uint16Array]"?Ue+=je:_e==="[object Int32Array]"?Ue+=xe:_e==="[object Uint32Array]"?Ue+=Ve:_e==="[object Float32Array]"?Ue+=nt:_e==="[object Float64Array]"?Ue+=it:Ne(new Error("Failed to get type for BinaryArray"))),Ne(Ue+zn(Be))}else if(_e==="[object Blob]"){var Le=new FileReader;Le.onload=function(){var rt=de+ge.type+"~"+zn(this.result);Ne(ee+Te+rt)},Le.readAsArrayBuffer(ge)}else try{Ne(JSON.stringify(ge))}catch(rt){console.error("Couldn't convert value into a JSON string: ",ge),Ne(null,rt)}}function wn(ge){if(ge.substring(0,me)!==ee)return JSON.parse(ge);var Ne=ge.substring(_t),_e=ge.substring(me,_t),Be;if(_e===Te&&te.test(Ne)){var Ue=Ne.match(te);Be=Ue[1],Ne=Ne.substring(Ue[0].length)}var Le=en(Ne);switch(_e){case Ie:return Le;case Te:return c([Le],{type:Be});case we:return new Int8Array(Le);case Me:return new Uint8Array(Le);case ke:return new Uint8ClampedArray(Le);case Oe:return new Int16Array(Le);case je:return new Uint16Array(Le);case xe:return new Int32Array(Le);case Ve:return new Uint32Array(Le);case nt:return new Float32Array(Le);case it:return new Float64Array(Le);default:throw new Error("Unkown type: "+_e)}}var nr={serialize:zt,deserialize:wn,stringToBuffer:en,bufferToString:zn};function Yn(ge,Ne,_e,Be){ge.executeSql("CREATE TABLE IF NOT EXISTS "+Ne.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],_e,Be)}function Ur(ge){var Ne=this,_e={db:null};if(ge)for(var Be in ge)_e[Be]=typeof ge[Be]!="string"?ge[Be].toString():ge[Be];var Ue=new d(function(Le,rt){try{_e.db=openDatabase(_e.name,String(_e.version),_e.description,_e.size)}catch(ft){return rt(ft)}_e.db.transaction(function(ft){Yn(ft,_e,function(){Ne._dbInfo=_e,Le()},function(gt,ht){rt(ht)})},rt)});return _e.serializer=nr,Ue}function or(ge,Ne,_e,Be,Ue,Le){ge.executeSql(_e,Be,Ue,function(rt,ft){ft.code===ft.SYNTAX_ERR?rt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Ne.storeName],function(gt,ht){ht.rows.length?Le(gt,ft):Yn(gt,Ne,function(){gt.executeSql(_e,Be,Ue,Le)},Le)},Le):Le(rt,ft)},Le)}function Ir(ge,Ne){var _e=this;ge=p(ge);var Be=new d(function(Ue,Le){_e.ready().then(function(){var rt=_e._dbInfo;rt.db.transaction(function(ft){or(ft,rt,"SELECT * FROM "+rt.storeName+" WHERE key = ? LIMIT 1",[ge],function(gt,ht){var Tt=ht.rows.length?ht.rows.item(0).value:null;Tt&&(Tt=rt.serializer.deserialize(Tt)),Ue(Tt)},function(gt,ht){Le(ht)})})}).catch(Le)});return f(Be,Ne),Be}function On(ge,Ne){var _e=this,Be=new d(function(Ue,Le){_e.ready().then(function(){var rt=_e._dbInfo;rt.db.transaction(function(ft){or(ft,rt,"SELECT * FROM "+rt.storeName,[],function(gt,ht){for(var Tt=ht.rows,Gt=Tt.length,Vn=0;Vn<Gt;Vn++){var cn=Tt.item(Vn),lr=cn.value;if(lr&&(lr=rt.serializer.deserialize(lr)),lr=ge(lr,cn.key,Vn+1),lr!==void 0){Ue(lr);return}}Ue()},function(gt,ht){Le(ht)})})}).catch(Le)});return f(Be,Ne),Be}function gn(ge,Ne,_e,Be){var Ue=this;ge=p(ge);var Le=new d(function(rt,ft){Ue.ready().then(function(){Ne===void 0&&(Ne=null);var gt=Ne,ht=Ue._dbInfo;ht.serializer.serialize(Ne,function(Tt,Gt){Gt?ft(Gt):ht.db.transaction(function(Vn){or(Vn,ht,"INSERT OR REPLACE INTO "+ht.storeName+" (key, value) VALUES (?, ?)",[ge,Tt],function(){rt(gt)},function(cn,lr){ft(lr)})},function(Vn){if(Vn.code===Vn.QUOTA_ERR){if(Be>0){rt(gn.apply(Ue,[ge,gt,_e,Be-1]));return}ft(Vn)}})})}).catch(ft)});return f(Le,_e),Le}function cr(ge,Ne,_e){return gn.apply(this,[ge,Ne,_e,1])}function xi(ge,Ne){var _e=this;ge=p(ge);var Be=new d(function(Ue,Le){_e.ready().then(function(){var rt=_e._dbInfo;rt.db.transaction(function(ft){or(ft,rt,"DELETE FROM "+rt.storeName+" WHERE key = ?",[ge],function(){Ue()},function(gt,ht){Le(ht)})})}).catch(Le)});return f(Be,Ne),Be}function Rr(ge){var Ne=this,_e=new d(function(Be,Ue){Ne.ready().then(function(){var Le=Ne._dbInfo;Le.db.transaction(function(rt){or(rt,Le,"DELETE FROM "+Le.storeName,[],function(){Be()},function(ft,gt){Ue(gt)})})}).catch(Ue)});return f(_e,ge),_e}function Nn(ge){var Ne=this,_e=new d(function(Be,Ue){Ne.ready().then(function(){var Le=Ne._dbInfo;Le.db.transaction(function(rt){or(rt,Le,"SELECT COUNT(key) as c FROM "+Le.storeName,[],function(ft,gt){var ht=gt.rows.item(0).c;Be(ht)},function(ft,gt){Ue(gt)})})}).catch(Ue)});return f(_e,ge),_e}function mt(ge,Ne){var _e=this,Be=new d(function(Ue,Le){_e.ready().then(function(){var rt=_e._dbInfo;rt.db.transaction(function(ft){or(ft,rt,"SELECT key FROM "+rt.storeName+" WHERE id = ? LIMIT 1",[ge+1],function(gt,ht){var Tt=ht.rows.length?ht.rows.item(0).key:null;Ue(Tt)},function(gt,ht){Le(ht)})})}).catch(Le)});return f(Be,Ne),Be}function Cr(ge){var Ne=this,_e=new d(function(Be,Ue){Ne.ready().then(function(){var Le=Ne._dbInfo;Le.db.transaction(function(rt){or(rt,Le,"SELECT key FROM "+Le.storeName,[],function(ft,gt){for(var ht=[],Tt=0;Tt<gt.rows.length;Tt++)ht.push(gt.rows.item(Tt).key);Be(ht)},function(ft,gt){Ue(gt)})})}).catch(Ue)});return f(_e,ge),_e}function Xt(ge){return new d(function(Ne,_e){ge.transaction(function(Be){Be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ue,Le){for(var rt=[],ft=0;ft<Le.rows.length;ft++)rt.push(Le.rows.item(ft).name);Ne({db:ge,storeNames:rt})},function(Ue,Le){_e(Le)})},function(Be){_e(Be)})})}function dr(ge,Ne){Ne=m.apply(this,arguments);var _e=this.config();ge=typeof ge!="function"&&ge||{},ge.name||(ge.name=ge.name||_e.name,ge.storeName=ge.storeName||_e.storeName);var Be=this,Ue;return ge.name?Ue=new d(function(Le){var rt;ge.name===_e.name?rt=Be._dbInfo.db:rt=openDatabase(ge.name,"","",0),ge.storeName?Le({db:rt,storeNames:[ge.storeName]}):Le(Xt(rt))}).then(function(Le){return new d(function(rt,ft){Le.db.transaction(function(gt){function ht(cn){return new d(function(lr,sn){gt.executeSql("DROP TABLE IF EXISTS "+cn,[],function(){lr()},function(vr,Ks){sn(Ks)})})}for(var Tt=[],Gt=0,Vn=Le.storeNames.length;Gt<Vn;Gt++)Tt.push(ht(Le.storeNames[Gt]));d.all(Tt).then(function(){rt()}).catch(function(cn){ft(cn)})},function(gt){ft(gt)})})}):Ue=d.reject("Invalid arguments"),f(Ue,Ne),Ue}var vn={_driver:"webSQLStorage",_initStorage:Ur,_support:X(),iterate:On,getItem:Ir,setItem:cr,removeItem:xi,clear:Rr,length:Nn,key:mt,keys:Cr,dropInstance:dr};function ar(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Or(ge,Ne){var _e=ge.name+"/";return ge.storeName!==Ne.storeName&&(_e+=ge.storeName+"/"),_e}function Hr(){var ge="_localforage_support_test";try{return localStorage.setItem(ge,!0),localStorage.removeItem(ge),!1}catch{return!0}}function qr(){return!Hr()||localStorage.length>0}function ko(ge){var Ne=this,_e={};if(ge)for(var Be in ge)_e[Be]=ge[Be];return _e.keyPrefix=Or(ge,Ne._defaultConfig),qr()?(Ne._dbInfo=_e,_e.serializer=nr,d.resolve()):d.reject()}function Ja(ge){var Ne=this,_e=Ne.ready().then(function(){for(var Be=Ne._dbInfo.keyPrefix,Ue=localStorage.length-1;Ue>=0;Ue--){var Le=localStorage.key(Ue);Le.indexOf(Be)===0&&localStorage.removeItem(Le)}});return f(_e,ge),_e}function Tu(ge,Ne){var _e=this;ge=p(ge);var Be=_e.ready().then(function(){var Ue=_e._dbInfo,Le=localStorage.getItem(Ue.keyPrefix+ge);return Le&&(Le=Ue.serializer.deserialize(Le)),Le});return f(Be,Ne),Be}function yc(ge,Ne){var _e=this,Be=_e.ready().then(function(){for(var Ue=_e._dbInfo,Le=Ue.keyPrefix,rt=Le.length,ft=localStorage.length,gt=1,ht=0;ht<ft;ht++){var Tt=localStorage.key(ht);if(Tt.indexOf(Le)===0){var Gt=localStorage.getItem(Tt);if(Gt&&(Gt=Ue.serializer.deserialize(Gt)),Gt=ge(Gt,Tt.substring(rt),gt++),Gt!==void 0)return Gt}}});return f(Be,Ne),Be}function Kn(ge,Ne){var _e=this,Be=_e.ready().then(function(){var Ue=_e._dbInfo,Le;try{Le=localStorage.key(ge)}catch{Le=null}return Le&&(Le=Le.substring(Ue.keyPrefix.length)),Le});return f(Be,Ne),Be}function Ji(ge){var Ne=this,_e=Ne.ready().then(function(){for(var Be=Ne._dbInfo,Ue=localStorage.length,Le=[],rt=0;rt<Ue;rt++){var ft=localStorage.key(rt);ft.indexOf(Be.keyPrefix)===0&&Le.push(ft.substring(Be.keyPrefix.length))}return Le});return f(_e,ge),_e}function Io(ge){var Ne=this,_e=Ne.keys().then(function(Be){return Be.length});return f(_e,ge),_e}function Xh(ge,Ne){var _e=this;ge=p(ge);var Be=_e.ready().then(function(){var Ue=_e._dbInfo;localStorage.removeItem(Ue.keyPrefix+ge)});return f(Be,Ne),Be}function wf(ge,Ne,_e){var Be=this;ge=p(ge);var Ue=Be.ready().then(function(){Ne===void 0&&(Ne=null);var Le=Ne;return new d(function(rt,ft){var gt=Be._dbInfo;gt.serializer.serialize(Ne,function(ht,Tt){if(Tt)ft(Tt);else try{localStorage.setItem(gt.keyPrefix+ge,ht),rt(Le)}catch(Gt){(Gt.name==="QuotaExceededError"||Gt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ft(Gt),ft(Gt)}})})});return f(Ue,_e),Ue}function sd(ge,Ne){if(Ne=m.apply(this,arguments),ge=typeof ge!="function"&&ge||{},!ge.name){var _e=this.config();ge.name=ge.name||_e.name,ge.storeName=ge.storeName||_e.storeName}var Be=this,Ue;return ge.name?Ue=new d(function(Le){ge.storeName?Le(Or(ge,Be._defaultConfig)):Le(ge.name+"/")}).then(function(Le){for(var rt=localStorage.length-1;rt>=0;rt--){var ft=localStorage.key(rt);ft.indexOf(Le)===0&&localStorage.removeItem(ft)}}):Ue=d.reject("Invalid arguments"),f(Ue,Ne),Ue}var od={_driver:"localStorageWrapper",_initStorage:ko,_support:ar(),iterate:yc,getItem:Tu,setItem:wf,removeItem:Xh,clear:Ja,length:Io,key:Kn,keys:Ji,dropInstance:sd},Ro=function(Ne,_e){return Ne===_e||typeof Ne=="number"&&typeof _e=="number"&&isNaN(Ne)&&isNaN(_e)},Qh=function(Ne,_e){for(var Be=Ne.length,Ue=0;Ue<Be;){if(Ro(Ne[Ue],_e))return!0;Ue++}return!1},vc=Array.isArray||function(ge){return Object.prototype.toString.call(ge)==="[object Array]"},Sr={},xf={},qs={INDEXEDDB:Ce,WEBSQL:vn,LOCALSTORAGE:od},ea=[qs.INDEXEDDB._driver,qs.WEBSQL._driver,qs.LOCALSTORAGE._driver],Ws=["dropInstance"],bc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ws),Sa={description:"",driver:ea.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Au(ge,Ne){ge[Ne]=function(){var _e=arguments;return ge.ready().then(function(){return ge[Ne].apply(ge,_e)})}}function Gs(){for(var ge=1;ge<arguments.length;ge++){var Ne=arguments[ge];if(Ne)for(var _e in Ne)Ne.hasOwnProperty(_e)&&(vc(Ne[_e])?arguments[0][_e]=Ne[_e].slice():arguments[0][_e]=Ne[_e])}return arguments[0]}var Jh=(function(){function ge(Ne){o(this,ge);for(var _e in qs)if(qs.hasOwnProperty(_e)){var Be=qs[_e],Ue=Be._driver;this[_e]=Ue,Sr[Ue]||this.defineDriver(Be)}this._defaultConfig=Gs({},Sa),this._config=Gs({},this._defaultConfig,Ne),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ge.prototype.config=function(_e){if((typeof _e>"u"?"undefined":s(_e))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Be in _e){if(Be==="storeName"&&(_e[Be]=_e[Be].replace(/\W/g,"_")),Be==="version"&&typeof _e[Be]!="number")return new Error("Database version must be a number.");this._config[Be]=_e[Be]}return"driver"in _e&&_e.driver?this.setDriver(this._config.driver):!0}else return typeof _e=="string"?this._config[_e]:this._config},ge.prototype.defineDriver=function(_e,Be,Ue){var Le=new d(function(rt,ft){try{var gt=_e._driver,ht=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!_e._driver){ft(ht);return}for(var Tt=bc.concat("_initStorage"),Gt=0,Vn=Tt.length;Gt<Vn;Gt++){var cn=Tt[Gt],lr=!Qh(Ws,cn);if((lr||_e[cn])&&typeof _e[cn]!="function"){ft(ht);return}}var sn=function(){for(var Za=function(Do){return function(){var Zi=new Error("Method "+Do+" is not implemented by the current driver"),Ui=d.reject(Zi);return f(Ui,arguments[arguments.length-1]),Ui}},Xs=0,Zh=Ws.length;Xs<Zh;Xs++){var ad=Ws[Xs];_e[ad]||(_e[ad]=Za(ad))}};sn();var vr=function(Za){Sr[gt]&&console.info("Redefining LocalForage driver: "+gt),Sr[gt]=_e,xf[gt]=Za,rt()};"_support"in _e?_e._support&&typeof _e._support=="function"?_e._support().then(vr,ft):vr(!!_e._support):vr(!0)}catch(Ks){ft(Ks)}});return h(Le,Be,Ue),Le},ge.prototype.driver=function(){return this._driver||null},ge.prototype.getDriver=function(_e,Be,Ue){var Le=Sr[_e]?d.resolve(Sr[_e]):d.reject(new Error("Driver not found."));return h(Le,Be,Ue),Le},ge.prototype.getSerializer=function(_e){var Be=d.resolve(nr);return h(Be,_e),Be},ge.prototype.ready=function(_e){var Be=this,Ue=Be._driverSet.then(function(){return Be._ready===null&&(Be._ready=Be._initDriver()),Be._ready});return h(Ue,_e,_e),Ue},ge.prototype.setDriver=function(_e,Be,Ue){var Le=this;vc(_e)||(_e=[_e]);var rt=this._getSupportedDrivers(_e);function ft(){Le._config.driver=Le.driver()}function gt(Gt){return Le._extend(Gt),ft(),Le._ready=Le._initStorage(Le._config),Le._ready}function ht(Gt){return function(){var Vn=0;function cn(){for(;Vn<Gt.length;){var lr=Gt[Vn];return Vn++,Le._dbInfo=null,Le._ready=null,Le.getDriver(lr).then(gt).catch(cn)}ft();var sn=new Error("No available storage method found.");return Le._driverSet=d.reject(sn),Le._driverSet}return cn()}}var Tt=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=Tt.then(function(){var Gt=rt[0];return Le._dbInfo=null,Le._ready=null,Le.getDriver(Gt).then(function(Vn){Le._driver=Vn._driver,ft(),Le._wrapLibraryMethodsWithReady(),Le._initDriver=ht(rt)})}).catch(function(){ft();var Gt=new Error("No available storage method found.");return Le._driverSet=d.reject(Gt),Le._driverSet}),h(this._driverSet,Be,Ue),this._driverSet},ge.prototype.supports=function(_e){return!!xf[_e]},ge.prototype._extend=function(_e){Gs(this,_e)},ge.prototype._getSupportedDrivers=function(_e){for(var Be=[],Ue=0,Le=_e.length;Ue<Le;Ue++){var rt=_e[Ue];this.supports(rt)&&Be.push(rt)}return Be},ge.prototype._wrapLibraryMethodsWithReady=function(){for(var _e=0,Be=bc.length;_e<Be;_e++)Au(this,bc[_e])},ge.prototype.createInstance=function(_e){return new ge(_e)},ge})(),Ys=new Jh;r.exports=Ys},{3:3}]},{},[4])(4)})})(Zq)),Zq.exports}var obn=sbn();const PHe=Ao(obn);var eW,jCe;function abn(){if(jCe)return eW;jCe=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,l=typeof $i=="object"&&$i&&$i.Object===Object&&$i,u=typeof self=="object"&&self&&self.Object===Object&&self,c=l||u||Function("return this")(),d=Object.prototype,f=d.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(S,T,A){var R,I,P,N,M,O,j=0,B=!1,H=!1,q=!0;if(typeof S!="function")throw new TypeError(e);T=E(T)||0,v(A)&&(B=!!A.leading,H="maxWait"in A,P=H?h(E(A.maxWait)||0,T):P,q="trailing"in A?!!A.trailing:q);function G(se){var ae=R,he=I;return R=I=void 0,j=se,N=S.apply(he,ae),N}function U(se){return j=se,M=setTimeout(V,T),B?G(se):N}function L(se){var ae=se-O,he=se-j,ie=T-ae;return H?p(ie,P-he):ie}function z(se){var ae=se-O,he=se-j;return O===void 0||ae>=T||ae<0||H&&he>=P}function V(){var se=m();if(z(se))return Y(se);M=setTimeout(V,L(se))}function Y(se){return M=void 0,q&&R?G(se):(R=I=void 0,N)}function Q(){M!==void 0&&clearTimeout(M),j=0,R=O=I=M=void 0}function ne(){return M===void 0?N:Y(m())}function ue(){var se=m(),ae=z(se);if(R=arguments,I=this,O=se,ae){if(M===void 0)return U(O);if(H)return M=setTimeout(V,T),G(O)}return M===void 0&&(M=setTimeout(V,T)),N}return ue.cancel=Q,ue.flush=ne,ue}function y(S,T,A){var R=!0,I=!0;if(typeof S!="function")throw new TypeError(e);return v(A)&&(R="leading"in A?!!A.leading:R,I="trailing"in A?!!A.trailing:I),g(S,T,{leading:R,maxWait:T,trailing:I})}function v(S){var T=typeof S;return!!S&&(T=="object"||T=="function")}function b(S){return!!S&&typeof S=="object"}function _(S){return typeof S=="symbol"||b(S)&&f.call(S)==n}function E(S){if(typeof S=="number")return S;if(_(S))return t;if(v(S)){var T=typeof S.valueOf=="function"?S.valueOf():S;S=v(T)?T+"":T}if(typeof S!="string")return S===0?S:+S;S=S.replace(r,"");var A=s.test(S);return A||o.test(S)?a(S.slice(2),A?2:8):i.test(S)?t:+S}return eW=y,eW}var lbn=abn();const BCe=Ao(lbn),$_="#F05A30";class OHe{engine;testing;cloudEngine=!1;connected=!1;localForage=PHe.createInstance({name:"revisit"});collectionPrefix="prod-";studyId;currentParticipantId;participantData;uploadingAssetIds=[];constructor(t,n){this.engine=t,this.testing=n}isConnected(){return this.connected}getEngine(){return this.engine}isCloudEngine(){return this.cloudEngine}__throttleVerifyStudyDatabase=BCe(()=>new Promise((t,n)=>{this._verifyStudyDatabase().then(()=>{t()}).catch(r=>{this.connected=!1,console.error("Error verifying study database:",r),n(r)})}),1e4);__throttleSaveAnswers=BCe(async()=>{await this._saveAnswers()},3e3);async verifyStudyDatabase(){return await this.__throttleVerifyStudyDatabase()}async getStageData(t){const n=await this.getModes(t);if(n&&n.stage)return n.stage;const r={currentStage:{stageName:"DEFAULT",color:$_},allStages:[{stageName:"DEFAULT",color:$_}]};return await this.setCurrentStage(t,"DEFAULT",$_),r}async setCurrentStage(t,n,r=$_){const i=await this.getModes(t);i.stage||(i.stage={currentStage:{stageName:"DEFAULT",color:$_},allStages:[{stageName:"DEFAULT",color:$_}]}),i.stage.allStages.findIndex(a=>a.stageName===n)===-1&&i.stage.allStages.push({stageName:n,color:r}),i.stage.currentStage={stageName:n,color:r};const o={...i,stage:i.stage};await this._setModesDocument(t,o)}async updateStageColor(t,n,r){const i=await this.getModes(t);if(!i.stage)throw new Error("Stage data not initialized");const s=i.stage.allStages.map(u=>u.stageName===n?{...u,color:r}:u),a={currentStage:i.stage.currentStage.stageName===n?{...i.stage.currentStage,color:r}:i.stage.currentStage,allStages:s},l={...i,stage:a};await this._setModesDocument(t,l)}async saveConfig(t){const n=await this._getCurrentConfigHash(),r=await bG(JSON.stringify(t));if(await this._pushToStorage(`configs/${r}`,"config",t),await this._cacheStorageObject(`configs/${r}`,"config"),n&&n!==r){try{await this._deleteFromStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}await this._setCurrentConfigHash(r)}async getAllConfigsFromHash(t,n){const r=t.map(async s=>[s,await this._getFromStorage(`configs/${s}`,"config",n)]),i=await Promise.all(r);return Object.fromEntries(i)}async getCurrentParticipantId(t){if(t)return this.currentParticipantId=t,t;if(this.currentParticipantId)return this.currentParticipantId;if(!this.studyId)throw new Error("Study ID is not set");const n=await this.localForage.getItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`);return n?(this.currentParticipantId=n,n):(this.currentParticipantId=bVe(),await this.localForage.setItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`,this.currentParticipantId),this.currentParticipantId)}async clearCurrentParticipantId(){if(this.currentParticipantId=void 0,!this.studyId)throw new Error("Study ID is not set");return await this.localForage.removeItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`)}async _getSequence(){if(!this.currentParticipantId)throw new Error("Participant not initialized");if(this.studyId===void 0)throw new Error("Study ID is not set");let t=await this.getAllSequenceAssignments(this.studyId);const n=await this.getModes(this.studyId),i=(await this.getStageData(this.studyId)).currentStage.stageName,s=t.filter(d=>d.rejected&&!d.claimed);if(s.length>0){const d=s[0],f=d.timestamp;if(n.dataCollectionEnabled){const h={participantId:this.currentParticipantId,timestamp:f,rejected:!1,claimed:!1,completed:null,createdTime:new Date().getTime(),total:0,answered:[],isDynamic:!1,stage:i};await this._claimSequenceAssignment(d.participantId,d),await this._createSequenceAssignment(this.currentParticipantId,h,!1)}}else if(n.dataCollectionEnabled){const d=new Date().getTime(),f={participantId:this.currentParticipantId,timestamp:d,rejected:!1,claimed:!1,completed:null,createdTime:d,total:0,answered:[],isDynamic:!1,stage:i};await this._createSequenceAssignment(this.currentParticipantId,f,!0)}t=await this.getAllSequenceAssignments(this.studyId);const o=await this.getSequenceArray();if(!o)throw new Error("Latin square not initialized");const a=t.filter(d=>!d.rejected).findIndex(d=>d.participantId===this.currentParticipantId)%o.length;if(o.length===0)throw new Error("Something really bad happened with sequence assignment");if(a===-1)return{currentRow:o[Math.floor(Math.random()*o.length)],creationIndex:1};const l=o[a];if(!l)throw new Error("Latin square is empty");const c=t.sort((d,f)=>d.createdTime-f.createdTime).findIndex(d=>d.participantId===this.currentParticipantId)+1;return{currentRow:l,creationIndex:c}}async initializeParticipantSession(t,n,r,i){if(await this.verifyStudyDatabase(),await this.getCurrentParticipantId(i),!this.currentParticipantId)throw new Error("Participant not initialized");const s=await this._getFromStorage(`participants/${this.currentParticipantId}`,"participantData");if(this.studyId===void 0)throw new Error("Study ID is not set");const o=await this.getModes(this.studyId),l=(await this.getStageData(this.studyId)).currentStage.stageName;if(ZT(s))return this.participantData=s,s;const u=await bG(JSON.stringify(n)),{currentRow:c,creationIndex:d}=await this._getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:u,sequence:c,participantIndex:d,answers:{},searchParams:t,metadata:r,completed:!1,rejected:!1,participantTags:[],stage:l},o.dataCollectionEnabled&&await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getAllParticipantIds(t){const n=this.studyId||t;if(n===void 0)throw new Error("Study ID is not set");return(await this.getAllSequenceAssignments(n)).map(i=>i.participantId)}async saveTags(t,n){await this._pushToStorage(`audio/transcriptAndTags/${n}`,"tags",t)}async getTags(t){return await this._getFromStorage(`audio/transcriptAndTags/${t}`,"tags")}async getAllParticipantAndTaskTags(t,n){const r=await this._getFromStorage(`audio/transcriptAndTags/${t}/${n}`,"participantTags");return r?.participantTags?r:(this.saveAllParticipantAndTaskTags(t,n,{participantTags:[],taskTags:{}}),{participantTags:[],taskTags:{}})}async saveAllParticipantAndTaskTags(t,n,r){return this._pushToStorage(`audio/transcriptAndTags/${t}/${n}`,"participantTags",r)}async getParticipantData(t){if(await this.verifyStudyDatabase(),this.currentParticipantId===null&&!t)throw new Error("Participant not initialized");const n=await this._getFromStorage(`participants/${t||this.currentParticipantId}`,"participantData");return ZT(n)?n:null}async getParticipantTags(){await this.verifyStudyDatabase();const t=await this.getParticipantData();if(!t)throw new Error("Participant not initialized");return t.participantTags}async addParticipantTags(t){if(await this.verifyStudyDatabase(),!this.participantData)throw new Error("Participant data not initialized");this.participantData.participantTags=[...new Set([...this.participantData.participantTags,...t])],await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async removeParticipantTags(t){if(await this.verifyStudyDatabase(),!this.participantData)throw new Error("Participant data not initialized");this.participantData.participantTags=this.participantData.participantTags.filter(n=>!t.includes(n)),await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async rejectParticipant(t,n){const r=await this._getFromStorage(`participants/${t}`,"participantData");try{if(!r||!ZT(r)||r.rejected)return;r.rejected={reason:n,timestamp:new Date().getTime()},await this._pushToStorage(`participants/${t}`,"participantData",r),await this._rejectParticipantRealtime(t)}catch(i){console.warn("Error rejecting participant:",i)}}async rejectCurrentParticipant(t){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(this.currentParticipantId,t)}async undoRejectParticipant(t){const n=await this._getFromStorage(`participants/${t}`,"participantData");try{if(!n||!ZT(n))return;n.rejected=!1,await this._pushToStorage(`participants/${t}`,"participantData",n),await this._undoRejectParticipantRealtime(t)}catch(r){console.warn("Error undoing participant rejection:",r)}}async undoRejectCurrentParticipant(){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.undoRejectParticipant(this.currentParticipantId)}async getAllParticipantsData(t){const n=await this.getAllParticipantIds(t),r=[],i=n.map(async s=>{const o=await this._getFromStorage(`participants/${s}`,"participantData",t);ZT(o)&&r.push(o)});return await Promise.all(i),r}async getParticipantsStatusCounts(t){const n=await this.getAllSequenceAssignments(t),r=n.filter(l=>l.completed&&!l.rejected).length,i=n.filter(l=>l.rejected).length,s=n.length-r-i,o=n.length>0?n[0].timestamp:null,a=n.length>0?n.at(-1).timestamp:null;return{completed:r,rejected:i,inProgress:s,minTime:o,maxTime:a}}async _saveAnswers(){if(await this.verifyStudyDatabase(),!this.currentParticipantId||this.participantData===void 0)throw new Error("Participant not initialized");await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAnswers(t){if(!this.currentParticipantId||this.participantData===void 0)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:t},await this.__throttleSaveAnswers(t)}async updateProgressData(t,n){if(!this.studyId)throw new Error("Study ID is not set");if(this.getEngine()!=="firebase")return;const r=n||this.currentParticipantId;if(!r)throw new Error("Participant not initialized");const s=(await this.getAllSequenceAssignments(this.studyId)).find(o=>o.participantId===r);if(s){const o={...s,total:s.total??t.total,answered:s.answered??t.answered,isDynamic:s.isDynamic??t.isDynamic};o.total=t.total,o.answered=t.answered,o.isDynamic=t.isDynamic,await this._createSequenceAssignment(r,o,!1)}}async verifyCompletion(){if(await this.verifyStudyDatabase(),!this.studyId)throw new Error("Study not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const t=await this.getParticipantData();if(!t)throw new Error("Participant not initialized");if(this.uploadingAssetIds.length>0)return!1;if(t.completed)return!0;const r=await this.getModes(this.studyId),i=Object.values(t.answers).map(o=>o.endTime).reduce((o,a)=>Math.max(o,a),0),s=Object.values(this.participantData?.answers||{}).map(o=>o.endTime).reduce((o,a)=>Math.max(o,a),0);return this.participantData&&i===s?(this.participantData.completed=!0,r.dataCollectionEnabled&&(await this._completeCurrentParticipantRealtime(),await this._pushToStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),await this._cacheStorageObject(`participants/${this.currentParticipantId}`,"participantData")),!0):!1}async getAsset(t){return t?new Promise(r=>{const i=new XMLHttpRequest;i.responseType="blob",i.onload=()=>{const s=i.response,o=URL.createObjectURL(s);r(o)},i.open("GET",t),i.send()}):null}async getAudio(t,n){const r=await this._getAudioUrl(t,n);return await this.getAsset(r)}async getAudioUrl(t,n){const r=await this._getAudioUrl(t,n);return r||null}async getTranscriptUrl(t,n){if(!this._getTranscriptUrl)return null;const r=await this._getTranscriptUrl(t,n);return r||null}async saveAsset(t,n,r){const i=`${t}/${r}`,s=`${t}/${this.currentParticipantId}`;this.uploadingAssetIds.push(i),await this._pushToStorage(s,r,n),await this._cacheStorageObject(s,r),this.uploadingAssetIds=this.uploadingAssetIds.filter(o=>o!==i)}async saveAudioRecording(t,n){return this.saveAsset("audio",t,n)}async getScreenRecording(t,n){const r=await this._getScreenRecordingUrl(t,n);return this.getAsset(r)}async saveScreenRecording(t,n){return this.saveAsset("screenRecording",t,n)}async getSequenceArray(){await this.verifyStudyDatabase();const t=await this._getFromStorage("","sequenceArray");return Array.isArray(t)?t:null}async setSequenceArray(t){await this.verifyStudyDatabase(),await this._pushToStorage("","sequenceArray",t)}async __testingReset(){this.currentParticipantId=void 0,this.participantData=void 0,this.localForage.setItem(`${this.collectionPrefix}${this.studyId}/currentParticipantId`,void 0)}async createSnapshot(t,n){const r=`${this.collectionPrefix}${t}`;if(!await this._directoryExists(`${r}/participants`))return console.warn(`Source directory ${r} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const i=new Date,s=i.getUTCFullYear(),o=(i.getUTCMonth()+1).toString().padStart(2,"0"),a=i.getUTCDate().toString().padStart(2,"0"),l=i.getUTCHours().toString().padStart(2,"0"),u=i.getUTCMinutes().toString().padStart(2,"0"),c=i.getUTCSeconds().toString().padStart(2,"0"),d=`${s}-${o}-${a}T${l}:${u}:${c}`,f=`${this.collectionPrefix}${t}-snapshot-${d}`;this.getEngine()==="localStorage"?await this._copyDirectory(`${r}/`,`${f}/`):(await this._copyDirectory(`${r}/configs`,`${f}/configs`),await this._copyDirectory(`${r}/participants`,`${f}/participants`),await this._copyDirectory(`${r}/audio`,`${f}/audio`),await this._copyDirectory(`${r}/screenRecording`,`${f}/screenRecording`),await this._copyDirectory(r,f),await this._copyRealtimeData(r,f)),await this._addDirectoryNameToSnapshots(f,t);const h=[];if(n){const p=await this.removeSnapshotOrLive(r,t);p.status==="FAILED"?h.push({title:p.error.title,message:p.error.message,color:"red"}):h.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return h.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:h}}async removeSnapshotOrLive(t,n){const r=t.startsWith(this.collectionPrefix)?t:`${this.collectionPrefix}${t}`;try{return this.getEngine()==="localStorage"?await this._deleteDirectory(`${r}/`):(await this._deleteDirectory(`${r}/configs`),await this._deleteDirectory(`${r}/participants`),await this._deleteDirectory(`${r}/audio`),await this._deleteDirectory(`${r}/screenRecording`),await this._deleteDirectory(r),await this._deleteRealtimeData(r)),await this._removeDirectoryNameFromSnapshots(r,n),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async restoreSnapshot(t,n){const r=`${this.collectionPrefix}${t}`,i=[];try{const s=await this.createSnapshot(t,!0);return s.status==="FAILED"?(console.warn("No live data to capture."),i.push({title:s.error.title,message:s.error.message,color:"yellow"})):i.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${n}/configs`,`${r}/configs`),await this._copyDirectory(`${n}/participants`,`${r}/participants`),await this._copyDirectory(`${n}/audio`,`${r}/audio`),await this._copyDirectory(`${n}/screenRecording`,`${r}/screenRecording`),await this._copyDirectory(n,r),await this._copyRealtimeData(n,r),i.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:i}}catch(s){return console.error("Error trying to delete a snapshot",s),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async renameSnapshot(t,n,r){try{return await this._changeDirectoryNameInSnapshots(t,n,r),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}}class ubn extends OHe{cloudEngine=!0;userManagementData={};async validateUser(t,n=!1){if(n&&(this.userManagementData={}),t?.user){if((await this.getUserManagementData("authentication"))?.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(t.user.email&&(s[t.user.email]===t.user.uid||s[t.user.email]===null)){if(t.user.email&&s[t.user.email]===null){const a=i.adminUsersList.find(l=>l.email===t.user.email);a&&(a.uid=t.user.uid),await this._updateAdminUsersList(i)}return!0}return!1}}return!0}return!1}}class cbn extends OHe{studyDatabase=PHe.createInstance({name:"revisit"});constructor(t=!1){super("localStorage",t)}async _getFromStorage(t,n,r){const i=`${this.collectionPrefix}${r||this.studyId}/${t}_${n}`;return await this.studyDatabase.getItem(i)}async _pushToStorage(t,n,r){await this.verifyStudyDatabase();const i=`${this.collectionPrefix}${this.studyId}/${t}_${n}`;await this.studyDatabase.setItem(i,r)}async _deleteFromStorage(t,n){await this.verifyStudyDatabase();const r=`${this.collectionPrefix}${this.studyId}/${t}_${n}`;await this.studyDatabase.removeItem(r)}async _cacheStorageObject(){}async _verifyStudyDatabase(){if(!this.studyDatabase||!this.studyId)throw new Error("Study database not initialized")}async _getCurrentConfigHash(){await this.verifyStudyDatabase();const t=`${this.collectionPrefix}${this.studyId}/configHash`;return await this.studyDatabase.getItem(t)||null}async _setCurrentConfigHash(t){await this.verifyStudyDatabase();const n=`${this.collectionPrefix}${this.studyId}/configHash`;await this.studyDatabase.setItem(n,t)}async getAllSequenceAssignments(t){const n=`${this.collectionPrefix}${t}/sequenceAssignment`,r=await this.studyDatabase.getItem(n);return r?Object.values(r).sort((i,s)=>i.timestamp-s.timestamp):[]}async _createSequenceAssignment(t,n){if(await this.verifyStudyDatabase(),this.studyId===void 0)throw new Error("Study ID is not set");const r=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,i=await this.studyDatabase.getItem(r)||{};i[t]=n,await this.studyDatabase.setItem(r,i)}async _completeCurrentParticipantRealtime(){if(!this.currentParticipantId)throw new Error("Participant not initialized");if(this.studyId===void 0)throw new Error("Study ID is not set");const t=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,n=await this.studyDatabase.getItem(t)||{};if(n[this.currentParticipantId])n[this.currentParticipantId]={...n[this.currentParticipantId],completed:new Date().getTime()};else throw new Error("Participant sequence assignment not found");await this.studyDatabase.setItem(t,n)}async _rejectParticipantRealtime(t){await this.verifyStudyDatabase();const n=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,r=await this.studyDatabase.getItem(n)||{},i=r[t],s=Object.values(r).find(o=>o.claimed&&o.timestamp===i.timestamp);if(i&&s){s.claimed=!1,s.rejected=!0,await this.studyDatabase.setItem(n,r),r[t]={...i,timestamp:new Date().getTime(),rejected:!0},await this.studyDatabase.setItem(n,r);return}i&&(i.rejected=!0,await this.studyDatabase.setItem(n,r))}async _undoRejectParticipantRealtime(t){await this.verifyStudyDatabase();const n=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,r=await this.studyDatabase.getItem(n)||{},i=r[t];i&&(i.rejected=!1,await this.studyDatabase.setItem(n,r))}async _claimSequenceAssignment(t,n){await this.verifyStudyDatabase();const r=`${this.collectionPrefix}${this.studyId}/sequenceAssignment`,i=await this.studyDatabase.getItem(r)||{};if(i[t])i[t]={...n,claimed:!0},await this.studyDatabase.setItem(r,i);else throw new Error(`Sequence assignment for participant ${t} not found`)}async initializeStudyDb(t){this.studyId=t}async connect(){this.connected=!0}async getModes(t){const n=`${this.collectionPrefix}${t}/modes`,r=await this.studyDatabase.getItem(n);if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem(n,i),i}async setMode(t,n,r){const i=`${this.collectionPrefix}${t}/modes`,s=await this.studyDatabase.getItem(i);if(!s)throw new Error("Modes not initialized");s[n]=r,this.studyDatabase.setItem(i,s)}async _setModesDocument(t,n){const r=`${this.collectionPrefix}${t}/modes`;await this.studyDatabase.setItem(r,n)}async _getAudioUrl(t,n){if(await this.verifyStudyDatabase(),this.studyId===void 0)throw new Error("Study ID is not set");const r=await this._getFromStorage(`audio/${n||this.currentParticipantId}`,t);if(!r)throw new Error(`Audio for task ${t} and participant ${n||this.currentParticipantId} not found`);return URL.createObjectURL(r)}async _getScreenRecordingUrl(t,n){if(await this.verifyStudyDatabase(),this.studyId===void 0)throw new Error("Study ID is not set");const r=await this._getFromStorage(`screenRecording/${n||this.currentParticipantId}`,t);if(!r)throw new Error(`ScreenRecording for task ${t} and participant ${n||this.currentParticipantId} not found`);return URL.createObjectURL(r)}async _testingReset(t){if(!t)throw new Error("Study ID is required for reset");const r=(await this.studyDatabase.keys()).filter(i=>i.startsWith(`${this.collectionPrefix}${t}/`));await Promise.all(r.map(i=>this.studyDatabase.removeItem(i))),await super.__testingReset()}async getSnapshots(t){const n=`${this.collectionPrefix}${t}/snapshots`;return await this.studyDatabase.getItem(n)||{}}async _directoryExists(t){return(await this.studyDatabase.keys()).some(r=>r.startsWith(t))}async _copyDirectory(t,n){const s=(await this.studyDatabase.keys()).filter(o=>o.startsWith(t)).map(async o=>{if(o.endsWith("/snapshots")||o.endsWith("modes")||o.endsWith("configHash")||o.endsWith("currentParticipantId"))return;const a=await this.studyDatabase.getItem(o),l=o.replace(t,n);await this.studyDatabase.setItem(l,a)});await Promise.all(s)}async _deleteDirectory(t){const i=(await this.studyDatabase.keys()).filter(s=>s.startsWith(t)&&!s.includes("snapshots")).map(s=>this.studyDatabase.removeItem(s));await Promise.all(i)}async _copyRealtimeData(t,n){await this._copyDirectory(t,n)}async _deleteRealtimeData(t){await this._deleteDirectory(t)}async _addDirectoryNameToSnapshots(t,n){await this.verifyStudyDatabase();const r=`${this.collectionPrefix}${n}/snapshots`,i=await this.studyDatabase.getItem(r)||{};i[t]||(i[t]={name:t},await this.studyDatabase.setItem(r,i))}async _removeDirectoryNameFromSnapshots(t,n){await this.verifyStudyDatabase();const r=`${this.collectionPrefix}${n}/snapshots`,i=await this.studyDatabase.getItem(r)||{};i[t]&&(delete i[t],await this.studyDatabase.setItem(r,i))}async _changeDirectoryNameInSnapshots(t,n,r){await this.verifyStudyDatabase();const i=`${this.collectionPrefix}${r}/snapshots`,s=await this.studyDatabase.getItem(i)||{};if(s[t])s[t]={name:n},await this.studyDatabase.setItem(i,s);else throw new Error(`Snapshot with name ${t} does not exist`)}}var tW,zCe;function XB(){if(zCe)return tW;zCe=1;var e=D6e;function t(o,a){var l,u="",c=0,d=!0,f=0,h;function p(){return h=o.charAt(f),f++,h}for(p(),h==="-"&&(u="-",p());h>="0"&&h<="9";)d&&(h=="0"?c++:d=!1),u+=h,p();if(d&&c--,h===".")for(u+=".";p()&&h>="0"&&h<="9";)u+=h;if(h==="e"||h==="E")for(u+=h,p(),(h==="-"||h==="+")&&(u+=h,p());h>="0"&&h<="9";)u+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[f]==="/"||o[f]==="*"))&&(h=0),l=+u,!(h||c||!isFinite(l)))return l}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),l,u,c,d;for(c=0;c<a.length;c++)for(l=a[c],d=l.length,u=0;u<d;u++){var f=l[u];if(f==="#")break;if(f==="/"&&(l[u+1]==="/"||l[u+1]==="*")){l[u+1]==="*"&&(c=a.length);break}else if(f>" "){a[c]="# "+l;break}}return a.join(`
`)}return tW={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},tW}var nW,VCe;function dbn(){return VCe||(VCe=1,nW="3.2.1"),nW}var rW,UCe;function Fle(){if(UCe)return rW;UCe=1;function e(a,l){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var u=[];function c(d){return{}.toString.call(d)==="[object Function]"}return a.forEach(function(d){if(!d.name||!c(d.parse)||!c(d.stringify))throw new Error("extension does not match the DSF interface");u.push(function(){try{if(l=="parse")return d.parse.apply(null,arguments);if(l=="stringify"){var f=d.stringify.apply(null,arguments);if(f!==void 0&&(typeof f!="string"||f.length===0||f[0]==='"'||[].some.call(f,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+f);return f}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+d.name+" failed; "+h.message)}})}),t.bind(null,u)}function t(a,l){if(a)for(var u=0;u<a.length;u++){var c=a[u](l);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var l=a&&a.out;return{name:"hex",parse:function(u){if(/^0x[0-9A-Fa-f]+$/.test(u))return parseInt(u,16)},stringify:function(u){if(l&&Number.isInteger(u))return"0x"+u.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var l=Date.parse(a);if(!isNaN(l))return new Date(l)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var l=a.toISOString();return l.indexOf("T00:00:00.000Z",l.length-14)!==-1?l.substr(0,10):l}}}}return o.description="support ISO dates",rW={loadDsf:e,std:{math:i,hex:s,date:o}},rW}var iW,HCe;function fbn(){return HCe||(HCe=1,iW=function(e,t){var n=XB(),r=Fle(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},l,u;function c(){s=0,o=" "}function d(O){return O==="{"||O==="}"||O==="["||O==="]"||O===","||O===":"}function f(O){var j,B=0,H=1;for(j=s-1;j>0&&i[j]!==`
`;j--,B++);for(;j>0;j--)i[j]===`
`&&H++;throw new Error(O+" at line "+H+","+B+" >>>"+i.substr(s-B,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(O){return i.charAt(s+O)}function m(O){for(var j="",B=o;h();){if(o===B)return h(),O&&B==="'"&&o==="'"&&j.length===0?(h(),g()):j;if(o==="\\")if(h(),o==="u"){for(var H=0,q=0;q<4;q++){h();var G=o.charCodeAt(0),U;o>="0"&&o<="9"?U=G-48:o>="a"&&o<="f"?U=G-97+10:o>="A"&&o<="F"?U=G-65+10:f("Bad \\u char "+o),H=H*16+U}j+=String.fromCharCode(H)}else if(typeof a[o]=="string")j+=a[o];else break;else o===`
`||o==="\r"?f("Bad string containing newline"):j+=o}f("Bad string")}function g(){for(var O="",j=0,B=0;;){var H=p(-B-5);if(!H||H===`
`)break;B++}function q(){for(var G=B;o&&o<=" "&&o!==`
`&&G-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),q());;){if(!o)f("Bad multiline string");else if(o==="'"){if(j++,h(),j===3)return O.slice(-1)===`
`&&(O=O.slice(0,-1)),O;continue}else for(;j>0;)O+="'",j--;o===`
`?(O+=`
`,h(),q()):(o!=="\r"&&(O+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var O="",j=s,B=-1;;){if(o===":")return O?B>=0&&B!==O.length&&(s=j+B,f("Found whitespace in your key name (use quotes to include)")):f("Found ':' but no key name (for an empty key name use quotes)"),O;o<=" "?o?B<0&&(B=O.length):f("Found EOF while looking for a key name (check your syntax)"):d(o)?f("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):O+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var O=o;for(d(o)&&f("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var j=o==="\r"||o===`
`||o==="";if(j||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var B=O[0];switch(B){case"f":if(O.trim()==="false")return!1;break;case"n":if(O.trim()==="null")return null;break;case"t":if(O.trim()==="true")return!0;break;default:if(B==="-"||B>="0"&&B<="9"){var H=n.tryParseNumber(O);if(H!==void 0)return H}}if(j){O=O.trim();var q=u(O);return q!==void 0?q:O}}O+=o}}function _(O,j){var B;for(O--,B=s-2;B>O&&i[B]<=" "&&i[B]!==`
`;B--);i[B]===`
`&&B--,i[B]==="\r"&&B--;var H=i.substr(O,B-O+1);for(B=0;B<H.length;B++)if(H[B]>" "){var q=H.indexOf(`
`);if(q>=0){var G=[H.substr(0,q),H.substr(q+1)];return j&&G[0].trim().length===0&&G.shift(),G}else return[H]}return[]}function E(O){function j(H,q){var G,U,L,z;switch(typeof H){case"string":H.indexOf(q)>=0&&(z=H);break;case"object":if(Object.prototype.toString.apply(H)==="[object Array]")for(G=0,L=H.length;G<L;G++)z=j(H[G],q)||z;else for(U in H)Object.prototype.hasOwnProperty.call(H,U)&&(z=j(H[U],q)||z)}return z}function B(H){var q=j(O,H);return q?"found '"+H+`' in a string value, your mistake could be with:
  > `+q+`
  (unquoted strings contain everything up to the next line!)`:""}return B("}")||B("]")}function S(){var O=[],j,B,H;try{if(l&&(j=n.createComment(O,{a:[]})),h(),B=s,v(),j&&(H=_(B,!0).join(`
`)),o==="]")return h(),j&&(j.e=[H]),O;for(;o;){if(O.push(A()),B=s,v(),o===","&&(h(),B=s,v()),j){var q=_(B);j.a.push([H||"",q[0]||""]),H=q[1]}if(o==="]")return h(),j&&(j.a[j.a.length-1][1]+=H||""),O;v()}f("End of input while parsing an array (missing ']')")}catch(G){throw G.hint=G.hint||E(O),G}}function T(O){var j="",B={},H,q,G;try{if(l&&(H=n.createComment(B,{c:{},o:[]})),O?q=1:(h(),q=s),v(),H&&(G=_(q,!0).join(`
`)),o==="}"&&!O)return H&&(H.e=[G]),h(),B;for(;o;){if(j=y(),v(),o!==":"&&f("Expected ':' instead of '"+o+"'"),h(),B[j]=A(),q=s,v(),o===","&&(h(),q=s,v()),H){var U=_(q);H.c[j]=[G||"",U[0]||""],G=U[1],H.o.push(j)}if(o==="}"&&!O)return h(),H&&(H.c[j][1]+=G||""),B;v()}if(O)return B;f("End of input while parsing an object (missing '}')")}catch(L){throw L.hint=L.hint||E(B),L}}function A(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function R(O,j){var B=s;if(v(),o&&f("Syntax error, found trailing characters"),l){var H=j.join(`
`),q=_(B).join(`
`);if(q||H){var G=n.createComment(O,n.getComment(O));G.r=[H,q]}}return O}function I(){v();var O=l?_(1):null;switch(o){case"{":return R(T(),O);case"[":return R(S(),O);default:return R(A(),O)}}function P(){v();var O=l?_(1):null;switch(o){case"{":return R(T(),O);case"[":return R(S(),O)}try{return R(T(!0),O)}catch(j){c();try{return R(A(),O)}catch{throw j}}}if(typeof e!="string")throw new Error("source is not a string");var N=null,M=!0;return t&&typeof t=="object"&&(l=t.keepWsc,N=t.dsf,M=t.legacyRoot!==!1),u=r.loadDsf(N,"parse"),i=e,c(),M?P():I()}),iW}var sW,qCe;function hbn(){return qCe||(qCe=1,sW=function(e,t){var n=XB(),r=Fle(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,l=!1,u=!1,c=!1,d=0,f=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,d=t.condense||0,l=t.bracesSameLine,u=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?f=0:f=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var _,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(f===2?"	":"\b")+"\v\f-"+E+"]","g"),R=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},P=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,N="",M=0;function O(z,V){return M+=z[0].length+z[1].length-z[2]-z[3],z[0]+V+z[1]}function j(z){return z.replace(S,function(V){var Y=I[V];return typeof Y=="string"?O(g.esc,Y):O(g.uni,("0000"+V.charCodeAt(0).toString(16)).slice(-4))})}function B(z,V,Y,Q){return z?(T.lastIndex=0,R.lastIndex=0,c||Y||T.test(z)||n.tryParseNumber(z,!0)!==void 0||R.test(z)?(S.lastIndex=0,A.lastIndex=0,S.test(z)?!A.test(z)&&!Q&&f?H(z,V):O(g.qstr,j(z)):O(g.qstr,z)):O(g.str,z)):O(g.qstr,"")}function H(z,V){var Y,Q=z.replace(/\r/g,"").split(`
`);if(V+=o,Q.length===1)return O(g.mstr,Q[0]);var ne=s+V+g.mstr[0];for(Y=0;Y<Q.length;Y++)ne+=s,Q[Y]&&(ne+=V+Q[Y]);return ne+s+V+g.mstr[1]}function q(z){return z?u||P.test(z)?(S.lastIndex=0,O(g.qkey,S.test(z)?j(z):z)):O(g.key,z):'""'}function G(z,V,Y,Q){function ne(zt){return zt&&zt[zt[0]==="\r"?1:0]===`
`}function ue(zt){return zt&&!ne(zt)}function se(zt,wn,nr){if(!zt)return"";zt=n.forceComment(zt);var Yn,Ur=zt.length;for(Yn=0;Yn<Ur&&zt[Yn]<=" ";Yn++);return nr&&Yn>0&&(zt=zt.substr(Yn)),Yn<Ur?wn+O(g.rem,zt):zt}var ae=_(z);if(ae!==void 0)return O(g.dsf,ae);switch(typeof z){case"string":return B(z,N,V,Q);case"number":return isFinite(z)?O(g.num,String(z)):O(g.lit,"null");case"boolean":return O(g.lit,String(z));case"object":if(!z)return O(g.lit,"null");var he;a&&(he=n.getComment(z));var ie=Object.prototype.toString.apply(z)==="[object Array]",le=N;N+=o;var Ce=s+le,X=s+N,fe=Y||l?"":Ce,de=[],te,ee=d?[]:null,me=c,Ie=f,Te=h?"":g.com[0],we=0,Me,ke,Oe,xe,je,Ve,nt,it,_t;if(ie){for(Me=0,ke=z.length;Me<ke;Me++){if(te=Me<ke-1,he?(Ve=he.a[Me]||[],nt=ue(Ve[1]),de.push(se(Ve[0],`
`)+X),ee&&(Ve[0]||Ve[1]||nt)&&(ee=null)):de.push(X),M=0,xe=z[Me],de.push(G(xe,he?nt:!1,!0)+(te?h:"")),ee){switch(typeof xe){case"string":M=0,c=!0,f=0,ee.push(G(xe,!1,!0)+(te?g.com[0]:"")),c=me,f=Ie;break;case"object":if(xe){ee=null;break}default:ee.push(de[de.length-1]+(te?Te:""));break}te&&(M+=g.com[0].length-g.com[2]),we+=M}he&&Ve[1]&&de.push(se(Ve[1],nt?" ":`
`,nt))}ke===0?he&&he.e&&de.push(se(he.e[0],`
`)+Ce):de.push(Ce),de.length===0?it=O(g.arr,""):(it=fe+O(g.arr,de.join("")),ee&&(_t=ee.join(" "),_t.length-we<=d&&(it=O(g.arr,_t))))}else{var rn=he?he.o.slice():[],en=[];for(Oe in z)Object.prototype.hasOwnProperty.call(z,Oe)&&rn.indexOf(Oe)<0&&en.push(Oe);m&&en.sort();var zn=rn.concat(en);for(Me=0,ke=zn.length;Me<ke;Me++)if(te=Me<ke-1,Oe=zn[Me],he?(Ve=he.c[Oe]||[],nt=ue(Ve[1]),de.push(se(Ve[0],`
`)+X),ee&&(Ve[0]||Ve[1]||nt)&&(ee=null)):de.push(X),M=0,xe=z[Oe],je=G(xe,he&&nt),de.push(q(Oe)+g.col[0]+(ne(je)?"":" ")+je+(te?h:"")),he&&Ve[1]&&de.push(se(Ve[1],nt?" ":`
`,nt)),ee){switch(typeof xe){case"string":M=0,c=!0,f=0,je=G(xe,!1),c=me,f=Ie,ee.push(q(Oe)+g.col[0]+" "+je+(te?g.com[0]:""));break;case"object":if(xe){ee=null;break}default:ee.push(de[de.length-1]+(te?Te:""));break}M+=g.col[0].length-g.col[2],te&&(M+=g.com[0].length-g.com[2]),we+=M}ke===0?he&&he.e&&de.push(se(he.e[0],`
`)+Ce):de.push(Ce),de.length===0?it=O(g.obj,""):(it=fe+O(g.obj,de.join("")),ee&&(_t=ee.join(" "),_t.length-we<=d&&(it=O(g.obj,_t))))}return N=le,it}}_=r.loadDsf(p,"stringify");var U="",L=a?L=(n.getComment(e)||{}).r:null;return L&&L[0]&&(U=L[0]+`
`),U+=G(e,null,!0,!0),L&&(U+=L[1]||""),U}),sW}var oW,WCe;function pbn(){if(WCe)return oW;WCe=1;var e=XB();function t(c,d,f){var h;return c&&(h={b:c}),d&&((h=h||{}).a=d),f&&((h=h||{}).x=f),h}function n(c,d){if(!(c===null||typeof c!="object")){var f=e.getComment(c);f&&e.removeComment(c);var h,p,m,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,p=c.length;h<p;h++)s(g.a,h,f.a[h],n(c[h]))&&(m=!0);!m&&f.e&&(g.e=t(f.e[0],f.e[1]),m=!0)}else{g={s:{}};var y,v=Object.keys(c);for(f&&f.o?(y=[],f.o.concat(v).forEach(function(_){Object.prototype.hasOwnProperty.call(c,_)&&y.indexOf(_)<0&&y.push(_)})):y=v,g.o=y,h=0,p=y.length;h<p;h++){var b=y[h];s(g.s,b,f.c[b],n(c[b]))&&(m=!0)}!m&&f.e&&(g.e=t(f.e[0],f.e[1]),m=!0)}return d&&f&&f.r&&(g.r=t(f.r[0],f.r[1])),m?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(d){d&&d.trim()!==""&&(c&&(c+="; "),c+=d.trim())}),c}function i(c,d){var f=[];if(l(c,d,f,[]),f.length>0){var h=u(d,null,1);h+=`
# Orphaned comments:
`,f.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),u(d,h,1)}}function s(c,d,f,h){var p=t(f?f[0]:void 0,f?f[1]:void 0,h);return p&&(c[d]=p),p}function o(c,d){var f=t(d.b,d.a);return f.path=c,f}function a(c,d,f){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=f.slice().concat([h]),g=c.a[h];g&&(d.push(o(m,g)),a(g.x,d,m))}else c.o&&c.o.forEach(function(y){var v=f.slice().concat([y]),b=c.s[y];b&&(d.push(o(v,b)),a(b.x,d,v))});c.e&&d.push(o(f,c.e))}}function l(c,d,f,h){if(c){if(d===null||typeof d!="object"){a(c,f,h);return}var p,m=e.createComment(d);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(d)==="[object Array]"){m.a=[];var g=c.a||{};for(var y in g)if(g.hasOwnProperty(y)){p=parseInt(y);var v=c.a[y];if(v){var b=h.slice().concat([p]);p<d.length?(m.a[p]=[v.b,v.a],l(v.x,d[p],f,b)):(f.push(o(b,v)),a(v.x,f,b))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(_){var E=h.slice().concat([_]),S=c.s[_];Object.prototype.hasOwnProperty.call(d,_)?(m.o.push(_),S&&(m.c[_]=[S.b,S.a],l(S.x,d[_],f,E))):S&&(f.push(o(E,S)),a(S.x,f,E))}),c.e&&(m.e=[c.e.b,c.e.a])}}function u(c,d,f){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(d||d==="")&&(h.r[f]=e.forceComment(d)),h.r[f]||""}return oW={extract:function(c){return n(c,!0)},merge:i,header:function(c,d){return u(c,d,0)},footer:function(c,d){return u(c,d,1)}},oW}var aW,GCe;function mbn(){if(GCe)return aW;GCe=1;var e=XB(),t=dbn(),n=fbn(),r=hbn(),i=pbn(),s=Fle();return aW={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},aW}var gbn=mbn();const ybn=()=>{};var YCe={};const NHe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},vbn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Lle={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,h=u&63;l||(h=64,o||(f=64)),r.push(n[c],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(NHe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):vbn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new bbn;const f=s<<2|a>>4;if(r.push(f),u!==64){const h=a<<4&240|u>>2;if(r.push(h),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class bbn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wbn=function(e){const t=NHe(e);return Lle.encodeByteArray(t,!0)},W$=function(e){return wbn(e).replace(/\./g,"")},MHe=function(e){try{return Lle.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function $He(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const xbn=()=>$He().__FIREBASE_DEFAULTS__,_bn=()=>{if(typeof process>"u"||typeof YCe>"u")return;const e=YCe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Ebn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&MHe(e[1]);return t&&JSON.parse(t)},QB=()=>{try{return ybn()||xbn()||_bn()||Ebn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},FHe=e=>{var t,n;return(n=(t=QB())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Cbn=e=>{const t=FHe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},LHe=()=>{var e;return(e=QB())===null||e===void 0?void 0:e.config},jHe=e=>{var t;return(t=QB())===null||t===void 0?void 0:t[`_${e}`]};class XI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function k1(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function jle(e){return(await fetch(e,{credentials:"include"})).ok}function Sbn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[W$(JSON.stringify(n)),W$(JSON.stringify(o)),""].join(".")}const bk={};function Tbn(){const e={prod:[],emulator:[]};for(const t of Object.keys(bk))bk[t]?e.emulator.push(t):e.prod.push(t);return e}function Abn(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let KCe=!1;function BHe(e,t){if(typeof window>"u"||typeof document>"u"||!k1(window.location.host)||bk[e]===t||bk[e]||KCe)return;bk[e]=t;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=Tbn().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{KCe=!0,o()},f}function c(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){const f=Abn(r),h=n("text"),p=document.getElementById(h)||document.createElement("span"),m=n("learnmore"),g=document.getElementById(m)||document.createElement("a"),y=n("preprendIcon"),v=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const b=f.element;a(b),c(g,m);const _=u();l(v,y),b.append(v,p,g,_),document.body.appendChild(b)}s?(p.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,p.innerText="Preview backend running in this workspace."),p.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ml(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kbn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ml())}function Ibn(){var e;const t=(e=QB())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Rbn(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Dbn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Pbn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Obn(){const e=Ml();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Nbn(){return!Ibn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ble(){try{return typeof indexedDB=="object"}catch{return!1}}function Mbn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}const $bn="FirebaseError";class Fm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=$bn,Object.setPrototypeOf(this,Fm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aT.prototype.create)}}class aT{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Fbn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fm(i,a,r)}}function Fbn(e,t){return e.replace(Lbn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Lbn=/\{\$([^}]+)}/g;function jbn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Lw(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(XCe(s)&&XCe(o)){if(!Lw(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function XCe(e){return e!==null&&typeof e=="object"}function rP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Bbn(e,t){const n=new zbn(e,t);return n.subscribe.bind(n)}class zbn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Vbn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=lW),i.error===void 0&&(i.error=lW),i.complete===void 0&&(i.complete=lW);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Vbn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function lW(){}const Ubn=1e3,Hbn=2,qbn=14400*1e3,Wbn=.5;function Gbn(e,t=Ubn,n=Hbn){const r=t*Math.pow(n,e),i=Math.round(Wbn*r*(Math.random()-.5)*2);return Math.min(qbn,r+i)}function zi(e){return e&&e._delegate?e._delegate:e}class hm{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const vb="[DEFAULT]";class Ybn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new XI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),i=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Xbn(t))try{this.getOrInitializeService({instanceIdentifier:vb})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=vb){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=vb){return this.instances.has(t)}getOptions(t=vb){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kbn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=vb){return this.component?this.component.multipleInstances?t:vb:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kbn(e){return e===vb?void 0:e}function Xbn(e){return e.instantiationMode==="EAGER"}class Qbn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Ybn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Nr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Nr||(Nr={}));const Jbn={debug:Nr.DEBUG,verbose:Nr.VERBOSE,info:Nr.INFO,warn:Nr.WARN,error:Nr.ERROR,silent:Nr.SILENT},Zbn=Nr.INFO,ewn={[Nr.DEBUG]:"log",[Nr.VERBOSE]:"log",[Nr.INFO]:"info",[Nr.WARN]:"warn",[Nr.ERROR]:"error"},twn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=ewn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class JB{constructor(t){this.name=t,this._logLevel=Zbn,this._logHandler=twn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Nr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Jbn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Nr.DEBUG,...t),this._logHandler(this,Nr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Nr.VERBOSE,...t),this._logHandler(this,Nr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Nr.INFO,...t),this._logHandler(this,Nr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Nr.WARN,...t),this._logHandler(this,Nr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Nr.ERROR,...t),this._logHandler(this,Nr.ERROR,...t)}}const nwn=(e,t)=>t.some(n=>e instanceof n);let QCe,JCe;function rwn(){return QCe||(QCe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iwn(){return JCe||(JCe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zHe=new WeakMap,wQ=new WeakMap,VHe=new WeakMap,uW=new WeakMap,zle=new WeakMap;function swn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(uv(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&zHe.set(n,e)}).catch(()=>{}),zle.set(t,e),t}function own(e){if(wQ.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});wQ.set(e,t)}let xQ={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return wQ.get(e);if(t==="objectStoreNames")return e.objectStoreNames||VHe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uv(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function awn(e){xQ=e(xQ)}function lwn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(cW(this),t,...n);return VHe.set(r,t.sort?t.sort():[t]),uv(r)}:iwn().includes(e)?function(...t){return e.apply(cW(this),t),uv(zHe.get(this))}:function(...t){return uv(e.apply(cW(this),t))}}function uwn(e){return typeof e=="function"?lwn(e):(e instanceof IDBTransaction&&own(e),nwn(e,rwn())?new Proxy(e,xQ):e)}function uv(e){if(e instanceof IDBRequest)return swn(e);if(uW.has(e))return uW.get(e);const t=uwn(e);return t!==e&&(uW.set(e,t),zle.set(t,e)),t}const cW=e=>zle.get(e);function cwn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=uv(o);return r&&o.addEventListener("upgradeneeded",l=>{r(uv(o.result),l.oldVersion,l.newVersion,uv(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const dwn=["get","getKey","getAll","getAllKeys","count"],fwn=["put","add","delete","clear"],dW=new Map;function ZCe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(dW.get(t))return dW.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=fwn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dwn.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return dW.set(t,s),s}awn(e=>({...e,get:(t,n,r)=>ZCe(t,n)||e.get(t,n,r),has:(t,n)=>!!ZCe(t,n)||e.has(t,n)}));class hwn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pwn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pwn(e){const t=e.getComponent();return t?.type==="VERSION"}const _Q="@firebase/app",eSe="0.13.2";const c0=new JB("@firebase/app"),mwn="@firebase/app-compat",gwn="@firebase/analytics-compat",ywn="@firebase/analytics",vwn="@firebase/app-check-compat",bwn="@firebase/app-check",wwn="@firebase/auth",xwn="@firebase/auth-compat",_wn="@firebase/database",Ewn="@firebase/data-connect",Cwn="@firebase/database-compat",Swn="@firebase/functions",Twn="@firebase/functions-compat",Awn="@firebase/installations",kwn="@firebase/installations-compat",Iwn="@firebase/messaging",Rwn="@firebase/messaging-compat",Dwn="@firebase/performance",Pwn="@firebase/performance-compat",Own="@firebase/remote-config",Nwn="@firebase/remote-config-compat",Mwn="@firebase/storage",$wn="@firebase/storage-compat",Fwn="@firebase/firestore",Lwn="@firebase/ai",jwn="@firebase/firestore-compat",Bwn="firebase",zwn="11.10.0";const EQ="[DEFAULT]",Vwn={[_Q]:"fire-core",[mwn]:"fire-core-compat",[ywn]:"fire-analytics",[gwn]:"fire-analytics-compat",[bwn]:"fire-app-check",[vwn]:"fire-app-check-compat",[wwn]:"fire-auth",[xwn]:"fire-auth-compat",[_wn]:"fire-rtdb",[Ewn]:"fire-data-connect",[Cwn]:"fire-rtdb-compat",[Swn]:"fire-fn",[Twn]:"fire-fn-compat",[Awn]:"fire-iid",[kwn]:"fire-iid-compat",[Iwn]:"fire-fcm",[Rwn]:"fire-fcm-compat",[Dwn]:"fire-perf",[Pwn]:"fire-perf-compat",[Own]:"fire-rc",[Nwn]:"fire-rc-compat",[Mwn]:"fire-gcs",[$wn]:"fire-gcs-compat",[Fwn]:"fire-fst",[jwn]:"fire-fst-compat",[Lwn]:"fire-vertex","fire-js":"fire-js",[Bwn]:"fire-js-all"};const G$=new Map,Uwn=new Map,CQ=new Map;function tSe(e,t){try{e.container.addComponent(t)}catch(n){c0.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function d0(e){const t=e.name;if(CQ.has(t))return c0.debug(`There were multiple attempts to register component ${t}.`),!1;CQ.set(t,e);for(const n of G$.values())tSe(n,e);for(const n of Uwn.values())tSe(n,e);return!0}function lT(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Nc(e){return e==null?!1:e.settings!==void 0}const Hwn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cv=new aT("app","Firebase",Hwn);class qwn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw cv.create("app-deleted",{appName:this._name})}}const kx=zwn;function UHe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:EQ,automaticDataCollectionEnabled:!0},t),i=r.name;if(typeof i!="string"||!i)throw cv.create("bad-app-name",{appName:String(i)});if(n||(n=LHe()),!n)throw cv.create("no-options");const s=G$.get(i);if(s){if(Lw(n,s.options)&&Lw(r,s.config))return s;throw cv.create("duplicate-app",{appName:i})}const o=new Qbn(i);for(const l of CQ.values())o.addComponent(l);const a=new qwn(n,r,o);return G$.set(i,a),a}function Vle(e=EQ){const t=G$.get(e);if(!t&&e===EQ&&LHe())return UHe();if(!t)throw cv.create("no-app",{appName:e});return t}function dh(e,t,n){var r;let i=(r=Vwn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),c0.warn(a.join(" "));return}d0(new hm(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const Wwn="firebase-heartbeat-database",Gwn=1,QI="firebase-heartbeat-store";let fW=null;function HHe(){return fW||(fW=cwn(Wwn,Gwn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(QI)}catch(n){console.warn(n)}}}}).catch(e=>{throw cv.create("idb-open",{originalErrorMessage:e.message})})),fW}async function Ywn(e){try{const n=(await HHe()).transaction(QI),r=await n.objectStore(QI).get(qHe(e));return await n.done,r}catch(t){if(t instanceof Fm)c0.warn(t.message);else{const n=cv.create("idb-get",{originalErrorMessage:t?.message});c0.warn(n.message)}}}async function nSe(e,t){try{const r=(await HHe()).transaction(QI,"readwrite");await r.objectStore(QI).put(t,qHe(e)),await r.done}catch(n){if(n instanceof Fm)c0.warn(n.message);else{const r=cv.create("idb-set",{originalErrorMessage:n?.message});c0.warn(r.message)}}}function qHe(e){return`${e.name}!${e.options.appId}`}const Kwn=1024,Xwn=30;class Qwn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Zwn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rSe();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Xwn){const o=exn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){c0.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rSe(),{heartbeatsToSend:r,unsentEntries:i}=Jwn(this._heartbeatsCache.heartbeats),s=W$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return c0.warn(n),""}}}function rSe(){return new Date().toISOString().substring(0,10)}function Jwn(e,t=Kwn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),iSe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iSe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Zwn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ble()?Mbn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ywn(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nSe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nSe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function iSe(e){return W$(JSON.stringify({version:2,heartbeats:e})).length}function exn(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function txn(e){d0(new hm("platform-logger",t=>new hwn(t),"PRIVATE")),d0(new hm("heartbeat",t=>new Qwn(t),"PRIVATE")),dh(_Q,eSe,e),dh(_Q,eSe,"esm2017"),dh("fire-js","")}txn("");var nxn="firebase",rxn="11.10.0";dh(nxn,rxn,"app");const WHe="firebasestorage.googleapis.com",GHe="storageBucket",ixn=120*1e3,sxn=600*1e3;class Hs extends Fm{constructor(t,n,r=0){super(hW(t),`Firebase Storage: ${n} (${hW(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return hW(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vs;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vs||(Vs={}));function hW(e){return"storage/"+e}function Ule(){const e="An unknown error occurred, please check the error payload for server response.";return new Hs(Vs.UNKNOWN,e)}function oxn(e){return new Hs(Vs.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function axn(e){return new Hs(Vs.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lxn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Hs(Vs.UNAUTHENTICATED,e)}function uxn(){return new Hs(Vs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cxn(e){return new Hs(Vs.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function dxn(){return new Hs(Vs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fxn(){return new Hs(Vs.CANCELED,"User canceled the upload/download.")}function hxn(e){return new Hs(Vs.INVALID_URL,"Invalid URL '"+e+"'.")}function pxn(e){return new Hs(Vs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function mxn(){return new Hs(Vs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+GHe+"' property when initializing the app?")}function gxn(){return new Hs(Vs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yxn(){return new Hs(Vs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function vxn(e){return new Hs(Vs.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function SQ(e){return new Hs(Vs.INVALID_ARGUMENT,e)}function YHe(){return new Hs(Vs.APP_DELETED,"The Firebase app was deleted.")}function bxn(e){return new Hs(Vs.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wk(e,t){return new Hs(Vs.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function j2(e){throw new Hs(Vs.INTERNAL_ERROR,"Internal error: "+e)}class au{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=au.makeFromUrl(t,n)}catch{return new au(t,"")}if(r.path==="")return r;throw pxn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(_){_.path_=decodeURIComponent(_.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},m=n===WHe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:h,indices:p,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let _=0;_<b.length;_++){const E=b[_],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let A=S[E.indices.path];A||(A=""),r=new au(T,A),E.postModify(r);break}}if(r==null)throw hxn(t);return r}}class wxn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function xxn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...g){u||(u=!0,t.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,e(h,l())},g)}function f(){s&&clearTimeout(s)}function h(g,...y){if(u){f();return}if(g){f(),c.call(null,g,...y);return}if(l()||o){f(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let p=!1;function m(g){p||(p=!0,f(),!u&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function _xn(e){e(!1)}function Exn(e){return e!==void 0}function Cxn(e){return typeof e=="object"&&!Array.isArray(e)}function Hle(e){return typeof e=="string"||e instanceof String}function sSe(e){return qle()&&e instanceof Blob}function qle(){return typeof Blob<"u"}function TQ(e,t,n,r){if(r<t)throw SQ(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw SQ(`Invalid value for '${e}'. Expected ${n} or less.`)}function uT(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function KHe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var tw;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(tw||(tw={}));function Sxn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}class Txn{constructor(t,n,r,i,s,o,a,l,u,c,d,f=!0,h=!1){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new FN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===tw.NO_ERROR,l=s.getStatus();if(!a||Sxn(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===tw.ABORT;r(!1,new FN(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new FN(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());Exn(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Ule();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?YHe():fxn();o(l)}else{const l=dxn();o(l)}};this.canceled_?n(!1,new FN(!1,null,!0)):this.backoffId_=xxn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&_xn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class FN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Axn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function kxn(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Ixn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Rxn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Dxn(e,t,n,r,i,s,o=!0,a=!1){const l=KHe(e.urlParams),u=e.url+l,c=Object.assign({},e.headers);return Ixn(c,t),Axn(c,n),kxn(c,s),Rxn(c,r),new Txn(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}function Pxn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Oxn(...e){const t=Pxn();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(qle())return new Blob(e);throw new Hs(Vs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Nxn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function Mxn(e){if(typeof atob>"u")throw vxn("base-64");return atob(e)}const Op={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pW{constructor(t,n){this.data=t,this.contentType=n||null}}function $xn(e,t){switch(e){case Op.RAW:return new pW(XHe(t));case Op.BASE64:case Op.BASE64URL:return new pW(QHe(e,t));case Op.DATA_URL:return new pW(Lxn(t),jxn(t))}throw Ule()}function XHe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Fxn(e){let t;try{t=decodeURIComponent(e)}catch{throw wk(Op.DATA_URL,"Malformed data URL.")}return XHe(t)}function QHe(e,t){switch(e){case Op.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw wk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Op.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw wk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Mxn(t)}catch(i){throw i.message.includes("polyfill")?i:wk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class JHe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw wk(Op.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Bxn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Lxn(e){const t=new JHe(e);return t.base64?QHe(Op.BASE64,t.rest):Fxn(t.rest)}function jxn(e){return new JHe(e).contentType}function Bxn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}class Ry{constructor(t,n){let r=0,i="";sSe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(sSe(this.data_)){const r=this.data_,i=Nxn(r,t,n);return i===null?null:new Ry(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Ry(r,!0)}}static getBlob(...t){if(qle()){const n=t.map(r=>r instanceof Ry?r.data_:r);return new Ry(Oxn.apply(null,n))}else{const n=t.map(o=>Hle(o)?$xn(Op.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ry(i,!0)}}uploadData(){return this.data_}}function Wle(e){let t;try{t=JSON.parse(e)}catch{return null}return Cxn(t)?t:null}function zxn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Vxn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function ZHe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}function Uxn(e,t){return t}class Gl{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Uxn}}let LN=null;function Hxn(e){return!Hle(e)||e.length<2?e:ZHe(e)}function Gle(){if(LN)return LN;const e=[];e.push(new Gl("bucket")),e.push(new Gl("generation")),e.push(new Gl("metageneration")),e.push(new Gl("name","fullPath",!0));function t(s,o){return Hxn(o)}const n=new Gl("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Gl("size");return i.xform=r,e.push(i),e.push(new Gl("timeCreated")),e.push(new Gl("updated")),e.push(new Gl("md5Hash",null,!0)),e.push(new Gl("cacheControl",null,!0)),e.push(new Gl("contentDisposition",null,!0)),e.push(new Gl("contentEncoding",null,!0)),e.push(new Gl("contentLanguage",null,!0)),e.push(new Gl("contentType",null,!0)),e.push(new Gl("metadata","customMetadata",!0)),LN=e,LN}function qxn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new au(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Wxn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return qxn(r,e),r}function eqe(e,t,n){const r=Wle(t);return r===null?null:Wxn(e,r,n)}function Gxn(e,t,n,r){const i=Wle(t);if(i===null||!Hle(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=e.bucket,d=e.fullPath,f="/b/"+o(c)+"/o/"+o(d),h=uT(f,n,r),p=KHe({alt:"media",token:u});return h+p})[0]}function tqe(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}const oSe="prefixes",aSe="items";function Yxn(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[oSe])for(const i of n[oSe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new au(t,s));r.prefixes.push(o)}if(n[aSe])for(const i of n[aSe]){const s=e._makeStorageReference(new au(t,i.name));r.items.push(s)}return r}function Kxn(e,t,n){const r=Wle(n);return r===null?null:Yxn(e,t,r)}class iP{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Yle(e){if(!e)throw Ule()}function nqe(e,t){function n(r,i){const s=eqe(e,i,t);return Yle(s!==null),s}return n}function Xxn(e,t){function n(r,i){const s=Kxn(e,t,i);return Yle(s!==null),s}return n}function Qxn(e,t){function n(r,i){const s=eqe(e,i,t);return Yle(s!==null),Gxn(s,i,e.host,e._protocol)}return n}function Kle(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=uxn():i=lxn():n.getStatus()===402?i=axn(e.bucket):n.getStatus()===403?i=cxn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Xle(e){const t=Kle(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=oxn(e.path)),s.serverResponse=i.serverResponse,s}return n}function Jxn(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=uT(o,e.host,e._protocol),l="GET",u=e.maxOperationRetryTime,c=new iP(a,l,Xxn(e,t.bucket),u);return c.urlParams=s,c.errorHandler=Kle(t),c}function Zxn(e,t,n){const r=t.fullServerUrl(),i=uT(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new iP(i,s,Qxn(e,n),o);return a.errorHandler=Xle(t),a}function e_n(e,t,n,r){const i=t.fullServerUrl(),s=uT(i,e.host,e._protocol),o="PATCH",a=tqe(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=e.maxOperationRetryTime,c=new iP(s,o,nqe(e,r),u);return c.headers=l,c.body=a,c.errorHandler=Xle(t),c}function t_n(e,t){const n=t.fullServerUrl(),r=uT(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(l,u){}const a=new iP(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Xle(t),a}function n_n(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function r_n(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=n_n(null,t)),r}function i_n(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let _=0;_<2;_++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=r_n(t,r,i),c=tqe(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=Ry.getBlob(d,r,f);if(h===null)throw gxn();const p={name:u.fullPath},m=uT(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new iP(m,g,nqe(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=Kle(t),v}class s_n{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tw.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tw.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tw.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i,s){if(this.sent_)throw j2("cannot .send() more than once");if(k1(t)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw j2("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw j2("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw j2("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw j2("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class o_n extends s_n{initXhr(){this.xhr_.responseType="text"}}function sP(){return new o_n}class jw{constructor(t,n){this._service=t,n instanceof au?this._location=n:this._location=au.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new jw(t,n)}get root(){const t=new au(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ZHe(this._location.path)}get storage(){return this._service}get parent(){const t=zxn(this._location.path);if(t===null)return null;const n=new au(this._location.bucket,t);return new jw(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw bxn(t)}}function a_n(e,t,n){e._throwIfRoot("uploadBytes");const r=i_n(e.storage,e._location,Gle(),new Ry(t,!0),n);return e.storage.makeRequestWithTokens(r,sP).then(i=>({metadata:i,ref:e}))}function l_n(e){const t={prefixes:[],items:[]};return rqe(e,t).then(()=>t)}async function rqe(e,t,n){const i=await u_n(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await rqe(e,t,i.nextPageToken)}function u_n(e,t){t!=null&&typeof t.maxResults=="number"&&TQ("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=Jxn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,sP)}function c_n(e,t){e._throwIfRoot("updateMetadata");const n=e_n(e.storage,e._location,t,Gle());return e.storage.makeRequestWithTokens(n,sP)}function d_n(e){e._throwIfRoot("getDownloadURL");const t=Zxn(e.storage,e._location,Gle());return e.storage.makeRequestWithTokens(t,sP).then(n=>{if(n===null)throw yxn();return n})}function f_n(e){e._throwIfRoot("deleteObject");const t=t_n(e.storage,e._location);return e.storage.makeRequestWithTokens(t,sP)}function h_n(e,t){const n=Vxn(e._location.path,t),r=new au(e._location.bucket,n);return new jw(e.storage,r)}function p_n(e){return/^[A-Za-z]+:\/\//.test(e)}function m_n(e,t){return new jw(e,t)}function iqe(e,t){if(e instanceof Qle){const n=e;if(n._bucket==null)throw mxn();const r=new jw(n,n._bucket);return t!=null?iqe(r,t):r}else return t!==void 0?h_n(e,t):e}function g_n(e,t){if(t&&p_n(t)){if(e instanceof Qle)return m_n(e,t);throw SQ("To use ref(service, url), the first argument must be a Storage instance.")}else return iqe(e,t)}function lSe(e,t){const n=t?.[GHe];return n==null?null:au.makeFromBucketSpec(n,e)}function y_n(e,t,n,r={}){e.host=`${t}:${n}`;const i=k1(t);i&&(jle(`https://${e.host}/b`),BHe("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken=typeof s=="string"?s:Sbn(s,e.app.options.projectId))}class Qle{constructor(t,n,r,i,s,o=!1){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=WHe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ixn,this._maxUploadRetryTime=sxn,this._requests=new Set,i!=null?this._bucket=au.makeFromBucketSpec(i,this._host):this._bucket=lSe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=au.makeFromBucketSpec(this._url,t):this._bucket=lSe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){TQ("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){TQ("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Nc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new jw(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new wxn(YHe());{const o=Dxn(t,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const uSe="@firebase/storage",cSe="0.13.14";const sqe="storage";function mW(e,t,n){return e=zi(e),a_n(e,t,n)}function v_n(e,t){return e=zi(e),c_n(e,t)}function gW(e){return e=zi(e),l_n(e)}function B2(e){return e=zi(e),d_n(e)}function dSe(e){return e=zi(e),f_n(e)}function xd(e,t){return e=zi(e),g_n(e,t)}function jN(e=Vle(),t){e=zi(e);const r=lT(e,sqe).getImmediate({identifier:t}),i=Cbn("storage");return i&&b_n(r,...i),r}function b_n(e,t,n,r={}){y_n(e,t,n,r)}function w_n(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Qle(n,r,i,t,kx)}function x_n(){d0(new hm(sqe,w_n,"PUBLIC").setMultipleInstances(!0)),dh(uSe,cSe,""),dh(uSe,cSe,"esm2017")}x_n();var fSe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var dv,oqe;(function(){var e;function t(T,A){function R(){}R.prototype=A.prototype,T.D=A.prototype,T.prototype=new R,T.prototype.constructor=T,T.C=function(I,P,N){for(var M=Array(arguments.length-2),O=2;O<arguments.length;O++)M[O-2]=arguments[O];return A.prototype[P].apply(I,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,A,R){R||(R=0);var I=Array(16);if(typeof A=="string")for(var P=0;16>P;++P)I[P]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(P=0;16>P;++P)I[P]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=T.g[0],R=T.g[1],P=T.g[2];var N=T.g[3],M=A+(N^R&(P^N))+I[0]+3614090360&4294967295;A=R+(M<<7&4294967295|M>>>25),M=N+(P^A&(R^P))+I[1]+3905402710&4294967295,N=A+(M<<12&4294967295|M>>>20),M=P+(R^N&(A^R))+I[2]+606105819&4294967295,P=N+(M<<17&4294967295|M>>>15),M=R+(A^P&(N^A))+I[3]+3250441966&4294967295,R=P+(M<<22&4294967295|M>>>10),M=A+(N^R&(P^N))+I[4]+4118548399&4294967295,A=R+(M<<7&4294967295|M>>>25),M=N+(P^A&(R^P))+I[5]+1200080426&4294967295,N=A+(M<<12&4294967295|M>>>20),M=P+(R^N&(A^R))+I[6]+2821735955&4294967295,P=N+(M<<17&4294967295|M>>>15),M=R+(A^P&(N^A))+I[7]+4249261313&4294967295,R=P+(M<<22&4294967295|M>>>10),M=A+(N^R&(P^N))+I[8]+1770035416&4294967295,A=R+(M<<7&4294967295|M>>>25),M=N+(P^A&(R^P))+I[9]+2336552879&4294967295,N=A+(M<<12&4294967295|M>>>20),M=P+(R^N&(A^R))+I[10]+4294925233&4294967295,P=N+(M<<17&4294967295|M>>>15),M=R+(A^P&(N^A))+I[11]+2304563134&4294967295,R=P+(M<<22&4294967295|M>>>10),M=A+(N^R&(P^N))+I[12]+1804603682&4294967295,A=R+(M<<7&4294967295|M>>>25),M=N+(P^A&(R^P))+I[13]+4254626195&4294967295,N=A+(M<<12&4294967295|M>>>20),M=P+(R^N&(A^R))+I[14]+2792965006&4294967295,P=N+(M<<17&4294967295|M>>>15),M=R+(A^P&(N^A))+I[15]+1236535329&4294967295,R=P+(M<<22&4294967295|M>>>10),M=A+(P^N&(R^P))+I[1]+4129170786&4294967295,A=R+(M<<5&4294967295|M>>>27),M=N+(R^P&(A^R))+I[6]+3225465664&4294967295,N=A+(M<<9&4294967295|M>>>23),M=P+(A^R&(N^A))+I[11]+643717713&4294967295,P=N+(M<<14&4294967295|M>>>18),M=R+(N^A&(P^N))+I[0]+3921069994&4294967295,R=P+(M<<20&4294967295|M>>>12),M=A+(P^N&(R^P))+I[5]+3593408605&4294967295,A=R+(M<<5&4294967295|M>>>27),M=N+(R^P&(A^R))+I[10]+38016083&4294967295,N=A+(M<<9&4294967295|M>>>23),M=P+(A^R&(N^A))+I[15]+3634488961&4294967295,P=N+(M<<14&4294967295|M>>>18),M=R+(N^A&(P^N))+I[4]+3889429448&4294967295,R=P+(M<<20&4294967295|M>>>12),M=A+(P^N&(R^P))+I[9]+568446438&4294967295,A=R+(M<<5&4294967295|M>>>27),M=N+(R^P&(A^R))+I[14]+3275163606&4294967295,N=A+(M<<9&4294967295|M>>>23),M=P+(A^R&(N^A))+I[3]+4107603335&4294967295,P=N+(M<<14&4294967295|M>>>18),M=R+(N^A&(P^N))+I[8]+1163531501&4294967295,R=P+(M<<20&4294967295|M>>>12),M=A+(P^N&(R^P))+I[13]+2850285829&4294967295,A=R+(M<<5&4294967295|M>>>27),M=N+(R^P&(A^R))+I[2]+4243563512&4294967295,N=A+(M<<9&4294967295|M>>>23),M=P+(A^R&(N^A))+I[7]+1735328473&4294967295,P=N+(M<<14&4294967295|M>>>18),M=R+(N^A&(P^N))+I[12]+2368359562&4294967295,R=P+(M<<20&4294967295|M>>>12),M=A+(R^P^N)+I[5]+4294588738&4294967295,A=R+(M<<4&4294967295|M>>>28),M=N+(A^R^P)+I[8]+2272392833&4294967295,N=A+(M<<11&4294967295|M>>>21),M=P+(N^A^R)+I[11]+1839030562&4294967295,P=N+(M<<16&4294967295|M>>>16),M=R+(P^N^A)+I[14]+4259657740&4294967295,R=P+(M<<23&4294967295|M>>>9),M=A+(R^P^N)+I[1]+2763975236&4294967295,A=R+(M<<4&4294967295|M>>>28),M=N+(A^R^P)+I[4]+1272893353&4294967295,N=A+(M<<11&4294967295|M>>>21),M=P+(N^A^R)+I[7]+4139469664&4294967295,P=N+(M<<16&4294967295|M>>>16),M=R+(P^N^A)+I[10]+3200236656&4294967295,R=P+(M<<23&4294967295|M>>>9),M=A+(R^P^N)+I[13]+681279174&4294967295,A=R+(M<<4&4294967295|M>>>28),M=N+(A^R^P)+I[0]+3936430074&4294967295,N=A+(M<<11&4294967295|M>>>21),M=P+(N^A^R)+I[3]+3572445317&4294967295,P=N+(M<<16&4294967295|M>>>16),M=R+(P^N^A)+I[6]+76029189&4294967295,R=P+(M<<23&4294967295|M>>>9),M=A+(R^P^N)+I[9]+3654602809&4294967295,A=R+(M<<4&4294967295|M>>>28),M=N+(A^R^P)+I[12]+3873151461&4294967295,N=A+(M<<11&4294967295|M>>>21),M=P+(N^A^R)+I[15]+530742520&4294967295,P=N+(M<<16&4294967295|M>>>16),M=R+(P^N^A)+I[2]+3299628645&4294967295,R=P+(M<<23&4294967295|M>>>9),M=A+(P^(R|~N))+I[0]+4096336452&4294967295,A=R+(M<<6&4294967295|M>>>26),M=N+(R^(A|~P))+I[7]+1126891415&4294967295,N=A+(M<<10&4294967295|M>>>22),M=P+(A^(N|~R))+I[14]+2878612391&4294967295,P=N+(M<<15&4294967295|M>>>17),M=R+(N^(P|~A))+I[5]+4237533241&4294967295,R=P+(M<<21&4294967295|M>>>11),M=A+(P^(R|~N))+I[12]+1700485571&4294967295,A=R+(M<<6&4294967295|M>>>26),M=N+(R^(A|~P))+I[3]+2399980690&4294967295,N=A+(M<<10&4294967295|M>>>22),M=P+(A^(N|~R))+I[10]+4293915773&4294967295,P=N+(M<<15&4294967295|M>>>17),M=R+(N^(P|~A))+I[1]+2240044497&4294967295,R=P+(M<<21&4294967295|M>>>11),M=A+(P^(R|~N))+I[8]+1873313359&4294967295,A=R+(M<<6&4294967295|M>>>26),M=N+(R^(A|~P))+I[15]+4264355552&4294967295,N=A+(M<<10&4294967295|M>>>22),M=P+(A^(N|~R))+I[6]+2734768916&4294967295,P=N+(M<<15&4294967295|M>>>17),M=R+(N^(P|~A))+I[13]+1309151649&4294967295,R=P+(M<<21&4294967295|M>>>11),M=A+(P^(R|~N))+I[4]+4149444226&4294967295,A=R+(M<<6&4294967295|M>>>26),M=N+(R^(A|~P))+I[11]+3174756917&4294967295,N=A+(M<<10&4294967295|M>>>22),M=P+(A^(N|~R))+I[2]+718787259&4294967295,P=N+(M<<15&4294967295|M>>>17),M=R+(N^(P|~A))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(P+(M<<21&4294967295|M>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var R=A-this.blockSize,I=this.B,P=this.h,N=0;N<A;){if(P==0)for(;N<=R;)i(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<A;)if(I[P++]=T.charCodeAt(N++),P==this.blockSize){i(this,I),P=0;break}}else for(;N<A;)if(I[P++]=T[N++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var R=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=R&255,R/=256;for(this.u(T),T=Array(16),A=R=0;4>A;++A)for(var I=0;32>I;I+=8)T[R++]=this.g[A]>>>I&255;return T};function s(T,A){var R=a;return Object.prototype.hasOwnProperty.call(R,T)?R[T]:R[T]=A(T)}function o(T,A){this.h=A;for(var R=[],I=!0,P=T.length-1;0<=P;P--){var N=T[P]|0;I&&N==A||(R[P]=N,I=!1)}this.g=R}var a={};function l(T){return-128<=T&&128>T?s(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(0>T)return g(u(-T));for(var A=[],R=1,I=0;T>=R;I++)A[I]=T/R|0,R*=4294967296;return new o(A,0)}function c(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return g(c(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=u(Math.pow(A,8)),I=d,P=0;P<T.length;P+=8){var N=Math.min(8,T.length-P),M=parseInt(T.substring(P,P+N),A);8>N?(N=u(Math.pow(A,N)),I=I.j(N).add(u(M))):(I=I.j(R),I=I.add(u(M)))}return I}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,A=1,R=0;R<this.g.length;R++){var I=this.i(R);T+=(0<=I?I:4294967296+I)*A,A*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var A=u(Math.pow(T,6)),R=this,I="";;){var P=_(R,A).g;R=y(R,P.j(A));var N=((0<R.g.length?R.g[0]:R.h)>>>0).toString(T);if(R=P,p(R))return N+I;for(;6>N.length;)N="0"+N;I=N+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var A=T.g.length,R=[],I=0;I<A;I++)R[I]=~T.g[I];return new o(R,~T.h).add(f)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],I=0,P=0;P<=A;P++){var N=I+(this.i(P)&65535)+(T.i(P)&65535),M=(N>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);I=M>>>16,N&=65535,M&=65535,R[P]=M<<16|N}return new o(R,R[R.length-1]&-2147483648?-1:0)};function y(T,A){return T.add(g(A))}e.j=function(T){if(p(this)||p(T))return d;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return u(this.m()*T.m());for(var A=this.g.length+T.g.length,R=[],I=0;I<2*A;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(var P=0;P<T.g.length;P++){var N=this.i(I)>>>16,M=this.i(I)&65535,O=T.i(P)>>>16,j=T.i(P)&65535;R[2*I+2*P]+=M*j,v(R,2*I+2*P),R[2*I+2*P+1]+=N*j,v(R,2*I+2*P+1),R[2*I+2*P+1]+=M*O,v(R,2*I+2*P+1),R[2*I+2*P+2]+=N*O,v(R,2*I+2*P+2)}for(I=0;I<A;I++)R[I]=R[2*I+1]<<16|R[2*I];for(I=A;I<2*A;I++)R[I]=0;return new o(R,0)};function v(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function b(T,A){this.g=T,this.h=A}function _(T,A){if(p(A))throw Error("division by zero");if(p(T))return new b(d,d);if(m(T))return A=_(g(T),A),new b(g(A.g),g(A.h));if(m(A))return A=_(T,g(A)),new b(g(A.g),A.h);if(30<T.g.length){if(m(T)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var R=f,I=A;0>=I.l(T);)R=E(R),I=E(I);var P=S(R,1),N=S(I,1);for(I=S(I,2),R=S(R,2);!p(I);){var M=N.add(I);0>=M.l(T)&&(P=P.add(R),N=M),I=S(I,1),R=S(R,1)}return A=y(T,P.j(A)),new b(P,A)}for(P=d;0<=T.l(A);){for(R=Math.max(1,Math.floor(T.m()/A.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),N=u(R),M=N.j(A);m(M)||0<M.l(T);)R-=I,N=u(R),M=N.j(A);p(N)&&(N=f),P=P.add(N),T=y(T,M)}return new b(P,T)}e.A=function(T){return _(this,T).h},e.and=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],I=0;I<A;I++)R[I]=this.i(I)&T.i(I);return new o(R,this.h&T.h)},e.or=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],I=0;I<A;I++)R[I]=this.i(I)|T.i(I);return new o(R,this.h|T.h)},e.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),R=[],I=0;I<A;I++)R[I]=this.i(I)^T.i(I);return new o(R,this.h^T.h)};function E(T){for(var A=T.g.length+1,R=[],I=0;I<A;I++)R[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(R,T.h)}function S(T,A){var R=A>>5;A%=32;for(var I=T.g.length-R,P=[],N=0;N<I;N++)P[N]=0<A?T.i(N+R)>>>A|T.i(N+R+1)<<32-A:T.i(N+R);return new o(P,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,oqe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,dv=o}).apply(typeof fSe<"u"?fSe:typeof self<"u"?self:typeof window<"u"?window:{});var BN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var aqe,DA,lqe,BM,AQ,uqe,cqe,dqe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function($,J,re){return $==Array.prototype||$==Object.prototype||($[J]=re.value),$};function n($){$=[typeof globalThis=="object"&&globalThis,$,typeof window=="object"&&window,typeof self=="object"&&self,typeof BN=="object"&&BN];for(var J=0;J<$.length;++J){var re=$[J];if(re&&re.Math==Math)return re}throw Error("Cannot find global object")}var r=n(this);function i($,J){if(J)e:{var re=r;$=$.split(".");for(var be=0;be<$.length-1;be++){var We=$[be];if(!(We in re))break e;re=re[We]}$=$[$.length-1],be=re[$],J=J(be),J!=be&&J!=null&&t(re,$,{configurable:!0,writable:!0,value:J})}}function s($,J){$ instanceof String&&($+="");var re=0,be=!1,We={next:function(){if(!be&&re<$.length){var Ze=re++;return{value:J(Ze,$[Ze]),done:!1}}return be=!0,{done:!0,value:void 0}}};return We[Symbol.iterator]=function(){return We},We}i("Array.prototype.values",function($){return $||function(){return s(this,function(J,re){return re})}});var o=o||{},a=this||self;function l($){var J=typeof $;return J=J!="object"?J:$?Array.isArray($)?"array":J:"null",J=="array"||J=="object"&&typeof $.length=="number"}function u($){var J=typeof $;return J=="object"&&$!=null||J=="function"}function c($,J,re){return $.call.apply($.bind,arguments)}function d($,J,re){if(!$)throw Error();if(2<arguments.length){var be=Array.prototype.slice.call(arguments,2);return function(){var We=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(We,be),$.apply(J,We)}}return function(){return $.apply(J,arguments)}}function f($,J,re){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function h($,J){var re=Array.prototype.slice.call(arguments,1);return function(){var be=re.slice();return be.push.apply(be,arguments),$.apply(this,be)}}function p($,J){function re(){}re.prototype=J.prototype,$.aa=J.prototype,$.prototype=new re,$.prototype.constructor=$,$.Qb=function(be,We,Ze){for(var Lt=Array(arguments.length-2),Ci=2;Ci<arguments.length;Ci++)Lt[Ci-2]=arguments[Ci];return J.prototype[We].apply(be,Lt)}}function m($){const J=$.length;if(0<J){const re=Array(J);for(let be=0;be<J;be++)re[be]=$[be];return re}return[]}function g($,J){for(let re=1;re<arguments.length;re++){const be=arguments[re];if(l(be)){const We=$.length||0,Ze=be.length||0;$.length=We+Ze;for(let Lt=0;Lt<Ze;Lt++)$[We+Lt]=be[Lt]}else $.push(be)}}class y{constructor(J,re){this.i=J,this.j=re,this.h=0,this.g=null}get(){let J;return 0<this.h?(this.h--,J=this.g,this.g=J.next,J.next=null):J=this.i(),J}}function v($){return/^[\s\xa0]*$/.test($)}function b(){var $=a.navigator;return $&&($=$.userAgent)?$:""}function _($){return _[" "]($),$}_[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S($,J,re){for(const be in $)J.call(re,$[be],be,$)}function T($,J){for(const re in $)J.call(void 0,$[re],re,$)}function A($){const J={};for(const re in $)J[re]=$[re];return J}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I($,J){let re,be;for(let We=1;We<arguments.length;We++){be=arguments[We];for(re in be)$[re]=be[re];for(let Ze=0;Ze<R.length;Ze++)re=R[Ze],Object.prototype.hasOwnProperty.call(be,re)&&($[re]=be[re])}}function P($){var J=1;$=$.split(":");const re=[];for(;0<J&&$.length;)re.push($.shift()),J--;return $.length&&re.push($.join(":")),re}function N($){a.setTimeout(()=>{throw $},0)}function M(){var $=G;let J=null;return $.g&&(J=$.g,$.g=$.g.next,$.g||($.h=null),J.next=null),J}class O{constructor(){this.h=this.g=null}add(J,re){const be=j.get();be.set(J,re),this.h?this.h.next=be:this.g=be,this.h=be}}var j=new y(()=>new B,$=>$.reset());class B{constructor(){this.next=this.g=this.h=null}set(J,re){this.h=J,this.g=re,this.next=null}reset(){this.next=this.g=this.h=null}}let H,q=!1,G=new O,U=()=>{const $=a.Promise.resolve(void 0);H=()=>{$.then(L)}};var L=()=>{for(var $;$=M();){try{$.h.call($.g)}catch(re){N(re)}var J=j;J.j($),100>J.h&&(J.h++,$.next=J.g,J.g=$)}q=!1};function z(){this.s=this.s,this.C=this.C}z.prototype.s=!1,z.prototype.ma=function(){this.s||(this.s=!0,this.N())},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V($,J){this.type=$,this.g=this.target=J,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var Y=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var $=!1,J=Object.defineProperty({},"passive",{get:function(){$=!0}});try{const re=()=>{};a.addEventListener("test",re,J),a.removeEventListener("test",re,J)}catch{}return $})();function Q($,J){if(V.call(this,$?$.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,$){var re=this.type=$.type,be=$.changedTouches&&$.changedTouches.length?$.changedTouches[0]:null;if(this.target=$.target||$.srcElement,this.g=J,J=$.relatedTarget){if(E){e:{try{_(J.nodeName);var We=!0;break e}catch{}We=!1}We||(J=null)}}else re=="mouseover"?J=$.fromElement:re=="mouseout"&&(J=$.toElement);this.relatedTarget=J,be?(this.clientX=be.clientX!==void 0?be.clientX:be.pageX,this.clientY=be.clientY!==void 0?be.clientY:be.pageY,this.screenX=be.screenX||0,this.screenY=be.screenY||0):(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0),this.button=$.button,this.key=$.key||"",this.ctrlKey=$.ctrlKey,this.altKey=$.altKey,this.shiftKey=$.shiftKey,this.metaKey=$.metaKey,this.pointerId=$.pointerId||0,this.pointerType=typeof $.pointerType=="string"?$.pointerType:ne[$.pointerType]||"",this.state=$.state,this.i=$,$.defaultPrevented&&Q.aa.h.call(this)}}p(Q,V);var ne={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var $=this.i;$.preventDefault?$.preventDefault():$.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),se=0;function ae($,J,re,be,We){this.listener=$,this.proxy=null,this.src=J,this.type=re,this.capture=!!be,this.ha=We,this.key=++se,this.da=this.fa=!1}function he($){$.da=!0,$.listener=null,$.proxy=null,$.src=null,$.ha=null}function ie($){this.src=$,this.g={},this.h=0}ie.prototype.add=function($,J,re,be,We){var Ze=$.toString();$=this.g[Ze],$||($=this.g[Ze]=[],this.h++);var Lt=Ce($,J,be,We);return-1<Lt?(J=$[Lt],re||(J.fa=!1)):(J=new ae(J,this.src,Ze,!!be,We),J.fa=re,$.push(J)),J};function le($,J){var re=J.type;if(re in $.g){var be=$.g[re],We=Array.prototype.indexOf.call(be,J,void 0),Ze;(Ze=0<=We)&&Array.prototype.splice.call(be,We,1),Ze&&(he(J),$.g[re].length==0&&(delete $.g[re],$.h--))}}function Ce($,J,re,be){for(var We=0;We<$.length;++We){var Ze=$[We];if(!Ze.da&&Ze.listener==J&&Ze.capture==!!re&&Ze.ha==be)return We}return-1}var X="closure_lm_"+(1e6*Math.random()|0),fe={};function de($,J,re,be,We){if(Array.isArray(J)){for(var Ze=0;Ze<J.length;Ze++)de($,J[Ze],re,be,We);return null}return re=Oe(re),$&&$[ue]?$.K(J,re,u(be)?!!be.capture:!1,We):te($,J,re,!1,be,We)}function te($,J,re,be,We,Ze){if(!J)throw Error("Invalid event type");var Lt=u(We)?!!We.capture:!!We,Ci=Me($);if(Ci||($[X]=Ci=new ie($)),re=Ci.add(J,re,be,Lt,Ze),re.proxy)return re;if(be=ee(),re.proxy=be,be.src=$,be.listener=re,$.addEventListener)Y||(We=Lt),We===void 0&&(We=!1),$.addEventListener(J.toString(),be,We);else if($.attachEvent)$.attachEvent(Te(J.toString()),be);else if($.addListener&&$.removeListener)$.addListener(be);else throw Error("addEventListener and attachEvent are unavailable.");return re}function ee(){function $(re){return J.call($.src,$.listener,re)}const J=we;return $}function me($,J,re,be,We){if(Array.isArray(J))for(var Ze=0;Ze<J.length;Ze++)me($,J[Ze],re,be,We);else be=u(be)?!!be.capture:!!be,re=Oe(re),$&&$[ue]?($=$.i,J=String(J).toString(),J in $.g&&(Ze=$.g[J],re=Ce(Ze,re,be,We),-1<re&&(he(Ze[re]),Array.prototype.splice.call(Ze,re,1),Ze.length==0&&(delete $.g[J],$.h--)))):$&&($=Me($))&&(J=$.g[J.toString()],$=-1,J&&($=Ce(J,re,be,We)),(re=-1<$?J[$]:null)&&Ie(re))}function Ie($){if(typeof $!="number"&&$&&!$.da){var J=$.src;if(J&&J[ue])le(J.i,$);else{var re=$.type,be=$.proxy;J.removeEventListener?J.removeEventListener(re,be,$.capture):J.detachEvent?J.detachEvent(Te(re),be):J.addListener&&J.removeListener&&J.removeListener(be),(re=Me(J))?(le(re,$),re.h==0&&(re.src=null,J[X]=null)):he($)}}}function Te($){return $ in fe?fe[$]:fe[$]="on"+$}function we($,J){if($.da)$=!0;else{J=new Q(J,this);var re=$.listener,be=$.ha||$.src;$.fa&&Ie($),$=re.call(be,J)}return $}function Me($){return $=$[X],$ instanceof ie?$:null}var ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Oe($){return typeof $=="function"?$:($[ke]||($[ke]=function(J){return $.handleEvent(J)}),$[ke])}function xe(){z.call(this),this.i=new ie(this),this.M=this,this.F=null}p(xe,z),xe.prototype[ue]=!0,xe.prototype.removeEventListener=function($,J,re,be){me(this,$,J,re,be)};function je($,J){var re,be=$.F;if(be)for(re=[];be;be=be.F)re.push(be);if($=$.M,be=J.type||J,typeof J=="string")J=new V(J,$);else if(J instanceof V)J.target=J.target||$;else{var We=J;J=new V(be,$),I(J,We)}if(We=!0,re)for(var Ze=re.length-1;0<=Ze;Ze--){var Lt=J.g=re[Ze];We=Ve(Lt,be,!0,J)&&We}if(Lt=J.g=$,We=Ve(Lt,be,!0,J)&&We,We=Ve(Lt,be,!1,J)&&We,re)for(Ze=0;Ze<re.length;Ze++)Lt=J.g=re[Ze],We=Ve(Lt,be,!1,J)&&We}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var $=this.i,J;for(J in $.g){for(var re=$.g[J],be=0;be<re.length;be++)he(re[be]);delete $.g[J],$.h--}}this.F=null},xe.prototype.K=function($,J,re,be){return this.i.add(String($),J,!1,re,be)},xe.prototype.L=function($,J,re,be){return this.i.add(String($),J,!0,re,be)};function Ve($,J,re,be){if(J=$.i.g[String(J)],!J)return!0;J=J.concat();for(var We=!0,Ze=0;Ze<J.length;++Ze){var Lt=J[Ze];if(Lt&&!Lt.da&&Lt.capture==re){var Ci=Lt.listener,Po=Lt.ha||Lt.src;Lt.fa&&le($.i,Lt),We=Ci.call(Po,be)!==!1&&We}}return We&&!be.defaultPrevented}function nt($,J,re){if(typeof $=="function")re&&($=f($,re));else if($&&typeof $.handleEvent=="function")$=f($.handleEvent,$);else throw Error("Invalid listener argument");return 2147483647<Number(J)?-1:a.setTimeout($,J||0)}function it($){$.g=nt(()=>{$.g=null,$.i&&($.i=!1,it($))},$.l);const J=$.h;$.h=null,$.m.apply(null,J)}class _t extends z{constructor(J,re){super(),this.m=J,this.l=re,this.h=null,this.i=!1,this.g=null}j(J){this.h=arguments,this.g?this.i=!0:it(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rn($){z.call(this),this.h=$,this.g={}}p(rn,z);var en=[];function zn($){S($.g,function(J,re){this.g.hasOwnProperty(re)&&Ie(J)},$),$.g={}}rn.prototype.N=function(){rn.aa.N.call(this),zn(this)},rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zt=a.JSON.stringify,wn=a.JSON.parse,nr=class{stringify($){return a.JSON.stringify($,void 0)}parse($){return a.JSON.parse($,void 0)}};function Yn(){}Yn.prototype.h=null;function Ur($){return $.h||($.h=$.i())}function or(){}var Ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){V.call(this,"d")}p(On,V);function gn(){V.call(this,"c")}p(gn,V);var cr={},xi=null;function Rr(){return xi=xi||new xe}cr.La="serverreachability";function Nn($){V.call(this,cr.La,$)}p(Nn,V);function mt($){const J=Rr();je(J,new Nn(J))}cr.STAT_EVENT="statevent";function Cr($,J){V.call(this,cr.STAT_EVENT,$),this.stat=J}p(Cr,V);function Xt($){const J=Rr();je(J,new Cr(J,$))}cr.Ma="timingevent";function dr($,J){V.call(this,cr.Ma,$),this.size=J}p(dr,V);function vn($,J){if(typeof $!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){$()},J)}function ar(){this.g=!0}ar.prototype.xa=function(){this.g=!1};function Or($,J,re,be,We,Ze){$.info(function(){if($.g)if(Ze)for(var Lt="",Ci=Ze.split("&"),Po=0;Po<Ci.length;Po++){var Wr=Ci[Po].split("=");if(1<Wr.length){var na=Wr[0];Wr=Wr[1];var go=na.split("_");Lt=2<=go.length&&go[1]=="type"?Lt+(na+"="+Wr+"&"):Lt+(na+"=redacted&")}}else Lt=null;else Lt=Ze;return"XMLHTTP REQ ("+be+") [attempt "+We+"]: "+J+`
`+re+`
`+Lt})}function Hr($,J,re,be,We,Ze,Lt){$.info(function(){return"XMLHTTP RESP ("+be+") [ attempt "+We+"]: "+J+`
`+re+`
`+Ze+" "+Lt})}function qr($,J,re,be){$.info(function(){return"XMLHTTP TEXT ("+J+"): "+Ja($,re)+(be?" "+be:"")})}function ko($,J){$.info(function(){return"TIMEOUT: "+J})}ar.prototype.info=function(){};function Ja($,J){if(!$.g)return J;if(!J)return null;try{var re=JSON.parse(J);if(re){for($=0;$<re.length;$++)if(Array.isArray(re[$])){var be=re[$];if(!(2>be.length)){var We=be[1];if(Array.isArray(We)&&!(1>We.length)){var Ze=We[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var Lt=1;Lt<We.length;Lt++)We[Lt]=""}}}}return zt(re)}catch{return J}}var Tu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Ji(){}p(Ji,Yn),Ji.prototype.g=function(){return new XMLHttpRequest},Ji.prototype.i=function(){return{}},Kn=new Ji;function Io($,J,re,be){this.j=$,this.i=J,this.l=re,this.R=be||1,this.U=new rn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xh}function Xh(){this.i=null,this.g="",this.h=!1}var wf={},sd={};function od($,J,re){$.L=1,$.v=lr(ht(J)),$.m=re,$.P=!0,Ro($,null)}function Ro($,J){$.F=Date.now(),Sr($),$.A=ht($.v);var re=$.A,be=$.R;Array.isArray(be)||(be=[String(be)]),ld(re.i,"t",be),$.C=0,re=$.j.J,$.h=new Xh,$.g=_P($.j,re?J:null,!$.m),0<$.O&&($.M=new _t(f($.Y,$,$.g),$.O)),J=$.U,re=$.g,be=$.ca;var We="readystatechange";Array.isArray(We)||(We&&(en[0]=We.toString()),We=en);for(var Ze=0;Ze<We.length;Ze++){var Lt=de(re,We[Ze],be||J.handleEvent,!1,J.h||J);if(!Lt)break;J.g[Lt.key]=Lt}J=$.H?A($.H):{},$.m?($.u||($.u="POST"),J["Content-Type"]="application/x-www-form-urlencoded",$.g.ea($.A,$.u,$.m,J)):($.u="GET",$.g.ea($.A,$.u,null,J)),mt(),Or($.i,$.u,$.A,$.l,$.R,$.m)}Io.prototype.ca=function($){$=$.target;const J=this.M;J&&yr($)==3?J.j():this.Y($)},Io.prototype.Y=function($){try{if($==this.g)e:{const go=yr(this.g);var J=this.g.Ba();const ud=this.g.Z();if(!(3>go)&&(go!=3||this.g&&(this.h.h||this.g.oa()||hi(this.g)))){this.J||go!=4||J==7||(J==8||0>=ud?mt(3):mt(2)),qs(this);var re=this.g.Z();this.X=re;t:if(Qh(this)){var be=hi(this.g);$="";var We=be.length,Ze=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ws(this),ea(this);var Lt="";break t}this.h.i=new a.TextDecoder}for(J=0;J<We;J++)this.h.h=!0,$+=this.h.i.decode(be[J],{stream:!(Ze&&J==We-1)});be.length=0,this.h.g+=$,this.C=0,Lt=this.h.g}else Lt=this.g.oa();if(this.o=re==200,Hr(this.i,this.u,this.A,this.l,this.R,go,re),this.o){if(this.T&&!this.K){t:{if(this.g){var Ci,Po=this.g;if((Ci=Po.g?Po.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ci)){var Wr=Ci;break t}}Wr=null}if(re=Wr)qr(this.i,this.l,re,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bc(this,re);else{this.o=!1,this.s=3,Xt(12),Ws(this),ea(this);break e}}if(this.P){re=!0;let _c;for(;!this.J&&this.C<Lt.length;)if(_c=vc(this,Lt),_c==sd){go==4&&(this.s=4,Xt(14),re=!1),qr(this.i,this.l,null,"[Incomplete Response]");break}else if(_c==wf){this.s=4,Xt(15),qr(this.i,this.l,Lt,"[Invalid Chunk]"),re=!1;break}else qr(this.i,this.l,_c,null),bc(this,_c);if(Qh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),go!=4||Lt.length!=0||this.h.h||(this.s=1,Xt(16),re=!1),this.o=this.o&&re,!re)qr(this.i,this.l,Lt,"[Invalid Chunked Response]"),Ws(this),ea(this);else if(0<Lt.length&&!this.W){this.W=!0;var na=this.j;na.g==this&&na.ba&&!na.M&&(na.j.info("Great, no buffering proxy detected. Bytes received: "+Lt.length),gT(na),na.M=!0,Xt(11))}}else qr(this.i,this.l,Lt,null),bc(this,Lt);go==4&&Ws(this),this.o&&!this.J&&(go==4?Ox(this.j,this):(this.o=!1,Sr(this)))}else _i(this.g),re==400&&0<Lt.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),Ws(this),ea(this)}}}catch{}finally{}};function Qh($){return $.g?$.u=="GET"&&$.L!=2&&$.j.Ca:!1}function vc($,J){var re=$.C,be=J.indexOf(`
`,re);return be==-1?sd:(re=Number(J.substring(re,be)),isNaN(re)?wf:(be+=1,be+re>J.length?sd:(J=J.slice(be,be+re),$.C=be+re,J)))}Io.prototype.cancel=function(){this.J=!0,Ws(this)};function Sr($){$.S=Date.now()+$.I,xf($,$.I)}function xf($,J){if($.B!=null)throw Error("WatchDog timer not null");$.B=vn(f($.ba,$),J)}function qs($){$.B&&(a.clearTimeout($.B),$.B=null)}Io.prototype.ba=function(){this.B=null;const $=Date.now();0<=$-this.S?(ko(this.i,this.A),this.L!=2&&(mt(),Xt(17)),Ws(this),this.s=2,ea(this)):xf(this,this.S-$)};function ea($){$.j.G==0||$.J||Ox($.j,$)}function Ws($){qs($);var J=$.M;J&&typeof J.ma=="function"&&J.ma(),$.M=null,zn($.U),$.g&&(J=$.g,$.g=null,J.abort(),J.ma())}function bc($,J){try{var re=$.j;if(re.G!=0&&(re.g==$||Ys(re.h,$))){if(!$.K&&Ys(re.h,$)&&re.G==3){try{var be=re.Da.g.parse(J)}catch{be=null}if(Array.isArray(be)&&be.length==3){var We=be;if(We[0]==0){e:if(!re.u){if(re.g)if(re.g.F+3e3<$.F)Px(re),Qs(re);else break e;Dx(re),Xt(18)}}else re.za=We[1],0<re.za-re.T&&37500>We[2]&&re.F&&re.v==0&&!re.C&&(re.C=vn(f(re.Za,re),6e3));if(1>=Jh(re.h)&&re.ca){try{re.ca()}catch{}re.ca=void 0}}else jm(re,11)}else if(($.K||re.g==$)&&Px(re),!v(J))for(We=re.Da.g.parse(J),J=0;J<We.length;J++){let Wr=We[J];if(re.T=Wr[0],Wr=Wr[1],re.G==2)if(Wr[0]=="c"){re.K=Wr[1],re.ia=Wr[2];const na=Wr[3];na!=null&&(re.la=na,re.j.info("VER="+re.la));const go=Wr[4];go!=null&&(re.Aa=go,re.j.info("SVER="+re.Aa));const ud=Wr[5];ud!=null&&typeof ud=="number"&&0<ud&&(be=1.5*ud,re.L=be,re.j.info("backChannelRequestTimeoutMs_="+be)),be=re;const _c=$.g;if(_c){const P1=_c.g?_c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(P1){var Ze=be.h;Ze.g||P1.indexOf("spdy")==-1&&P1.indexOf("quic")==-1&&P1.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(ge(Ze,Ze.h),Ze.h=null))}if(be.D){const Mx=_c.g?_c.g.getResponseHeader("X-HTTP-Session-Id"):null;Mx&&(be.ya=Mx,cn(be.I,be.D,Mx))}}re.G=3,re.l&&re.l.ua(),re.ba&&(re.R=Date.now()-$.F,re.j.info("Handshake RTT: "+re.R+"ms")),be=re;var Lt=$;if(be.qa=xP(be,be.J?be.ia:null,be.W),Lt.K){Ne(be.h,Lt);var Ci=Lt,Po=be.L;Po&&(Ci.I=Po),Ci.B&&(qs(Ci),Sr(Ci)),be.g=Lt}else D1(be);0<re.i.length&&xc(re)}else Wr[0]!="stop"&&Wr[0]!="close"||jm(re,7);else re.G==3&&(Wr[0]=="stop"||Wr[0]=="close"?Wr[0]=="stop"?jm(re,7):Ei(re):Wr[0]!="noop"&&re.l&&re.l.ta(Wr),re.v=0)}}mt(4)}catch{}}var Sa=class{constructor($,J){this.g=$,this.map=J}};function Au($){this.l=$||10,a.PerformanceNavigationTiming?($=a.performance.getEntriesByType("navigation"),$=0<$.length&&($[0].nextHopProtocol=="hq"||$[0].nextHopProtocol=="h2")):$=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=$?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gs($){return $.h?!0:$.g?$.g.size>=$.j:!1}function Jh($){return $.h?1:$.g?$.g.size:0}function Ys($,J){return $.h?$.h==J:$.g?$.g.has(J):!1}function ge($,J){$.g?$.g.add(J):$.h=J}function Ne($,J){$.h&&$.h==J?$.h=null:$.g&&$.g.has(J)&&$.g.delete(J)}Au.prototype.cancel=function(){if(this.i=_e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const $ of this.g.values())$.cancel();this.g.clear()}};function _e($){if($.h!=null)return $.i.concat($.h.D);if($.g!=null&&$.g.size!==0){let J=$.i;for(const re of $.g.values())J=J.concat(re.D);return J}return m($.i)}function Be($){if($.V&&typeof $.V=="function")return $.V();if(typeof Map<"u"&&$ instanceof Map||typeof Set<"u"&&$ instanceof Set)return Array.from($.values());if(typeof $=="string")return $.split("");if(l($)){for(var J=[],re=$.length,be=0;be<re;be++)J.push($[be]);return J}J=[],re=0;for(be in $)J[re++]=$[be];return J}function Ue($){if($.na&&typeof $.na=="function")return $.na();if(!$.V||typeof $.V!="function"){if(typeof Map<"u"&&$ instanceof Map)return Array.from($.keys());if(!(typeof Set<"u"&&$ instanceof Set)){if(l($)||typeof $=="string"){var J=[];$=$.length;for(var re=0;re<$;re++)J.push(re);return J}J=[],re=0;for(const be in $)J[re++]=be;return J}}}function Le($,J){if($.forEach&&typeof $.forEach=="function")$.forEach(J,void 0);else if(l($)||typeof $=="string")Array.prototype.forEach.call($,J,void 0);else for(var re=Ue($),be=Be($),We=be.length,Ze=0;Ze<We;Ze++)J.call(void 0,be[Ze],re&&re[Ze],$)}var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft($,J){if($){$=$.split("&");for(var re=0;re<$.length;re++){var be=$[re].indexOf("="),We=null;if(0<=be){var Ze=$[re].substring(0,be);We=$[re].substring(be+1)}else Ze=$[re];J(Ze,We?decodeURIComponent(We.replace(/\+/g," ")):"")}}}function gt($){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,$ instanceof gt){this.h=$.h,Tt(this,$.j),this.o=$.o,this.g=$.g,Gt(this,$.s),this.l=$.l;var J=$.i,re=new Do;re.i=J.i,J.g&&(re.g=new Map(J.g),re.h=J.h),Vn(this,re),this.m=$.m}else $&&(J=String($).match(rt))?(this.h=!1,Tt(this,J[1]||"",!0),this.o=sn(J[2]||""),this.g=sn(J[3]||"",!0),Gt(this,J[4]),this.l=sn(J[5]||"",!0),Vn(this,J[6]||"",!0),this.m=sn(J[7]||"")):(this.h=!1,this.i=new Do(null,this.h))}gt.prototype.toString=function(){var $=[],J=this.j;J&&$.push(vr(J,Za,!0),":");var re=this.g;return(re||J=="file")&&($.push("//"),(J=this.o)&&$.push(vr(J,Za,!0),"@"),$.push(encodeURIComponent(String(re)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),re=this.s,re!=null&&$.push(":",String(re))),(re=this.l)&&(this.g&&re.charAt(0)!="/"&&$.push("/"),$.push(vr(re,re.charAt(0)=="/"?Zh:Xs,!0))),(re=this.i.toString())&&$.push("?",re),(re=this.m)&&$.push("#",vr(re,ep)),$.join("")};function ht($){return new gt($)}function Tt($,J,re){$.j=re?sn(J,!0):J,$.j&&($.j=$.j.replace(/:$/,""))}function Gt($,J){if(J){if(J=Number(J),isNaN(J)||0>J)throw Error("Bad port number "+J);$.s=J}else $.s=null}function Vn($,J,re){J instanceof Do?($.i=J,el($.i,$.h)):(re||(J=vr(J,ad)),$.i=new Do(J,$.h))}function cn($,J,re){$.i.set(J,re)}function lr($){return cn($,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),$}function sn($,J){return $?J?decodeURI($.replace(/%25/g,"%2525")):decodeURIComponent($):""}function vr($,J,re){return typeof $=="string"?($=encodeURI($).replace(J,Ks),re&&($=$.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$):null}function Ks($){return $=$.charCodeAt(0),"%"+($>>4&15).toString(16)+($&15).toString(16)}var Za=/[#\/\?@]/g,Xs=/[#\?:]/g,Zh=/[#\?]/g,ad=/[#\?@]/g,ep=/#/g;function Do($,J){this.h=this.g=null,this.i=$||null,this.j=!!J}function Zi($){$.g||($.g=new Map,$.h=0,$.i&&ft($.i,function(J,re){$.add(decodeURIComponent(J.replace(/\+/g," ")),re)}))}e=Do.prototype,e.add=function($,J){Zi(this),this.i=null,$=mo(this,$);var re=this.g.get($);return re||this.g.set($,re=[]),re.push(J),this.h+=1,this};function Ui($,J){Zi($),J=mo($,J),$.g.has(J)&&($.i=null,$.h-=$.g.get(J).length,$.g.delete(J))}function ta($,J){return Zi($),J=mo($,J),$.g.has(J)}e.forEach=function($,J){Zi(this),this.g.forEach(function(re,be){re.forEach(function(We){$.call(J,We,be,this)},this)},this)},e.na=function(){Zi(this);const $=Array.from(this.g.values()),J=Array.from(this.g.keys()),re=[];for(let be=0;be<J.length;be++){const We=$[be];for(let Ze=0;Ze<We.length;Ze++)re.push(J[be])}return re},e.V=function($){Zi(this);let J=[];if(typeof $=="string")ta(this,$)&&(J=J.concat(this.g.get(mo(this,$))));else{$=Array.from(this.g.values());for(let re=0;re<$.length;re++)J=J.concat($[re])}return J},e.set=function($,J){return Zi(this),this.i=null,$=mo(this,$),ta(this,$)&&(this.h-=this.g.get($).length),this.g.set($,[J]),this.h+=1,this},e.get=function($,J){return $?($=this.V($),0<$.length?String($[0]):J):J};function ld($,J,re){Ui($,J),0<re.length&&($.i=null,$.g.set(mo($,J),m(re)),$.h+=re.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const $=[],J=Array.from(this.g.keys());for(var re=0;re<J.length;re++){var be=J[re];const Ze=encodeURIComponent(String(be)),Lt=this.V(be);for(be=0;be<Lt.length;be++){var We=Ze;Lt[be]!==""&&(We+="="+encodeURIComponent(String(Lt[be]))),$.push(We)}}return this.i=$.join("&")};function mo($,J){return J=String(J),$.j&&(J=J.toLowerCase()),J}function el($,J){J&&!$.j&&(Zi($),$.i=null,$.g.forEach(function(re,be){var We=be.toLowerCase();be!=We&&(Ui(this,be),ld(this,We,re))},$)),$.j=J}function tp($,J){const re=new ar;if(a.Image){const be=new Image;be.onload=h(ws,re,"TestLoadImage: loaded",!0,J,be),be.onerror=h(ws,re,"TestLoadImage: error",!1,J,be),be.onabort=h(ws,re,"TestLoadImage: abort",!1,J,be),be.ontimeout=h(ws,re,"TestLoadImage: timeout",!1,J,be),a.setTimeout(function(){be.ontimeout&&be.ontimeout()},1e4),be.src=$}else J(!1)}function ku($,J){const re=new ar,be=new AbortController,We=setTimeout(()=>{be.abort(),ws(re,"TestPingServer: timeout",!1,J)},1e4);fetch($,{signal:be.signal}).then(Ze=>{clearTimeout(We),Ze.ok?ws(re,"TestPingServer: ok",!0,J):ws(re,"TestPingServer: server error",!1,J)}).catch(()=>{clearTimeout(We),ws(re,"TestPingServer: error",!1,J)})}function ws($,J,re,be,We){try{We&&(We.onload=null,We.onerror=null,We.onabort=null,We.ontimeout=null),be(re)}catch{}}function L0(){this.g=new nr}function np($,J,re){const be=re||"";try{Le($,function(We,Ze){let Lt=We;u(We)&&(Lt=zt(We)),J.push(be+Ze+"="+encodeURIComponent(Lt))})}catch(We){throw J.push(be+"type="+encodeURIComponent("_badmap")),We}}function Ta($){this.l=$.Ub||null,this.j=$.eb||!1}p(Ta,Yn),Ta.prototype.g=function(){return new wc(this.l,this.j)},Ta.prototype.i=(function($){return function(){return $}})({});function wc($,J){xe.call(this),this.D=$,this.o=J,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(wc,xe),e=wc.prototype,e.open=function($,J){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=$,this.A=J,this.readyState=1,tl(this)},e.send=function($){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const J={headers:this.u,method:this.B,credentials:this.m,cache:void 0};$&&(J.body=$),(this.D||a).fetch(new Request(this.A,J)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jl(this)),this.readyState=0},e.Sa=function($){if(this.g&&(this.l=$,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=$.headers,this.readyState=2,tl(this)),this.g&&(this.readyState=3,tl(this),this.g)))if(this.responseType==="arraybuffer")$.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in $){if(this.j=$.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;j0(this)}else $.text().then(this.Ra.bind(this),this.ga.bind(this))};function j0($){$.j.read().then($.Pa.bind($)).catch($.ga.bind($))}e.Pa=function($){if(this.g){if(this.o&&$.value)this.response.push($.value);else if(!this.o){var J=$.value?$.value:new Uint8Array(0);(J=this.v.decode(J,{stream:!$.done}))&&(this.response=this.responseText+=J)}$.done?jl(this):tl(this),this.readyState==3&&j0(this)}},e.Ra=function($){this.g&&(this.response=this.responseText=$,jl(this))},e.Qa=function($){this.g&&(this.response=$,jl(this))},e.ga=function(){this.g&&jl(this)};function jl($){$.readyState=4,$.l=null,$.j=null,$.v=null,tl($)}e.setRequestHeader=function($,J){this.u.append($,J)},e.getResponseHeader=function($){return this.h&&this.h.get($.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const $=[],J=this.h.entries();for(var re=J.next();!re.done;)re=re.value,$.push(re[0]+": "+re[1]),re=J.next();return $.join(`\r
`)};function tl($){$.onreadystatechange&&$.onreadystatechange.call($)}Object.defineProperty(wc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function($){this.m=$?"include":"same-origin"}});function Se($){let J="";return S($,function(re,be){J+=be,J+=":",J+=re,J+=`\r
`}),J}function oe($,J,re){e:{for(be in re){var be=!1;break e}be=!0}be||(re=Se(re),typeof $=="string"?re!=null&&encodeURIComponent(String(re)):cn($,J,re))}function ve($){xe.call(this),this.headers=new Map,this.o=$||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ve,xe);var $e=/^https?$/i,It=["POST","PUT"];e=ve.prototype,e.Ha=function($){this.J=$},e.ea=function($,J,re,be){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+$);J=J?J.toUpperCase():"GET",this.D=$,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?Ur(this.o):Ur(Kn),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(J,String($),!0),this.B=!1}catch(Ze){Ft(this,Ze);return}if($=re||"",re=new Map(this.headers),be)if(Object.getPrototypeOf(be)===Object.prototype)for(var We in be)re.set(We,be[We]);else if(typeof be.keys=="function"&&typeof be.get=="function")for(const Ze of be.keys())re.set(Ze,be.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(be));be=Array.from(re.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),We=a.FormData&&$ instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,J,void 0))||be||We||re.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,Lt]of re)this.g.setRequestHeader(Ze,Lt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tn(this),this.u=!0,this.g.send($),this.u=!1}catch(Ze){Ft(this,Ze)}};function Ft($,J){$.h=!1,$.g&&($.j=!0,$.g.abort(),$.j=!1),$.l=J,$.m=5,xn($),ln($)}function xn($){$.A||($.A=!0,je($,"complete"),je($,"error"))}e.abort=function($){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=$||7,je(this,"complete"),je(this,"abort"),ln(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ln(this,!0)),ve.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Hn(this):this.bb())},e.bb=function(){Hn(this)};function Hn($){if($.h&&typeof o<"u"&&(!$.v[1]||yr($)!=4||$.Z()!=2)){if($.u&&yr($)==4)nt($.Ea,0,$);else if(je($,"readystatechange"),yr($)==4){$.h=!1;try{const Lt=$.Z();e:switch(Lt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var J=!0;break e;default:J=!1}var re;if(!(re=J)){var be;if(be=Lt===0){var We=String($.D).match(rt)[1]||null;!We&&a.self&&a.self.location&&(We=a.self.location.protocol.slice(0,-1)),be=!$e.test(We?We.toLowerCase():"")}re=be}if(re)je($,"complete"),je($,"success");else{$.m=6;try{var Ze=2<yr($)?$.g.statusText:""}catch{Ze=""}$.l=Ze+" ["+$.Z()+"]",xn($)}}finally{ln($)}}}}function ln($,J){if($.g){Tn($);const re=$.g,be=$.v[0]?()=>{}:null;$.g=null,$.v=null,J||je($,"ready");try{re.onreadystatechange=be}catch{}}}function Tn($){$.I&&(a.clearTimeout($.I),$.I=null)}e.isActive=function(){return!!this.g};function yr($){return $.g?$.g.readyState:0}e.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function($){if(this.g){var J=this.g.responseText;return $&&J.indexOf($)==0&&(J=J.substring($.length)),wn(J)}};function hi($){try{if(!$.g)return null;if("response"in $.g)return $.g.response;switch($.H){case"":case"text":return $.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in $.g)return $.g.mozResponseArrayBuffer}return null}catch{return null}}function _i($){const J={};$=($.g&&2<=yr($)&&$.g.getAllResponseHeaders()||"").split(`\r
`);for(let be=0;be<$.length;be++){if(v($[be]))continue;var re=P($[be]);const We=re[0];if(re=re[1],typeof re!="string")continue;re=re.trim();const Ze=J[We]||[];J[We]=Ze,Ze.push(re)}T(J,function(be){return be.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mi($,J,re){return re&&re.internalChannelParams&&re.internalChannelParams[$]||J}function Rs($){this.Aa=0,this.i=[],this.j=new ar,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mi("failFast",!1,$),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mi("baseRetryDelayMs",5e3,$),this.cb=Mi("retryDelaySeedMs",1e4,$),this.Wa=Mi("forwardChannelMaxRetries",2,$),this.wa=Mi("forwardChannelRequestTimeoutMs",2e4,$),this.pa=$&&$.xmlHttpFactory||void 0,this.Xa=$&&$.Tb||void 0,this.Ca=$&&$.useFetchStreams||!1,this.L=void 0,this.J=$&&$.supportsCrossDomainXhr||!1,this.K="",this.h=new Au($&&$.concurrentRequestLimit),this.Da=new L0,this.P=$&&$.fastHandshake||!1,this.O=$&&$.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=$&&$.Rb||!1,$&&$.xa&&this.j.xa(),$&&$.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&$&&$.detectBufferingProxy||!1,this.ja=void 0,$&&$.longPollingTimeout&&0<$.longPollingTimeout&&(this.ja=$.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Rs.prototype,e.la=8,e.G=1,e.connect=function($,J,re,be){Xt(0),this.W=$,this.H=J||{},re&&be!==void 0&&(this.H.OSID=re,this.H.OAID=be),this.F=this.X,this.I=xP(this,null,this.W),xc(this)};function Ei($){if(Iu($),$.G==3){var J=$.U++,re=ht($.I);if(cn(re,"SID",$.K),cn(re,"RID",J),cn(re,"TYPE","terminate"),Lm($,re),J=new Io($,$.j,J),J.L=2,J.v=lr(ht(re)),re=!1,a.navigator&&a.navigator.sendBeacon)try{re=a.navigator.sendBeacon(J.v.toString(),"")}catch{}!re&&a.Image&&(new Image().src=J.v,re=!0),re||(J.g=_P(J.j,null),J.g.ea(J.v)),J.F=Date.now(),Sr(J)}wP($)}function Qs($){$.g&&(gT($),$.g.cancel(),$.g=null)}function Iu($){Qs($),$.u&&(a.clearTimeout($.u),$.u=null),Px($),$.h.cancel(),$.s&&(typeof $.s=="number"&&a.clearTimeout($.s),$.s=null)}function xc($){if(!Gs($.h)&&!$.s){$.s=!0;var J=$.Ga;H||U(),q||(H(),q=!0),G.add(J,$),$.B=0}}function B0($,J){return Jh($.h)>=$.h.j-($.s?1:0)?!1:$.s?($.i=J.D.concat($.i),!0):$.G==1||$.G==2||$.B>=($.Va?0:$.Wa)?!1:($.s=vn(f($.Ga,$,J),bP($,$.B)),$.B++,!0)}e.Ga=function($){if(this.s)if(this.s=null,this.G==1){if(!$){this.U=Math.floor(1e5*Math.random()),$=this.U++;const We=new Io(this,this.j,$);let Ze=this.o;if(this.S&&(Ze?(Ze=A(Ze),I(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(We.H=Ze,Ze=null),this.P)e:{for(var J=0,re=0;re<this.i.length;re++){t:{var be=this.i[re];if("__data__"in be.map&&(be=be.map.__data__,typeof be=="string")){be=be.length;break t}be=void 0}if(be===void 0)break;if(J+=be,4096<J){J=re;break e}if(J===4096||re===this.i.length-1){J=re+1;break e}}J=1e3}else J=1e3;J=z0(this,We,J),re=ht(this.I),cn(re,"RID",$),cn(re,"CVER",22),this.D&&cn(re,"X-HTTP-Session-Id",this.D),Lm(this,re),Ze&&(this.O?J="headers="+encodeURIComponent(String(Se(Ze)))+"&"+J:this.m&&oe(re,this.m,Ze)),ge(this.h,We),this.Ua&&cn(re,"TYPE","init"),this.P?(cn(re,"$req",J),cn(re,"SID","null"),We.T=!0,od(We,re,null)):od(We,re,J),this.G=2}}else this.G==3&&($?_f(this,$):this.i.length==0||Gs(this.h)||_f(this))};function _f($,J){var re;J?re=J.l:re=$.U++;const be=ht($.I);cn(be,"SID",$.K),cn(be,"RID",re),cn(be,"AID",$.T),Lm($,be),$.m&&$.o&&oe(be,$.m,$.o),re=new Io($,$.j,re,$.B+1),$.m===null&&(re.H=$.o),J&&($.i=J.D.concat($.i)),J=z0($,re,1e3),re.I=Math.round(.5*$.wa)+Math.round(.5*$.wa*Math.random()),ge($.h,re),od(re,be,J)}function Lm($,J){$.H&&S($.H,function(re,be){cn(J,be,re)}),$.l&&Le({},function(re,be){cn(J,be,re)})}function z0($,J,re){re=Math.min($.i.length,re);var be=$.l?f($.l.Na,$.l,$):null;e:{var We=$.i;let Ze=-1;for(;;){const Lt=["count="+re];Ze==-1?0<re?(Ze=We[0].g,Lt.push("ofs="+Ze)):Ze=0:Lt.push("ofs="+Ze);let Ci=!0;for(let Po=0;Po<re;Po++){let Wr=We[Po].g;const na=We[Po].map;if(Wr-=Ze,0>Wr)Ze=Math.max(0,We[Po].g-100),Ci=!1;else try{np(na,Lt,"req"+Wr+"_")}catch{be&&be(na)}}if(Ci){be=Lt.join("&");break e}}}return $=$.i.splice(0,re),J.D=$,be}function D1($){if(!$.g&&!$.u){$.Y=1;var J=$.Fa;H||U(),q||(H(),q=!0),G.add(J,$),$.v=0}}function Dx($){return $.g||$.u||3<=$.v?!1:($.Y++,$.u=vn(f($.Fa,$),bP($,$.v)),$.v++,!0)}e.Fa=function(){if(this.u=null,vP(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var $=2*this.R;this.j.info("BP detection timer enabled: "+$),this.A=vn(f(this.ab,this),$)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Qs(this),vP(this))};function gT($){$.A!=null&&(a.clearTimeout($.A),$.A=null)}function vP($){$.g=new Io($,$.j,"rpc",$.Y),$.m===null&&($.g.H=$.o),$.g.O=0;var J=ht($.qa);cn(J,"RID","rpc"),cn(J,"SID",$.K),cn(J,"AID",$.T),cn(J,"CI",$.F?"0":"1"),!$.F&&$.ja&&cn(J,"TO",$.ja),cn(J,"TYPE","xmlhttp"),Lm($,J),$.m&&$.o&&oe(J,$.m,$.o),$.L&&($.g.I=$.L);var re=$.g;$=$.ia,re.L=1,re.v=lr(ht(J)),re.m=null,re.P=!0,Ro(re,$)}e.Za=function(){this.C!=null&&(this.C=null,Qs(this),Dx(this),Xt(19))};function Px($){$.C!=null&&(a.clearTimeout($.C),$.C=null)}function Ox($,J){var re=null;if($.g==J){Px($),gT($),$.g=null;var be=2}else if(Ys($.h,J))re=J.D,Ne($.h,J),be=1;else return;if($.G!=0){if(J.o)if(be==1){re=J.m?J.m.length:0,J=Date.now()-J.F;var We=$.B;be=Rr(),je(be,new dr(be,re)),xc($)}else D1($);else if(We=J.s,We==3||We==0&&0<J.X||!(be==1&&B0($,J)||be==2&&Dx($)))switch(re&&0<re.length&&(J=$.h,J.i=J.i.concat(re)),We){case 1:jm($,5);break;case 4:jm($,10);break;case 3:jm($,6);break;default:jm($,2)}}}function bP($,J){let re=$.Ta+Math.floor(Math.random()*$.cb);return $.isActive()||(re*=2),re*J}function jm($,J){if($.j.info("Error code "+J),J==2){var re=f($.fb,$),be=$.Xa;const We=!be;be=new gt(be||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Tt(be,"https"),lr(be),We?tp(be.toString(),re):ku(be.toString(),re)}else Xt(2);$.G=0,$.l&&$.l.sa(J),wP($),Iu($)}e.fb=function($){$?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function wP($){if($.G=0,$.ka=[],$.l){const J=_e($.h);(J.length!=0||$.i.length!=0)&&(g($.ka,J),g($.ka,$.i),$.h.i.length=0,m($.i),$.i.length=0),$.l.ra()}}function xP($,J,re){var be=re instanceof gt?ht(re):new gt(re);if(be.g!="")J&&(be.g=J+"."+be.g),Gt(be,be.s);else{var We=a.location;be=We.protocol,J=J?J+"."+We.hostname:We.hostname,We=+We.port;var Ze=new gt(null);be&&Tt(Ze,be),J&&(Ze.g=J),We&&Gt(Ze,We),re&&(Ze.l=re),be=Ze}return re=$.D,J=$.ya,re&&J&&cn(be,re,J),cn(be,"VER",$.la),Lm($,be),be}function _P($,J,re){if(J&&!$.J)throw Error("Can't create secondary domain capable XhrIo object.");return J=$.Ca&&!$.pa?new ve(new Ta({eb:re})):new ve($.pa),J.Ha($.J),J}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function yT(){}e=yT.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Nx(){}Nx.prototype.g=function($,J){return new Bl($,J)};function Bl($,J){xe.call(this),this.g=new Rs(J),this.l=$,this.h=J&&J.messageUrlParams||null,$=J&&J.messageHeaders||null,J&&J.clientProtocolHeaderRequired&&($?$["X-Client-Protocol"]="webchannel":$={"X-Client-Protocol":"webchannel"}),this.g.o=$,$=J&&J.initMessageHeaders||null,J&&J.messageContentType&&($?$["X-WebChannel-Content-Type"]=J.messageContentType:$={"X-WebChannel-Content-Type":J.messageContentType}),J&&J.va&&($?$["X-WebChannel-Client-Profile"]=J.va:$={"X-WebChannel-Client-Profile":J.va}),this.g.S=$,($=J&&J.Sb)&&!v($)&&(this.g.m=$),this.v=J&&J.supportsCrossDomainXhr||!1,this.u=J&&J.sendRawJson||!1,(J=J&&J.httpSessionIdParam)&&!v(J)&&(this.g.D=J,$=this.h,$!==null&&J in $&&($=this.h,J in $&&delete $[J])),this.j=new rp(this)}p(Bl,xe),Bl.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bl.prototype.close=function(){Ei(this.g)},Bl.prototype.o=function($){var J=this.g;if(typeof $=="string"){var re={};re.__data__=$,$=re}else this.u&&(re={},re.__data__=zt($),$=re);J.i.push(new Sa(J.Ya++,$)),J.G==3&&xc(J)},Bl.prototype.N=function(){this.g.l=null,delete this.j,Ei(this.g),delete this.g,Bl.aa.N.call(this)};function EP($){On.call(this),$.__headers__&&(this.headers=$.__headers__,this.statusCode=$.__status__,delete $.__headers__,delete $.__status__);var J=$.__sm__;if(J){e:{for(const re in J){$=re;break e}$=void 0}(this.i=$)&&($=this.i,J=J!==null&&$ in J?J[$]:void 0),this.data=J}else this.data=$}p(EP,On);function CP(){gn.call(this),this.status=1}p(CP,gn);function rp($){this.g=$}p(rp,yT),rp.prototype.ua=function(){je(this.g,"a")},rp.prototype.ta=function($){je(this.g,new EP($))},rp.prototype.sa=function($){je(this.g,new CP)},rp.prototype.ra=function(){je(this.g,"b")},Nx.prototype.createWebChannel=Nx.prototype.g,Bl.prototype.send=Bl.prototype.o,Bl.prototype.open=Bl.prototype.m,Bl.prototype.close=Bl.prototype.close,dqe=function(){return new Nx},cqe=function(){return Rr()},uqe=cr,AQ={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Tu.NO_ERROR=0,Tu.TIMEOUT=8,Tu.HTTP_ERROR=6,BM=Tu,yc.COMPLETE="complete",lqe=yc,or.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",xe.prototype.listen=xe.prototype.K,DA=or,ve.prototype.listenOnce=ve.prototype.L,ve.prototype.getLastError=ve.prototype.Ka,ve.prototype.getLastErrorCode=ve.prototype.Ba,ve.prototype.getStatus=ve.prototype.Z,ve.prototype.getResponseJson=ve.prototype.Oa,ve.prototype.getResponseText=ve.prototype.oa,ve.prototype.send=ve.prototype.ea,ve.prototype.setWithCredentials=ve.prototype.Ha,aqe=ve}).apply(typeof BN<"u"?BN:typeof self<"u"?self:typeof window<"u"?window:{});const hSe="@firebase/firestore",pSe="4.8.0";class zu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}zu.UNAUTHENTICATED=new zu(null),zu.GOOGLE_CREDENTIALS=new zu("google-credentials-uid"),zu.FIRST_PARTY=new zu("first-party-uid"),zu.MOCK_USER=new zu("mock-user");let cT="11.10.0";const Bw=new JB("@firebase/firestore");function q_(){return Bw.logLevel}function Zt(e,...t){if(Bw.logLevel<=Nr.DEBUG){const n=t.map(Jle);Bw.debug(`Firestore (${cT}): ${e}`,...n)}}function f0(e,...t){if(Bw.logLevel<=Nr.ERROR){const n=t.map(Jle);Bw.error(`Firestore (${cT}): ${e}`,...n)}}function zw(e,...t){if(Bw.logLevel<=Nr.WARN){const n=t.map(Jle);Bw.warn(`Firestore (${cT}): ${e}`,...n)}}function Jle(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function Wn(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,fqe(e,r,n)}function fqe(e,t,n){let r=`FIRESTORE (${cT}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw f0(r),new Error(r)}function wi(e,t,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,e||fqe(t,i,r)}function sr(e,t){return e}const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nn extends Fm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jg{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class __n{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class E_n{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(zu.UNAUTHENTICATED)))}shutdown(){}}class C_n{constructor(t){this.t=t,this.currentUser=zu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){wi(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new jg;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jg,t.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const l=s;t.enqueueRetryable((async()=>{await l.promise,await i(this.currentUser)}))},a=l=>{Zt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Zt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jg)}}),0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(Zt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wi(typeof r.accessToken=="string",31837,{l:r}),new __n(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return wi(t===null||typeof t=="string",2055,{h:t}),new zu(t)}}class S_n{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=zu.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class T_n{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new S_n(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(zu.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mSe{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A_n{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){wi(this.o===void 0,3512);const r=s=>{s.error!=null&&Zt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Zt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable((()=>r(s)))};const i=s=>{Zt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Zt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mSe(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(wi(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mSe(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function k_n(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function hqe(){return new TextEncoder}class Zle{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=k_n(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%62))}return r}}function Er(e,t){return e<t?-1:e>t?1:0}function kQ(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Er(r,i);{const s=hqe(),o=I_n(s.encode(gSe(e,n)),s.encode(gSe(t,n)));return o!==0?o:Er(r,i)}}n+=r>65535?2:1}return Er(e.length,t.length)}function gSe(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function I_n(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Er(e[n],t[n]);return Er(e.length,t.length)}function zC(e,t,n){return e.length===t.length&&e.every(((r,i)=>n(r,t[i])))}const ySe="__name__";class xp{constructor(t,n,r){n===void 0?n=0:n>t.length&&Wn(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&Wn(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return xp.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof xp?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=xp.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Er(t.length,n.length)}static compareSegments(t,n){const r=xp.isNumericId(t),i=xp.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?xp.extractNumericId(t).compare(xp.extractNumericId(n)):kQ(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return dv.fromString(t.substring(4,t.length-2))}}class os extends xp{construct(t,n,r){return new os(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new nn(dt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new os(n)}static emptyPath(){return new os([])}}const R_n=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Va extends xp{construct(t,n,r){return new Va(t,n,r)}static isValidIdentifier(t){return R_n.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Va.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ySe}static keyField(){return new Va([ySe])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new nn(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new nn(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new nn(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new nn(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Va(n)}static emptyPath(){return new Va([])}}class $n{constructor(t){this.path=t}static fromPath(t){return new $n(os.fromString(t))}static fromName(t){return new $n(os.fromString(t).popFirst(5))}static empty(){return new $n(os.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&os.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return os.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new $n(new os(t.slice()))}}function pqe(e,t,n){if(!n)throw new nn(dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function D_n(e,t,n,r){if(t===!0&&r===!0)throw new nn(dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function vSe(e){if(!$n.isDocumentKey(e))throw new nn(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function bSe(e){if($n.isDocumentKey(e))throw new nn(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function mqe(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function eue(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Wn(12329,{type:typeof e})}function Vc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new nn(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eue(e);throw new nn(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Eo(e,t){const n={typeString:e};return t&&(n.value=t),n}function oP(e,t){if(!mqe(e))throw new nn(dt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new nn(dt.INVALID_ARGUMENT,n);return!0}const wSe=-62135596800,xSe=1e6;class gi{static now(){return gi.fromMillis(Date.now())}static fromDate(t){return gi.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*xSe);return new gi(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new nn(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nn(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<wSe)throw new nn(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nn(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xSe}_compareTo(t){return this.seconds===t.seconds?Er(this.nanoseconds,t.nanoseconds):Er(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gi._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(oP(t,gi._jsonSchema))return new gi(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-wSe;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gi._jsonSchemaVersion="firestore/timestamp/1.0",gi._jsonSchema={type:Eo("string",gi._jsonSchemaVersion),seconds:Eo("number"),nanoseconds:Eo("number")};class ir{static fromTimestamp(t){return new ir(t)}static min(){return new ir(new gi(0,0))}static max(){return new ir(new gi(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const JI=-1;function P_n(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ir.fromTimestamp(r===1e9?new gi(n+1,0):new gi(n,r));return new zv(i,$n.empty(),t)}function O_n(e){return new zv(e.readTime,e.key,JI)}class zv{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new zv(ir.min(),$n.empty(),JI)}static max(){return new zv(ir.max(),$n.empty(),JI)}}function N_n(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=$n.comparator(e.documentKey,t.documentKey),n!==0?n:Er(e.largestBatchId,t.largestBatchId))}const M_n="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $_n{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function dT(e){if(e.code!==dt.FAILED_PRECONDITION||e.message!==M_n)throw e;Zt("LocalStore","Unexpectedly lost primary lease")}class ct{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Wn(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ct(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof ct?n:ct.resolve(n)}catch(n){return ct.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):ct.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):ct.reject(n)}static resolve(t){return new ct(((n,r)=>{n(t)}))}static reject(t){return new ct(((n,r)=>{r(t)}))}static waitFor(t){return new ct(((n,r)=>{let i=0,s=0,o=!1;t.forEach((a=>{++i,a.next((()=>{++s,o&&s===i&&n()}),(l=>r(l)))})),o=!0,s===i&&n()}))}static or(t){let n=ct.resolve(!1);for(const r of t)n=n.next((i=>i?ct.resolve(i):r()));return n}static forEach(t,n){const r=[];return t.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(t,n){return new ct(((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(t[u]).next((c=>{o[u]=c,++a,a===s&&r(o)}),(c=>i(c)))}}))}static doWhile(t,n){return new ct(((r,i)=>{const s=()=>{t()===!0?n().next((()=>{s()}),i):r()};s()}))}}function F_n(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fT(e){return e.name==="IndexedDbTransactionError"}class ZB{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}ZB.ue=-1;const tue=-1;function e9(e){return e==null}function Y$(e){return e===0&&1/e==-1/0}function L_n(e){return typeof e=="number"&&Number.isInteger(e)&&!Y$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const gqe="";function j_n(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=_Se(t)),t=B_n(e.get(n),t);return _Se(t)}function B_n(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case gqe:n+="";break;default:n+=s}}return n}function _Se(e){return e+gqe+""}function ESe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function I1(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yqe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ks{constructor(t,n){this.comparator=t,this.root=n||Fa.EMPTY}insert(t,n){return new ks(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fa.BLACK,null,null))}remove(t){return new ks(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fa.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zN(this.root,t,this.comparator,!1)}getReverseIterator(){return new zN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zN(this.root,t,this.comparator,!0)}}class zN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fa{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Fa.RED,this.left=i??Fa.EMPTY,this.right=s??Fa.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Fa(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fa.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Fa.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fa.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wn(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Wn(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Wn(27949);return t+(this.isRed()?0:1)}}Fa.EMPTY=null,Fa.RED=!0,Fa.BLACK=!1;Fa.EMPTY=new class{constructor(){this.size=0}get key(){throw Wn(57766)}get value(){throw Wn(16141)}get color(){throw Wn(16727)}get left(){throw Wn(29726)}get right(){throw Wn(36894)}copy(t,n,r,i,s){return this}insert(t,n,r){return new Fa(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Go{constructor(t){this.comparator=t,this.data=new ks(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new CSe(this.data.getIterator())}getIteratorFrom(t){return new CSe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Go)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Go(this.comparator);return n.data=t,n}}class CSe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Fc{constructor(t){this.fields=t,t.sort(Va.comparator)}static empty(){return new Fc([])}unionWith(t){let n=new Go(Va.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Fc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return zC(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}class vqe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ka{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vqe("Invalid base64 string: "+s):s}})(t);return new Ka(n)}static fromUint8Array(t){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(t);return new Ka(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Er(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ka.EMPTY_BYTE_STRING=new Ka("");const z_n=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vv(e){if(wi(!!e,39018),typeof e=="string"){let t=0;const n=z_n.exec(e);if(wi(!!n,46558,{timestamp:e}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:no(e.seconds),nanos:no(e.nanos)}}function no(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Uv(e){return typeof e=="string"?Ka.fromBase64String(e):Ka.fromUint8Array(e)}const bqe="server_timestamp",wqe="__type__",xqe="__previous_value__",_qe="__local_write_time__";function nue(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[wqe])===null||n===void 0?void 0:n.stringValue)===bqe}function t9(e){const t=e.mapValue.fields[xqe];return nue(t)?t9(t):t}function ZI(e){const t=Vv(e.mapValue.fields[_qe].timestampValue);return new gi(t.seconds,t.nanos)}class V_n{constructor(t,n,r,i,s,o,a,l,u,c){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=c}}const K$="(default)";class eR{constructor(t,n){this.projectId=t,this.database=n||K$}static empty(){return new eR("","")}get isDefaultDatabase(){return this.database===K$}isEqual(t){return t instanceof eR&&t.projectId===this.projectId&&t.database===this.database}}const Eqe="__type__",U_n="__max__",VN={mapValue:{}},Cqe="__vector__",X$="value";function Hv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?nue(e)?4:q_n(e)?9007199254740991:H_n(e)?10:11:Wn(28295,{value:e})}function pm(e,t){if(e===t)return!0;const n=Hv(e);if(n!==Hv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ZI(e).isEqual(ZI(t));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Vv(i.timestampValue),a=Vv(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(i,s){return Uv(i.bytesValue).isEqual(Uv(s.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(i,s){return no(i.geoPointValue.latitude)===no(s.geoPointValue.latitude)&&no(i.geoPointValue.longitude)===no(s.geoPointValue.longitude)})(e,t);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return no(i.integerValue)===no(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=no(i.doubleValue),a=no(s.doubleValue);return o===a?Y$(o)===Y$(a):isNaN(o)&&isNaN(a)}return!1})(e,t);case 9:return zC(e.arrayValue.values||[],t.arrayValue.values||[],pm);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ESe(o)!==ESe(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!pm(o[l],a[l])))return!1;return!0})(e,t);default:return Wn(52216,{left:e})}}function tR(e,t){return(e.values||[]).find((n=>pm(n,t)))!==void 0}function VC(e,t){if(e===t)return 0;const n=Hv(e),r=Hv(t);if(n!==r)return Er(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Er(e.booleanValue,t.booleanValue);case 2:return(function(s,o){const a=no(s.integerValue||s.doubleValue),l=no(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(e,t);case 3:return SSe(e.timestampValue,t.timestampValue);case 4:return SSe(ZI(e),ZI(t));case 5:return kQ(e.stringValue,t.stringValue);case 6:return(function(s,o){const a=Uv(s),l=Uv(o);return a.compareTo(l)})(e.bytesValue,t.bytesValue);case 7:return(function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Er(a[u],l[u]);if(c!==0)return c}return Er(a.length,l.length)})(e.referenceValue,t.referenceValue);case 8:return(function(s,o){const a=Er(no(s.latitude),no(o.latitude));return a!==0?a:Er(no(s.longitude),no(o.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return TSe(e.arrayValue,t.arrayValue);case 10:return(function(s,o){var a,l,u,c;const d=s.fields||{},f=o.fields||{},h=(a=d[X$])===null||a===void 0?void 0:a.arrayValue,p=(l=f[X$])===null||l===void 0?void 0:l.arrayValue,m=Er(((u=h?.values)===null||u===void 0?void 0:u.length)||0,((c=p?.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:TSe(h,p)})(e.mapValue,t.mapValue);case 11:return(function(s,o){if(s===VN.mapValue&&o===VN.mapValue)return 0;if(s===VN.mapValue)return 1;if(o===VN.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=kQ(l[d],c[d]);if(f!==0)return f;const h=VC(a[l[d]],u[c[d]]);if(h!==0)return h}return Er(l.length,c.length)})(e.mapValue,t.mapValue);default:throw Wn(23264,{le:n})}}function SSe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Er(e,t);const n=Vv(e),r=Vv(t),i=Er(n.seconds,r.seconds);return i!==0?i:Er(n.nanos,r.nanos)}function TSe(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=VC(n[i],r[i]);if(s)return s}return Er(n.length,r.length)}function UC(e){return IQ(e)}function IQ(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Vv(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Uv(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return $n.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=IQ(s);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${IQ(n.fields[o])}`;return i+"}"})(e.mapValue):Wn(61005,{value:e})}function zM(e){switch(Hv(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=t9(e);return t?16+zM(t):16;case 5:return 2*e.stringValue.length;case 6:return Uv(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+zM(s)),0)})(e.arrayValue);case 10:case 11:return(function(r){let i=0;return I1(r.fields,((s,o)=>{i+=s.length+zM(o)})),i})(e.mapValue);default:throw Wn(13486,{value:e})}}function RQ(e){return!!e&&"integerValue"in e}function rue(e){return!!e&&"arrayValue"in e}function ASe(e){return!!e&&"nullValue"in e}function kSe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function VM(e){return!!e&&"mapValue"in e}function H_n(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[Eqe])===null||n===void 0?void 0:n.stringValue)===Cqe}function xk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return I1(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=xk(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function q_n(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===U_n}class Yu{constructor(t){this.value=t}static empty(){return new Yu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!VM(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=xk(n)}setAll(t){let n=Va.emptyPath(),r={},i=[];t.forEach(((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=xk(o):i.push(a.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());VM(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return pm(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];VM(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){I1(n,((i,s)=>t[i]=s));for(const i of r)delete t[i]}clone(){return new Yu(xk(this.value))}}function Sqe(e){const t=[];return I1(e.fields,((n,r)=>{const i=new Va([n]);if(VM(r)){const s=Sqe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)})),new Fc(t)}class bl{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new bl(t,0,ir.min(),ir.min(),ir.min(),Yu.empty(),0)}static newFoundDocument(t,n,r,i){return new bl(t,1,n,ir.min(),r,i,0)}static newNoDocument(t,n){return new bl(t,2,n,ir.min(),ir.min(),Yu.empty(),0)}static newUnknownDocument(t,n){return new bl(t,3,n,ir.min(),ir.min(),Yu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ir.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Yu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Yu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ir.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof bl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new bl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Q${constructor(t,n){this.position=t,this.inclusive=n}}function ISe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=$n.comparator($n.fromName(o.referenceValue),n.key):r=VC(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function RSe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!pm(e.position[n],t.position[n]))return!1;return!0}class J${constructor(t,n="asc"){this.field=t,this.dir=n}}function W_n(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Tqe{}class Uo extends Tqe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new Y_n(t,n,r):n==="array-contains"?new Q_n(t,r):n==="in"?new J_n(t,r):n==="not-in"?new Z_n(t,r):n==="array-contains-any"?new eEn(t,r):new Uo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new K_n(t,r):new X_n(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(VC(n,this.value)):n!==null&&Hv(this.value)===Hv(n)&&this.matchesComparison(VC(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Wn(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mm extends Tqe{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new mm(t,n)}matches(t){return Aqe(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Aqe(e){return e.op==="and"}function kqe(e){return G_n(e)&&Aqe(e)}function G_n(e){for(const t of e.filters)if(t instanceof mm)return!1;return!0}function DQ(e){if(e instanceof Uo)return e.field.canonicalString()+e.op.toString()+UC(e.value);if(kqe(e))return e.filters.map((t=>DQ(t))).join(",");{const t=e.filters.map((n=>DQ(n))).join(",");return`${e.op}(${t})`}}function Iqe(e,t){return e instanceof Uo?(function(r,i){return i instanceof Uo&&r.op===i.op&&r.field.isEqual(i.field)&&pm(r.value,i.value)})(e,t):e instanceof mm?(function(r,i){return i instanceof mm&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,a)=>s&&Iqe(o,i.filters[a])),!0):!1})(e,t):void Wn(19439)}function Rqe(e){return e instanceof Uo?(function(n){return`${n.field.canonicalString()} ${n.op} ${UC(n.value)}`})(e):e instanceof mm?(function(n){return n.op.toString()+" {"+n.getFilters().map(Rqe).join(" ,")+"}"})(e):"Filter"}class Y_n extends Uo{constructor(t,n,r){super(t,n,r),this.key=$n.fromName(r.referenceValue)}matches(t){const n=$n.comparator(t.key,this.key);return this.matchesComparison(n)}}class K_n extends Uo{constructor(t,n){super(t,"in",n),this.keys=Dqe("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class X_n extends Uo{constructor(t,n){super(t,"not-in",n),this.keys=Dqe("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Dqe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>$n.fromName(r.referenceValue)))}class Q_n extends Uo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return rue(n)&&tR(n.arrayValue,this.value)}}class J_n extends Uo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&tR(this.value.arrayValue,n)}}class Z_n extends Uo{constructor(t,n){super(t,"not-in",n)}matches(t){if(tR(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!tR(this.value.arrayValue,n)}}class eEn extends Uo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!rue(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>tR(this.value.arrayValue,r)))}}class tEn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}}function DSe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new tEn(e,t,n,r,i,s,o)}function iue(e){const t=sr(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>DQ(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),e9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>UC(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>UC(r))).join(",")),t.Pe=n}return t.Pe}function sue(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!W_n(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Iqe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!RSe(e.startAt,t.startAt)&&RSe(e.endAt,t.endAt)}function PQ(e){return $n.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class n9{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function nEn(e,t,n,r,i,s,o,a){return new n9(e,t,n,r,i,s,o,a)}function r9(e){return new n9(e)}function PSe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function rEn(e){return e.collectionGroup!==null}function _k(e){const t=sr(e);if(t.Te===null){t.Te=[];const n=new Set;for(const s of t.explicitOrderBy)t.Te.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Go(Va.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(t).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||t.Te.push(new J$(s,r))})),n.has(Va.keyField().canonicalString())||t.Te.push(new J$(Va.keyField(),r))}return t.Te}function Wp(e){const t=sr(e);return t.Ie||(t.Ie=iEn(t,_k(e))),t.Ie}function iEn(e,t){if(e.limitType==="F")return DSe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new J$(i.field,s)}));const n=e.endAt?new Q$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Q$(e.startAt.position,e.startAt.inclusive):null;return DSe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function OQ(e,t,n){return new n9(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function i9(e,t){return sue(Wp(e),Wp(t))&&e.limitType===t.limitType}function Pqe(e){return`${iue(Wp(e))}|lt:${e.limitType}`}function W_(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>Rqe(i))).join(", ")}]`),e9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>UC(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>UC(i))).join(",")),`Target(${r})`})(Wp(e))}; limitType=${e.limitType})`}function s9(e,t){return t.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):$n.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(e,t)&&(function(r,i){for(const s of _k(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(e,t)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(e,t)&&(function(r,i){return!(r.startAt&&!(function(o,a,l){const u=ISe(o,a,l);return o.inclusive?u<=0:u<0})(r.startAt,_k(r),i)||r.endAt&&!(function(o,a,l){const u=ISe(o,a,l);return o.inclusive?u>=0:u>0})(r.endAt,_k(r),i))})(e,t)}function sEn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Oqe(e){return(t,n)=>{let r=!1;for(const i of _k(e)){const s=oEn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function oEn(e,t,n){const r=e.field.isKeyField()?$n.comparator(t.key,n.key):(function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?VC(l,u):Wn(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wn(19790,{direction:e.dir})}}class Ix{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){I1(this.inner,((n,r)=>{for(const[i,s]of r)t(i,s)}))}isEmpty(){return yqe(this.inner)}size(){return this.innerSize}}const aEn=new ks($n.comparator);function h0(){return aEn}const Nqe=new ks($n.comparator);function PA(...e){let t=Nqe;for(const n of e)t=t.insert(n.key,n);return t}function Mqe(e){let t=Nqe;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Bb(){return Ek()}function $qe(){return Ek()}function Ek(){return new Ix((e=>e.toString()),((e,t)=>e.isEqual(t)))}const lEn=new ks($n.comparator),uEn=new Go($n.comparator);function Mr(...e){let t=uEn;for(const n of e)t=t.add(n);return t}const cEn=new Go(Er);function dEn(){return cEn}function oue(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Y$(t)?"-0":t}}function Fqe(e){return{integerValue:""+e}}function fEn(e,t){return L_n(t)?Fqe(t):oue(e,t)}class o9{constructor(){this._=void 0}}function hEn(e,t,n){return e instanceof nR?(function(i,s){const o={fields:{[wqe]:{stringValue:bqe},[_qe]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nue(s)&&(s=t9(s)),s&&(o.fields[xqe]=s),{mapValue:o}})(n,t):e instanceof rR?jqe(e,t):e instanceof iR?Bqe(e,t):(function(i,s){const o=Lqe(i,s),a=OSe(o)+OSe(i.Ee);return RQ(o)&&RQ(i.Ee)?Fqe(a):oue(i.serializer,a)})(e,t)}function pEn(e,t,n){return e instanceof rR?jqe(e,t):e instanceof iR?Bqe(e,t):n}function Lqe(e,t){return e instanceof Z$?(function(r){return RQ(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(t)?t:{integerValue:0}:null}class nR extends o9{}class rR extends o9{constructor(t){super(),this.elements=t}}function jqe(e,t){const n=zqe(t);for(const r of e.elements)n.some((i=>pm(i,r)))||n.push(r);return{arrayValue:{values:n}}}class iR extends o9{constructor(t){super(),this.elements=t}}function Bqe(e,t){let n=zqe(t);for(const r of e.elements)n=n.filter((i=>!pm(i,r)));return{arrayValue:{values:n}}}class Z$ extends o9{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function OSe(e){return no(e.integerValue||e.doubleValue)}function zqe(e){return rue(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class mEn{constructor(t,n){this.field=t,this.transform=n}}function gEn(e,t){return e.field.isEqual(t.field)&&(function(r,i){return r instanceof rR&&i instanceof rR||r instanceof iR&&i instanceof iR?zC(r.elements,i.elements,pm):r instanceof Z$&&i instanceof Z$?pm(r.Ee,i.Ee):r instanceof nR&&i instanceof nR})(e.transform,t.transform)}class yEn{constructor(t,n){this.version=t,this.transformResults=n}}class Uc{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Uc}static exists(t){return new Uc(void 0,t)}static updateTime(t){return new Uc(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function UM(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class a9{}function Vqe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new aue(e.key,Uc.none()):new aP(e.key,e.data,Uc.none());{const n=e.data,r=Yu.empty();let i=new Go(Va.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new R1(e.key,r,new Fc(i.toArray()),Uc.none())}}function vEn(e,t,n){e instanceof aP?(function(i,s,o){const a=i.value.clone(),l=MSe(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(e,t,n):e instanceof R1?(function(i,s,o){if(!UM(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=MSe(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Uqe(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(e,t,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,t,n)}function Ck(e,t,n,r){return e instanceof aP?(function(s,o,a,l){if(!UM(s.precondition,o))return a;const u=s.value.clone(),c=$Se(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(e,t,n,r):e instanceof R1?(function(s,o,a,l){if(!UM(s.precondition,o))return a;const u=$Se(s.fieldTransforms,l,o),c=o.data;return c.setAll(Uqe(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((d=>d.field)))})(e,t,n,r):(function(s,o,a){return UM(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(e,t,n)}function bEn(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=Lqe(r.transform,i||null);s!=null&&(n===null&&(n=Yu.empty()),n.set(r.field,s))}return n||null}function NSe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&zC(r,i,((s,o)=>gEn(s,o)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class aP extends a9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class R1 extends a9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Uqe(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function MSe(e,t,n){const r=new Map;wi(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,pEn(o,a,n[i]))}return r}function $Se(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,hEn(s,o,t))}return r}class aue extends a9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wEn extends a9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class xEn{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&vEn(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ck(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ck(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=$qe();return this.mutations.forEach((i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Vqe(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ir.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Mr())}isEqual(t){return this.batchId===t.batchId&&zC(this.mutations,t.mutations,((n,r)=>NSe(n,r)))&&zC(this.baseMutations,t.baseMutations,((n,r)=>NSe(n,r)))}}class lue{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){wi(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let i=(function(){return lEn})();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new lue(t,n,r,i)}}class _En{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class EEn{constructor(t,n){this.count=t,this.unchangedNames=n}}var bo,Gr;function CEn(e){switch(e){case dt.OK:return Wn(64938);case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0;default:return Wn(15467,{code:e})}}function Hqe(e){if(e===void 0)return f0("GRPC error has no .code"),dt.UNKNOWN;switch(e){case bo.OK:return dt.OK;case bo.CANCELLED:return dt.CANCELLED;case bo.UNKNOWN:return dt.UNKNOWN;case bo.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case bo.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case bo.INTERNAL:return dt.INTERNAL;case bo.UNAVAILABLE:return dt.UNAVAILABLE;case bo.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case bo.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case bo.NOT_FOUND:return dt.NOT_FOUND;case bo.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case bo.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case bo.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case bo.ABORTED:return dt.ABORTED;case bo.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case bo.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case bo.DATA_LOSS:return dt.DATA_LOSS;default:return Wn(39323,{code:e})}}(Gr=bo||(bo={}))[Gr.OK=0]="OK",Gr[Gr.CANCELLED=1]="CANCELLED",Gr[Gr.UNKNOWN=2]="UNKNOWN",Gr[Gr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gr[Gr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gr[Gr.NOT_FOUND=5]="NOT_FOUND",Gr[Gr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gr[Gr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gr[Gr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gr[Gr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gr[Gr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gr[Gr.ABORTED=10]="ABORTED",Gr[Gr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gr[Gr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gr[Gr.INTERNAL=13]="INTERNAL",Gr[Gr.UNAVAILABLE=14]="UNAVAILABLE",Gr[Gr.DATA_LOSS=15]="DATA_LOSS";const SEn=new dv([4294967295,4294967295],0);function FSe(e){const t=hqe().encode(e),n=new oqe;return n.update(t),new Uint8Array(n.digest())}function LSe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new dv([n,r],0),new dv([i,s],0)]}class uue{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new OA(`Invalid padding: ${n}`);if(r<0)throw new OA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new OA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new OA(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=dv.fromNumber(this.fe)}pe(t,n,r){let i=t.add(n.multiply(dv.fromNumber(r)));return i.compare(SEn)===1&&(i=new dv([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=FSe(t),[r,i]=LSe(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new uue(s,i,n);return r.forEach((a=>o.insert(a))),o}insert(t){if(this.fe===0)return;const n=FSe(t),[r,i]=LSe(n);for(let s=0;s<this.hashCount;s++){const o=this.pe(r,i,s);this.we(o)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class OA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class l9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,lP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new l9(ir.min(),i,new ks(Er),h0(),Mr())}}class lP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new lP(r,n,Mr(),Mr(),Mr())}}class HM{constructor(t,n,r,i){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=i}}class qqe{constructor(t,n){this.targetId=t,this.De=n}}class Wqe{constructor(t,n,r=Ka.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class jSe{constructor(){this.ve=0,this.Ce=BSe(),this.Fe=Ka.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=Mr(),n=Mr(),r=Mr();return this.Ce.forEach(((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Wn(38017,{changeType:s})}})),new lP(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=BSe()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,wi(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class TEn{constructor(t){this.We=t,this.Ge=new Map,this.ze=h0(),this.je=UN(),this.Je=UN(),this.He=new ks(Er)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,(n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:Wn(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach(((r,i)=>{this.nt(i)&&n(i)}))}it(t){const n=t.targetId,r=t.De.count,i=this.st(n);if(i){const s=i.target;if(PQ(s))if(r===0){const o=new $n(s.path);this.Xe(n,o,bl.newNoDocument(o,ir.min()))}else wi(r===1,20013,{expectedCount:r});else{const o=this.ot(n);if(o!==r){const a=this._t(t),l=a?this.ut(a,t,o):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Uv(r).toUint8Array()}catch(l){if(l instanceof vqe)return zw("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new uue(o,i,s)}catch(l){return zw(l instanceof OA?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Xe(n,s,null),i++)})),i}Pt(t){const n=new Map;this.Ge.forEach(((s,o)=>{const a=this.st(o);if(a){if(s.current&&PQ(a.target)){const l=new $n(a.target.path);this.Tt(l).has(o)||this.It(o,l)||this.Xe(o,l,bl.newNoDocument(l,t))}s.Ne&&(n.set(o,s.Le()),s.ke())}}));let r=Mr();this.Je.forEach(((s,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(s))})),this.ze.forEach(((s,o)=>o.setReadTime(t)));const i=new l9(t,n,this.He,this.ze,r);return this.ze=h0(),this.je=UN(),this.Je=UN(),this.He=new ks(Er),i}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const i=this.tt(t);this.It(t,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new jSe,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Go(Er),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Go(Er),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||Zt("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new jSe),this.We.getRemoteKeysForTarget(t).forEach((n=>{this.Xe(t,n,null)}))}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function UN(){return new ks($n.comparator)}function BSe(){return new ks($n.comparator)}const AEn={asc:"ASCENDING",desc:"DESCENDING"},kEn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IEn={and:"AND",or:"OR"};class REn{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function NQ(e,t){return e.useProto3Json||e9(t)?t:{value:t}}function eF(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gqe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function DEn(e,t){return eF(e,t.toTimestamp())}function Gp(e){return wi(!!e,49232),ir.fromTimestamp((function(n){const r=Vv(n);return new gi(r.seconds,r.nanos)})(e))}function cue(e,t){return MQ(e,t).canonicalString()}function MQ(e,t){const n=(function(i){return new os(["projects",i.projectId,"databases",i.database])})(e).child("documents");return t===void 0?n:n.child(t)}function Yqe(e){const t=os.fromString(e);return wi(Zqe(t),10190,{key:t.toString()}),t}function $Q(e,t){return cue(e.databaseId,t.path)}function yW(e,t){const n=Yqe(t);if(n.get(1)!==e.databaseId.projectId)throw new nn(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new nn(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $n(Xqe(n))}function Kqe(e,t){return cue(e.databaseId,t)}function PEn(e){const t=Yqe(e);return t.length===4?os.emptyPath():Xqe(t)}function FQ(e){return new os(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xqe(e){return wi(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function zSe(e,t,n){return{name:$Q(e,t),fields:n.value.mapValue.fields}}function OEn(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Wn(39313,{state:u})})(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=(function(u,c){return u.useProto3Json?(wi(c===void 0||typeof c=="string",58123),Ka.fromBase64String(c||"")):(wi(c===void 0||c instanceof Buffer||c instanceof Uint8Array,16193),Ka.fromUint8Array(c||new Uint8Array))})(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&(function(u){const c=u.code===void 0?dt.UNKNOWN:Hqe(u.code);return new nn(c,u.message||"")})(o);n=new Wqe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=yW(e,r.document.name),s=Gp(r.document.updateTime),o=r.document.createTime?Gp(r.document.createTime):ir.min(),a=new Yu({mapValue:{fields:r.document.fields}}),l=bl.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new HM(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=yW(e,r.document),s=r.readTime?Gp(r.readTime):ir.min(),o=bl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new HM([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=yW(e,r.document),s=r.removedTargetIds||[];n=new HM([],s,i,null)}else{if(!("filter"in t))return Wn(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new EEn(i,s),a=r.targetId;n=new qqe(a,o)}}return n}function NEn(e,t){let n;if(t instanceof aP)n={update:zSe(e,t.key,t.value)};else if(t instanceof aue)n={delete:$Q(e,t.key)};else if(t instanceof R1)n={update:zSe(e,t.key,t.data),updateMask:UEn(t.fieldMask)};else{if(!(t instanceof wEn))return Wn(16599,{Rt:t.type});n={verify:$Q(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(s,o){const a=o.transform;if(a instanceof nR)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rR)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof iR)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Z$)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw Wn(20930,{transform:o.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:DEn(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Wn(27497)})(e,t.precondition)),n}function MEn(e,t){return e&&e.length>0?(wi(t!==void 0,14353),e.map((n=>(function(i,s){let o=i.updateTime?Gp(i.updateTime):Gp(s);return o.isEqual(ir.min())&&(o=Gp(s)),new yEn(o,i.transformResults||[])})(n,t)))):[]}function $En(e,t){return{documents:[Kqe(e,t.path)]}}function FEn(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kqe(e,i);const s=(function(u){if(u.length!==0)return Jqe(mm.create(u,"and"))})(t.filters);s&&(n.structuredQuery.where=s);const o=(function(u){if(u.length!==0)return u.map((c=>(function(f){return{field:G_(f.field),direction:BEn(f.dir)}})(c)))})(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=NQ(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(t.endAt)),{Vt:n,parent:i}}function LEn(e){let t=PEn(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){wi(r===1,65062);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=(function(d){const f=Qqe(d);return f instanceof mm&&kqe(f)?f.getFilters():[f]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((f=>(function(p){return new J$(Y_(p.field),(function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(p.direction))})(f)))})(n.orderBy));let a=null;n.limit&&(a=(function(d){let f;return f=typeof d=="object"?d.value:d,e9(f)?null:f})(n.limit));let l=null;n.startAt&&(l=(function(d){const f=!!d.before,h=d.values||[];return new Q$(h,f)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const f=!d.before,h=d.values||[];return new Q$(h,f)})(n.endAt)),nEn(t,i,o,s,a,"F",l,u)}function jEn(e,t){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wn(28987,{purpose:i})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Qqe(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Y_(n.unaryFilter.field);return Uo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Y_(n.unaryFilter.field);return Uo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Y_(n.unaryFilter.field);return Uo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Y_(n.unaryFilter.field);return Uo.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Wn(61313);default:return Wn(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Uo.create(Y_(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Wn(58110);default:return Wn(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return mm.create(n.compositeFilter.filters.map((r=>Qqe(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Wn(1026)}})(n.compositeFilter.op))})(e):Wn(30097,{filter:e})}function BEn(e){return AEn[e]}function zEn(e){return kEn[e]}function VEn(e){return IEn[e]}function G_(e){return{fieldPath:e.canonicalString()}}function Y_(e){return Va.fromServerFormat(e.fieldPath)}function Jqe(e){return e instanceof Uo?(function(n){if(n.op==="=="){if(kSe(n.value))return{unaryFilter:{field:G_(n.field),op:"IS_NAN"}};if(ASe(n.value))return{unaryFilter:{field:G_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kSe(n.value))return{unaryFilter:{field:G_(n.field),op:"IS_NOT_NAN"}};if(ASe(n.value))return{unaryFilter:{field:G_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:G_(n.field),op:zEn(n.op),value:n.value}}})(e):e instanceof mm?(function(n){const r=n.getFilters().map((i=>Jqe(i)));return r.length===1?r[0]:{compositeFilter:{op:VEn(n.op),filters:r}}})(e):Wn(54877,{filter:e})}function UEn(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Zqe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}class Gy{constructor(t,n,r,i,s=ir.min(),o=ir.min(),a=Ka.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new Gy(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Gy(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Gy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Gy(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class HEn{constructor(t){this.gt=t}}function qEn(e){const t=LEn({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?OQ(t,t.limit,"L"):t}class WEn{constructor(){this.Dn=new GEn}addToCollectionParentIndex(t,n){return this.Dn.add(n),ct.resolve()}getCollectionParents(t,n){return ct.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return ct.resolve()}deleteFieldIndex(t,n){return ct.resolve()}deleteAllFieldIndexes(t){return ct.resolve()}createTargetIndexes(t,n){return ct.resolve()}getDocumentsMatchingTarget(t,n){return ct.resolve(null)}getIndexType(t,n){return ct.resolve(0)}getFieldIndexes(t,n){return ct.resolve([])}getNextCollectionGroupToUpdate(t){return ct.resolve(null)}getMinOffset(t,n){return ct.resolve(zv.min())}getMinOffsetFromCollectionGroup(t,n){return ct.resolve(zv.min())}updateCollectionGroup(t,n,r){return ct.resolve()}updateIndexEntries(t,n){return ct.resolve()}}class GEn{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Go(os.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Go(os.comparator)).toArray()}}const VSe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eWe=41943040;class Vu{static withCacheSize(t){return new Vu(t,Vu.DEFAULT_COLLECTION_PERCENTILE,Vu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}Vu.DEFAULT_COLLECTION_PERCENTILE=10,Vu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vu.DEFAULT=new Vu(eWe,Vu.DEFAULT_COLLECTION_PERCENTILE,Vu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vu.DISABLED=new Vu(-1,0,0);class HC{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new HC(0)}static ur(){return new HC(-1)}}const USe="LruGarbageCollector",tWe=1048576;function HSe([e,t],[n,r]){const i=Er(e,n);return i===0?Er(t,r):i}class YEn{constructor(t){this.Tr=t,this.buffer=new Go(HSe),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();HSe(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KEn{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){Zt(USe,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){fT(n)?Zt(USe,"Ignoring IndexedDB error during garbage collection: ",n):await dT(n)}await this.Rr(3e5)}))}}class XEn{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return ct.resolve(ZB.ue);const r=new YEn(n);return this.Vr.forEachTarget(t,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.gr(t,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Zt("LruGarbageCollector","Garbage collection skipped; disabled"),ct.resolve(VSe)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(Zt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VSe):this.pr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(Zt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(t,i)))).next((d=>(r=d,a=Date.now(),this.removeTargets(t,r,n)))).next((d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,r)))).next((d=>(u=Date.now(),q_()<=Nr.DEBUG&&Zt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),ct.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d}))))}}function QEn(e,t){return new XEn(e,t)}class JEn{constructor(){this.changes=new Ix((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,bl.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ct.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class ZEn{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class eCn{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(t,n)))).next((i=>(r!==null&&Ck(r.mutation,i,Fc.empty(),gi.now()),i)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,Mr()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=Mr()){const i=Bb();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,r).next((s=>{let o=PA();return s.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(t,n){const r=Bb();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,Mr())))}populateOverlays(t,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(t,i).next((s=>{s.forEach(((o,a)=>{n.set(o,a)}))}))}computeViews(t,n,r,i){let s=h0();const o=Ek(),a=(function(){return Ek()})();return n.forEach(((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof R1)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Ck(c.mutation,u,c.mutation.getFieldMask(),gi.now())):o.set(u.key,Fc.empty())})),this.recalculateAndSaveOverlays(t,s).next((l=>(l.forEach(((u,c)=>o.set(u,c))),n.forEach(((u,c)=>{var d;return a.set(u,new ZEn(c,(d=o.get(u))!==null&&d!==void 0?d:null))})),a)))}recalculateAndSaveOverlays(t,n){const r=Ek();let i=new ks(((o,a)=>o-a)),s=Mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Fc.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||Mr()).add(l);i=i.insert(a.batchId,d)}))})).next((()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=$qe();c.forEach((f=>{if(!s.has(f)){const h=Vqe(n.get(f),r.get(f));h!==null&&d.set(f,h),s=s.add(f)}})),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return ct.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,i){return(function(o){return $n.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):rEn(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):ct.resolve(Bb());let a=JI,l=s;return o.next((u=>ct.forEach(u,((c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?ct.resolve():this.remoteDocumentCache.getEntry(t,c).next((f=>{l=l.insert(c,f)}))))).next((()=>this.populateOverlays(t,u,s))).next((()=>this.computeViews(t,l,u,Mr()))).next((c=>({batchId:a,changes:Mqe(c)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new $n(n)).next((r=>{let i=PA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=PA();return this.indexManager.getCollectionParents(t,s).next((a=>ct.forEach(a,(l=>{const u=(function(d,f){return new n9(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,r,i).next((c=>{c.forEach(((d,f)=>{o=o.insert(d,f)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i)))).next((o=>{s.forEach(((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,bl.newInvalidDocument(c)))}));let a=PA();return o.forEach(((l,u)=>{const c=s.get(l);c!==void 0&&Ck(c.mutation,u,Fc.empty(),gi.now()),s9(n,u)&&(a=a.insert(l,u))})),a}))}}class tCn{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return ct.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Gp(i.createTime)}})(n)),ct.resolve()}getNamedQuery(t,n){return ct.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:qEn(i.bundledQuery),readTime:Gp(i.readTime)}})(n)),ct.resolve()}}class nCn{constructor(){this.overlays=new ks($n.comparator),this.kr=new Map}getOverlay(t,n){return ct.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Bb();return ct.forEach(n,(i=>this.getOverlay(t,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((i,s)=>{this.wt(t,n,s)})),ct.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.kr.delete(r)),ct.resolve()}getOverlaysForCollection(t,n,r){const i=Bb(),s=n.length+1,o=new $n(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return ct.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new ks(((u,c)=>u-c));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=Bb(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Bb(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,c)=>a.set(u,c))),!(a.size()>=i)););return ct.resolve(a)}wt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new _En(n,r));let s=this.kr.get(n);s===void 0&&(s=Mr(),this.kr.set(n,s)),this.kr.set(n,s.add(r.key))}}class rCn{constructor(){this.sessionToken=Ka.EMPTY_BYTE_STRING}getSessionToken(t){return ct.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ct.resolve()}}class due{constructor(){this.qr=new Go(la.Qr),this.$r=new Go(la.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new la(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Wr(new la(t,n))}Gr(t,n){t.forEach((r=>this.removeReference(r,n)))}zr(t){const n=new $n(new os([])),r=new la(n,t),i=new la(n,t+1),s=[];return this.$r.forEachInRange([r,i],(o=>{this.Wr(o),s.push(o.key)})),s}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new $n(new os([])),r=new la(n,t),i=new la(n,t+1);let s=Mr();return this.$r.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(t){const n=new la(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class la{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return $n.comparator(t.key,n.key)||Er(t.Hr,n.Hr)}static Ur(t,n){return Er(t.Hr,n.Hr)||$n.comparator(t.key,n.key)}}class iCn{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Go(la.Qr)}checkEmpty(t){return ct.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xEn(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Yr=this.Yr.add(new la(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return ct.resolve(o)}lookupMutationBatch(t,n){return ct.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return ct.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(this.mutationQueue.length===0?tue:this.er-1)}getAllMutationBatches(t){return ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new la(n,0),i=new la(n,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],(o=>{const a=this.Zr(o.Hr);s.push(a)})),ct.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Go(Er);return n.forEach((i=>{const s=new la(i,0),o=new la(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],(a=>{r=r.add(a.Hr)}))})),ct.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;$n.isDocumentKey(s)||(s=s.child(""));const o=new la(new $n(s),0);let a=new Go(Er);return this.Yr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)}),o),ct.resolve(this.ei(a))}ei(t){const n=[];return t.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(t,n){wi(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return ct.forEach(n.mutations,(i=>{const s=new la(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.Yr=r}))}rr(t){}containsKey(t,n){const r=new la(n,0),i=this.Yr.firstAfterOrEqual(r);return ct.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,ct.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class sCn{constructor(t){this.ni=t,this.docs=(function(){return new ks($n.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return ct.resolve(r?r.document.mutableCopy():bl.newInvalidDocument(n))}getEntries(t,n){let r=h0();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bl.newInvalidDocument(i))})),ct.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=h0();const o=n.path,a=new $n(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||N_n(O_n(c),r)<=0||(i.has(c.key)||s9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return ct.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Wn(9500)}ri(t,n){return ct.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new oCn(this)}getSize(t){return ct.resolve(this.size)}}class oCn extends JEn{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(t,i)):this.Or.removeEntry(r)})),ct.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}class aCn{constructor(t){this.persistence=t,this.ii=new Ix((n=>iue(n)),sue),this.lastRemoteSnapshotVersion=ir.min(),this.highestTargetId=0,this.si=0,this.oi=new due,this.targetCount=0,this._i=HC.ar()}forEachTarget(t,n){return this.ii.forEach(((r,i)=>n(i))),ct.resolve()}getLastRemoteSnapshotVersion(t){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ct.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),ct.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new HC(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,ct.resolve()}updateTargetData(t,n){return this.hr(n),ct.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,ct.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.ii.forEach(((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),ct.waitFor(s).next((()=>i))}getTargetCount(t){return ct.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return ct.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),ct.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(t,o))})),ct.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),ct.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return ct.resolve(r)}containsKey(t,n){return ct.resolve(this.oi.containsKey(n))}}class nWe{constructor(t,n){this.ai={},this.overlays={},this.ui=new ZB(0),this.ci=!1,this.ci=!0,this.li=new rCn,this.referenceDelegate=t(this),this.hi=new aCn(this),this.indexManager=new WEn,this.remoteDocumentCache=(function(i){return new sCn(i)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new HEn(n),this.Ti=new tCn(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new nCn,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new iCn(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){Zt("MemoryPersistence","Starting transaction:",t);const i=new lCn(this.ui.next());return this.referenceDelegate.Ii(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ei(t,n){return ct.or(Object.values(this.ai).map((r=>()=>r.containsKey(t,n))))}}class lCn extends $_n{constructor(t){super(),this.currentSequenceNumber=t}}class fue{constructor(t){this.persistence=t,this.Ai=new due,this.Ri=null}static Vi(t){return new fue(t)}get mi(){if(this.Ri)return this.Ri;throw Wn(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),ct.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),ct.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),ct.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach((i=>this.mi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((i=>{i.forEach((s=>this.mi.add(s.toString())))})).next((()=>r.removeTargetData(t,n)))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.mi,(r=>{const i=$n.fromPath(r);return this.fi(t,i).next((s=>{s||n.removeEntry(i,ir.min())}))})).next((()=>(this.Ri=null,n.apply(t))))}updateLimboDocument(t,n){return this.fi(t,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(t){return 0}fi(t,n){return ct.or([()=>ct.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class tF{constructor(t,n){this.persistence=t,this.gi=new Ix((r=>j_n(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=QEn(this,n)}static Vi(t,n){return new tF(t,n)}Ii(){}di(t){return ct.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((i=>r+i))))}yr(t){let n=0;return this.gr(t,(r=>{n++})).next((()=>n))}gr(t,n){return ct.forEach(this.gi,((r,i)=>this.Sr(t,r,i).next((s=>s?ct.resolve():n(i)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(t,(o=>this.Sr(t,o,n).next((a=>{a||(r++,s.removeEntry(o,ir.min()))})))).next((()=>s.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),ct.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),ct.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),ct.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),ct.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=zM(t.data.value)),n}Sr(t,n,r){return ct.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.gi.get(n);return ct.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class hue{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=i}static Es(t,n){let r=Mr(),i=Mr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hue(t,n.fromCache,r,i)}}class uCn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class cCn{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Nbn()?8:F_n(Ml())>0?6:4})()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ps(t,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ys(t,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new uCn;return this.ws(t,n,o).next((a=>{if(s.result=a,this.Rs)return this.Ss(t,n,o,a.size)}))})).next((()=>s.result))}Ss(t,n,r,i){return r.documentReadCount<this.Vs?(q_()<=Nr.DEBUG&&Zt("QueryEngine","SDK will not create cache indexes for query:",W_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ct.resolve()):(q_()<=Nr.DEBUG&&Zt("QueryEngine","Query:",W_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(q_()<=Nr.DEBUG&&Zt("QueryEngine","The SDK decides to create cache indexes for query:",W_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Wp(n))):ct.resolve())}ps(t,n){if(PSe(n))return ct.resolve(null);let r=Wp(n);return this.indexManager.getIndexType(t,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=OQ(n,null,"F"),r=Wp(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((s=>{const o=Mr(...s);return this.gs.getDocuments(t,o).next((a=>this.indexManager.getMinOffset(t,r).next((l=>{const u=this.bs(n,a);return this.Ds(n,u,o,l.readTime)?this.ps(t,OQ(n,null,"F")):this.vs(t,u,n,l)}))))})))))}ys(t,n,r,i){return PSe(n)||i.isEqual(ir.min())?ct.resolve(null):this.gs.getDocuments(t,r).next((s=>{const o=this.bs(n,s);return this.Ds(n,o,r,i)?ct.resolve(null):(q_()<=Nr.DEBUG&&Zt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),W_(n)),this.vs(t,o,n,P_n(i,JI)).next((a=>a)))}))}bs(t,n){let r=new Go(Oqe(t));return n.forEach(((i,s)=>{s9(t,s)&&(r=r.add(s))})),r}Ds(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(t,n,r){return q_()<=Nr.DEBUG&&Zt("QueryEngine","Using full collection scan to execute query:",W_(n)),this.gs.getDocumentsMatchingQuery(t,n,zv.min(),r)}vs(t,n,r,i){return this.gs.getDocumentsMatchingQuery(t,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}const pue="LocalStore",dCn=3e8;class fCn{constructor(t,n,r,i){this.persistence=t,this.Cs=n,this.serializer=i,this.Fs=new ks(Er),this.Ms=new Ix((s=>iue(s)),sue),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new eCn(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Fs)))}}function hCn(e,t,n,r){return new fCn(e,t,n,r)}async function rWe(e,t){const n=sr(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Ns(t),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],a=[];let l=Mr();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Bs:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function pCn(e,t){const n=sr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=t.batch.keys(),s=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,c){const d=u.batch,f=d.keys();let h=ct.resolve();return f.forEach((p=>{h=h.next((()=>c.getEntry(l,p))).next((m=>{const g=u.docVersions.get(p);wi(g!==null,48541),m.version.compareTo(g)<0&&(d.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))}))})),h.next((()=>a.mutationQueue.removeMutationBatch(l,d)))})(n,r,t,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=Mr();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(t)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function iWe(e){const t=sr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.hi.getLastRemoteSnapshotVersion(n)))}function mCn(e,t){const n=sr(e),r=t.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];t.targetChanges.forEach(((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.hi.removeMatchingKeys(s,c.removedDocuments,d).next((()=>n.hi.addMatchingKeys(s,c.addedDocuments,d))));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(Ka.EMPTY_BYTE_STRING,ir.min()).withLastLimboFreeSnapshotVersion(ir.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(d,h),(function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=dCn?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0})(f,h,c)&&a.push(n.hi.updateTargetData(s,h))}));let l=h0(),u=Mr();if(t.documentUpdates.forEach((c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))})),a.push(gCn(s,o,t.documentUpdates).next((c=>{l=c.Ls,u=c.ks}))),!r.isEqual(ir.min())){const c=n.hi.getLastRemoteSnapshotVersion(s).next((d=>n.hi.setTargetsMetadata(s,s.currentSequenceNumber,r)));a.push(c)}return ct.waitFor(a).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,l,u))).next((()=>l))})).then((s=>(n.Fs=i,s)))}function gCn(e,t,n){let r=Mr(),i=Mr();return n.forEach((s=>r=r.add(s))),t.getEntries(e,r).next((s=>{let o=h0();return n.forEach(((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ir.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Zt(pue,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{Ls:o,ks:i}}))}function yCn(e,t){const n=sr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=tue),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function vCn(e,t){const n=sr(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.hi.getTargetData(r,t).next((s=>s?(i=s,ct.resolve(i)):n.hi.allocateTargetId(r).next((o=>(i=new Gy(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r}))}async function LQ(e,t,n){const r=sr(e),i=r.Fs.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!fT(o))throw o;Zt(pue,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(i.target)}function qSe(e,t,n){const r=sr(e);let i=ir.min(),s=Mr();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,c){const d=sr(l),f=d.Ms.get(c);return f!==void 0?ct.resolve(d.Fs.get(f)):d.hi.getTargetData(u,c)})(r,o,Wp(t)).next((a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{s=l}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,t,n?i:ir.min(),n?s:Mr()))).next((a=>(bCn(r,sEn(t),a),{documents:a,qs:s})))))}function bCn(e,t,n){let r=e.xs.get(t)||ir.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),e.xs.set(t,r)}class WSe{constructor(){this.activeTargetIds=dEn()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wCn{constructor(){this.Fo=new WSe,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new WSe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class xCn{xo(t){}shutdown(){}}const GSe="ConnectivityMonitor";class YSe{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Zt(GSe,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){Zt(GSe,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let HN=null;function jQ(){return HN===null?HN=(function(){return 268435456+Math.round(2147483648*Math.random())})():HN++,"0x"+HN.toString(16)}const vW="RestConnection",_Cn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ECn{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===K$?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(t,n,r,i,s){const o=jQ(),a=this.Go(t,n.toUriEncodedString());Zt(vW,`Sending RPC '${t}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,s);const{host:u}=new URL(a),c=k1(u);return this.jo(t,a,l,r,c).then((d=>(Zt(vW,`Received RPC '${t}' ${o}: `,d),d)),(d=>{throw zw(vW,`RPC '${t}' ${o} failed with error: `,d,"url: ",a,"request:",r),d}))}Jo(t,n,r,i,s,o){return this.Wo(t,n,r,i,s)}zo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cT})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>t[s]=i)),r&&r.headers.forEach(((i,s)=>t[s]=i))}Go(t,n){const r=_Cn[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}class CCn{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}const fl="WebChannelConnection";class SCn extends ECn{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,i,s){const o=jQ();return new Promise(((a,l)=>{const u=new aqe;u.setWithCredentials(!0),u.listenOnce(lqe.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case BM.NO_ERROR:const d=u.getResponseJson();Zt(fl,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),a(d);break;case BM.TIMEOUT:Zt(fl,`RPC '${t}' ${o} timed out`),l(new nn(dt.DEADLINE_EXCEEDED,"Request time out"));break;case BM.HTTP_ERROR:const f=u.getStatus();if(Zt(fl,`RPC '${t}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h?.error;if(p&&p.status&&p.message){const m=(function(y){const v=y.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(v)>=0?v:dt.UNKNOWN})(p.status);l(new nn(m,p.message))}else l(new nn(dt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new nn(dt.UNAVAILABLE,"Connection failed."));break;default:Wn(9055,{c_:t,streamId:o,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{Zt(fl,`RPC '${t}' ${o} completed.`)}}));const c=JSON.stringify(i);Zt(fl,`RPC '${t}' ${o} sending request:`,i),u.send(n,"POST",c,r,15)}))}P_(t,n,r){const i=jQ(),s=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=dqe(),a=cqe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Zt(fl,`Creating RPC '${t}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);this.T_(d);let f=!1,h=!1;const p=new CCn({Ho:g=>{h?Zt(fl,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(f||(Zt(fl,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),Zt(fl,`RPC '${t}' stream ${i} sending:`,g),d.send(g))},Yo:()=>d.close()}),m=(g,y,v)=>{g.listen(y,(b=>{try{v(b)}catch(_){setTimeout((()=>{throw _}),0)}}))};return m(d,DA.EventType.OPEN,(()=>{h||(Zt(fl,`RPC '${t}' stream ${i} transport opened.`),p.s_())})),m(d,DA.EventType.CLOSE,(()=>{h||(h=!0,Zt(fl,`RPC '${t}' stream ${i} transport closed`),p.__(),this.I_(d))})),m(d,DA.EventType.ERROR,(g=>{h||(h=!0,zw(fl,`RPC '${t}' stream ${i} transport errored. Name:`,g.name,"Message:",g.message),p.__(new nn(dt.UNAVAILABLE,"The operation could not be completed")))})),m(d,DA.EventType.MESSAGE,(g=>{var y;if(!h){const v=g.data[0];wi(!!v,16349);const b=v,_=b?.error||((y=b[0])===null||y===void 0?void 0:y.error);if(_){Zt(fl,`RPC '${t}' stream ${i} received error:`,_);const E=_.status;let S=(function(R){const I=bo[R];if(I!==void 0)return Hqe(I)})(E),T=_.message;S===void 0&&(S=dt.INTERNAL,T="Unknown error status: "+E+" with message "+_.message),h=!0,p.__(new nn(S,T)),d.close()}else Zt(fl,`RPC '${t}' stream ${i} received:`,v),p.a_(v)}})),m(a,uqe.STAT_EVENT,(g=>{g.stat===AQ.PROXY?Zt(fl,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===AQ.NOPROXY&&Zt(fl,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.o_()}),0),p}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((n=>n===t))}}function bW(){return typeof document<"u"?document:null}function u9(e){return new REn(e,!0)}class sWe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&Zt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const KSe="PersistentStream";class oWe{constructor(t,n,r,i,s,o,a,l){this.Fi=t,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new sWe(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===dt.RESOURCE_EXHAUSTED?(f0(n.toString()),f0("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===dt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.b_===n&&this.W_(r,i)}),(r=>{t((()=>{const i=new nn(dt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)}))}))}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((i=>{r((()=>this.G_(i)))})),this.stream.onMessage((i=>{r((()=>++this.C_==1?this.j_(i):this.onNext(i)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return Zt(KSe,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget((()=>this.b_===t?n():(Zt(KSe,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TCn extends oWe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=OEn(this.serializer,t),r=(function(s){if(!("targetChange"in s))return ir.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ir.min():o.readTime?Gp(o.readTime):ir.min()})(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=FQ(this.serializer),n.addTarget=(function(s,o){let a;const l=o.target;if(a=PQ(l)?{documents:$En(s,l)}:{query:FEn(s,l).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Gqe(s,o.resumeToken);const u=NQ(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ir.min())>0){a.readTime=eF(s,o.snapshotVersion.toTimestamp());const u=NQ(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,t);const r=jEn(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=FQ(this.serializer),n.removeTarget=t,this.k_(n)}}class ACn extends oWe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return wi(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,wi(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){wi(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=MEn(t.writeResults,t.commitTime),r=Gp(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=FQ(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>NEn(this.serializer,r)))};this.k_(n)}}class kCn{}class ICn extends kCn{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new nn(dt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Wo(t,MQ(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new nn(dt.UNKNOWN,s.toString())}))}Jo(t,n,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Jo(t,MQ(n,r),i,o,a,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new nn(dt.UNKNOWN,o.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class RCn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(f0(n),this._a=!1):Zt("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Vw="RemoteStore";class DCn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo((o=>{r.enqueueAndForget((async()=>{Rx(this)&&(Zt(Vw,"Restarting streams for network reachability change."),await(async function(l){const u=sr(l);u.Ia.add(4),await cP(u),u.Aa.set("Unknown"),u.Ia.delete(4),await uP(u)})(this))}))})),this.Aa=new RCn(r,i)}}async function uP(e){if(Rx(e))for(const t of e.da)await t(!0)}async function cP(e){for(const t of e.da)await t(!1)}function aWe(e,t){const n=sr(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),vue(n)?yue(n):hT(n).x_()&&gue(n,t))}function mue(e,t){const n=sr(e),r=hT(n);n.Ta.delete(t),r.x_()&&lWe(n,t),n.Ta.size===0&&(r.x_()?r.B_():Rx(n)&&n.Aa.set("Unknown"))}function gue(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ir.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}hT(e).H_(t)}function lWe(e,t){e.Ra.$e(t),hT(e).Y_(t)}function yue(e){e.Ra=new TEn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),hT(e).start(),e.Aa.aa()}function vue(e){return Rx(e)&&!hT(e).M_()&&e.Ta.size>0}function Rx(e){return sr(e).Ia.size===0}function uWe(e){e.Ra=void 0}async function PCn(e){e.Aa.set("Online")}async function OCn(e){e.Ta.forEach(((t,n)=>{gue(e,t)}))}async function NCn(e,t){uWe(e),vue(e)?(e.Aa.la(t),yue(e)):e.Aa.set("Unknown")}async function MCn(e,t,n){if(e.Aa.set("Online"),t instanceof Wqe&&t.state===2&&t.cause)try{await(async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(e,t)}catch(r){Zt(Vw,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await nF(e,r)}else if(t instanceof HM?e.Ra.Ye(t):t instanceof qqe?e.Ra.it(t):e.Ra.et(t),!n.isEqual(ir.min()))try{const r=await iWe(e.localStore);n.compareTo(r)>=0&&await(function(s,o){const a=s.Ra.Pt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.Ta.get(u);c&&s.Ta.set(u,c.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const c=s.Ta.get(l);if(!c)return;s.Ta.set(l,c.withResumeToken(Ka.EMPTY_BYTE_STRING,c.snapshotVersion)),lWe(s,l);const d=new Gy(c.target,l,u,c.sequenceNumber);gue(s,d)})),s.remoteSyncer.applyRemoteEvent(a)})(e,n)}catch(r){Zt(Vw,"Failed to raise snapshot:",r),await nF(e,r)}}async function nF(e,t,n){if(!fT(t))throw t;e.Ia.add(1),await cP(e),e.Aa.set("Offline"),n||(n=()=>iWe(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Zt(Vw,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await uP(e)}))}function cWe(e,t){return t().catch((n=>nF(e,n,t)))}async function c9(e){const t=sr(e),n=qv(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:tue;for(;$Cn(t);)try{const i=await yCn(t.localStore,r);if(i===null){t.Pa.length===0&&n.B_();break}r=i.batchId,FCn(t,i)}catch(i){await nF(t,i)}dWe(t)&&fWe(t)}function $Cn(e){return Rx(e)&&e.Pa.length<10}function FCn(e,t){e.Pa.push(t);const n=qv(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function dWe(e){return Rx(e)&&!qv(e).M_()&&e.Pa.length>0}function fWe(e){qv(e).start()}async function LCn(e){qv(e).na()}async function jCn(e){const t=qv(e);for(const n of e.Pa)t.X_(n.mutations)}async function BCn(e,t,n){const r=e.Pa.shift(),i=lue.from(r,t,n);await cWe(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await c9(e)}async function zCn(e,t){t&&qv(e).Z_&&await(async function(r,i){if((function(o){return CEn(o)&&o!==dt.ABORTED})(i.code)){const s=r.Pa.shift();qv(r).N_(),await cWe(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await c9(r)}})(e,t),dWe(e)&&fWe(e)}async function XSe(e,t){const n=sr(e);n.asyncQueue.verifyOperationInProgress(),Zt(Vw,"RemoteStore received new credentials");const r=Rx(n);n.Ia.add(3),await cP(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await uP(n)}async function VCn(e,t){const n=sr(e);t?(n.Ia.delete(2),await uP(n)):t||(n.Ia.add(2),await cP(n),n.Aa.set("Unknown"))}function hT(e){return e.Va||(e.Va=(function(n,r,i){const s=sr(n);return s.ia(),new TCn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(e.datastore,e.asyncQueue,{Zo:PCn.bind(null,e),e_:OCn.bind(null,e),n_:NCn.bind(null,e),J_:MCn.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),vue(e)?yue(e):e.Aa.set("Unknown")):(await e.Va.stop(),uWe(e))}))),e.Va}function qv(e){return e.ma||(e.ma=(function(n,r,i){const s=sr(n);return s.ia(),new ACn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:LCn.bind(null,e),n_:zCn.bind(null,e),ea:jCn.bind(null,e),ta:BCn.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await c9(e)):(await e.ma.stop(),e.Pa.length>0&&(Zt(Vw,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}class bue{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new bue(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nn(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wue(e,t){if(f0("AsyncQueue",`${t}: ${e}`),fT(e))return new nn(dt.UNAVAILABLE,`${t}: ${e}`);throw e}class FE{static emptySet(t){return new FE(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||$n.comparator(n.key,r.key):(n,r)=>$n.comparator(n.key,r.key),this.keyedMap=PA(),this.sortedSet=new ks(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof FE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new FE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}class QSe{constructor(){this.fa=new ks($n.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):Wn(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal(((n,r)=>{t.push(r)})),t}}class qC{constructor(t,n,r,i,s,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach((a=>{o.push({type:0,doc:a})})),new qC(t,n,FE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&i9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class UCn{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class HCn{constructor(){this.queries=JSe(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=sr(n),s=i.queries;i.queries=JSe(),s.forEach(((o,a)=>{for(const l of a.wa)l.onError(r)}))})(this,new nn(dt.ABORTED,"Firestore shutting down"))}}function JSe(){return new Ix((e=>Pqe(e)),i9)}async function xue(e,t){const n=sr(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Sa()&&t.ba()&&(r=2):(s=new UCn,r=t.ba()?0:1);try{switch(r){case 0:s.ya=await n.onListen(i,!0);break;case 1:s.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wue(o,`Initialization of query '${W_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.wa.push(t),t.va(n.onlineState),s.ya&&t.Ca(s.ya)&&Eue(n)}async function _ue(e,t){const n=sr(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.wa.indexOf(t);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=t.ba()?0:1:!s.Sa()&&t.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qCn(e,t){const n=sr(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&Eue(n)}function WCn(e,t,n){const r=sr(e),i=r.queries.get(t);if(i)for(const s of i.wa)s.onError(n);r.queries.delete(t)}function Eue(e){e.Da.forEach((t=>{t.next()}))}var BQ,ZSe;(ZSe=BQ||(BQ={})).Fa="default",ZSe.Cache="cache";class Cue{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new qC(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=qC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==BQ.Cache}}class hWe{constructor(t){this.key=t}}class pWe{constructor(t){this.key=t}}class GCn{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Mr(),this.mutatedKeys=Mr(),this.Xa=Oqe(t),this.eu=new FE(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new QSe,i=n?n.eu:this.eu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((c,d)=>{const f=i.get(c),h=s9(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.iu(f,h)||(r.track({type:2,doc:h}),g=!0,(l&&this.Xa(h,l)>0||u&&this.Xa(h,u)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),g=!0):f&&!h&&(r.track({type:1,doc:f}),g=!0,(l||u)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const o=t.ru.pa();o.sort(((c,d)=>(function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wn(20277,{At:g})}};return m(h)-m(p)})(c.type,d.type)||this.Xa(c.doc,d.doc))),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,o.length!==0||u?{snapshot:new qC(this.query,t.eu,s,o,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new QSe,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=Mr(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return t.forEach((r=>{this.Za.has(r)||n.push(new pWe(r))})),this.Za.forEach((r=>{t.has(r)||n.push(new hWe(r))})),n}uu(t){this.Ha=t.qs,this.Za=Mr();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return qC.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Sue="SyncEngine";class YCn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class KCn{constructor(t){this.key=t,this.lu=!1}}class XCn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new Ix((a=>Pqe(a)),i9),this.Tu=new Map,this.Iu=new Set,this.du=new ks($n.comparator),this.Eu=new Map,this.Au=new due,this.Ru={},this.Vu=new Map,this.mu=HC.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function QCn(e,t,n=!0){const r=wWe(e);let i;const s=r.Pu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await mWe(r,t,n,!0),i}async function JCn(e,t){const n=wWe(e);await mWe(n,t,!0,!1)}async function mWe(e,t,n,r){const i=await vCn(e.localStore,Wp(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ZCn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&aWe(e.remoteStore,i),a}async function ZCn(e,t,n,r,i){e.gu=(d,f,h)=>(async function(m,g,y,v){let b=g.view.nu(y);b.Ds&&(b=await qSe(m.localStore,g.query,!1).then((({documents:T})=>g.view.nu(T,b))));const _=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,_,E);return tTe(m,g.targetId,S._u),S.snapshot})(e,d,f,h);const s=await qSe(e.localStore,t,!0),o=new GCn(t,s.qs),a=o.nu(s.documents),l=lP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);tTe(e,n,u._u);const c=new YCn(t,n,o);return e.Pu.set(t,c),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),u.snapshot}async function eSn(e,t,n){const r=sr(e),i=r.Pu.get(t),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter((o=>!i9(o,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await LQ(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mue(r.remoteStore,i.targetId),zQ(r,i.targetId)})).catch(dT)):(zQ(r,i.targetId),await LQ(r.localStore,i.targetId,!0))}async function tSn(e,t){const n=sr(e),r=n.Pu.get(t),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mue(n.remoteStore,r.targetId))}async function nSn(e,t,n){const r=uSn(e);try{const i=await(function(o,a){const l=sr(o),u=gi.now(),c=a.reduce(((h,p)=>h.add(p.key)),Mr());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",(h=>{let p=h0(),m=Mr();return l.Os.getEntries(h,c).next((g=>{p=g,p.forEach(((y,v)=>{v.isValidDocument()||(m=m.add(y))}))})).next((()=>l.localDocuments.getOverlayedDocuments(h,p))).next((g=>{d=g;const y=[];for(const v of a){const b=bEn(v,d.get(v.key).overlayedDocument);b!=null&&y.push(new R1(v.key,b,Sqe(b.value.mapValue),Uc.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,y,a)})).next((g=>{f=g;const y=g.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(h,g.batchId,y)}))})).then((()=>({batchId:f.batchId,changes:Mqe(d)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,l){let u=o.Ru[o.currentUser.toKey()];u||(u=new ks(Er)),u=u.insert(a,l),o.Ru[o.currentUser.toKey()]=u})(r,i.batchId,n),await dP(r,i.changes),await c9(r.remoteStore)}catch(i){const s=wue(i,"Failed to persist write");n.reject(s)}}async function gWe(e,t){const n=sr(e);try{const r=await mCn(n.localStore,t);t.targetChanges.forEach(((i,s)=>{const o=n.Eu.get(s);o&&(wi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?wi(o.lu,14607):i.removedDocuments.size>0&&(wi(o.lu,42227),o.lu=!1))})),await dP(n,r,t)}catch(r){await dT(r)}}function eTe(e,t,n){const r=sr(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach(((s,o)=>{const a=o.view.va(t);a.snapshot&&i.push(a.snapshot)})),(function(o,a){const l=sr(o);l.onlineState=a;let u=!1;l.queries.forEach(((c,d)=>{for(const f of d.wa)f.va(a)&&(u=!0)})),u&&Eue(l)})(r.eventManager,t),i.length&&r.hu.J_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rSn(e,t,n){const r=sr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Eu.get(t),s=i&&i.key;if(s){let o=new ks($n.comparator);o=o.insert(s,bl.newNoDocument(s,ir.min()));const a=Mr().add(s),l=new l9(ir.min(),new Map,new ks(Er),o,a);await gWe(r,l),r.du=r.du.remove(s),r.Eu.delete(t),Tue(r)}else await LQ(r.localStore,t,!1).then((()=>zQ(r,t,n))).catch(dT)}async function iSn(e,t){const n=sr(e),r=t.batch.batchId;try{const i=await pCn(n.localStore,t);vWe(n,r,null),yWe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await dP(n,i)}catch(i){await dT(i)}}async function sSn(e,t,n){const r=sr(e);try{const i=await(function(o,a){const l=sr(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next((d=>(wi(d!==null,37113),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c))).next((()=>l.localDocuments.getDocuments(u,c)))}))})(r.localStore,t);vWe(r,t,n),yWe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await dP(r,i)}catch(i){await dT(i)}}function yWe(e,t){(e.Vu.get(t)||[]).forEach((n=>{n.resolve()})),e.Vu.delete(t)}function vWe(e,t,n){const r=sr(e);let i=r.Ru[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.Ru[r.currentUser.toKey()]=i}}function zQ(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((r=>{e.Au.containsKey(r)||bWe(e,r)}))}function bWe(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(mue(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Tue(e))}function tTe(e,t,n){for(const r of n)r instanceof hWe?(e.Au.addReference(r.key,t),oSn(e,r)):r instanceof pWe?(Zt(Sue,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||bWe(e,r.key)):Wn(19791,{yu:r})}function oSn(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(Zt(Sue,"New document in limbo: "+n),e.Iu.add(r),Tue(e))}function Tue(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new $n(os.fromString(t)),r=e.mu.next();e.Eu.set(r,new KCn(n)),e.du=e.du.insert(n,r),aWe(e.remoteStore,new Gy(Wp(r9(n.path)),r,"TargetPurposeLimboResolution",ZB.ue))}}async function dP(e,t,n){const r=sr(e),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach(((a,l)=>{o.push(r.gu(l,t,n).then((u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n?.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=hue.Es(l.targetId,u);s.push(d)}})))})),await Promise.all(o),r.hu.J_(i),await(async function(l,u){const c=sr(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>ct.forEach(u,(f=>ct.forEach(f.Is,(h=>c.persistence.referenceDelegate.addReference(d,f.targetId,h))).next((()=>ct.forEach(f.ds,(h=>c.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))))))}catch(d){if(!fT(d))throw d;Zt(pue,"Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const h=c.Fs.get(f),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.Fs=c.Fs.insert(f,m)}}})(r.localStore,s))}async function aSn(e,t){const n=sr(e);if(!n.currentUser.isEqual(t)){Zt(Sue,"User change. New user:",t.toKey());const r=await rWe(n.localStore,t);n.currentUser=t,(function(s,o){s.Vu.forEach((a=>{a.forEach((l=>{l.reject(new nn(dt.CANCELLED,o))}))})),s.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await dP(n,r.Bs)}}function lSn(e,t){const n=sr(e),r=n.Eu.get(t);if(r&&r.lu)return Mr().add(r.key);{let i=Mr();const s=n.Tu.get(t);if(!s)return i;for(const o of s){const a=n.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function wWe(e){const t=sr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gWe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=lSn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rSn.bind(null,t),t.hu.J_=qCn.bind(null,t.eventManager),t.hu.pu=WCn.bind(null,t.eventManager),t}function uSn(e){const t=sr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iSn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=sSn.bind(null,t),t}class rF{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=u9(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return hCn(this.persistence,new cCn,t.initialUser,this.serializer)}Du(t){return new nWe(fue.Vi,this.serializer)}bu(t){return new wCn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rF.provider={build:()=>new rF};class cSn extends rF{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){wi(this.persistence.referenceDelegate instanceof tF,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KEn(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?Vu.withCacheSize(this.cacheSizeBytes):Vu.DEFAULT;return new nWe((r=>tF.Vi(r,n)),this.serializer)}}class VQ{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eTe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aSn.bind(null,this.syncEngine),await VCn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new HCn})()}createDatastore(t){const n=u9(t.databaseInfo.databaseId),r=(function(s){return new SCn(s)})(t.databaseInfo);return(function(s,o,a,l){return new ICn(s,o,a,l)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,i,s,o,a){return new DCn(r,i,s,o,a)})(this.localStore,this.datastore,t.asyncQueue,(n=>eTe(this.syncEngine,n,0)),(function(){return YSe.C()?new YSe:new xCn})())}createSyncEngine(t,n){return(function(i,s,o,a,l,u,c){const d=new XCn(i,s,o,a,l,u);return c&&(d.fu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(i){const s=sr(i);Zt(Vw,"RemoteStore shutting down."),s.Ia.add(5),await cP(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}VQ.provider={build:()=>new VQ};class Aue{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):f0("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const Wv="FirestoreClient";class dSn{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zu.UNAUTHENTICATED,this.clientId=Zle.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{Zt(Wv,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Zt(Wv,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new jg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=wue(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function wW(e,t){e.asyncQueue.verifyOperationInProgress(),Zt(Wv,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async i=>{r.isEqual(i)||(await rWe(t.localStore,i),r=i)})),t.persistence.setDatabaseDeletedListener((()=>{zw("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then((()=>{Zt("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((i=>{zw("Terminating Firestore due to IndexedDb database deletion failed",i)}))})),e._offlineComponents=t}async function nTe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xWe(e);Zt(Wv,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>XSe(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,i)=>XSe(t.remoteStore,i))),e._onlineComponents=t}async function xWe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Zt(Wv,"Using user provided OfflineComponentProvider");try{await wW(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(i){return i.name==="FirebaseError"?i.code===dt.FAILED_PRECONDITION||i.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;zw("Error using user provided cache. Falling back to memory cache: "+n),await wW(e,new rF)}}else Zt(Wv,"Using default OfflineComponentProvider"),await wW(e,new cSn(void 0));return e._offlineComponents}async function kue(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Zt(Wv,"Using user provided OnlineComponentProvider"),await nTe(e,e._uninitializedComponentsProvider._online)):(Zt(Wv,"Using default OnlineComponentProvider"),await nTe(e,new VQ))),e._onlineComponents}function fSn(e){return xWe(e).then((t=>t.persistence))}function hSn(e){return kue(e).then((t=>t.remoteStore))}function pSn(e){return kue(e).then((t=>t.syncEngine))}async function iF(e){const t=await kue(e),n=t.eventManager;return n.onListen=QCn.bind(null,t.syncEngine),n.onUnlisten=eSn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=JCn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=tSn.bind(null,t.syncEngine),n}function mSn(e){return e.asyncQueue.enqueue((async()=>{const t=await fSn(e),n=await hSn(e);return t.setNetworkEnabled(!0),(function(i){const s=sr(i);return s.Ia.delete(0),uP(s)})(n)}))}function gSn(e,t,n={}){const r=new jg;return e.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,u){const c=new Aue({next:f=>{c.Ou(),o.enqueueAndForget((()=>_ue(s,d)));const h=f.docs.has(a);!h&&f.fromCache?u.reject(new nn(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?u.reject(new nn(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Cue(r9(a.path),c,{includeMetadataChanges:!0,ka:!0});return xue(s,d)})(await iF(e),e.asyncQueue,t,n,r))),r.promise}function ySn(e,t,n={}){const r=new jg;return e.asyncQueue.enqueueAndForget((async()=>(function(s,o,a,l,u){const c=new Aue({next:f=>{c.Ou(),o.enqueueAndForget((()=>_ue(s,d))),f.fromCache&&l.source==="server"?u.reject(new nn(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new Cue(a,c,{includeMetadataChanges:!0,ka:!0});return xue(s,d)})(await iF(e),e.asyncQueue,t,n,r))),r.promise}function _We(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const rTe=new Map;const vSn="firestore.googleapis.com",iTe=!0;class sTe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new nn(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vSn,this.ssl=iTe}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:iTe;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=eWe;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<tWe)throw new nn(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}D_n("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_We((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new nn(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new nn(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new nn(dt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Iue{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sTe({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nn(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nn(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sTe(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new E_n;switch(r.type){case"firstParty":return new T_n(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new nn(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=rTe.get(n);r&&(Zt("ComponentProvider","Removing Datastore"),rTe.delete(n),r.terminate())})(this),Promise.resolve()}}class fP{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new fP(this.firestore,t,this._query)}}class so{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fv(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new so(this.firestore,t,this._key)}toJSON(){return{type:so._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(oP(n,so._jsonSchema))return new so(t,r||null,new $n(os.fromString(n.referencePath)))}}so._jsonSchemaVersion="firestore/documentReference/1.0",so._jsonSchema={type:Eo("string",so._jsonSchemaVersion),referencePath:Eo("string")};class fv extends fP{constructor(t,n,r){super(t,n,r9(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new so(this.firestore,null,new $n(t))}withConverter(t){return new fv(this.firestore,t,this._path)}}function vo(e,t,...n){if(e=zi(e),pqe("collection","path",t),e instanceof Iue){const r=os.fromString(t,...n);return bSe(r),new fv(e,null,r)}{if(!(e instanceof so||e instanceof fv))throw new nn(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(os.fromString(t,...n));return bSe(r),new fv(e.firestore,null,r)}}function pi(e,t,...n){if(e=zi(e),arguments.length===1&&(t=Zle.newId()),pqe("doc","path",t),e instanceof Iue){const r=os.fromString(t,...n);return vSe(r),new so(e,null,new $n(r))}{if(!(e instanceof so||e instanceof fv))throw new nn(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(os.fromString(t,...n));return vSe(r),new so(e.firestore,e instanceof fv?e.converter:null,new $n(r))}}const oTe="AsyncQueue";class aTe{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new sWe(this,"async_queue_retry"),this.oc=()=>{const r=bW();r&&Zt(oTe,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=bW();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=bW();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new jg;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!fT(t))throw t;Zt(oTe,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((r=>{throw this.tc=r,this.nc=!1,f0("INTERNAL UNHANDLED ERROR: ",lTe(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const i=bue.createAndSchedule(this,t,n,r,(s=>this.lc(s)));return this.ec.push(i),i}ac(){this.tc&&Wn(47125,{hc:lTe(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function lTe(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function uTe(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(e,["next","error","complete"])}class p0 extends Iue{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new aTe,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new aTe(t),this._firestoreClient=void 0,await t}}}function bSn(e,t,n){n||(n=K$);const r=lT(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(Lw(s,t))return i;throw new nn(dt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new nn(dt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<tWe)throw new nn(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&k1(t.host)&&jle(t.host),r.initialize({options:t,instanceIdentifier:n})}function pT(e){if(e._terminated)throw new nn(dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||wSn(e),e._firestoreClient}function wSn(e){var t,n,r;const i=e._freezeSettings(),s=(function(a,l,u,c){return new V_n(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,_We(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new dSn(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(e._componentsProvider))}function xSn(e){return mSn(pT(e=Vc(e,p0)))}class Od{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Od(Ka.fromBase64String(t))}catch(n){throw new nn(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Od(Ka.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Od._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(oP(t,Od._jsonSchema))return Od.fromBase64String(t.bytes)}}Od._jsonSchemaVersion="firestore/bytes/1.0",Od._jsonSchema={type:Eo("string",Od._jsonSchemaVersion),bytes:Eo("string")};class hP{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new nn(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Va(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class d9{constructor(t){this._methodName=t}}class Yp{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new nn(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nn(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Er(this._lat,t._lat)||Er(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yp._jsonSchemaVersion}}static fromJSON(t){if(oP(t,Yp._jsonSchema))return new Yp(t.latitude,t.longitude)}}Yp._jsonSchemaVersion="firestore/geoPoint/1.0",Yp._jsonSchema={type:Eo("string",Yp._jsonSchemaVersion),latitude:Eo("number"),longitude:Eo("number")};class Kp{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Kp._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(oP(t,Kp._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Kp(t.vectorValues);throw new nn(dt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Kp._jsonSchemaVersion="firestore/vectorValue/1.0",Kp._jsonSchema={type:Eo("string",Kp._jsonSchemaVersion),vectorValues:Eo("object")};const _Sn=/^__.*__$/;class ESn{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new R1(t,this.data,this.fieldMask,n,this.fieldTransforms):new aP(t,this.data,n,this.fieldTransforms)}}class EWe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new R1(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function CWe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wn(40011,{Ec:e})}}class Rue{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new Rue(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.fc(t),i}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return sF(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(CWe(this.Ec)&&_Sn.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class CSn{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||u9(t)}Dc(t,n,r,i=!1){return new Rue({Ec:t,methodName:n,bc:r,path:Va.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Due(e){const t=e._freezeSettings(),n=u9(e._databaseId);return new CSn(e._databaseId,!!t.ignoreUndefinedProperties,n)}function SWe(e,t,n,r,i,s={}){const o=e.Dc(s.merge||s.mergeFields?2:0,t,n,i);Oue("Data must be an object, but it was:",o,r);const a=kWe(r,o);let l,u;if(s.merge)l=new Fc(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=UQ(t,d,n);if(!o.contains(f))throw new nn(dt.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);RWe(c,f)||c.push(f)}l=new Fc(c),u=o.fieldTransforms.filter((d=>l.covers(d.field)))}else l=null,u=o.fieldTransforms;return new ESn(new Yu(a),l,u)}class f9 extends d9{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof f9}}class Pue extends d9{_toFieldTransform(t){return new mEn(t.path,new nR)}isEqual(t){return t instanceof Pue}}function TWe(e,t,n,r){const i=e.Dc(1,t,n);Oue("Data must be an object, but it was:",i,r);const s=[],o=Yu.empty();I1(r,((l,u)=>{const c=Nue(t,l,n);u=zi(u);const d=i.gc(c);if(u instanceof f9)s.push(c);else{const f=h9(u,d);f!=null&&(s.push(c),o.set(c,f))}}));const a=new Fc(s);return new EWe(o,a,i.fieldTransforms)}function AWe(e,t,n,r,i,s){const o=e.Dc(1,t,n),a=[UQ(t,r,n)],l=[i];if(s.length%2!=0)throw new nn(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(UQ(t,s[f])),l.push(s[f+1]);const u=[],c=Yu.empty();for(let f=a.length-1;f>=0;--f)if(!RWe(u,a[f])){const h=a[f];let p=l[f];p=zi(p);const m=o.gc(h);if(p instanceof f9)u.push(h);else{const g=h9(p,m);g!=null&&(u.push(h),c.set(h,g))}}const d=new Fc(u);return new EWe(c,d,o.fieldTransforms)}function h9(e,t){if(IWe(e=zi(e)))return Oue("Unsupported field value:",t,e),kWe(e,t);if(e instanceof d9)return(function(r,i){if(!CWe(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const a of r){let l=h9(a,i.yc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}})(e,t)}return(function(r,i){if((r=zi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fEn(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=gi.fromDate(r);return{timestampValue:eF(i.serializer,s)}}if(r instanceof gi){const s=new gi(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eF(i.serializer,s)}}if(r instanceof Yp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Od)return{bytesValue:Gqe(i.serializer,r._byteString)};if(r instanceof so){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cue(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Kp)return(function(o,a){return{mapValue:{fields:{[Eqe]:{stringValue:Cqe},[X$]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return oue(a.serializer,u)}))}}}}}})(r,i);throw i.wc(`Unsupported field value: ${eue(r)}`)})(e,t)}function kWe(e,t){const n={};return yqe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):I1(e,((r,i)=>{const s=h9(i,t.Vc(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function IWe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof gi||e instanceof Yp||e instanceof Od||e instanceof so||e instanceof d9||e instanceof Kp)}function Oue(e,t,n){if(!IWe(n)||!mqe(n)){const r=eue(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function UQ(e,t,n){if((t=zi(t))instanceof hP)return t._internalPath;if(typeof t=="string")return Nue(e,t);throw sF("Field path arguments must be of type string or ",e,!1,void 0,n)}const SSn=new RegExp("[~\\*/\\[\\]]");function Nue(e,t,n){if(t.search(SSn)>=0)throw sF(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hP(...t.split("."))._internalPath}catch{throw sF(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function sF(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new nn(dt.INVALID_ARGUMENT,a+e+l)}function RWe(e,t){return e.some((n=>n.isEqual(t)))}class DWe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new so(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new TSn(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(PWe("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TSn extends DWe{data(){return super.data()}}function PWe(e,t){return typeof t=="string"?Nue(e,t):t instanceof hP?t._internalPath:t._delegate._internalPath}function OWe(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new nn(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ASn{convertValue(t,n="none"){switch(Hv(t)){case 0:return null;case 1:return t.booleanValue;case 2:return no(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Uv(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Wn(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return I1(t,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n[X$].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map((o=>no(o.doubleValue)));return new Kp(s)}convertGeoPoint(t){return new Yp(no(t.latitude),no(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=t9(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ZI(t));default:return null}}convertTimestamp(t){const n=Vv(t);return new gi(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=os.fromString(t);wi(Zqe(r),9688,{name:t});const i=new eR(r.get(1),r.get(3)),s=new $n(r.popFirst(5));return i.isEqual(n)||f0(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function NWe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class NA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class nw extends DWe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new qM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(PWe("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nn(dt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=nw._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}nw._jsonSchemaVersion="firestore/documentSnapshot/1.0",nw._jsonSchema={type:Eo("string",nw._jsonSchemaVersion),bundleSource:Eo("string","DocumentSnapshot"),bundleName:Eo("string"),bundle:Eo("string")};class qM extends nw{data(t={}){return super.data(t)}}class rw{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new NA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new qM(this._firestore,this._userDataWriter,r.key,r,new NA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new nn(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((a=>{const l=new qM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new NA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((a=>s||a.type!==3)).map((a=>{const l=new qM(i._firestore,i._userDataWriter,a.doc.key,a.doc,new NA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:kSn(a.type),doc:l,oldIndex:u,newIndex:c}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nn(dt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=rw._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Zle.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function kSn(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wn(61501,{type:e})}}function qN(e){e=Vc(e,so);const t=Vc(e.firestore,p0);return gSn(pT(t),e._key).then((n=>MWe(t,e,n)))}rw._jsonSchemaVersion="firestore/querySnapshot/1.0",rw._jsonSchema={type:Eo("string",rw._jsonSchemaVersion),bundleSource:Eo("string","QuerySnapshot"),bundleName:Eo("string"),bundle:Eo("string")};class Mue extends ASn{constructor(t){super(),this.firestore=t}convertBytes(t){return new Od(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new so(this.firestore,null,n)}}function WN(e){e=Vc(e,fP);const t=Vc(e.firestore,p0),n=pT(t),r=new Mue(t);return OWe(e._query),ySn(n,e._query).then((i=>new rw(t,r,e,i)))}function Lu(e,t,n){e=Vc(e,so);const r=Vc(e.firestore,p0),i=NWe(e.converter,t,n);return $ue(r,[SWe(Due(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Uc.none())])}function GN(e,t,n,...r){e=Vc(e,so);const i=Vc(e.firestore,p0),s=Due(i);let o;return o=typeof(t=zi(t))=="string"||t instanceof hP?AWe(s,"updateDoc",e._key,t,n,r):TWe(s,"updateDoc",e._key,t),$ue(i,[o.toMutation(e._key,Uc.exists(!0))])}function ISn(e,...t){var n,r,i;e=zi(e);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||uTe(t[o])||(s=t[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uTe(t[o])){const d=t[o];t[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),t[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),t[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(e instanceof so)u=Vc(e.firestore,p0),c=r9(e._key.path),l={next:d=>{t[o]&&t[o](MWe(u,e,d))},error:t[o+1],complete:t[o+2]};else{const d=Vc(e,fP);u=Vc(d.firestore,p0),c=d._query;const f=new Mue(u);l={next:h=>{t[o]&&t[o](new rw(u,f,d,h))},error:t[o+1],complete:t[o+2]},OWe(e._query)}return(function(f,h,p,m){const g=new Aue(m),y=new Cue(h,g,p);return f.asyncQueue.enqueueAndForget((async()=>xue(await iF(f),y))),()=>{g.Ou(),f.asyncQueue.enqueueAndForget((async()=>_ue(await iF(f),y)))}})(pT(u),c,a,l)}function $ue(e,t){return(function(r,i){const s=new jg;return r.asyncQueue.enqueueAndForget((async()=>nSn(await pSn(r),i,s))),s.promise})(pT(e),t)}function MWe(e,t,n){const r=n.docs.get(t._key),i=new Mue(e);return new nw(e,i,t._key,r,new NA(n.hasPendingWrites,n.fromCache),t.converter)}class RSn{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Due(t)}set(t,n,r){this._verifyNotCommitted();const i=xW(t,this._firestore),s=NWe(i.converter,n,r),o=SWe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Uc.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=xW(t,this._firestore);let o;return o=typeof(n=zi(n))=="string"||n instanceof hP?AWe(this._dataReader,"WriteBatch.update",s._key,n,r,i):TWe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Uc.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=xW(t,this._firestore);return this._mutations=this._mutations.concat(new aue(n._key,Uc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nn(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xW(e,t){if((e=zi(e)).firestore!==t)throw new nn(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function _W(){return new Pue("serverTimestamp")}function cTe(e){return pT(e=Vc(e,p0)),new RSn(e,(t=>$ue(e,t)))}(function(t,n=!0){(function(i){cT=i})(kx),d0(new hm("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new p0(new C_n(r.getProvider("auth-internal")),new A_n(o,r.getProvider("app-check-internal")),(function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new nn(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eR(u.options.projectId,c)})(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a}),"PUBLIC").setMultipleInstances(!0)),dh(hSe,pSe,t),dh(hSe,pSe,"esm2017")})();const HQ=new Map,$We={activated:!1,tokenObservers:[]},DSn={initialized:!1,enabled:!1};function Yo(e){return HQ.get(e)||Object.assign({},$We)}function PSn(e,t){return HQ.set(e,t),HQ.get(e)}function p9(){return DSn}const FWe="https://content-firebaseappcheck.googleapis.com/v1",OSn="exchangeRecaptchaV3Token",NSn="exchangeDebugToken",dTe={RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},MSn=1440*60*1e3;class $Sn{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new XI,this.pending.promise.catch(n=>{}),await FSn(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new XI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function FSn(e){return new Promise(t=>{setTimeout(t,e)})}const LSn={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ju=new aT("appCheck","AppCheck",LSn);function fTe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Fue(e){if(!Yo(e).activated)throw Ju.create("use-before-activation",{appName:e.name})}function LWe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=YN(n)+"d:"),r&&(o+=YN(r)+"h:"),o+=YN(i)+"m:"+YN(s)+"s",o}function YN(e){return e===0?"00":e>=10?e.toString():"0"+e}async function Lue({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(d){throw Ju.create("fetch-network-error",{originalErrorMessage:d?.message})}if(o.status!==200)throw Ju.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Ju.create("fetch-parse-error",{originalErrorMessage:d?.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Ju.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=Number(l[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+u,issuedAtTimeMillis:c}}function jSn(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${FWe}/projects/${n}/apps/${r}:${OSn}?key=${i}`,body:{recaptcha_v3_token:t}}}function jWe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${FWe}/projects/${n}/apps/${r}:${NSn}?key=${i}`,body:{debug_token:t}}}const BSn="firebase-app-check-database",zSn=1,sR="firebase-app-check-store",BWe="debug-token";let KN=null;function zWe(){return KN||(KN=new Promise((e,t)=>{try{const n=indexedDB.open(BSn,zSn);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ju.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(sR,{keyPath:"compositeKey"})}}}catch(n){t(Ju.create("storage-open",{originalErrorMessage:n?.message}))}}),KN)}function VSn(e){return UWe(HWe(e))}function USn(e,t){return VWe(HWe(e),t)}function HSn(e){return VWe(BWe,e)}function qSn(){return UWe(BWe)}async function VWe(e,t){const r=(await zWe()).transaction(sR,"readwrite"),s=r.objectStore(sR).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Ju.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function UWe(e){const n=(await zWe()).transaction(sR,"readonly"),i=n.objectStore(sR).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(Ju.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function HWe(e){return`${e.options.appId}-${e.name}`}const Yy=new JB("@firebase/app-check");async function WSn(e){if(Ble()){let t;try{t=await VSn(e)}catch(n){Yy.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function EW(e,t){return Ble()?USn(e,t).catch(n=>{Yy.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function GSn(){let e;try{e=await qSn()}catch{}if(e)return e;{const t=crypto.randomUUID();return HSn(t).catch(n=>Yy.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}function jue(){return p9().enabled}async function Bue(){const e=p9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function YSn(){const e=$He(),t=p9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new XI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(GSn())}const KSn={error:"UNKNOWN_ERROR"};function XSn(e){return Lle.encodeString(JSON.stringify(e),!1)}async function qQ(e,t=!1,n=!1){const r=e.app;Fue(r);const i=Yo(r);let s=i.token,o;if(s&&!dE(s)&&(i.token=void 0,s=void 0),!s){const u=await i.cachedTokenPromise;u&&(dE(u)?s=u:await EW(r,void 0))}if(!t&&s&&dE(s))return{token:s.token};let a=!1;if(jue())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=Lue(jWe(r,await Bue()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);const u=await i.exchangeTokenPromise;return await EW(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Yy.warn(u.message):n&&Yy.error(u),CW(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await Yo(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Yy.warn(u.message):n&&Yy.error(u),o=u}let l;return s?o?dE(s)?l={token:s.token,internalError:o}:l=CW(o):(l={token:s.token},i.token=s,await EW(r,s)):l=CW(o),a&&GWe(r,l),l}async function QSn(e){const t=e.app;Fue(t);const{provider:n}=Yo(t);if(jue()){const r=await Bue(),{token:i}=await Lue(jWe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function qWe(e,t,n,r){const{app:i}=e,s=Yo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&dE(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),hTe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>hTe(e))}function WWe(e,t){const n=Yo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function hTe(e){const{app:t}=e,n=Yo(t);let r=n.tokenRefresher;r||(r=JSn(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function JSn(e){const{app:t}=e;return new $Sn(async()=>{const n=Yo(t);let r;if(n.token?r=await qQ(e,!0):r=await qQ(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Yo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},dTe.RETRIAL_MIN_WAIT,dTe.RETRIAL_MAX_WAIT)}function GWe(e,t){const n=Yo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function dE(e){return e.expireTimeMillis-Date.now()>0}function CW(e){return{token:XSn(KSn),error:e}}class ZSn{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Yo(this.app);for(const n of t)WWe(this.app,n.next);return Promise.resolve()}}function eTn(e,t){return new ZSn(e,t)}function tTn(e){return{getToken:t=>qQ(e,t),getLimitedUseToken:()=>QSn(e),addTokenListener:t=>qWe(e,"INTERNAL",t),removeTokenListener:t=>WWe(e.app,t)}}const nTn="@firebase/app-check",rTn="0.10.1";const iTn="https://www.google.com/recaptcha/api.js";function sTn(e,t){const n=new XI,r=Yo(e);r.reCAPTCHAState={initialized:n};const i=oTn(e),s=fTe(!1);return s?pTe(e,t,s,i,n):uTn(()=>{const o=fTe(!1);if(!o)throw new Error("no recaptcha");pTe(e,t,o,i,n)}),n.promise}function pTe(e,t,n,r,i){n.ready(()=>{lTn(e,t,n,r),i.resolve(n)})}function oTn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function aTn(e){Fue(e);const n=await Yo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Yo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function lTn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Yo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Yo(e).reCAPTCHAState.succeeded=!1}}),s=Yo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function uTn(e){const t=document.createElement("script");t.src=iTn,t.onload=e,document.head.appendChild(t)}class zue{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;dTn(this._throttleData);const i=await aTn(this._app).catch(o=>{throw Ju.create("recaptcha-error")});if(!(!((t=Yo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ju.create("recaptcha-error");let s;try{s=await Lue(jSn(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=cTn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ju.create("initial-throttle",{time:LWe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=lT(t,"heartbeat"),sTn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof zue?this._siteKey===t._siteKey:!1}}function cTn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+MSn,httpStatus:e};{const n=t?t.backoffCount:0,r=Gbn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function dTn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ju.create("throttled",{time:LWe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function fTn(e=Vle(),t){e=zi(e);const n=lT(e,"app-check");if(p9().initialized||YSn(),jue()&&Bue().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Ju.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return hTn(e,t.provider,t.isTokenAutoRefreshEnabled),Yo(e).isTokenAutoRefreshEnabled&&qWe(r,"INTERNAL",()=>{}),r}function hTn(e,t,n=!1){const r=PSn(e,Object.assign({},$We));r.activated=!0,r.provider=t,r.cachedTokenPromise=WSn(e).then(i=>(i&&dE(i)&&(r.token=i,GWe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n&&e.automaticDataCollectionEnabled,!e.automaticDataCollectionEnabled&&n&&Yy.warn("`isTokenAutoRefreshEnabled` is true but `automaticDataCollectionEnabled` was set to false during `initializeApp()`. This blocks automatic token refresh."),r.provider.initialize(e)}const pTn="app-check",mTe="app-check-internal";function mTn(){d0(new hm(pTn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return eTn(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(mTe).initialize()})),d0(new hm(mTe,e=>{const t=e.getProvider("app-check").getImmediate();return tTn(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),dh(nTn,rTn)}mTn();function YWe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gTn=YWe,KWe=new aT("auth","Firebase",YWe());const oF=new JB("@firebase/auth");function yTn(e,...t){oF.logLevel<=Nr.WARN&&oF.warn(`Auth (${kx}): ${e}`,...t)}function WM(e,...t){oF.logLevel<=Nr.ERROR&&oF.error(`Auth (${kx}): ${e}`,...t)}function gm(e,...t){throw Uue(e,...t)}function fh(e,...t){return Uue(e,...t)}function Vue(e,t,n){const r=Object.assign(Object.assign({},gTn()),{[t]:n});return new aT("auth","Firebase",r).create(t,{appName:e.name})}function hv(e){return Vue(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vTn(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&gm(e,"argument-error"),Vue(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uue(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return KWe.create(e,...t)}function Zn(e,t,...n){if(!e)throw Uue(t,...n)}function Cg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw WM(t),new Error(t)}function m0(e,t){e||Cg(t)}function WQ(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function bTn(){return gTe()==="http:"||gTe()==="https:"}function gTe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function wTn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bTn()||Dbn()||"connection"in navigator)?navigator.onLine:!0}function xTn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class pP{constructor(t,n){this.shortDelay=t,this.longDelay=n,m0(n>t,"Short delay should be less than long delay!"),this.isMobile=kbn()||Pbn()}get(){return wTn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hue(e,t){m0(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class XWe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _Tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const ETn=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CTn=new pP(3e4,6e4);function m9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function mT(e,t,n,r,i={}){return QWe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=rP(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u=Object.assign({method:t,headers:l},s);return Rbn()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&k1(e.emulatorConfig.host)&&(u.credentials="include"),XWe.fetch()(await ZWe(e,e.config.apiHost,n,a),u)})}async function QWe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},_Tn),t);try{const i=new STn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw XN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw XN(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw XN(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw XN(e,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Vue(e,c,u);gm(e,c)}}catch(i){if(i instanceof Fm)throw i;gm(e,"network-request-failed",{message:String(i)})}}async function JWe(e,t,n,r,i={}){const s=await mT(e,t,n,r,i);return"mfaPendingCredential"in s&&gm(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function ZWe(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?Hue(e.config,i):`${e.config.apiScheme}://${i}`;return ETn.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class STn{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fh(this.auth,"network-request-failed")),CTn.get())})}}function XN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fh(e,t,r);return i.customData._tokenResponse=n,i}async function TTn(e,t){return mT(e,"POST","/v1/accounts:delete",t)}async function aF(e,t){return mT(e,"POST","/v1/accounts:lookup",t)}function Sk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ATn(e,t=!1){const n=zi(e),r=await n.getIdToken(t),i=que(r);Zn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Sk(SW(i.auth_time)),issuedAtTime:Sk(SW(i.iat)),expirationTime:Sk(SW(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function SW(e){return Number(e)*1e3}function que(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return WM("JWT malformed, contained fewer than 3 sections"),null;try{const i=MHe(n);return i?JSON.parse(i):(WM("Failed to decode base64 JWT payload"),null)}catch(i){return WM("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yTe(e){const t=que(e);return Zn(t,"internal-error"),Zn(typeof t.exp<"u","internal-error"),Zn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function oR(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Fm&&kTn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function kTn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class ITn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class GQ{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sk(this.lastLoginAt),this.creationTime=Sk(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function lF(e){var t;const n=e.auth,r=await e.getIdToken(),i=await oR(e,aF(n,{idToken:r}));Zn(i?.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?eGe(s.providerUserInfo):[],a=DTn(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!a?.length,c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new GQ(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function RTn(e){const t=zi(e);await lF(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function DTn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function eGe(e){return e.map(t=>{var{providerId:n}=t,r=aR(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function PTn(e,t){const n=await QWe(e,{},async()=>{const r=rP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=await ZWe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return e.emulatorConfig&&k1(e.emulatorConfig.host)&&(l.credentials="include"),XWe.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OTn(e,t){return mT(e,"POST","/v2/accounts:revokeToken",m9(e,t))}class LE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Zn(t.idToken,"internal-error"),Zn(typeof t.idToken<"u","internal-error"),Zn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):yTe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Zn(t.length!==0,"internal-error");const n=yTe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Zn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await PTn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new LE;return r&&(Zn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Zn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Zn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new LE,this.toJSON())}_performRefresh(){return Cg("not implemented")}}function uy(e,t){Zn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class th{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=aR(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ITn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new GQ(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await oR(this,this.stsTokenManager.getToken(this.auth,t));return Zn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ATn(this,t)}reload(){return RTn(this)}_assign(t){this!==t&&(Zn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new th(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Zn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await lF(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nc(this.auth.app))return Promise.reject(hv(this.auth));const t=await this.getIdToken();return await oR(this,TTn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:_,isAnonymous:E,providerData:S,stsTokenManager:T}=n;Zn(b&&T,t,"internal-error");const A=LE.fromJSON(this.name,T);Zn(typeof b=="string",t,"internal-error"),uy(d,t.name),uy(f,t.name),Zn(typeof _=="boolean",t,"internal-error"),Zn(typeof E=="boolean",t,"internal-error"),uy(h,t.name),uy(p,t.name),uy(m,t.name),uy(g,t.name),uy(y,t.name),uy(v,t.name);const R=new th({uid:b,auth:t,email:f,emailVerified:_,displayName:d,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(R.providerData=S.map(I=>Object.assign({},I))),g&&(R._redirectEventId=g),R}static async _fromIdTokenResponse(t,n,r=!1){const i=new LE;i.updateFromServerResponse(n);const s=new th({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await lF(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Zn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?eGe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new LE;a.updateFromIdToken(r);const l=new th({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new GQ(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l}}const vTe=new Map;function Sg(e){m0(e instanceof Function,"Expected a class definition");let t=vTe.get(e);return t?(m0(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vTe.set(e,t),t)}class tGe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}tGe.type="NONE";const bTe=tGe;function GM(e,t,n){return`firebase:${e}:${t}:${n}`}class jE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=GM(this.userKey,i.apiKey,s),this.fullPersistenceKey=GM("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await aF(this.auth,{idToken:t}).catch(()=>{});return n?th._fromGetAccountInfoResponse(this.auth,n,t):null}return th._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new jE(Sg(bTe),t,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Sg(bTe);const o=GM(r,t.config.apiKey,t.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){let d;if(typeof c=="string"){const f=await aF(t,{idToken:c}).catch(()=>{});if(!f)break;d=await th._fromGetAccountInfoResponse(t,f,c)}else d=th._fromJSON(t,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new jE(s,t,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new jE(s,t,r))}}function wTe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(sGe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(nGe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(aGe(t))return"Blackberry";if(lGe(t))return"Webos";if(rGe(t))return"Safari";if((t.includes("chrome/")||iGe(t))&&!t.includes("edge/"))return"Chrome";if(oGe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function nGe(e=Ml()){return/firefox\//i.test(e)}function rGe(e=Ml()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function iGe(e=Ml()){return/crios\//i.test(e)}function sGe(e=Ml()){return/iemobile/i.test(e)}function oGe(e=Ml()){return/android/i.test(e)}function aGe(e=Ml()){return/blackberry/i.test(e)}function lGe(e=Ml()){return/webos/i.test(e)}function Wue(e=Ml()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function NTn(e=Ml()){var t;return Wue(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function MTn(){return Obn()&&document.documentMode===10}function uGe(e=Ml()){return Wue(e)||oGe(e)||lGe(e)||aGe(e)||/windows phone/i.test(e)||sGe(e)}function cGe(e,t=[]){let n;switch(e){case"Browser":n=wTe(Ml());break;case"Worker":n=`${wTe(Ml())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${kx}/${r}`}class $Tn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const l=t(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function FTn(e,t={}){return mT(e,"GET","/v2/passwordPolicy",m9(e,t))}const LTn=6;class jTn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LTn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}class BTn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xTe(this),this.idTokenSubscription=new xTe(this),this.beforeStateQueue=new $Tn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KWe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Sg(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await jE.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await aF(this,{idToken:t}),r=await th._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Nc(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Zn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await lF(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=xTn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Nc(this.app))return Promise.reject(hv(this));const n=t?zi(t):null;return n&&Zn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Zn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Nc(this.app)?Promise.reject(hv(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Nc(this.app)?Promise.reject(hv(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sg(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await FTn(this),n=new jTn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new aT("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OTn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Sg(t)||this._popupRedirectResolver;Zn(n,this,"argument-error"),this.redirectPersistenceManager=await jE.create(this,[Sg(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Zn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Zn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=cGe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;if(Nc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&yTn(`Error while retrieving App Check token: ${n.error}`),n?.token}}function mP(e){return zi(e)}class xTe{constructor(t){this.auth=t,this.observer=null,this.addObserver=Bbn(n=>this.observer=n)}get next(){return Zn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gue={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zTn(e){Gue=e}function VTn(e){return Gue.loadJS(e)}function UTn(){return Gue.gapiScript}function HTn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function qTn(e,t){const n=lT(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Lw(s,t??{}))return i;gm(i,"already-initialized")}return n.initialize({options:t})}function WTn(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Sg);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function GTn(e,t,n){const r=mP(e);Zn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=dGe(t),{host:o,port:a}=YTn(t),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Zn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Zn(Lw(u,r.config.emulator)&&Lw(c,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,k1(o)?(jle(`${s}//${o}${l}`),BHe("Auth",!0)):KTn()}function dGe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function YTn(e){const t=dGe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:_Te(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:_Te(o)}}}function _Te(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function KTn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class fGe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Cg("not implemented")}_getIdTokenResponse(t){return Cg("not implemented")}_linkToIdToken(t,n){return Cg("not implemented")}_getReauthenticationResolver(t){return Cg("not implemented")}}async function BE(e,t){return JWe(e,"POST","/v1/accounts:signInWithIdp",m9(e,t))}const XTn="http://localhost";class Uw extends fGe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Uw(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):gm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=aR(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Uw(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return BE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,BE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,BE(t,n)}buildRequest(){const t={requestUri:XTn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=rP(n)}return t}}class Yue{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class gP extends Yue{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Dy extends gP{constructor(){super("facebook.com")}static credential(t){return Uw._fromParams({providerId:Dy.PROVIDER_ID,signInMethod:Dy.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dy.credentialFromTaggedObject(t)}static credentialFromError(t){return Dy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dy.credential(t.oauthAccessToken)}catch{return null}}}Dy.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dy.PROVIDER_ID="facebook.com";class hg extends gP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Uw._fromParams({providerId:hg.PROVIDER_ID,signInMethod:hg.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return hg.credentialFromTaggedObject(t)}static credentialFromError(t){return hg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return hg.credential(n,r)}catch{return null}}}hg.GOOGLE_SIGN_IN_METHOD="google.com";hg.PROVIDER_ID="google.com";class Py extends gP{constructor(){super("github.com")}static credential(t){return Uw._fromParams({providerId:Py.PROVIDER_ID,signInMethod:Py.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Py.credentialFromTaggedObject(t)}static credentialFromError(t){return Py.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Py.credential(t.oauthAccessToken)}catch{return null}}}Py.GITHUB_SIGN_IN_METHOD="github.com";Py.PROVIDER_ID="github.com";class Oy extends gP{constructor(){super("twitter.com")}static credential(t,n){return Uw._fromParams({providerId:Oy.PROVIDER_ID,signInMethod:Oy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Oy.credentialFromTaggedObject(t)}static credentialFromError(t){return Oy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Oy.credential(n,r)}catch{return null}}}Oy.TWITTER_SIGN_IN_METHOD="twitter.com";Oy.PROVIDER_ID="twitter.com";async function QTn(e,t){return JWe(e,"POST","/v1/accounts:signUp",m9(e,t))}class Gv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await th._fromIdTokenResponse(t,r,i),o=ETe(r);return new Gv({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=ETe(r);return new Gv({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function ETe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function JTn(e){var t;if(Nc(e.app))return Promise.reject(hv(e));const n=mP(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Gv({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await QTn(n,{returnSecureToken:!0}),i=await Gv._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}class uF extends Fm{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,uF.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new uF(t,n,r,i)}}function hGe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?uF._fromErrorAndOperation(e,s,t,r):s})}async function ZTn(e,t,n=!1){const r=await oR(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Gv._forOperation(e,"link",r)}async function e2n(e,t,n=!1){const{auth:r}=e;if(Nc(r.app))return Promise.reject(hv(r));const i="reauthenticate";try{const s=await oR(e,hGe(r,i,t,e),n);Zn(s.idToken,r,"internal-error");const o=que(s.idToken);Zn(o,r,"internal-error");const{sub:a}=o;return Zn(e.uid===a,r,"user-mismatch"),Gv._forOperation(e,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&gm(r,"user-mismatch"),s}}async function t2n(e,t,n=!1){if(Nc(e.app))return Promise.reject(hv(e));const r="signIn",i=await hGe(e,r,t),s=await Gv._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function n2n(e,t,n,r){return zi(e).onIdTokenChanged(t,n,r)}function r2n(e,t,n){return zi(e).beforeAuthStateChanged(t,n)}function i2n(e,t,n,r){return zi(e).onAuthStateChanged(t,n,r)}function s2n(e){return zi(e).signOut()}const cF="__sak";class pGe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cF,"1"),this.storage.removeItem(cF),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const o2n=1e3,a2n=10;class mGe extends pGe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uGe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);MTn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,a2n):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},o2n)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}mGe.type="LOCAL";const l2n=mGe;class gGe extends pGe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}gGe.type="SESSION";const yGe=gGe;function u2n(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class g9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new g9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await u2n(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}g9.receivers=[];function Kue(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}class c2n{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Kue("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function Xp(){return window}function d2n(e){Xp().location.href=e}function vGe(){return typeof Xp().WorkerGlobalScope<"u"&&typeof Xp().importScripts=="function"}async function f2n(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function h2n(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function p2n(){return vGe()?self:null}const bGe="firebaseLocalStorageDb",m2n=1,dF="firebaseLocalStorage",wGe="fbase_key";class yP{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function y9(e,t){return e.transaction([dF],t?"readwrite":"readonly").objectStore(dF)}function g2n(){const e=indexedDB.deleteDatabase(bGe);return new yP(e).toPromise()}function YQ(){const e=indexedDB.open(bGe,m2n);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(dF,{keyPath:wGe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(dF)?t(r):(r.close(),await g2n(),t(await YQ()))})})}async function CTe(e,t,n){const r=y9(e,!0).put({[wGe]:t,value:n});return new yP(r).toPromise()}async function y2n(e,t){const n=y9(e,!1).get(t),r=await new yP(n).toPromise();return r===void 0?null:r.value}function STe(e,t){const n=y9(e,!0).delete(t);return new yP(n).toPromise()}const v2n=800,b2n=3;class xGe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await YQ(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>b2n)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vGe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=g9._getInstance(p2n()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await f2n(),!this.activeServiceWorker)return;this.sender=new c2n(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||h2n()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await YQ();return await CTe(t,cF,"1"),await STe(t,cF),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>CTe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>y2n(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>STe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=y9(i,!1).getAll();return new yP(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v2n)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xGe.type="LOCAL";const w2n=xGe;new pP(3e4,6e4);function _Ge(e,t){return t?Sg(t):(Zn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class Xue extends fGe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return BE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return BE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return BE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function x2n(e){return t2n(e.auth,new Xue(e),e.bypassAuthState)}function _2n(e){const{auth:t,user:n}=e;return Zn(n,t,"internal-error"),e2n(n,new Xue(e),e.bypassAuthState)}async function E2n(e){const{auth:t,user:n}=e;return Zn(n,t,"internal-error"),ZTn(n,new Xue(e),e.bypassAuthState)}class EGe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return x2n;case"linkViaPopup":case"linkViaRedirect":return E2n;case"reauthViaPopup":case"reauthViaRedirect":return _2n;default:gm(this.auth,"internal-error")}}resolve(t){m0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){m0(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const C2n=new pP(2e3,1e4);async function S2n(e,t,n){if(Nc(e.app))return Promise.reject(fh(e,"operation-not-supported-in-this-environment"));const r=mP(e);vTn(e,t,Yue);const i=_Ge(r,n);return new zb(r,"signInViaPopup",t,i).executeNotNull()}class zb extends EGe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,zb.currentPopupAction&&zb.currentPopupAction.cancel(),zb.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Zn(t,this.auth,"internal-error"),t}async onExecution(){m0(this.filter.length===1,"Popup operations only handle one event");const t=Kue();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fh(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(fh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zb.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fh(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,C2n.get())};t()}}zb.currentPopupAction=null;const T2n="pendingRedirect",YM=new Map;class A2n extends EGe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=YM.get(this.auth._key());if(!t){try{const r=await k2n(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}YM.set(this.auth._key(),t)}return this.bypassAuthState||YM.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k2n(e,t){const n=D2n(t),r=R2n(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function I2n(e,t){YM.set(e._key(),t)}function R2n(e){return Sg(e._redirectPersistence)}function D2n(e){return GM(T2n,e.config.apiKey,e.name)}async function P2n(e,t,n=!1){if(Nc(e.app))return Promise.reject(hv(e));const r=mP(e),i=_Ge(r,t),o=await new A2n(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}const O2n=600*1e3;class N2n{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!M2n(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!CGe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fh(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=O2n&&this.cachedEventUids.clear(),this.cachedEventUids.has(TTe(t))}saveEventToCache(t){this.cachedEventUids.add(TTe(t)),this.lastProcessedEventTime=Date.now()}}function TTe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function CGe({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function M2n(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CGe(e);default:return!1}}async function $2n(e,t={}){return mT(e,"GET","/v1/projects",t)}const F2n=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L2n=/^https?/;async function j2n(e){if(e.config.emulator)return;const{authorizedDomains:t}=await $2n(e);for(const n of t)try{if(B2n(n))return}catch{}gm(e,"unauthorized-domain")}function B2n(e){const t=WQ(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!L2n.test(n))return!1;if(F2n.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const z2n=new pP(3e4,6e4);function ATe(){const e=Xp().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function V2n(e){return new Promise((t,n)=>{var r,i,s;function o(){ATe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ATe(),n(fh(e,"network-request-failed"))},timeout:z2n.get()})}if(!((i=(r=Xp().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Xp().gapi)===null||s===void 0)&&s.load)o();else{const a=HTn("iframefcb");return Xp()[a]=()=>{gapi.load?o():n(fh(e,"network-request-failed"))},VTn(`${UTn()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw KM=null,t})}let KM=null;function U2n(e){return KM=KM||V2n(e),KM}const H2n=new pP(5e3,15e3),q2n="__/auth/iframe",W2n="emulator/auth/iframe",G2n={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y2n=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K2n(e){const t=e.config;Zn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hue(t,W2n):`https://${e.config.authDomain}/${q2n}`,r={apiKey:t.apiKey,appName:e.name,v:kx},i=Y2n.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${rP(r).slice(1)}`}async function X2n(e){const t=await U2n(e),n=Xp().gapi;return Zn(n,e,"internal-error"),t.open({where:document.body,url:K2n(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G2n,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=fh(e,"network-request-failed"),a=Xp().setTimeout(()=>{s(o)},H2n.get());function l(){Xp().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}const Q2n={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J2n=500,Z2n=600,eAn="_blank",tAn="http://localhost";class kTe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nAn(e,t,n,r=J2n,i=Z2n){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Q2n),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ml().toLowerCase();n&&(a=iGe(u)?eAn:n),nGe(u)&&(t=t||tAn,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(NTn(u)&&a!=="_self")return rAn(t||"",a),new kTe(null);const d=window.open(t||"",a,c);Zn(d,e,"popup-blocked");try{d.focus()}catch{}return new kTe(d)}function rAn(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const iAn="__/auth/handler",sAn="emulator/auth/handler",oAn=encodeURIComponent("fac");async function ITe(e,t,n,r,i,s){Zn(e.config.authDomain,e,"auth-domain-config-required"),Zn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kx,eventId:i};if(t instanceof Yue){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",jbn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof gP){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${oAn}=${encodeURIComponent(l)}`:"";return`${aAn(e)}?${rP(a).slice(1)}${u}`}function aAn({config:e}){return e.emulator?Hue(e,sAn):`https://${e.authDomain}/${iAn}`}const TW="webStorageSupport";class lAn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yGe,this._completeRedirectFn=P2n,this._overrideRedirectResult=I2n}async _openPopup(t,n,r,i){var s;m0((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ITe(t,n,r,WQ(),i);return nAn(t,o,Kue())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await ITe(t,n,r,WQ(),i);return d2n(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(m0(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await X2n(t),r=new N2n(t);return n.register("authEvent",i=>(Zn(i?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(TW,{type:TW},i=>{var s;const o=(s=i?.[0])===null||s===void 0?void 0:s[TW];o!==void 0&&n(!!o),gm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j2n(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return uGe()||rGe()||Wue()}}const SGe=lAn;var RTe="@firebase/auth",DTe="1.10.8";class uAn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Zn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cAn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dAn(e){d0(new hm("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Zn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cGe(e)},u=new BTn(r,i,s,l);return WTn(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),d0(new hm("auth-internal",t=>{const n=mP(t.getProvider("auth").getImmediate());return(r=>new uAn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),dh(RTe,DTe,cAn(e)),dh(RTe,DTe,"esm2017")}const fAn=300,hAn=jHe("authIdTokenMaxAge")||fAn;let PTe=null;const pAn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hAn)return;const i=n?.token;PTe!==i&&(PTe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function QN(e=Vle()){const t=lT(e,"auth");if(t.isInitialized())return t.getImmediate();const n=qTn(e,{popupRedirectResolver:SGe,persistence:[w2n,l2n,yGe]}),r=jHe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=pAn(s.toString());r2n(n,o,()=>o(n.currentUser)),n2n(n,a=>o(a))}}const i=FHe("auth");return i&&GTn(n,`http://${i}`),n}function mAn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}zTn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=fh("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mAn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dAn("Browser");class gAn extends ubn{RECAPTCHAV3TOKEN="6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth";firestore;studyCollection;storage;constructor(t=!1){super("firebase",t);const n=gbn.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=UHe(n);this.firestore=bSn(r,{}),this.studyCollection=vo(this.firestore,"_revisit"),this.storage=jN();try{fTn(r,{provider:new zue(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async _getFromStorage(t,n,r){const i=xd(this.storage,`${this.collectionPrefix}${r||this.studyId}/${t}_${n}`);let s={};try{const o=await B2(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`${t} does not have ${n} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _pushToStorage(t,n,r){const i=xd(this.storage,`${this.collectionPrefix}${this.studyId}/${t}_${n}`);if(r instanceof Blob)await mW(i,r);else if(Object.keys(r).length>0){const s=new Blob([JSON.stringify(r)],{type:"application/json"});await mW(i,s)}}async _deleteFromStorage(t,n){const r=xd(this.storage,`${this.collectionPrefix}${this.studyId}/${t}_${n}`);await dSe(r)}async _cacheStorageObject(t,n){const r=xd(this.storage,`${this.collectionPrefix}${this.studyId}/${t}_${n}`);await v_n(r,{cacheControl:"public,max-age=31536000"})}async _verifyStudyDatabase(){if(!this.studyCollection)throw new Error("Study database not initialized")}async _getCurrentConfigHash(){await this.verifyStudyDatabase();const t=pi(this.studyCollection,"configHash"),n=await qN(t);return n.exists()?n.data().configHash:null}async _setCurrentConfigHash(t){await this.verifyStudyDatabase();const n=pi(this.studyCollection,"configHash");await Lu(n,{configHash:t})}async getAllSequenceAssignments(t){const n=vo(this.firestore,`${this.collectionPrefix}${t}`),r=pi(n,"sequenceAssignment"),i=vo(r,"sequenceAssignment");return(await WN(i)).docs.map(o=>o.data()).map(o=>({...o,timestamp:o.timestamp instanceof gi?o.timestamp.toMillis():o.timestamp,createdTime:o.createdTime instanceof gi?o.createdTime.toMillis():o.createdTime,completed:o.completed instanceof gi?o.completed.toMillis():o.completed})).sort((o,a)=>o.timestamp-a.timestamp)}_setupSequenceAssignmentListener(t,n){const r=vo(this.firestore,`${this.collectionPrefix}${t}`),i=pi(r,"sequenceAssignment"),s=vo(i,"sequenceAssignment");return ISn(s,o=>{const a=o.docs.map(l=>l.data()).map(l=>({...l,timestamp:l.timestamp instanceof gi?l.timestamp.toMillis():l.timestamp,createdTime:l.createdTime instanceof gi?l.createdTime.toMillis():l.createdTime,completed:l.completed instanceof gi?l.completed.toMillis():l.completed})).sort((l,u)=>l.timestamp-u.timestamp);n(a)})}async _createSequenceAssignment(t,n,r=!1){if(this.studyId===void 0)throw new Error("Study ID is not set");const i=pi(this.studyCollection,"sequenceAssignment"),s=vo(i,"sequenceAssignment"),o=pi(s,t),a=r?{...n,timestamp:_W()}:n;await Lu(o,{...a,createdTime:_W()})}async _completeCurrentParticipantRealtime(){if(await this.verifyStudyDatabase(),!this.currentParticipantId)throw new Error("Participant not initialized");if(!this.studyId)throw new Error("Study ID is not set");const t=pi(this.studyCollection,"sequenceAssignment"),n=vo(t,"sequenceAssignment"),r=pi(n,this.currentParticipantId);await GN(r,{completed:_W()})}async _rejectParticipantRealtime(t){if(await this.verifyStudyDatabase(),!this.studyId)throw new Error("Study ID is not set");const n=vo(this.firestore,`${this.collectionPrefix}${this.studyId}`),r=pi(n,"sequenceAssignment"),i=vo(r,"sequenceAssignment"),s=pi(i,t);await GN(s,{rejected:!0})}async _undoRejectParticipantRealtime(t){if(await this.verifyStudyDatabase(),!this.currentParticipantId)throw new Error("Participant not initialized");if(!this.studyId)throw new Error("Study ID is not set");const n=vo(this.firestore,`${this.collectionPrefix}${this.studyId}`),r=pi(n,"sequenceAssignment"),i=vo(r,"sequenceAssignment"),s=pi(i,t);await GN(s,{rejected:!1})}async _claimSequenceAssignment(t){if(await this.verifyStudyDatabase(),!this.currentParticipantId)throw new Error("Participant not initialized");if(!this.studyId)throw new Error("Study ID is not set");const n=pi(this.studyCollection,"sequenceAssignment"),r=vo(n,"sequenceAssignment"),i=pi(r,t);await GN(i,{claimed:!0})}async initializeStudyDb(t){try{const n=QN();if(await n.authStateReady(),!n.currentUser)try{if(await JTn(n),!n.currentUser)throw new Error("Login failed with firebase")}catch(r){console.error("Firebase anonymous sign-in failed:",r)}this.studyCollection=vo(this.firestore,`${this.collectionPrefix}${t}`),this.studyId=t}catch{console.warn("Failed to connect to Firebase.")}}async connect(){try{await xSn(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async getModes(t){const n=pi(this.firestore,`${this.collectionPrefix}${t}`,"modes"),r=await qN(n);if(r.exists())return r.data();const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Lu(n,i),i}async setMode(t,n,r){const i=pi(this.firestore,`${this.collectionPrefix}${t}`,"modes");return await Lu(i,{[n]:r},{merge:!0})}async _setModesDocument(t,n){const r=pi(this.firestore,`${this.collectionPrefix}${t}`,"modes");await Lu(r,n,{merge:!0})}async _getAudioUrl(t,n){const r=jN(),i=xd(r,`${this.collectionPrefix}${this.studyId}/audio/${n}_${t}`);try{return await B2(i)}catch{return console.warn(`Audio for task ${t} and participant ${n} not found.`),null}}async _getScreenRecordingUrl(t,n){const r=jN(),i=xd(r,`${this.collectionPrefix}${this.studyId}/screenRecording/${n}_${t}`);try{return await B2(i)}catch{return console.warn(`Screen recording for task ${t} and participant ${n} not found.`),null}}async _getTranscriptUrl(t,n){const r=jN(),i=xd(r,`${this.collectionPrefix}${this.studyId}/audio/${n}_${t}.wav_transcription.txt`);try{return await B2(i)}catch{return console.warn(`Transcript for task ${t} and participant ${n} not found.`),null}}async _testingReset(){throw new Error("Testing reset not implemented for FirebaseStorageEngine")}async getSnapshots(t){try{const n=pi(this.firestore,`${this.collectionPrefix}${t}`,"snapshots"),r=await qN(n);return r.exists()?r.data():{}}catch(n){throw console.error("Error listing collections with prefix:",n),n}}async _directoryExists(t){try{const n=xd(this.storage,t);return(await gW(n)).items.length>0}catch(n){if(n.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",n),n}}async _copyDirectory(t,n){try{const r=xd(this.storage,t),s=(await gW(r)).items.map(o=>{const a=o.fullPath,l=a.replace(t,n);return this._copyFile(a,l)});await Promise.all(s)}catch(r){console.error("Error copying file:",r)}}async _deleteDirectory(t){try{const n=xd(this.storage,t),i=(await gW(n)).items.map(s=>dSe(s));await Promise.all(i)}catch(n){console.error("Error deleting files in directory:",n)}}async _copyRealtimeData(t,n){const r=vo(this.firestore,t),i=pi(r,"sequenceAssignment"),s=vo(i,"sequenceAssignment"),o=vo(this.firestore,n),a=pi(o,"sequenceAssignment");await Lu(a,{});const l=vo(a,"sequenceAssignment"),u=await WN(s),c=cTe(this.firestore);u.docs.forEach(d=>{const f=pi(l,d.id);c.set(f,d.data())}),await c.commit()}async _deleteRealtimeData(t){const n=vo(this.firestore,t),r=pi(n,"sequenceAssignment"),i=vo(r,"sequenceAssignment"),s=await WN(i),o=cTe(this.firestore);s.forEach(a=>{const l=pi(i,a.id);o.delete(l)}),o.delete(r),await o.commit()}async _addDirectoryNameToSnapshots(t){try{const n=pi(this.firestore,`${this.collectionPrefix}${this.studyId}`,"snapshots");await Lu(n,{[t]:{name:t}},{merge:!0})}catch(n){throw console.error("Error adding collection to metadata:",n),n}}async _removeDirectoryNameFromSnapshots(t){try{const n=pi(this.firestore,`${this.collectionPrefix}${this.studyId}`,"snapshots"),r=await qN(n);if(r.exists()){const i=r.data();i[t]?(delete i[t],await Lu(n,i)):console.warn(`${t} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(n){throw console.error("Error removing collection from metadata:",n),n}}async _changeDirectoryNameInSnapshots(t,n){const r=pi(this.firestore,`${this.collectionPrefix}${this.studyId}`,"snapshots");await Lu(r,{[t]:{name:n}},{merge:!0})}async _copyFile(t,n){try{const r=xd(this.storage,t),i=xd(this.storage,n),s=await B2(r),a=await(await fetch(s)).blob();await mW(i,a)}catch(r){console.error("Error copying file:",r)}}async getUserManagementData(t){if(Object.keys(this.userManagementData).length===0){const n=vo(this.firestore,"user-management"),r=await WN(n),i=Object.fromEntries(r.docs.map(s=>[s.id,s.data()]));this.userManagementData=i}if(t in this.userManagementData){if(t==="authentication"){const n=this.userManagementData[t];if(n&&typeof n=="object"&&"isEnabled"in n)return n}else if(t==="adminUsers"){const n=this.userManagementData[t];if(n&&typeof n=="object"&&"adminUsersList"in n)return n}}}async _updateAdminUsersList(t){await Lu(pi(this.firestore,"user-management","adminUsers"),{adminUsersList:t.adminUsersList})}async changeAuth(t){await Lu(pi(this.firestore,"user-management","authentication"),{isEnabled:t})}async addAdminUser(t){const n=await this.getUserManagementData("adminUsers");if(n?.adminUsersList){const r=n.adminUsersList;r.find(s=>s.email===t.email)||(r.push({email:t.email,uid:t.uid}),await Lu(pi(this.firestore,"user-management","adminUsers"),{adminUsersList:r}))}else await Lu(pi(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:t.email,uid:t.uid}]})}async removeAdminUser(t){const n=await this.getUserManagementData("adminUsers");n?.adminUsersList&&n.adminUsersList.length>1&&n.adminUsersList.find(r=>r.email===t)&&(n.adminUsersList=n?.adminUsersList.filter(r=>r.email!==t),await Lu(pi(this.firestore,"user-management","adminUsers"),{adminUsersList:n?.adminUsersList}))}async login(){const t=new hg,n=QN();return S2n(n,t,SGe),{email:n.currentUser?.email||null,uid:n.currentUser?.uid||null}}unsubscribe(t){const n=QN(),r=i2n(n,async i=>await t(i));return()=>r()}async logout(){const t=QN();await s2n(t)}async getTranscription(t,n){return await this._getFromStorage(`audio/${n}_${t}.wav`,"transcription.txt")}async getEditedTranscript(t,n,r){const i=await this._getFromStorage(`audio/transcriptAndTags/${n}/${t}/${r}`,"editedText");if(Array.isArray(i)){const s=await this.getTags("text");return s&&i.forEach(o=>{o.selectedTags=o.selectedTags.map(a=>s.find(u=>u.id===a.id))}),i}return this.saveEditedTranscript(t,n,r,[]),[]}async saveEditedTranscript(t,n,r,i){const s=i.map(o=>({...o,selectedTags:o.selectedTags.filter(a=>a!==void 0)}));return this._pushToStorage(`audio/transcriptAndTags/${n}/${t}/${r}`,"editedText",s)}}async function yAn(){let e,t=!1;{const n=new gAn;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new cbn;await n.connect(),e=n}return e}function z2({title:e}){const t=hf();return k.useEffect(()=>{document.title=e},[t,e]),null}async function vAn(){const t=await(await fetch(`${as}global.json`)).text();return hgn(t)}function bAn(){const[e,t]=k.useState(null),[n,r]=k.useState({});k.useEffect(()=>{async function a(){e&&r(await ggn(e))}a()},[e]),k.useEffect(()=>{e||vAn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Vi();k.useEffect(()=>{if(i!==void 0)return;async function a(){const l=await yAn();s(l)}a()},[s,i]);const o=async a=>i&&Ad(i)?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?w.jsx($at,{basename:as,children:w.jsx(H1t,{children:w.jsx(Qat,{children:w.jsxs(fat,{children:[w.jsx(ub,{path:"/",element:w.jsxs(w.Fragment,{children:[w.jsx(z2,{title:"ReVISit | Home"}),w.jsxs(ps,{padding:"md",header:{height:70},children:[w.jsx(NM,{studyIds:e.configsList}),w.jsx(W1t,{globalConfig:e,studyConfigs:n})]})]})}),w.jsx(ub,{path:"/:studyId/*",element:w.jsxs(w.Fragment,{children:[w.jsx(z2,{title:"ReVISit | Study"}),w.jsx(ygn,{globalConfig:e})]})}),w.jsx(ub,{path:"/analysis/stats/:studyId/:analysisTab/:trialId?",element:w.jsxs(w.Fragment,{children:[w.jsx(z2,{title:"ReVISit | Analysis"}),w.jsx(FCe,{paramToCheck:"studyId",paramCallback:o,children:w.jsx(ps,{padding:"md",header:{height:70},children:w.jsx(nbn,{globalConfig:e})})})]})}),w.jsx(ub,{path:"/analysis/stats/:studyId",element:w.jsx(hVe,{to:"./summary",replace:!0})}),w.jsx(ub,{path:"/settings",element:w.jsxs(FCe,{children:[w.jsx(z2,{title:"ReVISit | Settings"}),w.jsxs(ps,{padding:"md",header:{height:70},children:[w.jsx(NM,{studyIds:e.configsList}),w.jsx(ps.Main,{children:w.jsx(ibn,{})})]})]})}),w.jsx(ub,{path:"/login",element:w.jsxs(w.Fragment,{children:[w.jsx(z2,{title:"ReVISit | Login"}),w.jsxs(ps,{padding:"md",header:{height:70},children:[w.jsx(NM,{studyIds:e.configsList}),w.jsx(ps.Main,{children:w.jsx(rbn,{})})]})]})})]})})})}):null}BYe.createRoot(document.getElementById("root")).render(w.jsx(bn.StrictMode,{children:w.jsx(xot,{children:w.jsxs(i2e,{children:[w.jsx(C0,{}),w.jsx(bAn,{})]})})}));
